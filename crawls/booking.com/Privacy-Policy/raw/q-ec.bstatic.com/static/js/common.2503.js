function createCookie(k,j,h){var g="";if(h){var f=new Date();f.setTime(f.getTime()+(h*24*60*60*1000));g="; expires="+f.toGMTString()}document.cookie=k+"="+j+g+"; path=/"}function readCookie(c){var j=c+"=";var g=document.cookie.split(";");for(var k=0;k<g.length;k++){var h=g[k];while(h.charAt(0)==" "){h=h.substring(1,h.length)}if(h.indexOf(j)===0){return h.substring(j.length,h.length)}}return null}function eraseCookie(c){createCookie(c,"",-1)}function scriptsTrackingString(){var j,f,h="{",g=booking.env.scripts_tracking;for(j in g){if(g.hasOwnProperty(j)){f=g[j];h+='"'+j+'":{"loaded":'+!!f.loaded+',"run":'+!!f.run+"},"}}h=h.slice(0,h.length-1)+"}";return"&scripts="+encodeURIComponent(h)}var report_error;function send_error_report(){if(report_error&&document.getElementById&&document.getElementById("req_info")){report_error(document.getElementById("req_info").innerHTML);report_error=null}else{if(report_error){setTimeout(send_error_report,100)}}}window.onabort=function(){document.ff_kill=true};function handleBeforeUnload(){document.ff_kill=true}if(window.addEventListener){if(typeof window.onbeforeunload!=="undefined"){window.addEventListener("beforeunload",handleBeforeUnload,false)}}window.onerror=function(m,k,q){var t=readCookie("error_catcher");if(typeof document.ff_kill!=="undefined"&&document.ff_kill===true&&navigator.userAgent.search("Firefox")!=-1&&m==="Error loading script"){return false}if(t=="kill"||(typeof document.kill!="undefined"&&document.kill===true)){return false}if(typeof window.booking_error_count==="undefined"||isNaN(window.booking_error_count)||isNaN(window.booking_error_previous)){window.booking_error_count=0;window.booking_error_previous=0;window.booking_error_sent=0}if(window.booking_error_sent>5){return}window.booking_error_count++;var o;if(window.XMLHttpRequest){try{o=new window.XMLHttpRequest()}catch(n){o=false}}else{var l=new Array("Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP");for(var u=0;u<l.length;u++){try{o=new ActiveXObject(l[u]);window.status=u;break}catch(n){o=false}}}if(o){report_error=function(d){var f="error="+encodeURIComponent(m)+"&pid="+encodeURIComponent(booking.env.pageview_id);if(typeof m==="object"){var g="";if(m.srcElement&&m.srcElement.src){g+="scriptSrc="+m.srcElement.src}else{g+="scriptSrc=inline"}f="error="+encodeURIComponent(m+" :: "+g)+"&pid="+encodeURIComponent(booking.env.pageview_id)}f+="&url="+encodeURIComponent(k!==""&&typeof k!=="undefined"?k:location.href.split("?")[0]);if(typeof PageLoadTimer!=="undefined"){var c="&since="+(+new Date()-PageLoadTimer.start)+"&ready="+(PageLoadTimer.document_ready-PageLoadTimer.start?PageLoadTimer.document_ready-PageLoadTimer.start:0)+"&loaded="+(PageLoadTimer.window_load-PageLoadTimer.start?PageLoadTimer.window_load-PageLoadTimer.start:0);f+=c}if(booking.env.enable_scripts_tracking){f+=scriptsTrackingString()}if(Number(q)){f+="&lno="+Number(q)}if(d){f+="&info="+d}f+="&errc="+window.booking_error_count+"&errp="+window.booking_error_previous;window.booking_error_previous=window.booking_error_count;o.open("GET","/js_errors?"+f,true);o.setRequestHeader("Content-type","application/x-www-form-urlencoded");o.setRequestHeader("Content-length",0);o.setRequestHeader("Connection","close");o.onreadystatechange=function(){if(o.readyState==4&&(o.status==503||o.responseText=="shut up")){document.kill=true;createCookie("error_catcher","kill",30)}};o.send();window.booking_error_sent++};send_error_report()}return false};
/*!
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function(aC,aG){function m(t,c,E){if(E===aG&&t.nodeType===1){E=t.getAttribute("data-"+c);if(typeof E==="string"){try{E=E==="true"?true:E==="false"?false:E==="null"?null:!ag.isNaN(E)?parseFloat(E):ah.test(E)?ag.parseJSON(E):E}catch(B){}ag.data(t,c,E)}else{E=aG}}return E}function ar(){return false}function Q(){return true}function a4(t,c,B){B[0].type=t;return ag.event.handle.apply(c,B)}function I(aa){var X,W,V,U,T,P,S,E,Z,c,B,t=[];U=[];T=ag.data(this,this.nodeType?"events":"__events__");if(typeof T==="function"){T=T.events}if(!(aa.liveFired===this||!T||!T.live||aa.button&&aa.type==="click")){if(aa.namespace){B=RegExp("(^|\\.)"+aa.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}aa.liveFired=this;var Y=T.live.slice(0);for(S=0;S<Y.length;S++){T=Y[S];T.origType.replace(ao,"")===aa.type?U.push(T.selector):Y.splice(S--,1)}U=ag(aa.target).closest(U,aa.currentTarget);E=0;for(Z=U.length;E<Z;E++){c=U[E];for(S=0;S<Y.length;S++){T=Y[S];if(c.selector===T.selector&&(!B||B.test(T.namespace))){P=c.elem;V=null;if(T.preType==="mouseenter"||T.preType==="mouseleave"){aa.type=T.preType;V=ag(aa.relatedTarget).closest(T.selector)[0]}if(!V||V!==P){t.push({elem:P,handleObj:T,level:c.level})}}}}E=0;for(Z=t.length;E<Z;E++){U=t[E];if(W&&U.level>W){break}aa.currentTarget=U.elem;aa.data=U.handleObj.data;aa.handleObj=U.handleObj;B=U.handleObj.origHandler.apply(U.elem,arguments);if(B===false||aa.isPropagationStopped()){W=U.level;if(B===false){X=false}if(aa.isImmediatePropagationStopped()){break}}}return X}}function an(t,c){return(t&&t!=="*"?t+".":"")+c.replace(u,"`").replace(a8,"&")}function aR(t,c,E){if(ag.isFunction(c)){return ag.grep(t,function(S,P){return !!c.call(S,P,S)===E})}else{if(c.nodeType){return ag.grep(t,function(P){return P===c===E})}else{if(typeof c==="string"){var B=ag.grep(t,function(P){return P.nodeType===1});if(aW.test(c)){return ag.filter(c,B,!E)}else{c=ag.filter(c,B)}}}}return ag.grep(t,function(P){return ag.inArray(P,c)>=0===E})}function aD(t,c){var B=0;c.each(function(){if(this.nodeName===(t[B]&&t[B].nodeName)){var T=ag.data(t[B++]),S=ag.data(this,T);if(T=T&&T.events){delete S.handle;S.events={};for(var P in T){for(var E in T[P]){ag.event.add(this,P,T[P][E],T[P][E].data)}}}}})}function aJ(t,c){c.src?ag.ajax({url:c.src,async:false,dataType:"script"}):ag.globalEval(c.text||c.textContent||c.innerHTML||"");c.parentNode&&c.parentNode.removeChild(c)}function af(t,c,E){var B=c==="width"?t.offsetWidth:t.offsetHeight;if(E==="border"){return B}ag.each(c==="width"?ak:L,function(){E||(B-=parseFloat(ag.css(t,"padding"+this))||0);if(E==="margin"){B+=parseFloat(ag.css(t,"margin"+this))||0}else{B-=parseFloat(ag.css(t,"border"+this+"Width"))||0}});return B}function A(t,c,E,B){if(ag.isArray(c)&&c.length){ag.each(c,function(S,P){E||x.test(t)?B(t,P):A(t+"["+(typeof P==="object"||ag.isArray(P)?S:"")+"]",P,E,B)})}else{if(!E&&c!=null&&typeof c==="object"){ag.isEmptyObject(c)?B(t,""):ag.each(c,function(S,P){A(t+"["+S+"]",P,E,B)})}else{B(t,c)}}}function au(t,c){var B={};ag.each(H.concat.apply([],H.slice(0,c)),function(){B[this]=t});return B}function q(t){if(!k[t]){var c=ag("<"+t+">").appendTo("body"),B=c.css("display");c.remove();if(B==="none"||B===""){B="block"}k[t]=B}return k[t]}function a1(c){return ag.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var N=aC.document,ag=function(){function bo(){if(!bn.isReady){try{N.documentElement.doScroll("left")}catch(bp){setTimeout(bo,1);return}bn.ready()}}var bn=function(bp,bq){return new bn.fn.init(bp,bq)},bm=aC.jQuery,bl=aC.$,bk,bi=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,bf=/\S/,bg=/^\s+/,bc=/\s+$/,V=/\W/,ab=/\d/,bb=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,aa=/^[\],:{}\s]*$/,T=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,W=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,U=/(?:^|:|,)(?:\s*\[)+/g,P=/(webkit)[ \/]([\w.]+)/,bj=/(opera)(?:.*version)?[ \/]([\w.]+)/,bh=/(msie) ([\w.]+)/,bd=/(mozilla)(?:.*? rv:([\w.]+))?/,be=navigator.userAgent,ba=false,a9=[],Y,S=Object.prototype.toString,X=Object.prototype.hasOwnProperty,E=Array.prototype.push,B=Array.prototype.slice,t=String.prototype.trim,Z=Array.prototype.indexOf,c={};bn.fn=bn.prototype={init:function(bq,bs){var bp,bt,br;if(!bq){return this}if(bq.nodeType){this.context=this[0]=bq;this.length=1;return this}if(bq==="body"&&!bs&&N.body){this.context=N;this[0]=N.body;this.selector="body";this.length=1;return this}if(typeof bq==="string"){if((bp=bi.exec(bq))&&(bp[1]||!bs)){if(bp[1]){br=bs?bs.ownerDocument||bs:N;if(bt=bb.exec(bq)){if(bn.isPlainObject(bs)){bq=[N.createElement(bt[1])];bn.fn.attr.call(bq,bs,true)}else{bq=[br.createElement(bt[1])]}}else{bt=bn.buildFragment([bp[1]],[br]);bq=(bt.cacheable?bt.fragment.cloneNode(true):bt.fragment).childNodes}return bn.merge(this,bq)}else{if((bt=N.getElementById(bp[2]))&&bt.parentNode){if(bt.id!==bp[2]){return bk.find(bq)}this.length=1;this[0]=bt}this.context=N;this.selector=bq;return this}}else{if(!bs&&!V.test(bq)){this.selector=bq;this.context=N;bq=N.getElementsByTagName(bq);return bn.merge(this,bq)}else{return !bs||bs.jquery?(bs||bk).find(bq):bn(bs).find(bq)}}}else{if(bn.isFunction(bq)){return bk.ready(bq)}}if(bq.selector!==aG){this.selector=bq.selector;this.context=bq.context}return bn.makeArray(bq,this)},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length},toArray:function(){return B.call(this,0)},get:function(bp){return bp==null?this.toArray():bp<0?this.slice(bp)[0]:this[bp]},pushStack:function(bq,br,bp){var bs=bn();bn.isArray(bq)?E.apply(bs,bq):bn.merge(bs,bq);bs.prevObject=this;bs.context=this.context;if(br==="find"){bs.selector=this.selector+(this.selector?" ":"")+bp}else{if(br){bs.selector=this.selector+"."+br+"("+bp+")"}}return bs},each:function(bp,bq){return bn.each(this,bp,bq)},ready:function(bp){bn.bindReady();if(bn.isReady){bp.call(N,bn)}else{a9&&a9.push(bp)}return this},eq:function(bp){return bp===-1?this.slice(bp):this.slice(bp,+bp+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(B.apply(this,arguments),"slice",B.call(arguments).join(","))},map:function(bp){return this.pushStack(bn.map(this,function(br,bq){return bp.call(br,bq,br)}))},end:function(){return this.prevObject||bn(null)},push:E,sort:[].sort,splice:[].splice};bn.fn.init.prototype=bn.fn;bn.extend=bn.fn.extend=function(){var bp,bx,bu,br,bt,bv=arguments[0]||{},bs=1,bq=arguments.length,bw=false;if(typeof bv==="boolean"){bw=bv;bv=arguments[1]||{};bs=2}if(typeof bv!=="object"&&!bn.isFunction(bv)){bv={}}if(bq===bs){bv=this;--bs}for(;bs<bq;bs++){if((bp=arguments[bs])!=null){for(bx in bp){bu=bv[bx];br=bp[bx];if(bv!==br){if(bw&&br&&(bn.isPlainObject(br)||(bt=bn.isArray(br)))){if(bt){bt=false;bu=bu&&bn.isArray(bu)?bu:[]}else{bu=bu&&bn.isPlainObject(bu)?bu:{}}bv[bx]=bn.extend(bw,bu,br)}else{if(br!==aG){bv[bx]=br}}}}}}return bv};bn.extend({noConflict:function(bp){aC.$=bl;if(bp){aC.jQuery=bm}return bn},isReady:false,readyWait:1,ready:function(bq){bq===true&&bn.readyWait--;if(!bn.readyWait||bq!==true&&!bn.isReady){if(!N.body){return setTimeout(bn.ready,1)}bn.isReady=true;if(!(bq!==true&&--bn.readyWait>0)){if(a9){var br=0,bp=a9;for(a9=null;bq=bp[br++];){bq.call(N,bn)}bn.fn.trigger&&bn(N).trigger("ready").unbind("ready")}}}},bindReady:function(){if(!ba){ba=true;if(N.readyState==="complete"){return setTimeout(bn.ready,1)}if(N.addEventListener){N.addEventListener("DOMContentLoaded",Y,false);aC.addEventListener("load",bn.ready,false)}else{if(N.attachEvent){N.attachEvent("onreadystatechange",Y);aC.attachEvent("onload",bn.ready);var bp=false;try{bp=aC.frameElement==null}catch(bq){}N.documentElement.doScroll&&bp&&bo()}}}},isFunction:function(bp){return bn.type(bp)==="function"},isArray:Array.isArray||function(bp){return bn.type(bp)==="array"},isWindow:function(bp){return bp&&typeof bp==="object"&&"setInterval" in bp},isNaN:function(bp){return bp==null||!ab.test(bp)||isNaN(bp)},type:function(bp){return bp==null?String(bp):c[S.call(bp)]||"object"},isPlainObject:function(bp){if(!bp||bn.type(bp)!=="object"||bp.nodeType||bn.isWindow(bp)){return false}if(bp.constructor&&!X.call(bp,"constructor")&&!X.call(bp.constructor.prototype,"isPrototypeOf")){return false}for(var bq in bp){}return bq===aG||X.call(bp,bq)},isEmptyObject:function(bp){for(var bq in bp){return false}return true},error:function(bp){throw bp},parseJSON:function(bp){if(typeof bp!=="string"||!bp){return null}bp=bn.trim(bp);if(aa.test(bp.replace(T,"@").replace(W,"]").replace(U,""))){return aC.JSON&&aC.JSON.parse?aC.JSON.parse(bp):(new Function("return "+bp))()}else{bn.error("Invalid JSON: "+bp)}},noop:function(){},globalEval:function(bq){if(bq&&bf.test(bq)){var br=N.getElementsByTagName("head")[0]||N.documentElement,bp=N.createElement("script");bp.type="text/javascript";if(bn.support.scriptEval){bp.appendChild(N.createTextNode(bq))}else{bp.text=bq}br.insertBefore(bp,br.firstChild);br.removeChild(bp)}},nodeName:function(bp,bq){return bp.nodeName&&bp.nodeName.toUpperCase()===bq.toUpperCase()},each:function(br,bu,bq){var bv,bs=0,bt=br.length,bp=bt===aG||bn.isFunction(br);if(bq){if(bp){for(bv in br){if(bu.apply(br[bv],bq)===false){break}}}else{for(;bs<bt;){if(bu.apply(br[bs++],bq)===false){break}}}}else{if(bp){for(bv in br){if(bu.call(br[bv],bv,br[bv])===false){break}}}else{for(bq=br[0];bs<bt&&bu.call(bq,bs,bq)!==false;bq=br[++bs]){}}}return br},trim:t?function(bp){return bp==null?"":t.call(bp)}:function(bp){return bp==null?"":bp.toString().replace(bg,"").replace(bc,"")},makeArray:function(bq,br){var bp=br||[];if(bq!=null){var bs=bn.type(bq);bq.length==null||bs==="string"||bs==="function"||bs==="regexp"||bn.isWindow(bq)?E.call(bp,bq):bn.merge(bp,bq)}return bp},inArray:function(bq,br){if(br.indexOf){return br.indexOf(bq)}for(var bp=0,bs=br.length;bp<bs;bp++){if(br[bp]===bq){return bp}}return -1},merge:function(bq,bs){var bp=bq.length,bt=0;if(typeof bs.length==="number"){for(var br=bs.length;bt<br;bt++){bq[bp++]=bs[bt]}}else{for(;bs[bt]!==aG;){bq[bp++]=bs[bt++]}}bq.length=bp;return bq},grep:function(br,bu,bq){var bv=[],bs;bq=!!bq;for(var bt=0,bp=br.length;bt<bp;bt++){bs=!!bu(br[bt],bt);bq!==bs&&bv.push(br[bt])}return bv},map:function(br,bu,bq){for(var bv=[],bs,bt=0,bp=br.length;bt<bp;bt++){bs=bu(br[bt],bt,bq);if(bs!=null){bv[bv.length]=bs}}return bv.concat.apply([],bv)},guid:1,proxy:function(bq,br,bp){if(arguments.length===2){if(typeof br==="string"){bp=bq;bq=bp[br];br=aG}else{if(br&&!bn.isFunction(br)){bp=br;br=aG}}}if(!br&&bq){br=function(){return bq.apply(bp||this,arguments)}}if(bq){br.guid=bq.guid=bq.guid||br.guid||bn.guid++}return br},access:function(br,bu,bq,bw,bs,bt){var bp=br.length;if(typeof bu==="object"){for(var bv in bu){bn.access(br,bv,bu[bv],bw,bs,bq)}return br}if(bq!==aG){bw=!bt&&bw&&bn.isFunction(bq);for(bv=0;bv<bp;bv++){bs(br[bv],bu,bw?bq.call(br[bv],bv,bs(br[bv],bu)):bq,bt)}return br}return bp?bs(br[0],bu):aG},now:function(){return(new Date).getTime()},uaMatch:function(bp){bp=bp.toLowerCase();bp=P.exec(bp)||bj.exec(bp)||bh.exec(bp)||bp.indexOf("compatible")<0&&bd.exec(bp)||[];return{browser:bp[1]||"",version:bp[2]||"0"}},browser:{}});bn.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bp,bq){c["[object "+bq+"]"]=bq.toLowerCase()});be=bn.uaMatch(be);if(be.browser){bn.browser[be.browser]=true;bn.browser.version=be.version}if(bn.browser.webkit){bn.browser.safari=true}if(Z){bn.inArray=function(bp,bq){return Z.call(bq,bp)}}if(!/\s/.test("\u00a0")){bg=/^[\s\xA0]+/;bc=/[\s\xA0]+$/}bk=bn(N);if(N.addEventListener){Y=function(){N.removeEventListener("DOMContentLoaded",Y,false);bn.ready()}}else{if(N.attachEvent){Y=function(){if(N.readyState==="complete"){N.detachEvent("onreadystatechange",Y);bn.ready()}}}}return aC.jQuery=aC.$=bn}();(function(){ag.support={};var X=N.documentElement,V=N.createElement("script"),U=N.createElement("div"),T="script"+ag.now();U.style.display="none";U.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var S=U.getElementsByTagName("*"),P=U.getElementsByTagName("a")[0],B=N.createElement("select"),E=B.appendChild(N.createElement("option"));if(!(!S||!S.length||!P)){ag.support={leadingWhitespace:U.firstChild.nodeType===3,tbody:!U.getElementsByTagName("tbody").length,htmlSerialize:!!U.getElementsByTagName("link").length,style:/red/.test(P.getAttribute("style")),hrefNormalized:P.getAttribute("href")==="/a",opacity:/^0.55$/.test(P.style.opacity),cssFloat:!!P.style.cssFloat,checkOn:U.getElementsByTagName("input")[0].value==="on",optSelected:E.selected,deleteExpando:true,optDisabled:false,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};B.disabled=true;ag.support.optDisabled=!E.disabled;V.type="text/javascript";try{V.appendChild(N.createTextNode("window."+T+"=1;"))}catch(t){}X.insertBefore(V,X.firstChild);if(aC[T]){ag.support.scriptEval=true;delete aC[T]}try{delete V.test}catch(W){ag.support.deleteExpando=false}X.removeChild(V);if(U.attachEvent&&U.fireEvent){U.attachEvent("onclick",function c(){ag.support.noCloneEvent=false;U.detachEvent("onclick",c)});U.cloneNode(true).fireEvent("onclick")}U=N.createElement("div");U.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";X=N.createDocumentFragment();X.appendChild(U.firstChild);ag.support.checkClone=X.cloneNode(true).cloneNode(true).lastChild.checked;ag(function(){var Z=N.createElement("div");Z.style.width=Z.style.paddingLeft="1px";N.body.appendChild(Z);ag.boxModel=ag.support.boxModel=Z.offsetWidth===2;if("zoom" in Z.style){Z.style.display="inline";Z.style.zoom=1;ag.support.inlineBlockNeedsLayout=Z.offsetWidth===2;Z.style.display="";Z.innerHTML="<div style='width:4px;'></div>";ag.support.shrinkWrapBlocks=Z.offsetWidth!==2}Z.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var Y=Z.getElementsByTagName("td");ag.support.reliableHiddenOffsets=Y[0].offsetHeight===0;Y[0].style.display="";Y[1].style.display="none";ag.support.reliableHiddenOffsets=ag.support.reliableHiddenOffsets&&Y[0].offsetHeight===0;Z.innerHTML="";N.body.removeChild(Z).style.display="none"});X=function(Z){var Y=N.createElement("div");Z="on"+Z;var aa=Z in Y;if(!aa){Y.setAttribute(Z,"return;");aa=typeof Y[Z]==="function"}return aa};ag.support.submitBubbles=X("submit");ag.support.changeBubbles=X("change");X=V=U=S=P=null}})();var a7={},ah=/^(?:\{.*\}|\[.*\])$/;ag.extend({cache:{},uuid:0,expando:"jQuery"+ag.now(),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},data:function(t,c,S){if(ag.acceptData(t)){t=t==aC?a7:t;var P=t.nodeType,E=P?t[ag.expando]:null,B=ag.cache;if(!(P&&!E&&typeof c==="string"&&S===aG)){if(P){E||(t[ag.expando]=E=++ag.uuid)}else{B=t}if(typeof c==="object"){if(P){B[E]=ag.extend(B[E],c)}else{ag.extend(B,c)}}else{if(P&&!B[E]){B[E]={}}}t=P?B[E]:B;if(S!==aG){t[c]=S}return typeof c==="string"?t[c]:t}}},removeData:function(B,c){if(ag.acceptData(B)){B=B==aC?a7:B;var T=B.nodeType,S=T?B[ag.expando]:B,P=ag.cache,E=T?P[S]:S;if(c){if(E){delete E[c];T&&ag.isEmptyObject(E)&&ag.removeData(B)}}else{if(T&&ag.support.deleteExpando){delete B[ag.expando]}else{if(B.removeAttribute){B.removeAttribute(ag.expando)}else{if(T){delete P[S]}else{for(var t in B){delete B[t]}}}}}}},acceptData:function(t){if(t.nodeName){var c=ag.noData[t.nodeName.toLowerCase()];if(c){return !(c===true||t.getAttribute("classid")!==c)}}return true}});ag.fn.extend({data:function(B,c){var U=null;if(typeof B==="undefined"){if(this.length){var T=this[0].attributes,S;U=ag.data(this[0]);for(var P=0,t=T.length;P<t;P++){S=T[P].name;if(S.indexOf("data-")===0){S=S.substr(5);m(this[0],S,U[S])}}}return U}else{if(typeof B==="object"){return this.each(function(){ag.data(this,B)})}}var E=B.split(".");E[1]=E[1]?"."+E[1]:"";if(c===aG){U=this.triggerHandler("getData"+E[1]+"!",[E[0]]);if(U===aG&&this.length){U=ag.data(this[0],B);U=m(this[0],B,U)}return U===aG&&E[1]?this.data(E[0]):U}else{return this.each(function(){var W=ag(this),V=[E[0],c];W.triggerHandler("setData"+E[1]+"!",V);ag.data(this,B,c);W.triggerHandler("changeData"+E[1]+"!",V)})}},removeData:function(c){return this.each(function(){ag.removeData(this,c)})}});ag.extend({queue:function(t,c,E){if(t){c=(c||"fx")+"queue";var B=ag.data(t,c);if(!E){return B||[]}if(!B||ag.isArray(E)){B=ag.data(t,c,ag.makeArray(E))}else{B.push(E)}return B}},dequeue:function(t,c){c=c||"fx";var E=ag.queue(t,c),B=E.shift();if(B==="inprogress"){B=E.shift()}if(B){c==="fx"&&E.unshift("inprogress");B.call(t,function(){ag.dequeue(t,c)})}}});ag.fn.extend({queue:function(t,c){if(typeof t!=="string"){c=t;t="fx"}if(c===aG){return ag.queue(this[0],t)}return this.each(function(){var B=ag.queue(this,t,c);t==="fx"&&B[0]!=="inprogress"&&ag.dequeue(this,t)})},dequeue:function(c){return this.each(function(){ag.dequeue(this,c)})},delay:function(t,c){t=ag.fx?ag.fx.speeds[t]||t:t;c=c||"fx";return this.queue(c,function(){var B=this;setTimeout(function(){ag.dequeue(B,c)},t)})},clearQueue:function(c){return this.queue(c||"fx",[])}});var aV=/[\n\t]/g,az=/\s+/,g=/\r/g,aY=/^(?:href|src|style)$/,aL=/^(?:button|input)$/i,am=/^(?:button|input|object|select|textarea)$/i,M=/^a(?:rea)?$/i,aI=/^(?:radio|checkbox)$/i;ag.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};ag.fn.extend({attr:function(t,c){return ag.access(this,t,c,true,ag.attr)},removeAttr:function(c){return this.each(function(){ag.attr(this,c,"");this.nodeType===1&&this.removeAttribute(c)})},addClass:function(V){if(ag.isFunction(V)){return this.each(function(W){var X=ag(this);X.addClass(V.call(this,W,X.attr("class")))})}if(V&&typeof V==="string"){for(var U=(V||"").split(az),T=0,S=this.length;T<S;T++){var P=this[T];if(P.nodeType===1){if(P.className){for(var E=" "+P.className+" ",t=P.className,B=0,c=U.length;B<c;B++){if(E.indexOf(" "+U[B]+" ")<0){t+=" "+U[B]}}P.className=ag.trim(t)}else{P.className=V}}}}return this},removeClass:function(B){if(ag.isFunction(B)){return this.each(function(W){var V=ag(this);V.removeClass(B.call(this,W,V.attr("class")))})}if(B&&typeof B==="string"||B===aG){for(var c=(B||"").split(az),U=0,T=this.length;U<T;U++){var S=this[U];if(S.nodeType===1&&S.className){if(B){for(var P=(" "+S.className+" ").replace(aV," "),t=0,E=c.length;t<E;t++){P=P.replace(" "+c[t]+" "," ")}S.className=ag.trim(P)}else{S.className=""}}}}return this},toggleClass:function(t,c){var E=typeof t,B=typeof c==="boolean";if(ag.isFunction(t)){return this.each(function(S){var P=ag(this);P.toggleClass(t.call(this,S,P.attr("class"),c),c)})}return this.each(function(){if(E==="string"){for(var U,T=0,P=ag(this),S=c,V=t.split(az);U=V[T++];){S=B?S:!P.hasClass(U);P[S?"addClass":"removeClass"](U)}}else{if(E==="undefined"||E==="boolean"){this.className&&ag.data(this,"__className__",this.className);this.className=this.className||t===false?"":ag.data(this,"__className__")||""}}})},hasClass:function(t){t=" "+t+" ";for(var c=0,B=this.length;c<B;c++){if((" "+this[c].className+" ").replace(aV," ").indexOf(t)>-1){return true}}return false},val:function(B){if(!arguments.length){var c=this[0];if(c){if(ag.nodeName(c,"option")){var U=c.attributes.value;return !U||U.specified?c.value:c.text}if(ag.nodeName(c,"select")){var T=c.selectedIndex;U=[];var S=c.options;c=c.type==="select-one";if(T<0){return null}var P=c?T:0;for(T=c?T+1:S.length;P<T;P++){var t=S[P];if(t.selected&&(ag.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!ag.nodeName(t.parentNode,"optgroup"))){B=ag(t).val();if(c){return B}U.push(B)}}return U}if(aI.test(c.type)&&!ag.support.checkOn){return c.getAttribute("value")===null?"on":c.value}return(c.value||"").replace(g,"")}return aG}var E=ag.isFunction(B);return this.each(function(Y){var W=ag(this),X=B;if(this.nodeType===1){if(E){X=B.call(this,Y,W.val())}if(X==null){X=""}else{if(typeof X==="number"){X+=""}else{if(ag.isArray(X)){X=ag.map(X,function(Z){return Z==null?"":Z+""})}}}if(ag.isArray(X)&&aI.test(this.type)){this.checked=ag.inArray(W.val(),X)>=0}else{if(ag.nodeName(this,"select")){var V=ag.makeArray(X);ag("option",this).each(function(){this.selected=ag.inArray(ag(this).val(),V)>=0});if(!V.length){this.selectedIndex=-1}}else{this.value=X}}}})}});ag.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(t,c,S,P){if(!t||t.nodeType===3||t.nodeType===8){return aG}if(P&&c in ag.attrFn){return ag(t)[c](S)}P=t.nodeType!==1||!ag.isXMLDoc(t);var E=S!==aG;c=P&&ag.props[c]||c;var B=aY.test(c);if((c in t||t[c]!==aG)&&P&&!B){if(E){c==="type"&&aL.test(t.nodeName)&&t.parentNode&&ag.error("type property can't be changed");if(S===null){t.nodeType===1&&t.removeAttribute(c)}else{t[c]=S}}if(ag.nodeName(t,"form")&&t.getAttributeNode(c)){return t.getAttributeNode(c).nodeValue}if(c==="tabIndex"){return(c=t.getAttributeNode("tabIndex"))&&c.specified?c.value:am.test(t.nodeName)||M.test(t.nodeName)&&t.href?0:aG}return t[c]}if(!ag.support.style&&P&&c==="style"){if(E){t.style.cssText=""+S}return t.style.cssText}E&&t.setAttribute(c,""+S);if(!t.attributes[c]&&t.hasAttribute&&!t.hasAttribute(c)){return aG}t=!ag.support.hrefNormalized&&P&&B?t.getAttribute(c,2):t.getAttribute(c);return t===null?aG:t}});var ao=/\.(.*)$/,ac=/^(?:textarea|input|select)$/i,u=/\./g,a8=/ /g,y=/[^\w\s.|`]/g,h=function(c){return c.replace(y,"\\$&")},aj={focusin:0,focusout:0};ag.event={add:function(Z,X,W,V){if(!(Z.nodeType===3||Z.nodeType===8)){if(ag.isWindow(Z)&&Z!==aC&&!Z.frameElement){Z=aC}if(W===false){W=ar}else{if(!W){return}}var U,T;if(W.handler){U=W;W=U.handler}if(!W.guid){W.guid=ag.guid++}if(T=ag.data(Z)){var P=Z.nodeType?"events":"__events__",S=T[P],E=T.handle;if(typeof S==="function"){E=S.handle;S=S.events}else{if(!S){Z.nodeType||(T[P]=T=function(){});T.events=S={}}}if(!E){T.handle=E=function(){return typeof ag!=="undefined"&&!ag.event.triggered?ag.event.handle.apply(E.elem,arguments):aG}}E.elem=Z;X=X.split(" ");for(var Y=0,c;P=X[Y++];){T=U?ag.extend({},U):{handler:W,data:V};if(P.indexOf(".")>-1){c=P.split(".");P=c.shift();T.namespace=c.slice(0).sort().join(".")}else{c=[];T.namespace=""}T.type=P;if(!T.guid){T.guid=W.guid}var B=S[P],t=ag.event.special[P]||{};if(!B){B=S[P]=[];if(!t.setup||t.setup.call(Z,V,c,E)===false){if(Z.addEventListener){Z.addEventListener(P,E,false)}else{Z.attachEvent&&Z.attachEvent("on"+P,E)}}}if(t.add){t.add.call(Z,T);if(!T.handler.guid){T.handler.guid=W.guid}}B.push(T);ag.event.global[P]=true}Z=null}}},global:{},remove:function(aa,X,W,V){if(!(aa.nodeType===3||aa.nodeType===8)){if(W===false){W=ar}var U,T,P=0,S,E,Z,c,B,t,Y=aa.nodeType?"events":"__events__",a9=ag.data(aa),ab=a9&&a9[Y];if(a9&&ab){if(typeof ab==="function"){a9=ab;ab=ab.events}if(X&&X.type){W=X.handler;X=X.type}if(!X||typeof X==="string"&&X.charAt(0)==="."){X=X||"";for(U in ab){ag.event.remove(aa,U+X)}}else{for(X=X.split(" ");U=X[P++];){c=U;S=U.indexOf(".")<0;E=[];if(!S){E=U.split(".");U=E.shift();Z=RegExp("(^|\\.)"+ag.map(E.slice(0).sort(),h).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(B=ab[U]){if(W){c=ag.event.special[U]||{};for(T=V||0;T<B.length;T++){t=B[T];if(W.guid===t.guid){if(S||Z.test(t.namespace)){V==null&&B.splice(T--,1);c.remove&&c.remove.call(aa,t)}if(V!=null){break}}}if(B.length===0||V!=null&&B.length===1){if(!c.teardown||c.teardown.call(aa,E)===false){ag.removeEvent(aa,U,a9.handle)}delete ab[U]}}else{for(T=0;T<B.length;T++){t=B[T];if(S||Z.test(t.namespace)){ag.event.remove(aa,c,t.handler,T);B.splice(T--,1)}}}}}if(ag.isEmptyObject(ab)){if(X=a9.handle){X.elem=null}delete a9.events;delete a9.handle;if(typeof a9==="function"){ag.removeData(aa,Y)}else{ag.isEmptyObject(a9)&&ag.removeData(aa)}}}}}},trigger:function(X,V,U,T){var S=X.type||X;if(!T){X=typeof X==="object"?X[ag.expando]?X:ag.extend(ag.Event(S),X):ag.Event(S);if(S.indexOf("!")>=0){X.type=S=S.slice(0,-1);X.exclusive=true}if(!U){X.stopPropagation();ag.event.global[S]&&ag.each(ag.cache,function(){this.events&&this.events[S]&&ag.event.trigger(X,V,this.handle.elem)})}if(!U||U.nodeType===3||U.nodeType===8){return aG}X.result=aG;X.target=U;V=ag.makeArray(V);V.unshift(X)}X.currentTarget=U;(T=U.nodeType?ag.data(U,"handle"):(ag.data(U,"__events__")||{}).handle)&&T.apply(U,V);T=U.parentNode||U.ownerDocument;try{if(!(U&&U.nodeName&&ag.noData[U.nodeName.toLowerCase()])){if(U["on"+S]&&U["on"+S].apply(U,V)===false){X.result=false;X.preventDefault()}}}catch(P){}if(!X.isPropagationStopped()&&T){ag.event.trigger(X,V,T,true)}else{if(!X.isDefaultPrevented()){var B;T=X.target;var E=S.replace(ao,""),t=ag.nodeName(T,"a")&&E==="click",W=ag.event.special[E]||{};if((!W._default||W._default.call(U,X)===false)&&!t&&!(T&&T.nodeName&&ag.noData[T.nodeName.toLowerCase()])){try{if(T[E]){if(B=T["on"+E]){T["on"+E]=null}ag.event.triggered=true;T[E]()}}catch(c){}if(B){T["on"+E]=B}ag.event.triggered=false}}}},handle:function(B){var c,U,T,S;U=[];var P=ag.makeArray(arguments);B=P[0]=ag.event.fix(B||aC.event);B.currentTarget=this;c=B.type.indexOf(".")<0&&!B.exclusive;if(!c){T=B.type.split(".");B.type=T.shift();U=T.slice(0).sort();T=RegExp("(^|\\.)"+U.join("\\.(?:.*\\.)?")+"(\\.|$)")}B.namespace=B.namespace||U.join(".");S=ag.data(this,this.nodeType?"events":"__events__");if(typeof S==="function"){S=S.events}U=(S||{})[B.type];if(S&&U){U=U.slice(0);S=0;for(var t=U.length;S<t;S++){var E=U[S];if(c||T.test(E.namespace)){B.handler=E.handler;B.data=E.data;B.handleObj=E;E=E.handler.apply(this,P);if(E!==aG){B.result=E;if(E===false){B.preventDefault();B.stopPropagation()}}if(B.isImmediatePropagationStopped()){break}}}}return B.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(t){if(t[ag.expando]){return t}var c=t;t=ag.Event(c);for(var E=this.props.length,B;E;){B=this.props[--E];t[B]=c[B]}if(!t.target){t.target=t.srcElement||N}if(t.target.nodeType===3){t.target=t.target.parentNode}if(!t.relatedTarget&&t.fromElement){t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement}if(t.pageX==null&&t.clientX!=null){c=N.documentElement;E=N.body;t.pageX=t.clientX+(c&&c.scrollLeft||E&&E.scrollLeft||0)-(c&&c.clientLeft||E&&E.clientLeft||0);t.pageY=t.clientY+(c&&c.scrollTop||E&&E.scrollTop||0)-(c&&c.clientTop||E&&E.clientTop||0)}if(t.which==null&&(t.charCode!=null||t.keyCode!=null)){t.which=t.charCode!=null?t.charCode:t.keyCode}if(!t.metaKey&&t.ctrlKey){t.metaKey=t.ctrlKey}if(!t.which&&t.button!==aG){t.which=t.button&1?1:t.button&2?3:t.button&4?2:0}return t},guid:100000000,proxy:ag.proxy,special:{ready:{setup:ag.bindReady,teardown:ag.noop},live:{add:function(c){ag.event.add(this,an(c.origType,c.selector),ag.extend({},c,{handler:I,guid:c.handler.guid}))},remove:function(c){ag.event.remove(this,an(c.origType,c.selector),c)}},beforeunload:{setup:function(t,c,B){if(ag.isWindow(this)){this.onbeforeunload=B}},teardown:function(t,c){if(this.onbeforeunload===c){this.onbeforeunload=null}}}}};ag.removeEvent=N.removeEventListener?function(t,c,B){t.removeEventListener&&t.removeEventListener(c,B,false)}:function(t,c,B){t.detachEvent&&t.detachEvent("on"+c,B)};ag.Event=function(c){if(!this.preventDefault){return new ag.Event(c)}if(c&&c.type){this.originalEvent=c;this.type=c.type}else{this.type=c}this.timeStamp=ag.now();this[ag.expando]=true};ag.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Q;var c=this.originalEvent;if(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}},stopPropagation:function(){this.isPropagationStopped=Q;var c=this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Q;this.stopPropagation()},isDefaultPrevented:ar,isPropagationStopped:ar,isImmediatePropagationStopped:ar};var K=function(t){var c=t.relatedTarget;try{for(;c&&c!==this;){c=c.parentNode}if(c!==this){t.type=t.data;ag.event.handle.apply(this,arguments)}}catch(B){}},w=function(c){c.type=c.data;ag.event.handle.apply(this,arguments)};ag.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,c){ag.event.special[t]={setup:function(B){ag.event.add(this,c,B&&B.selector?w:K,t)},teardown:function(B){ag.event.remove(this,c,B&&B.selector?w:K)}}});if(!ag.support.submitBubbles){ag.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){ag.event.add(this,"click.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="submit"||B==="image")&&ag(c).closest("form").length){t.liveFired=aG;return a4("submit",this,arguments)}});ag.event.add(this,"keypress.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="text"||B==="password")&&ag(c).closest("form").length&&t.keyCode===13){t.liveFired=aG;return a4("submit",this,arguments)}})}else{return false}},teardown:function(){ag.event.remove(this,".specialSubmit")}}}if(!ag.support.changeBubbles){var aq,f=function(t){var c=t.type,B=t.value;if(c==="radio"||c==="checkbox"){B=t.checked}else{if(c==="select-multiple"){B=t.selectedIndex>-1?ag.map(t.options,function(E){return E.selected}).join("-"):""}else{if(t.nodeName.toLowerCase()==="select"){B=t.selectedIndex}}}return B},al=function(t,c){var P=t.target,E,B;if(!(!ac.test(P.nodeName)||P.readOnly)){E=ag.data(P,"_change_data");B=f(P);if(t.type!=="focusout"||P.type!=="radio"){ag.data(P,"_change_data",B)}if(!(E===aG||B===E)){if(E!=null||B){t.type="change";t.liveFired=aG;return ag.event.trigger(t,c,P)}}}};ag.event.special.change={filters:{focusout:al,beforedeactivate:al,click:function(t){var c=t.target,B=c.type;if(B==="radio"||B==="checkbox"||c.nodeName.toLowerCase()==="select"){return al.call(this,t)}},keydown:function(t){var c=t.target,B=c.type;if(t.keyCode===13&&c.nodeName.toLowerCase()!=="textarea"||t.keyCode===32&&(B==="checkbox"||B==="radio")||B==="select-multiple"){return al.call(this,t)}},beforeactivate:function(c){c=c.target;ag.data(c,"_change_data",f(c))}},setup:function(){if(this.type==="file"){return false}for(var c in aq){ag.event.add(this,c+".specialChange",aq[c])}return ac.test(this.nodeName)},teardown:function(){ag.event.remove(this,".specialChange");return ac.test(this.nodeName)}};aq=ag.event.special.change.filters;aq.focus=aq.beforeactivate}N.addEventListener&&ag.each({focus:"focusin",blur:"focusout"},function(t,c){function B(E){E=ag.event.fix(E);E.type=c;return ag.event.trigger(E,null,E.target)}ag.event.special[c]={setup:function(){aj[c]++===0&&N.addEventListener(t,B,true)},teardown:function(){--aj[c]===0&&N.removeEventListener(t,B,true)}}});ag.each(["bind","one"],function(t,c){ag.fn[c]=function(U,T,S){if(typeof U==="object"){for(var P in U){this[c](P,T,U[P],S)}return this}if(ag.isFunction(T)||T===false){S=T;T=aG}var B=c==="one"?ag.proxy(S,function(V){ag(this).unbind(V,B);return S.apply(this,arguments)}):S;if(U==="unload"&&c!=="one"){this.one(U,T,S)}else{P=0;for(var E=this.length;P<E;P++){ag.event.add(this[P],U,B,T)}}return this}});ag.fn.extend({unbind:function(t,c){if(typeof t==="object"&&!t.preventDefault){for(var E in t){this.unbind(E,t[E])}}else{E=0;for(var B=this.length;E<B;E++){ag.event.remove(this[E],t,c)}}return this},delegate:function(t,c,E,B){return this.live(c,E,B,t)},undelegate:function(t,c,B){return arguments.length===0?this.unbind("live"):this.die(c,null,B,t)},trigger:function(t,c){return this.each(function(){ag.event.trigger(t,c,this)})},triggerHandler:function(t,c){if(this[0]){var B=ag.Event(t);B.preventDefault();B.stopPropagation();ag.event.trigger(B,c,this[0]);return B.result}},toggle:function(t){for(var c=arguments,B=1;B<c.length;){ag.proxy(t,c[B++])}return this.click(ag.proxy(t,function(P){var E=(ag.data(this,"lastToggle"+t.guid)||0)%B;ag.data(this,"lastToggle"+t.guid,E+1);P.preventDefault();return c[E].apply(this,arguments)||false}))},hover:function(t,c){return this.mouseenter(t).mouseleave(c||t)}});var aX={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};ag.each(["live","die"],function(t,c){ag.fn[c]=function(X,W,V,U){var S,T=0,P,Y,B=U||this.selector;U=U?this:ag(this.context);if(typeof X==="object"&&!X.preventDefault){for(S in X){U[c](S,W,X[S],B)}return this}if(ag.isFunction(W)){V=W;W=aG}for(X=(X||"").split(" ");(S=X[T++])!=null;){P=ao.exec(S);Y="";if(P){Y=P[0];S=S.replace(ao,"")}if(S==="hover"){X.push("mouseenter"+Y,"mouseleave"+Y)}else{P=S;if(S==="focus"||S==="blur"){X.push(aX[S]+Y);S+=Y}else{S=(aX[S]||S)+Y}if(c==="live"){Y=0;for(var E=U.length;Y<E;Y++){ag.event.add(U[Y],"live."+an(S,B),{data:W,selector:B,handler:V,origType:S,origHandler:V,preType:P})}}else{U.unbind("live."+an(S,B),V)}}}return this}});ag.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(t,c){ag.fn[c]=function(E,B){if(B==null){B=E;E=null}return arguments.length>0?this.bind(c,E,B):this.trigger(c)};if(ag.attrFn){ag.attrFn[c]=true}});aC.attachEvent&&!aC.addEventListener&&ag(aC).bind("unload",function(){for(var t in ag.cache){if(ag.cache[t].handle){try{ag.event.remove(ag.cache[t].handle.elem)}catch(c){}}}});(function(){function ab(bg,bf,bd,be,bc,bb){bc=0;for(var bi=be.length;bc<bi;bc++){var bh=be[bc];if(bh){var bj=false;for(bh=bh[bg];bh;){if(bh.sizcache===bd){bj=be[bh.sizset];break}if(bh.nodeType===1&&!bb){bh.sizcache=bd;bh.sizset=bc}if(bh.nodeName.toLowerCase()===bf){bj=bh;break}bh=bh[bg]}be[bc]=bj}}}function Y(bg,bf,bd,be,bc,bb){bc=0;for(var bi=be.length;bc<bi;bc++){var bh=be[bc];if(bh){var bj=false;for(bh=bh[bg];bh;){if(bh.sizcache===bd){bj=be[bh.sizset];break}if(bh.nodeType===1){if(!bb){bh.sizcache=bd;bh.sizset=bc}if(typeof bf!=="string"){if(bh===bf){bj=true;break}}else{if(S.filter(bf,[bh]).length>0){bj=bh;break}}}bh=bh[bg]}be[bc]=bj}}}var W=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,V=0,U=Object.prototype.toString,T=false,P=true;[0,0].sort(function(){P=false;return 0});var S=function(bi,bh,be,bf){be=be||[];var bd=bh=bh||N;if(bh.nodeType!==1&&bh.nodeType!==9){return[]}if(!bi||typeof bi!=="string"){return be}var bc,bn,bm,bo,bl,bk=true,bj=S.isXML(bh),bb=[],bg=bi;do{W.exec("");if(bc=W.exec(bg)){bg=bc[3];bb.push(bc[1]);if(bc[2]){bo=bc[3];break}}}while(bc);if(bb.length>1&&aa.exec(bi)){if(bb.length===2&&E.relative[bb[0]]){bn=X(bb[0]+bb[1],bh)}else{for(bn=E.relative[bb[0]]?[bh]:S(bb.shift(),bh);bb.length;){bi=bb.shift();if(E.relative[bi]){bi+=bb.shift()}bn=X(bi,bn)}}}else{if(!bf&&bb.length>1&&bh.nodeType===9&&!bj&&E.match.ID.test(bb[0])&&!E.match.ID.test(bb[bb.length-1])){bc=S.find(bb.shift(),bh,bj);bh=bc.expr?S.filter(bc.expr,bc.set)[0]:bc.set[0]}if(bh){bc=bf?{expr:bb.pop(),set:t(bf)}:S.find(bb.pop(),bb.length===1&&(bb[0]==="~"||bb[0]==="+")&&bh.parentNode?bh.parentNode:bh,bj);bn=bc.expr?S.filter(bc.expr,bc.set):bc.set;if(bb.length>0){bm=t(bn)}else{bk=false}for(;bb.length;){bc=bl=bb.pop();if(E.relative[bl]){bc=bb.pop()}else{bl=""}if(bc==null){bc=bh}E.relative[bl](bm,bc,bj)}}else{bm=[]}}bm||(bm=bn);bm||S.error(bl||bi);if(U.call(bm)==="[object Array]"){if(bk){if(bh&&bh.nodeType===1){for(bi=0;bm[bi]!=null;bi++){if(bm[bi]&&(bm[bi]===true||bm[bi].nodeType===1&&S.contains(bh,bm[bi]))){be.push(bn[bi])}}}else{for(bi=0;bm[bi]!=null;bi++){bm[bi]&&bm[bi].nodeType===1&&be.push(bn[bi])}}}else{be.push.apply(be,bm)}}else{t(bm,be)}if(bo){S(bo,bd,be,bf);S.uniqueSort(be)}return be};S.uniqueSort=function(bc){if(ba){T=P;bc.sort(ba);if(T){for(var bb=1;bb<bc.length;bb++){bc[bb]===bc[bb-1]&&bc.splice(bb--,1)}}}return bc};S.matches=function(bc,bb){return S(bc,null,null,bb)};S.matchesSelector=function(bc,bb){return S(bb,null,null,[bc]).length>0};S.find=function(bg,bf,bd){var be;if(!bg){return[]}for(var bc=0,bb=E.order.length;bc<bb;bc++){var bi,bh=E.order[bc];if(bi=E.leftMatch[bh].exec(bg)){var bj=bi[1];bi.splice(1,1);if(bj.substr(bj.length-1)!=="\\"){bi[1]=(bi[1]||"").replace(/\\/g,"");be=E.find[bh](bi,bf,bd);if(be!=null){bg=bg.replace(E.match[bh],"");break}}}}be||(be=bf.getElementsByTagName("*"));return{set:be,expr:bg}};S.filter=function(bj,bi,be,bf){for(var bd,bc,bo=bj,bn=[],bp=bi,bm=bi&&bi[0]&&S.isXML(bi[0]);bj&&bi.length;){for(var bl in E.filter){if((bd=E.leftMatch[bl].exec(bj))!=null&&bd[2]){var bk,bb,bh=E.filter[bl];bb=bd[1];bc=false;bd.splice(1,1);if(bb.substr(bb.length-1)!=="\\"){if(bp===bn){bn=[]}if(E.preFilter[bl]){if(bd=E.preFilter[bl](bd,bp,be,bn,bf,bm)){if(bd===true){continue}}else{bc=bk=true}}if(bd){for(var bg=0;(bb=bp[bg])!=null;bg++){if(bb){bk=bh(bb,bd,bg,bp);var bq=bf^!!bk;if(be&&bk!=null){if(bq){bc=true}else{bp[bg]=false}}else{if(bq){bn.push(bb);bc=true}}}}}if(bk!==aG){be||(bp=bn);bj=bj.replace(E.match[bl],"");if(!bc){return[]}break}}}}if(bj===bo){if(bc==null){S.error(bj)}else{break}}bo=bj}return bp};S.error=function(bb){throw"Syntax error, unrecognized expression: "+bb};var E=S.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(bb){return bb.getAttribute("href")}},relative:{"+":function(bd,bc){var bg=typeof bc==="string",bb=bg&&!/\W/.test(bc);bg=bg&&!bb;if(bb){bc=bc.toLowerCase()}bb=0;for(var bf=bd.length,be;bb<bf;bb++){if(be=bd[bb]){for(;(be=be.previousSibling)&&be.nodeType!==1;){}bd[bb]=bg||be&&be.nodeName.toLowerCase()===bc?be||false:be===bc}}bg&&S.filter(bc,bd,true)},">":function(bd,bc){var bg,bb=typeof bc==="string",bf=0,be=bd.length;if(bb&&!/\W/.test(bc)){for(bc=bc.toLowerCase();bf<be;bf++){if(bg=bd[bf]){bg=bg.parentNode;bd[bf]=bg.nodeName.toLowerCase()===bc?bg:false}}}else{for(;bf<be;bf++){if(bg=bd[bf]){bd[bf]=bb?bg.parentNode:bg.parentNode===bc}}bb&&S.filter(bc,bd,true)}},"":function(bd,bc,bg){var bb,bf=V++,be=Y;if(typeof bc==="string"&&!/\W/.test(bc)){bb=bc=bc.toLowerCase();be=ab}be("parentNode",bc,bf,bd,bb,bg)},"~":function(bd,bc,bg){var bb,bf=V++,be=Y;if(typeof bc==="string"&&!/\W/.test(bc)){bb=bc=bc.toLowerCase();be=ab}be("previousSibling",bc,bf,bd,bb,bg)}},find:{ID:function(bc,bb,bd){if(typeof bb.getElementById!=="undefined"&&!bd){return(bc=bb.getElementById(bc[1]))&&bc.parentNode?[bc]:[]}},NAME:function(bd,bc){if(typeof bc.getElementsByName!=="undefined"){for(var bg=[],bb=bc.getElementsByName(bd[1]),bf=0,be=bb.length;bf<be;bf++){bb[bf].getAttribute("name")===bd[1]&&bg.push(bb[bf])}return bg.length===0?null:bg}},TAG:function(bc,bb){return bb.getElementsByTagName(bc[1])}},preFilter:{CLASS:function(be,bd,bh,bb,bg,bf){be=" "+be[1].replace(/\\/g,"")+" ";if(bf){return be}bf=0;for(var bc;(bc=bd[bf])!=null;bf++){if(bc){if(bg^(bc.className&&(" "+bc.className+" ").replace(/[\t\n]/g," ").indexOf(be)>=0)){bh||bb.push(bc)}else{if(bh){bd[bf]=false}}}}return false},ID:function(bb){return bb[1].replace(/\\/g,"")},TAG:function(bb){return bb[1].toLowerCase()},CHILD:function(bc){if(bc[1]==="nth"){var bb=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(bc[2]==="even"&&"2n"||bc[2]==="odd"&&"2n+1"||!/\D/.test(bc[2])&&"0n+"+bc[2]||bc[2]);bc[2]=bb[1]+(bb[2]||1)-0;bc[3]=bb[3]-0}bc[0]=V++;return bc},ATTR:function(bd,bc,bg,bb,bf,be){bc=bd[1].replace(/\\/g,"");if(!be&&E.attrMap[bc]){bd[1]=E.attrMap[bc]}if(bd[2]==="~="){bd[4]=" "+bd[4]+" "}return bd},PSEUDO:function(bd,bc,bf,bb,be){if(bd[1]==="not"){if((W.exec(bd[3])||"").length>1||/^\w/.test(bd[3])){bd[3]=S(bd[3],null,null,bc)}else{bd=S.filter(bd[3],bc,bf,true^be);bf||bb.push.apply(bb,bd);return false}}else{if(E.match.POS.test(bd[0])||E.match.CHILD.test(bd[0])){return true}}return bd},POS:function(bb){bb.unshift(true);return bb}},filters:{enabled:function(bb){return bb.disabled===false&&bb.type!=="hidden"},disabled:function(bb){return bb.disabled===true},checked:function(bb){return bb.checked===true},selected:function(bb){return bb.selected===true},parent:function(bb){return !!bb.firstChild},empty:function(bb){return !bb.firstChild},has:function(bc,bb,bd){return !!S(bd[3],bc).length},header:function(bb){return/h\d/i.test(bb.nodeName)},text:function(bb){return"text"===bb.type},radio:function(bb){return"radio"===bb.type},checkbox:function(bb){return"checkbox"===bb.type},file:function(bb){return"file"===bb.type},password:function(bb){return"password"===bb.type},submit:function(bb){return"submit"===bb.type},image:function(bb){return"image"===bb.type},reset:function(bb){return"reset"===bb.type},button:function(bb){return"button"===bb.type||bb.nodeName.toLowerCase()==="button"},input:function(bb){return/input|select|textarea|button/i.test(bb.nodeName)}},setFilters:{first:function(bc,bb){return bb===0},last:function(bd,bc,be,bb){return bc===bb.length-1},even:function(bc,bb){return bb%2===0},odd:function(bc,bb){return bb%2===1},lt:function(bc,bb,bd){return bb<bd[3]-0},gt:function(bc,bb,bd){return bb>bd[3]-0},nth:function(bc,bb,bd){return bd[3]-0===bb},eq:function(bc,bb,bd){return bd[3]-0===bb}},filter:{PSEUDO:function(bd,bc,bg,bb){var bf=bc[1],be=E.filters[bf];if(be){return be(bd,bg,bc,bb)}else{if(bf==="contains"){return(bd.textContent||bd.innerText||S.getText([bd])||"").indexOf(bc[3])>=0}else{if(bf==="not"){bc=bc[3];bg=0;for(bb=bc.length;bg<bb;bg++){if(bc[bg]===bd){return false}}return true}else{S.error("Syntax error, unrecognized expression: "+bf)}}}},CHILD:function(be,bd){var bi=bd[1],bb=be;switch(bi){case"only":case"first":for(;bb=bb.previousSibling;){if(bb.nodeType===1){return false}}if(bi==="first"){return true}bb=be;case"last":for(;bb=bb.nextSibling;){if(bb.nodeType===1){return false}}return true;case"nth":bi=bd[2];var bg=bd[3];if(bi===1&&bg===0){return true}var bf=bd[0],bc=be.parentNode;if(bc&&(bc.sizcache!==bf||!be.nodeIndex)){var bh=0;for(bb=bc.firstChild;bb;bb=bb.nextSibling){if(bb.nodeType===1){bb.nodeIndex=++bh}}bc.sizcache=bf}bb=be.nodeIndex-bg;return bi===0?bb===0:bb%bi===0&&bb/bi>=0}},ID:function(bc,bb){return bc.nodeType===1&&bc.getAttribute("id")===bb},TAG:function(bc,bb){return bb==="*"&&bc.nodeType===1||bc.nodeName.toLowerCase()===bb},CLASS:function(bc,bb){return(" "+(bc.className||bc.getAttribute("class"))+" ").indexOf(bb)>-1},ATTR:function(bd,bc){var bg=bc[1];bg=E.attrHandle[bg]?E.attrHandle[bg](bd):bd[bg]!=null?bd[bg]:bd.getAttribute(bg);var bb=bg+"",bf=bc[2],be=bc[4];return bg==null?bf==="!=":bf==="="?bb===be:bf==="*="?bb.indexOf(be)>=0:bf==="~="?(" "+bb+" ").indexOf(be)>=0:!be?bb&&bg!==false:bf==="!="?bb!==be:bf==="^="?bb.indexOf(be)===0:bf==="$="?bb.substr(bb.length-be.length)===be:bf==="|="?bb===be||bb.substr(0,be.length+1)===be+"-":false},POS:function(bd,bc,bf,bb){var be=E.setFilters[bc[2]];if(be){return be(bd,bf,bc,bb)}}}},aa=E.match.POS,c=function(bc,bb){return"\\"+(bb-0+1)},B;for(B in E.match){E.match[B]=RegExp(E.match[B].source+/(?![^\[]*\])(?![^\(]*\))/.source);E.leftMatch[B]=RegExp(/(^(?:.|\r|\n)*?)/.source+E.match[B].source.replace(/\\(\d+)/g,c))}var t=function(bc,bb){bc=Array.prototype.slice.call(bc,0);if(bb){bb.push.apply(bb,bc);return bb}return bc};try{Array.prototype.slice.call(N.documentElement.childNodes,0)}catch(Z){t=function(bd,bc){var bf=0,bb=bc||[];if(U.call(bd)==="[object Array]"){Array.prototype.push.apply(bb,bd)}else{if(typeof bd.length==="number"){for(var be=bd.length;bf<be;bf++){bb.push(bd[bf])}}else{for(;bd[bf];bf++){bb.push(bd[bf])}}}return bb}}var ba,a9;if(N.documentElement.compareDocumentPosition){ba=function(bc,bb){if(bc===bb){T=true;return 0}if(!bc.compareDocumentPosition||!bb.compareDocumentPosition){return bc.compareDocumentPosition?-1:1}return bc.compareDocumentPosition(bb)&4?-1:1}}else{ba=function(be,bd){var bh,bb,bg=[],bf=[];bh=be.parentNode;bb=bd.parentNode;var bc=bh;if(be===bd){T=true;return 0}else{if(bh===bb){return a9(be,bd)}else{if(bh){if(!bb){return 1}}else{return -1}}}for(;bc;){bg.unshift(bc);bc=bc.parentNode}for(bc=bb;bc;){bf.unshift(bc);bc=bc.parentNode}bh=bg.length;bb=bf.length;for(bc=0;bc<bh&&bc<bb;bc++){if(bg[bc]!==bf[bc]){return a9(bg[bc],bf[bc])}}return bc===bh?a9(be,bf[bc],-1):a9(bg[bc],bd,1)};a9=function(bc,bb,bd){if(bc===bb){return bd}for(bc=bc.nextSibling;bc;){if(bc===bb){return -1}bc=bc.nextSibling}return 1}}S.getText=function(bd){for(var bc="",be,bb=0;bd[bb];bb++){be=bd[bb];if(be.nodeType===3||be.nodeType===4){bc+=be.nodeValue}else{if(be.nodeType!==8){bc+=S.getText(be.childNodes)}}}return bc};(function(){var bc=N.createElement("div"),bb="script"+(new Date).getTime(),bd=N.documentElement;bc.innerHTML="<a name='"+bb+"'/>";bd.insertBefore(bc,bd.firstChild);if(N.getElementById(bb)){E.find.ID=function(be,bg,bf){if(typeof bg.getElementById!=="undefined"&&!bf){return(bg=bg.getElementById(be[1]))?bg.id===be[1]||typeof bg.getAttributeNode!=="undefined"&&bg.getAttributeNode("id").nodeValue===be[1]?[bg]:aG:[]}};E.filter.ID=function(be,bg){var bf=typeof be.getAttributeNode!=="undefined"&&be.getAttributeNode("id");return be.nodeType===1&&bf&&bf.nodeValue===bg}}bd.removeChild(bc);bd=bc=null})();(function(){var bb=N.createElement("div");bb.appendChild(N.createComment(""));if(bb.getElementsByTagName("*").length>0){E.find.TAG=function(bd,bg){var bc=bg.getElementsByTagName(bd[1]);if(bd[1]==="*"){for(var bf=[],be=0;bc[be];be++){bc[be].nodeType===1&&bf.push(bc[be])}bc=bf}return bc}}bb.innerHTML="<a href='#'></a>";if(bb.firstChild&&typeof bb.firstChild.getAttribute!=="undefined"&&bb.firstChild.getAttribute("href")!=="#"){E.attrHandle.href=function(bc){return bc.getAttribute("href",2)}}bb=null})();N.querySelectorAll&&function(){var bc=S,bb=N.createElement("div");bb.innerHTML="<p class='TEST'></p>";if(!(bb.querySelectorAll&&bb.querySelectorAll(".TEST").length===0)){S=function(be,bi,bh,bf){bi=bi||N;be=be.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bf&&!S.isXML(bi)){if(bi.nodeType===9){try{return t(bi.querySelectorAll(be),bh)}catch(bl){}}else{if(bi.nodeType===1&&bi.nodeName.toLowerCase()!=="object"){var bg=bi.getAttribute("id"),bk=bg||"__sizzle__";bg||bi.setAttribute("id",bk);try{return t(bi.querySelectorAll("#"+bk+" "+be),bh)}catch(bj){}finally{bg||bi.removeAttribute("id")}}}}return bc(be,bi,bh,bf)};for(var bd in bc){S[bd]=bc[bd]}bb=null}}();(function(){var bd=N.documentElement,bc=bd.matchesSelector||bd.mozMatchesSelector||bd.webkitMatchesSelector||bd.msMatchesSelector,be=false;try{bc.call(N.documentElement,"[test!='']:sizzle")}catch(bb){be=true}if(bc){S.matchesSelector=function(bh,bg){bg=bg.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!S.isXML(bh)){try{if(be||!E.match.PSEUDO.test(bg)&&!/!=/.test(bg)){return bc.call(bh,bg)}}catch(bf){}}return S(bg,null,null,[bh]).length>0}}})();(function(){var bb=N.createElement("div");bb.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!bb.getElementsByClassName||bb.getElementsByClassName("e").length===0)){bb.lastChild.className="e";if(bb.getElementsByClassName("e").length!==1){E.order.splice(1,0,"CLASS");E.find.CLASS=function(bd,be,bc){if(typeof be.getElementsByClassName!=="undefined"&&!bc){return be.getElementsByClassName(bd[1])}};bb=null}}})();S.contains=N.documentElement.contains?function(bc,bb){return bc!==bb&&(bc.contains?bc.contains(bb):true)}:N.documentElement.compareDocumentPosition?function(bc,bb){return !!(bc.compareDocumentPosition(bb)&16)}:function(){return false};S.isXML=function(bb){return(bb=(bb?bb.ownerDocument||bb:0).documentElement)?bb.nodeName!=="HTML":false};var X=function(be,bd){for(var bh,bb=[],bg="",bf=bd.nodeType?[bd]:bd;bh=E.match.PSEUDO.exec(be);){bg+=bh[0];be=be.replace(E.match.PSEUDO,"")}be=E.relative[be]?be+"*":be;bh=0;for(var bc=bf.length;bh<bc;bh++){S(be,bf[bh],bb)}return S.filter(bg,bb)};ag.find=S;ag.expr=S.selectors;ag.expr[":"]=ag.expr.filters;ag.unique=S.uniqueSort;ag.text=S.getText;ag.isXMLDoc=S.isXML;ag.contains=S.contains})();var aZ=/Until$/,aF=/^(?:parents|prevUntil|prevAll)/,aM=/,/,aW=/^.[^:#\[\.,]*$/,av=Array.prototype.slice,O=ag.expr.match.POS;ag.fn.extend({find:function(B){for(var c=this.pushStack("","find",B),T=0,S=0,P=this.length;S<P;S++){T=c.length;ag.find(B,this[S],c);if(S>0){for(var E=T;E<c.length;E++){for(var t=0;t<T;t++){if(c[t]===c[E]){c.splice(E--,1);break}}}}}return c},has:function(t){var c=ag(t);return this.filter(function(){for(var E=0,B=c.length;E<B;E++){if(ag.contains(this,c[E])){return true}}})},not:function(c){return this.pushStack(aR(this,c,false),"not",c)},filter:function(c){return this.pushStack(aR(this,c,true),"filter",c)},is:function(c){return !!c&&ag.filter(c,this).length>0},closest:function(V,U){var T=[],S,P,E=this[0];if(ag.isArray(V)){var t,B={},c=1;if(E&&V.length){S=0;for(P=V.length;S<P;S++){t=V[S];B[t]||(B[t]=ag.expr.match.POS.test(t)?ag(t,U||this.context):t)}for(;E&&E.ownerDocument&&E!==U;){for(t in B){S=B[t];if(S.jquery?S.index(E)>-1:ag(E).is(S)){T.push({selector:t,elem:E,level:c})}}E=E.parentNode;c++}}return T}t=O.test(V)?ag(V,U||this.context):null;S=0;for(P=this.length;S<P;S++){for(E=this[S];E;){if(t?t.index(E)>-1:ag.find.matchesSelector(E,V)){T.push(E);break}else{E=E.parentNode;if(!E||!E.ownerDocument||E===U){break}}}}T=T.length>1?ag.unique(T):T;return this.pushStack(T,"closest",V)},index:function(c){if(!c||typeof c==="string"){return ag.inArray(this[0],c?ag(c):this.parent().children())}return ag.inArray(c.jquery?c[0]:c,this)},add:function(t,c){var E=typeof t==="string"?ag(t,c||this.context):ag.makeArray(t),B=ag.merge(this.get(),E);return this.pushStack(!E[0]||!E[0].parentNode||E[0].parentNode.nodeType===11||!B[0]||!B[0].parentNode||B[0].parentNode.nodeType===11?B:ag.unique(B))},andSelf:function(){return this.add(this.prevObject)}});ag.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return ag.dir(c,"parentNode")},parentsUntil:function(t,c,B){return ag.dir(t,"parentNode",B)},next:function(c){return ag.nth(c,2,"nextSibling")},prev:function(c){return ag.nth(c,2,"previousSibling")},nextAll:function(c){return ag.dir(c,"nextSibling")},prevAll:function(c){return ag.dir(c,"previousSibling")},nextUntil:function(t,c,B){return ag.dir(t,"nextSibling",B)},prevUntil:function(t,c,B){return ag.dir(t,"previousSibling",B)},siblings:function(c){return ag.sibling(c.parentNode.firstChild,c)},children:function(c){return ag.sibling(c.firstChild)},contents:function(c){return ag.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:ag.makeArray(c.childNodes)}},function(t,c){ag.fn[t]=function(P,E){var B=ag.map(this,c,P);aZ.test(t)||(E=P);if(E&&typeof E==="string"){B=ag.filter(E,B)}B=this.length>1?ag.unique(B):B;if((this.length>1||aM.test(E))&&aF.test(t)){B=B.reverse()}return this.pushStack(B,t,av.call(arguments).join(","))}});ag.extend({filter:function(t,c,B){if(B){t=":not("+t+")"}return c.length===1?ag.find.matchesSelector(c[0],t)?[c[0]]:[]:ag.find.matches(t,c)},dir:function(t,c,E){var B=[];for(t=t[c];t&&t.nodeType!==9&&(E===aG||t.nodeType!==1||!ag(t).is(E));){t.nodeType===1&&B.push(t);t=t[c]}return B},nth:function(t,c,E){c=c||1;for(var B=0;t;t=t[E]){if(t.nodeType===1&&++B===c){break}}return t},sibling:function(t,c){for(var B=[];t;t=t.nextSibling){t.nodeType===1&&t!==c&&B.push(t)}return B}});var aK=/ jQuery\d+="(?:\d+|null)"/g,aT=/^\s+/,a2=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,aP=/<([\w:]+)/,z=/<tbody/i,j=/<|&#?\w+;/,aA=/<(?:script|object|embed|option|style)/i,ad=/checked\s*(?:[^=]|=\s*.checked.)/i,a0=/\=([^="'>\s]+\/)>/g,aw={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};aw.optgroup=aw.option;aw.tbody=aw.tfoot=aw.colgroup=aw.caption=aw.thead;aw.th=aw.td;if(!ag.support.htmlSerialize){aw._default=[1,"div<div>","</div>"]}ag.fn.extend({text:function(c){if(ag.isFunction(c)){return this.each(function(t){var B=ag(this);B.text(c.call(this,t,B.text()))})}if(typeof c!=="object"&&c!==aG){return this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(c))}return ag.text(this)},wrapAll:function(t){if(ag.isFunction(t)){return this.each(function(B){ag(this).wrapAll(t.call(this,B))})}if(this[0]){var c=ag(t,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var B=this;B.firstChild&&B.firstChild.nodeType===1;){B=B.firstChild}return B}).append(this)}return this},wrapInner:function(c){if(ag.isFunction(c)){return this.each(function(t){ag(this).wrapInner(c.call(this,t))})}return this.each(function(){var t=ag(this),B=t.contents();B.length?B.wrapAll(c):t.append(c)})},wrap:function(c){return this.each(function(){ag(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){ag.nodeName(this,"body")||ag(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this)})}else{if(arguments.length){var c=ag(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this.nextSibling)})}else{if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,ag(arguments[0]).toArray());return c}}},remove:function(t,c){for(var E=0,B;(B=this[E])!=null;E++){if(!t||ag.filter(t,[B]).length){if(!c&&B.nodeType===1){ag.cleanData(B.getElementsByTagName("*"));ag.cleanData([B])}B.parentNode&&B.parentNode.removeChild(B)}}return this},empty:function(){for(var t=0,c;(c=this[t])!=null;t++){for(c.nodeType===1&&ag.cleanData(c.getElementsByTagName("*"));c.firstChild;){c.removeChild(c.firstChild)}}return this},clone:function(t){var c=this.map(function(){if(!ag.support.noCloneEvent&&!ag.isXMLDoc(this)){var E=this.outerHTML,B=this.ownerDocument;if(!E){E=B.createElement("div");E.appendChild(this.cloneNode(true));E=E.innerHTML}return ag.clean([E.replace(aK,"").replace(a0,'="$1">').replace(aT,"")],B)[0]}else{return this.cloneNode(true)}});if(t===true){aD(this,c);aD(this.find("*"),c.find("*"))}return c},html:function(t){if(t===aG){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(aK,""):null}else{if(typeof t==="string"&&!aA.test(t)&&(ag.support.leadingWhitespace||!aT.test(t))&&!aw[(aP.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(a2,"<$1></$2>");try{for(var c=0,E=this.length;c<E;c++){if(this[c].nodeType===1){ag.cleanData(this[c].getElementsByTagName("*"));this[c].innerHTML=t}}}catch(B){this.empty().append(t)}}else{ag.isFunction(t)?this.each(function(S){var P=ag(this);P.html(t.call(this,S,P.html()))}):this.empty().append(t)}}return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(ag.isFunction(c)){return this.each(function(t){var E=ag(this),B=E.html();E.replaceWith(c.call(this,t,B))})}if(typeof c!=="string"){c=ag(c).detach()}return this.each(function(){var t=this.nextSibling,B=this.parentNode;ag(this).remove();t?ag(t).before(c):ag(B).append(c)})}else{return this.pushStack(ag(ag.isFunction(c)?c():c),"replaceWith",c)}},detach:function(c){return this.remove(c,true)},domManip:function(V,U,T){var S,P,E,t=V[0],B=[];if(!ag.support.checkClone&&arguments.length===3&&typeof t==="string"&&ad.test(t)){return this.each(function(){ag(this).domManip(V,U,T,true)})}if(ag.isFunction(t)){return this.each(function(W){var X=ag(this);V[0]=t.call(this,W,U?X.html():aG);X.domManip(V,U,T)})}if(this[0]){S=t&&t.parentNode;S=ag.support.parentNode&&S&&S.nodeType===11&&S.childNodes.length===this.length?{fragment:S}:ag.buildFragment(V,this,B);E=S.fragment;if(P=E.childNodes.length===1?E=E.firstChild:E.firstChild){U=U&&ag.nodeName(P,"tr");P=0;for(var c=this.length;P<c;P++){T.call(U?ag.nodeName(this[P],"table")?this[P].getElementsByTagName("tbody")[0]||this[P].appendChild(this[P].ownerDocument.createElement("tbody")):this[P]:this[P],P>0||S.cacheable||this.length>1?E.cloneNode(true):E)}}B.length&&ag.each(B,aJ)}return this}});ag.buildFragment=function(t,c,S){var P,E,B;c=c&&c[0]?c[0].ownerDocument||c[0]:N;if(t.length===1&&typeof t[0]==="string"&&t[0].length<512&&c===N&&!aA.test(t[0])&&(ag.support.checkClone||!ad.test(t[0]))){E=true;if(B=ag.fragments[t[0]]){if(B!==1){P=B}}}if(!P){P=c.createDocumentFragment();ag.clean(t,c,P,S)}if(E){ag.fragments[t[0]]=B?P:1}return{fragment:P,cacheable:E}};ag.fragments={};ag.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,c){ag.fn[t]=function(T){var S=[];T=ag(T);var P=this.length===1&&this[0].parentNode;if(P&&P.nodeType===11&&P.childNodes.length===1&&T.length===1){T[c](this[0]);return this}else{P=0;for(var E=T.length;P<E;P++){var B=(P>0?this.clone(true):this).get();ag(T[P])[c](B);S=S.concat(B)}return this.pushStack(S,t,T.selector)}}});ag.extend({clean:function(X,V,U,T){V=V||N;if(typeof V.createElement==="undefined"){V=V.ownerDocument||V[0]&&V[0].ownerDocument||N}for(var S=[],P=0,B;(B=X[P])!=null;P++){if(typeof B==="number"){B+=""}if(B){if(typeof B==="string"&&!j.test(B)){B=V.createTextNode(B)}else{if(typeof B==="string"){B=B.replace(a2,"<$1></$2>");var E=(aP.exec(B)||["",""])[1].toLowerCase(),t=aw[E]||aw._default,W=t[0],c=V.createElement("div");for(c.innerHTML=t[1]+B+t[2];W--;){c=c.lastChild}if(!ag.support.tbody){W=z.test(B);E=E==="table"&&!W?c.firstChild&&c.firstChild.childNodes:t[1]==="<table>"&&!W?c.childNodes:[];for(t=E.length-1;t>=0;--t){ag.nodeName(E[t],"tbody")&&!E[t].childNodes.length&&E[t].parentNode.removeChild(E[t])}}!ag.support.leadingWhitespace&&aT.test(B)&&c.insertBefore(V.createTextNode(aT.exec(B)[0]),c.firstChild);B=c.childNodes}}if(B.nodeType){S.push(B)}else{S=ag.merge(S,B)}}}if(U){for(P=0;S[P];P++){if(T&&ag.nodeName(S[P],"script")&&(!S[P].type||S[P].type.toLowerCase()==="text/javascript")){T.push(S[P].parentNode?S[P].parentNode.removeChild(S[P]):S[P])}else{S[P].nodeType===1&&S.splice.apply(S,[P+1,0].concat(ag.makeArray(S[P].getElementsByTagName("script"))));U.appendChild(S[P])}}}return S},cleanData:function(V){for(var U,T,S=ag.cache,P=ag.event.special,E=ag.support.deleteExpando,t=0,B;(B=V[t])!=null;t++){if(!(B.nodeName&&ag.noData[B.nodeName.toLowerCase()])){if(T=B[ag.expando]){if((U=S[T])&&U.events){for(var c in U.events){P[c]?ag.event.remove(B,c):ag.removeEvent(B,c,U.handle)}}if(E){delete B[ag.expando]}else{B.removeAttribute&&B.removeAttribute(ag.expando)}delete S[T]}}}}});var F=/alpha\([^)]*\)/i,aO=/opacity=([^)]*)/,ay=/-([a-z])/ig,R=/([A-Z])/g,n=/^-?\d+(?:px)?$/i,C=/^-?\d/,l={position:"absolute",visibility:"hidden",display:"block"},ak=["Left","Right"],L=["Top","Bottom"],ap,a5,aN,a3=function(t,c){return c.toUpperCase()};ag.fn.css=function(t,c){if(arguments.length===2&&c===aG){return this}return ag.access(this,t,c,true,function(P,E,B){return B!==aG?ag.style(P,E,B):ag.css(P,E)})};ag.extend({cssHooks:{opacity:{get:function(t,c){if(c){var B=ap(t,"opacity","opacity");return B===""?"1":B}else{return t.style.opacity}}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true},cssProps:{"float":ag.support.cssFloat?"cssFloat":"styleFloat"},style:function(V,U,T,S){if(!(!V||V.nodeType===3||V.nodeType===8||!V.style)){var P,E=ag.camelCase(U),t=V.style,B=ag.cssHooks[E];U=ag.cssProps[E]||E;if(T!==aG){if(!(typeof T==="number"&&isNaN(T)||T==null)){if(typeof T==="number"&&!ag.cssNumber[E]){T+="px"}if(!B||!("set" in B)||(T=B.set(V,T))!==aG){try{t[U]=T}catch(c){}}}}else{if(B&&"get" in B&&(P=B.get(V,false,S))!==aG){return P}return t[U]}}},css:function(t,c,S){var P,E=ag.camelCase(c),B=ag.cssHooks[E];c=ag.cssProps[E]||E;if(B&&"get" in B&&(P=B.get(t,true,S))!==aG){return P}else{if(ap){return ap(t,c,E)}}},swap:function(t,c,P){var E={},B;for(B in c){E[B]=t.style[B];t.style[B]=c[B]}P.call(t);for(B in c){t.style[B]=E[B]}},camelCase:function(c){return c.replace(ay,a3)}});ag.curCSS=ag.css;ag.each(["height","width"],function(t,c){ag.cssHooks[c]={get:function(S,P,E){var B;if(P){if(S.offsetWidth!==0){B=af(S,c,E)}else{ag.swap(S,l,function(){B=af(S,c,E)})}if(B<=0){B=ap(S,c,c);if(B==="0px"&&aN){B=aN(S,c,c)}if(B!=null){return B===""||B==="auto"?"0px":B}}if(B<0||B==null){B=S.style[c];return B===""||B==="auto"?"0px":B}return typeof B==="string"?B:B+"px"}},set:function(E,B){if(n.test(B)){B=parseFloat(B);if(B>=0){return B+"px"}}else{return B}}}});if(!ag.support.opacity){ag.cssHooks.opacity={get:function(t,c){return aO.test((c&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(t,c){var P=t.style;P.zoom=1;var E=ag.isNaN(c)?"":"alpha(opacity="+c*100+")",B=P.filter||"";P.filter=F.test(B)?B.replace(F,E):P.filter+" "+E}}}if(N.defaultView&&N.defaultView.getComputedStyle){a5=function(t,c,E){var B;E=E.replace(R,"-$1").toLowerCase();if(!(c=t.ownerDocument.defaultView)){return aG}if(c=c.getComputedStyle(t,null)){B=c.getPropertyValue(E);if(B===""&&!ag.contains(t.ownerDocument.documentElement,t)){B=ag.style(t,E)}}return B}}if(N.documentElement.currentStyle){aN=function(t,c){var S,P,E=t.currentStyle&&t.currentStyle[c],B=t.style;if(!n.test(E)&&C.test(E)){S=B.left;P=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left;B.left=c==="fontSize"?"1em":E||0;E=B.pixelLeft+"px";B.left=S;t.runtimeStyle.left=P}return E===""?"auto":E}}ap=a5||aN;if(ag.expr&&ag.expr.filters){ag.expr.filters.hidden=function(t){var c=t.offsetHeight;return t.offsetWidth===0&&c===0||!ag.support.reliableHiddenOffsets&&(t.style.display||ag.css(t,"display"))==="none"};ag.expr.filters.visible=function(c){return !ag.expr.filters.hidden(c)}}var aQ=ag.now(),aB=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ae=/^(?:select|textarea)/i,G=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,o=/^(?:GET|HEAD)$/,x=/\[\]$/,at=/\=\?(&|$)/,D=/\?/,a6=/([?&])_=[^&]*/,aU=/^(\w+:)?\/\/([^\/?#]+)/,aH=/%20/g,ai=/#.*$/,aS=ag.fn.load;ag.fn.extend({load:function(t,c,S){if(typeof t!=="string"&&aS){return aS.apply(this,arguments)}else{if(!this.length){return this}}var P=t.indexOf(" ");if(P>=0){var E=t.slice(P,t.length);t=t.slice(0,P)}P="GET";if(c){if(ag.isFunction(c)){S=c;c=null}else{if(typeof c==="object"){c=ag.param(c,ag.ajaxSettings.traditional);P="POST"}}}var B=this;ag.ajax({url:t,type:P,dataType:"html",data:c,complete:function(T,U){if(U==="success"||U==="notmodified"){B.html(E?ag("<div>").append(T.responseText.replace(aB,"")).find(E):T.responseText)}S&&B.each(S,[T.responseText,U,T])}});return this},serialize:function(){return ag.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?ag.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ae.test(this.nodeName)||G.test(this.type))}).map(function(t,c){var B=ag(this).val();return B==null?null:ag.isArray(B)?ag.map(B,function(E){return{name:c.name,value:E}}):{name:c.name,value:B}}).get()}});ag.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,c){ag.fn[c]=function(B){return this.bind(c,B)}});ag.extend({get:function(t,c,E,B){if(ag.isFunction(c)){B=B||E;E=c;c=null}return ag.ajax({type:"GET",url:t,data:c,success:E,dataType:B})},getScript:function(t,c){return ag.get(t,null,c,"script")},getJSON:function(t,c,B){return ag.get(t,c,B,"json")},post:function(t,c,E,B){if(ag.isFunction(c)){B=B||E;E=c;c={}}return ag.ajax({type:"POST",url:t,data:c,success:E,dataType:B})},ajaxSetup:function(c){ag.extend(ag.ajaxSettings,c)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new aC.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(bd){var bc=ag.extend(true,{},ag.ajaxSettings,bd),bb,ba,a9,aa=bc.type.toUpperCase(),X=o.test(aa);bc.url=bc.url.replace(ai,"");bc.context=bd&&bd.context!=null?bd.context:bc;if(bc.data&&bc.processData&&typeof bc.data!=="string"){bc.data=ag.param(bc.data,bc.traditional)}if(bc.dataType==="jsonp"){if(aa==="GET"){at.test(bc.url)||(bc.url+=(D.test(bc.url)?"&":"?")+(bc.jsonp||"callback")+"=?")}else{if(!bc.data||!at.test(bc.data)){bc.data=(bc.data?bc.data+"&":"")+(bc.jsonp||"callback")+"=?"}}bc.dataType="json"}if(bc.dataType==="json"&&(bc.data&&at.test(bc.data)||at.test(bc.url))){bb=bc.jsonpCallback||"jsonp"+aQ++;if(bc.data){bc.data=(bc.data+"").replace(at,"="+bb+"$1")}bc.url=bc.url.replace(at,"="+bb+"$1");bc.dataType="script";var Y=aC[bb];aC[bb]=function(be){if(ag.isFunction(Y)){Y(be)}else{aC[bb]=aG;try{delete aC[bb]}catch(bf){}}a9=be;ag.handleSuccess(bc,P,ba,a9);ag.handleComplete(bc,P,ba,a9);T&&T.removeChild(U)}}if(bc.dataType==="script"&&bc.cache===null){bc.cache=false}if(bc.cache===false&&X){var V=ag.now(),E=bc.url.replace(a6,"$1_="+V);bc.url=E+(E===bc.url?(D.test(bc.url)?"&":"?")+"_="+V:"")}if(bc.data&&X){bc.url+=(D.test(bc.url)?"&":"?")+bc.data}bc.global&&ag.active++===0&&ag.event.trigger("ajaxStart");V=(V=aU.exec(bc.url))&&(V[1]&&V[1].toLowerCase()!==location.protocol||V[2].toLowerCase()!==location.host);if(bc.dataType==="script"&&aa==="GET"&&V){var T=N.getElementsByTagName("head")[0]||N.documentElement,U=N.createElement("script");if(bc.scriptCharset){U.charset=bc.scriptCharset}U.src=bc.url;if(!bb){var S=false;U.onload=U.onreadystatechange=function(){if(!S&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){S=true;ag.handleSuccess(bc,P,ba,a9);ag.handleComplete(bc,P,ba,a9);U.onload=U.onreadystatechange=null;T&&U.parentNode&&T.removeChild(U)}}}T.insertBefore(U,T.firstChild);return aG}var t=false,P=bc.xhr();if(P){bc.username?P.open(aa,bc.url,bc.async,bc.username,bc.password):P.open(aa,bc.url,bc.async);try{if(bc.data!=null&&!X||bd&&bd.contentType){P.setRequestHeader("Content-Type",bc.contentType)}if(bc.ifModified){ag.lastModified[bc.url]&&P.setRequestHeader("If-Modified-Since",ag.lastModified[bc.url]);ag.etag[bc.url]&&P.setRequestHeader("If-None-Match",ag.etag[bc.url])}V||P.setRequestHeader("X-Requested-With","XMLHttpRequest");P.setRequestHeader("Accept",bc.dataType&&bc.accepts[bc.dataType]?bc.accepts[bc.dataType]+", */*; q=0.01":bc.accepts._default)}catch(B){}if(bc.beforeSend&&bc.beforeSend.call(bc.context,P,bc)===false){bc.global&&ag.active--===1&&ag.event.trigger("ajaxStop");P.abort();return false}bc.global&&ag.triggerGlobal(bc,"ajaxSend",[P,bc]);var c=P.onreadystatechange=function(be){if(!P||P.readyState===0||be==="abort"){t||ag.handleComplete(bc,P,ba,a9);t=true;if(P){P.onreadystatechange=ag.noop}}else{if(!t&&P&&(P.readyState===4||be==="timeout")){t=true;P.onreadystatechange=ag.noop;ba=be==="timeout"?"timeout":!ag.httpSuccess(P)?"error":bc.ifModified&&ag.httpNotModified(P,bc.url)?"notmodified":"success";var bg;if(ba==="success"){try{a9=ag.httpData(P,bc.dataType,bc)}catch(bf){ba="parsererror";bg=bf}}if(ba==="success"||ba==="notmodified"){bb||ag.handleSuccess(bc,P,ba,a9)}else{ag.handleError(bc,P,ba,bg)}bb||ag.handleComplete(bc,P,ba,a9);be==="timeout"&&P.abort();if(bc.async){P=null}}}};try{var ab=P.abort;P.abort=function(){P&&Function.prototype.call.call(ab,P);c("abort")}}catch(Z){}bc.async&&bc.timeout>0&&setTimeout(function(){P&&!t&&c("timeout")},bc.timeout);try{P.send(X||bc.data==null?null:bc.data)}catch(W){ag.handleError(bc,P,null,W);ag.handleComplete(bc,P,ba,a9)}bc.async||c();return P}},param:function(t,c){var P=[],E=function(T,S){S=ag.isFunction(S)?S():S;P[P.length]=encodeURIComponent(T)+"="+encodeURIComponent(S)};if(c===aG){c=ag.ajaxSettings.traditional}if(ag.isArray(t)||t.jquery){ag.each(t,function(){E(this.name,this.value)})}else{for(var B in t){A(B,t[B],c,E)}}return P.join("&").replace(aH,"+")}});ag.extend({active:0,lastModified:{},etag:{},handleError:function(t,c,E,B){t.error&&t.error.call(t.context,c,E,B);t.global&&ag.triggerGlobal(t,"ajaxError",[c,t,B])},handleSuccess:function(t,c,E,B){t.success&&t.success.call(t.context,B,E,c);t.global&&ag.triggerGlobal(t,"ajaxSuccess",[c,t])},handleComplete:function(t,c,B){t.complete&&t.complete.call(t.context,c,B);t.global&&ag.triggerGlobal(t,"ajaxComplete",[c,t]);t.global&&ag.active--===1&&ag.event.trigger("ajaxStop")},triggerGlobal:function(t,c,B){(t.context&&t.context.url==null?ag(t.context):ag.event).trigger(c,B)},httpSuccess:function(t){try{return !t.status&&location.protocol==="file:"||t.status>=200&&t.status<300||t.status===304||t.status===1223}catch(c){}return false},httpNotModified:function(t,c){var E=t.getResponseHeader("Last-Modified"),B=t.getResponseHeader("Etag");if(E){ag.lastModified[c]=E}if(B){ag.etag[c]=B}return t.status===304},httpData:function(t,c,P){var E=t.getResponseHeader("content-type")||"",B=c==="xml"||!c&&E.indexOf("xml")>=0;t=B?t.responseXML:t.responseText;B&&t.documentElement.nodeName==="parsererror"&&ag.error("parsererror");if(P&&P.dataFilter){t=P.dataFilter(t,c)}if(typeof t==="string"){if(c==="json"||!c&&E.indexOf("json")>=0){t=ag.parseJSON(t)}else{if(c==="script"||!c&&E.indexOf("javascript")>=0){ag.globalEval(t)}}}return t}});if(aC.ActiveXObject){ag.ajaxSettings.xhr=function(){if(aC.location.protocol!=="file:"){try{return new aC.XMLHttpRequest}catch(t){}}try{return new aC.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}ag.support.ajax=!!ag.ajaxSettings.xhr();var k={},J=/^(?:toggle|show|hide)$/,v=/^([+\-]=)?([\d+.\-]+)(.*)$/,ax,H=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];ag.fn.extend({show:function(t,c,E){if(t||t===0){return this.animate(au("show",3),t,c,E)}else{E=0;for(var B=this.length;E<B;E++){t=this[E];c=t.style.display;if(!ag.data(t,"olddisplay")&&c==="none"){c=t.style.display=""}c===""&&ag.css(t,"display")==="none"&&ag.data(t,"olddisplay",q(t.nodeName))}for(E=0;E<B;E++){t=this[E];c=t.style.display;if(c===""||c==="none"){t.style.display=ag.data(t,"olddisplay")||""}}return this}},hide:function(t,c,B){if(t||t===0){return this.animate(au("hide",3),t,c,B)}else{t=0;for(c=this.length;t<c;t++){B=ag.css(this[t],"display");B!=="none"&&ag.data(this[t],"olddisplay",B)}for(t=0;t<c;t++){this[t].style.display="none"}return this}},_toggle:ag.fn.toggle,toggle:function(t,c,E){var B=typeof t==="boolean";if(ag.isFunction(t)&&ag.isFunction(c)){this._toggle.apply(this,arguments)}else{t==null||B?this.each(function(){var P=B?t:ag(this).is(":hidden");ag(this)[P?"show":"hide"]()}):this.animate(au("toggle",3),t,c,E)}return this},fadeTo:function(t,c,E,B){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:c},t,E,B)},animate:function(t,c,P,E){var B=ag.speed(c,P,E);if(ag.isEmptyObject(t)){return this.each(B.complete)}return this[B.queue===false?"each":"queue"](function(){var V=ag.extend({},B),T,U=this.nodeType===1,X=U&&ag(this).is(":hidden"),S=this;for(T in t){var W=ag.camelCase(T);if(T!==W){t[W]=t[T];delete t[T];T=W}if(t[T]==="hide"&&X||t[T]==="show"&&!X){return V.complete.call(this)}if(U&&(T==="height"||T==="width")){V.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(ag.css(this,"display")==="inline"&&ag.css(this,"float")==="none"){if(ag.support.inlineBlockNeedsLayout){if(q(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}else{this.style.display="inline-block"}}}if(ag.isArray(t[T])){(V.specialEasing=V.specialEasing||{})[T]=t[T][1];t[T]=t[T][0]}}if(V.overflow!=null){this.style.overflow="hidden"}V.curAnim=ag.extend({},t);ag.each(t,function(Z,bb){var ab=new ag.fx(S,V,Z);if(J.test(bb)){ab[bb==="toggle"?X?"show":"hide":bb](t)}else{var aa=v.exec(bb),a9=ab.cur()||0;if(aa){var Y=parseFloat(aa[2]),ba=aa[3]||"px";if(ba!=="px"){ag.style(S,Z,(Y||1)+ba);a9=(Y||1)/ab.cur()*a9;ag.style(S,Z,a9+ba)}if(aa[1]){Y=(aa[1]==="-="?-1:1)*Y+a9}ab.custom(a9,Y,ba)}else{ab.custom(a9,bb,"")}}});return true})},stop:function(t,c){var B=ag.timers;t&&this.queue([]);this.each(function(){for(var E=B.length-1;E>=0;E--){if(B[E].elem===this){c&&B[E](true);B.splice(E,1)}}});c||this.dequeue();return this}});ag.each({slideDown:au("show",1),slideUp:au("hide",1),slideToggle:au("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,c){ag.fn[t]=function(P,E,B){return this.animate(c,P,E,B)}});ag.extend({speed:function(t,c,E){var B=t&&typeof t==="object"?ag.extend({},t):{complete:E||!E&&c||ag.isFunction(t)&&t,duration:t,easing:E&&c||c&&!ag.isFunction(c)&&c};B.duration=ag.fx.off?0:typeof B.duration==="number"?B.duration:B.duration in ag.fx.speeds?ag.fx.speeds[B.duration]:ag.fx.speeds._default;B.old=B.complete;B.complete=function(){B.queue!==false&&ag(this).dequeue();ag.isFunction(B.old)&&B.old.call(this)};return B},easing:{linear:function(t,c,E,B){return E+B*t},swing:function(t,c,E,B){return(-Math.cos(t*Math.PI)/2+0.5)*B+E}},timers:[],fx:function(t,c,B){this.options=c;this.elem=t;this.prop=B;if(!c.orig){c.orig={}}}});ag.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(ag.fx.step[this.prop]||ag.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var c=parseFloat(ag.css(this.elem,this.prop));return c&&c>-10000?c:0},custom:function(t,c,S){function P(T){return E.step(T)}var E=this,B=ag.fx;this.startTime=ag.now();this.start=t;this.end=c;this.unit=S||this.unit||"px";this.now=this.start;this.pos=this.state=0;P.elem=this.elem;if(P()&&ag.timers.push(P)&&!ax){ax=setInterval(B.tick,B.interval)}},show:function(){this.options.orig[this.prop]=ag.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());ag(this.elem).show()},hide:function(){this.options.orig[this.prop]=ag.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(B){var c=ag.now(),T=true;if(B||c>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var S in this.options.curAnim){if(this.options.curAnim[S]!==true){T=false}}if(T){if(this.options.overflow!=null&&!ag.support.shrinkWrapBlocks){var P=this.elem,E=this.options;ag.each(["","X","Y"],function(U,V){P.style["overflow"+V]=E.overflow[U]})}this.options.hide&&ag(this.elem).hide();if(this.options.hide||this.options.show){for(var t in this.options.curAnim){ag.style(this.elem,t,this.options.orig[t])}}this.options.complete.call(this.elem)}return false}else{B=c-this.startTime;this.state=B/this.options.duration;c=this.options.easing||(ag.easing.swing?"swing":"linear");this.pos=ag.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||c](this.state,B,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};ag.extend(ag.fx,{tick:function(){for(var t=ag.timers,c=0;c<t.length;c++){t[c]()||t.splice(c--,1)}t.length||ag.fx.stop()},interval:13,stop:function(){clearInterval(ax);ax=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){ag.style(c.elem,"opacity",c.now)},_default:function(c){if(c.elem.style&&c.elem.style[c.prop]!=null){c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit}else{c.elem[c.prop]=c.now}}}});if(ag.expr&&ag.expr.filters){ag.expr.filters.animated=function(c){return ag.grep(ag.timers,function(t){return c===t.elem}).length}}var d=/^t(?:able|d|h)$/i,aE=/^(?:body|html)$/i;ag.fn.offset="getBoundingClientRect" in N.documentElement?function(t){var c=this[0],S;if(t){return this.each(function(T){ag.offset.setOffset(this,t,T)})}if(!c||!c.ownerDocument){return null}if(c===c.ownerDocument.body){return ag.offset.bodyOffset(c)}try{S=c.getBoundingClientRect()}catch(P){}var E=c.ownerDocument,B=E.documentElement;if(!S||!ag.contains(B,c)){return S||{top:0,left:0}}c=E.body;E=a1(E);return{top:S.top+(E.pageYOffset||ag.support.boxModel&&B.scrollTop||c.scrollTop)-(B.clientTop||c.clientTop||0),left:S.left+(E.pageXOffset||ag.support.boxModel&&B.scrollLeft||c.scrollLeft)-(B.clientLeft||c.clientLeft||0)}}:function(V){var U=this[0];if(V){return this.each(function(W){ag.offset.setOffset(this,V,W)})}if(!U||!U.ownerDocument){return null}if(U===U.ownerDocument.body){return ag.offset.bodyOffset(U)}ag.offset.initialize();var T,S=U.offsetParent,P=U.ownerDocument,E=P.documentElement,t=P.body;T=(P=P.defaultView)?P.getComputedStyle(U,null):U.currentStyle;for(var B=U.offsetTop,c=U.offsetLeft;(U=U.parentNode)&&U!==t&&U!==E;){if(ag.offset.supportsFixedPosition&&T.position==="fixed"){break}T=P?P.getComputedStyle(U,null):U.currentStyle;B-=U.scrollTop;c-=U.scrollLeft;if(U===S){B+=U.offsetTop;c+=U.offsetLeft;if(ag.offset.doesNotAddBorder&&!(ag.offset.doesAddBorderForTableAndCells&&d.test(U.nodeName))){B+=parseFloat(T.borderTopWidth)||0;c+=parseFloat(T.borderLeftWidth)||0}S=U.offsetParent}if(ag.offset.subtractsBorderForOverflowNotVisible&&T.overflow!=="visible"){B+=parseFloat(T.borderTopWidth)||0;c+=parseFloat(T.borderLeftWidth)||0}T=T}if(T.position==="relative"||T.position==="static"){B+=t.offsetTop;c+=t.offsetLeft}if(ag.offset.supportsFixedPosition&&T.position==="fixed"){B+=Math.max(E.scrollTop,t.scrollTop);c+=Math.max(E.scrollLeft,t.scrollLeft)}return{top:B,left:c}};ag.offset={initialize:function(){var t=N.body,c=N.createElement("div"),S,P,E,B=parseFloat(ag.css(t,"marginTop"))||0;ag.extend(c.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});c.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";t.insertBefore(c,t.firstChild);S=c.firstChild;P=S.firstChild;E=S.nextSibling.firstChild.firstChild;this.doesNotAddBorder=P.offsetTop!==5;this.doesAddBorderForTableAndCells=E.offsetTop===5;P.style.position="fixed";P.style.top="20px";this.supportsFixedPosition=P.offsetTop===20||P.offsetTop===15;P.style.position=P.style.top="";S.style.overflow="hidden";S.style.position="relative";this.subtractsBorderForOverflowNotVisible=P.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=t.offsetTop!==B;t.removeChild(c);ag.offset.initialize=ag.noop},bodyOffset:function(t){var c=t.offsetTop,B=t.offsetLeft;ag.offset.initialize();if(ag.offset.doesNotIncludeMarginInBodyOffset){c+=parseFloat(ag.css(t,"marginTop"))||0;B+=parseFloat(ag.css(t,"marginLeft"))||0}return{top:c,left:B}},setOffset:function(W,U,T){var S=ag.css(W,"position");if(S==="static"){W.style.position="relative"}var P=ag(W),E=P.offset(),t=ag.css(W,"top"),B=ag.css(W,"left"),c=S==="absolute"&&ag.inArray("auto",[t,B])>-1;S={};var V={};if(c){V=P.position()}t=c?V.top:parseInt(t,10)||0;B=c?V.left:parseInt(B,10)||0;if(ag.isFunction(U)){U=U.call(W,T,E)}if(U.top!=null){S.top=U.top-E.top+t}if(U.left!=null){S.left=U.left-E.left+B}"using" in U?U.using.call(W,S):P.css(S)}};ag.fn.extend({position:function(){if(!this[0]){return null}var t=this[0],c=this.offsetParent(),E=this.offset(),B=aE.test(c[0].nodeName)?{top:0,left:0}:c.offset();E.top-=parseFloat(ag.css(t,"marginTop"))||0;E.left-=parseFloat(ag.css(t,"marginLeft"))||0;B.top+=parseFloat(ag.css(c[0],"borderTopWidth"))||0;B.left+=parseFloat(ag.css(c[0],"borderLeftWidth"))||0;return{top:E.top-B.top,left:E.left-B.left}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent||N.body;c&&!aE.test(c.nodeName)&&ag.css(c,"position")==="static";){c=c.offsetParent}return c})}});ag.each(["Left","Top"],function(t,c){var B="scroll"+c;ag.fn[B]=function(S){var P=this[0],E;if(!P){return null}if(S!==aG){return this.each(function(){if(E=a1(this)){E.scrollTo(!t?S:ag(E).scrollLeft(),t?S:ag(E).scrollTop())}else{this[B]=S}})}else{return(E=a1(P))?"pageXOffset" in E?E[t?"pageYOffset":"pageXOffset"]:ag.support.boxModel&&E.document.documentElement[B]||E.document.body[B]:P[B]}}});ag.each(["Height","Width"],function(t,c){var B=c.toLowerCase();ag.fn["inner"+c]=function(){return this[0]?parseFloat(ag.css(this[0],B,"padding")):null};ag.fn["outer"+c]=function(E){return this[0]?parseFloat(ag.css(this[0],B,E?"margin":"border")):null};ag.fn[B]=function(S){var P=this[0];if(!P){return S==null?null:this}if(ag.isFunction(S)){return this.each(function(T){var U=ag(this);U[B](S.call(this,T,U[B]()))})}if(ag.isWindow(P)){return P.document.compatMode==="CSS1Compat"&&P.document.documentElement["client"+c]||P.document.body["client"+c]}else{if(P.nodeType===9){return Math.max(P.documentElement["client"+c],P.body["scroll"+c],P.documentElement["scroll"+c],P.body["offset"+c],P.documentElement["offset"+c])}else{if(S===aG){P=ag.css(P,B);var E=parseFloat(P);return ag.isNaN(E)?P:E}else{return this.css(B,typeof S==="string"?S:S+"px")}}}}})})(window);if(booking.env.enable_scripts_tracking){booking.env.scripts_tracking.main={loaded:true,run:false}}function bookmark(g,f){if(window.external){window.external.AddFavorite(g,f)}else{if(window.sidebar){window.sidebar.addPanel(f,g,"")}else{alert(tr.pressCtlD)}}}function addBookmark(f,g){if(window.sidebar){window.sidebar.addPanel(f,g,"")}else{if(document.all){window.external.AddFavorite(g,f)}else{alert("Sorry your browser doesn't support this function\nTo bookmark this page\nWindows users press ctrl + D\nMac users press cmd + D")}}}function hideFrameContainer(m,f,l){if(document.getElementById){var c=document.getElementById(m);var k=document.getElementById(f);c.style.display="none";document.getElementById("headline_newsletter").style.display="block";document.getElementById("headline_createprofile").style.display="none"}}function changeHeadline(){document.getElementById("headline_newsletter").style.display="none";document.getElementById("headline_createprofile").style.display="block"}function hideEl(d){$("#"+d).hide()}function showEl(d){$("#"+d).show()}function showFrameContainer(C,F,D,G,E,I,c,A,K){if(document.getElementById){var f=document.getElementById(C);var M=document.getElementById(F);var z=document.getElementById(D);if(M.style.display=="block"){M.style.display="none";return false}if(z.src!=G){z.src=G}M.style.visibility="hidden";M.style.display="block";var J=$(f).position()||{};var B=J.left,L=J.top;if(c){B+=c}if(A){L+=A}if(!E){E=M.offsetWidth}var H=document.getElementById("bodyconstraint").offsetWidth;if((B+E)>H){B=(H-E-40)}M.style.left=B+"px";M.style.top=L+"px";M.style.visibility="visible";return false}else{window.open(G)}}function sSc(g,h,f){if(document.getElementById){document.getElementById("rsc_"+g).innerHTML=f}}function sSc3(g,f){$("li[id^="+g+"]").attr("style","display: none; ");$("li[id^="+f+"]").removeAttr("style")}function sSc2(j,k,h){if(document.getElementById){if(document.getElementById("rnr")){document.getElementById("rnr").innerHTML=j}for(var l=-1;l<10;l++){var m=document.getElementById("rl"+l);if(m){m.style.color="";m.style.textDecoration="underline"}}k.style.color="#003580";k.style.textDecoration="none";k.blur();$("#gr_profile_chooser ul").removeClass().addClass(h);$(".review_filter_sub").text($(k).find(".key").text());if(h=="group"||h=="review_category_group_of_friends"){classname="group_big"}else{if(h=="solo_traveller"){classname="solo_big"}else{if(h=="family_with_young_children"||h=="review_category_family"){classname="youngchildren_big"}else{if(h=="mature_couple"){classname="maturecouple_big"}else{if(h=="family_with_older_children"){classname="oldchildren_big"}else{if(h=="with_friends"){classname="withfriends_big"}else{if(h=="young_couple"||h=="review_category_couple"){classname="youngcouple_big"}else{classname="global_big"}}}}}}}$(".review_user_type").attr("class","review_user_type type_"+classname)}}if($.ajaxSetup){$.ajaxSetup({cache:false,beforeSend:function(d){d.setRequestHeader("X-Booking-Pageview-Id",booking.env.pageview_id);d.setRequestHeader("X-Booking-AID",booking.env.aid);d.setRequestHeader("X-Booking-Session-Id",booking.env.b_sid)}})}if($(".b_msie_6").length){$(".b_msie_6 .bigbluebutton").mouseenter(function(){$(this).addClass("bigbluebutton_hover")});$(".b_msie_6 .bigbluebutton").mouseleave(function(){$(this).removeClass("bigbluebutton_hover")});$(".b_msie_6 .price_button").mouseenter(function(){$(this).addClass("price_button_hover")});$(".b_msie_6 .price_button").mouseleave(function(){$(this).removeClass("price_button_hover")})}$("#signup_box").hide();$(".userdataform").hide();function ShowHideSignup(){$("#signup_box").animate({height:"toggle"},{duration:500});return false}$("#signup_box #signupForm").click(function(d){d.stopPropagation()});$("#signup_box .userdataform").click(function(d){d.stopPropagation()});$(function(){$(".newsletter_ajax_error").hide();$('input#to[type="text"]').css({backgroundColor:"#FFFFFF"});$('input#to[type="text"]').focus(function(){$(this).css({color:"#003580"});if(this.value==this.defaultValue){this.value=""}if(this.value!=this.defaultValue){this.select()}});$("input.text-input").blur(function(){$(this).css({backgroundColor:"#FFFFFF"})});$("div#newsletterform_form a.flashdeals_nosubscribe").click(function(){$("div#flashdealsbg_wrapper h2.flashdeals_header_one").hide();$("div#flashdealsbg_wrapper h2.flashdeals_header_two").show();$("div#flashdealsbg_wrapper h3.flashdeals_subheader_one").hide();$("div#flashdealsbg_wrapper h3.flashdeals_subheader_two").show();$("div#flashdealsbg_wrapper a.flashdeals_nosubscribe").hide();$("div#flashdealsbg_wrapper a.flashdeals_gotobooking").show();$("div#flashdealsbg_wrapper input.newsletter_button").hide();$("div#flashdealsbg_wrapper input.newsletter_button_deals").show();return false})});(function(u,q){var z="experiments",w="startup",y="experiments_load",t="startup_load",v=q.env,A=!!$("[data-load]").length,B=function(c){return typeof c==="function"},o=function(c){var d="b_site_experiment_"+c;return(d in v)&&+v[d]>0},x;q.ensureNamespaceExists(z);q.ensureNamespaceExists(w);q.ensureNamespaceExists(y);q.ensureNamespaceExists(t);x=q[w];x.init=function(g){var d=[],f=9,P,n,K,L,M,N,h,k,l,c,O,m,J,j,Q=g==="ready";P=Q?z:y;K=q[P];for(L in K){d.push([K[L].priority||f,L,P,!o(L)])}n=Q?w:t;M=q[n];for(N in M){O=M[N];if(!O.lazy||!A){d.push([O.priority||f,N,n,false])}}if(d.length>0){d.sort();for(J=0,j=d.length;J<j;J+=1){h=d[J];k=h[1];l=h[2];O=q[l][k];c=h[3]?O.initElse:O.init;O.ns="booking."+l;O.name=k;if(B(c)){m=this.execute(c,O);if(m===true){O.init=O.initElse=null}}}}$(document).trigger(g+":finished")};x.execute=function(c,d){return c.call(d)};v.amTracking=[];(function(){var g=20,h=Object.prototype.toString,c=Array.prototype.slice,d=$(u),f=function(n){var l=n.offset(),k=(typeof l.constructor==="function")?l.constructor:{name:"OtherConstructor"},m;if(k.name==="ClientRect"){m=$(n.trackingSelector).eq(0).offset();if(m){return m.top}return false}return l.top},j=function(l){var k=f(l);if(k===false){return false}return(d.scrollTop()+d.height())>(k+g)};q.track={exp:function(I,J){if(typeof I==="undefined"||I===null){return}var N=I.split(","),l=[],k,n,m,M,O,K=q.env.js_experiment_tracking,L;for(k=0,n=N.length;k<n;k+=1){L=isNaN(+N[k])&&!!K?K[N[k]]:N[k];if(/^[0-9]+$/.test(L)&&typeof v.amTracking["e"+L]==="undefined"){l.push(L);v.amTracking["e"+L]=1}}if(l.length>0){d.trigger("ClickTale:TrackDynamic",{experiments:l});M=J?";what="+J:"";m=$("#req_info")?$("#req_info").html():"";O='<img style="height:1px;width:1px;visibility:hidden;float:left;" src="/js_tracking?ver=1'+M+";sid="+v.b_sid+";aid="+v.b_aid+";pid="+v.pageview_id+";exps="+l.join()+";info="+m+'">';$(document.body).append(O)}},onView:function(k){var m=$(k).eq(0),l=this.exp;m.trackingSelector=k;return{exp:function(){var n=c.apply(arguments),C=$.proxy(function(){var D;if(j(m)){D="ONVIEW:"+(h.apply(k)==="[object String]"?k:$(k).selector);d.trigger(D,{source:k});l.apply(q.track,this.args);d.unbind("resize scroll",C)}},{args:n});if(m.length){if(m.css("display")==="none"){m.css({display:"block",visibility:"hidden"})}d.bind("resize scroll",C);C()}}}},onNav:function(){return{exp:function(){}}}};$.each("blur change click dblclick mouseenter mouseleave mouseover mouseout".split(" "),function(m,k){var l=k.slice(0,1);q.track[k]=q.track["on"+k.replace(l,l.toUpperCase())]=function(n){var E=$(n),D=this.exp;return{exp:function(){var F=c.apply(arguments),C=$.proxy(function(){D.apply(q.track,this.args);E.unbind(k,C)},{args:F});E.bind(k,C)}}}})})();v.trackExperiment=function(){q.track.exp.apply(this,Array.prototype.slice.apply(arguments))};$(function(){q[w].init("ready")});$(u).load(function(){q[w].init("load")});$(u.document).bind("lazy:ready",function(){var c=q[t],d,f;for(d in c){f=c[d];if(f.lazy){f.ns="booking.lazy";f.name=d;f.init()}}});q.run=function(c){return{onReady:function(d){q[w][c]={priority:9,init:d}},onLoad:function(d){q[t][c]={priority:9,init:d}}}};q.runExp=function(c){return{onReady:function(d){q[z][c]={priority:9,init:d}},onLoad:function(d){q[y][c]={priority:9,init:d}}}};u.sNSExperiments=z;u.sNSStartup=w;u.sNSExperimentsLoad=y;u.sNSStartupLoad=t})(this,this.booking);(function(n,o){var j=o.startup,l=$(document),k,m=0;if(!o.env.b_site_experiment_clicktale&&!/clicktale/.test(document.location.hostname)){return}j.execute=function(d,f){var h=function(q){return function(){var B=false,E,F=!!($(this).selector),D=Array.prototype.slice.apply(arguments),C,z,A;if(!!this.length){if(!!D.length){for(C=0,z=D.length;C<z;C+=1){A=D[C];if(A&&Object.prototype.toString.apply(A)==="[object Function]"){E=C;B=A;break}}}if(B){D[E]=function(x){if(!F){if(typeof ClickTaleExec==="function"&&!/submit/i.test(x.type)){if(this===n){ClickTaleExec("jQuery(window)."+x.type+"()")}else{if(this===document){ClickTaleExec("jQuery(document)."+x.type+"()")}}}return B.apply(this,Array.prototype.slice.apply(arguments))}var y=$(this),v=y.attr("id"),M=x.type,K,J,u=this.tagName.toLowerCase(),t,L,w;if(v){L=$("#"+v).index(this);w='jQuery("#'+v+'").eq('+L+")"}else{K=y.closest("[id]");J=K.attr("id");t=$("#"+J).index(K);L=K.find(u).index(this);w='jQuery("#'+J+'").eq('+t+').find("'+u+'").eq('+L+")"}if(typeof ClickTaleExec==="function"&&!/submit/i.test(x.type)){if(M==="change"){w+='.val("'+y.val()+'")'}w+="."+M+"()";if(!y.hasClass("ClickTaleSensitive")){ClickTaleExec(w)}}return B.apply(this,Array.prototype.slice.apply(arguments))}}}return q.apply(this,D)}},g,c;g=$.fn.bind;c=$.fn.live;$.fn.bind=h(g);$.fn.live=h(c);d.call(f);$.fn.bind=g;$.fn.live=c};l.bind("ready:finished load:finished",function(){m+=1;k()});k=function(){if(m!==2){return}}})(this,this.booking);$(function(){if(!booking.env.b_site_experiment_clicktale&&!/clicktale/.test(document.location.hostname)){return}ClickTaleEvent=(typeof ClickTaleEvent==="function")?ClickTaleEvent:function(){};ClickTaleRegisterElementAction=(typeof ClickTaleRegisterElementAction==="function")?ClickTaleRegisterElementAction:function(){};ClickTaleRegisterFormSubmitNotSent=(typeof ClickTaleRegisterFormSubmitNotSent==="function")?ClickTaleRegisterFormSubmitNotSent:function(){};ClickTaleRegisterFormSubmitSent=(typeof ClickTaleRegisterFormSubmitSent==="function")?ClickTaleRegisterFormSubmitSent:function(){};var z=function(c){if("ClickTaleContext" in window&&B(ClickTaleContext)==="[object Object]"){try{ClickTaleContext.getAggregationContextAsync("1",c)}catch(d){}}},D=$("[data-clicktale-signify]"),x=$(".clicktale-propagation, .bigbluebutton"),C=booking.env,v=C.all_experiment_labels_running_for_clicktale,J={index:"#b_searchbox_errors",searchresults:".dateerrors",hotel:".dateerrors",city:".dateerrors",country:".dateerrors",book:".errorSimpleMsg",confirmation:""},I=J[C.b_action],y=$(I),w=C.b_action==="searchresults",H=$("#basiclayout").length,E,F,G=$(window),A={"0":"User not logged in","1":"User recognized","2":"User logged in"},B=function(c){return Object.prototype.toString.apply(c)};if(D.length){D.map(function(){var f=$(this),c=f.data("clicktale-signify").split("_"),d=c[0];if(d==="hover"){d="mouseenter"}f.bind(d,function(){ClickTaleEvent(c[1]+" "+d+"ed")})})}x.click(function(c){ClickTaleRegisterElementAction("click",c)});if(C.rtl){ClickTaleEvent("Right To Left")}if(C.b_action==="book"){ClickTaleEvent("Booking step "+C.b_stage)}if(/utm_medium/.test(document.location.search)){ClickTaleEvent("Source: email")}if(C.b_locale){ClickTaleEvent("Language: "+C.b_locale)}if(w){if(C.b_is_disambiguation){ClickTaleEvent("Disambiguation Page")}else{if(H){ClickTaleEvent("Search results Page")}else{ClickTaleEvent("Deal Finder Page")}}}ClickTaleEvent(A[C.auth_level]);for(E=0,F=v.length;E<F;E+=1){ClickTaleEvent(v[E])}ClickTaleEvent(C.user_has_dates?"Dates chosen":"Dates not chosen");if(I&&y.length&&y.is(":visible")){ClickTaleRegisterFormSubmitFailure()}else{ClickTaleRegisterFormSubmitSuccess()}G.bind("Form:NotValid",function(d,c){ClickTaleRegisterFormSubmitNotSent(c.form)});G.bind("Form:Valid",function(d,c){ClickTaleRegisterFormSubmitSent(c.form)});$(".ctaction").live("click",function(){var c=$(".ctaction").index(this);ClickTaleExec('jQuery(".ctaction:eq('+c+')").click()')});z(function(c){$("#bOn").click()});G.bind("ClickTale:TrackDynamic",function(h,k){var d=k.experiments,c,g,f,j;for(f=0,j=d.length;f<=j;f+=1){c=d[f]+"";if(c in C.clicktale_experiment_ids){g=C.clicktale_experiment_ids[c];if(g in C.all_experiment_names_running_for_clicktale){ClickTaleEvent("Experiment "+g+" variant "+C.all_experiment_names_running_for_clicktale[g])}}}})});booking[sNSStartup].popups={priority:9,curPopup:null,tempTar:null,sizes:{s:{width:300,height:400},m:{width:400,height:400},l:{width:600,height:580},xl:{width:850,height:600}},init:function(){var d=this;$(".popup_s, .popup_m, .popup_l, .popup_xl").click(function(){var c="l";var h=$(this).attr("class").split(" ");for(var g=0;g<h.length;g++){if(h[g].indexOf("popup_")>-1){c=h[g].split("_")[1]}}d.tempTar=$(this).attr("href");d.openPopup(c);return false})},openPopup:function(g){var h=this;if(this.curPopup!=null){this.curPopup.close();this.curPopup=null;var g=g;setTimeout(function(){h.openPopup(g)},300)}else{var f=this.sizes[g];this.curPopup=window.open(this.tempTar,"","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=yes,resizable=1,width="+f.width+",height="+f.height+",left=200,top=200");this.curPopup.focus();this.tempTar=null}}};jQuery.cookie=function(C,v,q){if(typeof v!="undefined"){q=q||{};if(v===null){v="";q=$.extend({},q);q.expires=-1}var z="";if(q.expires&&(typeof q.expires=="number"||q.expires.toUTCString)){var y;if(typeof q.expires=="number"){y=new Date();y.setTime(y.getTime()+(q.expires*24*60*60*1000))}else{y=q.expires}z="; expires="+y.toUTCString()}var t=q.path?"; path="+(q.path):"";var x=q.domain?"; domain="+(q.domain):"";var D=q.secure?"; secure":"";document.cookie=[C,"=",encodeURIComponent(v),z,t,x,D].join("")}else{var A=null;if(document.cookie&&document.cookie!=""){var u=document.cookie.split(";");for(var w=0;w<u.length;w++){var B=jQuery.trim(u[w]);if(B.substring(0,C.length+1)==(C+"=")){A=decodeURIComponent(B.substring(C.length+1));break}}}return A}};jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(l,k,m,c,d){return jQuery.easing[jQuery.easing.def](l,k,m,c,d)},easeInQuad:function(l,k,m,c,d){return c*(k/=d)*k+m},easeOutQuad:function(l,k,m,c,d){return -c*(k/=d)*(k-2)+m},easeInOutQuad:function(l,k,m,c,d){if((k/=d/2)<1){return c/2*k*k+m}return -c/2*((--k)*(k-2)-1)+m},easeInCubic:function(l,k,m,c,d){return c*(k/=d)*k*k+m},easeOutCubic:function(l,k,m,c,d){return c*((k=k/d-1)*k*k+1)+m},easeInOutCubic:function(l,k,m,c,d){if((k/=d/2)<1){return c/2*k*k*k+m}return c/2*((k-=2)*k*k+2)+m},easeInQuart:function(l,k,m,c,d){return c*(k/=d)*k*k*k+m},easeOutQuart:function(l,k,m,c,d){return -c*((k=k/d-1)*k*k*k-1)+m},easeInOutQuart:function(l,k,m,c,d){if((k/=d/2)<1){return c/2*k*k*k*k+m}return -c/2*((k-=2)*k*k*k-2)+m},easeInQuint:function(l,k,m,c,d){return c*(k/=d)*k*k*k*k+m},easeOutQuint:function(l,k,m,c,d){return c*((k=k/d-1)*k*k*k*k+1)+m},easeInOutQuint:function(l,k,m,c,d){if((k/=d/2)<1){return c/2*k*k*k*k*k+m}return c/2*((k-=2)*k*k*k*k+2)+m},easeInSine:function(l,k,m,c,d){return -c*Math.cos(k/d*(Math.PI/2))+c+m},easeOutSine:function(l,k,m,c,d){return c*Math.sin(k/d*(Math.PI/2))+m},easeInOutSine:function(l,k,m,c,d){return -c/2*(Math.cos(Math.PI*k/d)-1)+m},easeInExpo:function(l,k,m,c,d){return(k==0)?m:c*Math.pow(2,10*(k/d-1))+m},easeOutExpo:function(l,k,m,c,d){return(k==d)?m+c:c*(-Math.pow(2,-10*k/d)+1)+m},easeInOutExpo:function(l,k,m,c,d){if(k==0){return m}if(k==d){return m+c}if((k/=d/2)<1){return c/2*Math.pow(2,10*(k-1))+m}return c/2*(-Math.pow(2,-10*--k)+2)+m},easeInCirc:function(l,k,m,c,d){return -c*(Math.sqrt(1-(k/=d)*k)-1)+m},easeOutCirc:function(l,k,m,c,d){return c*Math.sqrt(1-(k=k/d-1)*k)+m},easeInOutCirc:function(l,k,m,c,d){if((k/=d/2)<1){return -c/2*(Math.sqrt(1-k*k)-1)+m}return c/2*(Math.sqrt(1-(k-=2)*k)+1)+m},easeInElastic:function(u,q,v,c,d){var o=1.70158;var n=0;var t=c;if(q==0){return v}if((q/=d)==1){return v+c}if(!n){n=d*0.3}if(t<Math.abs(c)){t=c;var o=n/4}else{var o=n/(2*Math.PI)*Math.asin(c/t)}return -(t*Math.pow(2,10*(q-=1))*Math.sin((q*d-o)*(2*Math.PI)/n))+v},easeOutElastic:function(u,q,v,c,d){var o=1.70158;var n=0;var t=c;if(q==0){return v}if((q/=d)==1){return v+c}if(!n){n=d*0.3}if(t<Math.abs(c)){t=c;var o=n/4}else{var o=n/(2*Math.PI)*Math.asin(c/t)}return t*Math.pow(2,-10*q)*Math.sin((q*d-o)*(2*Math.PI)/n)+c+v},easeInOutElastic:function(u,q,v,c,d){var o=1.70158;var n=0;var t=c;if(q==0){return v}if((q/=d/2)==2){return v+c}if(!n){n=d*(0.3*1.5)}if(t<Math.abs(c)){t=c;var o=n/4}else{var o=n/(2*Math.PI)*Math.asin(c/t)}if(q<1){return -0.5*(t*Math.pow(2,10*(q-=1))*Math.sin((q*d-o)*(2*Math.PI)/n))+v}return t*Math.pow(2,-10*(q-=1))*Math.sin((q*d-o)*(2*Math.PI)/n)*0.5+c+v},easeInBack:function(n,m,o,c,d,l){if(l==undefined){l=1.70158}return c*(m/=d)*m*((l+1)*m-l)+o},easeOutBack:function(n,m,o,c,d,l){if(l==undefined){l=1.70158}return c*((m=m/d-1)*m*((l+1)*m+l)+1)+o},easeInOutBack:function(n,m,o,c,d,l){if(l==undefined){l=1.70158}if((m/=d/2)<1){return c/2*(m*m*(((l*=(1.525))+1)*m-l))+o}return c/2*((m-=2)*m*(((l*=(1.525))+1)*m+l)+2)+o},easeInBounce:function(l,k,m,c,d){return c-jQuery.easing.easeOutBounce(l,d-k,0,c,d)+m},easeOutBounce:function(l,k,m,c,d){if((k/=d)<(1/2.75)){return c*(7.5625*k*k)+m}else{if(k<(2/2.75)){return c*(7.5625*(k-=(1.5/2.75))*k+0.75)+m}else{if(k<(2.5/2.75)){return c*(7.5625*(k-=(2.25/2.75))*k+0.9375)+m}else{return c*(7.5625*(k-=(2.625/2.75))*k+0.984375)+m}}}},easeInOutBounce:function(l,k,m,c,d){if(k<d/2){return jQuery.easing.easeInBounce(l,k*2,0,c,d)*0.5+m}return jQuery.easing.easeOutBounce(l,k*2-d,0,c,d)*0.5+c*0.5+m}});
/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(q,u,x){var w="hashchange",n=document,t,o=q.event.special,m=n.documentMode,v="on"+w in u&&(m===x||m>7);function y(c){c=c||location.href;return"#"+c.replace(/^[^#]*#?(.*)$/,"$1")}q.fn[w]=function(c){return c?this.bind(w,c):this.trigger(w)};q.fn[w].delay=50;o[w]=q.extend(o[w],{setup:function(){if(v){return false}q(t.start)},teardown:function(){if(v){return false}q(t.stop)}});t=(function(){var c={},d,h=y(),k=function(l){return l},j=k,f=k;c.start=function(){d||g()};c.stop=function(){d&&clearTimeout(d);d=x};function g(){var l=y(),z=f(h);if(l!==h){j(h=l,z);q(u).trigger(w)}else{if(z!==h){location.href=location.href.replace(/#.*/,"")+z}}d=setTimeout(g,q.fn[w].delay)}q.browser.msie&&!v&&(function(){var z,l;c.start=function(){if(!z){l=q.fn[w].src;l=l&&l+y();z=q('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){l||j(y());g()}).attr("src",l||"javascript:0").insertAfter("body")[0].contentWindow;n.onpropertychange=function(){try{if(event.propertyName==="title"){z.document.title=n.title}}catch(A){}}}};c.stop=k;f=function(){return y(z.location.href)};j=function(F,E){var C=z.document,D=q.fn[w].domain;if(F!==E){C.title=n.title;C.open();D&&C.write('<script>document.domain="'+D+'"<\/script>');C.close();z.location.hash=F}}})();return c})()})(jQuery,window);(function(d){d.fn.hint=function(c){if(!c){c="blur"}return this.each(function(){var k=d(this),m=k.attr("title"),n=d(this.form),l=d(window);function o(){if(k.val()===m&&k.hasClass(c)){k.val("").removeClass(c)}}if(m){k.blur(function(){if(this.value===""){k.val(m).addClass(c)}}).focus(o).blur();n.submit(o);l.unload(o)}})}})(jQuery);$("input#destination:text").hint();(function(o,q,c){var d=q.event,f;d.special.smartresize={setup:function(){q(this).bind("resize",d.special.smartresize.handler)},teardown:function(){q(this).unbind("resize",d.special.smartresize.handler)},handler:function(h,g){var j=this,k=arguments;h.type="smartresize",f&&clearTimeout(f),f=setTimeout(function(){q.event.handle.apply(j,k)},g==="execAsap"?0:100)}},q.fn.smartresize=function(g){return g?this.bind("smartresize",g):this.trigger("smartresize",["execAsap"])},q.Mason=function(h,g){this.element=q(g),this._create(h),this._init()},q.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},q.Mason.prototype={_filterFindBricks:function(g){var h=this.options.itemSelector;return h?g.filter(h).add(g.find(h)):g},_getBricks:function(g){var h=this._filterFindBricks(g).css({position:"absolute"}).addClass("masonry-brick");return h},_create:function(g){this.options=q.extend(!0,{},q.Mason.settings,g),this.styleQueue=[];var h=this.element[0].style;this.originalStyle={height:h.height||""};var j=this.options.containerStyle;for(var k in j){this.originalStyle[k]=h[k]||""}this.element.css(j),this.horizontalDirection=this.options.isRTL?"right":"left",this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)},this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth=="function";var l=this;setTimeout(function(){l.element.addClass("masonry")},0),this.options.isResizable&&q(o).bind("smartresize.masonry",function(){l.resize()}),this.reloadItems()},_init:function(g){this._getColumns(),this._reLayout(g)},option:function(h,g){q.isPlainObject(h)&&(this.options=q.extend(!0,this.options,h))},layout:function(k,l){for(var m=0,z=k.length;m<z;m++){this._placeBrick(k[m])}var A={};A.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var B=0;m=this.cols;while(--m){if(this.colYs[m]!==0){break}B++}A.width=(this.cols-B)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:A});var g=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",h=this.options.animationOptions,j;for(m=0,z=this.styleQueue.length;m<z;m++){j=this.styleQueue[m],j.$el[g](j.style,h)}this.styleQueue=[],l&&l.call(k),this.isLaidOut=!0},_getColumns:function(){var g=this.options.isFitWidth?this.element.parent():this.element,h=g.width();this.columnWidth=this.isFluid?this.options.columnWidth(h):this.options.columnWidth||this.$bricks.outerWidth(!0)||h,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((h+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(M){var N=q(M),g,j,k,l,m;g=Math.ceil(N.outerWidth(!0)/this.columnWidth),g=Math.min(g,this.cols);if(g===1){k=this.colYs}else{j=this.cols+1-g,k=[];for(m=0;m<j;m++){l=this.colYs.slice(m,m+g),k[m]=Math.max.apply(Math,l)}}var G=Math.min.apply(Math,k),H=0;for(var I=0,J=k.length;I<J;I++){if(k[I]===G){H=I;break}}var K={top:G+this.offset.y};K[this.horizontalDirection]=this.columnWidth*H+this.offset.x,this.styleQueue.push({$el:N,style:K});var L=G+N.outerHeight(!0),h=this.cols+1-J;for(I=0;I<h;I++){this.colYs[H+I]=L}},resize:function(){var g=this.cols;this._getColumns(),(this.isFluid||this.cols!==g)&&this._reLayout()},_reLayout:function(g){var h=this.cols;this.colYs=[];while(h--){this.colYs.push(0)}this.layout(this.$bricks,g)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(g){this.reloadItems(),this._init(g)},appended:function(g,h,j){if(h){this._filterFindBricks(g).css({top:this.element.height()});var k=this;setTimeout(function(){k._appended(g,j)},1)}else{this._appended(g,j)}},_appended:function(h,j){var g=this._getBricks(h);this.$bricks=this.$bricks.add(g),this.layout(g,j)},remove:function(g){this.$bricks=this.$bricks.not(g),g.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var g=this.element[0].style;for(var h in this.originalStyle){g[h]=this.originalStyle[h]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),q(o).unbind(".masonry")}},q.fn.imagesLoaded=function(z){function m(){z.call(g,h)}function y(u){var t=u.target;t.src!==k&&q.inArray(t,l)===-1&&(l.push(t),--j<=0&&(setTimeout(m),h.unbind(".imagesLoaded",y)))}var g=this,h=g.find("img").add(g.filter("img")),j=h.length,k="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",l=[];return j||m(),h.bind("load.imagesLoaded error.imagesLoaded",y).each(function(){var t=this.src;this.src=k,this.src=t}),g};var n=function(g){o.console&&o.console.error(g)};q.fn.masonry=function(h){if(typeof h=="string"){var g=Array.prototype.slice.call(arguments,1);this.each(function(){var j=q.data(this,"masonry");if(!j){n("cannot call methods on masonry prior to initialization; attempted to call method '"+h+"'");return}if(!q.isFunction(j[h])||h.charAt(0)==="_"){n("no such method '"+h+"' for masonry instance");return}j[h].apply(j,g)})}else{this.each(function(){var j=q.data(this,"masonry");j?(j.option(h||{}),j._init()):q.data(this,"masonry",new q.Mason(h,this))})}return this}})(window,jQuery);(function(d){d.extend({noticeAdd:function(t){var m={inEffect:{opacity:"show"},inEffectDuration:600,stayTime:3000,text:"",stay:false,type:"notice",destination:"",platform:"mac"};var t,c,n,q,u,v;t=d.extend({},m,t);if(typeof booking.env.b_site_experiment_ipad_improvements!="undefined"&&booking.env.b_site_experiment_ipad_improvements){return}var o=navigator&&navigator.platform&&(navigator.platform.indexOf("Mac")==-1&&navigator.platform.indexOf("iPad")==-1&&navigator.platform.indexOf("iPhone")==-1);if(o){t.platform=booking.env.b_site_experiment_dock_my_hotels?"win win_dock":"win"}c=(!d(".notice-wrap").length)?d("<div></div>").addClass("notice-wrap").addClass(t.platform).appendTo("body"):d(".notice-wrap");n=d("<div></div>").addClass("notice-item-wrapper");v=(t.destination=="")?"<p>"+t.text+"</p>":'<p><a href="'+t.destination+'">'+t.text+"</a></p>";if(t.close=="all"){q=d("<div></div>").hide().addClass("notice-item "+t.type+" "+t.addClassName).appendTo(c).html(v).animate(t.inEffect,t.inEffectDuration).wrap(n).click(function(g){if(booking.env.b_action==="hotel"){var f=JSON.parse($.cookie("bs"))||{};f.gc=1;if(typeof(JSON)!="undefined"){$.cookie("bs",JSON.stringify(f),{path:"/",domain:booking.env.b_domain_end})}}booking.google.trackEvent(booking.google.clickTracker,"growl_removed",g&&g.target&&$(g.target).closest(".notice-item-close-x").length?"x":"message");d.noticeRemove(q,t.addClassName);return false});u=d("<div></div>").addClass("notice-item-close-x").prependTo(q)}else{q=d("<div></div>").hide().addClass("notice-item "+t.type).appendTo(c).html(v).animate(t.inEffect,t.inEffectDuration).wrap(n);u=d("<div></div>").addClass("notice-item-close-x").prependTo(q).click(function(){d.noticeRemove(q);if(t.type=="language"){if(typeof(b_cookie)=="undefined"){b_cookie={}}b_cookie.langPrompt="dontshow";if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})}}return false})}if(t.type=="language"){$(".notice-item p").css("cursor","pointer");$(".notice-item p").click(function(){$("#langselectformlist").val(booking.env.browser_lang);$("#languageselect")[0].submit();d.noticeRemove(q);return false})}if(navigator.userAgent.match(/MSIE 6/i)){c.css({top:document.documentElement.scrollTop})}if(!t.stay){setTimeout(function(){d.noticeRemove(q)},t.stayTime)}},noticeAddBig:function(n){var k={inEffect:{opacity:"show"},inEffectDuration:600,stayTime:3000,text:"",stay:false,type:"notice"};var n,c,l,m,o;n=d.extend({},k,n);c=(!d(".notice-wrap").length)?d("<div></div>").addClass("notice-wrap").appendTo("body"):d(".notice-wrap");l=d("<div></div>").addClass("notice-item-wrapper");m=d("<div></div>").hide().addClass("notice-item-big "+n.type).appendTo(c).html("<p>"+n.text+"</p>").animate(n.inEffect,n.inEffectDuration).wrap(l);o=d("<div></div>").addClass("notice-item-close").prependTo(m).html("x").click(function(){d.noticeRemove(m)});if(navigator.userAgent.match(/MSIE 6/i)){c.css({top:document.documentElement.scrollTop})}if(!n.stay){setTimeout(function(){d.noticeRemove(m)},n.stayTime)}},noticeRemove:function(c,f){c.animate({opacity:"0"},600,function(){c.parent().animate({height:"0px"},300,function(){c.parent().remove()})});if(f&&f!=""){$("."+f).removeClass(f)}}})})(jQuery);jQuery.fn.pulse=function(x,u,w,o,m){if(isNaN(w)){m=o;o=w;w=1}var n=jQuery.speed(u,o,m),q=n.queue!==false,t=0;for(var v in x){t=Math.max(x[v].length,t)}n.times=n.times||w;return this[q?"queue":"each"](function(){var f={},g=jQuery.extend({},n),c=jQuery(this);d();function d(){var h={},k=false;for(var j in x){f[j]=f[j]||{runs:0,cur:-1};if(f[j].cur<x[j].length-1){++f[j].cur}else{f[j].cur=0;++f[j].runs}if(x[j].length===t){k=g.times>f[j].runs}h[j]=x[j][f[j].cur]}g.complete=d;g.queue=false;if(k){c.animate(h,g)}else{n.complete.call(c[0])}}})};(function(d){var h=d.scrollTo=function(j,f,c){d(window).scrollTo(j,f,c)};h.defaults={axis:"xy",duration:parseFloat(d.fn.jquery)>=1.3?0:1};h.window=function(c){return d(window)._scrollable()};d.fn._scrollable=function(){return this.map(function(){var j=this,f=!j.nodeName||d.inArray(j.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!f){return j}var c=(j.contentWindow||j).document||j.ownerDocument||j;return d.browser.safari||c.compatMode=="BackCompat"?c.body:c.documentElement})};d.fn.scrollTo=function(c,f,j){if(typeof f=="object"){j=f;f=0}if(typeof j=="function"){j={onAfter:j}}if(c=="max"){c=9000000000}j=d.extend({},h.defaults,j);f=f||j.speed||j.duration;j.queue=j.queue&&j.axis.length>1;if(j.queue){f/=2}j.offset=g(j.offset);j.over=g(j.over);return this._scrollable().each(function(){var w=this,z=d(w),y=c,t,q={},x=z.is("html,body");switch(typeof y){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(y)){y=g(y);break}y=d(y,this);case"object":if(y.is||y.style){t=(y=d(y)).offset()}}d.each(j.axis.split(""),function(n,m){var C=m=="x"?"Left":"Top",l=C.toLowerCase(),k="scroll"+C,o=w[k],v=h.max(w,m);if(t){q[k]=t[l]+(x?0:o-z.offset()[l]);if(j.margin){q[k]-=parseInt(y.css("margin"+C))||0;q[k]-=parseInt(y.css("border"+C+"Width"))||0}q[k]+=j.offset[l]||0;if(j.over[l]){q[k]+=y[m=="x"?"width":"height"]()*j.over[l]}}else{var B=y[l];q[k]=B.slice&&B.slice(-1)=="%"?parseFloat(B)/100*v:B}if(/^\d+$/.test(q[k])){q[k]=q[k]<=0?0:Math.min(q[k],v)}if(!n&&j.queue){if(o!=q[k]){u(j.onAfterFirst)}delete q[k]}});u(j.onAfter);function u(k){z.animate(q,f,j.easing,k&&function(){k.call(this,c,j)})}}).end()};h.max=function(f,c){var u=c=="x"?"Width":"Height",v="scroll"+u;if(!d(f).is("html,body")){return f[v]-d(f)[u.toLowerCase()]()}var m="client"+u,l=f.ownerDocument.documentElement,t=f.ownerDocument.body;return Math.max(l[v],t[v])-Math.min(l[m],t[m])};function g(c){return typeof c=="object"?c:{top:c,left:c}}})(jQuery);if(!window.console){window.console=new function(){this.log=function(d){};this.dir=function(d){};this.debug=function(d){};this.info=function(d){};this.warn=function(d){};this.table=function(d){};this.trace=function(){};this.time=function(d){};this.timeEnd=function(d){};this.info=function(d){}}}booking[sNSStartup].anchorJump={priority:9,init:function(){if($("#newsletterbox .error").length){location.href=location.href+"#errormsg"}$(".forgotten a, a.forgotten").click(function(){window.open(this.href,"","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=yes,resizable=1,width=500,height=500,left=200,top=200");return false})}};booking[sNSStartup].search_autocomplete={target:$("#destination"),priority:9,init:function(){this.initializeAutocomplete()},initElse:function(){this.initializeAutocomplete()},initializeAutocomplete:function(){var f=this,g=function(){booking.env.trackExperiment(booking.env.autocomplete_values);f.target.unbind("keypress",f.handler)};this.target.keypress(g)}};(function(){var f=booking.env,g=booking[sNSStartup].calendar={priority:9,version:1.4,datefmt:"YYYY MM DD",minimalDays:1,maximalDays:30,oldDays:1,from:{date:null,day:null,month:null,year:null},till:{date:null,day:null,month:null,year:null},viewDateFrom:new Date(),viewDateTill:new Date(),oneDayInMS:86400000,calendars:[],calendarTypes:{checkin_day:{isTill:false,isDay:true},checkin_monthday:{isTill:false,isDay:true},checkin_year_month:{isTill:false,isDay:false},pre_checkin_year_month:{isTill:false,isDay:false},checkout_day:{isTill:true,isDay:true},checkout_monthday:{isTill:true,isDay:true},checkout_year_month:{isTill:true,isDay:false},pre_checkout_year_month:{isTill:true,isDay:false}},maxMonthsInFuture:12,maxDaysInFuture:365,maxDaysInThePast:1,syncDate:null,userServDate:false,dateFormat:function(z,F,J){var y=/D{1,4}|M{1,4}|YY(?:YY)?/g,A=function(j,h){j=String(j);h=h||2;while(j.length<h){j="0"+j}return j};var B=this;if(arguments.length==1&&Object.prototype.toString.call(z)=="[object String]"&&!/\d/.test(z)){F=z;z=undefined}z=z?new Date(z):new Date;if(isNaN(z)){throw SyntaxError("invalid date")}F=String(F||B.datefmt);if(F.slice(0,4)=="UTC:"){F=F.slice(4);J=true}var H=J?"getUTC":"get",d=z[H+"Date"](),E=z[H+"Day"](),C=z[H+"Month"](),c=z[H+"FullYear"](),I=z[H+"Hours"](),m=z[H+"Minutes"](),G=z[H+"Seconds"](),D={D:d,DD:A(d),DDD:f.b_simple_weekdays_for_js[(E+6)%7],DDDD:f.b_long_weekdays[(E+6)%7],M:C+1,MM:A(C+1),MMM:f.b_short_months_abbr[C],MMMM:f.b_short_months[C],YY:String(c).slice(2),YYYY:c};return F.replace(y,function(h){return h in D?D[h]:h.slice(1,h.length-1)})},searchMinDays:function(c){this.minimalDays=c},maxYearsInFuture:function(){this.today=this.noHourDate(null);this.maxMonthsInFuture=12;if(f.b_site_variant_calendar_days_allowed_fix){this.maxDaysInFuture=parseInt(f.calendar_days_allowed_number)}else{this.maxDaysInFuture=365}if(f.b_site_experiment_rolling_calendar_year){if(this.maxMonthsInFuture<13){this.maxMonthsInFuture=13}}this.tomorrow=this.dateAfterDays(this.today,1);this.endOfYear1=this.dateAfterDays(this.today,this.maxDaysInFuture);this.endOfYear2=this.dateAfterDays(this.today,this.maxDaysInFuture-1)},setPast:function(c){this.maxDaysInThePast=c},syncDates:function(t,q,c,n,d){if(!d){$("#availcheck").attr("checked",false);$("#define_group input, #define_group select").removeAttr("disabled");$("#define_group").removeClass("disableme")}if(t){this.till.day=(q==null)?this.till.day:q;this.till.month=(c==null)?this.till.month:c;this.till.year=(n==null)?this.till.year:n;if(this.till.day!=null&&this.till.month!=null&&this.till.year!=null){this.till.date=new Date(this.till.year+"/"+this.till.month+"/"+this.till.day+" 00:00:00");this.viewDateTill=new Date(this.till.year+"/"+this.till.month+"/"+this.till.day+" 00:00:00")}}else{this.from.day=(q==null)?this.from.day:q;this.from.month=(c==null)?this.from.month:c;this.from.year=(n==null)?this.from.year:n;if(this.from.day!=null&&this.from.month!=null&&this.from.year!=null){this.from.date=new Date(this.from.year+"/"+this.from.month+"/"+this.from.day+" 00:00:00");this.viewDateFrom=new Date(this.from.year+"/"+this.from.month+"/"+this.from.day+" 00:00:00")}}var m=false;if(!t&&this.from.date!=null){if(this.till.date!=null){if(this.till.date<=this.from.date){if(booking.env.b_site_experiment_av_calendar&&booking.avCalendar.isCheckInAvailable(this.from)){this.till.date=new Date(booking.avCalendar.getFirstAvailableCheckOut(this.from)+" 00:00:00")}else{this.till.date=this.dateAfterDays(this.from.date,this.oldDays)}m=true}else{if(booking.env.b_site_experiment_av_calendar&&booking.avCalendar.isCheckOutAvailable(this.from,this.till)===false){this.till.date=new Date(booking.avCalendar.getFirstAvailableCheckOut(this.from)+" 00:00:00");m=true}}}else{if(!d){if(booking.env.b_site_experiment_av_calendar&&booking.avCalendar.isCheckInAvailable(this.from)){this.till.date=new Date(booking.avCalendar.getFirstAvailableCheckOut(this.from)+" 00:00:00")}else{this.till.date=this.dateAfterDays(this.from.date,this.minimalDays)}m=true}}}else{if(t&&this.till.date!=null){if(this.from.date==null){if(!d){this.from.date=this.dateAfterDays(this.till.date,~(this.minimalDays-1));m=true}}}}if(m){if(!t){this.till.year=this.till.date.getFullYear();this.till.month=this.till.date.getMonth()+1;this.till.day=this.till.date.getDate();this.viewDateTill=new Date(this.till.year+"/"+this.till.month+"/"+this.till.day+" 00:00:00")}else{this.from.year=this.from.date.getFullYear();this.from.month=this.from.date.getMonth()+1;this.from.day=this.from.date.getDate();this.viewDateFrom=new Date(this.from.year+"/"+this.from.month+"/"+this.from.day+" 00:00:00")}}if(booking.env.b_site_experiment_omni_search){this.updateOmniLabels()}for(var o=0;o<this.calendars.length;o++){$(this.calendars[o]).trigger("changed_date",[t,m])}},updateCalendarTables:function(c){if($(c).hasClass("calendarTill")){this.rebuildCalendarTable($("table",c).get(0),true,this.viewDateTill.getMonth()+1,this.viewDateTill.getFullYear())}else{this.rebuildCalendarTable($("table",c).get(0),false,this.viewDateFrom.getMonth()+1,this.viewDateFrom.getFullYear())}},init:function(){if(this.calendarReady){return}this.calendarReady=true;if(f.b_site_experiment_fix_user_dates){var d=f.b_current_datetime;this.syncDate=d.replace(/-/gi,"/");var c=new Date(this.syncDate);c.setDate(c.getDate()+1);var j=new Date();this.syncDate=new Date(this.syncDate);this.syncDate.setDate(this.syncDate.getDate()-0.5);if(c<j){this.userServDate=true;this.viewDateFrom=new Date(this.syncDate);this.viewDateTill=new Date(this.syncDate)}else{var k=new Date(this.syncDate);k.setDate(k.getDate()-1);if(k>j){this.userServDate=true;this.viewDateFrom=new Date(this.syncDate);this.viewDateTill=new Date(this.syncDate)}}}this.maxYearsInFuture();this.initAddHandlers();if(booking.env.b_site_experiment_omni_search){this.updateOmniLabels()}},initAddHandlers:function(){var c=this;$("select").each(function(){if(c.calendarTypes[$(this).attr("name")]){c.calendars.push(this);var k=$(this).val();if(k!="0"){var d=c.calendarTypes[$(this).attr("name")];if(d.isDay){if(d.isTill){c.till.day=k}else{c.from.day=k}}else{var j=k.split("-");if(j.length&&j.length>0){if(d.isTill){c.till.year=j[0];c.till.month=j[1]}else{c.from.year=j[0];c.from.month=j[1]}}}}$(this).bind("changed_date",function(o,q,h){$("input",this.parentNode).each(function(){if(c.calendarTypes[$(this).attr("name")]){var l=c.calendarTypes[$(this).attr("name")];if(l.isDay&&l.isTill&&c.till.day!=null){$(this).val(c.till.day)}if(l.isDay&&!l.isTill&&c.from.day!=null){$(this).val(c.from.day)}if(!l.isDay&&l.isTill&&c.till.month!=null&&c.till.year!=null){$(this).val(c.till.year+"-"+c.till.month)}if(!l.isDay&&!l.isTill&&c.from.month!=null&&c.from.year!=null){$(this).val(c.from.year+"-"+c.from.month)}}});var n=c.calendarTypes[$(this).attr("name")];if(((q||h)&&n.isTill)||((!q||h)&&!n.isTill)){if(n.isDay){if((n.isTill&&c.till.year!=null&&c.till.month!=null)||(!n.isTill&&c.from.year!=null&&c.from.month!=null)){c.rebuildDaySelect(this,n.isTill)}}else{if(n.isTill&&c.till.year!=null&&c.till.month!=null){c.selectOption(this,c.till.year+"-"+c.till.month)}else{if(!n.isTill&&c.from.year!=null&&c.from.month!=null){c.selectOption(this,c.from.year+"-"+c.from.month)}}}}});$(this).change(function(){var h=c.calendarTypes[$(this).attr("name")];var n=$(this).val();var o=n.split("-");if(n!="0"){if($(this).parents(".newcalendar").length){var q=$(this).parents(".newcalendar");if(o.length&&o.length>1){if($(this).parents(".calendarTill").length){c.viewDateTill=new Date(o[0]+"/"+o[1]+"/"+c.viewDateTill.getDate()+" 00:00:00");c.rebuildCalendarTable($("table",q).get(0),true,c.viewDateTill.getMonth()+1,c.viewDateTill.getFullYear())}else{c.viewDateFrom=new Date(o[0]+"/"+o[1]+"/"+c.viewDateFrom.getDate()+" 00:00:00");c.rebuildCalendarTable($("table",q).get(0),false,c.viewDateFrom.getMonth()+1,c.viewDateFrom.getFullYear())}}}else{c.syncDates(h.isTill,(h.isDay)?n:null,(h.isDay)?null:((o.length&&o.length>1)?o[1]:null),(h.isDay)?null:o[0])}}})}});$(".newcalendar").each(function(){if($(this).hasClass("calendarTill")){c.rebuildCalendarTable($("table",this).get(0),true,c.viewDateTill.getMonth()+1,c.viewDateTill.getFullYear())}else{c.rebuildCalendarTable($("table",this).get(0),false,c.viewDateFrom.getMonth()+1,c.viewDateFrom.getFullYear())}c.calendars.push(this);$(this).bind("changed_date",function(l,m,d){if($(this).hasClass("calendarTill")){if(c.till.month!=null&&c.till.year!=null){var k=(c.till.day)?c.till.day:1;c.viewDateTill=new Date(c.till.year+"/"+c.till.month+"/"+k+" 00:00:00");c.rebuildCalendarTable($("table",this).get(0),true,c.till.month,c.till.year)}}else{if(c.from.month!=null&&c.from.year!=null){var k=(c.from.day)?c.from.day:1;c.viewDateFrom=new Date(c.from.year+"/"+c.from.month+"/"+k+" 00:00:00");c.rebuildCalendarTable($("table",this).get(0),false,c.from.month,c.from.year)}}c.updateLabels()});$("td",this).live("click",function(){if(parseInt($(this).text())>0){if($("a",this).length){if($(this).parents(".calendarTill").length){if(f.b_action=="hotel"&&f.b_site_experiment_new_change_dates_hp){if($(".new_change_dates .checkout_monthday").val()!=$(this).text()){$(".new_change_dates .checkout_monthday").css({"font-weight":"bold"})}if($(".new_change_dates .checkout_year_month").val()!=c.viewDateTill.getFullYear()+"-"+(c.viewDateTill.getMonth()+1)){$(".new_change_dates .checkout_year_month").css({"font-weight":"bold"})}}c.syncDates(true,$(this).text(),c.viewDateTill.getMonth()+1,c.viewDateTill.getFullYear())}else{if(f.b_action=="hotel"&&f.b_site_experiment_new_change_dates_hp){if($(".new_change_dates .checkin_day").val()!=$(this).text()){$(".new_change_dates .checkin_day").css({"font-weight":"bold"})}if($(".new_change_dates .checkin_year_month").val()!=c.viewDateFrom.getFullYear()+"-"+(c.viewDateFrom.getMonth()+1)){$(".new_change_dates .checkin_year_month").css({"font-weight":"bold"})}}c.syncDates(false,$(this).text(),c.viewDateFrom.getMonth()+1,c.viewDateFrom.getFullYear())}if(f.b_action=="hotel"&&f.b_site_experiment_new_change_dates_hp){booking[sNSExperiments].new_change_dates_hp.enable_button()}if(!f.b_site_experiment_groups_number_rooms){$("#define_group").show()}if(!$("#calendar_popup").hasClass("calendarTill")){booking.env.trackExperiment(booking.env.js_experiment_tracking.open_checkout_calendar);c.closePopupCalendar();if(booking.env.b_site_experiment_open_checkout_calendar){if(window.calendarRef&&window.calendarRef=="checkinDateSection"){$(".checkoutDateSection .calendarLink").trigger("click")}else{if(booking.env.b_site_experiment_omni_search){$(".when .checkout").trigger("click")}else{$("#homeout .calendarLink").trigger("click")}}}}else{c.closePopupCalendar()}}}return false});$(".nextmonth",this).bind("click",function(){if(!$(this).hasClass("disabled")){var d=$(this).parents(".newcalendar").get(0);if($(this).parents(".calendarTill").length){c.viewDateTill=c.dateAfterDays(c.viewDateTill,0,1);c.rebuildCalendarTable($("table",d).get(0),true,c.viewDateTill.getMonth()+1,c.viewDateTill.getFullYear())}else{c.viewDateFrom=c.dateAfterDays(c.viewDateFrom,0,1);c.rebuildCalendarTable($("table",d).get(0),false,c.viewDateFrom.getMonth()+1,c.viewDateFrom.getFullYear())}}this.blur();return false});$(".prevmonth",this).bind("click",function(){if(!$(this).hasClass("disabled")){var d=$(this).parents(".newcalendar").get(0);if($(this).parents(".calendarTill").length){c.viewDateTill=c.dateAfterDays(c.viewDateTill,0,-1);c.rebuildCalendarTable($("table",d).get(0),true,c.viewDateTill.getMonth()+1,c.viewDateTill.getFullYear())}else{c.viewDateFrom=c.dateAfterDays(c.viewDateFrom,0,-1);c.rebuildCalendarTable($("table",d).get(0),false,c.viewDateFrom.getMonth()+1,c.viewDateFrom.getFullYear())}}this.blur();return false});$("select",this).each(function(){var h=$(this).attr("name");var d=$(this).val();if(c.calendarTypes[h]){if(!c.calendarTypes[h].isDay){$(this).attr("name","pre_"+h);$(this.parentNode).append('<input type="hidden" name="'+h+'" value="'+d+'" />')}}else{$(this).change(function(){var l=$(this).val();if(l!="0"){var k=l.split("-");if(k.length&&k.length>0){oCalendar=$(this).parents(".newcalendar");if($(this).parents(".calendarTill").length){c.viewDateTill=new Date(k[0]+"/"+k[1]+"/1 00:00:00");c.rebuildCalendarTable($("table",oCalendar).get(0),true,k[1],k[0])}else{c.viewDateFrom=new Date(k[0]+"/"+k[1]+"/1 00:00:00");c.rebuildCalendarTable($("table",oCalendar).get(0),false,k[1],k[0])}}}})}})});$(".calendarLink").click(function(){if(booking.env.b_site_experiment_omni_search){$("body").trigger("click");if($(".when","#frm").hasClass("has_omni_error")){$(".when","#frm").removeClass("has_omni_error")}}window.calendarRef=$(this).parent().attr("class");c.openPopupCalendar(this);return false});$(".calendar_close").click(function(){c.closePopupCalendar();return false});if(this.from.year!=null&&this.from.month!=null&&this.from.day!=null){c.syncDates(false,this.from.day,this.from.month,this.from.year,true)}if(this.till.year!=null&&this.till.month!=null&&this.till.day!=null){c.syncDates(true,this.till.day,this.till.month,this.till.year,true)}},updateLabels:function(){var c=Math.round((this.noHourDate(this.till.date)-this.noHourDate(this.from.date))/this.oneDayInMS);if(c>0){if(f.night&&f.nights){var d=(c==1)?1+" "+f.night:f.nights.replace("{amount}",c);if(d.indexOf(c)<0){d=c+" "+d}if($(".dayamount").length){$(".dayamount").text(d)}if($(".no_nights_helper").length){$(".no_nights_helper").text("("+d+")")}}}if($(".calendarFrom").length){$(".calendarFrom .ct_month").text(f.b_short_months[parseInt(this.from.month)-1]);$(".calendarFrom .ct_day").text(this.from.day);if($(".calendarTill").length){$(".calendarTill .ct_month").text(f.b_short_months[parseInt(this.till.month)-1]);$(".calendarTill .ct_day").text(this.till.day)}}},updateOmniLabels:function(){var c=$("#checkin_day option:selected").val()!="0"||$("#checkout_day option:selected").val()!="0";if(c&&this.from.day&&this.till.day){var h=booking.formatter.date(this.from.month+"-"+this.from.day+"-"+this.from.year);var d=booking.formatter.date(this.till.month+"-"+this.till.day+"-"+this.till.year);if($(".checkin .placeholder","#frm").length>0&&$(".checkout .placeholder","#frm").length>0){$(".checkin").addClass("filled").find(".placeholder").text(h);$(".checkout").addClass("filled").find(".placeholder").text(d)}else{$("fieldset.when label.checkin","#frm").addClass("filled").append('<button class="placeholder theme">'+h+"</button>");$("fieldset.when label.checkout","#frm").addClass("filled").append('<button class="placeholder theme">'+d+"</button>")}}else{if(!($(".checkin .placeholder","#frm").length>0&&$(".checkout .placeholder","#frm").length>0)){$("fieldset.when label.checkin","#frm").append('<button class="placeholder theme">'+booking.env.checkin+"</button>");$("fieldset.when label.checkout","#frm").append('<button class="placeholder theme">'+booking.env.checkout+"</button>")}}},updatePrevNextLinks:function(m,l){var c=this;var d=this.dateAfterDays(this.tomorrow,(this.maxDaysInFuture-2));var k=($(l).parents(".calendarTill").length)?this.viewDateTill:this.viewDateFrom;$(".nextmonth",l.parentNode).each(function(){if(c.dateAfterDays(k,0,1,true)>d){$(this).addClass("disabled")}else{$(this).removeClass("disabled")}});$(".prevmonth",l.parentNode).each(function(){if(c.dateAfterDays(k,0,-1,true)<c.tomorrow){$(this).addClass("disabled")}else{$(this).removeClass("disabled")}});this.selectOption($("select",l.parentNode),k.getFullYear()+"-"+(k.getMonth()+1))},rebuildCalendarTable:function(D,C,I,H){var F=$(D).parents(".newcalendar");var K=document.createElement("table");$(K).html(D.innerHTML);var J=booking.env.b_site_experiment_av_calendar&&F.hasClass("avCalendar");if(C&&J&&this.from.date){$(".avCalendar_pick_checkin").hide();$(".avCalendar.calendarTill").show()}var G=parseInt(new Date(H+"/"+I+"/1").getDay())-2;if(f.calendar_sunday_first_day_for_us){G+=1}else{if(G<0){G=7+G}}var c=K.getElementsByTagName("td");for(var d=0;d<42;d++){var j=d-G;var E=c[d];if(j>0&&j<=this.getDaysInMonth(I,H)){var B=new Date(H+"/"+I+"/"+j+" 00:00:00");if(B<this.today||(C&&B<this.tomorrow)||B>this.endOfYear1||(!C&&B>this.endOfYear2)){if(B-this.today==0&&!J){E.innerHTML='<span class="today">'+j+"</span>"}else{E.innerHTML="<span>"+j+"</span>"}}else{var L="";if(J){if((B-this.till.date==0&&C)||(B-this.from.date==0&&!C)){L+=" selected"}if(!C&&booking.avCalendar.isDateInRange({year:H,month:I,day:j})){L+=booking.avCalendar.isCheckInAvailable({year:H,month:I,day:j})?" has_av":" no_av"}if(C&&this.from.day&&booking.avCalendar.isDateInRange(this.from)){L+=booking.avCalendar.isCheckOutAvailable(this.from,{year:H,month:I,day:j})?" has_av":" no_av"}}else{if(B-this.today==0){L+=" today"}if(B-this.till.date==0){L+=C?" selected":" endsel"}if(B-this.from.date==0){L+=C?" endsel":" selected"}if(B<this.till.date&&B>this.from.date){L+=" inbetween"}}if(booking.env.b_fd_hotel_dates){for(var z=0;z<booking.env.b_fd_hotel_dates.length;z++){if(booking.env.b_fd_hotel_dates[z]){$.lst=booking.env.b_fd_hotel_dates[z].split("-");var A=new Date(Number($.lst[0]),Number($.lst[1])-1,Number($.lst[2]));if(B-A==0){L+=" flashdeals"}}}}E.innerHTML='<a href="#" class="'+L+'">'+j+"</a>"}}else{E.innerHTML="&nbsp;"}}$(D).html(K.innerHTML);this.updatePrevNextLinks(true,D)},rebuildDaySelect:function(z,B){var v="&nbsp;";if(B){var t=this.till.month;var d=this.till.year;var x=this.till.day;if(x==null||booking.env.keep_day_month){if(!((t==booking.env.b_this_month)&&(d>booking.env.b_this_year4)&&(w>(booking.env.b_this_day-1))&&booking.env.b_site_experiment_rolling_calendar_year)){v='<option style="text-transform:capitalize;" value="0">'+f.day+"</option>"}}}else{var t=this.from.month;var d=this.from.year;var x=this.from.day;if(x==null||booking.env.keep_day_month){if(!((t==booking.env.b_this_month)&&(d>booking.env.b_this_year4)&&(w>(booking.env.b_this_day-2))&&booking.env.b_site_experiment_rolling_calendar_year)){v='<option style="text-transform:capitalize;" value="0">'+f.day+"</option>"}}}$(z).html(v);var c=this.getDaysInMonth(t,d);for(var w=1;w<=c;w++){var A=new Date(d+"/"+t+"/"+w+" 00:00:00");var y=(A.getDay()>0)?A.getDay()-1:6;var u=f.b_simple_weekdays_for_js[y]+" "+w;if((f.b_lang=="ja")||(f.b_lang=="zh")||(f.b_lang=="ko")||(f.b_lang=="hu")){u=w+" "+f.b_simple_weekdays_for_js[y]}if(!((t==booking.env.b_this_month)&&(d>booking.env.b_this_year4)&&(((w>(booking.env.b_this_day-2))&&!B)||((w>(booking.env.b_this_day-1))&&B))&&booking.env.b_site_experiment_rolling_calendar_year)){$(z).append('<option value="'+w+'"'+((x==w)?' selected="selected"':"")+">"+u+"</option>")}}},noHourDate:function(c){var d=(typeof c==="undefined"||c===null)?(this.userServDate?new Date(this.syncDate):new Date()):c;d.setHours(0);d.setMilliseconds(0);d.setMinutes(0);d.setSeconds(0);return d},getDaysInMonth:function(c,h){var d=[31,(function(){return((((h%4)===0)&&((h%100)!==0)||((h%400)===0))?29:28)})(),31,30,31,30,31,31,30,31,30,31];return d[c-1]},selectOption:function(x,t,w){var A=$(x).parents(".newcalendar");var u=booking.env.b_site_experiment_av_calendar&&A.hasClass("avCalendar");var z=false;var c=$("option",x);var y,B,d;for(var v=0;v<c.length;v++){y=c[v];B=$(y);d=B.text();if(t&&t!=""){if(B.val()==t){y.selected=true;z=true;if(u){A.find(".avCalendar_month").text(d)}}else{c[v].selected=false}}if(w&&w!=""){if(d==t){y.selected=true;z=true;if(u){A.find(".avCalendar_month").text(d)}}else{y.selected=false}}}return z},dateAfterDays:function(c,v,t,d){var z=this.oneDayInMS*v;var u=12;if(d){c.setDate(1)}if(t){var y=this.noHourDate(c);if(t>u||t<-1*u){c.setFullYear(c.getFullYear()+parseInt(t/u));t=t%u}if(t!=0){var x=c.getMonth();if(x+t>u){c.setFullYear(c.getFullYear()+1);c.setMonth((x+t)-u)}else{if(x+t<0){c.setFullYear(c.getFullYear()-1);c.setMonth((x+t)+u)}else{c.setMonth(x+t)}}}}var w=new Date((this.noHourDate(c)*1)+z);if(c.getTimezoneOffset()!=w.getTimezoneOffset()){var q=c.getTimezoneOffset()-w.getTimezoneOffset();q=((q<0)?~q+1:q)*60*1000;if(q>0){w=new Date((this.noHourDate(c)*1)+z+q)}}return w},setPosition:function(d){var j=$(d).offset(),c=10,k=j.top+c;leftPos=j.left,$window=$(window),windowHeight=$window.height(),windowWidth=$window.width(),documentScrollTop=$(document).scrollTop();if(booking.env.b_site_experiment_omni_search){k=k+5}if(f.rtl){leftPos=leftPos-211}if(windowWidth<leftPos+230){if(windowWidth-230>0){leftPos=windowWidth-230}}if(windowHeight+documentScrollTop<k+230){if(k-documentScrollTop-250>0){k=k-250}else{k=windowHeight+documentScrollTop-250}}$("#calendar_popup").css({top:k+"px",left:leftPos+"px"})},scrollHandlers:[],openPopupCalendar:function(l){var n=$("#calendar_popup").get(0),c=$(window),d,o=this;var m="";switch(l.nodeName.toLowerCase()){case"a":m=l.href.split("#")[1];break;case"input":m=l.name;break;case"select":m=l.name;break;case"label":m=l.getAttribute("data-title");break;default:break}d=function(){o.setPosition(l)};this.scrollHandlers.push(d);this.setPosition(l);c.bind("scroll resize",d);$("#calendar_popup").show();if(this.calendarTypes[m]&&this.calendarTypes[m].isTill){$(n).addClass("calendarTill");this.rebuildCalendarTable($("table",n).get(0),true,this.viewDateTill.getMonth()+1,this.viewDateTill.getFullYear())}else{$(n).removeClass("calendarTill");this.rebuildCalendarTable($("table",n).get(0),false,this.viewDateFrom.getMonth()+1,this.viewDateFrom.getFullYear())}if(booking.env.b_site_experiment_omni_search){$(".calendar_close","#calendar_popup").remove();$("#calendar_popup").append($("#no_dates"))}$("body").bind("close_calendar",this.closeHandler)},closeHandler:function(){g.closePopupCalendar()},closePopupCalendar:function(){var h,c,d;$("#calendar_popup").removeClass("calendarTill").hide();$("body").unbind("close_calendar",this.closeHandler);for(h=0,c=this.scrollHandlers.length;h<c;h+=1){d=this.scrollHandlers[h];if(typeof d==="function"){$window.unbind("scroll resize",d)}}this.scrollHandlers=[]}}})();booking[sNSStartupLoad].change_dates={priority:9,init:function(){if(typeof trigger_error_template_event_tracking!="undefined"&&trigger_error_template_event_tracking===true){booking.google.trackEvent(booking.google.pageviewTracker,"Error Template (Aggregate)",b_errors);if(b_this_referer!=""){booking.google.trackEvent(booking.google.pageviewTracker,"Error Template (Referrer)",b_this_referer+" - "+b_errors)}booking.google.trackEvent(booking.google.pageviewTracker,"Error Template (RequestURL)",b_this_url+" - "+b_errors)}if(booking.env.b_page="send_change_dates"){$("#message_changing-dates").fadeIn();$("#change_dates").submit(function(){var f=$("input[name=do]");var h=$("#change_dates input[name=checkin_date]").val();var g=$("#change_dates input[name=checkout_date]").val();if(h&&g&&(h.length>0||g.length>0)){cin_yymm=$("#checkin_year_month").val();cin_dd=$("#checkin_day").val();cin_yymmdd=cin_yymm+"-"+cin_dd;cout_yymm=$("#checkout_year_month").val();cout_dd=$("#checkout_monthday").val();cout_yymmdd=cout_yymm+"-"+cout_dd;a=h.replace(/-0/g,"-");b=g.replace(/-0/g,"-");if(a!=cin_yymmdd||b!=cout_yymmdd){f.val("dochangedates")}}})}}};function switchDateStack(k,h){var j=k;if($(k).parents("div").length){j=$(k).parents("div").get(0)}var g=0;while(j){if(j.nodeName.toLowerCase()=="div"){g++;if(g==h){j.style.display="block"}}j=j.nextSibling}}function switchDateFlashDeal(g,f){if(!booking.env.b_site_experiment_new_change_dates_hp){$("div#editDates").css("display","block");$("div#available_rooms_header1").css("display","none")}}booking[sNSStartup].validatedate={priority:9,init:function(){$("#frm, #hotelpage_availform").submit(function(){var f=booking[sNSStartup].validatedate.validate(this),g=!f?"Form:NotValid":"Form:Valid";if(!f&&this.id==="hotelpage_availform"){fminit("hotelpage_availform")}$(window).trigger(g,{form:this});return f});$("#fd_dates, #fd_flashdeals").submit(function(){return booking[sNSStartup].validatedate.validate(this)});$("#labfor").click(function(){checkbox_status="";if($("#availcheck").is(":checked")){checkbox_status="Uncheck"}else{checkbox_status="Check"}booking.google.trackEvent(booking.google.clickTracker,booking.env.b_action+" | searchbox checkbox",checkbox_status)})},validate:function(oForm){var sError="";var today=new Date();var sErrorIsNeedDates=false;if(booking.env.b_site_experiment_fix_user_dates){var checkUserDate=booking.env.b_current_datetime;syncDate=checkUserDate.replace(/-/gi,"/");var checkTomorrow=new Date(syncDate);checkTomorrow.setDate(checkTomorrow.getDate()+1);if(checkTomorrow<today){today=new Date(syncDate)}else{var checkYesterday=new Date(syncDate);checkYesterday.setDate(checkYesterday.getDate()-1);if(checkTomorrow>today){today=new Date(syncDate)}}}today.setHours("0");today.setMinutes("0");today.setSeconds("0");today.setMilliseconds("0");if($("select[name=checkin_monthday]",oForm).length&&$("select[name=checkin_year_month]",oForm).length&&$("select[name=checkout_monthday]",oForm).length&&$("select[name=checkout_year_month]",oForm).length){if($("#availcheck:checked").length){if(booking.env.b_site_experiment_omni_search){if($("#no_dates","#calendar_popup").length>0){$(".when .field","#frm").append($("#no_dates"))}}return true}var oCheckinD=$("select[name=checkin_monthday]",oForm).get(0);var oCheckinYM=$("select[name=checkin_year_month]",oForm).get(0);var oCheckoutD=$("select[name=checkout_monthday]",oForm).get(0);var oCheckoutYM=$("select[name=checkout_year_month]",oForm).get(0);var checkinYM=$(oCheckinYM).val();var checkinD=parseInt($(oCheckinD).val());var checkoutYM=$(oCheckoutYM).val();var checkoutD=parseInt($(oCheckoutD).val());if((typeof checkinYM!="undefined")){var checkinY=checkinYM.split("-")[0];var checkoutY=checkoutYM.split("-")[0];var checkinM=parseInt(checkinYM.split("-")[1]);var checkoutM=parseInt(checkoutYM.split("-")[1]);var checkin=new Date(checkinY,checkinM-1,checkinD);var checkout=new Date(checkoutY,checkoutM-1,checkoutD);if(checkinYM=="0"||checkinD=="0"){if(checkoutYM=="0"||checkoutD=="0"){sError=booking.env.to_check_availability_please_enter_your_dates_of_stay;if(booking.env.b_site_experiment_remove_no_dates_box){sError+=' <a href="#" id="swd">'+booking.env.click_here_to_search_without_dates+"</a>"}sErrorIsNeedDates=true}else{sError=booking.env.please_enter_your_check_in_date}}else{if(checkoutYM=="0"||checkoutD==0){sError=booking.env.please_enter_your_check_out_date}else{if((checkinY>checkoutY)||((checkinY==checkoutY)&&(eval(checkinYM)<eval(checkoutYM)))||((checkinYM==checkoutYM)&&(checkinD>checkoutD))){sError=booking.env.error.checkout_date_not_after_checkin_date.name}}}if(sError==""&&(booking.env.b_site_experiment_add_js_validation)){if(checkin.getTime()<today.getTime()&&!(checkin.getTime()>today.getTime()-86400005&&booking.env.b_site_experiment_fix_timezone_error)){sError=booking.env.error.checkin_date_in_the_past.name}else{if((checkout-checkin)/86400000>30){sError=booking.env.error.checkout_date_more_than_30_days_after_checkin.name}else{if(checkin>checkout){sError=booking.env.error.checkout_date_not_after_checkin_date.name}}}}}}if(sError!=""){if($(".dateerrors",oForm).length){if(booking.env.b_site_experiment_omni_search){if($(".has_omni_error").length==0){$(".when","#frm").addClass("has_omni_error")}}var errorField=$(".dateerrors",oForm).get(0);if(sErrorIsNeedDates){if(booking.env.b_site_experiment_omni_search){if($("#no_dates","#calendar_popup").length>0){$(".when .field","#frm").append($("#no_dates"))}if($("#no_dates p","#frm").length==0){$("#no_dates","#frm").prepend('<p class="omni_error_msg">'+booking.env.view_prices_enter_dates+"</p>")}}else{$("#inout select").change(function(){$("#friendly_error_popup").remove()});$(".calendar").click(function(){$("#friendly_error_popup").remove()});$("#friendly_error_popup span.close_errormsg").live("click",function(){$("#friendly_error_popup").remove()});$("#inout .avail, .toggle_overview, .toggle_review").live("click",function(){$("#friendly_error_popup").remove()});if($("#friendly_error_popup").length==0){var last_dropdown_searchbox=$("#inout select").eq(3);if(booking.env.b_action=="hotel"||booking.env.b_action=="searchresults"){last_dropdown_searchbox=$(".leftsmall #inout select").eq(1)}var last_dropdown_offset=last_dropdown_searchbox.offset();var last_dropdown_hotelpage=$("#hotelpage_availform select").eq(3);if(booking.env.nodates_popup_up){last_dropdown_hotelpage=$("#hotelpage_availform select").eq(0)}var last_dropdown_hotelpage_offset=last_dropdown_hotelpage.offset()||{};var first_dropdown_searchbox=$("#inout select").eq(0);var first_dropdown_offset=last_dropdown_searchbox.offset();var homeinPos=($("#checkin_year_month").position().top-18);var nodates_popup_upRight=-255;if($.browser.msie&&$.browser.version==="7.0"){nodates_popup_upRight=-200}if(booking.env.b_lang=="ar"||booking.env.b_lang=="he"){var errorHTML='<div id="friendly_error_popup" style="direction:ltr;background-position:center right;top:'+homeinPos+"px;left:"+(nodates_popup_upRight+50)+'px"><div class="wrapper"><span class="close_errormsg"></span><p>'+booking.env.view_prices_enter_dates+"</p></div></div>";$("#inout").css({position:"relative","z-index":"999"}).append(errorHTML)}else{if(oForm.id=="hotelpage_availform"){if(booking.env.nodates_popup_up){var errorHTML='<div id="friendly_error_popup" class="hotelpage new_change_dates" style="top:'+(last_dropdown_hotelpage_offset.top-90)+"px;left:"+(last_dropdown_hotelpage_offset.left-150)+'px;"><div class="wrapper"><span class="close_errormsg"></span><p>'+booking.env.view_prices_enter_dates+"</p></div></div>"}else{var errorHTML='<span class="exclamation exclamation_daterrrors">&nbsp;!&nbsp;</span><p class="error errors_dateerros">'+sError+"</p>";errorField.innerHTML=errorHTML;errorField.style.display="block"}}else{var errorHTML='<div id="friendly_error_popup" style="top:'+homeinPos+"px;right:"+nodates_popup_upRight+'px"><div class="wrapper"><span class="close_errormsg"></span><p>'+booking.env.view_prices_enter_dates+"</p></div></div>";$("#inout").css({position:"relative","z-index":"999"}).append(errorHTML)}}}}}else{if(booking.env.b_site_experiment_omni_search){var errorHTML='<p class="omni_error_msg">'+sError+"</p>"}else{var errorHTML='<span class="exclamation exclamation_daterrrors">&nbsp;!&nbsp;</span><p class="error errors_dateerros">'+sError+"</p>"}errorField.innerHTML=errorHTML;errorField.style.display="block"}$("#swd").click(function(){document.getElementById("availcheck").checked="checked";document.getElementById("frm").submit();return false});return false}else{return true}}else{return true}}};function noDatesPopup(d){if(document.getElementById("checkin_day").value==0||document.getElementById("checkin_year_month").value==0||document.getElementById("checkout_monthday").value==0||document.getElementById("checkout_year_month").value==0){document.location=document.location+"#top";alert(d)}else{document.getElementById("availcheck").checked=false;document.getElementById("frm").submit()}}booking[sNSStartup].default_input_text={priority:9,init:function(){$("input.swap_text, textarea.swap_text").each(function(){if($(this).val()==""){$(this).val($(this).attr("alt"));$(this).removeClass("swapped")}else{if($(this).val()==$(this).attr("alt")){$(this).removeClass("swapped")}else{$(this).addClass("swapped")}}$(this).focus(function(){if($(this).val()==$(this).attr("alt")){$(this).val("");$(this).addClass("swapped")}}).blur(function(){if($(this).val()==""){$(this).val($(this).attr("alt"));$(this).removeClass("swapped")}});$(this).closest("form").submit(function(){$("input.swap_text, textarea.swap_text",this).each(function(){if($(this).val()==$(this).attr("alt")){$(this).val("")}})})})}};booking[sNSStartup].destinationThemes={priority:8,init:function(){$(".city_list_info").click(function(f){var g=$(this).attr("class");if($(f.target).hasClass("city_price")){booking.google.trackEvent(booking.google.clickTracker,"DestThemes","City Closed Price - "+g);return}if($(this).next(".hotels_in_city").hasClass("closed")){$(".hotels_in_city.opened").each(function(){booking.google.trackEvent(booking.google.clickTracker,"DestThemes","City Open HList - "+g);$(this).removeClass("opened");$(this).slideUp();$(this).addClass("closed");$(this).parent().find(".city_from_price").show()});$(this).next(".hotels_in_city").removeClass("closed");$(this).next(".hotels_in_city").slideDown();$(this).next(".hotels_in_city").addClass("opened");$(this).find(".city_from_price").hide()}else{if($(this).next(".hotels_in_city").hasClass("opened")){booking.google.trackEvent(booking.google.clickTracker,"DestThemes","City Close HList - "+g);$(this).next(".hotels_in_city").removeClass("opened");$(this).next(".hotels_in_city").slideUp();$(this).next(".hotels_in_city").addClass("closed");$(this).parent().find(".city_from_price").show()}}});$(".city_list_info").hover(function(){$(this).find(".cityimage_marker").addClass("hovered");$(this).find("h3.cityname").addClass("hovered");$(this).find(".city_from_price a").addClass("hovered")},function(){$(this).find(".cityimage_marker").removeClass("hovered");$(this).find("h3.cityname").removeClass("hovered");$(this).find(".city_from_price a").removeClass("hovered")});$(".hotel_block").click(function(){var f=$(this).attr("class");booking.google.trackEvent(booking.google.clickTracker,"DestThemes","Hotel: "+f);var g=$(this).find(".hotelname").attr("href");location.href=g});$(".showall_in_city").click(function(){var d=$(this).attr("class");booking.google.trackEvent(booking.google.clickTracker,"DestThemes","City Show All - "+d)})}};booking[sNSStartup].filterbox_loading={priority:9,loadpos:0,savecheck:0,init:function(){if(!booking.env.b_site_experiment_ajax_filters){$(".filterelement").click(function(){if($(this).hasClass("active")){$(this).removeClass("active")}else{$(this).addClass("active")}booking[sNSStartup].filterbox_loading.anim=setInterval("booking[sNSStartup].filterbox_loading.loadanimation()",200);booking[sNSStartup].filterbox_loading.show();location.href=this.href;if(typeof ClickTaleEvent==="function"){ClickTaleEvent("Filter clicked")}return false});$(".option").click(function(){$("#filterbox_overlay").show();return true})}return true},loadanimation:function(){this.loadpos=this.loadpos+1;var d=booking[sNSStartup].filterbox_loading.loadpos*34;if(this.loadpos>15){this.loadpos=0;this.savecheck++;d=0}document.getElementById("filterbox_overlay_animation").style.backgroundPosition="-"+d+"px 0px";if(this.savecheck>3){clearInterval(this.anim)}},show:function(){var g=0;if($.browser.msie){if($.browser.version<8){g=-0.5}else{g=7}}var f=$("#filterbox_options").height();if(f==0){f=1}$("#filterbox_overlay").css("width",$("#filterbox_options").width()).css("height",f);$("#filterbox_overlay_image_container").css("top",f/2-50);if(g!=0){$("#filterbox_overlay").css("margin-left",g)}var h=$("#filterbox_overlay_loading");$("#filterbox_overlay").show();if($.browser.msie){h.attr("src",h.attr("src"))}}};booking[sNSStartup].fixMail={priority:9,init:function(){var d=this;$(".encrypted").each(function(){$(this).html(d.deCode($(this).text()));$(this).removeClass("encrypted")})},deCode:function(d){return d.replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26)})}};function calcage(h,f,g){s=((Math.floor(h/f))%g).toString();if(LeadingZero&&s.length<2){s="0"+s}return"<b>"+s+"</b>"}function CountBack(d){if(d<0){if(document.getElementById("cntdwn")){document.getElementById("cntdwn").innerHTML=FinishMessage;return}}else{if(d>86400){DisplayStr_days=DisplayFormat_days.replace(/%%D%%/g,calcage(d,86400,100000));document.getElementById("flash_days").innerHTML=DisplayStr_days}else{document.getElementById("flash_days_wrapper").style.display="none"}}DisplayStr_hours=DisplayFormat_hours.replace(/%%H%%/g,calcage(d,3600,24));DisplayStr_minutes=DisplayFormat_minutes.replace(/%%M%%/g,calcage(d,60,60));DisplayStr_seconds=DisplayFormat_seconds.replace(/%%S%%/g,calcage(d,1,60));document.getElementById("flash_hours").innerHTML=DisplayStr_hours;document.getElementById("flash_minutes").innerHTML=DisplayStr_minutes;document.getElementById("flash_seconds").innerHTML=DisplayStr_seconds;if(CountActive){setTimeout("CountBack("+(d+CountStepper)+")",SetTimeOutPeriod)}}if(typeof(TargetDate)=="undefined"){TargetDate="12/31/2020 5:00 AM"}if(typeof(DisplayFormat)=="undefined"){DisplayFormat="%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds."}if(typeof(CountActive)=="undefined"){CountActive=true}if(typeof(FinishMessage)=="undefined"){FinishMessage=""}if(typeof(CountStepper)!="number"){CountStepper=-1}if(typeof(LeadingZero)=="undefined"){LeadingZero=true}CountStepper=Math.ceil(CountStepper);if(CountStepper==0){CountActive=false}var SetTimeOutPeriod=(Math.abs(CountStepper)-1)*1000+990;var dthen=new Date(TargetDate);var dnow=new Date();if(CountStepper>0){ddiff=new Date(dnow-dthen)}else{ddiff=new Date(dthen-dnow)}gsecs=Math.floor(ddiff.valueOf()/1000);if(document.getElementById("flash_seconds")){CountBack(gsecs)}booking.ensureNamespaceExists("google");booking.google.AjaxApiLoader=function(){var h=booking,f=h.env;function g(c){var d=window.location.protocol;this.script={_this:this,"@type":"text/javascript","@src":d+"//www.google.com/jsapi?oe=utf-8&"+f.b_google_maps_key_params};if(f.b_lang){this.script["@src"]+=("&hl="+f.b_lang)}if(c){this.script["@src"]+=("&callback="+c)}}return{loaded:false,load:function(c){booking.google.AjaxApiLoader.loaded=true;return h.utils.buildHtmlNode(new g(c),document.getElementsByTagName("head")[0])}}}();booking[sNSStartupLoad].google_thumbnail_map={priority:9,init:function(){var d=$("#b_google_map_thumbnail").attr("data-map");if(d){if(window.location.protocol.indexOf("s")!=-1){d=d.replace("http","https")}$("#b_google_map_thumbnail").attr("style","background-image: url("+d+");")}return true}};if(!Array.prototype.walk){Array.prototype.walk=function(f){var h=[],g=this.length;while(g--){h.push(f(this[g]))}return h.reverse()}}if(!Array.prototype.flatten){Array.prototype.flatten=function(){var g=[],f=-1,h=this.length;while(++f<h){g=g.concat(this[f].constructor==Array?this[f].flatten():this[f])}return g}}if(!Array.indexOf){Array.prototype.indexOf=function(f){for(var g=0;g<this.length;g++){if(this[g]==f){return g}}return -1}}booking.ensureNamespaceExists("google");booking.google.returnAnalyticsTrackingString=function(){var g=booking.env;var f=[];f[f.length]=g.b_this_urchin.replace(/&amp;$/,"");f[f.length]="ur_aid="+g.b_aid;f[f.length]="ur_plang="+g.b_lang_for_url;f[f.length]="ur_gstcc="+g.b_guest_country;if(g.b_search_category!=""){f[f.length]="ur_scat="+g.b_search_category}if(g.b_experiment_group){f[f.length]="ur_expgr=1"}if(g.b_action==="hotel"){if(g.b_hotel_blocks===0&&g.b_checkin_date){f[f.length]="ur_honovail=1"}f[f.length]="ur_hocc1="+g.b_countrycode;if(typeof g.b_label!="undefined"&&g.b_label.substr(0,11)=="postbooking"){f[f.length]="ur_postbknglabel="+g.b_label}}if(g.b_availability_checked||g.b_checkin_date){f[f.length]="ur_dat=1"}else{f[f.length]="ur_nodat=1"}if(g.b_action==="searchresults"){if(g.b_multiple_destinations_found){f[f.length]="ur_srdis=1"}if(typeof g.b_available_hotels!="undefined"){if(g.b_available_hotels==0){f[f.length]="ur_hc=0"}else{if(g.b_available_hotels<=20){f[f.length]="ur_hc=1"}else{f[f.length]="ur_hc=2"}}}}if(g.b_context_details){f[f.length]=g.b_context_details.walk(function(c){return["rctp="+c.b_type,"ur_srcid="+c.b_code]})}if(typeof b_first_seen!="undefined"&&b_first_seen!=""){f[f.length]="first_seen="+b_first_seen}if(g.b_yahoo_param_keyword||g.b_yahoo_param_advert||g.b_yahoo_param_campaign){f[f.length]="utm_source=yahoo";f[f.length]="utm_medium=cpc";if(g.b_yahoo_param_keyword){f[f.length]="utm_term="+g.b_yahoo_param_keyword}if(g.b_yahoo_param_advert){f[f.length]="utm_content="+g.b_yahoo_param_advert}if(g.b_yahoo_param_campaign){f[f.length]="utm_campaign="+g.b_yahoo_param_campaign}}return f.flatten().join("&amp;")};booking.ensureNamespaceExists("google");booking.google.trackEvent=function(k,j,h,l,m){if(typeof k!="undefined"){_gaq.push(["_trackEvent",k,j,h,1,true])}};booking[sNSExperiments].event_tracking={priority:9,init:function(){if(typeof _gaq!="undefined"){booking.google.errorTracker="Error";booking.google.clickTracker="Click";booking.google.hoverTracker="Hover";booking.google.mapTracker="Map";booking.google.pageviewTracker="Pageview";booking.google.viewTracker="View";booking.google.cityTracker="City";booking.google.groupTracker="Group";booking.google.cardTracker="Credit Card";booking.google.comparisonTracker="Hotel Comparison";$(window).load(function(){if(booking.env.f_seen_experiments){for(var c in booking.env.f_seen_experiments){booking.google.trackEvent("Experiment",c,booking.env.f_seen_experiments[c])}}});$("body").delegate("a, .trackit","click",function(){var c="";$(this).parents(".tracked").each(function(){c=(this.id)?"#"+this.id+" > "+c:(this.className)?"."+this.className+" > "+c:this.tagName+" > "+c});if(c!=""){c=(this.id)?c+"#"+this.id:(this.className)?c+"."+this.className:c+"a";booking.google.trackEvent(booking.google.clickTracker,"Action: "+booking.env.b_action,c)}});if($("select[name^=group]").length){$("#frm").submit(function(){if($("#clear_group").val()=="1"){return}var d=$("#frm select[name=group_adults]");var c=d.length;d.each(function(){var m=this.value;var n=$(this).parent().next().find("select").val();var l=[];$("#frm input[name=age]").each(function(j){l[j]=this.value});booking.google.trackEvent(booking.google.groupTracker,"["+c+"] "+m+" adults + "+n+" children","Ages: "+l.join(", "))})});$("#clear_and_submit").click(function(){booking.google.trackEvent(booking.google.groupTracker,"Clear Group",booking.env.b_action)})}if($("#disambiguationInc2").length==0&&(booking.env.b_group.length>1||(booking.env.b_group.length==1&&(booking.env.b_group[0].guests==1||booking.env.b_group[0].guests>2||booking.env.b_group[0].children>0)))){booking.google.trackEvent(booking.google.groupTracker,"Group Present",booking.env.b_action)}$("#select_group2").click(function(){booking.google.trackEvent(booking.google.groupTracker,"Clicked group Book button")});var f=$(".error, .errorSimpleMsg");for(var g=0;g<f.length;g++){if(!$(this).hasClass("disabled")){var h=f[g].getAttribute("rel");if(h!=null){booking.google.trackEvent(booking.google.errorTracker,"Display",h)}}}if(typeof trigger_error404_event_tracking!="undefined"&&trigger_error404_event_tracking==true){booking.google.trackEvent(booking.google.pageviewTracker,"404 Error",document.location.pathname+document.location.search+"&from="+document.referrer)}$(".filterbox a").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Filter",(this.id==="city_centre_filter_opt"?"district-city_centre":this.getAttribute("data-id")))});if(booking.env.b_action==="hotel"){$("#hcta").click(function(){var c="Hotel cta";if(booking.env.track_htca){c+=("v"+booking.env.track_htca)}booking.google.trackEvent(booking.google.clickTracker,c,this.getAttribute("data-id"))})}$("#sort_by a").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Sort",this.href.substr(this.href.indexOf("order=")+6))});$("#ccfaq").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Credit Card FAQ Popup","View")});$(".track_register").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Login","Register")});$(".track_login").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Login","Login")});if(booking.env.b_action=="hotelcomparison"){$(".back").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Previous Page","Clicked")});$("h1 a, .hotel_comparison_header").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Hotel Header",$(this).parent("td").eq(0).attr("class"))});$(".bigbluebutton").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Book Now Button",$(this).parent().attr("class"))});$(".bigbluebutton.topbutton").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Top Book Now Button on comparison_colors_buttons",$(this).parent().attr("class"))});$(".bigbluebutton.bottombutton2").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Bottom Book Now Button on comparison_colors_buttons",$(this).parent().attr("class"))});$(".bigbluebutton.bottombutton").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Bottom Book Now Button on comparison_colors",$(this).parent().attr("class"))});$(".remove_hotel").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Remove and Replace",$(this).parent().attr("class"))})}$("#bookconditions").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Booking Conditions","Link clicked")});$("#bp_cart a").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Shopping Cart","Link Clicked")});$("#localcurr_dis a").mouseenter(function(){booking.google.trackEvent(booking.google.clickTracker,"Action: "+booking.env.b_action,"hover_tooltip_local_currency")});if(booking.env.smart_deals_count&&booking.env.smart_deals_count>0){booking.google.trackEvent(booking.google.viewTracker,"Smart deal filter",booking.env.smart_deals_count+" deals displayed")}}return true}};booking[sNSStartup].google_pageview_tracker={priority:9,init:function(){if(typeof booking.env.google_analytics_tracking_enabled!="undefined"&&booking.env.google_analytics_tracking_enabled){$('div#survey[surveykey="'+booking.env.survey_key+'"] button[value="accept"]').click(function(){_gaq.push(["_trackPageview",booking.env.surveytracklink])});if(booking.env.b_action=="general"){$("a#jobsite").click(function(){_gaq.push(["_trackPageview","/outgoinglink/jobsite"])})}$("#review_useful_share a").click(function(){var d;this.id=="share_any_review_fb"?d="facebook":d="twitter";d+="/"+this.getAttribute("data-id");_gaq.push(["_trackPageview","/outgoinglink/socnet_share/review_v2/"+d]);_gaq.push(["_trackSocial",d,"Share Review"])});$("#flash_bookmark_home").click(function(){_gaq.push(["_trackPageview","/outgoinglink/flashdeals/bookmark"])});$(".priceline_ext_link").click(function(){_gaq.push(["_trackPageview","/outgoinglink/priceline_name_your_price"])});$("#share_popup_inner a").click(function(){var d="hotel_share_popup/base/";if(this.id=="share_popup_fb"){d+="facebook"}else{if(this.id=="share_popup_t"){d+="twitter"}else{d+="mail_a_friend"}}_gaq.push(["_trackPageview","/outgoinglink/socnet_share/"+d]);_gaq.push(["_trackSocial",d,"Share"])});$("#share_hotel_history a").click(function(){var d;if(this.id=="share_hotel_history_fb"){d="facebook"}else{if(this.id=="share_hotel_history_t"){d="twitter"}else{d="mail_a_friend"}}_gaq.push(["_trackPageview","/outgoinglink/socnet_share/hotel_history/"+d]);_gaq.push(["_trackSocial",d,"Share History"])});if(booking.env.b_action=="index"){$("#number_one_promotion #wua_link_logo").click(function(){_gaq.push(["_trackPageview","/outgoinglink/wua-1"])});$("#number_one_promotion #link_jobsite_nl").click(function(){_gaq.push(["_trackPageview","/outgoinglink/jobsite_promo_nl"])})}if(booking.env.b_action=="confirmation"){$("#social_share_links a").click(function(){var d="base";if(this.id=="social_share_conf_facebook"){d+="/facebook";sn="facebook"}else{d+="/twitter";sn="twitter"}_gaq.push(["_trackPageview","/outgoinglink/socnet_share/confirmation/"+d]);_gaq.push(["_trackSocial",sn,"Share Confirmation"])});if(booking.env.b_site_experiment_external_review_invite){$("#external_review_invite_link").click(function(){_gaq.push(["_trackPageview","/outgoinglink/confirmation/external_review_invite/"])})}}if((booking.env.b_action=="searchresults")&&booking.env.is_ipad){$("a.filterelement").click(function(){var h=$(this).parent().parent().attr("id");h=h.substring(7);if(booking.env.filterbox_ipad){var f="var1"}else{var f="base"}var g="/outgoinglink/filterbox_ipad_link/"+f+"/"+h+"/";_gaq.push(["_trackPageview",g])})}if(!booking.env.b_site_experiment_google_pageview_tracker_cleanup){$("#iphone_app_itunes_link_1, #iphone_app_itunes_link_2").click(function(){_gaq.push(["_trackPageview","/outgoinglink/iphone_app_promo/itunes"])})}}}};(function(d){d.idleTimer=function(o,y){var x=false,u=true,t=30000,c="mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove";y=y||document;var v=function(f){if(typeof f==="number"){f=undefined}var g=d.data(f||y,"idleTimerObj");g.idle=!g.idle;var j=(+new Date())-g.olddate;g.olddate=+new Date();if(g.idle&&(j<t)){g.idle=false;clearTimeout(d.idleTimer.tId);if(u){d.idleTimer.tId=setTimeout(v,t)}return}var h=jQuery.Event(d.data(y,"idleTimer",g.idle?"idle":"active")+".idleTimer");h.stopPropagation();d(y).trigger(h)},q=function(g){var f=d.data(g,"idleTimerObj");f.enabled=false;clearTimeout(f.tId);d(g).unbind(".idleTimer")},z=function(){var f=d.data(this,"idleTimerObj");clearTimeout(f.tId);if(f.enabled){if(f.idle){v(this)}f.tId=setTimeout(v,f.timeout)}};var w=d.data(y,"idleTimerObj")||{};w.olddate=w.olddate||+new Date();if(typeof o==="number"){t=o}else{if(o==="destroy"){q(y);return this}else{if(o==="getElapsedTime"){return(+new Date())-w.olddate}}}d(y).bind(d.trim((c+" ").split(" ").join(".idleTimer ")),z);w.idle=x;w.enabled=u;w.timeout=t;w.tId=setTimeout(v,w.timeout);d.data(y,"idleTimer","active");d.data(y,"idleTimerObj",w)};d.fn.idleTimer=function(c){if(this[0]){d.idleTimer(c,this[0])}return this}})(jQuery);booking[sNSStartup].ie6_content_width={priority:9,init:function(){if($("html.b_msie_6").length){$(window).resize(function(){var d=document.documentElement.clientWidth;document.getElementById("bodyconstraint-inner").style.width=(d<630)?"630px":((d>1094)?"1094px":(d-20)+"px")})}}};booking[sNSStartup].in_and_around_updates={priority:9,loadpos:0,savecheck:0,init:function(){var d=(booking.env.b_action=="hotel")?1:12;$(".landing .widesep ul, .hotel .in_and_around ul").each(function(){var c=$(this).find("li");if(c.length>d+2){c.eq(d).after('<li class="iaa_more"><a href="#">'+booking.env.inandaround_more+"</a></li>");c.filter(":gt("+d+")").hide()}});$("li.iaa_more a").click(function(){$(this).hide().parents("ul").find("li").show();if(booking.env.b_action!="hotel"){$("#in_and_around .masonry").masonry()}return false});if(document.getElementById("in_and_around")&&booking.env.b_action!="hotel"){$(window).resize(function(){var c=$("#in_and_around .masonry");c.masonry({itemSelector:".in_and_around",isResizable:false,columnWidth:c.width()*0.499})}).resize()}}};var JSON=JSON||{};JSON.stringify=JSON.stringify||function(k){var l=typeof(k);if(l!="object"||k===null){if(l=="string"){k='"'+k+'"'}return String(k)}else{var j,n,m=[],o=(k&&k.constructor==Array);for(j in k){n=k[j];l=typeof(n);if(l=="string"){n='"'+n+'"'}else{if(l=="object"&&n!==null){n=JSON.stringify(n)}}m.push((o?"":'"'+j+'":')+String(n))}return(o?"[":"{")+String(m)+(o?"]":"}")}};JSON.parse=JSON.parse||function(str){if(str===""){str='""'}eval("var p="+str+";");return p};if($.cookie("b")){var b_cookie=JSON.parse($.cookie("b"))||{}}else{var b_cookie={}}(function(){var g=booking.env,f=booking[sNSStartupLoad].show_language={priority:9,init:function(){var c=function(){b_cookie.langPrompt="dontshow";if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:g.b_domain_end})}};if(typeof(b_cookie)=="undefined"){b_cookie={}}$("#langselectbutton, #languageselect input").hide();$("#langselectformlist, #currList").change(function(){$("#languageselect")[0].submit();c()});$(".language_flags").click(function(){c()});if(g.show_language_suggestion){if(b_cookie.countLang){if(!isNaN(b_cookie.countLang)){var d=parseInt(parseInt(b_cookie.countLang)+1);if(d<=4){g.language_dialog_count2=d;b_cookie.countLang=g.language_dialog_count2}}else{g.language_dialog_count2=1;b_cookie.countLang=1}}else{g.language_dialog_count2=1;b_cookie.countLang=1}if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:g.b_domain_end})}if(b_cookie.langPrompt!="dontshow"&&g.language_dialog_count2<4){setTimeout(f.createAlert,2000)}}},createAlert:function(w){var v=g.show_language_suggestion,d=g.browser_lang,z=g.icons,u,c=false,y="",A="",t="";if(v){var x=230;current_currency_width=$("#current_currency").width();current_language_width=$("#current_language").width();personal_form_space=Math.round(current_currency_width+(current_language_width/2)-(x/2));if($("#languageselect .language-wrapper").length){u=$("#languageselect .language-wrapper");y="margin-top:10px;";A="top: -2px;";if(g.b_is_ie6||g.b_is_ie7){t="margin-top:25px;left:100px;"}c=true}else{u=$("#personal_form");A="top: -11px;";t="top:40px;"}u.append('<div id="lang-prompt" style="display:none;height:1px;position:absolute;z-index:50;width:'+x+"px;left:"+personal_form_space+"px;"+t+'"><div style="position:absolute;zoom:1;'+A+";left:120px;width:17px;height:13px;background:url('//q.bstatic.com/static/img/experiments/top-info-arrrow2.png');\"></div><div style=\"border:2px solid #a2bbda;padding:10px;background:#e6edf6;width:230px;-moz-box-shadow:0 1px 2px rgba(0,0,0,.7);-webkit-box-shadow:0 1px 2px rgba(0,0,0,.7);"+y+'"><a href="#" class="close" style="float:right;font-weight:normal;">'+g.transl_close_x+'</a><a href="#scs" id="lang_change_link" style="display:block;font-weight:normal;margin-right:50px;padding-left:40px;white-space:normal;background:url(\'//r.bstatic.com/static/img/flags/24/'+g.b_flag_to_suggest+".png') no-repeat;\">"+v.transl_change_page_lang_to_x+"</a></div></div>");$("#lang-prompt").fadeIn("slow");booking.google.trackEvent(booking.google.clickTracker,"Lang prompt","Show");$("#lang-prompt .close").click(function(){b_cookie.langPrompt="dontshow";if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:g.b_domain_end})}$("#lang-prompt").hide();booking.google.trackEvent(booking.google.clickTracker,"Lang prompt","Close");return false});$("#lang-prompt #lang_change_link").click(function(){b_cookie.langPrompt="dontshow";if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:g.b_domain_end})}if(c){$("#langselectformlist").val(v.suggested_lang_select);$("#languageselect")[0].submit()}else{window.location=$(".lang_"+v.suggested_lang_select).attr("data-href")}})}}};if(g.b_site_experiment_langselect_lazy_init){var h=f.init;f.init=function(){var c=$("#current_language"),d=$.proxy(function(){c.unbind("click",d);this.start()},this);c.bind("click",d)};f.start=h}})();booking.ensureNamespaceExists(sNSStartup);booking.lightbox=booking[sNSStartup].lightbox=(function(){var K;var L;var H;var y;var w;var F={bAnimation:true,bCloseButton:true,customWrapperClassName:"",customMaskClassName:"",bFullscreen:false,bNoScroll:false,hideCallBack:null};var G={};var I=function(){y.prepend(H);H.css("display",w);K.remove();L.remove();$(window).unbind("resize",A);$(document).unbind("keyup",C);if($.browser.msie&&$.browser.version<=6){$("embed, object, select").filter(function(){return $(this).closest(".modal-wrapper").length!=1}).css({visibility:"visible"})}if(G.hideCallBack){G.hideCallBack()}};var E=function(){K.css({width:$(document).width(),height:$(document).height()});if($.browser.msie&&$.browser.version<=6){K.width($(document.body).innerWidth())}var d=$(window).width(),f=$(window).height();if($.browser.msie&&($.browser.version<9)){d=d-parseInt(L.css("paddingLeft"))-parseInt(L.css("paddingRight"));f=f-parseInt(L.css("paddingTop"))-parseInt(L.css("paddingBottom"))}if(L.outerHeight()>$(window).height()){L.css("height",f)}else{L.css("height","");if(L.outerHeight()>=$(window).height()){L.css("height",f)}}if(L.outerWidth()>$(window).width()){L.css("width",d)}else{L.css("width","");if(L.outerWidth()>=$(window).width()){L.css("width",d)}}var g=0,h=0;if(!G.bFullscreen){g=Math.max(0,$(window).height()/2-L.outerHeight()/2);h=Math.max(0,$(window).width()/2-L.outerWidth()/2)}else{L.css({width:d,height:f})}var c="auto";if(G.bNoScroll){c="none"}L.css({top:g,left:h,overflow:c});if($.browser.msie&&$.browser.version<=6){B()}};var A=function(){if(L&&L.is(":visible")){E()}};var C=function(c){if(c.keyCode===27){I()}};var B=function(){var c=Math.max(0,$(window).height()/2-L.outerHeight()/2);c+=$(document).scrollTop();L.css("top",c)};var z=function(){$(".modal-wrapper .modal-mask-closeBtn").one("click",function(){I()});$(".modal-mask").one("click",function(){I()});$(document).bind("keyup",C);$(window).bind("resize",A)};var J=function(){$('<div class="modal-mask"/>').appendTo(document.body);K=$(".modal-mask");if(G.customMaskClassName.length>0){K.addClass(G.customMaskClassName)}$('<div class="modal-wrapper"/>').appendTo(document.body);L=$(".modal-wrapper");if(G.customWrapperClassName.length>0){L.addClass(G.customWrapperClassName)}L.append(H);if(G.bCloseButton){L.append($('<div class="modal-mask-closeBtn" title="'+booking.env.experiment_popups_close+'"/>'))}if(G.bFullscreen){L.addClass("modal-wrapper--fullscreen")}H.show();E();z();if($.browser.msie&&$.browser.version<=6){$(window).scroll(function(){if(L.is(":visible")){B()}})}};var x=function(c,d){if(L&&L.is(":visible")){return}G={};$.extend(G,F,d);H=$(c);y=H.parent();w=H.css("display");J();L.css("visibility","visible");if(G.bAnimation&&!($.browser.msie&&$.browser.version<=6)){K.fadeTo("slow",0.5);L.css("opacity","0").animate({opacity:1},1000,function(){$(this).css("opacity","")})}else{K.css("opacity","0.5").show()}if($.browser.msie&&$.browser.version<=6){$("embed, object, select").filter(function(){return $(this).closest(".modal-wrapper").length!=1}).css({visibility:"hidden"})}};var D=function(g,c,d,f){booking[sNSStartup].lightbox.show($("#"+f))};return{priority:5,init:function(){},show:x,hide:I,rePosition:A,open:D}}());booking[sNSStartupLoad].message_box={priority:9,init:function(){$("#self_change1 .messageBox").click(function(f){var h=$(this).children("a").attr("href");var g=/(?:\b)tmpl[\=]docs[\\\/]customer_service(?:\b)/i;if(h&&(h!="#")&&(!g.test(h))){location.href=$(this).children("a").attr("href")}return false});$("#isDifferent").fadeIn()}};booking.newsLanding=(function(){var m=$("#b_hotel_list");var h=$("#grid_toggle");var j=function(){if(typeof b_cookie==="undefined"){window.b_cookie={}}h.click(function(){booking.google.trackEvent(booking.google.clickTracker,"Dealfinder","switchviews");switchViews()});$(".b_msie_6 .hotel_item").hover(function(){$(this).toggleClass("hotel_item_hover")});if(!$(".hotel_item").hasClass("hotel_item_rooms_table")){$(".hotel_item").click(function(c){if(c.which==2){return true}if($(this).find("a.bigbluebutton").length>0){booking.google.trackEvent(booking.google.clickTracker,"Dealfinder",$(this).parent().attr(".hotel_item base"));location.href=$(this).find("a.bigbluebutton").attr("href")}return false})}$(".location_dropdowns select").live("focus",function(){var c=$(this).find(":selected").text();$(this).attr("oldValue",c)});$(".location_dropdowns select").change(function(){myid=$(this).attr("id");myvalue=$(this).find(":selected").val();mytext=$(this).find(":selected").text();selected=$(this).attr("oldValue");if(myvalue.length>0){if(myid=="fd_title_countryname"){track_string=booking.env.b_lang+" | Countries | "+mytext}else{if(myid=="fd_title_regionname"){track_string=booking.env.b_lang+" | Regions | "+mytext}else{if(myid=="fd_title_cityname"){track_string=booking.env.b_lang+" | Cities | "+mytext}}}}else{if(myid=="fd_title_countryname"){track_string=booking.env.b_lang+" | Countries Remove | "+selected}else{if(myid=="fd_title_regionname"){track_string=booking.env.b_lang+" | Regions Remove | "+selected}else{if(myid=="fd_title_cityname"){track_string=booking.env.b_lang+" | Cities Remove | "+selected}}}}booking.google.trackEvent(booking.google.clickTracker,"Dealfinder",track_string);this.form.submit()});$("#b_sortbox select").change(function(){booking.google.trackEvent(booking.google.clickTracker,"Dealfinder","df_dropdown_sorting");this.form.submit()});$("#checkin-flexible-form").submit(function(){var d=$("#b_fd_checkin_date").val();var c=$("#fd_flex").attr("checked");if(d!="undefined"){if(c){track_string=booking.env.b_lang+" | Date Select | Flexible"}else{track_string=booking.env.b_lang+" | Date Select"}}else{track_string=booking.env.b_lang+" | Date Remove | "}booking.google.trackEvent(booking.google.clickTracker,"Dealfinder",track_string)});if($.browser.msie&&jQuery.browser.version<9){$(window).resize(function(){l()});l()}};function k(f,g,c){var t=booking.env.b_canonical_url_delimiter,d=f.split(t),q=d.length,u;while(q--){u=d[q].split("=");if(u[0]==g){u[1]=c;d[q]=u.join("=");break}}if(q<0){d[d.length]=[g,c].join("=")}return d.join(t)}var l=function(){var d=$(window).width();var c=$("body.nobg #bodyconstraint");if(d<901){c.css("width","901px")}else{if(d<1110){c.css("width","901px")}else{c.css("width","1110px")}}};return{init:j}}());booking[sNSExperiments].fd_pages={priority:1,init:function(){booking.newsLanding.init()}};booking[sNSStartup].dod_sr={priority:1,init:function(){if(!$(".hotel_item").hasClass("hotel_item_rooms_table")){$(".hotel_item").click(function(d){if(d.which==2){return true}location.href=$(this).find("a.bigbluebutton").attr("href");return false})}$(".flash_deal_extra").hover(function(){var f=$(this).find("span").find("small").text().length;var g=6.8;if(booking.env.b_lang=="ja"){var g=14}if(booking.env.b_lang=="zh"){var g=15}if(booking.env.b_lang=="ko"){var g=11}var h=Math.round(f*g);$(this).find("span").stop().animate({width:h},400);$(this).find("span").find("small").stop().show()},function(){$(this).find("span").find("small").stop().hide();$(this).find("span").stop(true,true).animate({width:"0px"},400)});if($(".b_hotel_share").length){if(!($.browser.msie&&parseInt($.browser.version,10)>=9)){(function(){var g=document.createElement("script");g.type="text/javascript";g.async=true;g.src="https://apis.google.com/js/plusone.js";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(g,f)})()}}$(".subscriptionbox").click(function(){booking[sNSStartup].lightbox.show($("#subsciber_reinforcement_lightbox"),{customWrapperClassName:"dealfinder-lightbox"});return false});$(".open_mail_preview").click(function(){$("a.selected").each(function(){$(this).removeClass("selected")});$(this).addClass("selected");$(".mail_preview").css("height","1910px");var h=booking.env.icons+"/loading_filterbox.gif";var l=$(this).attr("href");$(".mail_preview").empty();$(".mail_preview").append('<img style="margin: 20px auto; width: 37px; display: block;" src="'+h+'" />');var k=$("<img />").attr("src",l).load(function(){$(".mail_preview").empty();$(".mail_preview").append(k);k.addClass("mailpreview");$(".mail_preview").attr("src",k.attr("src"))});var m=$(".subscribe_profile_previews").offset().top;var j=$(window).scrollTop();$("html, body").animate({scrollTop:m},500);return false})}};booking[sNSStartup].newsletterTutorials={priority:6,init:function(){var h=1;var g=this;if(window.location.hash){var j=window.location.hash.substring(1,7);if(booking.env.aid=="339530"&&j.split("dyk_")[1]){var k=new g.getTutorialId;g.loadPopups("#tutorial_dyk_"+k.tutIdNumber+"_s"+h,k.tutIdNumber,h)}}$("#tutorial_dyk_02_s1 a.fd_next").click(function(){$("#show_reviews_tab").click();g.nextPopup(this)});$(".fd_tutorial_helpbox_buttons a.fd_close").click(function(){g.closeTutorial(this)});$(".fd_tutorial_helpbox_buttons a.fd_next").click(function(){g.nextPopup(this)})},loadPopups:function(v,t,u){var z=this;var q=$("#tutorial_dyk_"+t+"_s"+u).attr("rel");if(q){var w=new z.relativePosition(q,true,false);var y=$(v).attr("rev");var x=$(v).width();var n=new z.getRelInlineCss(v);if(n.rgValues){$(this).css({top:"",right:"",bottom:"",left:""})}if(y!="undefined"){if(y=="right"){var o={top:(w.relDivTop+n.rgTop)+"px",left:(w.relDivSide+n.rgLeft)+"px"}}else{if(y=="left"){var o={top:(w.relDivTop+n.rgTop)+"px",left:(w.relDivSide-x+n.rgLeft)+"px"}}}}if(w.scrollToDiv&&u==1){$("html, body").delay(500).animate({scrollTop:(w.relDivTop-50)},1000,function(){$(v).css(o).fadeIn(300)})}else{$(v).delay(300).css(o).fadeIn(500)}}else{$(v).delay(300).fadeIn(500)}},getTutorialId:function(){this.tutIdNumber=window.location.hash.substring(1,7).split("dyk_")[1];this.tutIdName=$(".tutorialwrapper_"+this.tutIdNumber).attr("id")},relativePosition:function(k){var j=$("#"+k).offset()||{};this.relDivTop=j.top;var g=j.left;var h=$("#bodyconstraint-inner").offset().left;this.relDivSide=(g-h);if(this.relDivTop>200){this.scrollToDiv=true}else{this.scrollToDiv=false}},getRelInlineCss:function(d){this.rgTop=parseInt($(d).css("top").replace("px",""))||0;this.rgLeft=parseInt($(d).css("left").replace("px",""))||0;if(this.rgLeft==0&&this.rgTop){this.rgValues=false}else{this.rgValues=true}},nextPopup:function(v){var l=this;var q=new l.getTutorialId;var n=q.tutIdName;var u=q.tutIdNumber;var m=$(v).attr("id").split("nextstep_")[1];var t=(parseInt(m)+1);var o="#"+n+"_s"+m;$(o).fadeOut(300);l.loadPopups("#tutorial_dyk_"+u+"_s"+t,u,t)},closeTutorial:function(d){$(d).closest(".tutorial_dyk").fadeOut(300);window.location=window.location.href.replace(/#.*/,"");return false}};booking[sNSStartup].accounts_for_everybody={priority:9,passwordFields:0,passwordChar:"",maskPass:"",isAdding:false,keyCounter:0,paswordShowInit:false,init:function(){var d=this;$(".passwd_strength").each(function(){var g='<div class="pwd_strength"><div class="strength"></div></div><span class="jq_tooltip strength_text" title="'+booking.env.b_passwd_tooltip+'" rel="300">&nbsp;</span>';$(this).after(g);var c=parseInt($(this).css("margin-left").replace("px",""))+1;$(".pwd_strength",this.parentNode).css("margin-left",c+"px");var h=this;$(".pwd_strength",this.parentNode).click(function(){$(h).focus()});$(".pwd_strength",this.parentNode).mouseenter(function(){$(h).addClass("hoverText")});$(".pwd_strength",this.parentNode).mouseleave(function(){$(h).removeClass("hoverText")})});$(".passwd_strength").focus(function(){var c=parseInt($(this).css("margin-left").replace("px",""));var f=(booking.env.b_browser=="safari")?2:c+2;$(".pwd_strength",this.parentNode).css("margin-left",f+"px")});$(".passwd_strength").blur(function(){var c=parseInt($(this).css("margin-left").replace("px",""))+1;$(".pwd_strength",this.parentNode).css("margin-left",c+"px")});$(".passwd_strength").keyup(function(){d.keyCounter++;oThis=this;var c=d.keyCounter;setTimeout(function(){d.calculateStrength(oThis,c)},400)});if($("td.pass_fix").length){$("#new_pass").blur(function(){var c=$(this).parents("tr").get(0);if($(this).val()!=""){$("th span",c).removeClass("val-no");$("th span",c).addClass("val-yes")}else{$("th span",c).removeClass("val-yes");$("th span",c).addClass("val-no")}});$("#confirm_new_pass").blur(function(){var f=$("#new_pass").val();var c=$(this).parents("tr").get(0);if($(this).val()!=""&&$(this).val()==f){$("th span",c).removeClass("val-no");$("th span",c).addClass("val-yes")}else{$("th span",c).removeClass("val-yes");$("th span",c).addClass("val-no")}})}},passWdInit:function(){var d=this;if(!this.paswordShowInit&&booking.env.auth_level<2){this.paswordShowInit=true;$(".passwd_show").each(function(){d.passwordFields++;var n=$(this).attr("name");var k=$(this).val();var l=($(this).hasClass("passwd_strength"))?" strength_margin":"";var c=Math.random();var o="pw_"+c+"textpwd_"+n;$(this).after('<div id="pwfield_'+d.passwordFields+'" class="show_password_text'+l+'"><input type="text" style="display:none;" class="textual_passwd textpwd_'+n+'" name="'+o+'" id="'+o+'" value="'+k+'" onkeyup="'+d.ns+"."+d.name+'.syncPassFields(this,true)" /><label class="pw_toggle_label" for="pw_toggle_'+d.passwordFields+'"><input id="pw_toggle_'+d.passwordFields+'" type="checkbox" onclick="'+d.ns+"."+d.name+'.togglePasswd(this)" />&nbsp;'+booking.env.b_show_passwd+"</label></div>");$(this).mouseenter(function(){var f=$(".textual_passwd",this.parentNode).get(0);$(f).addClass("hoverView")});$(this).mouseleave(function(){var f=$(".textual_passwd",this.parentNode).get(0);$(f).removeClass("hoverView")});var m="#confirm_"+$(this).attr("id");if($(m).length){$(m).each(function(){var f=$(this).attr("name");var g=$(this).val();var h="pw_"+c+"textpwd_"+f;$(this).after('<div id="confirm_pwfield_'+d.passwordFields+'" class="show_password_text"><input type="text" style="display:none;" class="textual_passwd textpwd_'+f+'" name="'+h+'" id="'+h+'" value="'+g+'" onkeyup="'+d.ns+"."+d.name+'.syncPassFields(this,true)" /></div>');$(this).mouseenter(function(){var j=$(".textual_passwd",this.parentNode).get(0);$(j).addClass("hoverView")});$(this).mouseleave(function(){var j=$(".textual_passwd",this.parentNode).get(0);$(j).removeClass("hoverView")})})}$(this).keyup(function(){d.syncPassFields(this,false)});$(this).focus(function(){var g=$(this).parents("form").get(0);var f=$(".textual_passwd",g).get(0);var h=$(f).css("display");if(h!="none"){$(f).focus()}})})}},calculateStrength:function(w,F){if(this.keyCounter==F){var E=$(w).val();var B=$(".pwd_strength .strength",w.parentNode).get(0);if(B){var J=0;var x=0;var C=0;var D=0;var H=0;var G=E.length;if(G>0){J=parseInt(G/2.5);for(var y=0;y<G;y++){var v="!@#$%^&*(){}[];:'\"\\|,.<>/?+=-_±¤";var z="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(!isNaN(E.charAt(y))){x=x+1}if(isNaN(E.charAt(y))){C=1}if(v.indexOf(E.charAt(y))>-1){D=D+2}if(z.indexOf(E.charAt(y))>-1){H=H+1}}if(D>4){D=4}if(x>2){x=2}if(H>2){H=2}if(C!=0){J+=x}J+=D;J+=H;if(J>10){J=10}}var I=26;if($(w).parents("#foldout_signup").length||$(w).parents("#registration_id").length){I=18}var A=I*J;$(B).animate({width:A+"px"});if(E!=""){$(".strength_text",w.parentNode).text(booking.env.b_password_strength_msg[parseInt(J/2)])}else{$(".strength_text",w.parentNode).text("")}}}},togglePasswd:function(j){var l=$(j).parents("form").get(0);$(".textual_passwd",l).toggle();var k=$(".textual_passwd",l).get(0);var n=$(k).css("display");var o=$(k).attr("name");o=o.split("textpwd_")[1];var m=$("input[name='"+o+"']",l).get(0);if(n!="none"){this.fixCursorPosition(null,k);if(!$("td.pass_fix").length){$(m).addClass("focusText")}}else{$(m).removeClass("focusText");this.fixCursorPosition(null,m)}this.syncPassFields($(k).get(0),true)},fixCursorPosition:function(j,k){if(j!=null){var l=document.getElementById(j)}else{var l=k}l.focus();var h=$(l).val().length;if(h>0){if("selectionStart" in l){l.selectionStart=h;l.focus()}else{var m=document.selection.createRange();m.moveStart("character",h);m.moveEnd("character",0);m.select()}}},syncPassFieldsMask:function(q){var u=this;var w="textpwd_"+$(q).attr("name");var x=$("input."+w,q.parentNode).get(0);var v=$(q).val();var o="";var n="";u.maskPass="";for(var t=0;t<v.length;t++){var m=v.length-1;if(t>=v.length-1){o+=v[t];u.maskPass+=this.passwordChar}else{o+=this.passwordChar;u.maskPass+=this.passwordChar}}$(x).val(o);setTimeout(function(){u.syncPassFieldsFullMask(x)},1000)},syncPassFieldsFullMask:function(d){$(d).val(this.maskPass)},syncPassFields:function(v,z){var q=false;var u=null;var A=this;if(z){var B=$(v).attr("name");B=B.split("textpwd_")[1];var D=$("input[name='"+B+"']",v.parentNode.parentNode).get(0);var t=$(D).attr("id");if(t.indexOf("confirm_")>-1){var w="#"+t.replace("confirm_","");if(!$(w).length){w="#"+t.replace("_confirm","")}q=true}else{var w="#confirm_"+t}if($(w).length){u=$(w).get(0);$(u).val($(v).val());var C=$(u).attr("name");C="textpwd_"+C;var x=$("input."+C,u.parentNode.parentNode).get(0);$(x).val($(v).val())}}else{var B="textpwd_"+$(v).attr("name");var D=$("input."+B,v.parentNode).get(0)}$(D).val($(v).val());if(z){if(q){if($(u).hasClass("passwd_strength")){this.keyCounter++;var y=this.keyCounter;setTimeout(function(){A.calculateStrength(u,y)},400)}}else{if($(D).hasClass("passwd_strength")){this.keyCounter++;var y=this.keyCounter;setTimeout(function(){A.calculateStrength(u,y)},400)}}}else{if($(v).hasClass("passwd_strength")){this.keyCounter++;var y=this.keyCounter;setTimeout(function(){A.calculateStrength(u,y)},400)}}}};booking[sNSStartup].rate_guarantee={priority:9,init:function(){$("#rate_guarantee a, a.usps_rate_guarantee_link, #rate_guaranteev2 a, #ratelogo a, #terms_rateguarantee, a#guarantee_terms, #rates_feedback_invite a.jq_tooltip").live("click",function(){window.open(this.href,"RateGuarantee","status=1,toolbar=0,menubar=0,width=450,height=550,scrollbars=1");return false});return true}};booking.ensureNamespaceExists(sNSStartup);booking[sNSStartup].short_url={priority:9,loadpos:0,savecheck:0,init:function(){var create_twitter_short_url=function(oTarget){if(typeof oTarget=="object"){myPopup=window.open("","booking_com");$.get("/short_uri?url="+escape(oTarget.getAttribute("data-shorturl"))+"&aid="+booking.env.aid,function(responseText){var json=eval(responseText);myPopup.location.href=oTarget.getAttribute("href")+" http://www.booking.com/"+json.short_url})}};$(".review_useful_t").live("click",function(){create_twitter_short_url(this);return false});$(".share_t").click(function(){create_twitter_short_url(this);return false})}};booking.env.showCase=function(j){var g={baseEl:"#newsletter_deals_city",showCaseClass:".deals",navClass:".deals_nav",menuClass:".deals_menu",showCaseWidth:150,showCaseBorder:3,defSteps:3};$("ul.deals",j.baseEl).css("left","0");var j=$.extend(g,j);k();$(j.baseEl).slideToggle();function k(){$(".next",j.baseEl).click(function(){h(1)});$(".prev",j.baseEl).click(function(){h(-1)})}function h(t){$(".next",j.baseEl).unbind("click");$(".prev",j.baseEl).unbind("click");var c=j.baseEl,u=j.defSteps,v=parseInt(j.showCaseWidth)+parseInt(j.showCaseBorder);var w=parseInt(u)*parseInt(v)*parseInt(t),d=$("ul"+j.showCaseClass+":visible",c),f=d.css("width"),q=parseInt(f)/w;if(w>0){if((-1*parseInt(d.css("left")))+w<parseInt(f)){d.animate({left:"-="+w},"normal",k)}else{d.animate({left:"0"},"normal",k)}}else{if(parseInt(d.css("left"))!=0){d.animate({left:"-="+w},"normal",k)}else{k()}}}};booking.ensureNamespaceExists(sNSExperiments);booking[sNSStartup].b_site_experiment_expand_signup={priority:9,init:function(){var f=$("#newsletter_to",".footerForm"),g=f.attr("value");f.click(function(){var c=$(this);if(c.val()===g){c.val("")}else{c.select()}});f.blur(function(){var c=$(this);if(c.val()===""){c.val(g)}});$("#newsletter_button_footer").click(function(){$(this).parents("form:first").submit()});$(".signupForm").submit(function(A){A.preventDefault();$(".newsletter_ajax_error").hide();var v=booking.env,x=$(this),t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,z=$("input[name=url]",x).val(),d=$("input[name=hostname]",x).val(),y=$("input[name=aid]",x).val(),u=$("input[name=companyname]",x).val(),B=$("input[name=subscribe_source]",x).val(),c=$("input[name=to]",x).val(),w;if(c===""||!(t.test(c))){$(".newsletter_subscribe_error_invalid",x).show();return false}w="to="+c+"&url="+z+"&hostname="+d+"&aid="+y+"&companyname="+u+"&subscribe_source="+B;$.ajax({type:"POST",url:"/newslettersubscribe.json",data:w,dataType:"json",success:function(h){console.log(h);if(h.success===0){if(h.error==="denied"){$(".newsletter_subscribe_error_denied",x).show();$(".newsletter_subscribe_error_bad_unknown, .newsletter_subscribe_error_invalid, .newsletter_sub_success",x).hide();$(".userdataform").hide()}else{if(h.error==="bad_params"){$(".newsletter_subscribe_error_bad_unknown",x).show();$(".newsletter_subscribe_error_denied, .newsletter_subscribe_error_invalid, .newsletter_sub_success",x).hide();$(".userdataform").hide()}}return}else{if(h.success===1){if($("div#flashdealsbg_wrapper").length){window.location.href=v.b_nonsecure_hostname_signup+v.b_fd_searchresults_url_signup}else{$(".newsletter_sub_success",x).show();$(".userdataform").show();$("#add_location_to").val(c);booking.env.my_city_autocomplete.init();$(".newsletter_form_fields, .newsletter_subscribe_error_bad_unknown, .newsletter_subscribe_error_denied, .newsletter_subscribe_error_invalid",x).hide();if(h.has_account){var j=$("#userdataform form").eq(0);if(j){j.attr("action",j.attr("data-url-login"))}}}}}}})});$(".themeSignupForm").submit(function(c){c.preventDefault();$(".newsletter_ajax_error").hide();var d=booking.env,m=$(this),o=$("input[name=theme_id]",m).val(),n=$("input[name=th_actionth_action]",m).val(),l;l="theme_id="+o;if($("input[name=th_action]",m).val()=="remove"){this.action_url="/delete_favorite_theme"}else{this.action_url="/set_favorite_theme"}$.ajax({type:"POST",url:"http://"+d.b_hostname_signup+this.action_url,data:l,dataType:"json",success:function(h){if(h.status=="ok"){$("#newsletter_button",m).hide();$(".feedback_msg",m).hide();$(".successfulsubscription",m).show()}else{$(".feedback_msg",m).hide();$(".someerroroccured",m).show()}}})});$(".soldOutHotelSignup").submit(function(D){D.preventDefault();$(".newsletter_ajax_error").hide();var d=booking.env,A=$(this),H=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,x=$("input[name=firstname]",A).val(),w=$("input[name=lastname]",A).val(),c=$("input[name=email]",A).val(),C=$("input[name=aid]",A).val(),y=$("input[name=subscribe_to_newsletter]",A).val(),G=$("input[name=hotel_id]",A).val(),F=$("input[name=checkin]",A).val(),B=$("input[name=checkout]",A).val(),E=$("input[name=hsubscribe_source]",A).val(),z;if(c===""||!(H.test(c))){$(".hotel_availability_error_invalid").show();return false}z="firstname="+x+"&lastname="+w+"&email="+c+"&aid="+C+"&subscribe_to_newsletter="+y+"&hotel_id="+G+"&checkin="+F+"&checkout="+B+"&subscribe_source="+E;$.ajax({type:"POST",url:"http://"+d.b_hostname_signup+"/hotel_availability_newsletter/add",data:z,dataType:"json",success:function(h){console.log(h);if(h.subscribed===1){$(".contenttohide").hide();$(".hotel_availability_sub_success").show()}else{$(".hotel_availability_error_bad_unknown").show()}}})})}};booking.env.my_city_autocomplete={res_location:"/autocomplete?lang=en&aid=100000&skip_suggestions=&term=",store_locations:{},cur_index:-1,fav_game:false,init:function(){this.res_location="/autocomplete?lang="+booking.env.b_lang+"&aid="+booking.env.b_aid+"&skip_suggestions=&term=";var d=this;$("#city_add, #country_add, #userdataform #city, #fav_city").keypress(function(c){if(c.keyCode==13){c.preventDefault();return false}});$("#city_add, #country_add, #userdataform #city, #fav_city").blur(function(){oWhat=this;setTimeout(function(){d.cleanList(oWhat)},500)});$("#city_add, #country_add, #userdataform #city, #fav_city").keyup(function(h){if($(this).attr("id")=="fav_city"){d.fav_game=true}else{d.fav_game=false}if(h.keyCode&&(h.keyCode==38||h.keyCode==40||h.keyCode==13)){if(h.keyCode==38){h.preventDefault();d.cur_index--;if(d.cur_index<0){d.cur_index=$(".add_result li",this.parentNode).length-1}d.makeSelect(this);return false}if(h.keyCode==40){h.preventDefault();d.cur_index++;if($(".add_result li",this.parentNode).length<=d.cur_index){d.cur_index=0}d.makeSelect(this);return false}if(h.keyCode==13){h.preventDefault();d.clickSelect(this);return false}}else{d.cur_index=-1;d.cleanList(this);var c=$(this).val();var g=$(this).attr("search");if(c.length>1){oField=this;setTimeout(function(){d.loadList(oField,g)},100)}}});$(".favlist .remover").live("click",function(){$(this).removeClass("jq_tooltip");$("img",this).attr("alt","");d.removeFavourite(this,$(this).attr("remtype"));return false});$(".add_result li").live("mouseenter",function(){$("li",this.parentNode).removeClass("sel_fav");$(this).addClass("sel_fav");d.cur_index=$("li",this.parentNode).index(this);var c=$("input",this.parentNode.parentNode).get(0);$(c).focus()});$("#pref_city").click(function(){$(this).hide();$("#pref_city_add").show();$("#city_add").focus();return false});$("#pref_country").click(function(){$(this).hide();$("#pref_country_add").show();$("#country_add").focus();return false})},makeSelect:function(g){$(".add_result li",g.parentNode).removeClass("sel_fav");if($(".add_result li",g.parentNode).length>this.cur_index){var f=$(".add_result li",g.parentNode).get(this.cur_index);$(f).addClass("sel_fav")}},clickSelect:function(d){if($(".add_result li.sel_fav",d.parentNode).length){$(".add_result li.sel_fav a",d.parentNode).click()}else{if($(".add_result li",d.parentNode).length==1){$(".add_result li a",d.parentNode).click()}else{}}},loadList:function(j,l){var k=this;var j=j;var h=$(j).val();var m=this.res_location+h;if(l=="country"){m+="&dest_type=country"}else{if(l=="city"){m+="&dest_type=city&give_cc1=1"}}$.ajax({url:m,success:function(d){var o="";var c=false;if(!d||typeof d[l]==="undefined"){return}for(var f=0;f<d[l].length;f++){var g=d[l][f].label.replace("'","");var q="";if(d[l][f].cc1){var q=d[l][f].cc1[0]}o+='<li onclick="booking.env.my_city_autocomplete.addLocation('+f+", document.getElementById('city_link_"+f+"'), '"+d[l][f].dest_type+"', '"+g+"', '"+q+'\');return false;"><a id="city_link_'+f+'" href="#" onClick="return false;">'+d[l][f].label+"</a></li>";c=true}$(".add_result",j.parentNode).html(o);if(c){$(".add_result",j.parentNode).css({border:"1px solid #dddddd",background:"#ffffff"})}else{$(".add_result",j.parentNode).css({border:"0",background:"transparent"})}k.store_locations=d}})},cleanList:function(f){var g=this;$(".add_result",f.parentNode).html("");$(".add_result",f.parentNode).css({border:"0",background:"transparent"});g.store_locations={}},addLocation:function(G,Q,K,R,H){var P=this;var z=this.store_locations[K][G];if(K=="city"){var O=booking.env.fav_city_locations;var E=z.dest_id}else{var O=booking.env.fav_country_locations;var E=z.co_code}var A="favlocation_"+E;if($(Q).parents("#userdataform").length){var N=R.split(",");var L=N[0];if(booking.env.b_site_experiment_prefill_country){if(H!=""){if($("#country").length){$("#country").val(H)}if($("#cc1").length){$("#cc1").val(H)}}}$("#city").val(L);$("#city_id").val(E);if($(Q).parents(".save_useufi_light").length){$.ajax({type:"POST",url:"/save_my_ufi",data:{ufi:E,lang:booking.env.b_guest_country},success:function(c){var d=$(".save_useufi_light").get(0);$(d).addClass("saved_ufi")}})}P.cleanList($(Q).parents("ul").get(0))}else{var C=z.label;var J=C.split(",");if(P.fav_game){if(booking[sNSExperiments].favourites_game){booking[sNSExperiments].favourites_game.addSearchFav(E,z)}P.cleanList($(Q).parents("ul").get(0))}else{if($("#"+A).length){P.cleanList($(Q).parents("ul").get(0))}else{O[O.length]=E;this.saveFavourites(K);P.cleanList($(Q).parents("ul").get(0));var B=J[0];var F="";if(J.length>0){for(var D=1;D<J.length;D++){F+=(D>1)?",":"";F+=J[D]}}var M='<li class="roundme" id="favwrap_'+A+'">';M+='<a href="#" id="'+A+'" class="jq_tooltip remover" remtype="'+K+'" title="remove this item"><img src="/static/img/icon_cancel_trans.png" alt="Remove item" /></a>';M+='<a href="#" onclick="return false;">';if(K=="city"){M+='<span class="roundme def_city">&nbsp;</span>';M+='<span class="roundme city_img" style="background:transparent url(\'/static/img/city/'+E+"/32x32.jpg') left top no-repeat;\">&nbsp;</span>"}else{M+='<img class="roundme" src="/static/img/flags/24/'+E+'.png" alt="" />'}M+="</a>";if(K=="city"){M+='<a href="'+booking.env.b_nonsecure_hostname_signup+"/searchresults."+booking.env.b_lang+".html?city="+E+'">'+B+"</a>"}else{M+='<a href="'+booking.env.b_nonsecure_hostname_signup+"/country/"+E+"."+booking.env.b_lang+'.html">'+B+"</a>"}M+="<span>"+F+"</span>";if(K=="city"){$("#addNewCity").before(M);$("#city_add").val("")}else{$("#addNewCountry").before(M);$("#country_add").val("")}}if(booking.env.profile_map_list){if(K=="city"){var I="/static/img/city/"+E+"/32x32.jpg"}else{var I="/static/img/flags/24/"+E+".png"}}this.animateAdding(A)}}},animateAdding:function(k){var j=$("#"+k).get(0);var h=0;var g=window.setInterval(function(){h++;var c=255-(h*5);if(h>51){c=(h*5)-255}if(h>101){$(j.parentNode).css({background:""});window.clearInterval(g)}else{$(j.parentNode).css({background:"rgb(255,"+c+","+c+")"})}},10)},removeFavourite:function(t,l){var m=$(t).attr("id").split("favlocation_")[1];var u=(l=="city")?booking.env.fav_city_locations:booking.env.fav_country_locations;var q=-1;for(var n=0;n<u.length;n++){if(u[n]==m){q=n}}if(q!=-1){u.splice(q,1);this.saveFavourites(l)}var v=$(t).attr("id");var o="favwrap_"+v;$("#"+o).animate({opacity:0},600,function(){$(this).html("");var c=this;setTimeout(function(){$(c).remove()})})},saveFavourites:function(h){var j=(h=="city")?"cities?ufis":"countries?cc1s";var m=(h=="city")?booking.env.fav_city_locations:booking.env.fav_country_locations;var k="/set_favorite_"+j+"=";for(var l=0;l<m.length;l++){if(l>0){k+=","}k+=m[l]}$.ajax({url:k,type:"POST",success:function(c){if(c.status&&c.status=="auth_needed"){document.location.reload(true)}}})}};function mySlideToggle(j,l){var k=$(j),m=k.data("originalHeight"),h=k.is(":visible");if(arguments.length==1){l=!h}if(l==h){return false}if(!m){m=k.show().height();k.data("originalHeight",m);if(!h){k.hide().css({height:0})}}if(l){k.show().animate({height:m},{duration:250})}else{k.animate({height:0},{duration:250,complete:function(){k.hide()}})}}booking[sNSStartup].social_network={priority:9,init:function(){var d=this;$("#social_network_bookmarks li a").mouseover(function(){$("#share_on").text(this.name)});if(booking.env.b_site_experiment_favorites_bar){$(".socnet_mailafriend").live("click",function(){d.showMailAFriend(this.href);return false})}else{$(".socnet_mailafriend").click(function(){d.showMailAFriend(this.href);return false})}},showMailAFriend:function(q){var n,t,k,o,l,m;if(booking.env.b_is_ie6){l='style="height: 453px;"';m='style="height: 435px;width: 618px;"'}else{l="";m=""}n="maf_wrapper",t='<div id="maf_wrapper" class="iframe"><div id="maf_shadow" '+l+'></div><div id="maf_iframe_wrapper"><iframe id="maf_iframe" '+m+' src="'+q+'" frameborder="0"></iframe></div></div>';if($("#"+n).length){$("#"+n).show()}else{$(document.body).append(t)}k=$(window)[0];o=(document.body.scrollTop==0)?(k.pageYOffset)?k.pageYOffset:(document.body.parentElement)?document.body.parentElement.scrollTop:0:document.body.scrollTop;$("#"+n).css("top",o+($(k).height()/2-$("#"+n).height()/2));if(booking.env.b_site_experiment_event_tracking&&typeof(pageTracker)!="undefined"){booking.google.trackEvent(booking.google.clickTracker,"Mail A Friend","Popup mail_a_friend_redesign")}}};booking.env.Tabs=function(g){var f={baseEl:"#newsletter_deals_city",menuEl:".deals_menu",contentEl:".deals_wrapper",dealsEl:".deals",navEl:".nav_menu",defaultEl:1};var g=$.extend(f,g);$(g.menuEl+" li:nth-child("+g.defaultEl+")").addClass("active").show();$(g.contentEl+" ul.deals:nth-child("+g.defaultEl+")").show();$("li",g.menuEl).click(function(){$("li",g.menuEl).removeClass("active");$(this).addClass("active");$(g.dealsEl,g.contentEl).hide();var c=$(this).find("a").attr("href");$(c).show();return false});$(g.contentEl,g.baseEl).show()};(function(d){d.fn.bgIframe=d.fn.bgiframe=function(g){if(d("html.b_msie_6").length){g=d.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},g||{});var c=function(f){return f&&f.constructor==Number?f+"px":f},h='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+g.src+'"style="display:block;position:absolute;z-index:-1;'+(g.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(g.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":c(g.top))+";left:"+(g.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":c(g.left))+";width:"+(g.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":c(g.width))+";height:"+(g.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":c(g.height))+';"/>';return this.each(function(){if(d("> iframe.bgiframe",this).length==0){this.insertBefore(document.createElement(h),this.firstChild)}})}return this}})(jQuery);(function(S){var V={},K,J,N,P=S.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),L=false,M=function(m,l){var g=S(m),d=g.attr("id"),j,h,c=g.get(0).tagName.toLowerCase(),n,k,f;if(d){k=S("#"+d).index(g);f='jQuery("#'+d+'").eq('+k+")"}else{j=g.closest("[id]");h=j.attr("id");n=S("#"+h).index(j);k=j.find(c).index(g);f='jQuery("#'+h+'").eq('+n+').find("'+c+'").eq('+k+")"}return"(function(){var ele="+f+"."+l+'(),offset=ele.offset();$("#tooltip").css({top: offset.top + "px",left: (offset.left + 70) + "px"})}())'};S.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){S.tooltip.blocked=!S.tooltip.blocked}};S.fn.extend({tooltip:function(c){c=S.extend({},S.tooltip.defaults,c);var d=function(){S.data(this,"tooltip",c);this.tOpacity=V.parent.css("opacity");this.tooltipText=this.getAttribute("data-title")||this.title;this.removeAttribute("title");this.alt=""};I(c);if(typeof booking.env.b_site_experiment_ipad_improvements!="undefined"&&booking.env.b_site_experiment_ipad_improvements){return this.each(d).mouseover(G).bind("touchstart",function(){S(this).mouseover()}).mouseout(O).bind("touchend",function(){S(this).mouseout()}).click(O)}else{if(booking.env.touch_os){return this.each(d).click(G)}else{if(!S(this).hasClass("remover")){return this.each(d).mouseover(G).mouseout(O)}else{return this.each(d).mouseover(G).mouseout(O).click(O)}}}},fixPNG:P?function(){return this.each(function(){var c=S(this).css("backgroundImage");if(c.match(/^url\(["']?(.*\.png)["']?\)$/i)){c=RegExp.$1;S(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+c+"')"}).each(function(){var d=S(this).css("position");if(d!="absolute"&&d!="relative"){S(this).css("position","relative")}})}})}:function(){return this},unfixPNG:P?function(){return this.each(function(){S(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){S(this)[S(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function I(c){if(V.parent){return}if(booking.env.tooltip_traversing){V.parent=S('<div id="'+c.id+'"><div class="shadow"><h3></h3></div></div>').appendTo(document.body).hide()}else{V.parent=S('<div id="'+c.id+'" style="width: '+c.width+'px;"><div class="shadow"><h3></h3></div></div>').appendTo(document.body).hide()}if(booking.env.touch_os){V.parent.bind("click",function(){if(S.tooltip.blocked){return}if(N){clearTimeout(N)}K=null;S(this).removeClass(c.extraClass).fadeOut().css("opacity","")})}if(S.fn.bgiframe){V.parent.bgiframe()}V.title=S("h3",V.parent);V.body=S("div.body",V.parent);V.url=S("div.url",V.parent)}function D(c){return S.data(c,"tooltip")}function C(c){if(D(this).delay){N=setTimeout(B,D(this).delay)}else{B()}L=!!D(this).track;S(document.body).bind("mousemove.tooltip",Q);Q(c)}var U=false;var H={};var F;function G(){if("ontouchstart" in document.documentElement){booking.env.trackExperiment(booking.env.js_experiment_tracking.remove_hotel_img_tooltip_sr);if(booking.env.b_site_experiment_remove_hotel_img_tooltip_sr){window.location=S(this).attr("href");return false}}if(S.tooltip.blocked||this==K||(!this.tooltipText&&!D(this).bodyHandler)){return}J=this.tooltipText;K=this;if(S(this).hasClass("hotel_thumbs_sprite")||S(this).hasClass("hotel_variable_size")||S(this).attr("id")=="photo_wrapper"){U=true;var d=S(window);var h=d.width();var f=d.height();var j=200;if(h>1600&&f>900){j=600}else{if(h>1360&&f>765){j=500}else{if(h>1120&&f>630){j=400}else{if(h>880&&f>495){j=300}else{if(h>760&&f>428){j=250}}}}}J=J.replace(/\/max(\d+)\//,"/max"+j+"/")}if(S(this).hasClass("with_featured_review")){booking.env.trackExperiment(booking.env.js_experiment_tracking.sr_featured_review_in_photo_block)}if(S(this).hasClass("sr_hotel_preview_track")){if(booking.env.b_site_experiment_sr_hotel_preview_on_hover){U=true}booking.track.exp(booking.env.js_experiment_tracking.sr_hotel_preview_on_hover)}if(S(this).hasClass("usps_rate_guarantee_link")||S(this).is("#rate_guarantee a")){booking.env.trackExperiment(booking.env.js_experiment_tracking.generalised_bpg)}if(J.indexOf("<img")===0){U=true;R()}if(S(this).hasClass("show_map")||S(this).hasClass("mouse_hover_rackrate")||S(this).hasClass("deals_label_content")||S(this).hasClass("icon_minibubble")){U=true}if(D(this).bodyHandler){V.title.hide();var c=D(this).bodyHandler.call(this);if(c.nodeType||c.jquery){V.title.empty().append(c)}else{V.title.html(c)}V.title.show()}else{if(D(this).showBody){var g=J.split(D(this).showBody);V.title.html(g.shift()).show();V.body.empty();for(var k=0,l;(l=g[k]);k++){if(k>0){V.body.append("<br/>")}V.body.append(l)}V.body.hideWhenEmpty()}else{V.title.html(J).show();V.body.hide()}}if(D(this).showURL&&S(this).url()){V.url.html(S(this).url().replace("http://","")).show()}else{V.url.hide()}V.parent.addClass(D(this).extraClass);if(D(this).fixPNG){V.parent.fixPNG()}C.apply(this,arguments);if(booking.env.touch_os){S("#tooltip h3").append("<img src='//q.bstatic.com/static/img/experiments/filter_remove.gif' alt='Close window' style='position: absolute; right: 8px; top: 8px;' />").css("padding-right","22px")}if(typeof ClickTaleExec==="function"){ClickTaleExec(M(this,"mouseover"))}}function R(){var d=J.match(/src=['"]([^'"]+)['"]/);if(!d||H[d[1]]){return}var f=J;var c=document.createElement("img");J='<img src="//r.bstatic.com/static/img/experiments/ajax-loader-black.gif" class="tooltip_loader" style="padding: 25px;"/>';c.onload=function(){H[this.src]=true;if(this.src!==F){return}J=f;V.title.html(J);V.parent.css("width",this.width+20);if(V.parent.is(":visible")){Q()}};F=d[1];c.src=d[1]}function B(){var g,c;N=null;if(!K||!D(K)){return}if(booking.env.tooltip_traversing){g=D(K);c=g.width;c=(typeof c==="function")?c.apply(K):c;if(c){V.parent[0].style.width=c+"px"}else{V.parent[0].style.width="auto"}}if((!P||!S.fn.bgiframe)&&D(K).fade){if(V.parent.is(":animated")){V.parent.stop().show().fadeTo(D(K).fade,K.tOpacity)}else{V.parent.is(":visible")?V.parent.fadeTo(D(K).fade,K.tOpacity):V.parent.fadeIn(D(K).fade)}}else{V.parent.show()}if(S(".track_clear_meal_plan",V.parent).length){booking.env.trackExperiment(booking.env.js_experiment_tracking.clearer_meal_plan)}if(V.parent.find(".track_cancellation_policy_free_hightlight").length){booking.env.trackExperiment(booking.env.js_experiment_tracking.cancellation_policy_free_hightlight)}V.parent.removeClass("niceBlackBorderTooltip blackBorderTooltip");if(D(K).width){V.parent.css("width",D(K).width+"px");if(V.parent.find("#map_hover_preview_text").length){V.parent.addClass(booking.env.b_site_experiment_nice_tooltips==1?"niceBlackBorderTooltip":"blackBorderTooltip")}}else{var f=V.parent.find("img:eq(0)");var d=f.attr("src");if(d){V.parent.addClass(booking.env.b_site_experiment_nice_tooltips==1?"niceBlackBorderTooltip":"blackBorderTooltip")}V.parent.css("width",H[d]?(f.width()+20):"")}Q()}function Q(f){if(S.tooltip.blocked){return}if(f&&f.target&&f.target.tagName=="OPTION"){return}if(!L&&V.parent.is(":visible")){S(document.body).unbind("mousemove.tooltip")}if(K==null){S(document.body).unbind("mousemove.tooltip");return}if(booking.env.bse_tooltip_new_pos||U){T(f);return}var c=V.parent[0].offsetLeft;var d=V.parent[0].offsetTop;if(f){if(booking.env.touch_os){c=S(K).offset().left;d=S(K).offset().top}else{if(!D(K)){S(document.body).unbind("mousemove.tooltip");if(V&&"parent" in V&&V.parent[0]&&V.parent[0].style.display!=="none"){V.parent[0].style.display="none"}return false}if(booking.env.tooltip_traversing){var g=D(K).left;g=(typeof g==="function")?g.apply(K):g;c=f.pageX+g}else{c=f.pageX+D(K).left}d=f.pageY+D(K).top}var j="auto";if(D(K).positionLeft){j=S(window).width()-c;c="auto"}V.parent.css({left:c,right:j,top:d})}if(booking.env.touch_os){if(c>700){c=c-150}else{if(c>600){c=c-100}}V.parent.css({left:c+"px"})}else{var k=E(),h=V.parent[0];if(k.x+k.cx<h.offsetLeft+h.offsetWidth){c-=h.offsetWidth+20+D(K).left;V.parent.css({left:c+"px"}).addClass("viewport-right")}if(k.y+k.cy<h.offsetTop+h.offsetHeight){d-=h.offsetHeight+20+D(K).top;V.parent.css({top:d+"px"}).addClass("viewport-bottom")}if(h.offsetLeft<k.x){c=10;V.parent.css({left:c+"px"}).addClass("viewport-left")}}}function T(f){var h=E();var g=V.parent[0];var j=(S.browser.msie&&parseInt(S.browser.version,10)>=10);var c=f?f.pageX+12:g.offsetLeft;var d=f?(j?f.layerY:f.pageY)+12:g.offsetTop;if(h.x+h.cx<c+g.offsetWidth){if(booking.env.bse_tooltip_new_pos){c=c-g.childNodes[0].offsetWidth-24}else{c=c-g.offsetWidth-24}if(c<h.x+5){c=5}}if(h.y+h.cy<d+g.offsetHeight+5){d=h.y+h.cy-g.offsetHeight-5}V.parent.css({left:c,top:d})}function E(){return{x:S(window).scrollLeft(),y:S(window).scrollTop(),cx:S(window).width(),cy:S(window).height()-11}}function O(c){if(S.tooltip.blocked){return}if(N){clearTimeout(N)}K=null;var d=D(this);function f(){V.parent.removeClass(d.extraClass).hide().css("opacity","")}if((!P||!S.fn.bgiframe)&&d.fade){if(V.parent.is(":animated")){V.parent.stop().fadeTo(d.fade,0,f)}else{if(booking.env.tooltip_hide_without_fadeout){V.parent.stop().hide()}else{V.parent.stop().fadeOut(d.fade,f)}}}else{f()}if(D(this).fixPNG){V.parent.unfixPNG()}if(typeof ClickTaleExec==="function"){ClickTaleExec(M(this,"mouseout"))}}if(booking.env.b_site_experiment_sr_hotel_preview_on_hover){(function(){var x,k=S("[data-trans-from]").data("trans-from"),f,d=booking.env,A={},w={},y=d.b_selected_currency,g=d.b_aid,h=function(){var X=";use_flat=1;detail=0;prices=1;lang="+d.b_lang_for_url+";currency="+y+";aid="+d.b_aid+";cc1="+d.ip_country,Y;if(d.user_has_dates){X+=";checkin="+d.b_checkin_date+";checkout="+d.b_checkout_date+";currency="+d.map_vars.b_currencycode}if(d.is_us_visitor||d.new_min_rates){X+=";fav_hot_mins=1"}if(d.b_site_variant_localize_price_number_format){X+=";fav_hot_mins=1"}h=function(){return X};return X},v="//r.bstatic.com/static/img/transparent.png",u=S(document.body),t=window.location.hostname,c=t&&/\.dev\./.test(t)?"http://"+t:"http://v.booking.com",l=d.user_has_dates?function(W){return"/hotel_onmap_detail?hotel_id="+W+h()}:function(W){return c+"/sr_hotel_min_rates_json?aid="+g+"&hotel_id="+W+"&lang=en&currency="+y},m=function(Z,aa,Y){A[Z]=aa;S("#min-rates-"+Z).html(aa);Y.tooltipText=Y.tooltipText.replace('<div data-hotel-id-replace="true" id="min-rates-'+Z+'"></div>',aa)},o=d.user_has_dates?function(Y,X){S.get(l(Y),function(W){var ag=((W.b_hotels||{})[Y]||{prices:false}).prices,af,ak=[],aj=0,ai="",ah,ae;if(!ag){return}for(ah=0,ae=ag.length;ah<ae;ah+=1){af=ag[ah];ak[af.room_persons]=af.room_price}for(ah=0,ae=ak.length;ah<ae;ah+=1){af=ak[ah];if(af){aj+=1;ai+='<div class="min_rates_unit"><div class="min_rate_occ min_rate_for_'+ah+'"></div><div class="min_rate_price"><p>'+k+'</p><p class="sr_minreate_price">'+af+"</p></div></div>"}if(aj===3){break}}ai='<div class="min_rates_container">'+ai+'<div style="clear:both;"></div></div>';m(Y,ai,X)})}:function(Y,X){S.ajax({url:l(Y),dataType:"jsonp",jsonp:"fname",success:function(W){var aj,ag=[],af,ae,ai="",ak=W.min_rates_with_format,ah=W.min_rates;for(aj in ak){if(ak.hasOwnProperty(aj)){ag[aj]={occupancy:aj,price:ak[aj]}}}if(!!ag[1]&&!!ag[2]&&ah[1]>ah[2]){ag[1].price=ag[2].price}for(i=0,ae=ag.length;i<ae;i+=1){af=ag[i];if(af){ai+='<div class="min_rates_unit"><div class="min_rate_occ min_rate_for_'+af.occupancy+'"></div><div class="min_rate_price"><p>'+k+'</p><p class="sr_minreate_price">'+af.price+"</p></div></div>"}}ai='<div class="min_rates_container">'+ai+'<div style="clear:both;"></div></div>';m(Y,ai,X)}})},n=function(ac){var ab=S('<div style="position: fixed; left: -1000px; top: -1000px"></div>'),ad,ae=S(ac),aa=ae.parent();u.append(ab.append(ac));ad={width:ae.width(),height:ae.height()};aa.append(ae);ab.remove();return ad},q=function(af){var ag=af.height/af.width,ab=Math.round(Math.max(200/ag,300)),ac=Math.round(ag*ab),ae=0,ad=0;if(ac>203){ae=Math.round((ac-200)/2)}if(ab>303){ad=Math.round((ab-300)/2)}return{top:"-"+ae+"px",left:"-"+ad+"px",width:ab+"px",height:ac+"px"}},z=function(ae,ad,ab,ag){var af=new Image(),ac=S(ad);ad.src=v;if(ab){ac.css({width:"300px",height:"200px"})}af.onload=function(){var W;ad.src=ae;if(ab){W=q(n(this));ac.css(W);if(ag.tooltipText){ag.tooltipText=ag.tooltipText.replace('data-replace-target="true"','style="top:'+W.top+"; left:"+W.left+"; width:"+W.width+"; height:"+W.height+'"')}ag.sr_hotel_preview_done=true}};af.src=ae;return af},j=function(aa){var Z=aa.getAttribute("data-hid"),Y=A[Z];if(!Z){return}if(Y){S("#min-rates-"+Z).html(Y);return}if(!(Z in w)){w[Z]=true;o(Z,aa)}};f=G;x=function(){var X=this,Y=X.getAttribute("data-hid");f.call(X);if(Y){j(X);if(!X.sr_hotel_preview_done){V.parent.find("img.sr_hotel_preview_loading").each(function(){z(this.src,this,/sr_hotel_preview_main_photo/.test(this.className),X)})}}};G=x})()}})(jQuery);(function(){var d=booking[sNSStartupLoad].tooltip_3={priority:8,lazy:true,init:function(){if(booking.env.bse_tooltip_delegate){this.delegateTooltip()}else{this.addTooltip(document)}return true},delegateTooltip:function(){$("body").delegate(".jq_tooltip,.jq_tooltippex","mouseenter",function(m){var n=$(this);var l=n.data();if(!l.initialized){n.data("initialized",true);var k=n.hasClass("jq_tooltippex"),c=n.hasClass("policy_name")||n.hasClass("policy_name_tt"),o=n.attr("rel")||0;n.tooltip({bodyHandler:c?function(){return $(this).siblings(".differing_policies").html()}:false,showURL:false,track:true,opacity:k?false:1,fade:k?false:250,width:c?400:o,left:c?-200:-o/2,top:18,extraClass:k?"opaque":false});n.mouseover()}})},setupTooltip:function(c){$(".jq_tooltip",c).tooltip({showURL:false,track:true,opacity:1,fade:250,width:function(){return this.getAttribute("rel")||0},left:function(){return -(this.getAttribute("rel")||0)/2},top:18})},setupTooltippex:function(c){$(".jq_tooltippex",c).each(function(){var g=$(this),h=g.attr("rel")||0;g.tooltip({showURL:false,track:true,width:h,left:-(h/2),top:18,extraClass:"opaque"})})},setupPolicy:function(c){$(".policy_name.jq_tooltip, .policy_name_tt.jq_tooltip",c).tooltip({bodyHandler:function(){return $(this).siblings(".differing_policies").html()},showURL:false,track:true,opacity:1,fade:250,width:400,left:-200,top:18})},addTooltip:function(c){this.setupTooltip(c);this.setupTooltippex(c);this.setupPolicy(c)}};if("ontouchstart" in document.documentElement){d.setupTooltip=function(c){$(".jq_tooltip",c).each(function(){var j=$(this),h=j.attr("rel"),k=(h)?(h.match(/\d+/)||0):0;if(!j.hasClass("urgency_link")){j.tooltip({showURL:false,track:false,opacity:1,fade:250,width:k,extraClass:"opaque"})}})};d.setupTooltippex=function(c){$(".jq_tooltippex",c).each(function(){var g=$(this),h=g.attr("rel");g.click(function(){return false});if(!booking.env.b_site_experiment_remove_hotel_img_tooltip_sr){if(g.get(0).tagName.toLowerCase()==="img"){g.wrap("<span class='touchHoverBox' />");g.parent().append("<img src='//q.bstatic.com/static/img/icons/imgplus.gif' class='touchHoverPlus' />")}else{g.addClass("touchHoverBox").append("<img src='//q.bstatic.com/static/img/icons/imgplus.gif' class='touchHoverPlus' />")}}g.tooltip({showURL:false,track:false,opacity:1,fade:250,width:h,extraClass:"opaque"})})};d.setupPolicy=function(c){$(".policy_name.jq_tooltip, .policy_name_tt.jq_tooltip",c).tooltip({bodyHandler:function(){return $(this).siblings(".differing_policies").html()},showURL:false,track:false,opacity:1,fade:250,width:400,extraClass:"opaque"});$("body, .show_map").click(function(){$("#tooltip").hide()});$("sup.jq_tooltip, tr.dotter").removeAttr("onclick")}}if(booking.env.b_site_experiment_tooltip_on_ready){booking[sNSStartup].tooltip_3=d}})();booking.ensureNamespaceExists(sNSStartup);booking[sNSStartup].touch_device_check={priority:5,init:function(){booking.env.touch_os=("ontouchstart" in document.documentElement)?true:false;return true}};booking[sNSStartup].z_track_searchbox=(function(){var l=booking.env.b_site_experiment_track_custom_var?"v1":"base";var n=function(){_gaq.push(["_setCustomVar",20,"track_custom_var",l,2])};var j=function(){var g=$("#availcheck").is(":checked")?1:0;var d={};var f={};d.day=$("#checkin_day").val();d.month=(($("#checkin_year_month").val()).split("-")[1])-1;d.year=($("#checkin_year_month").val()).split("-")[0];d.date=new Date(d.year,d.month,d.day);f.day=$("#checkout_monthday").val();f.month=(($("#checkout_year_month").val()).split("-")[1])-1;f.year=($("#checkout_year_month").val()).split("-")[0];f.date=new Date(f.year,f.month,f.day);if(d.date.getMonth()){var c=f.date.getTime()-d.date.getTime();var h=(c/1000)/60/60/24;booking.google.trackEvent(booking.google.clickTracker,"omni_search "+l+" No of days",h)}else{var h=0}booking.google.trackEvent(booking.google.clickTracker,"omni_search "+l+" Dates set",h);booking.google.trackEvent(booking.google.clickTracker,"omni_search "+l+" I have no dates checked",g)};var m=function(){var d=$("input[name=dest_type]").length>0?1:0;var f=$("body").hasClass("index")||!$("body").hasClass("landing");if(f&&$("#destination").length>0){var c=($("#destination").length>0)?$("#destination").val():"";if(c.length>0){booking.google.trackEvent(booking.google.clickTracker,"omni_search "+l+" Search String Length",c.length)}else{booking.google.trackEvent(booking.google.clickTracker,"omni_search "+l+" No Search String",0)}booking.google.trackEvent(booking.google.clickTracker,"omni_search "+l+" Autocompleted",d)}};var o=function(){$("#frm").submit(function(){m();j()})};var k=function(){n();o()};return{init:k}}());booking.run("tracking_for_smart_deal_tooltip_alt_translation").onReady(function(){var g=$(".smart_deal_tooltip_alt_tr_tracking_position"),f=function(){booking.track.exp("smart_deal_tooltip_alt_translation");g.unbind("mouseenter",f)};if(!g.length){return}g.bind("mouseenter",f)});$("#currencyChange, #languageChange").hide();$("#current_currency .description, #current_currency .pointer, #current_language .description, #current_language .pointer").show();var currency=booking.currencyDropdownOptions="";$("#currencyChange select option").each(function(){var h=$(this);var j=$(this).attr("data-label");var m=$(this).attr("value");var l;var k="<span class='selsymbol'>"+j+"</span><span class='seldescription'>"+h.text()+"</span>";if(h.hasClass("currency_split")){l="<strong class='currency_split'>"+h.text()+"</strong>"}else{l="<a ";if(!h.hasClass("selected_currency")){l+="href='"+$("#link_with_currency").val()+"="+m;l+="'"}l+=">"+k+"</a>"}if(h.hasClass("selected_currency")){booking.currencyDropdownOptions+="<li class='selected_currency'>"+l+"</li>"}else{booking.currencyDropdownOptions+="<li>"+l+"</li>"}});$("#current_currency_foldout ul").append(booking.currencyDropdownOptions);var language="";$("#languageChange select option").each(function(){var j=$(this);var h=$(this).attr("data-label");var k=$(this).attr("value");var m;var l="<span class='selsymbol'><span class='flag_16 "+h+"'>&nbsp;</span></span><span class='seldescription'>"+j.text()+"</span>";if(j.hasClass("currency_split")){m="<strong class='currency_split'>"+j.text()+"</strong>"}else{m="<a href='"+$("#link_with_language").val()+"="+k+"'>"+l+"</a>"}if(j.hasClass("selected_country")){language+="<li class='selected_country'>"+m+"</li>"}else{language+="<li>"+m+"</li>"}});$("#current_language_foldout ul").append(language);booking[sNSStartup].viewed_hotels={priority:9,fullListShowed:false,minListSize:5,lastviewTimer:null,loadStart:null,init:function(){this.loadStart=new Date();var j=this,k="",l=false;if(document.getElementById("LastViewedHotels")){try{this.minListSize=parseInt($("#LastViewedHotels").attr("min"))}catch(h){}$("a.remove_hotel").click(function(){var c=$(this).attr("href").substring(1);$.ajax({url:"/hotel_history",type:"DELETE",data:{hotel_id:c}});booking[sNSStartup].viewed_hotels.cleanupHistoryList(this);this.blur();l=true;return false});$("#compare_mvh").click(function(){if(l){$.ajax({url:"/last_viewed_hotels",dataType:"json",async:false,success:function(c){var f=c.length;for(var d=0;d<f;d++){k+=c[d].hotel_id.toString()+","}window.location=booking.env.compare_my_viewed_hotels_link+"hotel_ids="+k}})}else{window.location=$(this).attr("href")}});if($("#showAllHistory").length){$("#showAllHistory").click(function(){booking[sNSStartup].viewed_hotels.showAll();this.blur();return false})}if($("#removeAllHistory").length){$("#removeAllHistory").click(function(){booking[sNSStartup].viewed_hotels.removeAll(true);this.blur();return false})}}if($(".lastVisitdate").length){$(".lastVisitdate").parents("li").mouseenter(function(){var c=$(".lastVisitdate",this);$(c).slideDown("fast");$(this).addClass("selectedVisit");j.updateTime(c);j.lastviewTimer=window.setInterval(function(){j.updateTime(c)},1000)});$(".lastVisitdate").parents("li").mouseleave(function(){window.clearInterval(j.lastviewTimer);$(".lastVisitdate",this).slideUp("fast");$(this).removeClass("selectedVisit")})}return true},updateTime:function(d){var F=this.loadStart;var h=new Date();if($(d).attr("sh")==undefined){$(d).attr("sd",$(".viewed_d",d).text());$(d).attr("sh",$(".viewed_h",d).text());$(d).attr("sm",$(".viewed_m",d).text());$(d).attr("ss",$(".viewed_s",d).text());if($(d).attr("sd")==""){$(d).attr("sd","0")}if($(d).attr("sh")==""){$(d).attr("sh","0")}if($(d).attr("sm")==""){$(d).attr("sm","0")}if($(d).attr("ss")==""){$(d).attr("ss","0")}}var C=0;var z=0;var w=0;var m=0;var D=h.getSeconds()-F.getSeconds();if(D<0){D=60-F.getSeconds()+h.getSeconds();C=1}var A=h.getMinutes()-F.getMinutes()-C;if(A<0){A=60-F.getMinutes()+h.getMinutes()-C;z=1}var x=h.getHours()-F.getHours()-z;if(x<0){x=24-F.getHours()+h.getHours()-z;w=1}if(x>24){x=x-24;m=1-w}var y=parseInt($(d).attr("sh"))+x;var B=parseInt($(d).attr("sm"))+A;var E=parseInt($(d).attr("ss"))+D;if(E>59){E=E-60;B=B+1}if(B>59){B=B-60;y=y+1}if(y>23){y=y-24;m=m+1}if(E==0){$(".viewed_s",d).text("");$(".viewed_seconds",d).removeClass("show");$(".viewed_second",d).removeClass("show")}else{$(".viewed_s",d).text(E);if(E==1){$(".viewed_seconds",d).removeClass("show");$(".viewed_second",d).addClass("show")}else{$(".viewed_seconds",d).addClass("show");$(".viewed_second",d).removeClass("show")}}if(B==0){$(".viewed_m",d).text("");$(".viewed_minutes",d).removeClass("show");$(".viewed_minute",d).removeClass("show")}else{$(".viewed_m",d).text(B);if(B==1){$(".viewed_minutes",d).removeClass("show");$(".viewed_minute",d).addClass("show")}else{$(".viewed_minutes",d).addClass("show");$(".viewed_minute",d).removeClass("show")}}if(y==0){$(".viewed_h",d).text("");$(".viewed_hours",d).removeClass("show");$(".viewed_hour",d).removeClass("show")}else{$(".viewed_h",d).text(y);if(y==1){$(".viewed_hours",d).removeClass("show");$(".viewed_hour",d).addClass("show")}else{$(".viewed_hours",d).addClass("show");$(".viewed_hour",d).removeClass("show")}}if(m==0){$(".viewed_d",d).text("");$(".viewed_days",d).removeClass("show");$(".viewed_day",d).removeClass("show")}else{$(".viewed_d",d).text(m);if(m==1){$(".viewed_days",d).removeClass("show");$(".viewed_day",d).addClass("show")}else{$(".viewed_days",d).addClass("show");$(".viewed_day",d).removeClass("show")}}},cleanupHistoryList:function(f){var g=this.minListSize;$(f).parent().fadeOut(500,function(){$(f).parents("li").remove();var c=$("#LastViewedHotels ul.lastViewedList li");if(!c.length){booking[sNSStartup].viewed_hotels.removeAll(false)}if(c.length<2){$(".hotel_comparison_link").hide();$("#share_hotel_history").css("borderTop","none")}if(c.length>=g){var d=c.get(g-1);$(d).fadeIn(1000)}if(document.getElementById("showAllHistory")){if(c.length<=g){$("#moreHistoryLinkWrapper").hide()}}})},showAll:function(){var f=$("#LastViewedHotels ul.lastViewedList li");var g=this.minListSize;if(!booking[sNSStartup].viewed_hotels.fullListShowed){for(i=g-1;i<f.length;i++){$(f[i]).fadeIn(500)}booking[sNSStartup].viewed_hotels.fullListShowed=true}else{for(i=g;i<f.length;i++){$(f[i]).fadeOut(500)}booking[sNSStartup].viewed_hotels.fullListShowed=false}booking[sNSStartup].viewed_hotels.switchCaption()},removeAll:function(d){if(d){$.ajax({url:"/hotel_history",type:"DELETE",data:{hotel_id:-1}})}$("#LastViewedHotels").fadeOut(500,function(){$(this).remove()})},switchCaption:function(){if(booking[sNSStartup].viewed_hotels.fullListShowed){$("#showAllHistory .showLink").hide();$("#showAllHistory .hideLink").show()}else{$("#showAllHistory .showLink").show();$("#showAllHistory .hideLink").hide()}}};booking[sNSStartup].worldmap={priority:8,init:function(){if(!$("#map_holder").length){return}var g=this;var f;var h;this.oldid=$("#continent_list a.selected").attr("id").split("list_continent_")[1];for(h=1;h<10;h++){$("#continent_"+h).mouseover(function(){clearTimeout(f);g.curid=this.id.split("continent_")[1];f=setTimeout(function(){g.togleContinents()},300)});$("#continent_"+h).click(function(){return false});$("#list_continent_"+h).mouseover(function(){clearTimeout(f);g.curid=this.id.split("list_continent_")[1];f=setTimeout(function(){g.togleContinents()},300)});$("#list_continent_"+h).click(function(){return false})}$("#country_wrapper").mouseenter(function(){g.curid=g.oldid});$("#countrylist_10 li, #countrylist_2 li").appendTo("#countrylist_1");$("#countrylist_7 li").appendTo("#countrylist_8")},togleContinents:function(){if(this.curid==this.oldid){return}if(this.oldid){$("#link_continent_"+this.oldid).hide();$("#list_continent_"+this.oldid).removeClass("selected");$("#countrylist_"+this.oldid).hide()}this.showContinent()},showContinent:function(){$("#link_continent_"+this.curid).fadeIn(300);$("#list_continent_"+this.curid).addClass("selected");$("#countrylist_"+this.curid).show();this.oldid=this.curid}};booking[sNSStartup].worldMapV2={priority:8,init:function(){if(!$("#map_holder_v2").length){return}booking.track.onView(".v2_worldmap").exp(booking.env.js_experiment_tracking.continent_lp_wrapper);var g=this;var f;var h;if(booking.env.b_site_experiment_continent_lp_wrapper){this.oldid=0}else{this.oldid=$("#map_holder_v2 h3.selected").attr("id").split("link_continent_")[1]}$("#world_map_v2 area").hover(function(){var c=$(this).attr("id");var d=parseInt(c.split("_")[1]);$("#link_continent_"+d).stop(true,true).fadeIn(200);$("#list_continent_"+d).addClass("hovered")},function(){var c=$(this).attr("id");var d=parseInt(c.split("_")[1]);if(!$("#link_continent_"+d).hasClass("selected")){$("#link_continent_"+d).stop(true,true).hide()}$("#list_continent_"+d).removeClass("hovered")});$("#world_map_v2 area").click(function(){if(booking.env.b_site_experiment_continent_lp_wrapper){booking.google.trackEvent(booking.google.clickTracker,"Continent-page",$(this).attr("id"));window.location=$(this).attr("data-href")}else{thisid=$(this).attr("id");g.curid=parseInt(thisid.split("_")[1]);g.togleContinents();return false}});$(".contlist_v2 li a").hover(function(){var c=$(this).attr("id");var d=parseInt(c.split("list_continent_")[1]);$("#link_continent_"+d).stop(true,true).fadeIn(200);$("#list_continent_"+d).addClass("hovered")},function(){var c=$(this).attr("id");var d=parseInt(c.split("list_continent_")[1]);if(!$("#link_continent_"+d).hasClass("selected")){$("#link_continent_"+d).stop(true,true).hide()}$("#list_continent_"+d).removeClass("hovered")});$(".contlist_v2 li a").click(function(){if(booking.env.b_site_experiment_continent_lp_wrapper){booking.google.trackEvent(booking.google.clickTracker,"Continent-page",$(this).attr("data-id"))}else{thisid=$(this).attr("id");g.curid=parseInt(thisid.split("list_continent_")[1]);g.togleContinents();return false}});$("#countrylist_10 li, #countrylist_2 li").appendTo("#countrylist_1");$("#countrylist_7 li").appendTo("#countrylist_8")},togleContinents:function(){if(this.curid==this.oldid){return}if(this.oldid){$("#link_continent_"+this.oldid).hide();$("#link_continent_"+this.oldid).removeClass("selected");$("#list_continent_"+this.oldid).removeClass("selected");$("#continent_name_"+this.oldid).removeClass("selected");$("#countrylist_"+this.oldid).hide()}this.showContinent()},showContinent:function(){$("#link_continent_"+this.curid).fadeIn(300);$("#list_continent_"+this.curid).addClass("selected");$("#link_continent_"+this.curid).addClass("selected");$("#continent_name_"+this.curid).addClass("selected");$("#countrylist_"+this.curid).show();this.oldid=this.curid}};$(document).ready(function(){var g=$("#editorTitle").val();var f=$("#editorText").html()});booking[sNSExperiments].acknowledge_currency_and_language={priority:10,init:function(){if(booking.env.b_site_experiment_acknowledge_currency_and_language&&b_cookie.langPrompt!="dontshow"){$("#acknowlednge_holder").show();var k=function(){b_cookie.langPrompt="dontshow";if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})}};if(typeof(b_cookie)=="undefined"){b_cookie={}}k();b_cookie.langPrompt="dontshow";var g=$(".update_settings"),h=booking.env.first_lang_suggestion,j=";selected_currency="+booking.env.suggested_currency;$(".keep_my_settings, .keep_settings_nofocus, .close_acknow_msg").click(function(c){$("#acknowlednge_holder").remove();c.preventDefault();booking.google.trackEvent(booking.google.clickTracker,"Acknowledge message","Close")});g.click(function(c){c.preventDefault();location=h+j;booking.google.trackEvent(booking.google.clickTracker,"Acknowledge message","Update")})}}};var $_dot_or_comma={USD:".",EUR:",",BRL:",",CAD:",",RUB:","};var $_decimal_by_lang={ca:$_dot_or_comma,cs:$_dot_or_comma,da:$_dot_or_comma,de:$_dot_or_comma,el:$_dot_or_comma,en:{},es:$_dot_or_comma,es_us:{},es_mx:{},fi:$_dot_or_comma,fr:$_dot_or_comma,hu:$_dot_or_comma,it:$_dot_or_comma,ja:{},nl:$_dot_or_comma,no:$_dot_or_comma,pt:$_dot_or_comma,pl:$_dot_or_comma,ro:$_dot_or_comma,ru:$_dot_or_comma,sv:$_dot_or_comma,tr:$_dot_or_comma,zh:{}};var $_decimal_by_lang_new={ca:",",cs:",",da:",",de:",",el:",",en:".",es:",",es_us:".",es_mx:".",fi:",",fr:",",hu:",",it:",",ja:".",nl:",",no:",",pt:",",pl:",",ro:",",ru:",",sv:",",tr:",",zh:"."};var lang,currency,country;var original_persons_count=null;$(function(){lang=$("html").attr("lang");currency=$("#currList").val();country=$("meta[name=country]").attr("content");$(".bookExtra").show();if(original_persons_count==null){original_persons_count=parseInt($("#person_count").text());if(isNaN(original_persons_count)){original_persons_count=parseInt($(".person_count:first").text())}}$("select.number_guests").change(function(){var d=$(this);var l=d.val();if(booking.env.b_site_experiment_one_page_bookprocess){var k=d.parents(".room_item").find(".addon")}else{var k=d.parents("table:first").find(".addon")}var c;k.each(function(){var F=$(this);var j=F.find(".number_guests");j.html(l);var C=j.length?l:1;var G=F.find(".price_per_unit");var z=G.attr("price");var E=G.attr("price_hotel");var B=F.find("span.addon_price");var D=F.find(".number_nights").text()||G.attr("nights")||1;var y=F.find("span.addon_price");var H=((z>0)?z:E)*D*C;y.attr("price",H);y.attr("price_hotel",format_price(E*D*C));if(booking.env.b_site_experiment_bp_clean_addon&&j.length>0){y.fadeOut("fast",function(){A();y.fadeIn()})}else{A()}function A(){y.html(y.attr("currency_symbol")+" "+format_price(H,y.attr("currency")))}});show_addons_cost();update_persons_count()});$("tr.dropdowns td select").change(function(){var d=$(this);var t=$(this).parents("tr.dropdowns").find(".price_per_unit");var o=d.find("option:selected").text();var n=t.attr("nights");var c=t.attr("price");var u=t.attr("price_hotel");var q=((c>0)?c:u)*n*o;d.attr("price",q);d.attr("price_hotel",format_price(u*n*o));show_addons_cost()});$("input:checkbox[name^=addon]").click(show_addons_cost);$(".extrabed").click(function(){if(!booking.env.b_site_experiment_bp_clean_addon){$("select.number_guests").trigger("change")}});$("input:checkbox[name^=insurance]").click(function(){var c=1*($("#cost_with_addons").attr("tc")||0);var n=1*(this.checked?($("#insurance_cost").attr("price")||0):0);var d=$("#selected_currency_symbol").text();$("#cost_with_addons").html(format_price(c+n));if(d){var l=1*$("#s_cost_with_addons").attr("tc");var m=1*(this.checked?($("#s_insurance_cost").attr("price")||0):0);$("#s_cost_with_addons").html(format_price(l+m))}if(this.checked){$("#insurance_div").show();$(".ovTotalCost").show()}else{$("#insurance_div").hide()}});var f={nl:1,dk:1,fi:1,se:1,de:1,it:1,ch:1,pt:1,at:1,es:1,de:1,fr:1,ie:1,be:1,cy:1,cz:1,ee:1,hu:1,gr:1,lv:1,lt:1,lu:1,no:1,pl:1,sk:1,ro:1};$("select[name=cc1]").change(function(){var c=$(this).val();if(f[c]==1){$("#insurance_wrapper").show();$("input:checkbox[name^=insurance]").removeAttr("disabled")}else{$("#insurance_wrapper").hide();$("input:checkbox[name^=insurance]").attr("disabled","disabled")}});$("tr.dropdowns .totPrice select").trigger("change");var h=$("input:checkbox[name^=addon]:checked").length;var g=$(".dropdowns select .notnull:selected").length;if(h||g){show_addons_cost()}if(f[$("select[name=cc1] option:selected").val()]==1){$("#insurance_wrapper").show();$("input:checkbox[name^=insurance]").removeAttr("disabled")}});function show_addons_cost(){var B=$("input:checkbox[name^=f_addon]:checked, input:checkbox[name^=addon]:checked, select.addon_price option.notnull:selected").parents("tr.addon").find(".addon_price");var y=0,u=0;var F={city_tax:0,vat:0,service_charge:0};var w={city_tax:0,vat:0,service_charge:0};var z=$("#pricedetails .total .hotel_currency .currency_symbol").text();if($("#pricedetails .total .hotel_currency .currency_symbol").data("currency")){z=$("#pricedetails .total .hotel_currency .currency_symbol").data("currency")}B.each(function(){var c=$(this);F.addons=F.addons||0;F.addons+=1*c.attr("price_hotel");w.addons=w.addons||0;w.addons+=1*c.attr("price");c.nextAll(".addon_tax").each(function(){var f=$(this);var g=f.attr("name");var d=1*f.val();if(g.match(/^s_/)){g=g.replace(/^s_/,"");w[g]=w[g]||0;w[g]+=d}else{F[g]=F[g]||0;F[g]+=d}});c.nextAll(".addon_tax_percentage").each(function(){var d=$(this);var f=d.attr("name");var g=1*d.val();F[f]=F[f]||0;F[f]+=g*c.attr("price_hotel");w[f]=w[f]||0;w[f]+=g*c.attr("price")})});var A=1*($("#total_cost").attr("price")||0);var x=A;for(var C in F){var E=$("#"+C+"_cost");var D=1*(E.attr(C)||0);var H=D+F[C];A+=H;E.html(format_price(H,z))}$("#cost_with_addons").html(format_price(A,z));var G=booking.env.b_selected_currency;if(G){var v=1*($("#s_total_cost").attr("price")||0);for(var C in w){var E=$("#s_"+C+"_cost");var D=1*(E.attr(C)||0);var H=D+w[C];v+=H;E.html(format_price(H,z))}$("#s_cost_with_addons").html(format_price(v,G))}if(booking.env.b_site_experiment_extracharges_breakdown){if(F.addons>0){$(".cost").show();$(".ovTotalCost").show();$("#rack-rate-total-user-currency").hide();$("#rack-rate-total-hotel-currency").hide();$("#rack-rate-total-percentage").hide()}else{$(".cost").hide();$("#rack-rate-total-user-currency").show();$("#rack-rate-total-hotel-currency").show();$("#rack-rate-total-percentage").show();if($(".included","#pricedetails").length<2){if(x==A){$(".ovTotalCost").hide();$("#rack-rate-total-user-currency").show();$("#rack-rate-total-hotel-currency").show();$("#rack-rate-total-percentage").show()}else{$(".ovTotalCost").show();$("#rack-rate-total-user-currency").hide();$("#rack-rate-total-hotel-currency").hide();$("#rack-rate-total-percentage").hide()}}}}else{if(F.addons>0){$(".cost").show();$(".ovTotalCost").show();$("#rack-rate-total-user-currency").hide();$("#rack-rate-total-hotel-currency").hide();$("#rack-rate-total-percentage").hide()}else{$(".cost").hide();$("#rack-rate-total-user-currency").show();$("#rack-rate-total-hotel-currency").show();$("#rack-rate-total-percentage").show();if(x==A){$(".ovTotalCost").hide();$("#rack-rate-total-user-currency").show();$("#rack-rate-total-hotel-currency").show();$("#rack-rate-total-percentage").show()}else{$(".ovTotalCost").show();$("#rack-rate-total-user-currency").hide();$("#rack-rate-total-hotel-currency").hide();$("#rack-rate-total-percentage").hide()}}}if($(".extrabed :checked").length){$("#extrabed_remark").show();$(".extrabed_var_is_included").show();$(".extrabed_var_is_excluded").hide()}else{$("#extrabed_remark").hide();$(".extrabed_var_is_included").hide();$(".extrabed_var_is_excluded").show()}if($("li.total").hasClass("updated")){$("li.total").removeClass("updated")}else{$("li.total").addClass("updated").delay(600).queue(function(c){$(this).removeClass("updated");c()})}}function update_persons_count(){var h=0;$("select.number_guests").each(function(){h+=parseInt($(this).val())});$("input[type=checkbox].is_extrabed:checked").each(function(){h+=1});var g=$("#person_count");if(g.length==0){g=$(".person_count");var f="";g.each(function(){f=$(this).text().replace(/[0-9]+/,h);$(this).html(f)})}else{var f=g.text().replace(/[0-9]+/,h);g.html(f)}}var _language_number_formatting={ar:[".",",",false],bg:["."," ",false],ca:[",",".",false],cs:["."," ",false],da:[",",".",false],de:[",",".",false],"en-us":[".",",",false],"en-gb":[".",",",false],el:[",",".",false],es:[",",".",false],et:[","," ",false],fi:[","," ",false],fr:[","," ",false],he:[".",",",false],hr:[",",".",false],hu:["."," ",false],id:[",",".",false],is:[",",".","ISK"],it:[",",".",false],ja:[".",",","YEN"],ko:[".",",",false],lt:[","," ",false],lv:[","," ",false],ms:[".",",",false],nl:[",",".",false],no:[","," ",false],pl:[","," ",false],pt:[","," ",false],"pt-br":[",",".",false],ro:[",",".",false],ru:[","," ",false],sk:[","," ",false],sl:[",",".",false],sr:[",",".",false],sv:[","," ",false],th:[".",",",false],tl:[".",",",false],tr:[",",".",false],uk:[","," ",false],vi:[",",".",false],zh:[".",",",false]};function thousand_separate(g,f){g=g.replace(/,/g,"");var h=new RegExp("(-?[0-9]+)([0-9]{3})");while(h.test(g)){g=g.replace(h,"$1"+f+"$2")}return g}function format_price(C,w){var y=(Math.round(C*100)/100)+"";if(y.match(/\.\d$/)){y+="0"}var t=country.toLowerCase();var A=$_decimal_by_lang[lang+"_"+t]||$_decimal_by_lang[lang];var x=A?A[w]||".":".";if(booking.env.b_site_variant_currency_consistency){x=$_decimal_by_lang_new[lang+"_"+t]||$_decimal_by_lang_new[lang]||"."}if(booking.env.b_site_variant_localize_price_number_format){var q=lang.split("-")[0];var B=_language_number_formatting[lang]||_language_number_formatting[q]||[".",",",false];var x=B[0];var u=B[1];var D=!(B[2]==w);var z=y.split(".");var v=thousand_separate(z[0],u);if(D&&z[1]){v=v+x+z[1]}return v}return y.replace(/\./,x)}booking[sNSStartup].addons={priority:9,init:function(){$("#insurance_button").click(function(){$(this).toggleClass("hover");$("#insurance_panel").toggle()});return true}};booking[sNSExperiments].free_cancellation_fake_addon={priority:9,init:function(){$(".free-cancellation input").removeAttr("checked");$(".free-cancellation input").click(function(){var u=$(this).attr("name").split("_");var q=$(this).attr("value");var x=u[2]+"_"+u[3]+"_"+u[4];var B=$("input[name='nr_rooms_"+x+"']").attr("value");var z=$("input[name='nr_rooms_"+q+"']").attr("value");var t;var w;var y=$("#bookForm input[name='total_cost']");var A=parseFloat(y.attr("value"));var v=parseFloat($(this).parents("tr.addon").find(".addon_price").attr("price_hotel"));if(this.checked){$("input[name='nr_rooms_"+x+"']").attr("value",--B);$("input[name='nr_rooms_"+q+"']").attr("value",++z);t=x;w=q;A+=v}else{$("input[name='nr_rooms_"+x+"']").attr("value",++B);$("input[name='nr_rooms_"+q+"']").attr("value",--z);t=q;w=x;A-=v}y.attr("value",A);var o=$(this).parents(".bookstep2").get(0);$("input",o).each(function(){if($(this).attr("name").indexOf("f_addon")<0){$(this).attr("name",$(this).attr("name").replace(t,w));$(this).attr("id",$(this).attr("id").replace(t,w))}});$("select",o).each(function(){$(this).attr("name",$(this).attr("name").replace(t,w));$(this).attr("id",$(this).attr("id").replace(t,w))});show_addons_cost()});return true}};booking[sNSExperiments].ajax_filters=(function(){var Q="=!=!=";var H=false;var K={};var J;var D;var M=[];var B=function(c,d){K[c]={timestamp:+new Date(),value:d}};var A=function(f){var d=K[f];var c=+new Date();if(d&&(c-d.timestamp)<600000){return d.value}};var E=function(){var d=$(".sorth1").offset().top;var c=$(window).scrollTop();if(c>d){window.scrollTo(0,d)}};var O=function(c){if(typeof history.pushState!=="undefined"){history.pushState({url:c},null,c)}else{location.hash="#!"+c}};var S=function(g,h){var j=g.replace(booking.env.b_url_start,"").replace(/;;/g,";").replace(/^;+|;+$/g,"").split("?");var m=j[1].split(";");var l,k=m.length;var d,f,c=[];for(l=0;l<k;l++){d=m[l].split("=");if(d[0]==="nflt"){f=decodeURIComponent(d[1]).replace(/;;/g,";").replace(/^;+|;+$/g,"");if(f){c=f.split(";")}m.splice(l,1);break}}if(typeof h==="function"){h(m,c)}m.push("nflt="+encodeURIComponent(c.sort().join(";")));return j[0]+"?"+m.sort().join(";")};var P=function(d){var c=d.split("=")[0];return S(D,function(f,g){if(c==="pr"){I(d,f)}else{g.push(d);if(c==="district"){F(f)}}})};var I=function(d,f){var h,j=f.length;var g=false;var c;for(h=0;h<j;h++){if(f[h].split("=")[0]==="pr"){g=true;c=d.split("=")[1]+","+f[h].split("=")[1];c=c.split(",");c=$.map(c,function(k){return parseInt(k,10)});c.sort(function(k,l){return k-l});if(c[0]===-1){c.splice(0,1);c.push(-1)}f[h]="pr="+c[0]+","+c[c.length-1];break}}if(!g){f.push(d)}};var N=function(d){var c=d.split("=")[0];return S(D,function(f,g){if(c==="pr"){L(d,f)}else{var h=g.length;while(h--){if(g[h]===d){g.splice(h,1)}}if(c==="district"){T(f)}}})};var L=function(d,n){var m,l=n.length;for(m=0;m<l;m++){if(n[m].split("=")[0]==="pr"){var h=n[m].split("=")[1].split(",");var f=parseInt(h[0],10);var g=parseInt(h[1],10);var c=d.split("=")[1].split(",");var j=parseInt(c[0],10);var k=parseInt(c[1],10);if(f===j&&g===k){n.splice(m,1)}else{if(f===j){n[m]="pr="+k+","+g}else{if(g===k){n[m]="pr="+f+","+j}}}break}}};var F=function(c){T(c);c.push("radius=0")};var T=function(d){var c=d.length;while(c--){if(/^radius=/.test(d[c])){d.splice(c,1)}}};var R=function(h,l,c){if(!c){c={}}var j=h.split(Q);if($(j[2]).find("table.hotellist > tbody > tr").length===0){var g=M.pop();if(g){C(g);return false}}$(document.body).unbind("mousemove.tooltip");M=[];var d=[];$("#filterbox_wrap .filtercategory").each(function(){var m=$(this);if(!m.hasClass("toggla_hide")){d.push(m.parent().attr("id"))}});$("#filterbox_wrap").html(j[0]);$.each(d,function(n,o){var m=$("#"+o);m.find(".filtercategory").removeClass("toggla_hide");m.find(".filteroptions").hide()});var f=$(j[1]).filter("#breadcrumb");if(f.length){$("#breadcrumb").empty().append(f.contents())}else{$("#breadcrumb").html(j[1])}$("h1.sorth1").html(j[2]);var k=document.getElementById("ajaxsrwrap");$(k).html(j[3]);booking[sNSStartupLoad].tooltip_3.addTooltip(k);booking[sNSStartupLoad].search_all_roomtypes.addMoreLink(k);booking[sNSStartup].filterbox.init();booking[sNSStartup].sort_popups.init();if(booking.env.b_site_experiment_pin_sortbar){booking[sNSExperiments].pin_sortbar.init()}booking[sNSStartupLoad].change_currency_on_click.init();$(".address a, .broaden_search a, .prevnextbar a, a.filterelement, #sort_by a").each(function(){if(this.href.indexOf("standalonesearchresults.")>-1){this.href=this.href.replace("standalone","")}});if(c.scrollToTop===undefined||c.scrollToTop){E()}if(c.saveUrl===undefined||c.saveUrl){O(l)}};var C=function(f,c){if(!c){c={}}var d=A(f);D=f;if(d){R(d,f,c);return}H=true;booking[sNSStartup].filterbox_loading.show();setTimeout(function(){J=$.ajax({cache:true,url:f.indexOf("standalonesearchresults")>-1?f:f.replace("searchresults.","standalonesearchresults."),success:function(g){if(f!==D){return}H=false;R(g,f,c);B(f,g)}})},15)};var G=function(){B(location.pathname+location.search,$("#filterbox_wrap").html()+Q+$("#breadcrumb").html()+Q+$("h1.sorth1").html()+Q+$("#ajaxsrwrap").html());var d=location.href.split("#!")[1];if(d){C(d,{scrollToTop:false,saveUrl:false})}$("a.filterelement").live("click",function(){var h=$(this);if(h.hasClass("cantdeselect")){return false}var g=this.getAttribute("data-id").replace(/^(.+)[\-_](\d+)$/,"$1=$2");if(/^pricerange=/.test(g)){g=this.getAttribute("data-param")}var j=g.split("=")[0];var k;if(H){H=false;if(J){J.abort()}if(D){M.push(D)}k=h.hasClass("active")?N(g):P(g)}else{k=S(this.href)}if(booking.env.filter_config[j]==="single"){h.siblings().toggle(h.hasClass("active"))}h.removeClass("on").toggleClass("active").blur();C(k);return false});$(window).bind("hashchange",function(){var g=location.href.split("#!")[1];if(!g){C(location.pathname+location.search,{saveUrl:false})}else{if(g!==D){C(g,{saveUrl:false})}}});var f=("state" in window.history);var c=location.href;$(window).bind("popstate",function(h){var j=!f&&location.href===c;f=true;if(j){return}var g=h.originalEvent.state;if(!g){C(location.pathname+location.search,{saveUrl:false})}else{if(g.url!==D){C(g.url,{saveUrl:false})}}})};return{init:G}}());booking[sNSExperiments].bp_cart={init:function(){$.ajax({url:"/cart",dataType:"json",success:function(d){$.each(d,function(c,j){if(c==0){var h=$("#bp_cart");var k=function(f){return'<a class="clear_cart" href="#" id="bp_cart_clear">'+booking.env.bp_cart_abandon_close+'</a><a class="proceed" title="'+f.hotel_name+'" href="'+f.secure_hostname+f.book_url+'">'+booking.env.bp_cart_abandon_complete_book_01+'<span class="cart_cta_button">'+booking.env.bp_cart_abandon_complete_book_02+"</span></a>"};h.html(k(j));h.show();$("body").addClass("cart_is_active");$("#bp_cart_clear").click(function(){$.ajax({url:"/cart_clear",dataType:"json",success:function(){$("body").removeClass("cart_is_active");$("#bp_cart").css("display","none")}})})}})}})}};booking[sNSStartup].b_child_ages_on_sr={init:function(){this.attachEvents()},attachEvents:function(){var f=this;var g="#children_ages_form";$("#children_ages_form").submit(function(n){alert("form submit");var q=0;var c=Array();var d=false;$("#children_ages select[name=age]").each(function(){alert("value "+this.value);if(this.value.match(/[mMkKhHlLaA]/)){this.value="0"}if(this.value.match(/\D/)){this.value=""}if(this.value>17){this.value=""}if(this.value==""){if(!booking.env.b_site_experiment_request_children_ages_in_sr){this.value="?";$(this).addClass("error");$("#ages_header").addClass("error");d=true}else{this.value="-1"}}else{$(this).removeClass("error");$("#ages_header").removeClass("error")}c.push(this.value)});if(booking.env.b_site_experiment_new_group_params){var m=0;var o="";$("#children_ages input[name=group_adults]").each(function(){o+="|p:"+this.value+",c:"+$("#group_definition select[name=group_children]")[q].value+",";for(var h=0;h<$("#group_definition select[name=group_children]")[q].value;h++){o+="a:"+c[m]+",";m++}q++});$("#children_ages #group_config").val(o);return true}else{$("#children_ages #group_config").val("")}if(d){n.preventDefault();return false}})}};(function(o,n,u){if(!n("[data-load]").length){return}var l=u[o.sNSStartup],q=u[o.sNSStartupLoad],m=(function(){var d=o.location,c=d.href,g=d.search,f=d.hash;if(!g){return c.replace(f,"")+"?lazyload=1"+f}return c.replace(g,g+"&lazyload=1")})(),v=function(c){(t[c.data("load")]||Function())()},t={worldmap:function(){if(n("#worldmap-lazy-loaded-container").data("new-worldmap")){l.worldMapV2.init();return}l.worldmap.init()},footer:function(){if(u.env.b_site_experiment_social_plugins_footer){u.social_plugins_footer.init()}l.social_network.init()}};n.get(m,function(d){var f=n(d),c=function(g){g.html(f.find(g.data("target")))};n("[data-load]").each(function(){var g=n(this);c(g);v(g)});n(o.document).trigger("lazy:ready")})})(this,this.jQuery,this.booking);var b_Feedback=function(){function m(){if(b_cookie&&b_cookie.contentFeedback){var c=b_cookie.contentFeedback.split("|");if(c.indexOf(booking.env.b_hotel_id)!=-1){return}}$("#hotel_main_content").append('<p id="content_feedback_invite">'+booking.env.content_feedback_prompt_question+'<br /><button id="b_content_feedback_yes">'+booking.env.content_feedback_prompt_link+"</button></p>");$("#b_content_feedback_yes").click(function(){b_Feedback.popup("/general.html?tmpl=content_feedback");if(booking.env.b_site_experiment_event_tracking&&(typeof pageTracker!="undefined"||typeof _gaq!="undefined")){booking.google.trackEvent(booking.google.clickTracker,"Content Feedback","Clicked")}return false})}function l(){}function n(){var c="<option value=''>"+transl_please_select+"</option>";var d;$("#maxotel_rooms td.roomPrice div.roomDefaultUse, #maxotel_rooms td.roomPrice div.roomSingleUse").each(function(){singleOcc="";if($(this).hasClass("roomSingleUse")){singleOcc="- Single Occupancy"}var g=$(this).find("strong").text();var f=g.match(/[0-9].*[0-9]/);if($(this).parents("tr:eq(0)").find("td.roomType a.togglelink").length!=0){d=$(this).parents("tr:eq(0)").find("td.roomType a.togglelink").html()}c+='<option value="'+$(this).attr("id").substr(9)+" *** "+d+singleOcc+" | "+booking.env.rates_feedback_userscurrency+" "+f+'">'+d+singleOcc+" - "+g+"</option>"});$("#feedback_roomslist").append('<select name="roomtype_id" id="roomtype_id" style="width:410px;">'+c+"</select>")}function o(){if($("#comments_table").length){var c=$("#comments_table");$(".review_tr",c).mouseenter(function(f){$(".review_feedback",$(this)).css({filter:"alpha(opacity=100)",opacity:1})});$(".review_tr",c).mouseleave(function(f){$(".review_feedback",$(this)).css({filter:"alpha(opacity=20)",opacity:0.2})});if($.fn&&$.fn.tooltip){$(".review_useful_form",c).tooltip({track:true,opacity:1,fade:250,left:0})}if(b_cookie&&b_cookie.rF){var d=b_cookie.rF.split(",");$("tr",c).each(function(){var h=$(this).find("div[id^='area_comments_']").attr("id");var f=h.substr(14,h.length);if(d.indexOf(f)!=-1){if(booking.env.b_site_experiment_review_helpful_thumbs){var g=$(this);g.find(".review_useful_form").remove();g.find(".vote_copy").remove();g.find("span.review_feedback").prepend('<p class="review_useful_thankyou">'+booking.env.transl_content_feedback_thankyou_new+"</p>")}else{var g=$(this);g.find(".review_useful_form").remove();g.find(".vote_copy").remove();g.find("span.review_feedback").prepend('<p class="review_useful_thankyou">'+transl_content_feedback_thankyou_short+"</p>")}}})}$("div.review_feedback form",c).submit(function(){$(this).children("textarea").val(booking.env.b_hotel_id);var h=$(this).parents("div[id^='area_comments_']").attr("id");var f=h.substr(14,h.length);var g=this;$.post(this.action,{hotel_id:$(this).children("textarea").val()},function(){if(b_cookie&&b_cookie.rF){var j=b_cookie.rF.split(",");if(j.length>50){j.shift();b_cookie.rF=j.toString()+","+f}else{b_cookie.rF+=","+f}}else{if(typeof(b_cookie)=="undefined"){b_cookie={}}b_cookie.rF=f}if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})}var u=$(g).parent();u.find(".review_useful_form").remove();u.prepend('<p class="review_useful_thankyou">'+transl_content_feedback_thankyou_short+"</p>");booking.google.trackEvent(booking.google.clickTracker,"Review Useful",$(g).children("button").attr("class"))});return false});$("span.review_feedback form",c).submit(function(){$(this).children("textarea").val(booking.env.b_hotel_id);var h=$(this).parents("div[id^='area_comments_']").attr("id");var f=h.substr(14,h.length);var g=this;$.post(this.action,{hotel_id:$(this).children("textarea").val()},function(){if(b_cookie&&b_cookie.rF){var j=b_cookie.rF.split(",");if(j.length>50){j.shift();b_cookie.rF=j.toString()+","+f}else{b_cookie.rF+=","+f}}else{if(typeof(b_cookie)=="undefined"){b_cookie={}}b_cookie.rF=f}if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:".booking.com"})}var u=$(g).parent();if(booking.env.b_site_experiment_review_helpful_thumbs){$(g).closest(".no_thumbs").html('<p class="review_useful_thankyou">'+booking.env.transl_content_feedback_thankyou_new+"</p>")}else{u.find(".review_useful_form").remove();u.prepend('<p class="review_useful_thankyou">'+transl_content_feedback_thankyou_short+"</p>")}booking.google.trackEvent(booking.google.clickTracker,"Review Useful",$(g).children("button").attr("class"))});return false})}}function q(){$("input[name^=reason]:checked").each(function(){$.ajax({url:"/feedback",type:"PUT",data:{type:this.value,hotel_id:booking.env.b_hotel_id,lang:booking.env.b_lang_for_url}})});var c=booking.env.content_feedback_thankyou_end+". "+booking.env.content_feedback_we_appreciate;if($("#contact:checked").length){c=booking.env.content_feedback_contact_info+" "+c}$("#content_feedback_invite").text(c);if(b_cookie&&b_cookie.contentFeedback){b_cookie.contentFeedback=b_cookie.contentFeedback+"|"+booking.env.b_hotel_id}else{if(typeof(b_cookie)=="undefined"){b_cookie={}}b_cookie.contentFeedback=booking.env.b_hotel_id}if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})}if(booking.env.b_site_experiment_event_tracking&&(typeof pageTracker!="undefined"||typeof _gaq!="undefined")){booking.google.trackEvent(booking.google.clickTracker,"Content Feedback","Sent")}}function k(){$("#b_content_feedback_yes").hide();if($("#content_feedback_checkboxes").length){$("#content_feedback_checkboxes").show()}else{$('<div id="content_feedback_checkboxes"><label for="translation"><input id="translation" type="checkbox" name="reason[]" value="translation">'+booking.env.content_feedback_response1+'</label><label for="difficult"><input id="difficult" type="checkbox" name="reason[]" value="difficult">'+booking.env.content_feedback_response2+'</label><label for="incorrect"><input id="incorrect" type="checkbox" name="reason[]" value="incorrect">'+booking.env.content_feedback_response3+'</label><label for="missing"><input id="missing" type="checkbox" name="reason[]" value="missing">'+booking.env.content_feedback_response4+'</label><label for="contact"><input id="contact" type="checkbox" name="reason[]" value="contact">'+booking.env.content_feedback_response5+'</label><button onclick="b_Feedback.send();">'+booking.env.send_your_feedback+"</button><a href=\"#\" onclick=\"$('#content_feedback_checkboxes').hide(); $('#b_content_feedback_yes').show(); return false;\">Close</a></div>").appendTo("#content_feedback_invite")}}function t(c){$(document.body).append('<div id="b_feedback"></div>');$("#b_feedback").load(c,function(){if($("#b_feedback").css("position")=="fixed"){$("#b_feedback").css("top",$(window).height()/2-$("#b_feedback").height()/2)}else{var d=(document.body.scrollTop==0)?(window.pageYOffset)?window.pageYOffset:(document.body.parentElement)?document.body.parentElement.scrollTop:0:document.body.scrollTop;$("#b_feedback").css("top",d+($(window).height()/2-$("#b_feedback").height()/2))}$("#b_feedback").bgiframe();b_Feedback.createRoomsDd()})}return{init:m,initRatesFeedback:l,createRoomsDd:n,registerEvent:o,send:q,open:k,popup:t}}();booking[sNSStartup].b_Feedback={priority:9,init:function(){b_Feedback.initRatesFeedback()}};booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].content_feedback={priority:9,init:function(){b_Feedback.init()}};booking[sNSExperiments].cookie_warning={priority:10,init:function(){if(!$.cookie("cookie_notice_shown")){var f=$("#cookie_warning");f.show();var g=function(){if(typeof(JSON)!="undefined"){$.cookie("cookie_notice_shown",1,{expires:365,path:"/",domain:booking.env.b_domain_end})}};$("#cookie_warning a").click(function(c){g();if($(this).hasClass("close_warning")){f.fadeOut("1000",function(){$(this).remove()});booking.google.trackEvent(booking.google.clickTracker,"Cookie warning","Close");c.preventDefault()}else{booking.google.trackEvent(booking.google.clickTracker,"Cookie warning","Read")}})}}};booking[sNSStartup].show_nr_accounts={priority:9,counters:{},updateCounters:[],counterCount:0,startingzeros:"00000000",init:function(){this.counterInit()},counterInit:function(){var d=this;$(".show_counter").each(function(){d.addCounter(this)});d.startRunning()},addCounter:function(u){this.counterCount++;var t=this.counterCount;this.counters["counter_"+t]={nodeId:t,displayAccounts:0,intervalCounter:0,expected:0,increase:1,interVal:null,fields:1};var w=$(u).attr("fields");var y=this.counters["counter_"+t];y.fields=w;if(y.fields>8){this.startingzeros=this.startingzeros+"0"}if(w>1){var y=this.counters["counter_"+t];y.expected=$(u).attr("expected");y.displayAccounts=parseInt(y.expected);var z=$(u).attr("number");y.increase=$(u).attr("increase");var v=false;for(var B=0;B<w;B++){var D=w-B-1;var C=this.startingzeros+y.displayAccounts;var A=C.charAt(~(w-C.length)+B+1);if(A=="0"&&!v){var x="none"}else{var x="block";v=true}$(u).append('<div class="cntr_nr" id="nr_ac_'+D+"_"+t+'" style="display:'+x+';"><span>'+A+"</span></div>");if(z&&z.length>2){var E=null;if(z.indexOf(".")>-1){var E="."}if(z.indexOf(",")>-1){var E=","}if(E!=null){var F=z.split(E)[1].length;if(z&&D%3==0&&D!=0){$(u).append('<span class="counter_divider">'+E+"</span>")}}}}}},startRunning:function(){for(items in this.counters){var g=this.counters[items];var f=1000/g.increase;this.runInterval(g,f)}},runInterval:function(h,g){var f=this;var h=h;this.updateCounters[h.nodeId]=window.setInterval(function(){h.displayAccounts++;var n=f.startingzeros+h.displayAccounts;var l=true;for(var d=h.fields;d>-1;d--){var m=n.charAt(n.length-d-1);var c=document.getElementById("nr_ac_"+d+"_"+h.nodeId);if(c){c.innerHTML="<span>"+m+"</span>";if(m=="0"&&l){c.style.display="none"}else{c.style.display="block";l=false}}}},g)}};function popup_cancel_big_index(d){window.open(d,"","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=yes,resizable=1,width=950,height=500,left=200,top=200");return false}booking[sNSStartup].default_group_new={priority:9,user_modified:false,group_set:$(".group_set").length,init:function(){if(booking.env.b_site_experiment_groups_number_rooms){function u(c){if(c=="notshowing"){$("#clear_group_spec").hide();$("#group_spec").show()}else{if(c=="showing"){$("#clear_group_spec").show();$("#group_spec").hide()}}}function q(){u("showing");$("#define_group").show()}function w(){$(".default_group tbody tr").slice(1).remove();$("select[name=group_adults]")[0].value=2;$("select[name=group_children]")[0].value=0;if($(".index.landing").length>0){u("notshowing")}$("#group_nr_rooms")[0].value=1;$("#ages_header").hide();$("#group_definition input").remove();$(".index.landing #define_group").hide()}function v(){$("#group_nr_rooms").val($(".default_group tbody tr").length)}$("#define_group h3").remove();group_defined=(booking.env.b_group)?true:false;if(!group_defined){$("#define_group").hide();u("notshowing")}else{u("showing")}$("#group_spec").click(function(){q();return false});$("#clear_group_spec").click(function(){w();return false});$("#group_nr_rooms").change(function(){var g=$(this).val(),d=$(".default_group tbody tr"),c=d.length;if(g<c){d.slice(g).remove()}else{for(var f=c+1;f<=g;f++){var h=$("#define_group tbody").append(booking[sNSStartup].b_GroupDefinitionModule.row_markup.replace("XXX",f));booking[sNSStartup].b_GroupDefinitionModule.addChildrenHandlers(h)}}});$("#define_group tfoot a").click(function(){v()});$("#define_group tbody a").live("click",function(){v()})}else{var t=this;$("#in_a_group, #in_a_group_narrow, #define_group h3").hide();$("#define_group table").addClass("hidelinks");function o(f,g,c){if(t.group_set==1||c>0||g>parseInt(f)+1){var d=".hidelinks";if(t.group_set!=1){d+=", #group_definition_modal"}$(d).show()}else{$(".hidelinks").not("#group_definition_modal .hidelinks").hide()}}$("#default_group_new_block select").change(function(){var k=$("#nr_rooms").val(),j=$("#nr_adults").val(),g=$("#nr_children").val(),h=$(".default_group tbody tr"),c=h.length;if(k<c){h.slice(k).remove();t.user_modified=false}else{for(var d=c+1;d<=k;d++){var y=$("#define_group tbody").append(booking[sNSStartup].b_GroupDefinitionModule.row_markup.replace("XXX",d));booking[sNSStartup].b_GroupDefinitionModule.addChildrenHandlers(y)}}if(t.user_modified===false){$("select[name=group_adults]").each(function(z){this.value=(z<j%k)?Math.floor(j/k)+1:Math.floor(j/k)});$("select[name=group_children]").each(function(B){this.value=(B<g%k)?Math.floor(g/k)+1:Math.floor(g/k);$ages_row=$(this).parent().next();var A=$ages_row.find("input").length;if(this.value-1<A){if(this.value>0){$ages_row.find("input:gt("+(this.value-1)+")").remove()}else{$ages_row.find("input").remove()}}else{for(var B=0;B<this.value-A;B++){if(booking.env.b_site_experiment_request_children_ages_in_sr&&(booking.env.b_action=="index")){$ages_row.append(booking[sNSStartup].b_GroupDefinitionModule.age_markup_request_children_in_sr)}else{$ages_row.append(booking[sNSStartup].b_GroupDefinitionModule.age_markup)}}}});if($("input[name=age]").length===0){$("#ages_header").hide()}else{$("#ages_header").show()}}else{var f=j,l=g;$(".default_group select").each(function(){if(this.name=="group_adults"){if(f>0){f-=this.value}else{this.value=0}}else{if(l>0){l-=this.value}else{this.value=0}}})}o(k,j,g)});$(".default_group table select").live("change",function(){var d=0,c=0;$(".default_group table select").each(function(){if(this.name=="group_adults"){d+=parseInt(this.value)}else{c+=parseInt(this.value)}});$("#nr_adults").val(d);$("#nr_children").val(c);t.user_modified=true});var n=$("#nr_rooms").val(),m=$("#nr_adults").val(),x=$("#nr_children").val();o(n,m,x)}}};booking[sNSStartup].b_GroupDefinitionModule={row_markup:"",age_markup:'<input type="text" name="age" maxlength="2" size="2" autocomplete="off" />',age_markup_request_children_in_sr:'<input type="text" name="age" maxlength="2" size="2" value="-1" style="visibility: hidden" autocomplete="off" />',attachEvents:function(){var f=this,g=function(){var d,c=$("#frm select[name^=check]"),h=c.length-1;while(h--){d=$(c[h]).val();if(!d||+d<=0){return false}}return true};$("#in_a_group").click(function(){if(this.checked){$("#group_definition").show();$("#clear_group").val("0")}else{$("#group_definition").hide();$("#clear_group").val("1")}});$("#in_a_group_narrow").click(function(){if(this.checked){f.showModalWindow();$("#clear_group").val("0")}else{$("#group_definition_modal").hide();$("#clear_group").val("1")}});$("#define_group tfoot a").click(function(){var c=$("#define_group tbody tr").length+1;var d=$("#define_group tbody").append(f.row_markup.replace(/XXX/,c));$("#clear_group").val("0");f.addChildrenHandlers(d);return false});$("#define_group tbody a").live("click",function(){$(this).parents("tr").eq(0).remove();if($("#group_definition tbody tr").length===0){$("#clear_group").val("1")}return false});$("#define_group input").live("click",function(){if(this.value=="?"){this.value=""}});$("#show_modal, #show_modal_nr, #show_modal_ssb").click(function(){$(".search_summary_block").hide();$(".original_search_form").removeClass("original_search_form_hidden");f.showModalWindow();return false});$("#clear_and_submit, #clear_and_submit_nr").click(function(){$("#clear_group").val("1");$("#in_a_group").attr("checked","");$("#group_definition, .b_group_recommendation").hide();$("#frm")[0].submit();return false});$("#close").click(function(){$("#group_definition_modal").hide();return false});$(".group_change").click(function(){if(booking.env.b_site_experiment_omni_search){$("#group_definition_modal").hide();f.updateCount();return false}else{if(!g()){$("#group_definition_modal").hide()}}});$("#frm").submit(function(n){if($("#availcheck")[0].checked){return}var q=0;var c=Array();var d=false;$("#group_definition input[name=age]").each(function(){if(this.value.match(/[mMkKhHlLaA]/)){this.value="0"}if(this.value.match(/\D/)){this.value=""}if(this.value>17){this.value=""}if(this.value==""){if(!booking.env.b_site_experiment_request_children_ages_in_sr){this.value="?";$(this).addClass("error");if(booking.env.b_site_experiment_omni_search){$("fieldset.group","#frm").addClass("has_omni_error")}$("#ages_header").addClass("error");d=true;$("#group_definition_modal").show()}else{this.value="-1"}}else{$(this).removeClass("error");$("#ages_header").removeClass("error")}c.push(this.value)});if(booking.env.b_site_experiment_new_group_params){var m=0;var o="";$("#group_definition select[name=group_adults]").each(function(){o+="|p:"+this.value+",c:"+$("#group_definition select[name=group_children]")[q].value+",";for(var h=0;h<$("#group_definition select[name=group_children]")[q].value;h++){o+="a:"+c[m]+",";m++}q++});$("#group_config").val(o)}else{$("#group_config").val("")}if(d){n.preventDefault();return false}});$("#availcheck").click(function(){if(this.checked){if(booking.env.b_site_experiment_omni_search){$("#show_modal, #define_group input, #define_group select").attr("disabled","disabled");$("fieldset.group","#frm").addClass("disableme");$("#define_group").addClass("disableme")}else{$("#define_group input, #define_group select").attr("disabled","disabled");$("#define_group").addClass("disableme")}if($("#group_definition_modal").length){$("#group_definition_modal").hide();$("#in_a_group_narrow").attr("checked","")}}else{$("#show_modal, #define_group input, #define_group select").removeAttr("disabled");$("fieldset.group","#frm").removeClass("disableme");$("#define_group").removeClass("disableme")}})},update:function(k){var l=this;var m=$(k);var n=m.val();var j=m.parent().next().find("input").length;if(n-1<j){if(n>0){m.parent().next().find("input:gt("+(n-1)+")").remove()}else{m.parent().next().find("input").remove()}}else{for(var o=0;o<n-j;o++){if(booking.env.b_site_experiment_request_children_ages_in_sr&&(booking.env.b_action=="index")){m.parent().next().append(l.age_markup_request_children_in_sr)}else{m.parent().next().append(l.age_markup)}}}if($("input[name=age]").length===0){$("#ages_header").hide()}else{$("#ages_header").show()}},setInitialVisibility:function(){if(!document.getElementById("in_a_group")||document.getElementById("in_a_group").checked){if(typeof $("#group_definition").show=="function"){$("#group_definition").show()}}else{$("#group_definition").hide();$("#clear_group").val("1")}$(".featuredRooms tbody").each(function(){if($(this).find("tr").length===0){$(this).parents("tr").eq(0).remove()}});if(booking.env.b_site_experiment_omni_search){this.updateCount()}},showModalWindow:function(){if(booking.env.b_site_experiment_omni_search){$("body").trigger("click")}$("#group_definition_modal").show();if(!booking.env.b_site_experiment_omni_search){var d=(document.body.scrollTop==0)?(window.pageYOffset)?window.pageYOffset:(document.body.parentElement)?document.body.parentElement.scrollTop:0:document.body.scrollTop;$("#group_definition_modal").css("top",d+($(window).height()/2-$("#group_definition_modal").height()/2));$("#group_definition_modal").bgiframe()}if(booking.env.b_site_experiment_request_children_ages_in_sr){$("#group_definition input[name=age]").each(function(){if($(this).val()=="-1"){$(this).val("")}})}},selectRecommendedRooms:function(){$("#roomsForm select").each(function(){this.value=0});var j="";for(var k=0;k<booking.env.b_room_groups.length;k++){var l=booking.env.b_room_groups[k].split(":");var h=$("select[name=nr_rooms_"+l[0]+"]").val();$("select[name=nr_rooms_"+l[0]+"]").val(parseInt(h)+parseInt(l[1]))}for(var k=0;k<booking.env.b_room_extrabeds.length;k++){var m=booking.env.b_room_extrabeds[k].split(":");j+=m[0]+":"+m[1]+";";$('<input type="hidden" name="extrabeds_'+m[0]+'" value="'+m[1]+'"/>').appendTo($("#roomsForm"))}$('<input type="hidden" name="is_group_recommendation" value="1"/>').appendTo($("#roomsForm"));$("#roomsForm")[0].submit()},addChildrenHandlers:function(f){var g=this;$('select[name="group_children"]',f).change(function(){g.update(this)})},updateCount:function(){var d=0;$("#default_group_new_block select.omni_people option:selected").each(function(){if($(this).val()-0==$(this).val()){d=d+parseInt($(this).val())}});if(d>2){$("fieldset.group","#frm").addClass("group_set");if($("#group_count").length>0){$("#group_count").html(d)}else{$("fieldset.group .field","#frm").append('<div id="group_count">'+d+"</div>")}}else{if($("#group_count").length>0){$("#group_count").html(d)}}},init:function(){var d=this;if($("#define_group").length){this.row_markup="<tr><th>"+booking.env.group_room+'&nbsp;XXX:&nbsp;</th><td><select name="group_adults"><option value="0">0</option><option value="1" selected="selected">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td><td class="b"><select name="group_children"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td><td class="b"></td><td><a href="#">'+booking.env.group_remove+"</a></td></tr>";this.attachEvents();this.setInitialVisibility();if($("#availcheck")[0].checked){$("#define_group input, #define_group select").attr("disabled","disabled");$("#define_group").addClass("disableme")}if($("#define_group").css("display")=="none"){$("#inout select").change(function(){$("#define_group").show()})}}$("#select_group").click(function(){d.selectRecommendedRooms();this.blur();return false});$("#select_group2").click(function(){d.selectRecommendedRooms();this.blur();return false});this.addChildrenHandlers(document)}};booking.destination_game_home=(function(){var q,z,t,v,B,y=booking.env.b_good_msg,w=booking.env.b_bad_msg,u;var o=function(){q=$("a.social_remove","#top-destinations");z=$("a.social_love","#top-destinations");t=$("#top-destinations table").attr("data-seen_ids");v=$("#create_profile");y=booking.env.b_good_msg;w=booking.env.b_bad_msg;u=0;String.prototype.supplant=function(c){return this.replace(/{([^{}]*)}/g,function(f,g){var d=c[g];return typeof d==="string"||typeof d==="number"?d:f})};z.live({mouseenter:function(){var c=$('<div class="pop_tooltip">'+y+"</div>");c.appendTo($(this));c.css("margin-left",parseInt("-"+(c.width()/2))+"px").show()},mouseleave:function(){$(this).find("div:last").hide().remove()}});z.live("click",function(){var c=$(this).closest("td");var d=$(this);B=$(this).attr("data-ufi");x(c,B,d);u++;return false});q.live({mouseenter:function(){var c=$('<div class="pop_tooltip">'+w+"</div>");c.appendTo($(this));c.css("margin-left",parseInt("-"+(c.width()/2))+"px").show()},mouseleave:function(){$(this).find("div:last").hide().remove()}});q.live("click",function(){var c=$(this).closest("td");B=$(this).attr("data-ufi");A(c,B);return false})};var A=function(d,g){var j="";var f="seen="+(t||$("#top-destinations table").attr("data-seen_ids"))+";ufi="+g+";favorite=0;tmpl=destination_suggestion";var h=false;var c=false;$.ajax({type:"GET",url:"/destinationsuggestion.html",data:f,dataType:"json",beforeSend:function(){d.toggleClass("loading")},complete:function(){d.toggleClass("loading")},success:function(l){if(l.new_destination.image_url){var E=l.new_destination.image_url}else{var E=booking.env.b_default_city_image}if(d.find(".clickblock").length>0){c=true}j+='	<div class="loveicons loveicons_4">';j+='		<a data-ufi="'+l.new_destination.ufi+'" class="social_love "  href="#"><em>Add to favourite locations</em></a>';j+='		<a data-ufi="'+l.new_destination.ufi+'" class="social_remove" href="#"><em>Remove location</em></a>';j+="	</div>";if(c){j+='<a class="clickblock" href="'+l.new_destination.city_url+'"><span class="thumblink">'}else{j+='<a class="thumblink"  href="'+l.new_destination.city_url+'">'}j+='	<img class="round8" src="'+E+'" alt="'+l.new_destination.ufi_name+'" width="100" height="100">';if(c){j+="</span>"}else{j+="</a>"}j+='<div class="promotion_data">';if(!c){j+='	<a class="citylink" href="'+l.new_destination.city_url+'" title="'+l.new_destination.ufi_name+'">'}else{j+='	<span class="citylink">'}j+=l.new_destination.ufi_name;if(!c){j+="</a>"}else{j+="</span>"}j+="	<br>";if(!c){j+='	<a class="countrylink" href="'+l.new_destination.country_url+'">'}else{j+='	<span class="countrylink" href="'+l.new_destination.country_url+'">'}j+='	  <span title="'+l.new_destination.country_name+'" class="flag_16 flag_16_'+l.new_destination.country_code+'">&nbsp;</span>';j+="	  "+l.new_destination.country_name;if(!c){j+="	</a>"}else{j+="	</span>"}var n={num:l.new_destination.hotel_count};var m=String(l.new_destination.hotel_count_tpl);var D=m.supplant(n);j+='	<span class="hotelcount">'+D+"</span>";j+="</div>";if(c){j+="</a>"}t=l.new_destination.seen_ids;if(c){var k=".clickblock, .loveicons"}else{var k=".thumblink, .promotion_data, .loveicons"}d.find(k).fadeOut(function(){$(this).remove();if(!h){d.append(j);h=true}})},error:function(){var k='<span class="destination_error">'+booking.env.b_default_error_msg+"</span>";d.html(k)}})};var x=function(c,f,g){var j="";var h=g.hasClass("social_loved")?0:1;var d="seen="+(t||$("#top-destinations table").attr("data-seen_ids"))+";ufi="+f+";favorite="+h+";tmpl=destination_suggestion";$.ajax({type:"GET",url:"/destinationsuggestion.html",data:d,dataType:"json",beforeSend:function(){c.toggleClass("loading")},complete:function(){c.toggleClass("loading")},success:function(k){g.toggleClass("social_loved");$('<a class="social_loved faded"></a>').appendTo(g).fadeOut(function(){g.find(".pop_tooltip").fadeOut(function(){$(this).remove()})});B=g.attr("data-ufi")}})};return{init:o}}());booking[sNSExperiments].destination_game_home={priority:1,init:function(){booking.destination_game_home.init()}};booking[sNSExperiments].disambiguation_skip_links={priority:9,init:function(){var d=false;$(".more_disamb_results_link").click(function(){if(!d){var c=$(this),m=c.attr("href"),j=c.attr("data-type"),k=c.attr("data-url"),l;if(!k){return true}d=true;$("#disambiguation_partitions_overlay").show();k=(k.replace(/[\&|\;]partition_dest_type\=\w*/g,""))+"&tmpl=disambiguation_block";if(typeof(j)!=="undefined"&&j!=="All"){k+="&partition_dest_type="+j}l=$("#sideNav").find(".current");l.removeClass("current");c.parent().addClass("current");$.get(k,{},function(f){if(f){f=f.replace(/[\&|\;]tmpl=disambiguation_block/g,"");$("#disambiguation_partitions_wrapper").html(f)}d=false})}return false})}};booking[sNSExperiments].disambiguation_survey={priority:9,init:function(){var d={};if(typeof(JSON)!=="undefined"){d=JSON.parse($.cookie("b"))||{}}if(!d.dis_svy){$("#disambiguation_survey").show()}$("#kampylink").click(function(){$("#disambiguation_survey").hide();d.dis_svy=1;if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(d),{path:"/",domain:booking.env.b_domain_end})}})}};booking.dockMyHotels=(function(){var G=[];var D=[];var A;var J;var E;var P;var C=2;var K=function(c){var d='<div class="dock_hotel dock_hotel_'+c.hotel_id;if(c.is_favorite){d+=" dock_hotel_s-favorite"}d+='" data-id="'+c.hotel_id+'"><a href="'+c.url+'"><img src="'+c.square40+'" width="40" height="40" alt=""/></a><div class="dock_hotel_favorite"></div><div class="dock_hotel_name"><div class="dock_hotel_name_inner_1"><div class="dock_hotel_name_inner_2">'+c.title+'</div></div></div><div class="dock_hotel_remove">&times;</div></div>';return d};var F=function(){if(typeof b_cookie==="undefined"){window.b_cookie={}}A=$(".dock");J=$(".dock_hotels");E=$(".dock_close");P=/(.+)\/images\/hotel$/.exec(booking.env.dock_images_url)[1];$.ajax({url:"/last_viewed_hotels",dataType:"json",success:function(c){var d,g=c.length,f="";for(d=0;d<g;d++){c[d].square40=P+c[d].square40;c[d].url+=booking.env.dock_url_params;f+=K(c[d]);G.push(c[d].hotel_id.toString())}J.html(f);H();L("init");if(G.length<C){return}if(b_cookie.dock_my_hotels==="closed"){E.addClass("dock_s-closed").removeClass("dock_s-hidden")}else{A.removeClass("dock_s-hidden");E.removeClass("dock_s-hidden")}}});J.delegate(".dock_hotel_remove","click",function(){var c=$(this).parent().attr("data-id");y(c)});E.bind("click",function(){O()});$(".dock_compare_link").bind("click",function(){booking.google.trackEvent(booking.google.clickTracker,"Dock","Compare link clicked")})};var B=function(d){var c=d.hotel_id;if($.inArray(c,G)>-1){var f=J.find(".dock_hotel_"+c);if(f.hasClass("dock_hotel_s-favorite")){return}else{f.addClass("dock_hotel_s-favorite")}}else{G.unshift(c);J.prepend(K(d))}if(G.length>=C&&A.hasClass("dock_s-hidden")){M();b_cookie.dock_my_hotels="open";z()}$.ajax({url:"/make_hotel_favorite",data:{hotel_id:c,pid:booking.env.pageview_id}});H();L("addHotel",c);booking.google.trackEvent(booking.google.clickTracker,"Dock","Hotel added")};var y=function(c){var d=$.inArray(c,G);if(d===-1){return}G.splice(d,1);var f=J.find(".dock_hotel_"+c);if(G.length>=C){f.remove()}else{if(A.hasClass("dock_s-hidden")){f.remove();E.addClass("dock_s-hidden")}else{I(true,function(){f.remove()})}}$.ajax({url:"/hotel_history",type:"DELETE",data:{hotel_id:c}});H();L("removeHotel",c);booking.google.trackEvent(booking.google.clickTracker,"Dock","Hotel removed")};var M=function(){var c=E.hasClass("dock_s-hidden")?A.add(E):A;E.removeClass("dock_s-closed");c.css("bottom",-45).removeClass("dock_s-hidden").animate({bottom:0},"fast")};var I=function(d,c){var f=d?A.add(E):A;f.css("bottom",0).animate({bottom:-45},"fast",function(){f.addClass("dock_s-hidden");E.addClass("dock_s-closed");if($.isFunction(c)){c()}})};var O=function(){if(A.hasClass("dock_s-hidden")){M();b_cookie.dock_my_hotels="open";z();booking.google.trackEvent(booking.google.clickTracker,"Dock","Close button clicked")}else{I();b_cookie.dock_my_hotels="closed";z();booking.google.trackEvent(booking.google.clickTracker,"Dock","Open button clicked")}};var z=function(){if(typeof JSON==="undefined"){return}$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})};var H=function(){var k=$(".dock_compare_link");var j=k.attr("href");var l=j.split("?");var g=l[0];var h=l[1].split(";");var d={};var c,n=h.length;var f;for(c=0;c<n;c++){f=h[c].split("=");d[f[0]]=f[1]}var m=g+"?";$.each(d,function(o,q){if(o!=="hotel_ids"){m+=o+"="+q+";"}});m+="hotel_ids=";n=G.length;for(c=0;c<n;c++){if(c>0){m+=","}m+=G[c]}k.attr("href",m)};var N=function(c,d){if(!D[c]){D[c]=[]}D[c].push(d)};var L=function(c){var g=D[c];var d;var f=g.length;if(!g){return}for(d=0;d<f;d++){g[d].apply(this,arguments)}};return{init:F,addHotel:B,removeHotel:y,attachObserver:N}}());booking[sNSExperiments].dock_my_hotels={priority:9,init:function(){booking.dockMyHotels.init();booking.dockMyHotels.attachObserver("addHotel",function(g,f){$(".add_to_my_hotels").each(function(){var d=$(this);var c=d.attr("data-id");if(c===f){d.hide()}});$(".remove_from_my_hotels").each(function(){var d=$(this);var c=d.attr("data-id");if(c===f){d.show()}})});booking.dockMyHotels.attachObserver("removeHotel",function(g,f){$(".add_to_my_hotels").each(function(){var d=$(this);var c=d.attr("data-id");if(c===f){d.show()}});$(".remove_from_my_hotels").each(function(){var d=$(this);var c=d.attr("data-id");if(c===f){d.hide()}})});booking.dockMyHotels.attachObserver("init",function(){$(".add_to_my_hotels").live("click",function(){booking.dockMyHotels.addHotel({hotel_id:this.getAttribute("data-id"),square40:this.getAttribute("data-thumbnail"),title:this.getAttribute("data-title"),url:this.getAttribute("data-url"),is_favorite:true})});$(".remove_from_my_hotels").live("click",function(){var d=this.getAttribute("data-id");booking.dockMyHotels.removeHotel(d)})})}};booking[sNSExperimentsLoad].dotd_redesign={priority:9,init:function(){var d=$("#dotd-defer");d.replaceWith(d.data("defer"))}};booking[sNSExperiments].expired_login_message={priority:9,expire_time:600000,init:function(){this.reInit()},reInit:function(){var d=this;setTimeout(function(){d.showLoggedOutPopup()},this.expire_time)},showLoggedOutPopup:function(){$(".user_salutation").each(function(){var d=$(this).attr("id");if(d=="hidden_login_form"){$(this).removeAttr("id");$(this).show()}else{if(d=="my_links"){$(this).remove()}}});$("#link_my_profile").remove();booking.lightbox.open(null,null,null,"lb_logged_out")}};$(function(){$.extend($.expr[":"],{containsi:function(g,h,j){return(g.textContent||g.innerText||"").toLowerCase().indexOf((j[3]||"").toLowerCase())>=0}});$("#search_form").submit(function(){var g=$("#keyword").val();if(!g.length){return false}var h=["item_searching","topten","item_volcano_eruption","item_roomtypes","item_pricing","item_creditcards","item_payments","item_reservation_process","item_hotelpolicies","item_confirmation","item_extrafacilities","item_cancellation","item_directions","item_reviews",];$(h).each(function(d,c){hideEl(c)});$("#search_results").children().remove();var f=[];$('a:containsi("'+g+'")').each(function(m,c){var d=$(c).parent(),l=d.next(),n=l.attr("id");if(n&&n.match(/faqa\d+/)){d.clone().appendTo("#search_results");l.clone().appendTo("#search_results");f.push(n)}});if(!f.length){$("#search_results").append("<p>Nothing found</p>")}$.ajax({url:"/faqsearch",data:{q:g,r:f.join(","),lang:""}});return false});$(".staticmenustyle").children("li").children("a").each(function(g,f){$(f).click(function(){$("#search_results").children().remove()})})});booking.myFavoriteHotels=(function(){var M=[],V=[],N,W,X,ai,O=[],U=1,ac=true,ab=$(".favorites_loaded_list"),S,I,aj=1023,J=3,T=false,ad='(<a class="b_change_dates" href="#edit_dates">'+booking.env.change_dates+"</a>)",ae='<a class="b_change_dates" href="#edit_dates">Select dates</a>';var Z=function(c){var d='<div class="favorite_hotel favorite_hotel_'+c.hotel_id;if(c.is_favorite){d+=" favorite_hotel_s-favorite"}d+='" data-id="'+c.hotel_id+'"><a href="'+c.url+'"><img src="'+c.square40+'" width="30" height="30" alt=""/></a><div class="favorite_hotel_name"><div class="favorite_hotel_name_inner_1"><div class="favorite_hotel_name_inner_2">'+c.title+'</div></div></div><div class="favorite_hotel_remove">&times;</div></div>';return d};$("#show_fav").click(function(d){var l,o=$(window),q=M.length,c=261,j=o.scrollTop()+60,n=o.width(),g=Math.round((n-aj)/2),h=Math.floor(g/c*2);if(booking.env.current_hotel_id&&!$(".remove_from_my_hotels").is(":visible")){current_viewed_hotel=booking.env.current_hotel_id;var m=booking.env.comparisonpage+"hotel_ids="+current_viewed_hotel+","+M;T=true;q+=1}else{var m=booking.env.comparisonpage+"hotel_ids="+M}console.log(m);for(var k=h;k-->0;){if(q>J){aj+=c;J++;g-=c/2}}$(".favorites_comparison").load(m+" .hotel_comparison_matrix",function(){var u=$(".hotel_comparison_matrix");S=$("#switch_hotel_left");I=$("#switch_hotel_right");u.find("h1.title").after('<a id="close_fav_lightbox" href="#">'+booking.env.close_tag+"</a>");var w=$(".starts_favorites");w.find("h1 a").append(w);w.remove();var v=u.find(".notice");var t=v.html();loadedElementHeight=u.height();if(t!=null){u.find("h1.title").after('<p class="price_dates">'+t+"</p>")}else{}$(".remove_hotel2").html(booking.env.remove_favorite+'<span class="fav_hotel_removeIcon"></span>').addClass("remove_from_my_hotels");if(T){$(".hotel-1").addClass("current_viewed_hotel")}$(".bigtopbuttons").remove();v.remove();ac=false;l=u.height()+82;$(".shadow_border").css({width:aj+20+"px",height:l+"px"});f.css({width:aj-62});$(".hotel_comparison_matrix").css({width:aj-84+"px"});if(q>J){}});ab.css({visibility:"hidden"});var f=$(".favorites_comparison");ab.css({top:j+"px",left:g+"px",width:aj,visibility:"visible"}).show();d.preventDefault()});$("#close_fav_lightbox").live("click",function(c){ab.hide();c.preventDefault()});$(".b_change_dates").live("click",function(){booking[sNSStartup].lightbox.show($("#editDates"),{customWrapperClassName:booking.env.b_site_experiment_av_calendar?"modal-edit-dates-av":"modal-edit-dates"})});ab.find("ul.tags li").live({mouseover:function(){$("li[title='"+$(this).attr("title").replace("'","\\'")+"']").addClass("highlight-tag")},mouseout:function(){$("li[title='"+$(this).attr("title").replace("'","\\'")+"']").removeClass("highlight-tag")}});function Y(){var c,d;ab.find("td").live({mouseover:function(g){d=$(this).index()+1;if(d!=1){c=ab.find("td:nth-child("+d+")");c.addClass("hoverHotel");c.first().addClass("hoverHotelFirst");c.last().addClass("hoverHotelLast");var f=c.find(".prev_hotel, .next_hotel");f.show()}},mouseout:function(){if(d!=1){c.removeClass("hoverHotel");c.first().removeClass("hoverHotelFirst");c.last().removeClass("hoverHotelLast");c.find(".prev_hotel, .next_hotel").hide()}}})}function ah(h){var c,g=booking.env.current_hotel_id?'<td clas="hotel-1"></td>':"";for(var d=0;d<h;d++){c+='<td><a href="#" class="change_the_hotel" data-id="'+O[d].hotel_id+'"><img src="'+O[d].square40+'" width="30" height="30" alt=""/>'+O[d].title+"<span></span></a></td>"}var f="<tr><td>Select hotels to compare</td>"+g+c+"</tr>";$("#tblHotelComparisson thead").prepend(f)}$("#close_fav").click(function(c){$(".favorites_loaded_list").slideUp("slow",function(){$("#favorite_thumbs").show()});$(this).hide();c.preventDefault()});var K=function(){if(typeof b_cookie==="undefined"){window.b_cookie={}}N=$("#show_fav");$noFavorites=$(".no_favorites");W=$(".my_favorites_bar");X=$(".dock_close");ai=/(.+)\/images\/hotel$/.exec(booking.env.dock_images_url)[1];$.ajax({url:"/favorites",dataType:"json",success:function(c){var d,g=c.length,h="";for(d=0;d<g;d++){c[d].square40=ai+c[d].square40;c[d].url=booking.env.domain_for_app+c[d].url+booking.env.dock_url_params;h+=Z(c[d]);O.push(c[d]);M.push(c[d].hotel_id.toString());$(".favorites_bar_buttons").each(function(){var j=$(this);if(j.attr("data-id")==c[d].hotel_id.toString()){j.hide();j.closest(".remove_from_my_hotels").show()}})}W.html(h);aa("init");var f=M.length;if(f<U){$noFavorites.show();N.addClass("show_all_favorites-hidden");N.hide();return}if(f>=2){}if(b_cookie.dock_my_hotels==="closed"){X.addClass("dock_s-closed").removeClass("show_all_favorites-hidden")}else{N.removeClass("show_all_favorites-hidden");X.removeClass("show_all_favorites-hidden");$noFavorites.hide()}}});W.delegate(".favorite_hotel_remove","click",function(){var c=$(this).parent().attr("data-id");L(c)});X.bind("click",function(){toggleDock()});$(".dock_compare_link").bind("click",function(){})};var R=function(d){var c=d.hotel_id;if($.inArray(c,M)>-1){var f=W.find(".favorite_hotel_"+c);if(f.hasClass("favorite_hotel_s-favorite")){return}else{f.addClass("favorite_hotel_s-favorite")}}else{M.unshift(c);W.prepend(Z(d))}if(M.length>=U&&N.hasClass("show_all_favorites-hidden")){af();b_cookie.dock_my_hotels="open";P()}if(M.length>=2){}$.ajax({url:"/favorites/add",type:"POST",data:{hotel_id:c,pid:booking.env.pageview_id}});aa("addHotel",c);ac=true;booking.google.trackEvent(booking.google.clickTracker,"FavoritesBar","Hotel added")};var L=function(c){var d=$.inArray(c,M);if(d===-1){return}M.splice(d,1);var f=W.find(".favorite_hotel_"+c);if(M.length>=U){f.remove()}else{if(N.hasClass("show_all_favorites-hidden")){f.remove();X.addClass("show_all_favorites-hidden");$noFavorites.show()}else{Q(true,function(){f.remove()})}}if(M.length<2){N.hide()}$.ajax({url:"/favorites/delete",type:"DELETE",data:{hotel_id:c}});aa("removeHotel",c);ac=true;booking.google.trackEvent(booking.google.clickTracker,"FavoritesBar","Hotel removed")};var af=function(){var c=X.hasClass("show_all_favorites-hidden")?N.add(X):N;X.removeClass("dock_s-closed");$noFavorites.hide();c.css("bottom",-45).removeClass("show_all_favorites-hidden").animate({bottom:0},"fast")};var Q=function(d,c){var f=d?N.add(X):N;f.css("bottom",0).animate({bottom:-45},"fast",function(){f.addClass("show_all_favorites-hidden");X.addClass("dock_s-closed");$noFavorites.show();if($.isFunction(c)){c()}})};var P=function(){if(typeof JSON==="undefined"){return}$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})};var ag=function(c,d){if(!V[c]){V[c]=[]}V[c].push(d)};var aa=function(d){var c=V[d];var f;var g=c.length;if(!c){return}for(f=0;f<g;f++){c[f].apply(this,arguments)}};return{init:K,addHotel:R,removeHotel:L,attachObserver:ag}}());booking[sNSExperiments].favorites_bar={priority:9,init:function(){booking.myFavoriteHotels.init();booking.myFavoriteHotels.attachObserver("addHotel",function(g,f){$(".add_to_my_hotels").each(function(){var d=$(this);var c=d.attr("data-id");if(c===f){d.hide()}});$(".remove_from_my_hotels").each(function(){var d=$(this);var c=d.attr("data-id");if(c===f){d.show()}})});booking.myFavoriteHotels.attachObserver("removeHotel",function(g,f){$(".add_to_my_hotels").each(function(){var d=$(this);var c=d.attr("data-id");if(c===f){d.show()}});$(".remove_from_my_hotels").each(function(){var d=$(this);var c=d.attr("data-id");if(c===f){d.hide()}})});booking.myFavoriteHotels.attachObserver("init",function(){$(".add_to_my_hotels").live("click",function(){booking.myFavoriteHotels.addHotel({hotel_id:this.getAttribute("data-id"),square40:this.getAttribute("data-thumbnail"),title:this.getAttribute("data-name"),url:this.getAttribute("data-url"),is_favorite:true})});$(".remove_from_my_hotels").live("click",function(){var f=this.getAttribute("data-id");booking.myFavoriteHotels.removeHotel(f);if($(this).hasClass("remove_hotel2")){var h=$(this).parent().parent().index()+1;var g=$(".favorites_loaded_list").find("td:nth-child("+h+")");g.fadeOut("500").remove()}$(this).parent(".hotelinfo").css("background-color","#FFD3D3").fadeOut("500",function(){$(this).remove()})})})}};booking[sNSStartup].fdTutorial={priority:8,init:function(){$("a.fd_start").click(function(){$("#tutorial_popup_2").delay(300).fadeIn(300);return false});$("a.fd_close").click(function(){var f=$(this).attr("id");var g=parseInt(f.split("_")[1]);$("#tutorial_popup_"+g).fadeOut(300);return false});$("a.fd_next").click(function(){var f=$(this).attr("id");var g=parseInt(f.split("_")[1]);var h=g+1;$("#tutorial_popup_"+g).fadeOut(300);$("#tutorial_popup_"+h).delay(300).fadeIn(300);return false});$("a.fd_restart").click(function(){var f=$(this).attr("id");var g=parseInt(f.split("_")[1]);$("#tutorial_popup_"+g).fadeOut(300);$("#tutorial_popup_1").delay(300).fadeIn(300);return false})}};booking[sNSStartupLoad].flash_deals_for_city={priority:9,init:function(){$("#flash_deal_city_sr #city_deal").change(function(){$("#flash_deal_city_sr")[0].submit()})}};booking[sNSStartup].general_links_loaded={priority:9,init:function(){$("#general_links_load button, #general_links_load a").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Footer Links",booking.env.b_site_experiment_general_links_loaded)})}};booking[sNSExperimentsLoad].google_plus_one_button={priority:9,init:function(){if(!($.browser.msie&&parseInt($.browser.version,10)>=9)){var g=document.createElement("script");g.type="text/javascript";g.async=true;g.src="//apis.google.com/js/plusone.js";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(g,f)}}};booking[sNSExperiments].header_2012=(function(){var g=function(){$("#b_nav_profile").bind("click",function(){$(this).toggleClass("selected");if($("#b_header").hasClass("profile_slide_down")){$("#b_header").removeClass("profile_slide_down").addClass("profile_slide_up")}else{$("#b_header").removeClass("profile_slide_up").addClass("profile_slide_down")}});$(".profile_login_switcher").bind("click",function(){$("#profile_forms").toggleClass("profile_sign-in").toggleClass("profile_sign-up")});$("select","#header_currency").bind("change",function(){$(this).parent("form").submit()});$("select","#header_language").bind("change",function(){$(this).parent("form").submit()})};var f=function(){g()};return{init:f}}());booking[sNSStartup].header_cleaned_links={priority:9,init:function(){$(".forgot_link_look").click(function(){window.open($(this).attr("data-href"),"_blank","left=42,top=42,height=502px,width=440px,resizable=false")});$("#foldout_loggedin li").click(function(){var d=$(this);if(d.hasClass("seo_link_look")){window.location=d.attr("data-href")}})}};$(".help_foldout").click(function(){$("#helpPopup").slideToggle();$(this).toggleClass("open");return false});$(".menu_close_link").click(function(){$("#helpPopup").slideToggle();return false});(function(f,h,g){h[g].images_on_demand={priority:1,init:function(){var o=$("img[data-src]"),c=100,d=$(f),q=function(j){return(d.scrollTop()+d.height())>(j.offset().top-c)},m=function(){var j=o.filter("[data-src]");if(j.length===0){d.unbind("scroll resize",m);return}j.each(function(){if(q($(this))){n(this)}})},n=function(j){var k=j.getAttribute("data-src");j.removeAttribute("data-src");j.setAttribute("src",k)};m();d.bind("scroll resize",m)}}})(this,this.booking,this.sNSExperiments);booking[sNSStartup].improve_calendar_closing={priority:9,init:function(){$(document.body).click(function(f){var g=$(f.target).parents("#calendar_popup").length;var h=$(f.target).parents(".calendarLink").length;if(!g&&!h){$(this).trigger("close_calendar",f.target)}});return true}};booking[sNSStartup].filterbox={priority:9,init:function(){if(booking.env.b_action==="searchresults"){$("div.filtercategory").each(function(){$(this).click(function(){$div=$(this).parents("div").eq(0).find("div.filteroptions");if($(this).hasClass("toggla_hide")){mySlideToggle($div);$(this).removeClass("toggla_hide")}else{mySlideToggle($div);$(this).addClass("toggla_hide")}this.blur();return false})})}}};booking[sNSExperimentsLoad].lazy_load_print_css={priority:9,init:function(){var d=document.createElement("link");d.rel="stylesheet";d.type="text/css";d.href=booking.env.print_css_href;d.media="print";document.getElementsByTagName("head")[0].appendChild(d)}};booking[sNSStartup].login_foldout={priority:9,fontchange:false,init:function(){var d=this;$("#login_redesign").click(function(){if(!$(this).hasClass("no_arrow")){if($(this).hasClass("login_opened")){$(this).removeClass("login_opened")}else{$(this).addClass("login_opened")}$("#login-form_wrapper fieldset").toggle();$("#login_open, #login_close, #login_optional").toggle()}return false});$(".in-pagelogin-form").submit(function(){if(booking.env.auth_level<1){var c=$(".in-pagelogin-form").height()-11}else{var c=$(".in-pagelogin-form").height()+19}$("#page_login_loading").css("height",c+"px").show()});$(".login_foldout").each(function(){var c=$("#loginPopup").height();if(c==0){var c=1000}$("#loginPopup").css({height:"0px","overflow-y":"hidden",display:"none"});$("#loginPopup").attr({shown:"false"});$(this).click(function(){d.toggle(document.getElementById("loginPopup"),c);return false});$("#closeLoginPopup").click(function(){d.toggle(document.getElementById("loginPopup"),c);return false});$(".stay_login").submit(function(){$("#foldout_error").hide();$("#login_loading").css("height",$("#foldout_login").height()+"px");$("#login_loading").show();var f=$("#login-form").height();$("#loginPopup").css({height:f+"px"});$("#loginPopup").animate({height:f+"px"},500,function(){});setTimeout(function(){d.hideLoader()},10000)})});$('input[name="username"]').each(function(){if(!isNaN($(this).val())){$(this).val("");var c=$(this).parents("form").get(0);$('input[name="password"]',c).val("")}})},thirdParty:function(g,k,h,j){if(k&&!j){$("#log_tar").attr("src",h)}if(j){$("#email_send").show("slow")}},thirdPartyCancel:function(f,g,h){this.hideLoader();if(typeof $.noticeAdd!="undefined"){$.noticeAdd({text:"\n \n \n "+g+" \n \n \n ",stay:false,stayTime:3000,type:"users",close:"all",destination:""})}if(h){$("#email_send").show("slow")}},signupLight:function(f){this.hideLoader();if(f.signupstatus=="OK"){$("#foldout_error_signup").hide();$("#email_place_holder").text($("#username").val());$("#signup_form_light").hide();$("#signed_up_message").show()}else{if(f.error){var g=unescape(f.error)}else{var g=""}$("#foldout_error_signup").html(g).show()}booking[sNSStartup].new_personal_menu.recheckHeight()},reCall:function(v){var A=this;if(v.reload){booking.env.b_req_login="1"}if(v.loginstatus=="OK"){if(v.userlanguage||v.currency){var D=booking.env.b_this_url;var x=(D.indexOf("?")>0)?"&":"?";if(v.userlanguage){D+=x+"lang="+v.userlanguage;x="&"}if(v.currency){D+=x+"selected_currency="+v.currency}D.replace("logout=1","");if(booking.env.b_site_experiment_reload_secure&&booking.env.b_nonsecure_hostname_https){D.replace(booking.env.b_nonsecure_hostname,booking.env.b_nonsecure_hostname_https)}document.location.href=D}else{if(booking.env.b_redirect){document.location.href=booking.env.b_redirect}else{if(booking.env.b_req_login=="1"){var z=booking.env.b_this_url;z.replace("logout=1","");document.location.href=z}else{var w=booking.env.b_this_url;w.replace("logout=1","");w=(w.indexOf("?")>0)?w+";logout=1":w+"?logout=1";sLoginLinks=v.loginlink.replace("sign_out_url",w);$("#login-form_wrapper fieldset").hide();$(".welcome_login_link").hide();$("#login_open, #login_close, #login_optional").hide();$(".hide_on_login").hide("slow");$(".show_on_login").show();if($("#login_redesign").length){var B=$("#login_redesign").get(0);$(B).addClass("no_arrow");$(B).mouseover(function(){return false});$(B.parentNode).mouseover(function(){return false})}var t=window.setTimeout(function(){$("#loginPopup").css({height:"0px","overflow-y":"hidden",display:"none"});$("#loginPopup").attr({shown:"false"});$("#password_input_top").val("");$("#listnav_user .user_salutation").hide();$("#listnav_user .user_salutation").attr("id","hidden_login_form");if(v.historylink){$("#myActivityHeader .my_history_header").text(v.historylink)}if(v.avatarurl&&v.avatarurl!="0"){if($("#my_image_room").length){$("#my_image_room").attr("src",v.avatarurl);$("#my_image_room").css({padding:"0",width:"24px",height:"24px"})}if($(".my_image img").length){$(".my_image img").each(function(){$(this).attr("src",v.avatarurl);if($(".head_firstname").length){$(this).css({"margin-top":"-5px",width:"26px",height:"26px"})}})}else{if($("#b_nav_profile").length){var c=v.avatarurl.replace("square_32","square_128");$("#b_nav_profile").addClass("has_avatar").css("background-image","url("+c+")")}}}else{if(v.defaultavatar!=0){if($(".my_image img").length){$(".my_image img").addClass("def_avtr");$(".my_image img").addClass("t_s_avtr_"+v.defaultavatar);$(".my_image img").css({"margin-top":"-4px","margin-left":"-1px",width:"24px",height:"24px"})}}}setTimeout(function(){var d=booking.env.js_experiment_tracking.show_menu_after_login;booking.track.exp(d);A.preShowMenu()},100);if(!$("#b_header").length){if(typeof $.noticeAdd!="undefined"){$.noticeAdd({text:"\n \n \n "+unescape(v.growl1)+"<br>"+unescape(v.growl2)+" \n \n \n ",stay:false,stayTime:3000,type:"users",close:"all",destination:"",addClassName:"notice_login"})}}},500);if(v.email!=""){if($("#email_confirm").length&&$("#email_confirm").val()==""){$("#email_confirm").val(v.email);$("#error_email_confirm").hide();$("#label_email_confirm").removeClass("val-no").addClass("val-yes")}if($("#email").length&&$("#email").val()==""){$("#email").val(v.email);$("#error_email").hide();$("#label_email").removeClass("val-no").addClass("val-yes")}}if(v.fdata1){if($("#address1").length&&$("#address1").val()==""){$("#address1").val(v.fdata1)}}if(v.fdata2){if($("#city").length&&$("#city").val()==""){$("#city").val(v.fdata2)}}if(v.fdata3){if($("#zip").length&&$("#zip").val()==""){$("#zip").val(v.fdata3)}}if(v.fdata4){if($("#cc1").length&&$("#cc1").val()==""){$("#cc1").val(v.fdata4)}}if(v.fdata5){if($("#phone").length&&$("#phone").val()==""){$("#phone").val(v.fdata5)}}var y=" ";if(v.fdata6){if($("#lastname").length&&$("#lastname").val()==""){$("#lastname").val(v.fdata6);$("#error_lastname").hide();$("#label_lastname").removeClass("val-no").addClass("val-yes")}$(".head_lastname").text(v.fdata6);y=v.fdata6+" "}if(v.fdata7){if($("#firstname").length&&$("#firstname").val()==""){$("#firstname").val(v.fdata7);$("#error_firstname").hide();$("#label_firstname").removeClass("val-no").addClass("val-yes")}$(".head_firstname").text(v.fdata7);y+=v.fdata7}else{if(v.fdata6){$(".head_firstname").text("")}}if($(".login_for_name").length){if(y!=" "){$(".login_for_name").val(y);$(".login_for_name").css({color:"#003580"})}}$("input[name='username']").val(v.email);if(booking.lightbox&&booking.lightbox.isopen){booking.lightbox.close()}if($("#update_profile_row").length){$("#update_profile_row").show()}booking[sNSStartup].new_personal_menu.closeSelect(null,true,v.hasbookings);if(booking[sNSStartup].hide_email_confirm){booking[sNSStartup].hide_email_confirm.hideConfMailInit()}if(v.has_stored_cc>0){current_book_url=booking.env.b_this_url;current_book_url=current_book_url.replace(";logout=1","");current_book_url=current_book_url+";tmpl=profile/creditcards_ajax;";$("#bs3_cc_form #book_credit_card").load(current_book_url+" #book_credit_card");$("#cc_img").remove()}$(".login_text").hide();$(".loggedin_text").show();$("#multiple_login").hide();if(v.unreadmsg&&v.unreadmsg>0){$("#current_account_foldout .placeholder_hnm").text(v.unreadmsg).addClass("header_new_messages")}if(v.pendingreviews&&v.pendingreviews>0){$("#current_account_foldout .placeholder_hnb").text(v.pendingreviews).addClass("header_new_bookings")}A.hideLoader();if(booking.env.b_site_experiment_reload_secure&&booking.env.b_nonsecure_hostname_https){this.replaceSecure()}if(booking.env.b_action=="book"){if(booking[sNSStartup].authenticated_email_change){if($(".auth_user_info #email").length){$(".auth_user_info #email").addClass("email_change");booking[sNSStartup].authenticated_email_change.trackAuthenticatedEmailChange()}}}if($(".loadedContent").length){$(".loadedContent").removeClass("loadedContent")}}}}}else{if(v.error){var q=unescape(v.error)}else{var q=""}var u=(v.nofoldout)?false:true;var C=window.setTimeout(function(){if(u){$("#foldout_error").html(q).show();var c=$("#foldout_error").height()+32;$("#old_pin_login").css("top",c+"px");booking[sNSStartup].new_personal_menu.openSelect("current_account")}else{if($("#page_login_error").length){$("#page_login_error").html(q).show()}if($("#bs2_page_login_error").length){$("#bs2_page_login_error").html(q).show()}}if(booking.env.b_site_experiment_clean_wrong_login){$('input[name="password"]').val("")}},500);A.hideLoader();if(v.trackerror){booking.env.trackExperiment(booking.env.js_experiment_tracking.no_login_error,"error_logging_in")}}},toggle:function(k,g){var h=k.getAttribute("shown");if(h=="false"){$("#foldout_error").hide();$(k).css("display","block");if(g==1000){var j=$("#loginPopup form").get(0);g=$(j).height()}$(k).animate({height:g+"px"},500,function(){document.getElementById("username_input_top").focus()});k.setAttribute("shown","true")}else{$(k).animate({height:"0px"},500,function(){$(this).css("display","none")});k.setAttribute("shown","false")}},hideLoader:function(){$("#login_loading").hide();$("#signup_loading").hide();$("#page_login_loading").hide()},replaceSecure:function(){var g=document.getElementsByTagName("a");for(var k=0;k<g.length;k++){var j=g[k].href;j=j.replace(booking.env.b_nonsecure_hostname,booking.env.b_nonsecure_hostname_https);g[k].href=j}var h=document.getElementsByTagName("form");for(var k=0;k<h.length;k++){var j=h[k].action;j=j.replace(booking.env.b_nonsecure_hostname,booking.env.b_nonsecure_hostname_https);h[k].action=j}},preShowMenu:function(){booking[sNSStartup].new_personal_menu.openSelect("current_account");oThat.moused_menu=false;$("#current_account").mouseenter(function(){oThat.moused_menu=true});setTimeout(function(){if(!oThat.moused_menu){booking[sNSStartup].new_personal_menu.closeSelect()}},4000)}};booking[sNSStartup].new_personal_menu={priority:9,opening_state:0,cur_open:"",max_select_height:240,is_ie:0,openSlow:false,init:function(){var d=this;if(!booking.env.new_personal_menu_ie_performance){if($.browser.msie){$(".select_foldout ul li a").mouseenter(function(){$(this).addClass("hover_class")});$(".select_foldout ul li a").mouseleave(function(){$(this).removeClass("hover_class")})}}if($(".b_msie_6").length){this.is_ie=6}if($(".b_msie_7").length){this.is_ie=7}$("#signup_form_light").submit(function(){if(booking.env.js_experiment_tracking.light_signup){booking.env.trackExperiment(booking.env.js_experiment_tracking.light_signup)}var c=$("#signup_form_light").height()+55;$("#signup_loading").css("height",c+"px");$("#signup_loading").show();setTimeout(function(){d.hideLoader()},10000)});$("#signup_form_regular").submit(function(){if(booking.env.js_experiment_tracking.light_signup){booking.env.trackExperiment(booking.env.js_experiment_tracking.light_signup)}});$(".stay_login").submit(function(){$("#foldout_error").hide();$("#login_loading").css("height",$("#foldout_login").height()+"px");$("#login_loading").show();var c=document.getElementById("username_input_top").value;if(c==""){d.hideLoader();$('label[for="username_input_top"]').css({color:"#B30000","font-weight":"bold"});$("#username_input_top").focus();return false}else{var j=/^[0-9[\.]+$/.exec(c);if(j){var k=$("#bm_log").val();k+=(k.indexOf("?">0))?"&":"?";var h=$("#password_input_top",this).val();k+="pincode="+h+"&bn="+c;$("#tar_tmpl").attr("value","");$(this).attr("action",k);$(this).attr("target","_top")}}setTimeout(function(){d.hideLoader()},10000)});$(".select_box").mouseenter(function(){$(this).addClass("sel_hover")});$(".select_box").mouseleave(function(){$(this).removeClass("sel_hover")});$("body").click(function(c){if(d.opening_state==2){var g=$(c.target);if($(g).length){if(!$(g).parents("#current_account_foldout").length){d.closeSelect()}}}if(booking[sNSStartupLoad].googleMaps&&booking[sNSStartupLoad].googleMaps.map_opened){var h=$(c.target);if((booking.env.map_handle_outside_click||booking.env.useLargerMapSr)&&(h.length&&(!h.parents("#b_map_container").length&&h.attr("id")!=="close_map"))){$("#close_map").click()}}});$(".select_box").click(function(c){if(d.opening_state==0){d.openSelect($(this).attr("id"))}else{if(d.cur_open!=$(this).attr("id")){d.closeSelect($(this).attr("id"))}else{if(!$(c.target).parents("#current_account_foldout").length){d.closeSelect()}}}});$("#login_jump").click(function(){d.scrollToLogin();return false})},recheckHeight:function(){var d=$("#current_account_foldout .select_foldout_wrap").height()+15;$("#current_account_foldout").animate({height:d+"px"},400)},resetLeftPos:function(g){$(g).css({display:"block",overflow:"hidden","margin-left":"-300px"});var f=$(g).parents(0).width()-$(g).width()-2;if(this.is_ie==6||this.is_ie==7){f=f-$(g).parents(0).width()}if(f>0){f=-2}$(g).css({"margin-left":f+"px"})},openSelect:function(t){booking[sNSStartup].accounts_for_everybody.passWdInit();oThat=this;this.cur_open=t;var q="#"+t+"_foldout";$("#"+t).addClass("sel_open");if(t=="current_account"){if($("#foldout_loggedin").css("display")=="block"){booking.env.trackExperiment(booking.env.js_experiment_tracking.better_signout_icon)}else{var u=booking.env.js_experiment_tracking.show_password+","+booking.env.js_experiment_tracking.switch_login_usps;booking.env.trackExperiment(u)}}this.opening_state=1;$(q).css({display:"block",opacity:"0",overflow:"hidden",height:"400px",width:"1000px"});var n=$(".select_foldout_wrap",q).get(0);$(n).css({"overflow-y":"hidden",height:"auto"});var z=$(n).height();var v=$(n).width();var w=this.max_select_height;if($(q).hasClass("flex_foldout")){var o=v+10}else{if(!$("#"+t).hasClass("sel_done")){var o=v+20;$("#"+t).addClass("sel_done")}else{var o=v}}if(z>=this.max_select_height-10&&$(q).attr("id")!="current_account_foldout"){if($(q).hasClass("flex_foldout")){w=z+10;if(w<300){w=300}}else{$(n).css({"overflow-y":"scroll",height:"230px",width:o+"px"});if(!this.is_ie==6&&!this.is_ie==7){o+=10}}}else{w=z+10;$(n).css({"overflow-y":"hidden",height:"auto"})}if(this.is_ie==6){$(q).css({opacity:"1",height:"0px",width:"0px"});$(q).css({width:"auto"});$(n).css({width:"auto"});v=$(n).width();o=v+10}else{$(q).css({opacity:"1",height:"0px",width:"auto"})}if($(q).hasClass("left_foldout")&&!booking.env.rtl){oThat.resetLeftPos($(q));$(q).css({width:o+"px","padding-right":"0px"})}else{$(q).css({width:o+"px","padding-right":"10px"})}if(this.is_ie==6||this.is_ie==7){var y=$(q).parents(0).width();if($(q).hasClass("left_foldout")&&!booking.env.rtl){iFixedPointEx=y-$(q).width()-2;if(iFixedPointEx<0){y=y-iFixedPointEx}}if(this.is_ie==6){var x=210;if($("#multiple_login",q).length){if($("#foldout_loggedin").css("display")!="block"){x=482}else{x=182}}$(q).css({"margin-left":"-"+y+"px",width:x+"px","padding-right":"18px"})}else{$(q).css({"margin-left":"-"+y+"px",width:o+"px"});$(".select_foldout_wrap",q).css({"overflow-x":"hidden"})}}if(this.openSlow){this.openSlow=false;$(q).animate({height:w+"px"},800)}else{$(q).css({height:w+"px"})}setTimeout(function(){oThat.opening_state=2},200)},closeSelect:function(h,g,k){var j=this;if(g){$("#foldout_login").css({display:"none"});$("#multiple_login").css({display:"none"});$("#foldout_loggedin").css({display:"block"});if(k){$("#stats_menu_link").css({display:"block"})}}if(this.opening_state==2){$(".select_foldout").animate({height:"0px"},200,function(){$(".select_foldout").css({display:"none"});$(".select_box").removeClass("sel_open");if(h&&h!=null){j.openSelect(h)}});this.opening_state=0}if($("#user_searches_menu").length){booking[sNSStartup].top_saved_searches.closeTabs()}},scrollToLogin:function(){if(booking.env.rtl){$("body").scrollTo({top:0,left:0},500)}else{$("body").scrollTo({top:0,left:1000},500)}this.openSlow=true;if(this.opening_state==0){this.openSelect("current_account")}else{this.closeSelect("current_account")}},hideLoader:function(){$("#login_loading").hide();$("#signup_loading").hide();$("#page_login_loading").hide()}};booking[sNSStartup].my_social_networks={priority:9,tp_window:null,tp_cur:"",cur_state:"CLOSED",window_sizes:{yahoo:[510,500],facebook:[500,450],google:[850,510]},init:function(){var d=this;$(".signup_tp a, #re_log_in a, a.connect_with").click(function(){booking[sNSStartup].new_personal_menu.opening_state=2;var m=this;var u=$(m).attr("href");var q=$(m).attr("id");var t=u;$("#login_loading").show();if(d.cur_state!="OPENING"){if(d.tp_window){if(d.tp_cur!=q.toLowerCase()){window.clearInterval(d.checking_in);d.tp_window=null;d.cur_state="CLOSED"}else{d.tp_window.focus()}}else{d.cur_state="OPENING";d.tp_cur=q.toLowerCase();var n=500;var o=500;if(d.window_sizes[d.tp_cur]){var n=d.window_sizes[d.tp_cur][0];var o=d.window_sizes[d.tp_cur][0]}var c="width="+n+",height="+o+",toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=1";d.tp_window=window.open(t,"",c);var v="rem_provider="+d.tp_cur;if(booking.env.b_this_url.indexOf(v)>-1){booking.env.b_this_url=booking.env.b_this_url.replace(";"+v,"");booking.env.b_this_url=booking.env.b_this_url.replace(v,"")}d.checking_in=window.setInterval(function(){if((d.tp_window&&d.tp_window.closed)||!d.tp_window){$("#login_loading").hide();$("#page_login_loading").hide();window.clearInterval(d.checking_in);d.tp_window=null;d.cur_state="CLOSED"}},1000);d.cur_state="OPENED";if(d.tp_window){d.tp_window.focus()}}}return false})}};booking[sNSStartup].merge_mybooking_myaccount={priority:9,old_pin_shown:false,init:function(){var d=this;$("#user_pin_link").click(function(){$("#foldout_error").hide();$("#old_pin_login").css({display:"block",top:"0px"});$("#existing_user_login .login_right").hide();if($(".b_msie_8").length){$("#old_pin_login").css({left:"240px"})}else{$("#old_pin_login").animate({left:"240px"})}d.old_pin_show=true;return false});$("#new_user").click(function(){d.newUserOpen(true);booking.env.trackExperiment(booking.env.js_experiment_tracking.newsletter_checkbox_header)});$("#existing_user").click(function(){d.newUserOpen(false)});$("#old_pin_login a").click(function(){$("#foldout_error").hide();$("#old_pin_login").css({top:"0px"});$("#old_pin_login").animate({left:"500px"},function(){$("#old_pin_login").css("display","none")});d.old_pin_show=false;return false})},newUserOpen:function(d){if(this.old_pin_show){$("#old_pin_login").hide();$("#existing_user_login .login_right").show()}if(d){$("#existing_user_login").hide();$("#foldout_signup").show();$("#existing_user").removeClass("active");$("#new_user").addClass("active");booking[sNSStartup].new_personal_menu.recheckHeight()}else{$("#existing_user_login").show();$("#foldout_signup").hide();$("#new_user").removeClass("active");$("#existing_user").addClass("active");booking[sNSStartup].new_personal_menu.recheckHeight()}}};booking[sNSStartup].welcome_user={priority:9,old_pin_shown:false,init:function(){$("#welcome_login").click(function(){booking[sNSStartup].new_personal_menu.openSelect("current_account");booking[sNSStartup].merge_mybooking_myaccount.newUserOpen(false);return false});$("#welcome_signup").click(function(){booking[sNSStartup].new_personal_menu.openSelect("current_account");booking[sNSStartup].merge_mybooking_myaccount.newUserOpen(true);booking.env.trackExperiment(booking.env.js_experiment_tracking.newsletter_checkbox_header);return false})}};booking[sNSStartup].faq_login_foldout={priority:9,init:function(){if(booking.env.b_action=="general"&&booking.env.auth_level=="0"){$(".open_top_login").click(function(){booking[sNSStartup].new_personal_menu.openSelect("current_account");booking[sNSStartup].merge_mybooking_myaccount.newUserOpen(false);$("body").scrollTo({top:0,left:0},500);return false})}}};$(function(){$("#msg_low_avail .button_close").click(function(d){d.preventDefault();$("#msg_low_avail").fadeOut("fast")})});booking.ensureNamespaceExists(sNSExperiments);booking[sNSStartup].experiment_low_feedback_score_bs4={priority:9,loadpos:0,savecheck:0,init:function(){var d=function(){var c=$("input.feebback_booking_number").val();var h=$("textarea.comment_feedback").val();var j=$(".score_feedback").val();var k=$(".feedback_id_hotel").val();$("#netPromoterScore p.success").css("display","none");$.ajax({type:"POST",url:booking.env.b_secure_hostname_feedback+"/receive_nps_feedback",data:{comment:h+"\nnps"+j,hotel_id:k,object_id:c,type:"nps",lang:booking.env.b_lang}})};$(".review_low").click(function(c){d();c.stopPropagation();$("#feedback_score").css("display","none");$("#feedback_score_thank_you").css("display","block");return false})}};booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].map_text_overlay=(function(){var d=function(){$("#GoogleMap").bind("mouseenter",function(){booking.track.exp(booking.env.map_thumbnail_overlay_param);$("#GoogleMap").unbind("mouseenter");return true})};return{priority:9,init:d,initElse:d}})();booking[sNSStartup].experiment_nps={priority:9,loadpos:0,savecheck:0,init:function(){var d=function(h){var c=h.attr("score");var k=$("#netPromoterScore_daddy").attr("hr");var j=$("#netPromoterScore_daddy").attr("tid");$.ajax({url:"/receive_nps?tid="+escape(j)+"&hr="+escape(k)+"&nps="+c,context:document.body,success:function(n,f,o){var g=$("#netPromoterScore");if(g.find("table").length>0){var q=g.find("table")}else{var q=g.find("ul")}if(n.status=="thanks"){q.before('<p class="success">'+booking.env.conf_page_thanks_opinion+"</p>");if(c<7&&booking.env.js_experiment_tracking.low_feedback_score_bs4!=""){booking.env.trackExperiment(booking.env.js_experiment_tracking.low_feedback_score_bs4);$("#feedback_score").css("display","block");$(".score_feedback").val(c)}else{$("#feedback_score").css("display","none")}}else{if(n.status=="voted_already"){q.before('<p class="voted">'+booking.env.conf_page_answered_question+"</p>")}else{q.before('<p class="error">'+booking.env.conf_page_error_inconvenience+"</p>")}}q.fadeOut()},dataType:"json",type:"PUT"})};if($("#netPromoterScore").length>0){$("#netPromoterScore").fadeIn()}$("td, li[score]","#netPromoterScore").click(function(c){d($(this));c.stopPropagation();return false});$("td input, td label, li input, li label","#netPromoterScore").click(function(){return true})}};booking[sNSStartup].nodates_inspiration={priority:9,init:function(){$("#availcheck").click(function(){if(booking.env.js_experiment_tracking.subscribe_nodates_users!==""&&booking.env.js_experiment_tracking.subscribe_nodates_users!=="stopped"){if(this.checked){booking.track.exp(booking.env.js_experiment_tracking.subscribe_nodates_users)}}});if(booking.env.b_site_experiment_subscribe_nodates_users==1){$("#availcheck").click(function(){if(this.checked){$(".nodates_inspiration").slideDown(150)}else{$(".nodates_inspiration").slideUp(150)}});$(".subscriptionbox").click(function(){$(".nodates_inspiration").slideUp(150);return false})}if(booking.env.b_site_experiment_subscribe_nodates_users==2){$("#availcheck").click(function(){if(this.checked){var h=$("#searchboxInc").offset()||{};var f=$("#searchbox_btn").offset()||{};var g=(f.left-h.left)-320;$("#nodates_inspiration_popup").css({left:g+"px",top:(f.top+5)+"px"}).fadeIn(300)}else{$("#nodates_inspiration_popup").hide(150)}});$("a.snu_close").click(function(d){$("#nodates_inspiration_popup").hide(150);return false});$(".subscriptionbox").click(function(){$("#nodates_inspiration_popup").hide(150);return false})}}};booking[sNSExperiments].occupancy_policy={priority:9,init:function(){if(!$.fn||!$.fn.tooltip){return false}$(".occ_policy_tooltip.jq_tooltip").tooltip({bodyHandler:function(){return $(this).siblings(".occ_policy").html()},showURL:false,track:true,opacity:1,fade:250,left:-200,top:18});return true}};booking[sNSExperiments].omni_search=(function(){var h=function(){$("fieldset.when","#frm").addClass("no_dropdowns")};var g=function(){$("body.omni_search").click(function(c){var d=$(c.target);if($(d).length){if(!$(d).parents("#define_group").length){$("#group_definition_modal").hide()}}})};var f=function(){h();g()};return{init:f}}());(function(){var d="___paas___";booking.runExp("page_alive_after_submit").onReady(function(){var c=$(".loading_after_submit"),f=function(){$(".loading_after_submit_image").detach();$(this).append('<img class="loading_after_submit_image" src="//r.bstatic.com/static/img/white-loader.gif" width="10px" style="margin-left: 4px" alt="" />')};$(document.body).append('<img src="//r.bstatic.com/static/img/white-loader.gif" width="1px" height="1px" style="display: none;" alt="" />');c.click(function(h){var j=this;h.preventDefault();f.call(this);setTimeout(function(){window.location=$(j).attr("href")},0);return false})});$(function(){var c=booking.env.b_action;if(c==="searchresults"){$(".loading_after_submit").click(function(){$.cookie(d,"true")})}if(c==="hotel"&&$.cookie(d)==="true"){booking.track.exp(booking.env.js_experiment_tracking.page_alive_after_submit);$.cookie(d,null)}})})();booking[sNSExperiments].popular_destinations_block=(function(){var d=function(){$(".b-destinations_thumbnail").click(function(){var c=$(this).parent().attr("data-href");location.href=c})};return{init:d}}());booking[sNSExperiments].predefined_group_selection={priority:10,init:function(){function d(j){var m=$("#predefined_group").val(),k=$("#predefined_group option:selected").attr("data-room"),l=$("#predefined_group option:selected").attr("data-children"),c=$(".predefined_block_shown, #define_group, #define_group .hidelinks");if(m<5){$("#nr_adults").val(m).trigger("change");if(k==2){c.show()}else{c.hide();$("#nr_children").val(0).trigger("change")}}else{if(m>4){if(m==5){$("#nr_adults").val(m).trigger("change")}if(m==6&&l){$("#nr_children").val(1).trigger("change")}c.show()}}if(k){$("#nr_rooms").val(k).trigger("change")}}d();$("#predefined_group").change(function(){d()})}};booking.preload_static_assets=function(h){var l,j,m,k=$.browser.msie;for(l=0,j=h.length;l<j;l+=1){if(k){new Image().src=h[l];continue}m=document.createElement("object");m.data=h[l];if(k){m.width=1;m.height=1;m.style.visibility="hidden";m.type="text/plain"}else{m.width=0;m.height=0}document.body.appendChild(m)}};$(window).load(function(){var v=$(document.body),t="mousemove keyup scroll mousedown",m=$("[data-preload-assets]"),o=$.cookie("has_preloaded"),l=0,q=function(){v.unbind(t,u);clearTimeout(l);booking.preload_static_assets(m.data("preload-assets"));$.cookie("has_preloaded",1,{expires:1,path:"/"})},n=function(){l=setTimeout(q,10000)},u=function(){clearTimeout(l);n()};if(o){return}if(m.length){setTimeout(function(){n();v.bind(t,u)},10000)}});booking.runExp("price_filter_no_dates").onReady(function(){$("#price_filter_no_dates").click(function(){$(window).scrollTop(0);$("#homein, #homeout").pulse({opacity:[".5","1",".5","1"]},300,1,"linear");booking.google.trackEvent(booking.google.clickTracker,"price_filter_no_dates","V1")})});booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].request_group_size_in_policy={priority:9,init:function(){var f=this;var g="#group_definition_modal";if($("#define_group .group_set").length){$("#hp_group_set").val(0);$("#hp_group_is_set").val(0)}$(".group_modal_toggle").click(function(){$("#searchboxInc .search_summary_block").hide();$("#searchboxInc .original_search_form").removeClass("original_search_form_hidden");$(g).show();if($("#group_definition_modal #default_group_new_block").length){}else{$("#default_group_new_block").insertBefore("#group_definition_modal table")}$("#frm").attr("action",booking.env.b_this_url);$("html, body").animate({scrollTop:0},"slow")});$("#group_definition_modal #close").click(function(){if($("#define_group .group_set").length){$("#hp_group_set").val(0);$("#hp_group_is_set").val(0)}else{$("#default_group_new_block").insertBefore($("#define_group #group_definition"))}})}};$(function(){$("a.room_link_changes_date").click(function(d){d.stopPropagation();d.preventDefault();$(this).siblings(".confirm_change_date").css({top:d.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date a[href=#cancel]").click(function(d){d.stopPropagation();d.preventDefault();$(".confirm_change_date").hide()});$(".confirm_change_date").click(function(d){d.stopPropagation()});if($(".confirm_change_date").length>0){$("body").click(function(){$(".confirm_change_date").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});$(function(){$("a.hotel_link_changes_date").click(function(d){d.stopPropagation();d.preventDefault();$(this).siblings(".confirm_change_date_hotel").css({top:d.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date_hotel a[href=#cancel]").click(function(d){d.stopPropagation();d.preventDefault();$(".confirm_change_date_hotel").hide()});$(".confirm_change_date_hotel").click(function(d){d.stopPropagation()});if($(".confirm_change_date_hotel").length>0){$("body").click(function(){$(".confirm_change_date_hotel").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});$(function(){$("a.photo_link_changes_date").click(function(d){d.stopPropagation();d.preventDefault();$(this).siblings(".confirm_change_date_photo").css({top:d.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date_photo a[href=#cancel]").click(function(d){d.stopPropagation();d.preventDefault();$(".confirm_change_date_photo").hide()});$(".confirm_change_date_photo").click(function(d){d.stopPropagation()});if($(".confirm_change_date_photo").length>0){$("body").click(function(){$(".confirm_change_date_photo").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});$(function(){$("a.review_link_changes_date").click(function(d){d.stopPropagation();d.preventDefault();$(this).siblings(".confirm_change_date_review").css({top:d.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date_review a[href=#cancel]").click(function(d){d.stopPropagation();d.preventDefault();$(".confirm_change_date_review").hide()});$(".confirm_change_date_review").click(function(d){d.stopPropagation()});if($(".confirm_change_date_review").length>0){$("body").click(function(){$(".confirm_change_date_review").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});$(function(){$("a.more_link_changes_date").click(function(d){d.stopPropagation();d.preventDefault();$(this).siblings(".confirm_change_date_more").css({top:d.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date_more a[href=#cancel]").click(function(d){d.stopPropagation();d.preventDefault();$(".confirm_change_date_more").hide()});$(".confirm_change_date_more").click(function(d){d.stopPropagation()});if($(".confirm_change_date_more").length>0){$("body").click(function(){$(".confirm_change_date_more").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});$(function(){$("a.scarcity_link_changes_date").click(function(d){d.stopPropagation();d.preventDefault();$(this).siblings(".confirm_change_date_scarcity").css({top:d.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date_scarcity a[href=#cancel]").click(function(d){d.stopPropagation();d.preventDefault();$(".confirm_change_date_scarcity").hide()});$(".confirm_change_date_scarcity").click(function(d){d.stopPropagation()});if($(".confirm_change_date_scarcity").length>0){$("body").click(function(){$(".confirm_change_date_scarcity").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});if(booking.env.search_box_autofocus&&!("autofocus" in document.createElement("input"))){$("#destination:visible:first").each(function(){this.focus()})}booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].search_engine_partitioned_disambiguation_page={priority:9,init:function(){$(".disambBlockHeader").click(function(){var f=$(this),g=$("#"+f.attr("data-results"));if(g.hasClass("disambBlockShown")){g.slideUp().removeClass("disambBlockShown")}else{g.slideDown().addClass("disambBlockShown")}return false})}};booking[sNSStartup].search_history={priority:9,fullListShowed:false,minListSize:5,lastviewTimer:null,loadStart:null,init:function(){this.loadStart=new Date();var g=this;if(document.getElementById("SearchHistory")){try{this.minListSize=parseInt($("#SearchHistory").attr("min"))}catch(f){}$("a.remove_search").click(function(){var j=$(this).attr("href").substring(1).split(";");var d=j[0];var k=j[1];var c=j[2];$.ajax({url:"/search_history",type:"DELETE",data:{type:d,value:k,epoch:c}});booking[sNSStartup].search_history.cleanupHistoryList(this);this.blur();return false});if($("#showAllSearches").length){$("#showAllSearches").click(function(){booking[sNSStartup].search_history.showAll();this.blur();return false})}if($("#removeAllSearches").length){$("#removeAllSearches").click(function(){booking[sNSStartup].search_history.removeAll(true);this.blur();return false})}}return true},cleanupHistoryList:function(f){var g=this.minListSize;$(f).parent().fadeOut(500,function(){$(f).parents("li").remove();if($("#SearchHistory li").length>g-1){var c=$("#SearchHistory li").get(g-1);$(c).fadeIn(1000)}});if($("#SearchHistory li").length<2){booking[sNSStartup].search_history.removeAll(false)}if(document.getElementById("showAllSearches")){if($("#SearchHistory li").length<g+2){$("#moreSearchesLinkWrapper").hide()}}},showAll:function(){var g=$("#SearchHistory li");var f=this.minListSize;if(!booking[sNSStartup].search_history.fullListShowed){for(i=f-1;i<g.length;i++){$(g[i]).fadeIn(500)}booking[sNSStartup].search_history.fullListShowed=true}else{for(i=f;i<g.length;i++){$(g[i]).fadeOut(500)}booking[sNSStartup].search_history.fullListShowed=false}booking[sNSStartup].search_history.switchCaption()},removeAll:function(d){if(d){$.ajax({url:"/search_history",type:"DELETE",data:{type:-1,value:null,epoch:null}})}$("#SearchHistory").fadeOut(500,function(){$(this).remove()})},switchCaption:function(){if(booking[sNSStartup].search_history.fullListShowed){$("#showAllSearches .showLink").hide();$("#showAllSearches .hideLink").show()}else{$("#showAllSearches .showLink").show();$("#showAllSearches .hideLink").hide()}}};booking[sNSExperiments].search_near_me={priority:9,init:function(){var m;var u;function w(){if(m&&u){if(blackberry.location.latitude==0&&blackberry.location.longitude==0){u({message:"Position unavailable",code:2})}else{var c=null;if(blackberry.location.timestamp){c=new Date(blackberry.location.timestamp)}m({timestamp:c,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}m=null;u=null}}var o=function(){var c={};var d=null;c.getCurrentPosition=function(h,g,f){d.getCurrentPosition(h,g,f)};c.init=function(){try{if(typeof(geo_position_js_simulator)!="undefined"){d=geo_position_js_simulator}else{if(typeof(bondi)!="undefined"&&typeof(bondi.geolocation)!="undefined"){d=bondi.geolocation}else{if(typeof(navigator.geolocation)!="undefined"){d=navigator.geolocation;c.getCurrentPosition=function(k,j,h){function g(l){if(typeof(l.latitude)!="undefined"){k({timestamp:l.timestamp,coords:{latitude:l.latitude,longitude:l.longitude}})}else{k(l)}}d.getCurrentPosition(g,j,h)}}else{if(typeof(window.google)!="undefined"){d=google.gears.factory.create("beta.geolocation");c.getCurrentPosition=function(k,j,h){try{d.getCurrentPosition(k,j,h)}catch(g){j({message:g,code:1})}}}else{if(typeof(Mojo)!="undefined"&&typeof(Mojo.Service)!="undefined"&&typeof(Mojo.Service.Request)!="Mojo.Service.Request"){d=true;c.getCurrentPosition=function(j,h,g){parameters={};if(g){if(g.enableHighAccuracy&&g.enableHighAccuracy==true){parameters.accuracy=1}if(g.maximumAge){parameters.maximumAge=g.maximumAge}if(g.responseTime){if(g.responseTime<5){parameters.responseTime=1}else{if(g.responseTime<20){parameters.responseTime=2}else{parameters.timeout=3}}}}r=new Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:parameters,onSuccess:function(k){j({timestamp:k.timestamp,coords:{latitude:k.latitude,longitude:k.longitude,heading:k.heading}})},onFailure:function(k){if(k.errorCode==1){h({code:3,message:"Timeout"})}else{if(k.errorCode==2){h({code:2,message:"Position Unavailable"})}else{h({code:0,message:"Unknown Error: webOS-code"+errorCode})}}}})}}else{if(typeof(device)!="undefined"&&typeof(device.getServiceObject)!="undefined"){d=device.getServiceObject("Service.Location","ILocation");c.getCurrentPosition=function(l,k,j){function g(B,C,A){if(C==4){k({message:"Position unavailable",code:2})}else{l({timestamp:null,coords:{latitude:A.ReturnValue.Latitude,longitude:A.ReturnValue.Longitude,altitude:A.ReturnValue.Altitude,heading:A.ReturnValue.Heading}})}}var h=new Object();h.LocationInformationClass="BasicLocationInformation";d.ILocation.GetLocation(h,g)}}else{if(typeof(window.blackberry)!="undefined"&&blackberry.location.GPSSupported){blackberry.location.setAidMode(2);c.getCurrentPosition=function(j,h,g){m=j;u=h;blackberry.location.onLocationUpdate("handleBlackBerryLocation()");blackberry.location.refreshLocation()};d=blackberry.location}}}}}}}}catch(f){if(typeof(console)!="undefined"){console.log(f)}}return d!=null};return c}();function n(){o.getCurrentPosition(q,v)}function q(c){$("#destination").val("lat:"+c.coords.latitude.toFixed(4)+" long:"+c.coords.longitude.toFixed(4));booking.google.trackEvent(booking.google.clickTracker,"Action: "+booking.env.b_action,"#destinationSearch > search-near-me-allow-share");t()}function v(c){t()}function t(){$(".search-near-me").hide()}function x(){if($("#destination").val().length){return}booking.env.trackExperiment(booking.env.js_experiment_tracking.search_near_me);if($("#destination").length&&booking.env.b_site_experiment_search_near_me_exp){$("#destinationSearch").css({position:"relative"}).addClass("tracked");$("#destinationSearch").append('<a class="search-near-me jq_tooltip" title="'+booking.env.b_site_experiment_search_near_me_title+'" ></a>');if($.browser.webkit){$(".search-near-me").css({bottom:"0.7em",right:"11%"})}$(".search-near-me").click(function(){n()});$("#destination").keyup(function(){if($(this).val().length){t()}})}}if(o.init()){x()}}};$("a.search_summary_toggle_button").click(function(){$(".search_summary_block").hide();$(".original_search_form").removeClass("original_search_form_hidden");return false});booking[sNSStartupLoad].search_all_roomtypes={priority:9,init:function(){this.addMoreLink(document);$("a.more_rooms_link").live("click",function(g){g.preventDefault();var j=booking.env.b_site_experiment_sr_fewer_rooms?2:3;if($(".define_group_table").length){if($(this).hasClass("more_rooms_hide")){if(booking.env.b_site_experiment_shrink_group_search){$(this).parent().parent().parent().find(".sr_table_undesign").hide()}else{$(this).next().hide()}$(this).removeClass("more_rooms_hide")}else{if(booking.env.b_site_experiment_shrink_group_search){$(this).parent().parent().parent().find(".sr_table_undesign").show()}else{$(this).next().show()}$(this).addClass("more_rooms_hide")}}else{var h=$(this).parents("table").eq(0);if($(this).hasClass("more_rooms_hide")){number_of_matching_rows=h.find("tbody > tr.room_match").length;if(number_of_matching_rows>0){h.find("tbody tr:not(.room_match)").addClass("hidden");h.find("tbody tr.room_match:gt("+(j-1)+")").addClass("hidden")}else{h.find("tbody tr:gt("+(j-1)+")").addClass("hidden")}$(this).removeClass("more_rooms_hide")}else{h.find("tbody tr").removeClass("hidden");$(this).addClass("more_rooms_hide")}}this.blur();return false});return true},addMoreLink:function(h){var g=booking.env,f=$(h);if(g.b_action==="searchresults"){if($(".group_table").length){$("form table.featuredRooms").each(function(){if(booking.env.b_site_experiment_shrink_group_search){$(this).hide().parent().parent().find(".total").before('<a class="more_rooms_link shrink_more_rooms" href="#">'+g.group_booking_02+"</a>")}else{$(this).hide().before('<a class="more_rooms_link" href="#">'+g.group_booking_02+"</a>")}})}else{f.find("form table.featuredRooms").each(function(){var D=$(this),c=D.find("tbody > tr").length,w=D.find("tbody > tr.room_match").length,C=c-w,y=3,E;c-=y;if(c>1){if(w>0){$("tbody tr:not(.room_match)",this).addClass("hidden");base_number_or_rows=D.find("tbody > tr").length;c=(w>y)?base_number_or_rows-y:base_number_or_rows-w}if(w>0){$(this).find("tbody tr.room_match:gt("+(y-1)+")").addClass("hidden")}else{$(this).find("tbody tr:gt("+(y-1)+")").addClass("hidden")}}else{if(w>0){if(C>0){$("tbody tr:not(.room_match)",this).addClass("hidden")}}}if(booking.env.b_site_experiment_hide_none_matching_rooms==2){if((w>0&&w<y)||$(".more_rooms_link",this).length){var B=$("tbody tr.hidden",this);var v=[];var z=false;for(var x=0;x<B.length;x++){var A=$(".maxPersons .hideme",B[x]).text();if(v.indexOf(A)==-1){v.push(A);if(A>9){z=true}}}var d=v.length;if(d>-1){if(!z){v.sort()}sMinMaxHidden=" (";for(var x=0;x<d;x++){sMinMaxHidden+='<img width="43" height="10" alt="" class="occsprite max'+v[x]+' jq_tooltip" src="'+g.icons_url+'/transparent.png">';if(x+1<d){sMinMaxHidden+=", "}}sMinMaxHidden+=")"}$(".more_rooms_link",this).append(sMinMaxHidden)}}})}}}};booking[sNSStartup].SecretDeals={priority:8,init:function(){if(!booking.env.b_is_ie6){var f=this;$(window).bind("scroll",function(c){f.parallaxScroll()});$("a.section1").click(function(){$("html, body").animate({scrollTop:0},1000,function(){f.parallaxScroll()});return false});$("a.section2").click(function(){$("html, body").animate({scrollTop:$("#section2").offset().top},1000,function(){f.parallaxScroll()});return false});$("a.section3").click(function(){$("html, body").animate({scrollTop:$("#section3").offset().top},1000,function(){f.parallaxScroll()});return false});$("a.section4").click(function(){$("html, body").animate({scrollTop:$("#section4").offset().top},1000,function(){f.parallaxScroll()});return false});$("nav#primary a").hover(function(){$(this).prev("h1").show()},function(){$(this).prev("h1").hide()});var g=$(".sc_navigator");$(window).scroll(function(){var c=$(window).scrollTop();if(c<=900){f.removeActiveClass();$("a#sd_nr1").addClass("active")}else{if(c>900&&c<1750){f.removeActiveClass();$("a#sd_nr2").addClass("active")}else{if(c>1751&&c<2500){f.removeActiveClass();$("a#sd_nr3").addClass("active")}else{f.removeActiveClass();$("a#sd_nr4").addClass("active")}}}})}},removeActiveClass:function(){$(".sc_navigator a").each(function(){$(this).removeClass("active")})},parallaxScroll:function(){var d=$(window).scrollTop();$("#secretdeals-bg1").css("top",(0-(d*0.25))+"px");$("#secretdeals-bg2").css("top",(0-(d*0.5))+"px");$("#secretdeals-bg3").css("top",(0-(d*0.75))+"px");$("#secretdeals-bg4").css("top",(0-(d*0.3))+"px")}};booking.social_plugins_footer=(function(){var n=false;var l=false;var m=false;var j=false;var o=function(c,d){var f=document.createElement("script");f.type="text/javascript";f.src=c;d.find(".footer_tooltip").append(f)};var k=function(){var g=$("#footer_fb"),f=$("#footer_tw"),d=$("#footer_we"),c=$("#footer_gp");d.hover(function(h){d.find(".footer_tooltip").fadeIn();booking.google.trackEvent(booking.google.hoverTracker,"Social Media Footer icons","Weibo");if(j){return}var q=booking.env.b_locale.replace("-","_");d.find(".footer_tooltip").append('<iframe width="136" height="24" frameborder="0" allowtransparency="true" marginwidth="0" marginheight="0" scrolling="no" border="0" src="http://widget.weibo.com/relationship/followbutton.php?language='+q+'&width=136&height=24&uid=2144202281&style=2&btn=red&dpc=1"></iframe>');j=true},function(){d.find(".footer_tooltip").fadeOut()});g.hover(function(h){g.find(".footer_tooltip").fadeIn();booking.google.trackEvent(booking.google.hoverTracker,"Social Media Footer icons","Facebook");if(n){return}g.find(".footer_tooltip").append('<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fbookingcom&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe>');n=true},function(){g.find(".footer_tooltip").fadeOut()});f.hover(function(h){f.find(".footer_tooltip").fadeIn();booking.google.trackEvent(booking.google.hoverTracker,"Social Media Footer icons","Twitter");if(l){return}o("//platform.twitter.com/widgets.js",f);l=true},function(){f.find(".footer_tooltip").fadeOut()});if(!($.browser.msie&&parseInt($.browser.version,10)>=9)){c.hover(function(h){c.find(".footer_tooltip").fadeIn();booking.google.trackEvent(booking.google.hoverTracker,"Social Media Footer icons","Google+");if(m){return}o("https://apis.google.com/js/plusone.js",c);m=true},function(){c.find(".footer_tooltip").fadeOut()})}};return{init:k}}());booking[sNSExperiments].social_plugins_footer={priority:9,init:function(){booking.social_plugins_footer.init()}};booking.dockSocial=(function(){var k=false;var h=function(c){var f=document.createElement("script");f.type="text/javascript";f.async=true;f.src=c;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(f,d)};var j=function(){if(k){return}$(".dock_social_fb").html('<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fbookingcom&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe>');h("//platform.twitter.com/widgets.js");if(!($.browser.msie&&parseInt($.browser.version,10)>=9)){h("https://apis.google.com/js/plusone.js")}k=true};var g=function(){$(".doc_social_link").mouseover(function(){j();var d=$(this).innerWidth();var c=Math.round(d/2)-16;$(".dock_social_block_angle").css("left",c);$(".dock_social_block").show()});$(".dock_social_block_remove").click(function(){$(".dock_social_block").hide()})};return{init:g}}());booking[sNSExperiments].social_plugins_two_new_footer_bars={priority:9,init:function(){booking.dockSocial.init()}};booking[sNSStartup].sort_popups={priority:9,anchorSelector:"#sort_by li.sort_stars > a, #sort_by li.sort_price > a, #sort_by li.review_score > a, #sort_by li.sort_distfrom > a",ulSelector:"#sort_by li.with_dd ul",init:function(){$(this.anchorSelector).bind("click",function(){var d=$(this).siblings("ul");if(d.css("display")=="block"){booking[sNSStartup].sort_popups.hideSortPopups()}else{booking[sNSStartup].sort_popups.hideSortPopups();booking[sNSStartup].sort_popups.showPopup(d)}return false})},showPopup:function(d){$(d).show();$(document).one("click",function(){booking[sNSStartup].sort_popups.hideSortPopups()})},hideSortPopups:function(){$(this.ulSelector).hide()}};booking[sNSExperiments].sr_comp_set_destinations={priority:9,init:function(){$.ajax({type:"GET",url:booking.env.b_sr_compset_url+";pid="+booking.env.pageview_id+";sid="+booking.env.b_sid,contentType:"text/html; charset=utf-8",success:function(d){if(!d.match(/^\s*$/)){$("#x_sr_compset").html(d).show()}}})}};booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].sr_saved_filters={priority:9,init:function(){var g=this;var h="#saved_filters_modal";var f="#filterbox_wrap";$(".modal_trigger").click(function(){$("#filterbox_options #save_filter_modal").show();$("html, body").animate({scrollTop:0},"slow");$("#save_filter_modal input.inputText").focus()});$(".filterbox .filterelement",f).each(function(){if($(this).hasClass("active")){$("p.save_filters").show()}else{}});$("#save_filter_modal input.inputText").keypress(function(c){if(c.which==10||c.which==13){$("#save_filter_modal .bluebutton").click();return false}});$("#save_filter_modal .bluebutton").click(function(){var d="";if($("#filter_price .active").length){var l=$("#filter_price .active").first().attr("data-param").split(",")[0];var n=$("#filter_price .active").last().attr("data-param").split(",")[1];var c=(d=="")?"":",";d+=c+l+"%2C"+n;d+=",pr_cur_code="+(booking.env.b_curr_code)}$(".filterbox .filterelement",f).each(function(){if($(this).hasClass("active")&&!$(this).attr("data-param")){var k=$(this).attr("data-id").replace(/_|-/g,"=").replace("=id=","_id=");var j=(d=="")?"":",";d+=j+k}});if($("#filter_price .active").length||$("#filter_district .active").length){d+=",ufi="+(booking.env.b_filter_ufi)}var m=$("#save_filter_modal .inputText").val();if(m!=""){$.post("/save_filter",{nflt:d,name:m},function(j){if(j.status&&j.status=="ok"){var k=j.filter_id;$("#save_filter_modal").hide();booking.env.b_saved_filter_names[m]=1;$("#saved_filters ul").append('<li><a href="javascript: void(0);" onclick="'+g.ns+"."+g.name+'.delete_click(this);" class="del_filter" id="filter_'+k+'">&#215;</a><a href="#">'+m+"</a></li>");$("#saved_filters").show();$("html,body").animate({scrollTop:$("#saved_filters").offset().top},"slow")}else{if(j.status&&j.status=="failed"){if(booking.env.b_saved_filter_names[m]){$("#error_same_set").hide();$("#error_same_name").show()}else{$("#existing_filter_name").text(j.filter_exists);$("#error_same_name").hide();$("#error_same_set").show()}}}})}});$("#save_filter_modal a.modal_close").click(function(){$("#filterbox_options #save_filter_modal").hide()});$("#saved_filters .del_filter").click(function(){g.delete_click(this)})},delete_click:function(f){var g=$(f).attr("id").replace("filter_","");var h="#"+$(f).attr("id");$.post("/delete_filter",{id:g},function(c){if(c.status&&c.status=="ok"){$(h).parent("li").remove();if(!$("#saved_filters ul li").length){$("#saved_filters").hide()}}else{if(c.status&&c.status=="failed"){}}})}};booking[sNSStartup].store_cc_details={priority:9,init:function(){var g=this;$("#saved_credit_cards .cc_save").attr("disabled","disabled");$("#saved_credit_cards .cc_save").addClass("cc_save_disabled");$("#saved_credit_cards select").change(function(){var c=$(this).closest("form");$(this).css({"font-weight":"bold"});$(".cc_save",c).removeAttr("disabled");$(".cc_save",c).removeClass("cc_save_disabled")});if($("#card_status").length){setTimeout(function(){$("#card_status").hide("slow")},5000)}if($(".first_card_row").length){var f=$('#book_credit_card tr input[name="cc_card_id"]:checked').get(0);this.disableFields($(f).closest("tr").get(0))}$(".cc_radio").click(function(){var c=$(this).closest("tr").get(0);g.disableFields(c)});$("#cc_type").change(function(){onchange_cc(this)});$(".new_card select").change(function(){var c=$(this).closest("tr").get(0);$("input[type='radio']",c).attr("checked","checked");g.disableFields(c)});$(".new_card input").keydown(function(){var c=$(this).closest("tr").get(0);$("input[type='radio']",c).attr("checked","checked");g.disableFields(c)});$(".cc_delete").click(function(){var c=$(this).closest("tr").get(0);var h=$(this).val();var d="/delete_cc_card?cc_id="+h;$.ajax({url:d,type:"POST",success:function(j){$(c).hide()},error:function(j){return false}});return false})},disableFields:function(d){var d=d;$("table.saved_cc_table tr").each(function(){if(!$(this).hasClass("new_card")&&!$(this).hasClass("save_my_card_tick")&&!$(this).hasClass("invalid")&&!$(this).hasClass("not_allowed_by_hotel")){if(this==d){$("input,select",this).each(function(){$(this).removeAttr("disabled")})}else{$("input,select",this).each(function(){if($(this).attr("type")!="radio"&&!$(this).hasClass("dc_maestro_fields")){$(this).attr("disabled","disabled")}})}}})}};booking[sNSExperiments].store_cc_details_step2_new={priority:9,init:function(){var d=$("#save_card_tick:checked").length;$("#bookStage3Inc #signup_later").click(function(){$("#save_card_tick").attr("checked",false);$("#store_cc_new_new").hide();return false})}};booking[sNSExperiments].store_cc_details_step2_returning={priority:9,init:function(){var d=$("#save_card_tick:checked").length;if(d){$("#store_cc_returning_new .password_fields_wrapper").show()}else{$("#store_cc_returning_new .password_fields_wrapper").hide()}$("#store_cc_returning_new #save_card_tick").click(function(){$("#store_cc_returning_new .password_fields_wrapper").show()});$("#store_cc_returning_new #signup_later").click(function(){console.info("i clicked the radio");$("#save_card_tick").attr("checked",false);$("#store_cc_returning_new").hide()})}};booking[sNSExperiments].store_cc_details_step3={priority:9,init:function(){var d=$("#save_card_tick:checked").length;if(d){$("#bookStage3Inc .password_field_wrapper").show()}else{$("#bookStage3Inc .password_field_wrapper").hide()}$("#bookStage3Inc #save_card_tick").click(function(){$("#bookStage3Inc .password_field_wrapper").toggle()});$("#bookStage3Inc #signin_later").click(function(){$("#save_card_tick").attr("checked",false);$("#bookStage3Inc .password_field_wrapper").hide();return false})}};if(typeof b_survey_url!="undefined"&&b_survey_url){booking[sNSStartup].survey={priority:9,init:function(){$("#survey").fadeIn("normal");var d="/survey?";$("#survey button").click(function(h){var c=$(this).val();if(c){if(booking[sNSExperiments].fix_move_book_header_and_button){booking[sNSExperiments].fix_move_book_header_and_button.surveyFixed=false}if(c=="accept"||c=="Yes"||c=="yes"||c=="Ja, ik doe mee"||c=="Okay"){var j=window.open(b_survey_url,"booking_survey_window")}else{$("#survey").hide("normal")}$.get(d+"decision="+c+"&survey_key="+booking.env.survey_key,{},function(f){$("#survey").hide("normal")})}return false})}}}booking[sNSExperiments].fb_likes={priority:9,likes:"",init:function(){var d=this;if(booking.env.b_action=="book"){this.likes=setInterval(function(){var c=booking.env.b_fb_id;if(window[c[5]+c[0]]){booking.env.trackExperiment(booking.env.js_experiment_tracking.fb_likes);window.clearInterval(d.likes);d.likes=""}},10000)}}};$("#logo_no_globe_new_logo").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Header tracking","Click on logo")});$("#current_currency").click(function(){if($("#current_currency_foldout").is(":hidden")){booking.google.trackEvent(booking.google.clickTracker,"Header tracking","Click on currency dropdown")}});$("#current_language").click(function(){if($("#current_language_foldout").is(":hidden")){booking.google.trackEvent(booking.google.clickTracker,"Header tracking","Click on language dropdown")}});$("#current_account").click(function(){if($("#current_account_foldout").is(":hidden")){booking.google.trackEvent(booking.google.clickTracker,"Header tracking","Click on my account dropdown")}});$("#current_currency_foldout a").live("click",function(){booking.google.trackEvent(booking.google.clickTracker,"Header tracking","Changed currency")});$("#current_language_foldout a").live("click",function(){booking.google.trackEvent(booking.google.clickTracker,"Header tracking","Changed language")});$("#click_current_currency_foldout a").live("click",function(){booking.google.trackEvent(booking.google.clickTracker,"Header tracking","Changed currency - click on prices")});$("#enB").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Header tracking","Click on website feedback")});$(function(){if(booking.env.b_lang==="el"||booking.env.b_lang==="th"||booking.env.b_lang==="ko"||booking.env.b_lang==="ar"||booking.env.b_lang==="he"){booking.track.onView("#filter_chains").exp(booking.env.js_experiment_tracking.translate_brand_filter_2)}});booking[sNSStartup].top_saved_searches={priority:9,opening_state:0,init:function(){var d=this;$(".search_tab").click(function(){d.opening_state=1;d.closeTabs(this);if(!$(this).hasClass("loadedContent")){d.loadContent($(this))}return false})},showAllNone:function(h){var g=$(".user_search_item",h.parentNode.parentNode);var f=0;if($(".hidden_item",h.parentNode.parentNode).length){$(".showLink",h.parentNode.parentNode).hide();$(".hideLink",h.parentNode.parentNode).show()}else{$(".showLink",h.parentNode.parentNode).show();$(".hideLink",h.parentNode.parentNode).hide()}$(g).each(function(){f++;if(f>6){if($(this).hasClass("hidden_item")){$(this).removeClass("hidden_item")}else{$(this).addClass("hidden_item")}}})},closeTabs:function(g){var f=this;var h=g?$(g).attr("id"):"";h=h.replace("tab","foldout");$(".search_foldout").each(function(){if($(this).hasClass("closed_content")){if($(this).attr("id")==h){$(this).removeClass("closed_content")}}else{$(this).addClass("closed_content")}});if(h===""){this.opening_state=0}else{setTimeout(function(){f.opening_state=2},100)}},loadContent:function(l){var m=this;if(booking.env.b_site_experiment_header_cleaned_links){var t=$(l).attr("data-href")}else{var t=$(l).attr("href")}if(t.indexOf("http://booking.com")!=-1){t=t.replace("http://booking.com","http://www.booking.com")}if($("#current_account").width()>$(l).width()){var n=$("#current_account").width()+458+15}else{var n=$(l).width()+458+15}if(booking.env.b_is_ie7){n=n+102}if(booking.env.b_is_ie6){n=n+20}var o=$("#current_account_foldout").offset().top;var k=$(l).attr("id");var q="#"+k+"_content";$(l).addClass("loadedContent");$.ajax({url:t,type:"GET",success:function(c){$(q).html(c);$(q).css({left:"-"+n+"px",top:o+"px"});setTimeout(function(){m.addRemoveClicks(k);booking[sNSStartupLoad].tooltip_3.addTooltip($(q))},200)}})},addRemoveClicks:function(f){var g=this;$("#removeAllHistoryHotel, #removeAllHistorySearch").click(function(){g.removeAll($(this).attr("id"));return false});if(f=="search_tab_viewed"){$("#search_tab_viewed_content a.remove_hotel").click(function(){var d=$(this).attr("href").split("#")[1];$.ajax({url:"/hotel_history",type:"DELETE",data:{hotel_id:d}});booking[sNSStartup].viewed_hotels.cleanupHistoryList(this);this.blur();var h=$(this).parents(".user_search_item").get(0);var c=h.parentNode;$(h).hide("slow",function(){$(this).remove();if($(".hidden_item",c).length){var j=$(".hidden_item",c).get(0);$(j).removeClass("hidden_item")}g.reOddEven(c)});g.removeOneHome(d);if($(".user_search_item",c).length==1){$(".user_search_item",c).show()}return false});$("#search_tab_viewed_content .user_search_show").click(function(c){g.showAllNone(this);return false})}if(f=="search_tab_searched"){$("#search_tab_searched_content a.remove_search").click(function(){var c=$(this).attr("href").split("#")[1];var n=c.split(";");var m=n[0];var q=n[1];var d=n[2];$.ajax({url:"/search_history",type:"DELETE",data:{type:m,value:q,epoch:d}});booking[sNSStartup].search_history.cleanupHistoryList(this);this.blur();var t=$(this).parents(".user_search_item").get(0);var o=t.parentNode;$(t).hide("slow",function(){$(this).remove();if($(".hidden_item",o).length){var h=$(".hidden_item",o).get(0);$(h).removeClass("hidden_item")}g.reOddEven(o)});return false});$("#search_tab_searched_content .user_search_show").click(function(c){g.showAllNone(this);return false})}if(f=="search_tab_booked"){}if(f=="search_tab_favourite"){$("#search_tab_favourite_content").find(".user_search_show").remove();$("#search_tab_favourite_content a.remove_hotel").click(function(){var c=$(this).attr("href").split("#")[1];var n=c.split(";");var m=n[0];var q=n[1];var d=n[2];$.ajax({url:"/favorites/delete",type:"DELETE",data:{hotel_id:m}});this.blur();var t=$(this).parents(".user_search_item").get(0);var o=t.parentNode;$(t).hide("slow",function(){$(this).remove();if($(".hidden_item",o).length){var h=$(".hidden_item",o).get(0);$(h).removeClass("hidden_item")}g.reOddEven(o)});return false});$("#search_tab_searched_content .user_search_show").click(function(c){g.showAllNone(this);return false})}},removeAll:function(g){var f=this;var h=$("#"+g).parents(".user_searches_content");if(g=="removeAllHistoryHotel"){$.ajax({url:"/hotel_history",type:"DELETE",data:{hotel_id:-1}});f.removeAllHome();booking[sNSStartup].viewed_hotels.cleanupHistoryList($("#"+g))}else{booking[sNSStartup].search_history.removeAll(true)}$("#"+g).blur();$(".user_search_item",h).each(function(){if($(this).hasClass("no_listing")){$(this).show("slow")}else{$(this).hide("slow",function(){$(this).remove()})}});$(".user_search_header",h).hide();$(".user_search_footer",h).hide()},removeAllHome:function(){$("#LastViewedHotels").hide()},removeOneHome:function(d){$("#LastViewedHotels .remove_hotel").each(function(){if($(this).attr("href")=="#"+d){$(this.parentNode).hide()}})},reOddEven:function(f){var g=0;if($(".user_search_item",f).length>1){$(".user_search_item",f).each(function(){if(!$(this).hasClass("no_listing")){if(g==0){if($(this).hasClass("even")){$(this).removeClass("even")}g=1}else{if(!$(this).hasClass("even")){$(this).addClass("even")}g=0}}})}else{if($(".no_listing",f).length){var h=$(".no_listing",f).get(0);$(h).show();$(".user_search_header",f).hide();$(".user_search_footer",f).hide()}}}};$(function(){var k="rtppsn_gson",l=$.cookie(k),o=booking.env.b_action==="searchresults",q=booking.env.b_action==="hotel",n=booking.env.b_site_experiment_rt_price_per_stay_or_night===2,m=o||q,t=function(){$(".price_per_select.dp_night").eq(0).click()};$(".price_per_select_box").live("click",function(){$(this).parents(".price_per_select_wrap").find(".price_per_select_foldout_wrap").toggle();booking.google.trackEvent(booking.google.clickTracker,"Price Per Stay or Night","Stay or night selected")});$(".price_per_select").live("click",function(){var d=$(this),c=$(".price_per_select");$.cookie(k,(d.hasClass("dp_night")?"n":"s"),{path:"/"});$(".price_per_description").text(d.text());$(".price_per_select").show();(d.hasClass("dp_stay")?c.filter(".dp_stay"):c.filter(".dp_night")).add(".price_per_select_foldout_wrap").hide();$(".toggle_price_per_night_or_stay").toggle()});if(m&&(l==="n"||(!l&&n))){t()}});booking[sNSStartupLoad].change_currency_on_click={priority:9,init:function(){var m=booking.env,t="",k,q=$(".click_change_currency");if(!q.length){return}t=booking.currencyDropdownOptions;if(m.change_currency_hotel_anchor){k="&amp;"+m.change_currency_hotel_anchor;t=t.replace(/href\s*\=\s*\'([\w/=%_&\-.;?]*)\s*\'/ig,"href='$1"+k+"'")}$("#click_current_currency_foldout ul").append(t);var n=$("#click_current_currency_foldout"),l,o;o=n.find("a");$(".click_change_currency").click(function(g){var f=$(this);if(!n.is(":hidden")){n.slideUp()}else{f.after(n);n.slideDown();$("#tooltip").hide();var j=f.closest("tr.flash_deal_soldout");l=j.children(0).attr("id")}var c=$("#current_currency_index").val();if(booking.env.change_currency_on_click_convert_prices&&c!=""){var C=$(this).text();var G=$(".convert_prices option");var E=$("#click_current_currency_foldout .selsymbol");var F={},H,h,d;var D=function(u){return parseFloat(u.replace(/,/g,".").replace(/[^\d\.]/g,""),10)};h=D(C);for(var I=0,J=G.length;I<J;I++){d=h*(c/G[I].value);F[G[I].innerHTML]=d.toFixed(2)}for(var I=0,J=E.length;I<J;I++){H=E[I];$(H.parentNode).find(".converted_currency").html(F[H.innerHTML])}if(booking.env.change_currency_on_click_convert_prices==2){$("#click_current_currency_foldout .seldescription:not(:first)").remove()}}if(c!=""){booking.env.trackExperiment(booking.env.js_experiment_tracking.change_currency_on_click_convert_prices)}g.stopPropagation()});if(!m.change_currency_hotel_anchor){o.live("click",function(){$(this).attr("href",$(this).attr("href")+"#"+l)})}$("html").click(function(c){if("click_current_currency_foldout"!=c.target.id){n.slideUp()}})}};if(booking.env.enable_scripts_tracking){booking.env.scripts_tracking.main.run=true}if(booking.env.enable_scripts_tracking){booking.env.scripts_tracking.maps={loaded:true,run:false}}booking.map={buildCurrentHotel:function(c){var d={};d[c.b_id]=c;d[c.b_id]["title"]=c.b_name;d[c.b_id].b_image_url=c.b_main_photo;booking[sNSStartupLoad].googleMaps.parseJsonData(d)}};booking[sNSStartupLoad].googleMaps={priority:9,api_version:3.3,map_inited:false,sensor:false,protocol:"http",tracked:false,json_params:["dest_type","dest_id","b_param_pr_id","b_param_class","b_param_hotelfacility","b_param_district_id","b_param_hoteltag","b_param_chaincode","b_param_score_min"],map:null,map_object:null,placemark_amount:0,placemark_type:"hotel",placemarks:{},hotels_cache:{},b_clusters_found:0,max_length_of_hotel_description:booking.env.map_shorten_desc?booking.env.map_shorten_desc:250,map_scroll:{x:0,y:0},map_scroll_base:{x:0,y:0},map_width:515,map_height:400,latitude:0,longitude:0,current_zoom:undefined,search_destination_without_district:(document.getElementById("destination")?document.getElementById("destination").value:""),search_destination:((booking.env.district_city_name)?booking.env.district_city_name:(document.getElementById("destination")?document.getElementById("destination").value:"")),b_ufi:booking.env.b_ufi?booking.env.b_ufi:"",b_district_ufi:(booking.env.b_ufi?booking.env.b_ufi:(booking.env.b_city_id?booking.env.b_city_id:"")),bs_cookie:null,last_hotel_details:null,geocoder:null,enable_all_markers:true,is_sr:(booking.env.b_action==="searchresults"),is_hp:(booking.env.b_action==="hotel"),is_lp:(booking.env.b_is_landing_page),last_clicked_hotel:"",supress_hotel_overlay:0,mapToolbarFilter:"",map_pos_x:0,map_pos_y:0,good_browser:true,fixZoom:false,clicked_marker:false,pan_item_coords:undefined,pan_item:true,disambiguation_bbox:null,use_sr_cookie:(!booking.env.b_is_disambiguation&&booking.env.b_action==="searchresults"),use_new_marker_overlay:(booking.env.b_action==="searchresults"||booking.env.b_action==="hotel"||booking.env.b_is_landing_page),searchingAddress:false,currentRequestId:0,currentResponsedReceivedId:0,mouseover:"mouseenter",mouseout:"mouseleave",mousedown:"mousedown",mouseclick:"click",final_zoom:0,initPopup:false,initPopupSR:true,initPopupTimeout:false,highlight_marker_z:false,map_opened:false,cur_selected_hotel:null,b_force_no_clusters:false,filter:{hotel:true,hotel_current:true,hotel_matching_criteria:true,city:true,city_current:true,landmark:true,landmark_current:true,airport:true,airport_current:true,disambiguation:true,disambiguation_best:true,ski_lift:true,ski_lift_current:true,flash_deal:true,current_search:true,country:true},b_cluster_mapping:{country:"region",region:"city",city:"district",district:"hotel",anon:"hotel"},b_map_icons:{hotel:{className:(booking.env.use_mobile_icons?"icon-marker-hotel-mini-blue":"icon-marker-hotel-blue"),image:booking.env.icons+"/marker-hotel-blue.png",min:7,zOrder:10000,infoWindowAnchor:(booking.env.use_mobile_icons?[5.5,11]:[8.5,20]),iconAnchor:(booking.env.use_mobile_icons?[5.5,11]:[8.5,20])},cluster:{className:"icon-cluster",min:1,max:13,width:56,height:60,zOrder:10000,infoWindowAnchor:[27,54],iconAnchor:[27,27]},cluster_1:{className:"icon-cluster",min:7,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},hotel_mini:{className:"icon-hotel_mini",min:7,width:11,height:12,zOrder:10000,infoWindowAnchor:[5.5,12],iconAnchor:[5.5,12]},hotel_matching_criteria:{className:(booking.env.use_mobile_icons?"icon-marker-hotel-mini-orange":"icon-marker-hotel-orange"),image:booking.env.icons+"/marker-hotel-orange.png",min:8,zOrder:5000,infoWindowAnchor:(booking.env.use_mobile_icons?[5.5,11]:[8.5,20]),iconAnchor:(booking.env.use_mobile_icons?[5.5,11]:[8.5,20])},hotel_matching_criteria_mini:{className:"icon-marker-hotel-mini-orange",min:8,width:11,height:12,zOrder:5000,infoWindowAnchor:[5.5,12],iconAnchor:[5.5,12]},hotel_not_matching_criteria:{className:(booking.env.use_mobile_icons?"icon-marker-hotel-mini-grey":"icon-marker-hotel-grey"),image:booking.env.icons+"/marker-hotel-grey.png",min:8,zOrder:100,infoWindowAnchor:(booking.env.use_mobile_icons?[5.5,11]:[8.5,20]),iconAnchor:(booking.env.use_mobile_icons?[5.5,11]:[8.5,20])},hotel_closed:{className:"icon-marker-hotel-grey",image:booking.env.icons+"/marker-hotel-grey.png",min:8,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},hotel_not_matching_criteria_mini:{className:"icon-marker-hotel-mini-grey",min:8,zOrder:100,width:11,height:12,infoWindowAnchor:[5.5,12],iconAnchor:[5.5,12]},hotel_current:{className:(booking.env.use_mobile_icons?"icon-marker-hotel-orange-large-mobile":("icon-marker-hotel-orange-large"+(booking.env.use_new_current_hotel_icon?"2":""))),image:booking.env.icons+"/marker-hotel-orange-large.png",min:4,zOrder:11000,width:26,height:27,infoWindowAnchor:(booking.env.use_mobile_icons?[15,30]:[13,27]),iconAnchor:(booking.env.use_mobile_icons?[15,30]:[13,27])},airport:{className:"icon-marker-airport",image:booking.env.icons+"/marker-airport.png",min:5,zOrder:90,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},airport_current:{className:"icon-marker-airport-large",image:booking.env.icons+"/marker-airport-large.png",min:5,zOrder:90,width:26,height:27,infoWindowAnchor:[13,27],iconAnchor:[13,27]},landmark:{className:"icon-marker-landmark",image:booking.env.icons+"/marker-landmark.png",min:12,zOrder:80,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},landmark_current:{className:"icon-marker-landmark-large",image:booking.env.icons+"/marker-landmark-large.png",min:12,zOrder:10001,width:26,height:27,infoWindowAnchor:[13,27],iconAnchor:[13,27]},ski_lift:{className:"icon-ski_lift",image:booking.env.icons+"/map/ski_lift.png",min:12,zOrder:80,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},ski_lift_current:{className:"icon-ski_lift_current",image:booking.env.icons+"/map/ski_lift_current.png",min:12,zOrder:80,width:26,height:27,infoWindowAnchor:[13,27],iconAnchor:[13,27]},city:{className:"icon-marker-city",image:booking.env.icons+"/marker-city.png",min:4,zOrder:70,width:9,height:9,infoWindowAnchor:[4.5,9],iconAnchor:[4.5,9]},city_current:{className:"icon-marker-city-large",image:booking.env.icons+"/marker-city-large.png",min:4,zOrder:70,width:15,height:15,infoWindowAnchor:[7.5,15],iconAnchor:[7.5,15]},country:{className:"icon-marker-city",min:4,max:10,zOrder:60,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},region:{className:"icon-marker-city",min:5,zOrder:50,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},district:{className:"icon-marker-city",min:7,zOrder:40,width:9,height:9,infoWindowAnchor:[4.5,9],iconAnchor:[4.5,4.5]},lat_long_current:{className:"icon-marker-city",min:4,max:16,zOrder:40,width:9,height:9,infoWindowAnchor:[4.5,9],iconAnchor:[4.5,4.5]},disambiguation_best:{className:"icon-disambiguation_marker_best",min:0,max:20,zOrder:41,width:34,height:38,infoWindowAnchor:[4.5,9],iconAnchor:[17,38]},disambiguation:{className:"icon-disambiguation_marker",min:0,max:20,zOrder:40,width:34,height:38,infoWindowAnchor:[4.5,9],iconAnchor:[17,38]},flash_deal:{className:"icon-flash_deal_marker",min:0,zOrder:10000,infoWindowAnchor:[21,21],iconAnchor:[21,21]},current_search:{image:booking.env.icons+"/map/address_marker.png",min:1,max:20,zOrder:10002,width:25,height:25,infoWindowAnchor:[12.5,25],iconAnchor:[12.5,12.5],rawImage:true},country:{className:"icon-marker-country",min:7,width:27,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]}},markerMarkups:{},markerHtml:function(c,h){var f=this.markerMarkups,g,d;if(c in f){return f[c]}h=(h)?'style="'+h+'"':"";d=this.b_map_icons[c];if(d.hasOwnProperty("rawImage")&&d.rawImage){return f[c]='<img src="'+d.image+'" alt="" '+h+"/>"}return f[c]='<img class="use_map_sprites icon-marker '+d.className+'" src="'+booking.env.icons+'/transparent.png" alt="" '+h+"/>"},geocoderHelper:(function(){var g=this,c=function(h){var j=(booking.env.map_enable_sr_autocomplete?$("#right"):$("#search_results_table"));if(booking.env.map_enable_sr_autocomplete||booking.env.mapAddressSearchUpdates){j.animate({opacity:1},500,function(){$(this).css("filter","")});$("#filterbox_wrap").animate({opacity:1},500,function(){$(this).css("filter","")})}if(booking.env.map_enable_sr_autocomplete){$("#sidebar_map_address_search_failed").hide();$("#sidebar_map_address_search_loading").hide();$("#view_map").css("display","block")}else{$("#map_address_search_failed").hide();if(!(booking.env.map_landmark_dropdown_type&&booking.env.map_landmark_dropdown_type===2)){$("#map_address_search_result").html(h)}if(booking.env.mapAddressSearchUpdates){$("#sidebar_map_address_search_loading").hide()}$("#map_address_search_success_wrapper").show()}},d=function(){if(booking.env.map_enable_sr_autocomplete){$("#view_map").hide();$("#sidebar_map_address_search_loading").hide();$("#sidebar_map_address_search_failed").css("display","block")}else{$("#map_address_search_failed").show();$("#map_address_search_success_wrapper").hide();if(booking.env.mapAddressSearchUpdates){$("#sidebar_map_address_search_loading").hide()}}},f=function(){if(booking.env.mapAddressSearchUpdates){$("#map_address_search_failed").hide();$("#map_address_search_success_wrapper").hide();$("#sidebar_map_address_search_loading").show();if(g.map_object){g.map.oMarkerLayer.empty();g.updateMap()}}else{if(booking.env.map_enable_sr_autocomplete){$("#sidebar_map_address_search_failed").hide();$("#view_map").hide();$("#sidebar_map_address_search_loading").css("display","block")}}};return{showSuccessMsg:c,showFailureMsg:d,showLoadingMsg:f}})(),isMapInitialized:false,init:function(){if(this.isMapInitialized){return this}else{this.isMapInitialized=true}var j=this,c="first",d;if($.browser.msie&&$.browser.version<8){this.good_browser=false}if(booking.env.b_map_center_latitude){this.latitude=booking.env.b_map_center_latitude}if(booking.env.b_map_center_longitude){this.longitude=booking.env.b_map_center_longitude}if(window&&window.location){this.sProtocol=window.location.protocol}if(navigator.platform.indexOf("iPad")!=-1){this.mouseover="touchstart";this.mousedown=null;this.mouseout=null}this.bs_cookie={};if(typeof(JSON)!=="undefined"){this.bs_cookie=JSON.parse($.cookie("bs"))||{}}GLatLng=function(l,m){return{b_latitude:l,b_longitude:m}};$(".show_map").live("click",function(){var o=$(this),q=o.attr("href"),u="#right",t="",v="",y=(booking.env.map_hover_preview_type?o.attr("data-zoom"):o.attr("rel")),x;if(q){if(q!="#"&&q!=window.location.href.split("#")[0]+"#"){var m=$("#"+q.split("#")[1]);if(m.length){j.map_target=m.get(0)}}}j.supress_hotel_overlay=0;if(j.highlighted_marker){j.highlighted_marker.b_type=j.highlighted_marker.b_type.replace("_current","")}j.filter.hotel=true;j.filter.landmark=true;j.filter.airport=true;if(o.attr("latitude")){j.latitude=o.attr("latitude")}if(o.attr("longitude")){j.longitude=o.attr("longitude")}if(o.attr("id")){x=j.cur_selected_hotel;j.cur_selected_hotel=o.attr("id");var w=((o.attr("data-hotel"))?o.attr("data-hotel"):j.cur_selected_hotel).replace("show_id","");if(w!="open_map"&&w!="hotel_show_map"){t=(o.attr("id")==="b_google_map_thumbnail"?"map_thumbnail":(booking.env.b_action==="hotel"?"top_link":"hotel_item"));j.initPopupSR=true;j.cur_selected_hotel=w;j.b_force_no_clusters=true;if(o.attr("data-coords")){if(booking.env.map_handle_hashchange){j.last_clicked_hotel=w}var n=o.attr("data-coords").split(",");if(typeof n[1]!="undefined"){j.latitude=n[1];j.longitude=n[0]}}if(booking.env.mapUseJsClusters&&j.is_sr&&j.placemarks&&j.placemarks[w]){j.placemarks[w].b_type="hotel_current";if(x&&j.placemarks[x]){j.placemarks[x].b_type="hotel"}}if(y){j.final_zoom=parseInt(y,10)}if(!j.is_hp&&!booking.env.useLargerMapSr){if(!j.is_sr){u="#promo_map_box"}else{if(booking.env.map_sr_anchor){u="#subheader-wrap";if($(u).length===0){if(booking.env.b_site_experiment_omni_search){u="#omni_breadcrumb"}else{u="#breadcrumb"}}if(booking.env.map_sr_anchor===1){var m=$(u);if(m.length===0){u="#right"}else{u=m.offset().top+m.height()}}}if(booking.env.highlight_current_hotel){$("#hotel_item_"+w).css("background-color","#e6edf6")}}$(window).scrollTo(u)}}else{t="top_link"}}j.googleCreate(j.latitude,j.longitude);if(j.is_sr&&j.search_destination){j.setMapCookie("bs","map_open",j.search_destination+j.b_district_ufi+"1")}$(".sr_sidebar_map_redesign").hide();var l=$("#b_hotel_list.deal_of_the_day");if(l.length){(booking.env.map_hide_dotd?l:$(".hotel_item",l)).hide()}if(typeof(booking.google.mapTracker)!="undefined"){v="Display - "+booking.env.b_action+" - "+t+" - "+c;if(c==="first"){c="redisplay"}booking.google.trackEvent(booking.google.mapTracker,v,document.body.id)}return false});$(".show_map_landmark").live("click",function(){var m=$(this),l=m.attr("data-id");j.supress_hotel_overlay=1;$("#map_detail_overlay").hide();if(j.highlighted_marker){j.highlighted_marker.b_type=j.highlighted_marker.b_type.replace("_current","")}if(l&&j.placemarks[l]){j.highlighted_marker=j.placemarks[l];j.highlighted_marker.b_type=j.highlighted_marker.b_type+"_current";j.filter.hotel=false;j.filter.landmark=false;j.filter.airport=false;j.googleCreate(j.latitude,j.longitude)}});if(!booking.env.b_site_experiment_lp_folded_map){$("#fixed_map_container_wrapper").each(function(){j.create_landing_page_map("fixed_map_container_wrapper",j)})}$("*[datamap]").each(function(){var l='url("http://maps.google.com/'+$(this).attr("datamap")+'")';$(this).css({"background-image":l})});$(".thumbnailmap").each(function(){if(!$(this).attr("datamap")){var m=($(this).attr("dimensions"))?$(this).attr("dimensions"):"215x150";var l='url("http://maps.google.com/staticmap?center='+$(this).attr("latitude")+","+$(this).attr("longitude")+"&zoom="+j.getZoom()+"&size="+m+"&"+booking.env.b_google_maps_key_params+'&sensor=false")';$(this).css({"background-image":l})}});$(".folded_map img").bind("click",function(){$(".folded_map").remove();$("#promo_map_box").show();j.create_landing_page_map("fixed_map_container_wrapper",j);return false});if(booking.env.map_handle_hashchange){var f,h=[],k=0;$(window).hashchange(function(){var l=window.location.hash.replace("#","");h.push(l);f=(h.length>1)?h[k-1]:"";k++;if(f==="map_opened"&&(l===""||l.indexOf("hash-blockdisplay")!=-1)){$("#close_map").click();if(j.last_clicked_hotel&&booking.env.b_action!=="hotel"){$(window).scrollTo("#hotel_"+j.last_clicked_hotel)}}else{if(l==="map_opened"&&!j.map_opened){$(j.last_clicked_hotel?"#show_id"+j.last_clicked_hotel:"#open_map").click()}}})}if(booking.promotions){this.preLoadPromotions()}if(booking.loadCurrentHotels){booking.loadCurrentHotels()}if(booking.env.mapToolbar){this.parseAllSRHotels()}if(booking.env.map_enable_sr_autocomplete){this.googleInit();this.historyHandler.initializeHistoryHandler(this);$("#sidebar_map_address_search").live("submit",function(){var m=$("#sidebar_map_address_search_value").val(),l=function(n){if(n){j.requestSearchResults(n)}else{j.geocoderHelper.showFailureMsg();if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"SR Address search - Failed "+(j.b_ufi?j.b_ufi:"")+" - "+m,document.body.id)}}};if(m){j.geocode(m,l)}else{}return false})}if((this.is_sr&&this.bs_cookie&&this.bs_cookie.map_open&&j.search_destination&&this.bs_cookie.map_open===j.search_destination+j.b_district_ufi+"1")||(!booking.env.b_is_landing_page&&booking.env.force_map_open)){if(booking.env.map_enable_sr_autocomplete){j.autoOpenMap=1}else{if($(".show_map").length){var g=$(".show_map").get(0);$(g).click()}else{$("#show_map").click()}}}else{if(booking.env.b_action=="hotel"&&booking.env.b_site_experiment_streetview){this.streetviewCreate(0,0)}}},create_landing_page_map:function(d,f){if(booking.env.b_map_center_latitude&&booking.env.b_map_center_longitude){var c=$("#"+d);f.map_width=c.width();c.replaceWith('<div id="b_gmap" style="padding:0px;height:auto;width:'+f.map_width+'px;position:relative;border:0 !important;"><div id="markerPopup"></div><div id="map_detail_overlay"></div><div id="b_gmap_inner" style="width:'+f.map_width+'px;" latitude="'+booking.env.b_map_center_latitude+'" longitude="'+booking.env.b_map_center_longitude+'">&nbsp;</div>'+(booking.env.map_hide_legend?"":f.legendHTML())+"</div>");f.map_target=$("#b_gmap_inner").get(0);f.googleCreate(booking.env.b_map_center_latitude,booking.env.b_map_center_longitude);$(window).resize(function(){if(f.map_resize_timeout){clearTimeout(f.map_resize_timeout)}f.map_resize_timeout=setTimeout(function(){var g=c.width();if(g<513){$("#b_gmap, #b_gmap_inner").css({width:"100%"})}},100)})}},legendHTML:function(D){var o="",w="";if(booking.env.b_action!=="hotel"&&booking.env.b_action!=="searchresults"&&!booking.env.b_is_ie6){if(booking.env.enable_toggle_icons_lp){var y='<td class="map_toggle_opt map_opt_other_hotel" data-rel="toggle_other_hotel" ><input id="toggle_other_hotel" type="checkbox" class="map_toggle_opt" checked="checked" data-type="hotel"/></td>',l='<td class="map_toggle_opt map_opt_landmark" data-rel="toggle_landmark" ><input id="toggle_landmark" type="checkbox" class="map_toggle_opt" checked="checked" data-type="landmark"/></td>',F='<td class="map_toggle_opt map_opt_airport" data-rel="toggle_airport" ><input id="toggle_airport" type="checkbox" class="map_toggle_opt" checked="checked" data-type="airport"/></td>',j='<td class="map_toggle_opt map_opt_city" data-rel="toggle_city" ><input id="toggle_city" type="checkbox" class="map_toggle_opt" checked="checked" data-type="city"/></td>',d=' class="map_toggle_opt map_opt_other_hotel" data-rel="toggle_other_hotel" ',c=' class="map_toggle_opt map_opt_landmark" data-rel="toggle_landmark" ',h=' class="map_toggle_opt map_opt_airport" data-rel="toggle_airport" ',g=' class="map_toggle_opt map_opt_city" data-rel="toggle_city" ';if(booking.show_ski_lifts){var v='<td class="map_toggle_opt map_opt_ski_lift" data-rel="toggle_ski_lift" ><input id="toggle_ski_lift" type="checkbox" class="map_toggle_opt" checked="checked" data-type="ski_lift"/></td>';var x=' class="map_toggle_opt map_opt_ski_lift" data-rel="toggle_ski_lift" '}}else{var y="",l="",j="",F="",d="",c="",g="",h="";if(booking.show_ski_lifts){var v=x=""}}var m='<div id="b_map_horizontal_legend" style="clear:both;"><h3>'+booking.env.map_legend+'</h3><table cellpadding="0" cellspacing="0"><tbody>';m+=y+"<td "+d+" >"+this.markerHtml("hotel")+"</td><th "+d+" >"+booking.env.map_hotel+"</th>";m+=l+"<td "+c+" >"+this.markerHtml("landmark")+"</td><th "+c+" >"+booking.env.map_landmark+"</th>";if(booking.show_ski_lifts){m+=v+"<td "+x+" >"+this.markerHtml("ski_lift")+"</td><th "+x+" >"+booking.map_legend_ski_lift+"</th>"}m+=j+"<td "+g+" >"+this.markerHtml("city")+"</td><th "+g+" >"+booking.env.city+"</th>";m+=F+"<td "+h+" >"+this.markerHtml("airport")+"</td><th "+h+" >"+booking.env.airport+"</th>";if(booking.env.b_city_center_polygon){m+='<td><img src="//r.bstatic.com/static/img/city-center.gif"></td><th>'+booking.env.city_centre+"</th>"}m+="</tr></tbody></table>";m+="<p>"+booking.env.map_click_these_markers_on_the_map_for_more_detailed_information+"</p>";m+="</div>"}else{var q='<td class="map_toggle_opt map_opt_current_hotel" data-rel="toggle_current_hotel" ><input id="toggle_current_hotel" type="checkbox" class="map_toggle_opt" checked="checked" data-type="hotel_current"/></td>';if(booking.env.b_action==="hotel"||booking.env.enable_toggle_icons_sr||booking.env.enable_toggle_icons_lp){var y='<td class="map_toggle_opt map_opt_other_hotel" data-rel="toggle_other_hotel" ><input id="toggle_other_hotel" type="checkbox" class="map_toggle_opt"'+(this.filter.hotel?' checked="checked"':"")+' data-type="hotel"/></td>',l='<td class="map_toggle_opt map_opt_landmark" data-rel="toggle_landmark" ><input id="toggle_landmark" type="checkbox" class="map_toggle_opt"'+(this.filter.landmark?' checked="checked"':"")+' data-type="landmark"/></td>',F='<td class="map_toggle_opt map_opt_airport" data-rel="toggle_airport" ><input id="toggle_airport" type="checkbox" class="map_toggle_opt"'+(this.filter.airport?' checked="checked"':"")+' data-type="airport"/></td>',z=' class="map_toggle_opt map_opt_current_hotel" data-rel="toggle_current_hotel" ',d=' class="map_toggle_opt map_opt_other_hotel" data-rel="toggle_other_hotel" ',c=' class="map_toggle_opt map_opt_landmark" data-rel="toggle_landmark" ',h=' class="map_toggle_opt map_opt_airport" data-rel="toggle_airport" ';if(booking.show_ski_lifts){var v='<td class="map_toggle_opt map_opt_ski_lift" data-rel="toggle_ski_lift" ><input id="toggle_ski_lift" type="checkbox" class="map_toggle_opt" checked="checked" data-type="ski_lift"/></td>';var x=' class="map_toggle_opt map_opt_ski_lift" data-rel="toggle_ski_lift" '}if(booking.env.enable_toggle_icons_sr){var u='<td class="map_toggle_opt map_opt_hotel_matching_criteria" data-rel="toggle_hotel_matching_criteria" ><input id="toggle_hotel_matching_criteria" type="checkbox" class="map_toggle_opt" checked="checked" data-type="hotel_matching_criteria"/></td>';var E=' class="map_toggle_opt map_opt_hotel_matching_criteria" data-rel="toggle_hotel_matching_criteria" '}}else{var q="",y="",l="",F="",z="",d="",c="",g="",h="";if(booking.show_ski_lifts){var v=x=""}if(!booking.env.enable_toggle_icons_sr){var u=E=""}var n="";var A;var t}var n=" width: 155px; ";if(typeof D=="undefined"){D=390}if(this.is_sr){o="right: -198px;"+(booking.env.map_use_thumbnail_improved_zoom?"top: 27px;":"top: 60px;");w='<div id="map_legend_toggle_wrapper"><div id="map_legend_toggle" class="map_legend_toggle"></div><div id="map_legend_toggle_img" class="map_legend_toggle"></div></div>'}if(booking.env.b_lang=="ru"){var m='<div id="b_map_legend" style="height: '+D+"px;"+n+o+'">'+w+'<div id="map_legend_basic_content"><table><tbody>'}else{var m='<div id="b_map_legend" style="height: '+D+"px; "+n+o+'">'+w+'<div id="map_legend_basic_content"><h3>'+booking.env.map_legend+"</h3><table><tbody>"}if(this.is_sr){A="hotel_matching_criteria";t=booking.env.map_hotel_matching_your_selection_criteria;if(booking.env.b_site_experiment_fd_pages&&!booking.env.b_site_experiment_fd_pages_ipad){A="flash_deal";t=booking.env.my_flash_deal_translation}m+="<tr>"+u+"<td "+E+" >"+this.markerHtml(A);m+="</td><th "+E+" >"+t+"</th></tr>";if(!booking.env.b_site_experiment_fd_pages){m+="<tr>"+y+"<td "+d+" >"+this.markerHtml("hotel_not_matching_criteria");m+="</td><th "+d+" >"+booking.env.map_other_hotel+"</th></tr>"}}else{if(booking.env.b_action==="hotel"){m+="<tr>"+q+"<td "+z+" >"+this.markerHtml("hotel_current")+"</td><th "+z+" >"+booking.env.current_hotel+"</th></tr>"}m+="<tr>"+y+"<td "+d+" >"+this.markerHtml("hotel");m+="</td><th "+d+" >"+booking.env.map_hotel+"</th></tr>"}m+="<tr>"+l+"<td "+c+" >"+this.markerHtml("landmark")+"</td><th "+c+" >"+booking.env.map_landmark+"</th></tr>";if(booking.show_ski_lifts){m+="<tr>"+v+"<td "+x+" >"+this.markerHtml("ski_lift")+"</td><th "+x+" >"+booking.map_legend_ski_lift+"</th></tr>"}m+="<tr>"+F+"<td "+h+" >"+this.markerHtml("airport")+"</td><th "+h+" >"+booking.env.airport+"</th></tr>";m+="</tbody></table>";if(booking.env.map_legend_districts_dropdown){m+='<p class="ledge">'+booking.env.map_legend_copy_hover_bold+"</p>";m+='<p class="ledge">'+booking.env.map_legend_copy_click_bold+"</p>";if(booking.env.map_legend_districts_dropdown){var k="",C=0,f="";for(var B in booking.env.map_legend_districts_dropdown){if(booking.env.map_legend_districts_dropdown[B].id===booking.env.b_district_id){k='selected="selected"';C=1}else{k=""}f+='<option value="'+booking.env.map_legend_districts_dropdown[B].url+'" '+k+">"+B+"</option>"}m+="<h4>"+booking.env.map_legend_districts+'</h4><select id="map_district_filter" style="width: 100%;"><option value="';m+=(C?booking.env.b_url_no_district+'">'+booking.env.map_legend_all_districts:'">'+booking.env.map_legend_copy_zoom)+"</option>";m+=f+"</select>"}}else{if(!booking.env.map_disable_prices_button){m+='<p style="font-size: 11px;">'+booking.env.map_click_these_markers_on_the_map_for_more_detailed_information+"</p>"}}if(booking.env.map_hotel_landmarks){m+="</div>"+booking.env.map_hotel_landmarks}else{m+="</div>"}m+="</div>"}return m},googleInit:function(g,c){var f=this,d;if(!this.mapScriptLoaded){this.mapScriptLoaded=true;d=document.createElement("script");d.type="text/javascript";d.src=booking.env.google_map_current_url;window.rerunCreateMap=function(){if(booking.env.map_enable_sr_autocomplete){f.initGooglePlacesAutocomplete("sidebar_map_address_search_value");if(f.autoOpenMap){$("#show_map").click()}}else{f.googleCreate(g,c)}};$("head").append(d)}else{}},streetviewInit:function(h,c){var g=this;var f=g.sProtocol+"//maps.google.com/maps/api/js?v="+this.api_version+"&callback=rerunCreateMap&sensor=";f+=(this.sensor)?"true":"false";f+="&language=";f+=(booking.env.b_lang)?booking.env.b_lang:"en";var d=document.createElement("script");d.type="text/javascript";d.src=f;window.rerunCreateMap=function(){g.streetviewCreate(h,c)};$("head").append(d)},streetviewCreate:function(g,c){if(typeof google!="undefined"&&typeof google.maps!="undefined"){var d=new google.maps.LatLng(booking.env.b_streetview_latitude,booking.env.b_streetview_longitude);var f={position:d,pov:{heading:booking.env.b_streetview_yaw,pitch:booking.env.b_streetview_pitch+10,zoom:booking.env.b_streetview_zoom}};booking.env.panorama=new google.maps.StreetViewPanorama(document.getElementById("streetview"),f);booking.env.panorama.setVisible(true)}else{this.streetviewInit(g,c)}},googleCreate:function(M,k){var g=this;if(typeof google!="undefined"&&typeof google.maps!="undefined"){this.map_opened=true;if(!this.map_object){if(!booking.hotelsMatchingCriteria){booking.hotelsMatchingCriteria={}}if(typeof(this.map_target)==="undefined"){var A="",w=2,j="",C="",c="",n="",D=false,I="",G="",t="",x=$(window),o="#right",u=(booking.env.b_action==="hotel"),L,h,q,B,f=(x.height()>577&&x.width()>735),v=f&&this.is_hp;if(typeof booking.google!="undefined"){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,(f?"Big size":"Small size"),document.body.id)}}if(booking.env.mapUseJsClusters||booking.env.mapToolbar||booking.env.mapAddressLoadingMsg){t='<div id="map_ui_blocker_overlay" style="display:none;position: absolute; top: 0px;left: 0px; width:100%;height:100%;z-index: 999;background-color: #ccc;opacity:0.3;filter: alpha(opacity=30);"></div><div id="map_status_msg"><span id="map_status_current_msg">'+booking.env.mapAddressLoadingMsgTxt+"</span></div>"}if(booking.env.enable_map_info_box&&!booking.env.map_enable_sr_autocomplete){I=(u?'<div id="hotel_map_info_box_wrapper">':"")+'<div id="map_info_box" '+(booking.env.map_enable_sr_autocomplete?'style="display:none"':"")+'class="'+(booking.env.map_landmark_dropdown?" mult_item_info_box":"")+(booking.env.use_places_autocomplete?" autocomplete_search":"")+'">'+(u?'<div id="hotel_map_info_box_content">':"")+'<table id="map_info_box_wrapper"><tbody><tr><td class="map_info_box_item_wrapper'+(booking.env.map_landmark_dropdown?" two_list_item":"")+'"><div id="map_info_box_address" class="option_item"><form id="map_address_search"><label for="map_address_search_value" style="margin: 3px;">'+booking.env.map_address_search_search_label+'</label><input id="map_address_search_value" type="text"/><input type="submit" class="button_x" style="float:none;margin: 0 10px;" value="'+booking.env.map_address_search_search+'" /><span id="map_address_search_success_wrapper"'+(booking.env.map_landmark_dropdown_type===2?' class="no_padding"':"")+'><span id="map_address_search_success" class="map_address_search_status'+(booking.env.map_landmark_dropdown_type===2?' simple_success">':'">'+booking.env.map_address_search_centered)+'</span><span id="map_address_search_result"></span></span><span id="map_address_search_failed" class="map_address_search_status">'+(booking.env.map_landmark_dropdown_type===2?"":booking.env.map_address_search_error)+"</span>"+(booking.env.mapAddressSearchUpdates?'<span id="sidebar_map_address_search_loading" class="map_address_search_status">'+booking.env.loading+"</span>":"")+"</form></div></td>"+(booking.env.map_landmark_dropdown?booking.env.map_landmark_dropdown:"")+"<tr></tbody></table>"+(u?"</div>":"")+"</div>"+(u?"</div>":"")}if(this.is_sr){$("#open_map").hide();$("#close_map").show();if(!booking.env.map_no_force_open_sr){$("#frm").append('<input type="hidden" name="map" value="1" id="force_map">')}if(booking.env.mapToolbar){mapToolbarItemClass=(booking.env.mapToolbar.cityCentreAvailable?"map_toolbar_3_items":"map_toolbar_2_items");G='<div id="map_toolbar"><div id="map_toolbar_wrapper">'+(booking.env.mapToolbar.cityCentreAvailable?'<div id="map_toolbar_city_centre" class="map_toolbar_option intermediate_option '+mapToolbarItemClass+'" data-type="city_centre"><div>'+booking.env.mapToolbar.city_centreTxt+"</div></div>":"")+'<div id="map_toolbar_price" class="map_toolbar_option intermediate_option '+mapToolbarItemClass+'" data-type="price"><div>'+booking.env.mapToolbar.priceTxt+'</div></div><div id="map_toolbar_popularity" class="map_toolbar_option '+mapToolbarItemClass+'" data-type="popularity"><div>'+booking.env.mapToolbar.popularityTxt+"</div></div></div>"}j='class="map_wrapper"'+(booking.env.enable_map_info_box&&!(booking.env.map_address_search_to_top||booking.env.mapToolbar)?'style="border-bottom: 1px solid #AAA !important;border-bottom: 1px solid rgba(0,0,0,.3) !important;"':"");C=' style="height: '+(booking.env.b_site_experiment_fd_pages?"450":"550")+'px;"';n="overflow: hidden;";$(".map_legend_toggle").live("click",function(){var O=-198,d=true;if(!D){D=true;$img=$("#map_legend_toggle_img");if(!$img.hasClass("map_legend_toggle_shown")){d=false;O=-1}$("#b_map_legend").animate({right:O},function(){D=false;d?$img.removeClass("map_legend_toggle_shown"):$img.addClass("map_legend_toggle_shown")})}});h='<div id="b_map_container" style="z-index:999;'+n+'">'+(booking.env.map_address_search_to_top||booking.env.mapToolbar?I:"")+'<div id="b_gmap" '+j+">"+this.legendHTML()+'<div id="markerPopup"></div><div id="map_detail_overlay"></div>'+t+'<div id="b_gmap_inner"'+C+"></div></div>"+(booking.env.map_address_search_to_top||booking.env.mapToolbar?"":I)+"</div>"+G;if(booking.env.useLargerMapSr){$(document.body).append('<div id="sr_map" style="position: absolute;" class="sr_tab legend_static">'+h+'<div id="b_shadow"></div><div id="close_map_lightbox"></div></div>');q=$("#sr_map")}else{q=$("#sr_map");q.html(h)}q.show();if(booking.env.use_places_autocomplete&&!booking.env.map_enable_sr_autocomplete){this.initGooglePlacesAutocomplete("map_address_search_value")}A=$("#b_gmap_inner");if(booking.env.useLargerMapSr){this.resizeMapToFullScreen(this,true);this.positionMapContainer()}else{B=q.width();$("#b_gmap").width(B);A.width(B)}q.removeClass("placeholder_sr_map").show();if(booking.env.b_site_experiment_size_filters_to_map===1){document.doSizeFiltersToFitMap()}$("#close_map_lightbox, #close_map").live("click",function(){var O="",d=$("#b_hotel_list");if(typeof(ClickTaleExec)!=="undefined"){ClickTaleExec('jQuery("#close_map").click()')}$("#sr_map").hide();$("#close_map").hide();$("#open_map").show();g.map_opened=false;if(d.length){(booking.env.map_hide_dotd?d:$(".hotel_item",d)).show()}if(booking.env.b_action=="searchresults"){g.bs_cookie.map_open="";if(typeof(JSON)!="undefined"){$.cookie("bs",JSON.stringify(g.bs_cookie),{path:"/",domain:booking.env.b_domain_end})}}if(typeof booking.google!="undefined"){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Close",document.body.id)}}$("#filterbox_options a, #sort_by a").each(function(){this.href=this.href.slice(0,-4)});$(".sr_sidebar_map_redesign").show();if(booking.env.b_site_experiment_size_filters_to_map===1){document.undoSizeFiltersToFitMap()}g.initPopup=false;$("#rightClickPopup").hide();if(g.last_clicked_hotel){if(booking.env.map_scroll_last_hotel){$(window).scrollTo("#hotel_item_"+g.last_clicked_hotel);if(booking.env.map_scroll_last_hotel===2){$("#hotel_item_"+g.last_clicked_hotel).css("background-color","#e6edf6")}}}booking.env.trackExperiment(O,"map_opened");return false})}else{var N=false;var K=document.createElement("div");K.id="b_map_container";K.style.zIndex=999;K.style.display="none";K.innerHTML='<div id="b_gmap" '+(v?'class="larger"':"")+">"+t+'<div id="b_map_title"><h2 '+(booking.env.not_drag_map?'class="no_drag"':"")+">"+booking.env.map+'</h2><a href="#" id="close_map">'+booking.env.close_map+'</a></div><div style="position:relative;float: left;"><div id="b_gmap_inner"></div><div id="map_detail_overlay"></div><div id="markerPopup"></div>'+(booking.env.enable_map_info_box?I:"")+"</div>"+this.legendHTML()+'</div><div id="b_shadow"></div>';document.body.appendChild(K);A=$("#b_gmap_inner");this.resizeMapToFullScreen(this,true);this.positionMapContainer();$("#b_map_container").show();$("#close_map").click(function(){var d="";$("#b_map_container").hide();$(".sr_sidebar_map_redesign").show();$("#open_map").show();g.map_opened=false;if(typeof booking.google!="undefined"){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Close",document.body.id)}}if(booking.env.b_action=="searchresults"){g.bs_cookie.map_open="";if(typeof(JSON)!="undefined"){$.cookie("bs",JSON.stringify(g.bs_cookie),{path:"/",domain:booking.env.b_domain_end})}}if(booking.env.b_site_experiment_size_filters_to_map===1){document.undoSizeFiltersToFitMap()}g.initPopup=false;$("#rightClickPopup").hide();if(!N){booking.env.trackExperiment(d,"map_opened");N=true}return false});if(!booking.env.not_drag_map){$(document).mousemove(function(d){if(g.oDragMap!=null){var P=g.map_pos_x[1]+d.pageX-g.map_pos_x[0];var O=g.map_pos_y[1]+d.pageY-g.map_pos_y[0];$(g.oDragMap).css({left:P+"px",top:O+"px"})}});$("#b_map_title, #b_shadow").mousedown(function(d){g.map_pos_x=[d.pageX,$("#b_map_container").position().left];g.map_pos_y=[d.pageY,$("#b_map_container").position().top];g.oDragMap=$("#b_map_container")});$(document).mouseup(function(d){g.oDragMap=null})}if(booking.env.map_hotel_landmarks){$("#map_hotel_landmark_list").height($("#b_map_legend").height()-$("#map_legend_basic_content").height())}}this.map_width=A.width();this.map_height=A.height();this.map_target=A.get(0);if(v||booking.env.useLargerMapSr){this.mapResizeListener(true)}}$("#b_gmap").bgiframe();this.initMap(M,k,this);if(booking.env.b_city_center_polygon){var F=[],l=0,H=0,E;for(E=0;booking.env.b_city_center_polygon[E];E++){F.push(new google.maps.LatLng(booking.env.b_city_center_polygon[E][0],booking.env.b_city_center_polygon[E][1]));l+=parseFloat(booking.env.b_city_center_polygon[E][0]);H+=parseFloat(booking.env.b_city_center_polygon[E][1])}b_city_center_polygon=new google.maps.Polygon({paths:F,strokeColor:"#003580",strokeOpacity:0.5,strokeWeight:1,fillColor:"#003580",fillOpacity:0.2});b_city_center_polygon.setMap(g.map_object);g.map_object.setCenter(new google.maps.LatLng(l/E,H/E));if(booking.env.b_this_url.match(/london|paris/)){g.map_object.setZoom(g.map_object.getZoom()+1)}else{if(booking.env.b_this_url.match(/venice/)){g.map_object.setZoom(g.map_object.getZoom()+3)}else{g.map_object.setZoom(g.map_object.getZoom()+2)}}}if(booking.env.map_more_params){booking.track.exp(booking.env.map_more_params)}$("#embedded_map_loading").hide()}else{$("#"+(booking.env.b_action==="searchresults"?"sr_map":"b_map_container")).show();$("#open_map").hide();$("#close_map").show();if((this.is_hp&&v)||booking.env.useLargerMapSr){this.resizeMapToFullScreen(this,true);this.positionMapContainer()}google.maps.event.trigger(this.map_object,"resize");if(g.cur_selected_hotel!=="hotel_show_map"){if(g.cur_selected_hotel!=="b_google_map_thumbnail"&&g.cur_selected_hotel!=="open_map"&&g.cur_selected_hotel!=="show_map"&&g.cur_selected_hotel!=="view_map"&&g.cur_selected_hotel!=="sidebar_map_address_search_success"){g.map_object.setCenter(new google.maps.LatLng(M,k));g.map_object.setZoom(g.getZoom())}else{var J=this.getBoundingZoom();if(J!=null){var F=J.split(",");var z=new google.maps.LatLng(F[1],F[0]);var m=new google.maps.LatLng(F[3],F[2]);var y=new google.maps.LatLngBounds(z,m);g.map_object.fitBounds(y)}}}this.updateMap();if(booking.env.b_site_experiment_size_filters_to_map===1){document.doSizeFiltersToFitMap()}}if(booking.env.map_handle_hashchange){window.location.hash="map_opened"}}else{this.googleInit(M,k);if(booking.env.map_chrome_cursor_fix){$(document.body).append('<img src="'+g.sProtocol+'//maps.gstatic.com/mapfiles/openhand_8_8.cur" style="display: none;" />')}}},preLoadPromotions:function(){if(typeof booking.promotions!="undefined"&&typeof booking.promotions.load!="undefined"){booking.promotions.load(booking.env);if(booking.pageSubject){var c={};c.pageSubject=booking.pageSubject;this.parseJsonData(c)}this.parseJsonData(booking.promotions)}},loadJSONHotels:function(m){var g=this;if(!booking.env.no_update_map){var h=this.map_object.getBounds(),n=h.getSouthWest().lng()+","+h.getSouthWest().lat()+","+h.getNorthEast().lng()+","+h.getNorthEast().lat(),d="/hotelsonmap."+booking.env.b_lang+".json"+(booking.env.b_query_params_no_ext?booking.env.b_query_params_no_ext:"?")+";BBOX="+n,l={sr:(booking.env.use_mobile_icons?(booking.env.use_mobile_icons===2?200:150):100),other:(booking.env.use_mobile_icons?(booking.env.use_mobile_icons===2?200:150):50)};if(booking.env.mapUseJsClusters){d+=";limit=500"}else{if(this.is_sr){d+=";limit="+l.sr}else{d+=";limit="+l.other}}if(booking.env.b_checkin_date&&booking.env.b_checkout_date){d+=";checkin="+booking.env.b_checkin_date+";checkout="+booking.env.b_checkout_date}for(var j=0;j<this.json_params.length;j++){var f=this.json_params[j];if(booking.env[f]){d+=";"+f.replace("b_param_","")+"="+booking.env[f]}}this.currentRequestId++;if(booking.env.mapUseJsClusters){this.showStatusMsg({position:"center",loadFromMapDrag:1})}$.get(d,function(t){var q=(typeof t.b_clusters_found!="undefined")?t.b_clusters_found:0;g.currentResponsedReceivedId++;g.parseJsonData(t.b_hotels,q)})}else{if(booking.env.profile_map_list){this.parseJsonData(booking.env.profile_map_list,booking.env.profile_map_list_count);if(!booking.env.profile_map_init){booking.env.profile_map_init=true;var c=new google.maps.LatLngBounds();for(var o in booking.env.profile_map_list){if(booking.env.profile_map_list.hasOwnProperty(o)){var k=new google.maps.LatLng(booking.env.profile_map_list[o].b_latitude,booking.env.profile_map_list[o].b_longitude);c.extend(k)}}g.map_object.setCenter(c.getCenter());g.map_object.fitBounds(c)}}}},parseJsonData:function(g,j){var k=false,h=booking.env.map_enable_google_markers,l,c;if(this.b_clusters_found==0){var j=0;for(oItem in g){if((g[oItem].b_latitude&&g[oItem].b_longitude)||g[oItem].latLng){this.placemarks[oItem]=g[oItem];if(h&&typeof google!="undefined"&&typeof google.maps!="undefined"){m.gMarker=new google.maps.Marker({position:new google.maps.LatLng(m.b_latitude,m.b_longitude)});m.gMarker.set("b_id",oItem)}j++}}if(j==0){j=1}this.b_clusters_found=j}else{if(g&&typeof g.b_clusters_found!="undefined"){this.b_clusters_found=g.b_clusters_found}for(oItem in g){var m=g[oItem];if(m.latLng){m.b_latitude=m.latLng.b_latitude;m.b_longitude=m.latLng.b_longitude}if(h&&typeof google!="undefined"&&typeof google.maps!="undefined"){m.gMarker=new google.maps.Marker({position:new google.maps.LatLng(m.b_latitude,m.b_longitude)});m.gMarker.set("b_id",oItem)}if(m.b_avg_lat&&m.b_avg_long){m.b_latitude=m.b_avg_lat;m.b_longitude=m.b_avg_long;m.icon_type="cluster";m.b_type="cluster";if(m.b_nr_hotels){if(m.b_nr_hotels>1){m.title=m.b_nr_hotels+" hotels"}else{m.title=m.b_nr_hotels+" hotel"}}if(!this.placemarks[oItem]){this.placemarks[oItem]=m}else{for(oSubItem in m){this.placemarks[oItem][oSubItem]=m[oSubItem]}}}else{if((m.b_latitude&&m.b_longitude)||m.latLng){var f=false;if(this.placemarks.pageSubject&&(oItem==this.placemarks.pageSubject.b_hotel_id)){f=true}var d=this.placemarks[oItem];if(!this.placemarks[oItem]&&!f){this.placemarks[oItem]=m}else{for(oSubItem in m){if(!oSubItem=="icon_type"&&this.placemarks[oItem].icon_type=="hotel_current"){this.placemarks[(f?"pageSubject":oItem)][oSubItem]=m[oSubItem]}}}}}}}if(typeof google!=="undefined"&&this.map_object!=null){this.updateMap();if(this.is_sr){this.initPopupSR=false}}},getIcon:function(d,f){f=f.replace("hotel_","");f=f.replace("hotel","");var c="hotel";if(d.b_type){c=d.b_type}if(d.icon_type){c=d.icon_type}if(c==="hotel"){if(this.is_sr){if(booking.hotelsMatchingCriteria[f]){c="hotel_matching_criteria"}else{c="hotel_not_matching_criteria"}}if(f===this.cur_selected_hotel){c="hotel_current"}if(d.b_closed){c="hotel_closed"}}return c},getZoom:function(){var c=14;if($(".show_map[rel]").length){iZoomlevel=$(".show_map[rel]").attr("rel")}c=(booking.env.b_map_google_static_thumbnail_zoom_level)?booking.env.b_map_google_static_thumbnail_zoom_level:(booking.env.b_action=="country")?5:11;if(this.final_zoom>0){c=this.final_zoom}return c},getBoundingZoom:function(){var d=null,c=$(".show_map[data-bounding-box]");if(c.length){d=c.attr("data-bounding-box")}if(booking.env.b_map_google_bounding_box){d=booking.env.b_map_google_bounding_box}return d},createMarker:function(v){var o=this.b_map_icons[v.type],z=(o.height)?o.height:20,x=(o.width)?o.width:17,k=o.iconAnchor[0],A=(o.zOrder)?o.zOrder:20,w=v.y-o.iconAnchor[1],g=(v.type=="cluster")?'<div class="ml-text">'+v.nrHotels+"</div>":"",u="left:"+(v.x-k)+"px;top:"+w+"px;z-index:"+(A+1)+";",h="width:"+x+"px;height:"+z+"px;",f="",d,q,m,j,n=this.b_map_icons[v.type].className,l,c=true,y="";if(v.type=="country"){d=$('<div class="marker marker_type_'+v.type+'" id="'+v.id+'" style="'+u+h+";background: url(//r.bstatic.com/static/img/flags/24/"+v.id+'.png) left top no-repeat;">'+g+this.markerHtml(v.type,"position:absolute;top:0px;left:0px;z-index:12000;")+"</div>")}else{if(booking.env.supress_map_marker_img&&this.b_map_icons[v.type].className){if(booking.env.mapToolbar&&(v.type==="hotel"||v.type==="hotel_matching_criteria")){q=this.placemarks[v.id];if(this.mapToolbarFilter==="price"){m=q.cheapestPrice;if(m<75){n="icon-marker-hotel-light-orange"}else{if(m>150){n="icon-marker-hotel-red"}}}else{if(this.mapToolbarFilter==="popularity"){j=q.review_score;if(j<=6){n="icon-marker-hotel-light-orange"}else{if(j>8){n="icon-marker-hotel-red"}}}else{if(this.mapToolbarFilter==="city_centre"){l=q.districts.length;for(var t=0;(t<l)&&c;t++){if(this.cityCentreDistricts.indexOf(q.districts[t].toString())!==-1){c=false}}if(c){n="icon-marker-hotel-light-orange"}else{n="icon-marker-hotel-red"}}}}}if(v.type==="cluster"){y=booking.env.mapClusterCountHTML.replace("placeholder",v.nrHotels);y=y.replace("{clusterid}",v.id)}d=$('<div class="marker use_map_sprites icon-marker marker_type_'+v.type+" "+n+'" id="'+v.id+'" style="'+u+'">'+y+"</div>")}else{d=$('<div class="marker marker_type_'+v.type+'" id="'+v.id+'" style="'+u+'">'+g+this.markerHtml(v.type,"position:absolute;top:0px;left:0px;z-index:12000;")+"</div>")}}return d},updateMap:function(){if(!this.map.oMarkerLayer||!this.enable_all_markers){return}var g=this,G,d=booking.env.map_enable_google_markers,h=this.map_object.getZoom(),I=document.createDocumentFragment(),E=g.filter,B=0,o,m,k,j,x,t=this.map_object.getBounds(),K=t.getSouthWest().lat(),A=t.getSouthWest().lng(),H=[K,A,t.getNorthEast().lat(),t.getNorthEast().lng()],C,w,v,z,c,y,u,D=false;this.map_overlay.oMarkerLayer.empty();if(!d){var q=new google.maps.LatLng(K,A);G=this.map_overlay.getProjection();g.map_scroll=G.fromLatLngToDivPixel(q)}if(booking.env.mapUseJsClusters){c={};this.markerClusterer.clearClusters();if(this.map_object.getZoom()<15){D=true}}for(oItem in g.placemarks){var n=g.placemarks[oItem],F;if(typeof(n.b_type)==="undefined"){n.b_type="hotel"}F=n.b_type;if(n.latLng){n.b_latitude=n.latLng.b_latitude;n.b_longitude=n.latLng.b_longitude}if(E[F]){if((n.b_latitude>H[0]&&n.b_longitude>H[1]&&n.b_latitude<H[2]&&n.b_longitude<H[3])){if(F==="hotel"&&this.markerClusterer){this.markerClusterer.addMarkerToClosestCluster(n)}C=this.getIcon(n,oItem);w=g.b_map_icons[C];v=(w.min)?w.min:0;z=(w.max)?w.max:1000;if((h>=v&&h<=z)||booking.env.skip_zoom_levels){if(F==="hotel"){B++}if(d){if(!n.gMarker){n.gMarker=new google.maps.Marker({position:new google.maps.LatLng(n.b_latitude,n.b_longitude)});n.gMarker.set("b_id",oItem)}n.gMarker.setIcon(g.b_map_icons[g.getIcon(n,oItem)].image);if(n.b_type==="current_search"){n.gMarker.setZIndex(10000)}if(!n.hasMouseHandlers){n.hasMouseHandlers=1;google.maps.event.addListener(n.gMarker,g.mouseover,function(f){g.mouseEventHandlers.markerMouseoverHandler(this.get("b_id"))});google.maps.event.addListener(n.gMarker,g.mouseout,function(){g.mouseEventHandlers.markerMouseoutHandler(this.get("b_id"))});google.maps.event.addListener(n.gMarker,g.mouseclick,function(f){g.mouseEventHandlers.markerClickHandler(this.get("b_id"),f,g)});google.maps.event.addListener(n.gMarker,"rightclick",function(f){g.mouseEventHandlers.markerClickHandler(this.get("b_id"),{which:3,event:f},g)})}if(!n.gMarker.getMap()){n.gMarker.setMap(g.map_object)}}else{oHotelLatLng=new google.maps.LatLng(n.b_latitude,n.b_longitude);o=G.fromLatLngToDivPixel(oHotelLatLng);m=(n.title)?n.title:C;k=(n.b_nr_hotels)?n.b_nr_hotels:1;j=g.createMarker({x:o.x,y:o.y,id:oItem,type:C,nrHotels:k});x=j.get(0);if(D&&F==="hotel"){c[n.b_id]={marker:n,markerHTML:x}}else{I.appendChild(x)}}}}}else{if(d&&n.gMarker){n.gMarker.setMap(null)}}}if(D){for(i in c){if(typeof(c[i].marker.clusterId)==="undefined"||(c[i].marker.clusterId>=0&&this.markerClusterer.clusters[c[i].marker.clusterId]&&this.markerClusterer.clusters[c[i].marker.clusterId].totalMarkers<this.markerClusterer.minClusterSize)){I.appendChild(c[i].markerHTML)}}for(i=0,y=this.markerClusterer.clusters.length,u=this.markerClusterer.clusters;i<y;i++){if(u[i].totalMarkers>=this.markerClusterer.minClusterSize){oHotelLatLng=new google.maps.LatLng(u[i].center.b_latitude,u[i].center.b_longitude);o=G.fromLatLngToDivPixel(oHotelLatLng);j=g.createMarker({x:o.x,y:o.y,id:"cluster"+u[i].id,type:"cluster",nrHotels:u[i].totalMarkers});x=j.get(0);I.appendChild(x)}}I.appendChild($('<div id="cluster_area"></div>').get(0))}this.map.oMarkerLayer.append(I);if(!(booking.env.b_action==="hotel"&&this.initPopup)&&!(this.is_sr&&!this.initPopupSR)){if(this.is_sr){$("#map_detail_overlay").hide()}if(!(this.is_sr&&booking.env.use_new_current_hotel_icon===2)){var J=false;g.initPopupTimeout=setTimeout(function(){var f=(d?g.cur_selected_hotel:$(".marker_type_hotel_current"));if((!d&&f.length)||(d&&g.cur_selected_hotel.match(/[0-9]/i))){if(!J&&booking.env.map_highlight_hotel_params){J=true;booking.env.trackExperiment(booking.env.map_highlight_hotel_params,"map_opened")}if(!d){g.highlight_marker_z=f.css("z-index")}if(!(booking.env.map_not_highlight_hotel||g.supress_hotel_overlay)){if(d){g.mouseEventHandlers.markerMouseoverHandler(f)}else{f.mouseover()}}g.initPopup=true}},500)}}else{$("#map_detail_overlay").hide()}if(booking.env.b_site_experiment_size_filters_to_map===1){document.doSizeFiltersToFitMap()}if(this.currentRequestId===this.currentResponsedReceivedId&&g.mapStatusMSgShown){g.mapStatusMSgShown=0;$("#map_status_msg").hide();$("#map_ui_blocker_overlay").hide()}this.updateFilters()},initMap:function(M,h,c){if(!google||!google.maps||!google.maps.OverlayView){return}var G=false,B=false,f,k,n,q,o,F,D;this.streetviewLoaded=false;function t(P){this.setValues(P);this.oMarkerLayer=$("<div />").addClass("markersOverlay")}t.prototype=new google.maps.OverlayView;t.prototype.onAdd=function(){var P=$(this.getPanes().overlayImage);P.append(this.oMarkerLayer);c.map=this};t.prototype.onRemove=function(){this.oMarkerLayer.remove()};t.prototype.draw=function(){if(!booking.env.b_site_experiment_fd_pages&&!booking.env.mapToolbar){if(booking.env.b_site_experiment_map_overlay_no_timeout||booking.env.map_enable_google_markers){c.loadJSONHotels()}else{setTimeout(function(){c.loadJSONHotels()},500)}}else{if(booking.env.mapToolbar){c.updateMap()}}};if(typeof google!="undefined"){if(this.bs_cookie&&this.bs_cookie.map&&this.use_sr_cookie&&document.getElementById("destination")){var w=this.bs_cookie.map.split(",");if(w[0]===document.getElementById("destination").value+c.b_ufi&&!this.bs_cookie.map_dist){M=w[1];h=w[2];var O=w[3]}if(this.bs_cookie.map_dist){c.setMapCookie("bs","map_dist","")}}if(booking.env.map_improve_ufi_zoom&&!O){var J=booking.env.map_improve_ufi_zoom[booking.env.b_ufi];O=J.zoom;M=J.lat;h=J.lng}var H=new google.maps.LatLng(M,h),z={zoom:(O)?parseInt(O,10):c.getZoom()+(booking.env.map_landmark_extra_zoom?2:0),center:H,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID]},mapTypeControl:true,navigationControl:true,scaleControl:true,streetViewControl:(booking.env.enable_streetview?true:false),scrollwheel:booking.env.b_site_experiment_map_scrollwheel,maxZoom:(booking.env.b_site_experiment_map_min_zoom_sr?17:null),overviewMapControl:(booking.env.map_use_thumbnail_improved_zoom?true:false),overviewMapControlOptions:(booking.env.map_use_thumbnail_improved_zoom?{opened:true}:false)};if(booking.env.map_use_own_styles){z.styles=[{featureType:"poi.business",stylers:[{visibility:(booking.env.map_use_own_styles==2?"off":"simplified")}]}]}this.map=new google.maps.Map(this.map_target,z);this.map_object=this.map;if(!O&&(c.cur_selected_hotel==="b_google_map_thumbnail"||c.cur_selected_hotel==="open_map"||c.cur_selected_hotel==="show_map"||c.cur_selected_hotel==="view_map"||c.cur_selected_hotel==="sidebar_map_address_search_success")){var K=this.getBoundingZoom();if(K!=null){var E=K.split(",");var y=new google.maps.LatLng(E[1],E[0]);var m=new google.maps.LatLng(E[3],E[2]);var x=new google.maps.LatLngBounds(y,m);this.map_object.fitBounds(x);this.fixZoom=true}}google.maps.event.addListener(this.map,"dragstart",function(P){if(typeof(c.clicked_marker)!==undefined&&c.clicked_marker===true){c.clicked_marker=false}$("#rightClickPopup").hide();$("#map_detail_overlay").html("<div />").hide();$("#markerPopup").html("<div />").hide()});google.maps.event.addListener(this.map,"dragend",function(S){if(!booking.env.b_site_experiment_fd_pages&&!booking.env.mapToolbar){var T=c.map_object.getBounds(),R=new google.maps.LatLng(T.getSouthWest().lat(),T.getSouthWest().lng()),Q=c.map_overlay.getProjection();c.map_scroll=Q.fromLatLngToDivPixel(R);c.loadJSONHotels(true);if(c.use_sr_cookie&&c.search_destination_without_district){var P=c.map_object.getCenter();c.setMapCookie("bs","map",c.search_destination_without_district+c.b_ufi+","+P.lat()+","+P.lng()+","+c.map_object.getZoom())}}else{c.updateMap()}if(booking.env.mapUseJsClusters){$("#cluster_area").hide()}if(booking.env.b_site_experiment_map_tracking_drag){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Drag",document.body.id)}}});if(booking.env.b_site_experiment_map_tracking_zoom||this.is_sr||booking.env.b_action==="hotel"||booking.env.enable_toggle_icons_sr||booking.env.enable_toggle_icons_lp){google.maps.event.addListener(this.map,"zoom_changed",function(){if(booking.env.b_site_experiment_map_tracking_zoom){if(typeof(booking.google.mapTracker)!="undefined"){var R=":",S=this.getZoom();if(typeof(c.current_zoom)=="undefined"){c.current_zoom=c.getZoom()}if(c.current_zoom!=S){if(c.current_zoom<S){R="in:"}else{R="out:"}if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Zoom "+R+c.current_zoom+" > "+S,document.body.id)}c.current_zoom=S}}}if(c.use_sr_cookie&&!booking.env.b_site_experiment_fd_pages){var P=c.map_object.getCenter(),Q=c.map_object.getZoom();c.setMapCookie("bs","map",c.search_destination+c.b_ufi+","+P.lat()+","+P.lng()+","+Q)}if(booking.env.b_action==="hotel"||booking.env.enable_toggle_icons_sr||booking.env.enable_toggle_icons_lp){c.updateToggleOptions()}if((booking.env.b_site_experiment_fd_pages)&&this.getZoom()<=2){setTimeout(function(){c.updateMap()},200)}else{if(booking.env.mapToolbar){c.updateMap()}}})}google.maps.event.addListener(this.map,"idle",function(P){$(document).trigger("mapIdle")});google.maps.event.addListener(this.map,"tilesloaded",function(R){var S=true;if(c.map_scroll_base.x==0&&c.map_scroll_base.y==0){var T=c.map_object.getBounds();var Q=new google.maps.LatLng(T.getSouthWest().lat(),T.getSouthWest().lng());var P=c.map_overlay.getProjection();c.map_scroll_base=P.fromLatLngToDivPixel(Q);if(c.map_scroll.y==0){c.map_scroll.y=c.map_scroll_base.y}}if(S&&(booking.env.enable_toggle_icons_sr||booking.env.enable_toggle_icons_lp)){c.updateToggleOptions();S=false}if(booking.env.b_site_experiment_fd_pages||(booking.env.mapToolbar&&!B)){c.updateMap();B=true}if(c.highlightedMarker){$("#"+c.highlightedMarker).trigger(c.mouseover);c.highlightedMarker=undefined}});if(booking.env.mapToolbar){this.lastToolbarSelection="";$("#map_toolbar").delegate(".map_toolbar_option","click",function(){var Q=$(this),P=Q.attr("data-type");if(Q.hasClass("map_toolbar_active")){c.mapToolbarFilter="";Q.html("<div>"+booking.env.mapToolbar[P+"Txt"]+"</div>");Q.removeClass("map_toolbar_active");c.lastToolbarSelection=""}else{c.mapToolbarFilter=P;$(".map_toolbar_option").removeClass("map_toolbar_active");Q.addClass("map_toolbar_active");if(c.lastToolbarSelection!==P){$("#map_toolbar_"+c.lastToolbarSelection).html("<div>"+booking.env.mapToolbar[c.lastToolbarSelection+"Txt"]+"</div>")}Q.html("<div>"+booking.env.mapToolbar[P+"TxtUndo"]+"</div>");c.lastToolbarSelection=P}if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Map Toolbar - "+P,document.body.id)}c.updateMap()})}if(booking.env.enable_streetview){f=c.map_object.getStreetView(),n=function(){google.maps.event.removeListener(k);if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Streetview used",document.body.id)}if(booking.env.enable_streetview==2){for(F in c.placemarks){q=c.placemarks[F];if(q.b_type==="hotel"||q.b_type==="hotel_current"){o=new google.maps.Marker({position:new google.maps.LatLng(q.b_latitude,q.b_longitude),map:f,icon:booking.env.icons+"/map/streetview_"+(q.b_type==="hotel_current"?"current_":"")+"hotel.png",b_id:F});c.placemarks[F].gMarker=o;google.maps.event.addListener(o,c.mouseover,function(P){c.mouseEventHandlers.markerMouseoverHandler(this.get("b_id"),P,true)});google.maps.event.addListener(o,c.mouseout,function(){c.mouseEventHandlers.markerMouseoutHandler(this.get("b_id"),e,true)});google.maps.event.addListener(o,c.mouseclick,function(P){c.mouseEventHandlers.markerClickHandler(this.get("b_id"),P,c,true)})}}}};if(!this.streetviewLoaded){streetviewPlacemarks=[];this.streetviewLoaded=true;k=google.maps.event.addListener(f,"pano_changed",n)}if(booking.env.enable_streetview==2){google.maps.event.addListener(f,"closeclick",function(){for(F in c.placemarks){if(c.placemarks[F].gMarker){c.placemarks[F].gMarker.setMap(null)}}c.streetviewLoaded=false;k=google.maps.event.addListener(f,"pano_changed",n)})}}}if(!this.map_overlay){this.map_overlay=new t({map:this.map})}this.mouseEventHandlers=this.createMouseEventHandlers(this);$("#b_gmap").delegate(".marker",c.mouseover,function(P){c.mouseEventHandlers.markerMouseoverHandler(this,P)});if(c.mouseout){$("#b_gmap").delegate(".marker",c.mouseout,function(P){c.mouseEventHandlers.markerMouseoutHandler(this,P)})}if(c.mousedown){$("#b_gmap").delegate(".marker",c.mousedown,function(Q){c.clicked_marker=true;if(booking.env.b_is_ie9){var P=this;setTimeout(function(){c.mouseEventHandlers.markerClickHandler(P,Q,c)},2);return false}})}if(!booking.env.b_is_ie9){$("#b_gmap").delegate(".marker","mouseup",function(Q){var P=this;setTimeout(function(){c.mouseEventHandlers.markerClickHandler(P,Q,c)},2);return false})}google.maps.event.addListener(this.map_object,"click",function(){$("#rightClickPopup").hide()});$(".rightClickPopup_a").live("click",function(){$("#rightClickPopup").hide();if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Right click"+(($(this).attr("target"))?" new tab":""),document.body.id)}});if(booking.env.b_action=="searchresults"&&!booking.env.b_is_disambiguation){var j=$("#map_district_filter").val();$("#map_district_filter").change(function(){if(this.value&&j!==this.value){c.setMapCookie("bs","map_open",c.search_destination+c.b_district_ufi+"1");c.setMapCookie("bs","map_dist","1");if(booking.env.ispopup&&window.opener){window.opener.location.href=this.value;window.close();return false}else{window.location.href=this.value}}})}var g=false;if(booking.env.enable_map_info_box){var v={},A=false,I,C=$("#map_info_box"),l=$("#hotel_map_info_box_wrapper"),L,N,d=($("#map_address_search_value").length?$("#map_address_search_value"):$("#sidebar_map_address_search_value")),u=function(P){var Q=d.val();if(P){g=true;c.requestSearchResults(P)}else{c.geocoderHelper.showFailureMsg();if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Address search - Failed "+(c.b_ufi?c.b_ufi:"")+" - "+Q,document.body.id)}}};$("#map_address_search").live("submit",function(){var P=d.val();if(P){if(booking.env.map_landmark_dropdown_type&&booking.env.map_landmark_dropdown_type!==2){$("#map_landmark_dropdown_content").hide();$("#map_landmark_dropdown_wrapper").addClass("collapsed_landmark_dropdown");$("#map_info_box_address").animate({width:770},150)}c.geocode(P,u,c.map_object.getBounds())}else{}return false});if(booking.env.map_landmark_dropdown){$("#map_landmark_dropdown").live("change",function(){var Q=$(this),P=Q.val().split("-");c.highlightMarker({markerObject:c.placemarks[P[0]],zoom:14,performNewSearch:g});if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Landmark dropdown"+(c.b_ufi?c.b_ufi+" - "+P[1]+" - "+P[0]:""),document.body.id)}});$("#map_landmark_dropdown_wrapper").live("click",function(){var P=$(this);if(P.hasClass("collapsed_landmark_dropdown")){$("#map_address_search_success_wrapper").hide();$("#map_address_search_failed").hide();P.removeClass("collapsed_landmark_dropdown");$("#map_info_box_address").animate({width:395},150,function(){P.animate({width:395},150,function(){$("#map_landmark_dropdown_content").show()})})}})}}if(booking.env.b_action==="hotel"||booking.env.enable_toggle_icons_sr||booking.env.enable_toggle_icons_lp){$(".map_toggle_opt").click(function(R){var S,Q,P;if(!$(this).hasClass("map_toggle_opt_disabled")){if(this.nodeName.toLowerCase()!=="input"){S=$("#"+this.getAttribute("data-rel"));Q=!S.attr("checked");S.attr("checked",Q)}else{S=$(this);Q=S.attr("checked");R.stopPropagation()}P=S.attr("data-type");switch(P){case"hotel_current":c.filter.hotel_current=(Q)?true:false;break;case"hotel":c.filter.hotel=(Q)?true:false;break;case"hotel_matching_criteria":c.filter.hotel_matching_criteria=(Q)?true:false;break;case"city":c.filter.city=(Q)?true:false;break;case"landmark":c.filter.landmark=(Q)?true:false;break;case"ski_lift":c.filter.ski_lift=(Q)?true:false;break;case"airport":c.filter.airport=(Q)?true:false;break}c.updateMap();if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Toggle icons - "+P,document.body.id)}}});if(booking.env.map_hotel_landmarks){D=$("#map_hotel_landmark_list");D.delegate(".map_hotel_landmark_list_item",c.mouseclick,function(){var P=$(this);$(".map_hotel_landmark_list_item").removeClass("map_hotel_landmark_list_item_active");P.addClass("map_hotel_landmark_list_item_active");c.highlightMarker({markerObject:c.placemarks[P.attr("data-id")],relativeMarker:c.placemarks.pageSubject})});D.delegate(".map_hotel_landmark_list_show_all",c.mouseclick,function(){var P=$(this).hide().attr("data-landmark-type");$("#map_hotel_landmark_list_"+P+" .map_hotel_landmark_list_item_hidden").removeClass("map_hotel_landmark_list_item_hidden");return false})}}if(booking.env.mapUseJsClusters){booking[sNSStartupLoad].googleMaps.clusters();this.markerClusterer=new MarkerClusterer({mapContext:this,gridSize:60,minClusterSize:4})}},popupHTML:function(x,u){var D=false,f=this.getIcon(x,u),K="",L=(x.b_type==="hotel"||x.b_type==="hotel_current"),v=$("#b_gmap_inner").width(),F="",C="",q="",d;if(L&&this.use_new_marker_overlay){D=true}if(D){K+='<div id="map_hotel_overlay_picture_wrapper"'+(booking.env.map_show_price_per_x_nights?'class="no_margin"':"")+'><div id="map_hotel_overlay_picture"'+(x.b_image_url?' style="background: url('+x.b_image_url+') no-repeat scroll 0 0 transparent"':"")+"></div>"+((booking.env.map_show_price_per_x_nights&&!x.soldout)?'<div class="price_x_nights">'+booking.env.map_price_per_x_nights_txt+"</div>":"")+'</div><div id="map_hotel_overlay_content_wrapper">';if(x.b_review_score&&parseInt(x.b_review_nr,10)>4&&booking.env.hotel_score_words){var J=x.b_review_score,c="",j=booking.env.hotel_score_words;K+='<div id="map_hotel_overlay_review_score_wrapper"><div id="map_hotel_overlay_review_score">';if(J>=1&&J<3){c=j.very_poor}else{if(J>=3&&J<4){c=j.poor}else{if(J>=4&&J<5){c=j.disappointing}else{if(J>=5&&J<5.6){c=j.average_passable}else{if(J>=5.6&&J<6){c=j.average_okay}else{if(J>=6&&J<7){c=j.pleasant}else{if(J>=7&&J<8){c=j.good}else{if(J>=8&&J<8.6){c=j.very_good}else{if(J>=8.6&&J<9){c=j.fabulous}else{if(J>=9&&J<9.5){c=j.superb}else{if(J>=9.5){c=j.exceptional}}}}}}}}}}}K+=c+", "+J+'</div><div id="map_hotel_overlay_review_score_x_reviews">'+j.review_score_from_x.replace("placeholder",x.b_review_nr)+"</div></div>"}K+='<h3 id="map_hotel_overlay_title">'}else{K+='<div id="b_overlay" class="'+f+'" '+((L&&booking.env.wider_hp_popup)?'style="width: 360px;"':"")+"><h3>"}if(x.b_type!="cluster"){if(D){K+=x.title;if(x.b_class){if(x.b_country_code!=="au"){K+='<span class="hotel_overlay_stars use_sprites stars4 stars4i'+x.b_class+'"></span>'}else{K+='<span class="hotel_overlay_stars"><img class="map_overlay_unofficial_rating" src="//r.bstatic.com/static/img/icons/circles/'+x.b_class+'sterren4.png"/></span>'}}if(x.b_preferred){if(booking.env.mapShowPreferredParam){F+=((F?",":"")+booking.env.mapShowPreferredParam);booking.env.mapShowPreferredParam=""}if(booking.env.mapShowPreferred){K+='<span style="margin-left: 3px;" class="use_sprites icon_thumbyellow"></span>'}}}else{if(x.b_class){K+='<img src="'+booking.env.icons+"/icons/stars/"+x.b_class;if(x.b_class_half){K+=x.b_class_half}K+='sterren-small.png" alt="'+x.b_class+" "+(x.b_class==1?booking.env.star:booking.env.stars)+'" />'}K+=x.title;if(typeof x.subhead!="undefined"){if(x.url){K+="<span>"+x.subhead+"</span>"}}}K+="</h3>";K+="<p "+(D?'id="map_hotel_overlay_description"':"")+" >";if(!D){if(x.b_image_url){K+='<img src="'+x.b_image_url+'" alt="" />'}}}else{if(x.b_cluster_name.match(/^anon/)){K+=x.b_nr_hotels+" "+(x.b_nr_hotels==1?booking.env.map_hotel:booking.env.map_hotels)}else{K+=x.b_cluster_name+": "+x.b_nr_hotels+" "+(x.b_nr_hotels==1?booking.env.map_hotel:booking.env.map_hotels)}K+="</h3>";K+="<p>"}if(x.b_review_score_hotel_location&&(parseFloat(x.b_review_score_hotel_location,10)>=9.2)&&x.b_review_nr&&parseInt(x.b_review_nr,10)>4){if(booking.env.mapGreatLocationParam){F+=((F?",":"")+booking.env.mapGreatLocationParam);booking.env.mapGreatLocationParam=""}if(booking.env.mapGreatLocationTxt){d=(booking.env.mapGreatLocationTxt.replace("placeholder_num_reviews",x.b_review_nr)).replace("placeholder_location_rating",x.b_review_score_hotel_location);K+='<div id="hotel_location_score">'+d+"</div>"}}var n=((x.b_type==="hotel")||(x.b_type==="flash_deal")||(x.b_type==="hotel_current"))?true:false,B;if(n){if(x.b_description&&x.b_description.length){K+=(x.b_description.length<=this.max_length_of_hotel_description)?x.b_description:this.truncateDescription(x.b_description);B=(x.visitors?parseInt(x.visitors,10):0);if(B){if(booking.env.map_overlay_nr_visitors){K+='<span style="font-style: italic; color: #666;"> '+(B===1?booking.env.map_1_person_looking:booking.env.map_x_persons_looking.replace("placeholder",B))+"</span>"}F+=((F?",":"")+booking.env.map_hover_nr_visitors_param);booking.env.map_hover_nr_visitors_param=""}}}else{if(x.b_nr_hotels>1){if(booking.env.zoom_in){K+=booking.env.zoom_in}else{if(x.b_extra_msg){K+=x.b_extra_msg}}}}K+="</p>";if(x.last_reservation_data){F+=((F?",":"")+booking.env.map_hover_last_booking_param);booking.env.map_hover_last_booking_param="";if(booking.env.map_overlay_last_booking){var k="",h="",g=x.last_reservation_data;if(g.last_reservation_is_today){h=g.last_reservation_ellapsed_time_simple.replace("{seconds}",booking.env.map_seconds_txt);h=h.replace("{minutes}",booking.env.map_minutes_txt);h=h.replace("{hours}",booking.env.map_hours_txt);h=h.replace("{hour}",booking.env.map_hour_txt);k=booking.env.latest_booking_elapsedtime_ago.replace("placeholder",h)}else{k=booking.env.latest_booking_yesterday}K+='<span class="lastbooking">'+k+"</span>"}}if(n){if(typeof(booking.env.map_vars)=="undefined"){booking.env.map_vars={}}if(typeof(booking.env.map_vars.translation_from)=="undefined"){booking.env.map_vars.translation_from="From"}if(typeof(booking.env.map_vars.translation_occupancies)=="undefined"){booking.env.map_vars.translation_occupancies=[]}K+='<table id="'+(D?"hotel_overlay_prices_detached":"b_overlay_table_prices")+'"><tbody><tr>';if(x.av){var y=x.av;var M=booking.env.map_vars.translation_occupancies;if(y.cheapest_double_selected_currency){K+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy" >'+M[1]+'</td> <td class="b_overlay_td_room_price">'+y.cheapest_double_selected_currency+"</td></tr>"}if(y.cheapest_single_selected_currency){K+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy" >'+M[0]+'</td> <td class="b_overlay_td_room_price">'+y.cheapest_single_selected_currency+"</td></tr>"}}else{if(x.prices&&x.prices.length){var y=x.prices,M=booking.env.map_vars.translation_occupancies,m=(D&&y.length===4)?3:y.length,I="",E="",A="",l="",z=0,o="";for(var H=0;H<m;H++){if(D){if(y[H].available&&y[H].available<6){if(y[H].available===1){I=(x.b_hoteltype_id!="2")?booking.env.map_x_rooms_left.rooms_1:booking.env.map_x_rooms_left.apts_1}else{I=(x.b_hoteltype_id!="2")?booking.env.map_x_rooms_left.rooms_x.replace("placeholder",y[H].available):booking.env.map_x_rooms_left.apts_x.replace("placeholder",y[H].available)}}if(y[H]&&y[H].room_persons&&y[H].room_price){if(y[H].rack_rate){if(booking.env.mapShowRackRates){C=" price_with_rack_rates ";q='<div class="hotel_overlay_rackrate">'+y[H].rack_rate+"</div>"}F+=((F?",":"")+booking.env.mapHoverRackRatesParam)}K+='<td class="hotel_overlay_occupancy_item hotel_overlay_occupancy_first"><span class="hotel_overlay_occupancy_persons" style="width: '+(y[H].room_persons*11)+'px;"></span></td><td class="hotel_overlay_occupancy_item'+(H<(m-1)?" hotel_overlay_occupancy_last":"")+C+'"><div class="hotel_overlay_room_price">'+y[H].room_price+"</div>"+q+(I?'<div class="hotel_overlay_occupancy_urgency">'+I+"</div></td>":"</td>")}else{if(x.soldout){K+='<tr class="b_overlay_tr"> <td class="'+(D?"hotel_overlay_soldout":"b_overlay_td_room_occupancy")+'" >'+booking.env.ajax_hotel_details_soldout+"</td></tr>"}else{if(y[H]&&y[H].room_from){K+='<td class="hotel_overlay_from hotel_overlay_occupancy_item" >'+(booking.env.map_vars.translation_from.replace("price_placeholder",y[H].room_from)).replace("price_placeholdernbsp;","$ ")+"</td></tr>"}}}}else{if(y[H]&&y[H].room_persons&&y[H].room_price){var w=y[H].room_persons-1;if(w>3){w=3}var G=(typeof(M[w])!="undefined")?M[w]:"";if(booking.env.map_x_rooms_left&&booking.env.b_is_ie){l=" marker_popup_small "}if(booking.env.map_x_rooms_left&&y[H].available&&y[H].available<6){if(y[H].available===1){I='<td class="b_overlay_td_room_price b_overlay_rooms_left'+l+'">'+((x.b_hoteltype_id!="2")?booking.env.map_x_rooms_left.rooms_1:booking.env.map_x_rooms_left.apts_1)+"</td>"}else{I='<td class="b_overlay_td_room_price b_overlay_rooms_left'+l+'">'+((x.b_hoteltype_id!="2")?booking.env.map_x_rooms_left.rooms_x.replace("placeholder",y[H].available):booking.env.map_x_rooms_left.apts_x.replace("placeholder",y[H].available))+"<td>"}}K+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy '+l+'" >'+G+'</td> <td class="b_overlay_td_room_price '+l+'">'+y[H].room_price.replace(" ","&nbsp;")+"</td>"+I+"</tr>"}else{if(y[H]&&y[H].room_from){K+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy" >'+(booking.env.map_vars.translation_from2.replace("price_placeholder",y[H].room_from)).replace("price_placeholdernbsp;","$ ")+"</td></tr>"}}}}}else{if(x.soldout){K+='<tr class="b_overlay_tr"> <td class="'+(D?"hotel_overlay_soldout":"b_overlay_td_room_occupancy")+'" >'+booking.env.ajax_hotel_details_soldout+"</td></tr>"}else{if(x.b_min_rate){if(booking.env.map_vars.selected_currency_symbol){var t=booking.env.map_vars.selected_currency_symbol}else{var t=x.b_currencycode}if(D){K+='<td class="hotel_overlay_from hotel_overlay_occupancy_item" >'+booking.env.map_vars.translation_from.replace("price_placeholder",t+" "+parseFloat(x.b_min_rate).toFixed(2))+"</td></tr>"}else{K+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy " >'+booking.env.map_vars.translation_from2.replace("price_placeholder",(t+" "+parseFloat(x.b_min_rate).toFixed(2)))+"</td></tr>"}}else{if(x.b_price||x.b_price_selected_currency){if(x.b_price_selected_currency){var t=x.b_price_selected_currency}else{var t=x.b_price}if(D){K+='<td class="hotel_overlay_from hotel_overlay_occupancy_item" >'+ +booking.env.map_vars.translation_from.replace("price_placeholder",t)+"</td></tr>"}else{K+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy" >'+booking.env.map_vars.translation_from.replace("price_placeholder",t)+"</td></tr>"}}}}}}K+="</tr></tbody></table>"}if(!D){K+="</p>"}else{K+="</div>"}this.hotels_cache[u]=K;if(F){booking.env.trackExperiment(F)}return K},positionPopup:function(h,I,u){var d=booking.env.map_enable_google_markers,E=this.getIcon(u,(typeof(I)==="string"&&((new RegExp("[0-9]").test(I)||I==="pageSubject"||I==="cluster"))?I:I.id)),A=this.b_map_icons[E],H=(u.pixel&&this.streetviewLoaded?75:(A.infoWindowAnchor)?A.infoWindowAnchor[1]:20),c=0,G=(u.b_type==="hotel"||u.b_type==="hotel_current"),m=(I==="cluster"?true:false),y=((G||I==="cluster")&&(this.is_sr||this.is_hp||this.is_lp)),q=y?$("#map_detail_overlay"):$("#b_overlay"),x=$("#b_gmap_inner"),o=x.width(),j=x.height(),D=(this.is_sr&&o>=832),f=D?91:56,F=(this.is_sr?40:5),n=o-f-F,l={},z=this.map.getProjection(),k,B,v,t,C,w,g;if(m){k=z.fromLatLngToContainerPixel(u.bounds.getSouthWest());clusterAreaPixelSw=z.fromLatLngToDivPixel(u.bounds.getSouthWest());clusterAreaPixelNe=z.fromLatLngToDivPixel(u.bounds.getNorthEast());k.y+=2;c=122}else{k=(u.pixel&&this.streetviewLoaded?u.pixel:z.fromLatLngToContainerPixel(new google.maps.LatLng(u.b_latitude,u.b_longitude)))}v=k.x,t=k.y;if(d){c=H;H=0}if(y){if(this.last_popup_max_width!==n){this.last_popup_max_width=n;if(n>670){n=670}l.width=n;if(!D){l.left=56;if(this.is_sr){q.removeClass("full_width")}}else{q.addClass("full_width")}$("#map_detail_overlay").css(l)}if(!this.last_popup_max_width){this.last_popup_max_width=n}}if(booking.env.use_new_current_hotel_icon&&E==="hotel_current"){H+=5}C=q.height();w=q.width();g=v+(w/2);if(v-(w/2)<56){v=56}else{if(g>(o-35)){v=v-w+(o-v)-45}else{if(!m){v-=(w/2)}}}if(t+C>(j-35)){t=t-(C+(d||m?c:H)+2)}h.css({top:t+"px",left:v+"px",position:"absolute","z-index":"99999"});if(m){$("#cluster_area").css({display:"block",left:clusterAreaPixelSw.x+"px",top:clusterAreaPixelNe.y+"px"})}if(navigator.platform.indexOf("iPad")!=-1){if($("#marker_close").length==0){h.append('<div id="marker_close">Close</div>');$("#marker_close").bind("touchstart",function(J){J.stopPropagation();J.preventDefault();if(this.use_new_popup){$("#map_detail_overlay").html("<div />").hide()}$("#markerPopup").html("<div />").hide();return false});h.bind("touchstart",function(K){var J="";K.stopPropagation();K.preventDefault();if(u.b_url){if(u.b_url.indexOf("http:")>-1||!booking.env.b_url_start){J=u.b_url}else{J=booking.env.b_url_start+u.b_url}if(J.indexOf(".html")==-1){J+=booking.env.b_query_params_with_lang}if(u.b_extra_params){J+=u.b_extra_params}window.location.href=J}})}}},truncateDescription:function(d){var c=1;while(d.charAt(this.max_length_of_hotel_description-c)!=" "){c++}return d.substr(0,this.max_length_of_hotel_description-c)+"..."},updateFilters:function(){$("#toggle_other_hotel").attr("checked",this.filter.hotel);$("#toggle_airport").attr("checked",this.filter.airport);$("#toggle_landmark").attr("checked",this.filter.landmark)},updateToggleOptions:function(){var d=this,j,k,l,f,g,c,h,m=$(booking.env.b_is_landing_page?"#b_map_horizontal_legend":"#b_map_legend");j=d.map_object.getZoom();if(j>3){k=false;c=false}else{k=true;c=true}if(j>4){h=false}else{h=true}if(this.is_sr){l=(j>7)?false:true;disable_hotel_matching_criteria=(j>7)?false:true}else{l=(j>6)?false:true;disable_hotel_matching_criteria=(j>6)?false:true}if(j>11){f=false;g=false}else{f=true;g=true}if(h){$(".map_opt_airport",m).addClass("map_toggle_opt_disabled");$("#toggle_airport").attr("disabled",true)}else{$(".map_opt_airport",m).removeClass("map_toggle_opt_disabled");$("#toggle_airport").attr("disabled",false)}if(c){$(".map_opt_city",m).addClass("map_toggle_opt_disabled");$("#toggle_city").attr("disabled",true)}else{$(".map_opt_city",m).removeClass("map_toggle_opt_disabled");$("#toggle_city").attr("disabled",false)}if(k){$(".map_opt_current_hotel",m).addClass("map_toggle_opt_disabled");$("#toggle_current_hotel").attr("disabled",true)}else{$(".map_opt_current_hotel",m).removeClass("map_toggle_opt_disabled");$("#toggle_current_hotel").attr("disabled",false)}if(l){$(".map_opt_other_hotel",m).addClass("map_toggle_opt_disabled");$("#toggle_other_hotel").attr("disabled",true)}else{$(".map_opt_other_hotel",m).removeClass("map_toggle_opt_disabled");$("#toggle_other_hotel").attr("disabled",false)}if(disable_hotel_matching_criteria){$(".map_opt_hotel_matching_criteria",m).addClass("map_toggle_opt_disabled");$("#toggle_hotel_matching_criteria").attr("disabled",true)}else{$(".map_opt_hotel_matching_criteria",m).removeClass("map_toggle_opt_disabled");$("#toggle_hotel_matching_criteria").attr("disabled",false)}if(f){$(".map_opt_landmark",m).addClass("map_toggle_opt_disabled");$("#toggle_landmark").attr("disabled",true)}else{$(".map_opt_landmark",m).removeClass("map_toggle_opt_disabled");$("#toggle_landmark").attr("disabled",false)}if(g){$(".map_opt_ski_lift",m).addClass("map_toggle_opt_disabled");$("#toggle_ski_lift").attr("disabled",true)}else{$(".map_opt_ski_lift",m).removeClass("map_toggle_opt_disabled");$("#toggle_ski_lift").attr("disabled",false)}},panMap:function(){if(this.pan_item){if(this.pan_item_coords&&this.pan_item_coords.lat){this.map_object.panTo(new google.maps.LatLng(this.pan_item_coords.lat,this.pan_item_coords.lon))}else{if(this.disambiguation_bbox){this.map_object.fitBounds(disambiguation_bbox)}}}},mapScrollListener:function(j){var h=this,g=$(window),d=$("#"+j),c=(d.offset()&&d.offset().top)?d.offset().top:undefined,m=$("#disambiguation_map_wrapper"),o=$("#disam_list_last"),n=(o.offset()&&o.offset().top)?o.offset().top:undefined,q=(m.offset()&&m.offset().top)?m.offset().top:undefined,k,l,t,f=function(){m.css(t)};g.scroll(function(){window_scrollTop=$(window).scrollTop();if(c&&q&&(window_scrollTop>=c)){if(window_scrollTop+m.height()<=n){t={"margin-top":(window_scrollTop-q)+20+"px"}}}else{t={"margin-top":"0px"}}if(t){if(l){clearTimeout(l)}l=setTimeout(function(){f()},500)}})},mapResizeListener:function(c){var g=this,d,f=500;$window=$(window);$window.resize(function(){if(d){clearTimeout(d)}d=setTimeout(function(){g.resizeMapToFullScreen(g,true)},f)})},resizeMapToFullScreen:function(k,q){if(q){$map_container=$("#b_map_container");var d=$(window),o=d.height(),l=d.width(),v=(o>577&&l>735),n=v?(o*0.8):427,c=v?(l*0.8):681,t=(k.is_sr?0:166),u=" width: "+(c-t)+"px; ",h=$("#map_info_box"),g=h.height(),m,f,w,j=(booking.env.enable_map_info_box&&!booking.env.map_enable_sr_autocomplete?g:0);k.map_width=c;$map_container.css("width",k.map_width);$("#b_gmap").css({height:(n-(k.is_sr?0:27)-j),width:k.map_width-(this.is_sr?2:31)});$("#b_shadow").css({height:$map_container.height()+20,width:$map_container.width()+20});$("#b_gmap_inner").css({height:(n-(k.is_sr?0:54)-j),width:k.map_width-t-(this.is_sr?3:31)});if(booking.env.b_action==="hotel"&&booking.env.enable_map_info_box){$("#hotel_map_info_box_wrapper").css("width",c)}if(booking.env.map_hotel_landmarks){$("#map_hotel_landmark_list").height($("#b_map_legend").height()-$("#map_legend_basic_content").height())}if(k.map_object){m=k.map_overlay.getProjection();google.maps.event.trigger(k.map_object,"resize");f=k.map_object.getBounds(),w=new google.maps.LatLng(f.getSouthWest().lat(),f.getSouthWest().lng());k.positionMapContainer();k.map_scroll=m.fromLatLngToDivPixel(w)}}else{google.maps.event.trigger(k.map_object,"resize")}},setMapCookie:function(g,f,d){if(typeof(f)==="string"&&f!==""){var c={};if(typeof(JSON)!=="undefined"){c=JSON.parse($.cookie(g))||{};c[f]=d;$.cookie(g,JSON.stringify(c),{path:"/",domain:booking.env.b_domain_end})}}},geocode:function(c,g,f){var d={address:c};if(f){d.bounds=f}if(!this.geocoder){this.geocoder=new google.maps.Geocoder()}this.geocoder.geocode(d,function(j,h){g(h==google.maps.GeocoderStatus.OK?j:false)})},initGooglePlacesAutocomplete:function(d){var g=this,f=(d?d:"disamb_google_autocomplete_target"),c;this.google_autocomplete=new google.maps.places.Autocomplete(document.getElementById(f));if(d){c=function(){g.requestSearchResults("placesAutocomplete")}}else{$("#disamb_alternatives_menu").hide();$("#disamb_google_autocomplete").show(function(){setTimeout(function(){$("#disamb_google_autocomplete_target").val(booking.env.current_ss).focus()},75)});c=function(){var h=g.google_autocomplete.getPlace();if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Disamb Google Search - Select item",document.body.id)}window.location.href="/searchresults"+booking.env.b_query_params_with_lang+";latitude="+h.geometry.location.lat()+";longitude="+h.geometry.location.lng()+";radius=5;order=distance"}}google.maps.event.addListener(this.google_autocomplete,"place_changed",c)},highlightMarker:function(data){var old_highlighted_marker=this.highlighted_marker,oThat=this,highlightedMarkerCoords=new google.maps.LatLng(data.markerObject.b_latitude,data.markerObject.b_longitude),iRadius,boundingBox;if(old_highlighted_marker){old_highlighted_marker.b_type=old_highlighted_marker.b_type.replace("_current","")}this.highlighted_marker=data.markerObject;data.markerObject.b_type=data.markerObject.b_type+"_current";if(data.performNewSearch){oThat.enable_all_markers=false}if(data.relativeMarker){boundingBox=new google.maps.LatLngBounds();boundingBox.extend(highlightedMarkerCoords);boundingBox.extend(new google.maps.LatLng(data.relativeMarker.b_latitude,data.relativeMarker.b_longitude));this.map_object.fitBounds(boundingBox);$("#markerPopup").html("<div />").hide();this.highlightedMarker=data.markerObject.id.replace("landmark","")}else{this.map_object.setCenter(highlightedMarkerCoords);if(data.zoom){this.map_object.setZoom(data.zoom)}}if(data.performNewSearch){iRadius=Math.ceil(15.0588*Math.pow(2,10-oThat.map_object.getZoom()));if(iRadius>150){iRadius=150}$.get("/standalonesearchresults"+booking.env.b_query_params_with_lang+";latitude="+highlightedMarkerCoords.lat()+";longitude="+highlightedMarkerCoords.lng()+";radius="+iRadius+";map_only=1",function(data){typeof(JSON)!=="undefined"?booking.hotelsMatchingCriteria=JSON.parse(data):eval("booking.hotelsMatchingCriteria = "+data);oThat.enable_all_markers=true;oThat.updateMap()})}else{this.updateMap()}},createMouseEventHandlers:function(j){var h=false,d=booking.env.map_enable_google_markers,c=function(u,l,t){var y="",n,v,m,o,z,q,k,x,w;v=$(u);w=v.hasClass("marker_type_cluster");if(w){x=j.markerClusterer.clusters[v.attr("id").replace("cluster","")];z=$("#map_detail_overlay");z.html('<div id="cluster_overlay_content">'+booking.env.mapClusterCtaTxt+"</div>").addClass("cluster_overlay");j.positionPopup(z,"cluster",x);z.show()}if(d||t){if(u.indexOf("-")!==-1){u="-"+(u.split("-"))[1]}y=u;n=j.placemarks[y];if(!n.oldz&&!t){n.oldz=n.gMarker.getZIndex()}if(!t){n.gMarker.setZIndex(1000000)}else{n.pixel=l.pixel}}else{if(!v.attr("oldz")){v.attr("oldz",u.style.zIndex)}u.style.zIndex="1000000";y=v.attr("id");n=j.placemarks[y]}if(y!=="marker_current_address"&&!w){j.last_hotel_details=y;m=((y==="pageSubject")?n.b_hotel_id:y);o=(n.b_type==="hotel"||n.b_type==="hotel_current");if(j.use_new_marker_overlay&&o){z=$("#map_detail_overlay")}else{if($("#markerPopup").length){z=$("#markerPopup")}else{z=$('<div id="markerPopup" class="static_map_legend_marker"></div>');z.appendTo(".markersOverlay")}}if(j.initPopupTimeout&&y!=="pageSubject"){clearTimeout(j.initPopupTimeout);j.initPopupTimeout=null;if(j.highlight_marker_z){$(".marker_type_hotel_current").css("z-index",j.highlight_marker_z)}}if(o){if(n.b_closed){z.html('<div id="b_overlay" class="'+j.getIcon(n,y)+'"'+(booking.env.wider_hp_popup?' style="width: 360px;margin-left: -181px;"':"")+"><h3>"+n.title+"</h3><em>"+n.b_extra_msg+"</em></div>").show();j.positionPopup(z,u,n)}else{if(typeof booking[sNSStartupLoad].googleMaps.hotels_cache[y]=="undefined"){if(j.use_new_marker_overlay){q=(booking.env.b_is_ie6?'<div id="map_hotel_overlay_loading_ie6">':"")+'<div id="map_hotel_overlay_picture_wrapper"><div id="map_hotel_overlay_picture" class="map_overlay_loading"></div></div><h3 id="map_overlay_loading_msg">'+booking.env.loading+"</h3>"+(booking.env.b_is_ie6?"</div>":"")}else{q='<div id="b_overlay" class="'+j.getIcon(n,y)+' ahdom2"'+(booking.env.wider_hp_popup?' style="width: 360px;"':"")+"><h3>"+booking.env.loading+"</h3></div>"}z.html(q).show();k="/hotel_onmap_detail"+(booking.env.b_query_params_no_ext?booking.env.b_query_params_no_ext:"?")+";hotel_id="+m+";lang="+booking.env.b_lang_for_url+";detail=0;currency="+booking.env.b_selected_currency+";prices=1;cc1="+booking.env.ip_country+";aid="+booking.env.b_aid;if(booking.env.b_checkin_date&&booking.env.b_checkout_date){k+=";checkin="+booking.env.b_checkin_date+";checkout="+booking.env.b_checkout_date+";currency="+booking.env.map_vars.b_currencycode}if(booking.env.b_site_experiment_use_flat_av_on_map_detail){k+=";use_flat=1"}if(booking.env.b_site_experiment_always_use_search_when_reuse){k+=";reuse=1"}if(booking.env.is_us_visitor||booking.env.new_min_rates){k+=";fav_hot_mins=1"}if(j.use_new_marker_overlay){k+=";img_size=90"}if(booking.env.b_site_variant_localize_price_number_format){k+=";localize_format=1"}if(booking.env.b_site_variant_currency_consistency){k+=";consistent=1"}k+=";rack_rates=1";if(booking.env.map_hover_more_params&&!h){k+=";exps="+booking.env.map_hover_more_params;h=true}$.get(k,function(C){if(C.b_hotels&&C.b_hotels[m]){var D=C.b_hotels[m],A=j.placemarks[y],B;A.url=D.b_url;A.title=D.title;if(t){D.pixel=A.pixel}D.b_type=A.b_type;if(D.b_extra_params){A.b_extra_params=D.b_extra_params}if(A.prices&&!D.prices){D.prices=A.prices}B=j.popupHTML(D,y);if(j.last_hotel_details===y&&j.map_opened){z.html((B?B:j.popupHTML(D,y))).show();j.positionPopup(z,u,D)}}else{z.hide()}})}else{z.html(booking[sNSStartupLoad].googleMaps.hotels_cache[y]).show()}}}else{z.html(j.popupHTML(n,y)).show()}if(j.map_opened){j.positionPopup(z,u,n)}if(booking.env.b_site_experiment_map_tracking_mouseover||booking.env.enable_streetview==2){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,(booking.env.enable_streetview==2?"Streetview - ":"")+"Hotel icon mouseover",document.body.id)}}}},g=function(t,n,k){var m=$("#map_detail_overlay"),q=$(t),o=q.hasClass("marker_type_cluster");j.last_hotel_details=false;if(booking.env.mapUseJsClusters){$("#cluster_area").hide();m.removeClass("cluster_overlay").css("left","91px")}if(d){var l=j.placemarks[t].gMarker;l.setZIndex(undefined)}else{if(!k&&q.attr("oldz")){q.css("z-index",q.attr("oldz"))}}if(j.use_new_marker_overlay){m.html("<div />").hide()}$("#markerPopup").html("<div />").hide()},f=function(u,v,m,t){var x=$(u),z,n,y,l="";rightclick=(v.which===3||booking.env.map_marker_click_show_menu);if(typeof(m.clicked_marker)!==undefined&&(m.clicked_marker===true||rightclick||d||t)){if(x.hasClass("marker_type_cluster")){y=m.markerClusterer.clusters[u.id.replace("cluster","")];if(y&&y.bounds){m.clusterClicked=true;m.showStatusMsg({position:"center"});m.map_object.fitBounds(y.innerHotelsBounds)}$("#map_detail_overlay").html("<div />").hide().removeClass("cluster_overlay").css("left","91px");return false}z=(d||t?u:$(u).attr("id"));n=m.placemarks[z];if(typeof booking.google!="undefined"){if(typeof booking.google.mapTracker!="undefined"){var q="Icon clicked: ";if(rightclick){q="Icon right clicked: "}booking.google.trackEvent(booking.google.mapTracker,q+n.b_type,document.body.id)}}if(n.b_url){n.url=n.b_url}if(n.url){if(n.url.indexOf("http:")>-1||!booking.env.b_url_start){l=n.url}else{l=booking.env.b_url_start+n.url}if(l.indexOf(".html")==-1){l+=booking.env.b_query_params_with_lang}if(n.b_extra_params){l+=n.b_extra_params}if($(u).hasClass("marker_type_cluster")){m.map_object.setZoom(m.map_object.getZoom()+1)}else{if(rightclick){if(booking.env.map_marker_click_show_menu===2){$(document.body).append('<a id="map_right_click_link" target="_new" href="'+l+'">'+(booking.env.map_right_click[n.b_type])[1]+"</a>");$("#map_right_click_link").each(function(){this.click()})}else{$("#markerPopup").html("<div />").hide();$("#map_detail_overlay").html("<div />").hide();var w='<ul id="rightClickPopup_ul"><li><a class="rightClickPopup_a" href="'+l+'">'+(booking.env.map_right_click[n.b_type])[0]+'</a></li><li><a class="rightClickPopup_a" target="_blank" href="'+l+'">'+(booking.env.map_right_click[n.b_type])[1]+"</a></li></ul>";if($("#rightClickPopup").length){var A=$("#rightClickPopup").html(w)}else{$(d||t?m.map_target:document.body).append('<div id="rightClickPopup">'+w+"</div>");var A=$("#rightClickPopup")}if(d||t){var k=m.map.getProjection(),o=k.fromLatLngToContainerPixel(v.event.latLng);v.pageY=o.y;v.pageX=o.x}A.css({top:v.pageY,left:v.pageX}).show()}rightclick=false}else{if(booking.env.ispopup&&window.opener){window.opener.location.href=l;window.close();return false}else{document.location=l}}}}}};return{markerMouseoverHandler:c,markerMouseoutHandler:g,markerClickHandler:f}},requestSearchResults:function(C){var f=this,y=(C==="placesAutocomplete"?true:false),m=y?f.google_autocomplete.getPlace():C[0],t=(booking.env.mapToolbar||booking.env.mapAddressLoadingMsg?true:false),n,z,d,o,x,j,l=false,k,u,h,D,g,B;if(!C||this.searchingAddress!==false||!m||(C==="placesAutocomplete"&&m&&!m.geometry)){return}this.searchingAddress=true;var q=m.geometry.viewport,c=m.geometry.location,E,v=(booking.env.map_enable_sr_autocomplete?$("#map_address_search_value"):$("#sidebar_map_address_search_value")).val(),w=$("#open_map"),A;if(c){if(c.lat()){E=new google.maps.LatLng(c.lat(),c.lng())}if(booking.env.b_action!=="hotel"){if(booking.env.map_enable_sr_autocomplete&&q){z=q.getCenter();k=q.getNorthEast();u=3963;h=z.lat()/57.2958;D=z.lng()/57.2958;g=k.lat()/57.2958;B=k.lng()/57.2958;n=u*Math.acos(Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos(B-D));d=f.calculateBoundingBoxZoomLevel(q,{width:238})}else{d=14;if(f.map_object){n=Math.ceil(15.0588*Math.pow(2,10-f.map_object.getZoom()))}else{n=1}}if(n>150){n=150}j=booking.env.b_query_params_with_lang+";latitude="+E.lat()+";longitude="+E.lng()+";radius="+n+";force_auto_extend=1";if(!booking.env.map_update_hotel_list){j+=";map_only=1"}if(booking.env.map_update_hotel_list_by_distance){j+=";order=distance"}if(d){j+=";map_thumb_zoom="+d}x="/standalonesearchresults"+j;if(booking.env.mapRememberAddressSearch){l=true}if(q){A=((q.toString()).replace(/\)/g,"")).replace(/\(/g,"")}else{A=""}f.processSearchResults({url:x,viewport:A,formattedAddress:m.formatted_address,saveUrl:l,location:c.lat()+","+c.lng()})}else{f.enable_all_markers=true;map_info_box_height=$map_info_box.height();$map_info_box_wrapper.css("width",$map_info_box_wrapper.parent().width()-1);f.updateMap()}if(!(booking.env.mapAddressSearchUpdates||booking.env.map_enable_sr_autocomplete)){f.geocoderHelper.showSuccessMsg(m.formatted_address)}if(y){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,(booking.env.map_enable_sr_autocomplete?"SR ":"")+"Address Search - Success "+(f.b_ufi?f.b_ufi:"")+" - Autocomplete - "+(m.formatted_address?m.formatted_address:""),document.body.id)}}else{if(booking.env.b_action==="hotel"){height_diff=$map_info_box.height()-map_info_box_height;$("#b_gmap").css("height",$("#b_gmap").height()+height_diff);$("#b_shadow").css("height",$("#b_shadow").height()+height_diff)}if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,(booking.env.map_enable_sr_autocomplete?"SR ":"")+"Address Search - Success "+(f.b_ufi?f.b_ufi:"")+" - "+v,document.body.id)}}}},processSearchResults:function(m){if(typeof m==="undefined"||!m.url){return}var f=this,d=m.viewport,h=(d?d.split(","):""),k=m.url,g=(m.location?m.location.split(","):""),l,c,j;if(booking.env.map_enable_sr_autocomplete||booking.env.mapAddressSearchUpdates){this.geocoderHelper.showLoadingMsg();hotelList=(booking.env.map_enable_sr_autocomplete?$("#right"):$("#search_results_table"));hotelList.animate({opacity:0.2},500);$("#filterbox_wrap").animate({opacity:0.2},500)}if(g){j=new google.maps.LatLng(g[0],g[1])}if(f.placemarks&&j){f.placemarks.marker_current_address={b_latitude:j.lat(),b_longitude:j.lng(),id:"marker_current_address",b_type:"current_search"}}if(f.map_object){f.enable_all_markers=false;if(d){c=((new google.maps.LatLngBounds()).extend(new google.maps.LatLng(h[0],h[1]))).extend(new google.maps.LatLng(h[2],h[3]));f.map_object.fitBounds(c)}else{if(j){booking.env.map_updated_sr_map_zoom=parseInt(booking.env.map_updated_sr_map_zoom,10);l=booking.env.map_updated_sr_map_zoom;if(typeof l==="number"&&!isNaN(l)){f.map_object.setCenter(j);f.map_object.setZoom(l)}}}}if(typeof j!=="undefined"){booking.env.b_map_center_latitude=j.lat();booking.env.b_map_center_longitude=j.lng();f.latitude=booking.env.b_map_center_latitude;f.longitude=booking.env.b_map_center_longitude}$.get(k,function(v){var t,q,o,w,u,n;f.searchingAddress=false;if(f.map_object){booking.track.exp(booking.env.map_update_hotel_list_by_distance_param+","+booking.env.mapAddressLoadingMsgParam)}v=v.replace(/standalonesearchresults/g,"searchresults");searchResults=v.split("=!=!=");t=document.getElementById("ajaxsrwrap");$(t).html(searchResults[3]);f.enable_all_markers=true;if(f.map_object&&booking.env.mapToolbar){f.parseAllSRHotels()}else{if(f.map_object){f.updateMap()}}if(booking.env.mapAddressSearchUpdates||booking.env.map_enable_sr_autocomplete){o=$("#open_map,#b_google_map_thumbnail,#view_map,#sidebar_map_address_search_success");if(typeof d!=="undefined"){o.attr("data-bounding-box",d);if(booking.env.map_updated_sr_map_zoom){o.attr("rel",booking.env.map_updated_sr_map_zoom)}}else{booking.env.b_map_google_bounding_box="";o.removeAttr("data-bounding-box",booking.env.b_map_google_bounding_box)}w=searchResults[2].replace("placeholder",m.formattedAddress);$("#right .sorth1").html(w);$("#filterbox_wrap").html(searchResults[0]);f.geocoderHelper.showSuccessMsg(m.formattedAddress);if(booking.env.map_enable_sr_autocomplete){if(!f.usedHistory){f.usedHistory=true}if(m.saveUrl){if(typeof history.pushState!=="undefined"){if(d){n=((d.toString()).replace(/\)/g,"")).replace(/\(/g,"")}else{n=""}f.historyHandler.pushUrl({url:m.url.replace("standalone",""),viewport:n,formattedAddress:m.formattedAddress,srHeader:w,mapThumbnailUrl:$("#b_google_map_thumbnail").css("background-image"),originalSearchboxValue:$("#destination").val(),originalDestId:booking.env.dest_id,originalDestType:booking.env.dest_type,location:m.location})}else{location.hash="#!"+m.url}}}}if(booking.env.map_enable_sr_autocomplete){$("#b_hotel_list").hide();if(!f.map_object){if(typeof(JSON)!=="undefined"){q=JSON.parse($.cookie("bs"))||{}}q.map_open="";q.map="";$.cookie("bs",JSON.stringify(q),{path:"/",domain:booking.env.b_domain_end})}}else{booking.track.exp(booking.env.mapAddressSearchUpdateParams);if(booking.env.mapAddressSearchUpdateFilters){$("#filterbox_wrap").html(searchResults[0])}}booking[sNSStartupLoad].tooltip_3.addTooltip(t);booking[sNSStartupLoad].search_all_roomtypes.addMoreLink(t);booking[sNSStartup].filterbox.init();booking[sNSStartup].sort_popups.init();if(booking.env.b_site_experiment_pin_sortbar){booking[sNSExperiments].pin_sortbar.init()}booking[sNSStartupLoad].change_currency_on_click.init()})},positionMapContainer:function(){var c=(this.is_sr?$("#sr_map"):$("#b_map_container"));$document=$(document);var f=($document.width()-c.width())/2;var d=$document.scrollTop()+(($(window).height()-c.height())/2);c.css({left:f+"px",top:d+"px","z-index":999})},parseAllSRHotels:function(){this.cityCentreDistricts="2281,2280,2282,2285,2306,2287,2288,2311,2305,2308,2309,2303,2289,2290,2291,2292,2304,2307,2293,2310,2279";var c=this,d;if(!booking.env.mapToolbar.params.currency){booking.env.mapToolbar.params.currency="hotel_currency"}$.post("/hotels_json",booking.env.mapToolbar.params,function(k){var o=k.hotel_fields,h=k.hotels,f=k.hotel_fields.length,l,m,q=-1,n=0;c.hotelFieldsFilter={id:1,longitude:1,latitude:1,min_prices:1,review_score:1,districts:1};for(m=0;m<f;m++){if(c.hotelFieldsFilter[o[m]]){c.hotelFieldsFilter[o[m]]=m}}f=k.hotels.length;for(m=0;m<f;m++){l=h[m];c.placemarks[l[c.hotelFieldsFilter.id]]={b_id:l[c.hotelFieldsFilter.id],b_latitude:l[c.hotelFieldsFilter.latitude],b_longitude:l[c.hotelFieldsFilter.longitude],prices:l[c.hotelFieldsFilter.min_prices],review_score:l[c.hotelFieldsFilter.review_score],districts:l[c.hotelFieldsFilter.districts]};d=l[c.hotelFieldsFilter.min_prices].length;for(var g=0;g<d;g++){n=(((l[c.hotelFieldsFilter.min_prices])[g])[4])[3];if(q===-1){q=n}else{if(q>n){q=n}}c.placemarks[l[c.hotelFieldsFilter.id]].cheapestPrice=q}q=-1;n=0}if(c.map_overlay){c.updateMap();if(booking.env.mapToolbar||booking.env.mapAddressLoadingMsg){$("#map_status_msg").hide()}}})},trackExperiments:function(){if(booking.env.map_more_params){booking.env.trackExperiment(booking.env.map_more_params,"map_opened")}},calculateBoundingBoxZoomLevel:function(f,d){var g=256,c=f.getSouthWest().lng(),h=f.getNorthEast().lng(),j=h-c;if(j<0){j+=360}return Math.round(Math.log(d.width*360/j/g)/Math.LN2)},historyHandler:{pushUrl:function(c){if(typeof history.pushState!=="undefined"){history.pushState(c,null,c.url)}else{location.hash="#!"+url}},initializeHistoryHandler:function(d){if(typeof history.pushState!=="undefined"){var f=("state" in window.history),c=location.href;$(window).bind("popstate",function(j){var g=!h&&location.href===c,h=true,n,l=false,k,m=$("#frm fieldset");if(j&&j.originalEvent&&j.originalEvent.state){k=j.originalEvent.state;l=true}else{if(history.state&&d.lastState&&d.lastState.srHeader&&d.lastState.srHeader!==history.state.srHeader){k=history.state}}d.lastState=k;if((g&&!d.usedHistory)||(location.href.indexOf("#map_opened")!==-1)){if(k&&k.srHeader){$("#right .sorth1").html(k.srHeader);$("#b_google_map_thumbnail").css("background-image",k.mapThumbnailUrl);$("#destination").val(k.originalSearchboxValue);$(".search_summary_block").find(".ss").find(".search_summary_toggle_button").html(k.originalSearchboxValue);m.append($("<input>",{type:"hidden",name:"dest_type",value:k.originalDestId}));m.append($("<input>",{type:"hidden",name:"dest_id",value:k.originalDestId}))}return}if(!k){n=(location.pathname+location.search).replace("searchresults","standalonesearchresults");d.processSearchResults({url:n})}else{n=(k.url).replace("searchresults","standalonesearchresults");d.processSearchResults({url:n,viewport:k.viewport,formattedAddress:k.formattedAddress,location:k.location})}})}else{$(window).bind("hashchange",function(){var g=location;hash=location.href.split("#!")[1],url;if(!hash){url=(location.pathname+location.search).replace("searchresults","standalonesearchresults")}else{if(hash!==g){url=hash}}d.processSearchResults({url:url})})}}},showStatusMsg:function(d){if(this.mapStatusMSgShown){return}var f="",c,g;if(booking.env.mapUseJsClusters&&d.position==="center"){this.mapStatusMSgShown=1;if(this.clusterClicked){f=booking.env.mapClusterZoomAreaTxt}else{f=booking.env.mapAddressLoadingMsgTxt}this.clusterClicked=false;$("#map_status_current_msg").html(f);c=$("#map_status_msg");g=(this.map_width/2)-(c.width()/2);c.show().css("left",g+"px");$("#map_ui_blocker_overlay").show();if(!d.loadFromMapDrag){this.map_overlay.oMarkerLayer.empty()}}}};booking[sNSStartupLoad].googleMaps.clusters=function(){MarkerClusterer=function(c){this.mapContext=c.mapContext;this.clusters=[];this.minClusterSize=c.minClusterSize||2;this.gridSize=c.gridSize||60};MarkerClusterer.prototype.clearClusters=function(){this.clusters=[]};MarkerClusterer.prototype.addMarkerToClosestCluster=function(f){var g,c,h;distance=40000,clusterToAddTo=null,markerPosition={b_latitude:f.b_latitude,b_longitude:f.b_longitude};for(g=0,c=this.clusters.length;g<c;g++){h=this.distanceBetweenPoints(this.clusters[g].center,markerPosition);if(h<distance){distance=h;clusterToAddTo=this.clusters[g]}}if(clusterToAddTo&&clusterToAddTo.isMarkerInClusterBounds(f)){clusterToAddTo.addMarker(f)}else{clusterToAddTo=new Cluster({mapContext:this.mapContext,gridSize:this.gridSize,minClusterSize:this.minClusterSize,id:this.clusters.length});clusterToAddTo.addMarker(f);this.clusters.push(clusterToAddTo)}};MarkerClusterer.prototype.distanceBetweenPoints=function(u,t){if(!u||!t){return 0}var j=6371,h=u.b_latitude,q=u.b_longitude,g=t.b_latitude,n=t.b_longitude,l=(g-h)*Math.PI/180,f=(n-q)*Math.PI/180,o=Math.sin(l/2)*Math.sin(l/2)+Math.cos(h*Math.PI/180)*Math.cos(g*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2),m=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),k=j*m;return k};Cluster=function(c){this.center=null;this.bounds=null;this.averageCenter=false;this.mapContext=c.mapContext;this.gridSize=c.gridSize||60;this.totalMarkers=0;this.minClusterSize=c.minClusterSize||2;this.id=c.id;this.innerHotelsBounds=new google.maps.LatLngBounds()};Cluster.prototype.addMarker=function(d){var c,h,f,g;this.totalMarkers++;if(!this.center){this.center={b_latitude:d.b_latitude,b_longitude:d.b_longitude};g=new google.maps.LatLng(this.center.b_latitude,this.center.b_longitude);this.bounds=new google.maps.LatLngBounds();this.bounds.extend(g);this.calculateBounds()}else{if(this.averageCenter){c=this.totalMarkers;h=(this.center.b_latitude*(c-1)+d.b_latitude)/c;f=(this.center.b_longitude*(c-1)+d.b_longitude)/c;this.center={b_latitude:h,b_longitude:f};this.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(h,f));this.calculateBounds(new google.maps.LatLng(this.center.b_latitude,this.center.b_longitude))}}this.innerHotelsBounds.extend(new google.maps.LatLng(d.b_latitude,d.b_longitude));d.clusterId=this.id};Cluster.prototype.calculateBounds=function(){var g=this.mapContext.map_overlay.getProjection(),c=this.bounds.getNorthEast(),m=this.bounds.getSouthWest(),l,h,k,j,f,d;l=g.fromLatLngToDivPixel(c);l.x+=this.gridSize;l.y-=this.gridSize;h=g.fromLatLngToDivPixel(m);h.x-=this.gridSize;h.y+=this.gridSize;c=g.fromDivPixelToLatLng(l);m=g.fromDivPixelToLatLng(h);this.bounds.extend(c);this.bounds.extend(m)};Cluster.prototype.isMarkerInClusterBounds=function(c){return(this.bounds?this.bounds.contains(new google.maps.LatLng(c.b_latitude,c.b_longitude)):false)}};booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].size_filters_to_map={priority:9,init:function(){document.intervalSizeFiltersCount=0;document.intervalSizeFiltersToFitMap=null;document.searchSummaryContainer=null;document.searchFullContainer=null;document.summaryInitiallyShown=($(".experiment_sftm_summ:visible").length>0)?true:false;if($(".experiment_sftm_summ .experiment_sftm_full").length>0){document.searchSummaryContainer=$("div.search_summary_block");document.searchFullContainer=$("div.original_search_form");$(".experiment_sftm_summ").show()}else{document.searchSummaryContainer=$(".experiment_sftm_summ");document.searchFullContainer=$(".experiment_sftm_full")}document.doSizeFiltersToFitMap=function(){document._doSwitchChangeSearchButtonBehavior();clearInterval(document.intervalSizeFiltersToFitMap);document.intervalSizeFiltersToFitMap=setInterval(function(){document._doSizeFiltersToFitMap(false);document.intervalSizeFiltersCount++},50)};document._doSwitchChangeSearchButtonBehavior=function(){$(".search_summary_toggle_button").unbind().bind("click",function(){document.searchFullContainer.show();document.searchSummaryContainer.hide();document._doSizeFiltersToFitMap(true);if(document.summaryInitiallyShown==true){document.summaryInitiallyShown=false}return false})};document._doSwitchChangeSearchButtonBehavior();document._doSizeFiltersToFitMap=function(k){try{if(k==false){document.searchFullContainer.hide();document.searchSummaryContainer.show()}var j=$("#filterbox_options").position().top;var g=$("#sr_map").position().top;var f=$("#sr_map").height();var h=(g+f);var c=(h-j);$("#filterbox_options").addClass("scrollable_map_filters");$("#filterbox_options").css({height:c});clearInterval(document.intervalSizeFiltersToFitMap);return true}catch(d){return false}};document.undoSizeFiltersToFitMap=function(){clearInterval(document.intervalSizeFiltersToFitMap);$("#filterbox_options").removeClass("scrollable_map_filters");$("#filterbox_options").css("height","auto");if(document.summaryInitiallyShown==false){document.searchFullContainer.show();document.searchSummaryContainer.hide()}else{document.searchFullContainer.hide();document.searchSummaryContainer.show()}};return true},initElse:function(){return true}};if(booking.env.enable_scripts_tracking){booking.env.scripts_tracking.maps.run=true}(function(f,g){f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.8.6",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});f.fn.extend({_focus:f.fn.focus,focus:function(h,c){return typeof h==="number"?this.each(function(){var j=this;setTimeout(function(){f(j).focus();if(c){c.call(j)}},h)}):this._focus.apply(this,arguments)},scrollParent:function(){var c;if((f.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){c=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(f.curCSS(this,"position",1))&&(/(auto|scroll)/).test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0)}else{c=this.parents().filter(function(){return(/(auto|scroll)/).test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!c.length?f(document):c},zIndex:function(c){if(c!==g){return this.css("zIndex",c)}if(this.length){var j=f(this[0]),k,h;while(j.length&&j[0]!==document){k=j.css("position");if(k==="absolute"||k==="relative"||k==="fixed"){h=parseInt(j.css("zIndex"),10);if(!isNaN(h)&&h!==0){return h}}j=j.parent()}}return 0},disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(c){c.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});f.each(["Width","Height"],function(m,o){var n=o==="Width"?["Left","Right"]:["Top","Bottom"],l=o.toLowerCase(),c={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};function k(j,q,t,h){f.each(n,function(){q-=parseFloat(f.curCSS(j,"padding"+this,true))||0;if(t){q-=parseFloat(f.curCSS(j,"border"+this+"Width",true))||0}if(h){q-=parseFloat(f.curCSS(j,"margin"+this,true))||0}});return q}if(f().jquery.replace(/\./g,"")>170){return}f.fn["inner"+o]=function(h){if(h===g){return c["inner"+o].call(this)}return this.each(function(){f(this).css(l,k(this,h)+"px")})};f.fn["outer"+o]=function(j,h){if(typeof j!=="number"){return c["outer"+o].call(this,j)}return this.each(function(){f(this).css(l,k(this,j,true,h)+"px")})}});function d(c){return !f(c).parents().andSelf().filter(function(){return f.curCSS(this,"visibility")==="hidden"||f.expr.filters.hidden(this)}).length}f.extend(f.expr[":"],{data:function(c,h,j){return !!f.data(c,j[3])},focusable:function(l){var c=l.nodeName.toLowerCase(),n=f.attr(l,"tabindex");if("area"===c){var j=l.parentNode,k=j.name,m;if(!l.href||!k||j.nodeName.toLowerCase()!=="map"){return false}m=f("img[usemap=#"+k+"]")[0];return !!m&&d(m)}return(/input|select|textarea|button|object/.test(c)?!l.disabled:"a"==c?l.href||!isNaN(n):!isNaN(n))&&d(l)},tabbable:function(c){var h=f.attr(c,"tabindex");return(isNaN(h)||h>=0)&&f(c).is(":focusable")}});f(function(){var h=document.body,c=h.appendChild(c=document.createElement("div"));f.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});f.support.minHeight=c.offsetHeight===100;f.support.selectstart="onselectstart" in c;h.removeChild(c).style.display="none"});if(!f.curCSS){f.curCSS=f.css}f.extend(f.ui,{plugin:{add:function(l,k,c){var j=f.ui[l].prototype;for(var m in c){j.plugins[m]=j.plugins[m]||[];j.plugins[m].push([k,c[m]])}},call:function(m,k,l){var c=m.plugins[k];if(!c||!m.element[0].parentNode){return}for(var j=0;j<c.length;j++){if(m.options[c[j][0]]){c[j][1].apply(m.element,l)}}}},contains:function(c,h){return document.compareDocumentPosition?c.compareDocumentPosition(h)&16:c!==h&&c.contains(h)},hasScroll:function(c,j){if(f(c).css("overflow")==="hidden"){return false}var k=(j&&j==="left")?"scrollLeft":"scrollTop",h=false;if(c[k]>0){return true}c[k]=1;h=(c[k]>0);c[k]=0;return h},isOverAxis:function(h,j,c){return(h>j)&&(h<(j+c))},isOver:function(c,m,j,k,n,l){return f.ui.isOverAxis(c,j,n)&&f.ui.isOverAxis(m,k,l)}})})(jQuery);(function(f,h){if(f.cleanData){var j=f.cleanData;f.cleanData=function(k){for(var d=0,c;(c=k[d])!=null;d++){f(c).triggerHandler("remove")}j(k)}}else{var g=f.fn.remove;f.fn.remove=function(d,c){return this.each(function(){if(!c){if(!d||f.filter(d,[this]).length){f("*",this).add([this]).each(function(){f(this).triggerHandler("remove")})}}return g.call(f(this),d,c)})}}f.widget=function(m,k,n){var l=m.split(".")[0],c;m=m.split(".")[1];c=l+"-"+m;if(!n){n=k;k=f.Widget}f.expr[":"][c]=function(o){return !!f.data(o,m)};f[l]=f[l]||{};f[l][m]=function(q,o){if(arguments.length){this._createWidget(q,o)}};var d=new k();d.options=f.extend(true,{},d.options);f[l][m].prototype=f.extend(true,d,{namespace:l,widgetName:m,widgetEventPrefix:f[l][m].prototype.widgetEventPrefix||m,widgetBaseClass:c},n);f.widget.bridge(m,f[l][m])};f.widget.bridge=function(c,d){f.fn[c]=function(l){var n=typeof l==="string",m=Array.prototype.slice.call(arguments,1),k=this;l=!n&&m.length?f.extend.apply(null,[true,l].concat(m)):l;if(n&&l.charAt(0)==="_"){return k}if(n){this.each(function(){var q=f.data(this,c),o=q&&f.isFunction(q[l])?q[l].apply(q,m):q;if(o!==q&&o!==h){k=o;return false}})}else{this.each(function(){var o=f.data(this,c);if(o){o.option(l||{})._init()}else{f.data(this,c,new d(l,this))}})}return k}};f.Widget=function(d,c){if(arguments.length){this._createWidget(d,c)}};f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,c){f.data(c,this.widgetName,this);this.element=f(c);this.options=f.extend(true,{},this.options,this._getCreateOptions(),d);var k=this;this.element.bind("remove."+this.widgetName,function(){k.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(d,c){var k=d;if(arguments.length===0){return f.extend({},this.options)}if(typeof d==="string"){if(c===h){return this.options[d]}k={};k[d]=c}this._setOptions(k);return this},_setOptions:function(c){var d=this;f.each(c,function(l,k){d._setOption(l,k)});return this},_setOption:function(d,c){this.options[d]=c;if(d==="disabled"){this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(n,m,l){var c=this.options[n];m=f.Event(m);m.type=(n===this.widgetEventPrefix?n:this.widgetEventPrefix+n).toLowerCase();l=l||{};if(m.originalEvent){for(var o=f.event.props.length,d;o;){d=f.event.props[--o];m[d]=m.originalEvent[d]}}this.element.trigger(m,l);return !(f.isFunction(c)&&c.call(this.element[0],m,l)===false||m.isDefaultPrevented())}}})(jQuery);(function(l,k){l.ui=l.ui||{};var n=/left|center|right/,m=/top|center|bottom/,j="center",h=l.fn.position,o=l.fn.offset;l.fn.position=function(q){if(!q||!q.of){return h.apply(this,arguments)}q=l.extend({},q);var c=l(q.of),d=c[0],u=(q.collision||"flip").split(" "),v=q.offset?q.offset.split(" "):[0,0],f,t,g;if(d.nodeType===9){f=c.width();t=c.height();g={top:0,left:0}}else{if(d.setTimeout){f=c.width();t=c.height();g={top:c.scrollTop(),left:c.scrollLeft()}}else{if(d.preventDefault){q.at="left top";f=t=0;g={top:q.of.pageY,left:q.of.pageX}}else{f=c.outerWidth();t=c.outerHeight();g=c.offset()}}}l.each(["my","at"],function(){var w=(q[this]||"").split(" ");if(w.length===1){w=n.test(w[0])?w.concat([j]):m.test(w[0])?[j].concat(w):[j,j]}w[0]=n.test(w[0])?w[0]:j;w[1]=m.test(w[1])?w[1]:j;q[this]=w});if(u.length===1){u[1]=u[0]}v[0]=parseInt(v[0],10)||0;if(v.length===1){v[1]=v[0]}v[1]=parseInt(v[1],10)||0;if(q.at[0]==="right"){g.left+=f}else{if(q.at[0]===j){g.left+=f/2}}if(q.at[1]==="bottom"){g.top+=t}else{if(q.at[1]===j){g.top+=t/2}}g.left+=v[0];g.top+=v[1];return this.each(function(){var G=l(this),E=G.outerWidth(),y=G.outerHeight(),F=parseInt(l.curCSS(this,"marginLeft",true))||0,z=parseInt(l.curCSS(this,"marginTop",true))||0,C=E+F+parseInt(l.curCSS(this,"marginRight",true))||0,B=y+z+parseInt(l.curCSS(this,"marginBottom",true))||0,D=l.extend({},g),A;if(q.my[0]==="right"){D.left-=E}else{if(q.my[0]===j){D.left-=E/2}}if(q.my[1]==="bottom"){D.top-=y}else{if(q.my[1]===j){D.top-=y/2}}D.left=parseInt(D.left);D.top=parseInt(D.top);A={left:D.left-F,top:D.top-z};l.each(["left","top"],function(w,x){if(l.ui.position[u[w]]){l.ui.position[u[w]][x](D,{targetWidth:f,targetHeight:t,elemWidth:E,elemHeight:y,collisionPosition:A,collisionWidth:C,collisionHeight:B,offset:v,my:q.my,at:q.at})}});if(l.fn.bgiframe){G.bgiframe()}G.offset(l.extend(D,{using:q.using}))})};l.ui.position={fit:{left:function(g,f){var c=l(window),d=f.collisionPosition.left+f.collisionWidth-c.width()-c.scrollLeft();g.left=d>0?g.left-d:Math.max(g.left-f.collisionPosition.left,g.left)},top:function(g,f){var c=l(window),d=f.collisionPosition.top+f.collisionHeight-c.height()-c.scrollTop();g.top=d>0?g.top-d:Math.max(g.top-f.collisionPosition.top,g.top)}},flip:{left:function(q,f){if(f.at[0]===j){return}var c=l(window),d=f.collisionPosition.left+f.collisionWidth-c.width()-c.scrollLeft(),t=f.my[0]==="left"?-f.elemWidth:f.my[0]==="right"?f.elemWidth:0,g=f.at[0]==="left"?f.targetWidth:-f.targetWidth,u=-2*f.offset[0];q.left+=f.collisionPosition.left<0?t+g+u:d>0?t+g+u:0},top:function(q,f){if(f.at[1]===j){return}var c=l(window),d=f.collisionPosition.top+f.collisionHeight-c.height()-c.scrollTop(),t=f.my[1]==="top"?-f.elemHeight:f.my[1]==="bottom"?f.elemHeight:0,g=f.at[1]==="top"?f.targetHeight:-f.targetHeight,u=-2*f.offset[1];q.top+=f.collisionPosition.top<0?t+g+u:d>0?t+g+u:0}}};if(!l.offset.setOffset){l.offset.setOffset=function(d,q){if(/static/.test(l.curCSS(d,"position"))){d.style.position="relative"}var f=l(d),u=f.offset(),t=parseInt(l.curCSS(d,"top",true),10)||0,c=parseInt(l.curCSS(d,"left",true),10)||0,g={top:(q.top-u.top)+t,left:(q.left-u.left)+c};if("using" in q){q.using.call(d,g)}else{f.css(g)}};l.fn.offset=function(d){var c=this[0];if(!c||!c.ownerDocument){return null}if(d){return this.each(function(){l.offset.setOffset(this,d)})}return o.call(this)}}}(jQuery));(function(d,g){if(booking.env.b_site_experiment_omni_search){var f={appendTo:"#frm .where .field",position:{my:"left top",at:"left bottom",collision:"none",offset:"0 -5"},delay:300,minLength:1,source:null}}else{var f={appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null}}d.widget("ui.autocomplete",{options:f,_create:function(){var j=this,c=this.element[0].ownerDocument,h;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(l){if(j.options.disabled||j.element.attr("readonly")){return}h=false;var k=d.ui.keyCode;switch(l.keyCode){case k.PAGE_UP:j._move("previousPage",l);break;case k.PAGE_DOWN:j._move("nextPage",l);break;case k.UP:j._move("previous",l);l.preventDefault();break;case k.DOWN:j._move("next",l);l.preventDefault();break;case k.ENTER:case k.NUMPAD_ENTER:if(j.menu.active){h=true;l.preventDefault()}else{j.close(l);if(j.xhr){j.xhr.abort()}break}case k.TAB:if(!j.menu.active){return}j.menu.select(l);break;case k.ESCAPE:j.element.val(j.term);booking.env.autocompleteESC=true;j.close(l);break;default:if(booking.env.b_site_experiment_omni_search&&j.element.val().length>3){d(".where").removeClass("has_omni_error");d(".where .omni_error").remove()}if(l.keyCode==k.BACKSPACE&&j.element.val().length<=j.options.minLength){if(j.xhr){j.xhr.abort()}}clearTimeout(j.searching);j.searching=setTimeout(function(){if(j.term!=j.element.val()){j.selectedItem=null;j.search(null,l)}},j.options.delay);break}}).bind("keypress.autocomplete",function(k){if(h){h=false;k.preventDefault()}}).bind("focus.autocomplete",function(){if(j.options.disabled){return}j.selectedItem=null;j.previous=j.element.val()}).bind("blur.autocomplete",function(k){if(j.options.disabled){return}clearTimeout(j.searching);j.closing=setTimeout(function(){j.close(k);j._change(k)},150)});this._initSource();if(this.options&&this.options.delay){this.options.orig_delay=this.options.delay}this.response=function(){return j._response.apply(j,arguments)};this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||"body",c)[0]).mousedown(function(l){var k=j.menu.element[0];if(!d(l.target).closest(".ui-menu-item").length){setTimeout(function(){d(document).one("mousedown",function(m){if(m.target!==j.element[0]&&m.target!==k&&!d.ui.contains(k,m.target)){j.close()}})},1)}setTimeout(function(){clearTimeout(j.closing)},13)}).menu({focus:function(l,k){var m=k.item.data("item.autocomplete");if(false!==j._trigger("focus",l,{item:m})){if(/^key/.test(l.originalEvent.type)){if(m&&m.value){j.element.val(m.value)}}}},selected:function(l,k){if(typeof(k.item)!=="undefined"&&k.item!==null){var m=k.item.data("item.autocomplete");var n=j.previous;if(j.element[0]!==c.activeElement){j.element.focus();j.previous=n;setTimeout(function(){j.previous=n},1)}if(false!==j._trigger("select",l,{item:m})){if(typeof(m)!=="undefined"){j.element.val(m.value)}}j.term=j.element.val();j.close(l);j.selectedItem=m}},blur:function(l,k){if(j.menu.element.is(":visible")&&(j.element.val()!==j.term)){j.element.val(j.term)}}}).zIndex(this.element.zIndex()+2000).css({top:0,left:0}).hide().data("menu");if(d.fn.bgiframe){this.menu.element.bgiframe()}if(booking.env.search_autocomplete_with_search_history){window.showSearchHistory=(function(k){var l=k;return function(){l._suggest({searchHistory:window.booking.env.history_search_string})}})(this)}},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d.Widget.prototype.destroy.call(this)},_setOption:function(h,c){d.Widget.prototype._setOption.apply(this,arguments);if(h==="source"){this._initSource()}if(h==="appendTo"){this.menu.element.appendTo(d(c||"body",this.element[0].ownerDocument)[0])}},_initSource:function(){var n=this,o={},k,c,m,q,l=true;if(d.isArray(this.options.source)){c=this.options.source;this.source=function(h,j){j(d.ui.autocomplete.filter(c,h.term))}}else{if(typeof this.options.source==="string"){m=this.options.source;this.source=function(j,t){var h=function(u){t(u)};if(n.xhr){n.xhr.abort()}k=m+JSON.stringify(j);if(k in o){h(o[k]);n.xhr=null}else{if(n.options.disable){return}if(booking.env.b_site_experiment_omni_search){j.give_cc1=1;j.show_img=1;j.img_size="64x64";j.name_breakdown=1}n.xhr=d.getJSON(m,j,function(v,w,u){if(typeof v!=="undefined"&&v!==null&&v.shut_up){n.options.disable=true}n.options.delay=n.options.orig_delay;if(u===n.xhr){o[k]=v;h(v)}n.xhr=null});if(booking.env.search_autocomplete_delay_on_failure){n.element.ajaxError(function(){n.options.delay=Math.floor(n.options.delay*=1.5)})}}}}else{this.source=this.options.source}}},search:function(c,h){c=c!=null?c:this.element.val();this.term=this.element.val();if(c.length<this.options.minLength){return this.close(h)}clearTimeout(this.closing);if(this._trigger("search",h)===false){return}return this._search(c)},_search:function(c){this.element.addClass("ui-autocomplete-loading");var h=this.options.extraParams||{};h.dest_type=booking.env.search_autocomplete_params.dest_type;h.term=c;this.source(h,this.response)},_response:function(c){if(c&&c.length){c=this._normalize(c);this._suggest(c);this._trigger("open")}else{if(booking.env.b_site_experiment_search_autocomplete_no_results_msg||(((d.isEmptyObject(c)&&booking.env.b_site_experiment_search_autocomplete_no_results_msg)||!d.isEmptyObject(c))&&booking.env.b_site_experiment_search_autocomplete_partitions)){if(booking.env.search_autocomplete_with_search_history){c.searchHistory=d.ui.autocomplete.filter(booking.env.history_search_string,this.element.val())}this._suggest(c);this._trigger("open")}else{this.close()}}this.element.removeClass("ui-autocomplete-loading")},close:function(c){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",c);this.menu.element.hide();this.menu.deactivate();if(typeof(c)!=="undefined"&&booking.env.autocompleteESC){c.preventDefault();booking.env.autocompleteESC=false}}},_change:function(c){if(this.previous!==this.element.val()){this._trigger("change",c,{item:this.selectedItem})}},_normalize:function(c){if(c&&c.length&&c[0].label&&c[0].value){return c}return d.map(c,function(h){if(typeof h==="string"){return{label:h,value:h}}return d.extend({label:h.label||h.value,value:h.value||h.label},h)})},_suggest:function(l){var j=this.menu.element.empty().zIndex(this.element.zIndex()+2000),k=d(j),c=booking.env.autocomplete_skip_suggestions,m="";this._renderMenu(j,l);if((l.length===0||(d.isEmptyObject(l)&&booking.env.b_site_experiment_search_autocomplete_partitions))&&booking.env.b_site_experiment_search_autocomplete_no_results_msg){c=booking.env.autocomplete_no_results;m='style="margin: 0;border: none;"'}k.append('<li id="autocomplete_skip" class="ui-menu-item" role="menuitem" '+m+'><a id="autocomplete_skip_a" class="ui-corner-all" tabindex="-1">'+c+"</a></li>");this.menu.deactivate();this.menu.refresh();this.menu.element.show().position(d.extend({of:this.element},this.options.position));if(!l.length&&(booking.env.b_action==="hotel"||booking.env.b_action==="searchresults")&&booking.env.b_site_experiment_search_autocomplete_partitions){k.removeClass("ui-autocomplete").css({width:(booking.env.b_is_ie6||booking.env.b_is_ie7)?"40%":"auto"})}else{this._resizeMenu()}},_resizeMenu:function(){var c=this.menu.element;c.outerWidth(this.element.outerWidth())},_renderMenu:function(u,l){var c=this,j=false;if(booking.env.b_site_experiment_search_autocomplete_partitions&&!booking.env.b_site_experiment_omni_search){var w,y,z,t,x,v=0,A=["city","airport","district","region","country","hotel","landmark","searchHistory"],B=A.length;for(w=0;w<B;w++){x=A[w];if(l[x]){v++;t=c._normalize(l[x]);z=t.length;for(y=0;y<z;y++){if(y===0){t[0].header=x;if(v===1){t[0].first=1}}if(booking.env.user_has_search_history&&x==="searchHistory"&&!j){j=true;u.append('<li class="ui-menu-item" role="menuitem"><strong style="background:#ddd;display:block;font-weight:normal;color:#666;font-size:0.9em;padding:5px;">'+booking.env.search_you_recently_searched+"</strong></li>")}c._renderItem(u,t[y],y)}}}}else{if(booking.env.b_site_experiment_omni_search){d.each(l,function(k,h){c._renderItem(u,h,k)})}else{d.each(l,function(k,h){c._renderItem(u,h)})}}},_renderItem:function(I,C,z){var M=C.label,G="",R="",F="",D="",Q="",A=(booking.env.b_site_experiment_search_autocomplete_partitions===2);if(booking.env.b_site_experiment_omni_search){var c;var N=d('<a href="#"></a>');var M=d('<div class="item"></div>');var B=d('<span class="flag_16"></span>');var H=d('<span class="item_geo"></span>');var P=C.cc1?C.cc1[0]:C.co_code;var Q=d('<span class="item_count"></span>');var O=d('<div class="item_title"></div>');I.parent(".field").addClass("autocomplete_shown");I.addClass("omni_autocomplete");if(C.name){O.text(C.name);M.append(O)}B.addClass("flag_16_"+P);if(C.img_url){var L;if(C.type=="ho"){L=C.img_url.replace("64x64","square60")}else{L=C.img_url}c='<img src="'+L+'" />'}else{if(C.type=="ci"){c='<img src="'+booking.env.icons+'/default_city.jpg" />'}else{if(C.type=="ai"){c='<img src="'+booking.env.icons+'/airport60.gif" />'}else{if(C.type=="la"){c='<img src="'+booking.env.icons+'/landmark60.gif" />'}else{if(C.type=="di"){c='<img src="'+booking.env.icons+'/district60.gif" />'}else{if(C.type=="ho"){c='<img src="'+booking.env.icons+'/hotel60.gif" />'}else{if(C.type=="co"){c='<img src="'+booking.env.icons+'/country60.gif" />'}else{if(C.type=="is"){c='<img src="'+booking.env.icons+'/island60.gif" />'}else{if(C.type=="re"){c='<img src="'+booking.env.icons+'/region60.gif" />'}else{c='<img src="'+booking.env.icons+'/default_city.jpg" />'}}}}}}}}}if(C.region){H.append(C.region+", "+C.country)}else{H.append(C.country)}if(z<2){H.append(" ("+C.dest_type+")");M.append(B).append(H)}else{N.addClass("item_secondary");O.append(" ("+C.dest_type+")");M.append(B)}if(C.hotels){var y=(C.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels);Q.append(C.hotels+" "+y);M.append(Q)}N.append(c).append(M);return d("<li></li>").append(N).data("item.autocomplete",C).appendTo(I)}else{if(booking.env.b_site_experiment_search_autocomplete_partitions){if(booking.env.search_autocomplete_with_search_history){var E=C.header,J="",K="";if(E){if(E=="searchHistory"){if(C.first){F="search_history_start"}if(booking.env.b_lang=="ar"||booking.env.b_lang=="he"){G='<span class="autocomplete_header autocomplete_h_'+C.dest_type+'" style="float:left;position:static;">'+booking.env.autocomplete_search_history_categories[C.dest_type]+"</span>"}else{G='<span class="autocomplete_header autocomplete_h_'+C.dest_type+'" style="float:right;position:static;">'+booking.env.autocomplete_search_history_categories[C.dest_type]+"</span>"}}else{G='<span class="autocomplete_header autocomplete_h_'+C.dest_type+'" >'+booking.env.autocomplete_categories[C.header]+"</span>";R=(C.first)?"":' style="border-top: 1px solid #CCC;"'}}if(A&&E!="searchHistory"){if(C.hotels===0){booking.env.trackExperiment(booking.env.js_experiment_tracking.search_autocomplete_hotels_nearby);Q='<span class="label" style="position: static;color:#888;">&nbsp;('+(booking.env.autocomplete_show_hotels_nearby?booking.env.autocomplete.hotels_nearby:("0 "+booking.env.autocomplete.hotels))+")</span>"}else{Q='<span class="label" style="position: static;color:#888;">&nbsp;('+C.hotels+" "+(C.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels)+")</span>"}}else{if(E=="searchHistory"){if(C.has_dates){J='<span class="ck_i_d">'+C.checkin_day+'</span> <span class="ck_i_m" style="display:none;">'+C.checkin_month_number+"</span>"+C.checkin_month+' <span class="ck_i_y">'+C.checkin_year+'</span> - <span class="ck_o_d">'+C.checkout_day+'</span> <span class="ck_o_m" style="display:none;">'+C.checkout_month_number+"</span> "+C.checkout_month+' <span class="ck_o_y">'+C.checkout_year+"</span>";Q='<span class="label" style="position: static;color:#888;font-size:0.9em;">&nbsp;'+J+"</span>"}K=" search_history_link"}}M=G+"<span>"+M+Q+"</span>";D='class="partition_item'+K+'"'}else{if(C.header){G='<span class="autocomplete_header autocomplete_h_'+C.dest_type+'" >'+booking.env.autocomplete_categories[C.header]+"</span>";R=(C.first)?"":' style="border-top: 1px solid #CCC;"'}if(A){if(C.hotels===0){booking.env.trackExperiment(booking.env.js_experiment_tracking.search_autocomplete_hotels_nearby);Q='<span class="label" style="position: static;color:#888;">&nbsp;('+(booking.env.autocomplete_show_hotels_nearby?booking.env.autocomplete.hotels_nearby:("0 "+booking.env.autocomplete.hotels))+")</span>"}else{Q='<span class="label" style="position: static;color:#888;">&nbsp;('+C.hotels+" "+(C.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels)+")</span>"}}M=G+"<span>"+M+Q+"</span>";D='class="partition_item"'}}else{if(C.hotels>0){M+="<span class='label'><i>&nbsp;</i>"+C.hotels+" "+(C.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels)+"</span>"}else{M+="<span class='label'><i>&nbsp;</i>"+booking.env.autocomplete.hotels_nearby+"</span>"}F=C.dest_type}return d('<li class="'+F+'"'+R+"></li>").data("item.autocomplete",C).append(d("<a "+D+">"+M+"</a>")).appendTo(I)}},_move:function(c,h){if(!this.menu.element.is(":visible")){this.search(null,h);return}if(this.menu.first()&&/^previous/.test(c)||this.menu.last()&&/^next/.test(c)){this.element.val(this.term);this.menu.deactivate();return}this.menu[c](h)},widget:function(){return this.menu.element}});d.extend(d.ui.autocomplete,{escapeRegex:function(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(c,j){var h=new RegExp(d.ui.autocomplete.escapeRegex(j),"i");return d.grep(c,function(k){return h.test(k.label||k.value||k)})}})}(jQuery));(function(c){c.widget("ui.menu",{_create:function(){var d=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(f){if(!c(f.target).closest(".ui-menu-item a").length){return}f.preventDefault();d.select(f)});this.refresh()},refresh:function(){var f=this;var d=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");d.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(g){f.activate(g,c(this).parent())}).mouseleave(function(){f.deactivate()})},activate:function(j,k){this.deactivate();if(this.hasScroll()){var h=k.offset().top-this.element.offset().top,g=this.element.attr("scrollTop"),l=this.element.height();if(h<0){this.element.attr("scrollTop",g+h)}else{if(h>=l){this.element.attr("scrollTop",g+h-l+k.height())}}}this.active=k.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",j,{item:k})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(d){this.move("next",".ui-menu-item:first",d)},previous:function(d){this.move("prev",".ui-menu-item:last",d)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(g,h,j){if(!this.active){this.activate(j,this.element.children(h));return}var f=this.active[g+"All"](".ui-menu-item").eq(0);if(f.length){this.activate(j,f)}else{this.activate(j,this.element.children(h))}},nextPage:function(h){if(this.hasScroll()){if(!this.active||this.last()){this.activate(h,this.element.children(".ui-menu-item:first"));return}var g=this.active.offset().top,j=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var d=c(this).offset().top-g-j+c(this).height();return d<10&&d>-10});if(!f.length){f=this.element.children(".ui-menu-item:last")}this.activate(h,f)}else{this.activate(h,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(h){if(this.hasScroll()){if(!this.active||this.first()){this.activate(h,this.element.children(".ui-menu-item:last"));return}var g=this.active.offset().top,f=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var d=c(this).offset().top-g+f-c(this).height();return d<10&&d>-10});if(!result.length){result=this.element.children(".ui-menu-item:first")}this.activate(h,result)}else{this.activate(h,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(d){this._trigger("selected",d,{item:this.active})}})}(jQuery));booking[sNSExperiments].search_autocomplete={priority:9,cur_ui_item:{},init:function(){var w=this,t=$("#destination"),u=t.closest("form"),k=u.find("fieldset"),o=false,q=false,v=false,m=false,n=function(){if(!booking.env.b_site_experiment_search_autocomplete_no_auto_cal){if(!booking.env.b_site_experiment_omni_search){booking[sNSStartup].calendar.openPopupCalendar($("#homein .calendarLink").get(0))}else{booking[sNSStartup].calendar.openPopupCalendar($(".calendarLink.checkin","#frm").get(0))}}},l=function(){if(booking.env.autocomplete_more_params){booking.env.trackExperiment(booking.env.autocomplete_more_params)}};$("#destination").keydown(function(c){if(c.keyCode!=13){w.cur_ui_item={}}});t.autocomplete({source:"/autocomplete",extraParams:booking.env.search_autocomplete_params,minLength:2,delay:booking.env.search_autocomplete_delay||200,max:10}).bind("autocompleteselect",function(d,c){if(c.item){m=true;w.cur_ui_item=c.item;if(typeof _gaq!="undefined"){booking.google.trackEvent("Click","Autocomplete",document.body.id)}if(!$("#availcheck").attr("checked")&&(parseInt($("#checkin_day").val(),10)===0&&parseInt($("#checkout_monthday").val(),10)===0)){setTimeout(function(){if(booking.env.search_autocomplete_with_search_history_clicked){booking.env.search_autocomplete_with_search_history_clicked=false;return}n()},25)}}}).bind("autocompleteopen",function(d,c){if($("#calendar_popup").length){booking[sNSStartup].calendar.closePopupCalendar()}if(o===false&&typeof _gaq!="undefined"){o=true;booking.google.trackEvent("View","Autocomplete",document.body.id)}});t.bind("focus",function(d,c){if(booking.env.search_autocomplete_with_search_history){showSearchHistory();$("#autocomplete_skip_a").hide()}if(booking.env.user_has_search_history){booking.env.trackExperiment(booking.env.js_experiment_tracking.search_autocomplete_with_search_history)}return false});if(booking.env.search_autocomplete_with_search_history){$(".search_history_link").live("click",function(c){if(!booking.env.user_has_dates){$sel_link=$(this);var d=$sel_link.find(".ck_i_y").text()+"-"+$sel_link.find(".ck_i_m").text(),f=$sel_link.find(".ck_o_y").text()+"-"+$sel_link.find(".ck_o_m").text();if(f&&d){booking.env.search_autocomplete_with_search_history_clicked=true}$("#checkin_year_month").val(d);$("#checkout_year_month").val(f);$("#checkin_day").val($sel_link.find(".ck_i_d").text());$("#checkout_monthday").val($sel_link.find(".ck_o_d").text())}booking.google.trackEvent(booking.google.clickTracker,"Search history in autocomplete","Click on history")})}$("#autocomplete_skip").live("click",function(){var g=$(this),d=(!booking.env.user_has_dates&&!$("#availcheck").attr("checked")&&(parseInt($("#checkin_day").val(),10)===0&&parseInt($("#checkout_monthday").val(),10)===0));t.autocomplete("close");w.cur_ui_item={};if(booking.env.b_site_experiment_search_autocomplete_no_results_msg){var f=$(".bigbluebutton",u);if(!d){var h=true,c=function(){f.animate({"background-color":"#003580"},function(){f.animate({"background-color":"#0896FF"});if(h){h=false;c()}})};c()}}else{if(typeof _gaq!="undefined"){booking.google.trackEvent("Click","Autocomplete Skip"+(booking.env.b_site_experiment_search_autocomplete_skip_copy?" v"+booking.env.b_site_experiment_search_autocomplete_skip_copy:""),document.body.id)}}if(d){n()}});u.bind("submit",function(d,c){var f=$("#destination");if(w.cur_ui_item.dest_type){u.find("input[name='dest_type'], input[name='dest_id'], input[name='ac_pageview_id']").remove();u.append($("<input>",{type:"hidden",name:"dest_type",value:w.cur_ui_item.dest_type}));u.append($("<input>",{type:"hidden",name:"dest_id",value:w.cur_ui_item.dest_id}));u.append($("<input>",{type:"hidden",name:"ac_pageview_id",value:booking.env.pageview_id}))}else{if((f.val()==booking.env.sess_dest_fullname)&&booking.env.sess_dest_id&&booking.env.sess_dest_type&&booking.env.normalize_sbox_value){u.find("input[name='dest_type'], input[name='dest_id'], input[name='ac_pageview_id']").remove();u.append($("<input>",{type:"hidden",name:"dest_type",value:booking.env.sess_dest_type}));u.append($("<input>",{type:"hidden",name:"dest_id",value:booking.env.sess_dest_id}));u.append($("<input>",{type:"hidden",name:"ac_pageview_id",value:booking.env.pageview_id}))}}});return true}};