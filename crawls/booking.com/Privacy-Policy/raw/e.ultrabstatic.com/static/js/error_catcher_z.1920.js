function createCookie(c,d,e){var a="";if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)}function scriptsTrackingString(){var c,b,d="{",a=booking.env.scripts_tracking;for(c in a){if(a.hasOwnProperty(c)){b=a[c];d+='"'+c+'":{"loaded":'+!!b.loaded+',"run":'+!!b.run+"},"}}d=d.slice(0,d.length-1)+"}";return"&scripts="+encodeURIComponent(d)}window.onerror=function(f,b,g){var c=readCookie("error_catcher");if(typeof document.ff_kill!=="undefined"&&document.ff_kill===true&&navigator.userAgent.search("Firefox")!=-1&&f==="Error loading script"){return false}if(c=="kill"||(typeof document.kill!="undefined"&&document.kill===true)){return false}var l=0;var m=[];if(c){m=c.split("%2C");l=m[1]}if(c&&c.indexOf(booking.env.pageview_id)!=-1&&l>5){return false}var o;if(window.XMLHttpRequest){try{o=new window.XMLHttpRequest()}catch(n){o=false}}else{var k=new Array("Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP");for(var j=0;j<k.length;j++){try{o=new ActiveXObject(k[j]);window.status=j;break}catch(n){o=false}}}if(o){var h="error="+encodeURIComponent(f)+"&pid="+encodeURIComponent(booking.env.pageview_id);if(typeof f==="object"){var d="";if(f.srcElement&&f.srcElement.src){d+="scriptSrc="+f.srcElement.src}else{d+="scriptSrc=inline"}h="error="+encodeURIComponent(f+" :: "+d)+"&pid="+encodeURIComponent(booking.env.pageview_id)}h+="&url="+encodeURIComponent(b!==""&&typeof b!=="undefined"?b:location.href.split("?")[0]);if(typeof PageLoadTimer!=="undefined"){var a="&since="+(+new Date()-PageLoadTimer.start)+"&ready="+(PageLoadTimer.document_ready-PageLoadTimer.start?PageLoadTimer.document_ready-PageLoadTimer.start:0)+"&loaded="+(PageLoadTimer.window_load-PageLoadTimer.start?PageLoadTimer.window_load-PageLoadTimer.start:0);h+=a}if(booking.env.enable_scripts_tracking){h+=scriptsTrackingString()}if(Number(g)){h+="&lno="+Number(g)}o.open("PUT","/js_errors",true);o.setRequestHeader("Content-type","application/x-www-form-urlencoded");o.setRequestHeader("Content-length",h.length);o.setRequestHeader("Connection","close");o.onreadystatechange=function(){if(o.readyState==4&&(o.status==503||o.responseText=="shut up")){document.kill=true;createCookie("error_catcher","kill",30)}};o.send(h);l=(c&&m[0]==booking.env.pageview_id)?parseInt(m[1],10)+1:1;createCookie("error_catcher",booking.env.pageview_id+"%2C"+l,1)}return false};