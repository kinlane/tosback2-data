(function(a,c){a.ui=a.ui||{};if(a.ui.version){return}a.extend(a.ui,{version:"1.8.6",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(d,e){return typeof d==="number"?this.each(function(){var f=this;setTimeout(function(){a(f).focus();if(e){e.call(f)}},d)}):this._focus.apply(this,arguments)},scrollParent:function(){var d;if((a.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){d=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.curCSS(this,"position",1))&&(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}else{d=this.parents().filter(function(){return(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!d.length?a(document):d},zIndex:function(g){if(g!==c){return this.css("zIndex",g)}if(this.length){var e=a(this[0]),d,f;while(e.length&&e[0]!==document){d=e.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){f=parseInt(e.css("zIndex"),10);if(!isNaN(f)&&f!==0){return f}}e=e.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(d){d.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(f,d){var e=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function h(l,k,i,m){a.each(e,function(){k-=parseFloat(a.curCSS(l,"padding"+this,true))||0;if(i){k-=parseFloat(a.curCSS(l,"border"+this+"Width",true))||0}if(m){k-=parseFloat(a.curCSS(l,"margin"+this,true))||0}});return k}if(a().jquery.replace(/\./g,"")>170){return}a.fn["inner"+d]=function(i){if(i===c){return j["inner"+d].call(this)}return this.each(function(){a(this).css(g,h(this,i)+"px")})};a.fn["outer"+d]=function(i,k){if(typeof i!=="number"){return j["outer"+d].call(this,i)}return this.each(function(){a(this).css(g,h(this,i,true,k)+"px")})}});function b(d){return !a(d).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.extend(a.expr[":"],{data:function(f,e,d){return !!a.data(f,d[3])},focusable:function(f){var i=f.nodeName.toLowerCase(),d=a.attr(f,"tabindex");if("area"===i){var h=f.parentNode,g=h.name,e;if(!f.href||!g||h.nodeName.toLowerCase()!=="map"){return false}e=a("img[usemap=#"+g+"]")[0];return !!e&&b(e)}return(/input|select|textarea|button|object/.test(i)?!f.disabled:"a"==i?f.href||!isNaN(d):!isNaN(d))&&b(f)},tabbable:function(e){var d=a.attr(e,"tabindex");return(isNaN(d)||d>=0)&&a(e).is(":focusable")}});a(function(){var d=document.body,e=d.appendChild(e=document.createElement("div"));a.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=e.offsetHeight===100;a.support.selectstart="onselectstart" in e;d.removeChild(e).style.display="none"});if(!a.curCSS){a.curCSS=a.css}a.extend(a.ui,{plugin:{add:function(e,f,h){var g=a.ui[e].prototype;for(var d in h){g.plugins[d]=g.plugins[d]||[];g.plugins[d].push([f,h[d]])}},call:function(d,f,e){var h=d.plugins[f];if(!h||!d.element[0].parentNode){return}for(var g=0;g<h.length;g++){if(d.options[h[g][0]]){h[g][1].apply(d.element,e)}}}},contains:function(e,d){return document.compareDocumentPosition?e.compareDocumentPosition(d)&16:e!==d&&e.contains(d)},hasScroll:function(g,e){if(a(g).css("overflow")==="hidden"){return false}var d=(e&&e==="left")?"scrollLeft":"scrollTop",f=false;if(g[d]>0){return true}g[d]=1;f=(g[d]>0);g[d]=0;return f},isOverAxis:function(e,d,f){return(e>d)&&(e<(d+f))},isOver:function(i,e,h,g,d,f){return a.ui.isOverAxis(i,h,d)&&a.ui.isOverAxis(e,g,f)}})})(jQuery);(function(b,d){if(b.cleanData){var c=b.cleanData;b.cleanData=function(e){for(var f=0,g;(g=e[f])!=null;f++){b(g).triggerHandler("remove")}c(e)}}else{var a=b.fn.remove;b.fn.remove=function(e,f){return this.each(function(){if(!f){if(!e||b.filter(e,[this]).length){b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")})}}return a.call(b(this),e,f)})}}b.widget=function(f,h,e){var g=f.split(".")[0],j;f=f.split(".")[1];j=g+"-"+f;if(!e){e=h;h=b.Widget}b.expr[":"][j]=function(k){return !!b.data(k,f)};b[g]=b[g]||{};b[g][f]=function(k,l){if(arguments.length){this._createWidget(k,l)}};var i=new h();i.options=b.extend(true,{},i.options);b[g][f].prototype=b.extend(true,i,{namespace:g,widgetName:f,widgetEventPrefix:b[g][f].prototype.widgetEventPrefix||f,widgetBaseClass:j},e);b.widget.bridge(f,b[g][f])};b.widget.bridge=function(f,e){b.fn[f]=function(i){var g=typeof i==="string",h=Array.prototype.slice.call(arguments,1),j=this;i=!g&&h.length?b.extend.apply(null,[true,i].concat(h)):i;if(g&&i.charAt(0)==="_"){return j}if(g){this.each(function(){var k=b.data(this,f),l=k&&b.isFunction(k[i])?k[i].apply(k,h):k;if(l!==k&&l!==d){j=l;return false}})}else{this.each(function(){var k=b.data(this,f);if(k){k.option(i||{})._init()}else{b.data(this,f,new e(i,this))}})}return j}};b.Widget=function(e,f){if(arguments.length){this._createWidget(e,f)}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(f,g){b.data(g,this.widgetName,this);this.element=b(g);this.options=b.extend(true,{},this.options,this._getCreateOptions(),f);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(f,g){var e=f;if(arguments.length===0){return b.extend({},this.options)}if(typeof f==="string"){if(g===d){return this.options[f]}e={};e[f]=g}this._setOptions(e);return this},_setOptions:function(f){var e=this;b.each(f,function(g,h){e._setOption(g,h)});return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(f,g,h){var k=this.options[f];g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();h=h||{};if(g.originalEvent){for(var e=b.event.props.length,j;e;){j=b.event.props[--e];g[j]=g.originalEvent[j]}}this.element.trigger(g,h);return !(b.isFunction(k)&&k.call(this.element[0],g,h)===false||g.isDefaultPrevented())}}})(jQuery);(function(f,g){f.ui=f.ui||{};var d=/left|center|right/,e=/top|center|bottom/,a="center",b=f.fn.position,c=f.fn.offset;f.fn.position=function(i){if(!i||!i.of){return b.apply(this,arguments)}i=f.extend({},i);var m=f(i.of),l=m[0],o=(i.collision||"flip").split(" "),n=i.offset?i.offset.split(" "):[0,0],k,h,j;if(l.nodeType===9){k=m.width();h=m.height();j={top:0,left:0}}else{if(l.setTimeout){k=m.width();h=m.height();j={top:m.scrollTop(),left:m.scrollLeft()}}else{if(l.preventDefault){i.at="left top";k=h=0;j={top:i.of.pageY,left:i.of.pageX}}else{k=m.outerWidth();h=m.outerHeight();j=m.offset()}}}f.each(["my","at"],function(){var p=(i[this]||"").split(" ");if(p.length===1){p=d.test(p[0])?p.concat([a]):e.test(p[0])?[a].concat(p):[a,a]}p[0]=d.test(p[0])?p[0]:a;p[1]=e.test(p[1])?p[1]:a;i[this]=p});if(o.length===1){o[1]=o[0]}n[0]=parseInt(n[0],10)||0;if(n.length===1){n[1]=n[0]}n[1]=parseInt(n[1],10)||0;if(i.at[0]==="right"){j.left+=k}else{if(i.at[0]===a){j.left+=k/2}}if(i.at[1]==="bottom"){j.top+=h}else{if(i.at[1]===a){j.top+=h/2}}j.left+=n[0];j.top+=n[1];return this.each(function(){var s=f(this),u=s.outerWidth(),r=s.outerHeight(),t=parseInt(f.curCSS(this,"marginLeft",true))||0,q=parseInt(f.curCSS(this,"marginTop",true))||0,w=u+t+parseInt(f.curCSS(this,"marginRight",true))||0,x=r+q+parseInt(f.curCSS(this,"marginBottom",true))||0,v=f.extend({},j),p;if(i.my[0]==="right"){v.left-=u}else{if(i.my[0]===a){v.left-=u/2}}if(i.my[1]==="bottom"){v.top-=r}else{if(i.my[1]===a){v.top-=r/2}}v.left=parseInt(v.left);v.top=parseInt(v.top);p={left:v.left-t,top:v.top-q};f.each(["left","top"],function(z,y){if(f.ui.position[o[z]]){f.ui.position[o[z]][y](v,{targetWidth:k,targetHeight:h,elemWidth:u,elemHeight:r,collisionPosition:p,collisionWidth:w,collisionHeight:x,offset:n,my:i.my,at:i.at})}});if(f.fn.bgiframe){s.bgiframe()}s.offset(f.extend(v,{using:i.using}))})};f.ui.position={fit:{left:function(h,i){var k=f(window),j=i.collisionPosition.left+i.collisionWidth-k.width()-k.scrollLeft();h.left=j>0?h.left-j:Math.max(h.left-i.collisionPosition.left,h.left)},top:function(h,i){var k=f(window),j=i.collisionPosition.top+i.collisionHeight-k.height()-k.scrollTop();h.top=j>0?h.top-j:Math.max(h.top-i.collisionPosition.top,h.top)}},flip:{left:function(i,k){if(k.at[0]===a){return}var m=f(window),l=k.collisionPosition.left+k.collisionWidth-m.width()-m.scrollLeft(),h=k.my[0]==="left"?-k.elemWidth:k.my[0]==="right"?k.elemWidth:0,j=k.at[0]==="left"?k.targetWidth:-k.targetWidth,n=-2*k.offset[0];i.left+=k.collisionPosition.left<0?h+j+n:l>0?h+j+n:0},top:function(i,k){if(k.at[1]===a){return}var m=f(window),l=k.collisionPosition.top+k.collisionHeight-m.height()-m.scrollTop(),h=k.my[1]==="top"?-k.elemHeight:k.my[1]==="bottom"?k.elemHeight:0,j=k.at[1]==="top"?k.targetHeight:-k.targetHeight,n=-2*k.offset[1];i.top+=k.collisionPosition.top<0?h+j+n:l>0?h+j+n:0}}};if(!f.offset.setOffset){f.offset.setOffset=function(l,i){if(/static/.test(f.curCSS(l,"position"))){l.style.position="relative"}var k=f(l),n=k.offset(),h=parseInt(f.curCSS(l,"top",true),10)||0,m=parseInt(f.curCSS(l,"left",true),10)||0,j={top:(i.top-n.top)+h,left:(i.left-n.left)+m};if("using" in i){i.using.call(l,j)}else{k.css(j)}};f.fn.offset=function(h){var i=this[0];if(!i||!i.ownerDocument){return null}if(h){return this.each(function(){f.offset.setOffset(this,h)})}return c.call(this)}}}(jQuery));(function(b,c){if(booking.env.b_site_experiment_omni_search){var a={appendTo:"#frm .where .field",position:{my:"left top",at:"left bottom",collision:"none",offset:"0 -5"},delay:300,minLength:1,source:null}}else{var a={appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null}}b.widget("ui.autocomplete",{options:a,_create:function(){var d=this,f=this.element[0].ownerDocument,e;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(g){if(d.options.disabled||d.element.attr("readonly")){return}e=false;var h=b.ui.keyCode;switch(g.keyCode){case h.PAGE_UP:d._move("previousPage",g);break;case h.PAGE_DOWN:d._move("nextPage",g);break;case h.UP:d._move("previous",g);g.preventDefault();break;case h.DOWN:d._move("next",g);g.preventDefault();break;case h.ENTER:case h.NUMPAD_ENTER:if(d.menu.active){e=true;g.preventDefault()}else{d.close(g);if(d.xhr){d.xhr.abort()}break}case h.TAB:if(!d.menu.active){return}d.menu.select(g);break;case h.ESCAPE:d.element.val(d.term);booking.env.autocompleteESC=true;d.close(g);break;default:if(booking.env.b_site_experiment_omni_search&&d.element.val().length>3){b(".where").removeClass("has_omni_error");b(".where .omni_error").remove()}if(g.keyCode==h.BACKSPACE&&d.element.val().length<=d.options.minLength){if(d.xhr){d.xhr.abort()}}clearTimeout(d.searching);d.searching=setTimeout(function(){if(d.term!=d.element.val()){d.selectedItem=null;d.search(null,g)}},d.options.delay);break}}).bind("keypress.autocomplete",function(g){if(e){e=false;g.preventDefault()}}).bind("focus.autocomplete",function(){if(d.options.disabled){return}d.selectedItem=null;d.previous=d.element.val()}).bind("blur.autocomplete",function(g){if(d.options.disabled){return}clearTimeout(d.searching);d.closing=setTimeout(function(){d.close(g);d._change(g)},150)});this._initSource();if(this.options&&this.options.delay){this.options.orig_delay=this.options.delay}this.response=function(){return d._response.apply(d,arguments)};this.menu=b("<ul></ul>").addClass("ui-autocomplete").appendTo(b(this.options.appendTo||"body",f)[0]).mousedown(function(g){var h=d.menu.element[0];if(!b(g.target).closest(".ui-menu-item").length){setTimeout(function(){b(document).one("mousedown",function(i){if(i.target!==d.element[0]&&i.target!==h&&!b.ui.contains(h,i.target)){d.close()}})},1)}setTimeout(function(){clearTimeout(d.closing)},13)}).menu({focus:function(h,i){var g=i.item.data("item.autocomplete");if(false!==d._trigger("focus",h,{item:g})){if(/^key/.test(h.originalEvent.type)){if(g&&g.value){d.element.val(g.value)}}}},selected:function(i,j){if(typeof(j.item)!=="undefined"&&j.item!==null){var h=j.item.data("item.autocomplete");var g=d.previous;if(d.element[0]!==f.activeElement){d.element.focus();d.previous=g;setTimeout(function(){d.previous=g},1)}if(false!==d._trigger("select",i,{item:h})){if(typeof(h)!=="undefined"){d.element.val(h.value)}}d.term=d.element.val();d.close(i);d.selectedItem=h}},blur:function(g,h){if(d.menu.element.is(":visible")&&(d.element.val()!==d.term)){d.element.val(d.term)}}}).zIndex(this.element.zIndex()+2000).css({top:0,left:0}).hide().data("menu");if(b.fn.bgiframe){this.menu.element.bgiframe()}if(booking.env.search_autocomplete_with_search_history){window.showSearchHistory=(function(h){var g=h;return function(){g._suggest({searchHistory:window.booking.env.history_search_string})}})(this)}},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();b.Widget.prototype.destroy.call(this)},_setOption:function(d,e){b.Widget.prototype._setOption.apply(this,arguments);if(d==="source"){this._initSource()}if(d==="appendTo"){this.menu.element.appendTo(b(e||"body",this.element[0].ownerDocument)[0])}},_initSource:function(){var f=this,e={},i,j,g,d,h=true;if(b.isArray(this.options.source)){j=this.options.source;this.source=function(l,k){k(b.ui.autocomplete.filter(j,l.term))}}else{if(typeof this.options.source==="string"){g=this.options.source;this.source=function(l,k){var m=function(n){k(n)};if(f.xhr){f.xhr.abort()}i=g+JSON.stringify(l);if(i in e){m(e[i]);f.xhr=null}else{if(f.options.disable){return}if(booking.env.b_site_experiment_omni_search){l.give_cc1=1;l.show_img=1;l.img_size="64x64";l.name_breakdown=1}f.xhr=b.getJSON(g,l,function(o,n,p){if(typeof o!=="undefined"&&o!==null&&o.shut_up){f.options.disable=true}f.options.delay=f.options.orig_delay;if(p===f.xhr){e[i]=o;m(o)}f.xhr=null});if(booking.env.search_autocomplete_delay_on_failure){f.element.ajaxError(function(){f.options.delay=Math.floor(f.options.delay*=1.5)})}}}}else{this.source=this.options.source}}},search:function(e,d){e=e!=null?e:this.element.val();this.term=this.element.val();if(e.length<this.options.minLength){return this.close(d)}clearTimeout(this.closing);if(this._trigger("search",d)===false){return}return this._search(e)},_search:function(e){this.element.addClass("ui-autocomplete-loading");var d=this.options.extraParams||{};d.dest_type=booking.env.search_autocomplete_params.dest_type;d.term=e;this.source(d,this.response)},_response:function(d){if(d&&d.length){d=this._normalize(d);this._suggest(d);this._trigger("open")}else{if(booking.env.b_site_experiment_search_autocomplete_no_results_msg||(((b.isEmptyObject(d)&&booking.env.b_site_experiment_search_autocomplete_no_results_msg)||!b.isEmptyObject(d))&&booking.env.b_site_experiment_search_autocomplete_partitions)){if(booking.env.search_autocomplete_with_search_history){d.searchHistory=b.ui.autocomplete.filter(booking.env.history_search_string,this.element.val())}this._suggest(d);this._trigger("open")}else{this.close()}}this.element.removeClass("ui-autocomplete-loading")},close:function(d){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",d);this.menu.element.hide();this.menu.deactivate();if(typeof(d)!=="undefined"&&booking.env.autocompleteESC){d.preventDefault();booking.env.autocompleteESC=false}}},_change:function(d){if(this.previous!==this.element.val()){this._trigger("change",d,{item:this.selectedItem})}},_normalize:function(d){if(d&&d.length&&d[0].label&&d[0].value){return d}return b.map(d,function(e){if(typeof e==="string"){return{label:e,value:e}}return b.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var g=this.menu.element.empty().zIndex(this.element.zIndex()+2000),f=b(g),h=booking.env.autocomplete_skip_suggestions,d="";this._renderMenu(g,e);if((e.length===0||(b.isEmptyObject(e)&&booking.env.b_site_experiment_search_autocomplete_partitions))&&booking.env.b_site_experiment_search_autocomplete_no_results_msg){h=booking.env.autocomplete_no_results;d='style="margin: 0;border: none;"'}f.append('<li id="autocomplete_skip" class="ui-menu-item" role="menuitem" '+d+'><a id="autocomplete_skip_a" class="ui-corner-all" tabindex="-1">'+h+"</a></li>");this.menu.deactivate();this.menu.refresh();this.menu.element.show().position(b.extend({of:this.element},this.options.position));if(!e.length&&(booking.env.b_action==="hotel"||booking.env.b_action==="searchresults")&&booking.env.b_site_experiment_search_autocomplete_partitions){f.removeClass("ui-autocomplete").css({width:(booking.env.b_is_ie6||booking.env.b_is_ie7)?"40%":"auto"})}else{this._resizeMenu()}},_resizeMenu:function(){var d=this.menu.element;d.outerWidth(this.element.outerWidth())},_renderMenu:function(n,p){var r=this,q=false;if(booking.env.b_site_experiment_search_autocomplete_partitions&&!booking.env.b_site_experiment_omni_search){var k,g,f,o,h,m=0,e=["city","airport","district","region","country","hotel","landmark","searchHistory"],d=e.length;for(k=0;k<d;k++){h=e[k];if(p[h]){m++;o=r._normalize(p[h]);f=o.length;for(g=0;g<f;g++){if(g===0){o[0].header=h;if(m===1){o[0].first=1}}if(booking.env.user_has_search_history&&h==="searchHistory"&&!q){q=true;n.append('<li class="ui-menu-item" role="menuitem"><strong style="background:#ddd;display:block;font-weight:normal;color:#666;font-size:0.9em;padding:5px;">'+booking.env.search_you_recently_searched+"</strong></li>")}r._renderItem(n,o[g],g)}}}}else{if(booking.env.b_site_experiment_omni_search){b.each(p,function(i,j){r._renderItem(n,j,i)})}else{b.each(p,function(i,j){r._renderItem(n,j)})}}},_renderItem:function(m,s,v){var i=s.label,o="",d="",p="",r="",e="",u=(booking.env.b_site_experiment_search_autocomplete_partitions===2);if(booking.env.b_site_experiment_omni_search){var x;var h=b('<a href="#"></a>');var i=b('<div class="item"></div>');var t=b('<span class="flag_16"></span>');var n=b('<span class="item_geo"></span>');var f=s.cc1?s.cc1[0]:s.co_code;var e=b('<span class="item_count"></span>');var g=b('<div class="item_title"></div>');m.parent(".field").addClass("autocomplete_shown");m.addClass("omni_autocomplete");if(s.name){g.text(s.name);i.append(g)}t.addClass("flag_16_"+f);if(s.img_url){var j;if(s.type=="ho"){j=s.img_url.replace("64x64","square60")}else{j=s.img_url}x='<img src="'+j+'" />'}else{if(s.type=="ci"){x='<img src="'+booking.env.icons+'/default_city.jpg" />'}else{if(s.type=="ai"){x='<img src="'+booking.env.icons+'/airport60.gif" />'}else{if(s.type=="la"){x='<img src="'+booking.env.icons+'/landmark60.gif" />'}else{if(s.type=="di"){x='<img src="'+booking.env.icons+'/district60.gif" />'}else{if(s.type=="ho"){x='<img src="'+booking.env.icons+'/hotel60.gif" />'}else{if(s.type=="co"){x='<img src="'+booking.env.icons+'/country60.gif" />'}else{if(s.type=="is"){x='<img src="'+booking.env.icons+'/island60.gif" />'}else{if(s.type=="re"){x='<img src="'+booking.env.icons+'/region60.gif" />'}else{x='<img src="'+booking.env.icons+'/default_city.jpg" />'}}}}}}}}}if(s.region){n.append(s.region+", "+s.country)}else{n.append(s.country)}if(v<2){n.append(" ("+s.dest_type+")");i.append(t).append(n)}else{h.addClass("item_secondary");g.append(" ("+s.dest_type+")");i.append(t)}if(s.hotels){var w=(s.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels);e.append(s.hotels+" "+w);i.append(e)}h.append(x).append(i);return b("<li></li>").append(h).data("item.autocomplete",s).appendTo(m)}else{if(booking.env.b_site_experiment_search_autocomplete_partitions){if(booking.env.search_autocomplete_with_search_history){var q=s.header,l="",k="";if(q){if(q=="searchHistory"){if(s.first){p="search_history_start"}if(booking.env.b_lang=="ar"||booking.env.b_lang=="he"){o='<span class="autocomplete_header autocomplete_h_'+s.dest_type+'" style="float:left;position:static;">'+booking.env.autocomplete_search_history_categories[s.dest_type]+"</span>"}else{o='<span class="autocomplete_header autocomplete_h_'+s.dest_type+'" style="float:right;position:static;">'+booking.env.autocomplete_search_history_categories[s.dest_type]+"</span>"}}else{o='<span class="autocomplete_header autocomplete_h_'+s.dest_type+'" >'+booking.env.autocomplete_categories[s.header]+"</span>";d=(s.first)?"":' style="border-top: 1px solid #CCC;"'}}if(u&&q!="searchHistory"){if(s.hotels===0){booking.env.trackExperiment(booking.env.js_experiment_tracking.search_autocomplete_hotels_nearby);e='<span class="label" style="position: static;color:#888;">&nbsp;('+(booking.env.autocomplete_show_hotels_nearby?booking.env.autocomplete.hotels_nearby:("0 "+booking.env.autocomplete.hotels))+")</span>"}else{e='<span class="label" style="position: static;color:#888;">&nbsp;('+s.hotels+" "+(s.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels)+")</span>"}}else{if(q=="searchHistory"){if(s.has_dates){l='<span class="ck_i_d">'+s.checkin_day+'</span> <span class="ck_i_m" style="display:none;">'+s.checkin_month_number+"</span>"+s.checkin_month+' <span class="ck_i_y">'+s.checkin_year+'</span> - <span class="ck_o_d">'+s.checkout_day+'</span> <span class="ck_o_m" style="display:none;">'+s.checkout_month_number+"</span> "+s.checkout_month+' <span class="ck_o_y">'+s.checkout_year+"</span>";e='<span class="label" style="position: static;color:#888;font-size:0.9em;">&nbsp;'+l+"</span>"}k=" search_history_link"}}i=o+"<span>"+i+e+"</span>";r='class="partition_item'+k+'"'}else{if(s.header){o='<span class="autocomplete_header autocomplete_h_'+s.dest_type+'" >'+booking.env.autocomplete_categories[s.header]+"</span>";d=(s.first)?"":' style="border-top: 1px solid #CCC;"'}if(u){if(s.hotels===0){booking.env.trackExperiment(booking.env.js_experiment_tracking.search_autocomplete_hotels_nearby);e='<span class="label" style="position: static;color:#888;">&nbsp;('+(booking.env.autocomplete_show_hotels_nearby?booking.env.autocomplete.hotels_nearby:("0 "+booking.env.autocomplete.hotels))+")</span>"}else{e='<span class="label" style="position: static;color:#888;">&nbsp;('+s.hotels+" "+(s.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels)+")</span>"}}i=o+"<span>"+i+e+"</span>";r='class="partition_item"'}}else{if(s.hotels>0){i+="<span class='label'><i>&nbsp;</i>"+s.hotels+" "+(s.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels)+"</span>"}else{i+="<span class='label'><i>&nbsp;</i>"+booking.env.autocomplete.hotels_nearby+"</span>"}p=s.dest_type}return b('<li class="'+p+'"'+d+"></li>").data("item.autocomplete",s).append(b("<a "+r+">"+i+"</a>")).appendTo(m)}},_move:function(e,d){if(!this.menu.element.is(":visible")){this.search(null,d);return}if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)){this.element.val(this.term);this.menu.deactivate();return}this.menu[e](d)},widget:function(){return this.menu.element}});b.extend(b.ui.autocomplete,{escapeRegex:function(d){return d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(f,d){var e=new RegExp(b.ui.autocomplete.escapeRegex(d),"i");return b.grep(f,function(g){return e.test(g.label||g.value||g)})}})}(jQuery));(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length){return}c.preventDefault();b.select(c)});this.refresh()},refresh:function(){var c=this;var b=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");b.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(d){c.activate(d,a(this).parent())}).mouseleave(function(){c.deactivate()})},activate:function(e,d){this.deactivate();if(this.hasScroll()){var f=d.offset().top-this.element.offset().top,b=this.element.attr("scrollTop"),c=this.element.height();if(f<0){this.element.attr("scrollTop",b+f)}else{if(f>=c){this.element.attr("scrollTop",b+f-c+d.height())}}}this.active=d.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",e,{item:d})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(b){this.move("next",".ui-menu-item:first",b)},previous:function(b){this.move("prev",".ui-menu-item:last",b)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,d,c){if(!this.active){this.activate(c,this.element.children(d));return}var b=this.active[e+"All"](".ui-menu-item").eq(0);if(b.length){this.activate(c,b)}else{this.activate(c,this.element.children(d))}},nextPage:function(d){if(this.hasScroll()){if(!this.active||this.last()){this.activate(d,this.element.children(".ui-menu-item:first"));return}var e=this.active.offset().top,c=this.element.height(),b=this.element.children(".ui-menu-item").filter(function(){var f=a(this).offset().top-e-c+a(this).height();return f<10&&f>-10});if(!b.length){b=this.element.children(".ui-menu-item:last")}this.activate(d,b)}else{this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(c){if(this.hasScroll()){if(!this.active||this.first()){this.activate(c,this.element.children(".ui-menu-item:last"));return}var d=this.active.offset().top,b=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var e=a(this).offset().top-d+b-a(this).height();return e<10&&e>-10});if(!result.length){result=this.element.children(".ui-menu-item:first")}this.activate(c,result)}else{this.activate(c,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(b){this._trigger("selected",b,{item:this.active})}})}(jQuery));booking[sNSExperiments].search_autocomplete={priority:9,cur_ui_item:{},init:function(){var a=this,d=$("#destination"),c=d.closest("form"),j=c.find("fieldset"),f=false,e=false,b=false,h=false,g=function(){if(!booking.env.b_site_experiment_search_autocomplete_no_auto_cal){if(!booking.env.b_site_experiment_omni_search){booking[sNSStartup].calendar.openPopupCalendar($("#homein .calendarLink").get(0))}else{booking[sNSStartup].calendar.openPopupCalendar($(".calendarLink.checkin","#frm").get(0))}}},i=function(){if(booking.env.autocomplete_more_params){booking.env.trackExperiment(booking.env.autocomplete_more_params)}};$("#destination").keydown(function(k){if(k.keyCode!=13){a.cur_ui_item={}}});d.autocomplete({source:"/autocomplete",extraParams:booking.env.search_autocomplete_params,minLength:2,delay:booking.env.search_autocomplete_delay||200,max:10}).bind("autocompleteselect",function(k,l){if(l.item){h=true;a.cur_ui_item=l.item;if(typeof _gaq!="undefined"){booking.google.trackEvent("Click","Autocomplete",document.body.id)}if(!$("#availcheck").attr("checked")&&(parseInt($("#checkin_day").val(),10)===0&&parseInt($("#checkout_monthday").val(),10)===0)){setTimeout(function(){if(booking.env.search_autocomplete_with_search_history_clicked){booking.env.search_autocomplete_with_search_history_clicked=false;return}g()},25)}}}).bind("autocompleteopen",function(k,l){if($("#calendar_popup").length){booking[sNSStartup].calendar.closePopupCalendar()}if(f===false&&typeof _gaq!="undefined"){f=true;booking.google.trackEvent("View","Autocomplete",document.body.id)}});d.bind("focus",function(k,l){if(booking.env.search_autocomplete_with_search_history){showSearchHistory();$("#autocomplete_skip_a").hide()}if(booking.env.user_has_search_history){booking.env.trackExperiment(booking.env.js_experiment_tracking.search_autocomplete_with_search_history)}return false});if(booking.env.search_autocomplete_with_search_history){$(".search_history_link").live("click",function(m){if(!booking.env.user_has_dates){$sel_link=$(this);var l=$sel_link.find(".ck_i_y").text()+"-"+$sel_link.find(".ck_i_m").text(),k=$sel_link.find(".ck_o_y").text()+"-"+$sel_link.find(".ck_o_m").text();if(k&&l){booking.env.search_autocomplete_with_search_history_clicked=true}$("#checkin_year_month").val(l);$("#checkout_year_month").val(k);$("#checkin_day").val($sel_link.find(".ck_i_d").text());$("#checkout_monthday").val($sel_link.find(".ck_o_d").text())}booking.google.trackEvent(booking.google.clickTracker,"Search history in autocomplete","Click on history")})}$("#autocomplete_skip").live("click",function(){var o=$(this),l=(!booking.env.user_has_dates&&!$("#availcheck").attr("checked")&&(parseInt($("#checkin_day").val(),10)===0&&parseInt($("#checkout_monthday").val(),10)===0));d.autocomplete("close");a.cur_ui_item={};if(booking.env.b_site_experiment_search_autocomplete_no_results_msg){var k=$(".bigbluebutton",c);if(!l){var n=true,m=function(){k.animate({"background-color":"#003580"},function(){k.animate({"background-color":"#0896FF"});if(n){n=false;m()}})};m()}}else{if(typeof _gaq!="undefined"){booking.google.trackEvent("Click","Autocomplete Skip"+(booking.env.b_site_experiment_search_autocomplete_skip_copy?" v"+booking.env.b_site_experiment_search_autocomplete_skip_copy:""),document.body.id)}}if(l){g()}});c.bind("submit",function(l,m){var k=$("#destination");if(a.cur_ui_item.dest_type){j.find("input[name='dest_type'], input[name='dest_id']").remove();j.append($("<input>",{type:"hidden",name:"dest_type",value:a.cur_ui_item.dest_type}));j.append($("<input>",{type:"hidden",name:"dest_id",value:a.cur_ui_item.dest_id}));j.append($("<input>",{type:"hidden",name:"ac_pageview_id",value:booking.env.pageview_id}))}else{if((k.val()==booking.env.sess_dest_fullname)&&booking.env.sess_dest_id&&booking.env.sess_dest_type&&booking.env.normalize_sbox_value){j.find("input[name='dest_type'], input[name='dest_id']").remove();j.append($("<input>",{type:"hidden",name:"dest_type",value:booking.env.sess_dest_type}));j.append($("<input>",{type:"hidden",name:"dest_id",value:booking.env.sess_dest_id}));j.append($("<input>",{type:"hidden",name:"ac_pageview_id",value:booking.env.pageview_id}))}}});return true}};