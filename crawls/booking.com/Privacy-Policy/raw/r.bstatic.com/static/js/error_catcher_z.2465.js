function createCookie(c,d,e){var a="";if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)}function scriptsTrackingString(){var c,b,d="{",a=booking.env.scripts_tracking;for(c in a){if(a.hasOwnProperty(c)){b=a[c];d+='"'+c+'":{"loaded":'+!!b.loaded+',"run":'+!!b.run+"},"}}d=d.slice(0,d.length-1)+"}";return"&scripts="+encodeURIComponent(d)}var report_error;function send_error_report(){if(report_error&&document.getElementById&&document.getElementById("req_info")){report_error(document.getElementById("req_info").innerHTML);report_error=null}else{if(report_error){setTimeout(send_error_report,100)}}}window.onabort=function(){document.ff_kill=true};function handleBeforeUnload(){document.ff_kill=true}if(window.addEventListener){if(typeof window.onbeforeunload!=="undefined"){window.addEventListener("beforeunload",handleBeforeUnload,false)}}window.onerror=function(j,b,f){var d=readCookie("error_catcher");if(typeof document.ff_kill!=="undefined"&&document.ff_kill===true&&navigator.userAgent.search("Firefox")!=-1&&j==="Error loading script"){return false}if(d=="kill"||(typeof document.kill!="undefined"&&document.kill===true)){return false}if(typeof window.booking_error_count==="undefined"||isNaN(window.booking_error_count)||isNaN(window.booking_error_previous)){window.booking_error_count=0;window.booking_error_previous=0;window.booking_error_sent=0}if(window.booking_error_sent>5){return}window.booking_error_count++;var g;if(window.XMLHttpRequest){try{g=new window.XMLHttpRequest()}catch(h){g=false}}else{var a=new Array("Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP");for(var c=0;c<a.length;c++){try{g=new ActiveXObject(a[c]);window.status=c;break}catch(h){g=false}}}if(g){report_error=function(k){var i="error="+encodeURIComponent(j)+"&pid="+encodeURIComponent(booking.env.pageview_id);if(typeof j==="object"){var e="";if(j.srcElement&&j.srcElement.src){e+="scriptSrc="+j.srcElement.src}else{e+="scriptSrc=inline"}i="error="+encodeURIComponent(j+" :: "+e)+"&pid="+encodeURIComponent(booking.env.pageview_id)}i+="&url="+encodeURIComponent(b!==""&&typeof b!=="undefined"?b:location.href.split("?")[0]);if(typeof PageLoadTimer!=="undefined"){var l="&since="+(+new Date()-PageLoadTimer.start)+"&ready="+(PageLoadTimer.document_ready-PageLoadTimer.start?PageLoadTimer.document_ready-PageLoadTimer.start:0)+"&loaded="+(PageLoadTimer.window_load-PageLoadTimer.start?PageLoadTimer.window_load-PageLoadTimer.start:0);i+=l}if(booking.env.enable_scripts_tracking){i+=scriptsTrackingString()}if(Number(f)){i+="&lno="+Number(f)}if(k){i+="&info="+k}i+="&errc="+window.booking_error_count+"&errp="+window.booking_error_previous;window.booking_error_previous=window.booking_error_count;g.open("GET","/js_errors?"+i,true);g.setRequestHeader("Content-type","application/x-www-form-urlencoded");g.setRequestHeader("Content-length",0);g.setRequestHeader("Connection","close");g.onreadystatechange=function(){if(g.readyState==4&&(g.status==503||g.responseText=="shut up")){document.kill=true;createCookie("error_catcher","kill",30)}};g.send();window.booking_error_sent++};send_error_report()}return false};