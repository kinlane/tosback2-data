/* generated Thu Jan 31 09:44:49 EST 2013 */

var who;var ESC=27;var TAB=9;var ALT=18;var UP=38;var DOWN=40;var LEFT=37;var RIGHT=39;var ENTER=13;var SHIFT=16;var lastKey=0;function keyDown(c){var b=document.all?window.event.keyCode:c.which;var a=String.fromCharCode(b).toLowerCase();lastKey=b;if(who!=null){who(b,a)}}function keysInit(a){document.onkeydown=keyDown;who=a;if(document.layers){document.captureEvents(Event.KEYPRESS)}}function noEnter(){return lastKey!=ENTER}var _toolong,_lastsent,_timeout,_itemCount,_idletimer,_cursel,_target;var _prevsel;var _inputcode=null,_searchtype;var _targetBG;var _input=null;var _numChoices;var sbHttp=null;var _stop;var _chars=1;var _sboxminwidth;var _clientsbcb;var _sbcountrycode;var _kayakSmartUrl="/m/smarty?";var _forceSelection=true;var _forceSingle=false;var _sbextraargs="";function cancelSmartBox(){keysInit(null);if((_forceSelection||(_forceSingle&&_itemCount==1))&&_inputcode!=null&&_inputcode.value!=null&&_inputcode.value.length<1){_setValue(0)}abortSmartBox();closeSmartBox();_input=null;_stop=false}function abortSmartBox(){if(sbHttp!=null){if(sbHttp.inprogress){sbHttp.cancelRequest()}}}function closeSmartBox(){if(_target!=null){_target.style.display="none";_target.innerHTML=""}if(_targetBG!=null){_targetBG.style.display="none"}_stop=true}function initSmartBox(j,n,g,m,f,l,a,c,b,d){_inputcode=_input=null;if(c!=null){_forceSelection=c}else{_forceSelection=true}if(d!=null){_forceSingle=d}else{_forceSingle=false}if(a){_kayakSmartUrl=a}else{_kayakSmartUrl="/m/smarty?"}if(b){_sbextraargs=b}else{_sbextraargs=""}cancelSmartBox();var k=document.getElementsByTagName("body")[0];_target=document.getElementById("smartbox");if(!_target){_target=document.createElement("div");_target.id="smartbox";_target.style.zIndex=5001;_target.style.position="absolute";_target.style.display="none";_target.style.width="auto";k.appendChild(_target)}_target.className="smartbox smartbox-"+g;_targetBG=document.getElementById("smartboxBG");if(!_targetBG){_targetBG=document.createElement("iframe");_targetBG.id="smartboxBG";_targetBG.style.zIndex=5000;_targetBG.setAttribute("scrolling","no");_targetBG.setAttribute("frameborder","0");_targetBG.style.position="absolute";_targetBG.style.display="none";k.appendChild(_targetBG)}try{j.setAttribute("autocomplete","off");j.setAttribute("autocapitalize","off");j.setAttribute("autocorrect","off")}catch(e){}if(isNaN(parseInt(f))){_sboxminwidth=-1}else{_sboxminwidth=parseInt(f)}keysInit(keypressed);_input=j;_inputcode=n;_searchtype=g;_lastsent="";_timeout=m;_clientsbcb=l;var h=jq(j).offset();_target.style.top=(h.top+j.offsetHeight+1)+"px";_target.style.left=h.left+"px";if(_idletimer){clearTimeout(_idletimer);_idletimer=""}_toolong=false;_lastsent="";_cursel=-1;_prevsel=-1;_stop=false}function _runSearch(a){if(_lastsent==_input.value||_input.value.length<_chars){return}window.status="searching...";_lastsent=_input.value;var b="where="+encodeURIComponent(_lastsent);b+="&lc=en&lc_cc=GB";if(_searchtype=="air"){b+="&s=1"}else{if(_searchtype=="car"){b+="&s=2"}else{if(_searchtype=="hotel"){b+="&s=3"}else{if(_searchtype=="any"){b+="&s=4"}else{if(_searchtype=="crc"){b+="&s=5"}else{if(_searchtype=="crcg"){b+="&s=6"}else{if(_searchtype=="deal"){b+="&s=7"}else{if(_searchtype=="crcga"){b+="&s=8"}else{if(_searchtype=="hotelname"){b+="&s=11"}else{b+="&s="+_searchtype}}}}}}}}}if(_sbcountrycode!=null&&_sbcountrycode.length>0){b+="&cc="+_sbcountrycode}b+="&f=h";b+=_sbextraargs;jq.post(_kayakSmartUrl,b,function(e){window.status="";if(_input==a){_target.innerHTML=e;var d=_getSmartboxList();if(d&&d.childNodes){_itemCount=d.childNodes.length}else{_itemCount=0}if(_itemCount>0){for(var c=0;c<d.childNodes.length;c++){li=d.childNodes[c];li.onmousedown=_sbMouseDown;li.onmouseover=_sbMouseOver;li.onmouseout=_sbMouseOut}_target.style.width="auto";_showChoices()}else{_hideChoices()}_cursel=(_forceSelection||(_forceSingle&&_itemCount==1)?0:-1);_prevsel=_cursel;selChoice(_cursel)}},"text")}function setSbCountryCode(a){_sbcountrycode=a}function clearSbCountryCode(){_sbcountrycode=null}function getSbIndex(e){var f=_getSmartboxList();var c=0;if(f&&f.childNodes){for(var b=0;b<f.childNodes.length;b++){var d=f.childNodes[b];if(e==d){c=b;break}var g=false;for(var a=0;a<d.childNodes.length;a++){if(e==d.childNodes[a]){c=b;g=true;break}}if(g){break}}}return c}function _sbMouseOut(a){var b=a?a.target:this;_cursel=-1;selChoice(-1)}function _sbMouseDown(a){var b=a?a.target:this;_cursel=getSbIndex(b);_setValue(_cursel);closeSmartBox()}function _sbMouseOver(a){var b=a?a.target:this;_cursel=getSbIndex(b);selChoice(_cursel)}function _showChoices(){_target.style.display="inline";if(_sbShowBGIframe()){_targetBG.style.display="inline"}if(_sboxminwidth>_target.offsetWidth){_targetBG.style.width=_sboxminwidth+"px";_target.style.width=_sboxminwidth+"px"}else{_targetBG.style.width=_target.offsetWidth+"px";_target.style.width=_target.offsetWidth+"px"}_targetBG.style.height=_target.offsetHeight+"px";_targetBG.style.top=_target.style.top;_targetBG.style.left=_target.style.left}function _hideChoices(){_target.style.display="none";_targetBG.style.display="none"}function _getSmartboxList(){var b;if(_target.childNodes){for(var a=0;a<_target.childNodes.length;a++){var c=_target.childNodes[a];if(c.nodeName=="UL"){b=c;break}}}return b}function _setValue(c){if(c<0){_lastsent="";try{var j=(_inputcode.value!="");_inputcode.value="";if(j){_clientsbcb(null)}}catch(g){}}else{if(_itemCount>0){var h=_getSmartboxList();if(h==null||h.childNodes==null){return}var d=h.childNodes[c];var f=d.id.split("-");var a;if(f.length>1){a=f[1]}_inputcode.value=a;if(d.innerText!=undefined){_input.value=d.innerText}else{_input.value=d.textContent}try{if(typeof _clientsbcb=="function"){var k=new Object();k.str=d.innerHTML;k.type=f[0];k.id=a;k.inputField=_input;k.inputCodeField=_inputcode;if(f.length>2){k.hc=f[2]}if(f.length>3){if(k.type=="hotel"){k.hid=f[3]}else{k.lmid=f[3]}}_clientsbcb(k)}}catch(b){}}}}function selChoice(a){var c=_getSmartboxList();if(c&&c.childNodes&&c.childNodes.length>0){if(_prevsel>=0){var b=c.childNodes[_prevsel];if(b.className){b.className=b.className.replace(/ *smartbox-hover/,"")}else{b.className=""}}if(a>=0){if(c.childNodes.length>0){var d=c.childNodes[a];d.className=d.className+" smartbox-hover"}_prevsel=a}}}var _pressed=0;function keypressed(a,b){clearTimeout(_idletimer);_pressed=new Date().getTime();switch(a){case LEFT:case UP:_cursel=_cursel-1;if(_cursel<0){_cursel=0}selChoice(_cursel);break;case RIGHT:case DOWN:_cursel++;if(_cursel>=_itemCount){_cursel=_itemCount-1}selChoice(_cursel);break;case ENTER:if(_itemCount>0){_setValue(_cursel);closeSmartBox()}break;case ESC:closeSmartBox();break;case TAB:if(_cursel>=0&&_cursel<_itemCount){_setValue(_cursel)}case ALT:case SHIFT:break;default:_setValue(-1);_idletimer=self.setTimeout("idle()",_timeout)}}function sbNoEnter(){var a=(_stop==null||_stop!=true);_stop=false;return(a?true:noEnter())}function idle(a){if(noEnter()){_input.focus();var b=new Date().getTime();if(b-_pressed>_timeout){clearTimeout(_idletimer);_typer(_input)}else{clearTimeout(_idletimer);_idletimer=self.setTimeout("idle()",_timeout)}}}function _typer(a){if((_input!=null)&&_input.value.length>0){abortSmartBox();_runSearch(a)}else{_setValue(-1);closeSmartBox()}}function _sbShowBGIframe(){return(window.opera)?false:true}function fireTimer(b){var c=b;function a(){if(c.inprogress){c._abortRequest(c)}}c._timeoutID=window.setTimeout(a,c.timeoutMS)}function R9HTTPXml(){}R9HTTPXml.prototype={uservars:null,url:null,postbuffer:null,xmlhttp:null,inprogress:false,thecallback:null,timeoutMS:-1,_timeoutID:null,cancelled:false,init:function(c,b,a){this.url=c;this.uservars=a;this.postbuffer=b;if(window.XMLHttpRequest){this.xmlhttp=new XMLHttpRequest()}else{if(window.ActiveXObject){this.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}else{window.alert("Sorry your browser is not compatible with this functionality")}}},setTimeout:function(a){this.timeoutMS=a},asyncGET:function(a){if(this.inprogress){throw new Error("Call in progress")}var b=this;if(a==null){a=b}this.thecallback=a;var c=null;if(this.postbuffer==null){this.xmlhttp.open("GET",this.url,true)}else{this.xmlhttp.open("POST",this.url,true);this.xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");c=this.postbuffer}this.xmlhttp.onreadystatechange=function(){b.stateChangeCallback(b)};this.inprogress=true;this.cancelled=false;this.xmlhttp.send(c);if(this.timeoutMS>0){fireTimer(this)}},stateChangeCallback:function(b){switch(b.xmlhttp.readyState){case 1:try{if(!b.cancelled){b.thecallback.onInit()}}catch(c){}break;case 2:try{if(b.xmlhttp.status!=200&&b.xmlhttp.status!=0){if(!b.cancelled){window.status="error";b.thecallback.onError(b.xmlhttp.status,b.xmlhttp.statusText,b)}b.xmlhttp.abort();b.inprogress=false}}catch(c){}break;case 3:var a;try{try{a=b.xmlhttp.getResponseHeader("Content-Length")}catch(c){a=NaN}if(!b.cancelled){window.status="ping";b.thecallback.onProgress(b.xmlhttp.responseText,a)}}catch(c){}break;case 4:try{if(b._timeoutID){window.clearTimeout(b._timeoutID);b._timeoutID=null}if(b.inprogress){b.inprogress=false;if(!b.cancelled){window.status="done";b.thecallback.onLoad(b)}}}catch(c){}finally{b.inprogress=false}break}},cancelRequest:function(){var a=this;this.cancelled=true;if(this._timeoutID){window.clearTimeout(this._timeoutID);this._timeoutID=null}a._abortRequest(a)},_abortRequest:function(b){if(b.xmlhttp!=null){try{b.xmlhttp.abort();if(b.inprogress){window.status="abort";b.thecallback.onError("timeout","Your request has timed out.",b)}}catch(a){}b.cancelled=true;b.inprogress=false}},getText:function(){return this.xmlhttp.responseText},getXML:function(){return this.xmlhttp.responseXML},getTags:function(a){try{return this.xmlhttp.responseXML.getElementsByTagName(a)}catch(b){return null}},getOperaText:function(d,g,b){try{var a=d.getElementsByTagName(g)[b];if(a){var h="",c=0,f;while(f=a.childNodes[c]){h+=f.nodeValue;c++}return h}else{return""}}catch(j){opera.postError("exception: "+j)}},getOpera:function(b,c,a){return"foo"},getTagText:function(c,d,b){var a=c.getElementsByTagName(d)[b];if(a){if(a.childNodes.length>1){return a.childNodes[1].nodeValue}else{if(a.childNodes.length==1){return a.firstChild.nodeValue}}}else{return""}},onProgress:function(b,a){},onError:function(b,a,d){},onLoad:function(a){},onInit:function(a){}};var R9CalDayOfWeek=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var R9CalDaysInMonth=[31,0,31,30,31,30,31,31,30,31,30,31];var R9CalMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var R9CalMonthRecords=[];function R9Cal_getDaysInMonth(a,b){if(a==2){return(b%4==0)?29:28}return R9CalDaysInMonth[a-1]}function R9Cal(){this.dayOffset=0;this.lastDay=0;this.monthShown=-100;this.totalMonths=0;this.monthsDomID;this.firstYear=0;this.lastYear=0;this.firstMonthAllowed=0;this.lastMonthAllowed=0;this.thisYear=0;this.thisMonth=0;this.thisDay=0;this.allowPast=false;this.monthWidth=0;this.highlighted={year:0,month:0,day:0};this.marked={year:0,month:0,day:0};return true}SCOPE=(function(){function c(){var f=document.createElement("p");return(f.innerText!=undefined)}var b;if(c()){b=function(f,g){f.innerText=g}}else{b=function(f,g){f.textContent=g}}function a(f,j,g){var h=document.createElement(f);if(j){b(h,j)}if(g){h.className=g}return h}function e(h,f,k,g){var j=document.createElement(f);if(k){b(j,k)}if(g){j.className=g}h.appendChild(j);return j}function d(f,g){f.appendChild(g)}R9Cal.prototype.isOldDate=function(h,f,g){if(g<this.thisYear){return true}if(g==this.thisYear){if(h<this.thisMonth){return true}if(h==this.thisMonth){return f<this.thisDay}}return false};R9Cal.prototype.drawMonth=function(n,q){var k=q.firstOffset;for(var f=0;f<6;++f){var j=f==5?"week lastWeek":"week";if(jq.browser.mozilla){j+=" firefoxWeek"}else{if(jq.browser.msie&&jq.browser.version.substr(0,1)=="8"){j+=" ie8Week"}}var h=a("div",null,j);for(var m=0;m<7;++m){var l,g,o;if(k<=0){l=q.lastMonEnd+k;o="prevMon"}else{if(k>q.thisMonEnd){l=k-q.thisMonEnd;o="nextMon"}else{l=k;o=null}}if(!this.allowPast&&this.isOldDate(q.month,l,q.year)){o="oldDate"}e(h,"p",l,o);++k}d(n,h)}};R9Cal.prototype.setupMonth=function(n,k,f,m,j,l,o){var h={firstOffset:k,lastMonEnd:f,thisMonEnd:m,month:j,year:l,isValid:o,isDrawn:false};R9CalMonthRecords.push(h);var g=k+6*7;this.dayOffset=(g-m-1)%7-6;this.lastDay=m};R9Cal.prototype.makeDowHeader=function(){var f=a("div",null,"dayHeader");jq.each(R9CalDayOfWeek,function(){d(f,a("p",this.charAt(0)))});return f};R9Cal.prototype.drawControls=function(j,g){var f=document.createElement("div");f.className="calControls";if(g){f.className+=" singleMonthCalControls"}var k=document.createElement("a");k.id="gotoPrev";k.href="#";jq(k).html("&laquo;");var h=document.createElement("a");h.id="gotoNext";h.href="#";jq(h).html("&raquo;");var l=document.createElement("a");l.id="closeCal";l.href="#";jq(l).html("&times;");f.appendChild(k);f.appendChild(l);f.appendChild(h);j.appendChild(f)};R9Cal.prototype.drawMonths=function(m,j,x,u,l,z){if(x==null){x=false}if(z==null){z=false}var s=new Date();this.thisYear=s.getFullYear();this.thisMonth=s.getMonth()+1;this.thisDay=s.getDate();this.firstYear=u;this.lastYear=l;this.totalMonths=(l-u+1)*12;this.monthShown=-100;this.allowPast=z;if(z==null||!z){this.firstMonthAllowed=this.getMonthNum(this.thisMonth,this.thisYear);this.lastMonthAllowed=this.firstMonthAllowed+12}else{this.firstMonthAllowed=this.getMonthNum(this.thisMonth,this.firstYear);this.lastMonthAllowed=this.firstMonthAllowed+36;this.totalMonths=36}this.monthsDomID=j.id;this.drawControls(m,x);var p=this.makeDowHeader();var r=a("div",null);r.id=j.id;r.className="months";var k=true;var A=0;for(var n=u;n<=l;++n){for(var v=0;v<12;++v){var o=a("div",null,"month");var t=(v+1)+"/"+n;var q=R9CalMonthNames[v]+" "+n;o.id=t;var h=R9CalDaysInMonth[v];if(v==1){h=(n%4==0)?29:28}var w=e(o,"div",null,"calhead");e(w,"p",q,"monthHeader");d(w,jq(p).clone().get(0));var f=A>=this.firstMonthAllowed&&A<=this.lastMonthAllowed;if(k){var y=new Date();y.setFullYear(n,0,1);var g=1-y.getDay();g+=2-1;this.setupMonth(o,g,31,h,v+1,n,f);k=false}else{this.setupMonth(o,this.dayOffset,this.lastDay,h,v+1,n,f)}d(r,o);++A}}m.replaceChild(r,j)};R9Cal.prototype.isIgnoredDate=function(f){return jq(f).is(".nextMon,.prevMon,.oldDate")};R9Cal.prototype.getDate=function(j){var k=jq(j);if(k.is("p")&&!this.isIgnoredDate(j)){var g=k.parent();if(g.is(".week")){var h=g.parent();if(h.is(".month")){var f=h.attr("id").split("/");return{day:k.text(),month:f[0],year:f[1]}}}}return null};R9Cal.prototype.getMonthNum=function(g,f){if(f>=this.firstYear&&f<=this.lastYear){return(f-this.firstYear)*12+g-1}return -1};R9Cal.prototype.gotoMonth=function(g,f){this.gotoMonthNum(this.getMonthNum(g,f),false)};R9Cal.prototype.withDateElement=function(m,g,k,j){var n=this.getMonthNum(m,k);if(n>=0&&g>=1){var h=jq("div.month","#"+this.monthsDomID).eq(n);var f=this;var l=h.find("p").filter(function(){return jq(this).text()==g&&!f.isIgnoredDate(this)});j(l)}};R9Cal.prototype.highlightDate=function(j,f,k,g,h){this.withDateElement(j.month,j.day,j.year,function(l){l.removeClass(f)});this.withDateElement(k,g,h,function(l){l.addClass(f)});j.month=k;j.day=g;j.year=h};R9Cal.prototype.showNextMonth=function(){if(this.monthShown<this.lastMonthAllowed){this.gotoMonthNum(this.monthShown+1,true)}};R9Cal.prototype.showPreviousMonth=function(){if(this.monthShown>this.firstMonthAllowed){this.gotoMonthNum(this.monthShown-1,true)}};R9Cal.prototype.drawOnDemand=function(h){var f=R9CalMonthRecords[h];if(!f.isDrawn){var g=jq("div.month","#"+this.monthsDomID).eq(h).get(0);this.drawMonth(g,f);f.isDrawn=true}};R9Cal.prototype.gotoMonthNum=function(h,f){if(h>=this.firstMonthAllowed&&h<=this.lastMonthAllowed){if(!f&&this.monthShown==h-1){h=this.monthShown}if(h==this.lastMonthAllowed){--h}if(h!=this.monthShown){this.monthShown=h;this.drawOnDemand(h);this.drawOnDemand(h+1);if(!this.monthWidth){var g=jq("div.month","#"+this.monthsDomID).get(0);this.monthWidth=g.offsetWidth}jq("#"+this.monthsDomID).css("left",(-(this.monthWidth)*h)+"px")}}}})();var R9DatePickerNowShowing=null;function R9DatePicker(c,d,b,a){this.popup=c;this.dayID=b;this.dowID=a;this.calID=c.frameid;this.iconID=d;this.onDateChanged=function(g,e,f){if(typeof this.onChangeCB=="function"){this.onChangeCB(this)}};this.intervalID=-1;this.day=0;this.month=0;this.year=0;this.calendarFocused=false;this.domFocused=false;this.focusTimeout=-1;this.onChangeCB=null}R9DatePicker.prototype.withCal=function(a){var b=window.frames[this.calID];if(b&&b.cal){a(b.cal)}};R9DatePicker.prototype.frameDoc=function(){return window.frames[this.calID].document};R9DatePicker.prototype.setCalendarFocused=function(a){this.calendarFocused=a;if(a){this.domFocused=false}};R9DatePicker.prototype.setDayOfMonthFocused=function(a){this.domFocused=a;if(a){this.calendarFocused=false}};R9DatePicker.prototype.scheduleFocusCheck=function(){var a=this;var b=function(){if(R9DatePickerNowShowing==a.dayID&&!a.domFocused&&!a.calendarFocused){a.updateFromControls();if(a.isVisible()){a.toggle(jq("#"+a.iconID).get(0))}}};this.focusTimeout=window.setTimeout(b,250)};function R9DatePicker_zeroPad(a){return a<10?"0"+a:a}R9DatePicker.prototype.setEvents=function(){var a=this;var b=window.frames[this.calID];var c=b.cal;b.onDatePicked=function(d){a.popup.hide(false,function(){a.setDate(d.month,d.day,d.year);a.onDateChanged(d.month,d.day,d.year)})};b.onNextMonth=function(){c.showNextMonth()};b.onPrevMonth=function(){c.showPreviousMonth()};b.onCloseCal=function(){a.popup.hide()};b.onCalendarFocus=function(){a.setCalendarFocused(true)}};R9DatePicker.prototype.humanReadable=function(c,a,b){return R9DatePicker_zeroPad(a)+"/"+R9DatePicker_zeroPad(c)+"/"+b};R9DatePicker.prototype.parseHumanReadable=function(c){var h;var e;h=2;e=1;var d=/\s*(\d+)[^0-9](\d+)([^0-9](\d+))?\s*/.exec(c);var b=null;if(d){var f=d[4]?parseInt(d[4],10):-1;b={month:parseInt(d[h],10),day:parseInt(d[e],10),year:f}}else{return null}if(b.year<0){var a=new Date();b.year=(b.month<(a.getMonth()+1))?a.getFullYear()+1:a.getFullYear()}if(b.year<21){b.year+=2000}if(b.year<2000||b.year>2020||b.month<1||b.month>12||b.day<1||b.day>31){return null}var j=R9Cal_getDaysInMonth(b.month,b.year);if(b.day>j){return null}var g=true;this.withCal(function(l){var k=l.getMonthNum(b.month,b.year);g=k>=l.firstMonthAllowed&&k<=l.lastMonthAllowed});if(!g){return null}return b};R9DatePicker.prototype.setInputField=function(c,a,b){jq("#"+this.dayID).val((a&&a>0)?this.humanReadable(c,a,b):"")};R9DatePicker.prototype.setDate=function(c,a,b){a=typeof(a)=="string"?(a.length==0?-1:parseInt(a,10)):a;c=typeof(c)=="string"?parseInt(c,10):c;b=typeof(b)=="string"?parseInt(b,10):b;this.setInputField(c,a,b);this.month=c;this.day=a||-1;this.year=b;this.dateHasChanged()};R9DatePicker.prototype.setFromCanonical=function(b){var a=b.split("/");this.setDate(a[0],a[1],a[2])};R9DatePicker.prototype.setMonthYearFromCanonical=function(b){var a=b.split("/");this.setDate(a[0],null,a[2])};R9DatePicker.prototype.clearDay=function(){this.setDate(this.month,null,this.year)};R9DatePicker.prototype.updateFromControls=function(){this.sync();this.setInputField(this.month,this.day,this.year);this.onDateChanged(this.month,this.day,this.year)};R9DatePicker.prototype.sync=function(g,b){var f=this.day,d=this.month,e=this.year;var a=jq("#"+this.dayID).val();var c=this.parseHumanReadable(a);if(c){this.month=c.month;this.day=c.day;this.year=c.year}else{this.day=-1}if(f!=this.day||e!=this.year||d!=this.month||g){this.dateHasChanged()}};R9DatePicker.prototype.dateHasChanged=function(){var b=this;this.withCal(function(g){g.gotoMonth(b.month,b.year);g.highlightDate(g.highlighted,"highlighted",b.month,b.day,b.year)});var e=this.valueAsDate();if(e){var c=(e.getDay()-(2-1));if(c<0){c+=7}var f=R9CalDayOfWeek[c];var d=R9CalMonthNames[this.month-1];var a;a=f+", "+this.day+" "+d+" "+this.year;jq("#"+this.dowID).text(a)}else{jq("#"+this.dowID).text("dd/mm/yyyy")}};R9DatePicker.prototype.fields=function(){this.sync(false,true);return this};R9DatePicker.prototype.valueAsDate=function(a){var c=this.fields();if(c.day>0||a){var b=new Date();b.setDate(1);b.setFullYear(c.year);b.setMonth(c.month-1);b.setDate(c.day>0?c.day:a);return b}return null};R9DatePicker.prototype.markDate=function(a){this.withCal(function(b){b.highlightDate(b.marked,"marked",a.month,a.day,a.year)})};R9DatePicker.prototype.clearMarkedDate=function(){this.withCal(function(a){a.highlightDate(a.marked,"marked",0,0,0)})};R9DatePicker.prototype.toggle=function(a){if(!this.popup.isVisible()){this.setEvents();R9DatePickerNowShowing=this.dayID}else{this.clearInterval();if(this.focusTimeout!=-1){window.clearTimeout(this.focusTimeout);this.focusTimeout=-1}this.calendarFocused=false;this.domFocused=false}this.sync(true);this.popup.controllingIcon=this.iconID;this.popup.controllingInput=this.dayID;this.popup.toggle(a)};R9DatePicker.prototype.setInterval=function(){var a=this;this.intervalID=window.setInterval(function(){a.sync(false,true)},750)};R9DatePicker.prototype.clearInterval=function(){if(this.intervalID!=-1){window.clearInterval(this.intervalID);this.intervalID=-1}};R9DatePicker.prototype.isVisible=function(a){return this.popup.isVisible()};var whenFrameLoadedHook=function(){};function onCalendarLoaded(b,a){whenFrameLoadedHook()}R9CalPopup=function(h,c,b){this.posCache={};this.controllingIcon=null;this.controllingInput=null;this.isHiding=false;var a=document.createElement("div");a.className="r9calContainer";if(c){a.className+=" singleMonthCalContainer"}a.style.visibility="hidden";this.container=a;var d="en_GB.GB";var e="/h/nvtl/califrame.vtl?lc="+d+"&singleMonth="+c+"&allowPast="+((b)?"true":false);var g='<iframe src="'+e+'" class="calIframe" frameborder="0" scrolling="no" name="'+h+'" id="'+h+'">';jq(a).html(g);this.positionFunc=function(j){j.l-=80;j.t+=10};this.frameid=h;var f=document.createElement("div");f.className="r9calShadow";this.shadow=f;a.appendChild(f)};function truePos(c){var a=0;var b=0;while(c&&c!=document.body){a+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}return{l:a,t:b}}R9CalPopup.prototype.toggle=function(e){var g=jq(this.container);var d=(g.css("visibility")=="visible");if(d){var b=jq(e);if(b.is(".calicon")){var a="#"+this.controllingIcon;if(!b.is(a)&&!b.parent().is(a)){this.hide(true)}else{if(this.hideOnNextClick){this.hide(false);this.hideOnNextClick=false}else{this.hideOnNextClick=true}}}else{var f=e.id;if(f==this.controllingInput){return true}else{if(b.is(".calendar_dom")){this.hide(true);return true}else{this.hide(false)}}}}else{this.show(e)}return false};R9CalPopup.prototype.isVisible=function(a){return(jq(this.container).css("visibility")!="hidden")};R9CalPopup.prototype.show=function(c){var e=c.id;var d=this.posCache[e];if(!d||true){d=truePos(c);d.t+=c.offsetHeight;d.target=c;this.positionFunc(d);if(e){this.posCache[e]={l:d.l,t:d.t}}}hideMeOnPopup(true);var b=this.container.style;b.left=d.l+"px";b.top=d.t+"px";b.visibility="visible";var a=this;jq(document.body).mousedown(function(f){var g=a.toggle(f.target);if(!g){f.preventDefault();return false}return g})};R9CalPopup.prototype.hide=function(b,d){if(this.isHiding){return}var e=jq(this.container);if(b||!jq.browser.firefox){this.container.style.visibility="hidden";if(d){d()}}else{this.isHiding=true;var a=this;e.hide(160,function(){e.css("visibility","hidden");e.show();if(d){d()}a.isHiding=false})}hideMeOnPopup(false);jq(document.body).unbind("mousedown")};function initDatePicker(a,c){var b=new R9DatePicker(a,c.icon_id,c.input_id,c.dow_id);jq("#"+c.icon_id).click(function(d){b.setCalendarFocused(true);b.toggle(d.target);return true});jq("#"+c.input_id).blur(function(d){b.clearInterval();b.setDayOfMonthFocused(false);b.scheduleFocusCheck();return true}).focus(function(d){b.setDayOfMonthFocused(true);b.setInterval();if(!b.isVisible()){b.toggle(jq("#"+c.icon_id).get(0))}return true});if(c.initial_date&&c.initial_date.length>0){b.setFromCanonical(c.initial_date)}else{b.clearDay()}if(c.chg_callback_func&&typeof c.chg_callback_func=="function"){b.onChangeCB=c.chg_callback_func}return b}function setCalendarLoadedHook(a){if(a){whenFrameLoadedHook=a}}function R9DoubleDatePicker(a,e,d,c){setCalendarLoadedHook(d);if(c==null){c=false}this.pop=new R9CalPopup(a.calid,a.singleMonth,c);var f=initDatePicker(this.pop,a);var b=initDatePicker(this.pop,e);if(a.initial_date&&a.initial_date.length>0&&((!e.initial_date)||e.initial_date.length==0)){b.setMonthYearFromCanonical(a.initial_date)}if(e.initial_date&&e.initial_date>0&&((!a.initial_date)||a.initial_date.length==0)){f.setMonthYearFromCanonical(e.initial_date)}this.firstDate=this.departDate=this.checkinDate=this.pickupDate=f;this.secondDate=this.returnDate=this.checkoutDate=this.dropoffDate=b;f.onDateChanged=function(g,k,l){var j=f.valueAsDate();var h=b.valueAsDate(1);if(j&&h&&j>h){b.setDate(g,null,l)}b.markDate(f.fields());if(typeof f.onChangeCB=="function"){f.onChangeCB(this)}};b.onDateChanged=function(g,k,l){var j=f.valueAsDate(1);var h=b.valueAsDate();if(j&&h&&j>h){f.setDate(g,null,l);b.clearMarkedDate()}if(typeof b.onChangeCB=="function"){b.onChangeCB(this)}};if(document.getElementById(a.calid)==null){document.body.appendChild(this.pop.container)}else{this.pop.container=document.getElementById(a.calid).parentNode}}(function(){var a=new Date();a.setFullYear(a.getFullYear()+1);jq.datepicker.setDefaults({altFormat:"D, d M yy",closeText:"Close",currentText:"Current",dateFormat:"dd/mm/yy",dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesMin:"S,M,T,W,T,F,S".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),firstDay:parseInt("2")-1,maxDate:a,minDate:new Date(),monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),prevText:"Prev",nextText:"Next",showAnim:"",showMonthAfterYear:false})})();jq.r9datepicker={parseDate:function(a){return jq.datepicker.parseDate("mm/dd/yy",a)}};jq.fn.r9datepicker=function(k){var g=k.defaultDate,b=k.dateFormat||"dd/mm/yy",c="dd/mm/yyyy";if(g){this.val(jq.datepicker.formatDate(b,g,k));jq(k.altField).text(jq.datepicker.formatDate(k.altFormat||"D, d M yy",g,k))}else{jq(k.altField).text(c)}var j=k.beforeShow;var a=k.onClose;var e=k.onSelect;var f=this;var h=function(d,n,l,m){jq(f).trigger(d,[m]);if(n){n(m,l)}};k.beforeShow=function(d,l){h("sbopen",j,d,l)};k.onClose=function(l,d){h("sbclose",a,l,d)};k.onSelect=function(l,d){h("sbset",e,l,d)};return this.attr({autocomplete:"off",autocapitalize:"off",autocorrect:"off"}).datepicker(k)};var R9=R9||{};R9.dp=(function(){function a(e,d){return(c(d)-c(e))/86400000}function b(e,f){var d=e[f];delete e[f];return d}function c(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}return{doublePicker:function(s,q){var f=s.defaultDate,d=q.defaultDate,j=jq(s.altField),g=jq(q.altField),o=b(s,"onSelect")||jq.noop,m=b(q,"onSelect")||jq.noop,n=jq(b(s,"selector")),l=jq(b(q,"selector")),r=s.resetAfterDays||30,e=s.minRangeDays||0,k=s.numberOfMonths||2,h=q.numberOfMonths||2,p=s.pop2==undefined?true:s.pop2;n.r9datepicker(jq.extend({beforeShowDay:function(t){return[true,(t&&d&&t.getTime()==d.getTime())?"ui-datepicker-marked-day":""]},numberOfMonths:k,onSelect:function(w,v){f=n.datepicker("getDate");var u=d&&a(f,d);if(!d||u>r||u<e){l.datepicker("setDate",null).datepicker("option","defaultDate",f);g.text("dd/mm/yyyy")}o.call(this,w,v);if(p){if(l.is(":visible")&&l.css("visibility")!="hidden"){function t(){l.focus()}window.setTimeout(t,50)}}}},s));l.r9datepicker(jq.extend({beforeShowDay:function(t){return[true,(f&&t&&f.getTime()==t.getTime())?"ui-datepicker-marked-day":""]},numberOfMonths:h,onSelect:function(v,u){d=l.datepicker("getDate");var t=f&&a(f,d);if(!f||t<e){n.datepicker("setDate",null).datepicker("option","defaultDate",d);j.text("dd/mm/yyyy")}m.call(this,v,u);l.r9datepicker("hide")}},q))}}})();var R9=R9||{};R9.extend("cmp2",{openWindows:{init:true,lastWindow:""},cmp2windowinframe:[],reserveWindows:[],reservedWindowNamePrefix:"ReservedWindow",maxVisible:5});R9.extend("utils",{windowopener:function(b){if(top!=self){try{if(top.document.location.toString()){this._top=top}}catch(a){}}jq.extend(this.options,b)}});jq(function(){jq(window).on("hashchange beforeunload",R9.utils.windowopener.cleanupReserveWindows)});R9.extend("utils.windowopener",{pushCmp2Back:function(){var a=R9.cmp2.openWindows.lastWindow;if(a&&this.needsPopunderMagic()){window.open("about:blank").close()}window.focus()},needsPopunderMagic:function(){return typeof window.mozPaintCount!=="undefined"||typeof navigator.webkitGetUserMedia==="function"},cleanupReserveWindows:function(){if(!R9.cmp2.reserveWindows.length){return}var a=R9.cmp2.reserveWindows.shift();if(!a){return R9.utils.windowopener.cleanupReserveWindows()}if(a in R9.cmp2.openWindows){R9.cmp2.openWindows[a].close();delete R9.cmp2.openWindows[a]}R9.utils.windowopener.cleanupReserveWindows()}});R9.extend("utils.windowopener.prototype",{_top:self,options:{searchType:"",popUnder:true,tileWindows:false,heightRule:false,minWidth:0,minHeight:0,screenWidth:1024,screenHeight:768,destination:null,duration:null,earliestDeparture:null,latestDepartue:null,departureAirport:null,adults:null,children:null},openPredictive:function(b,d,c,a,e){this.open(b,d,c,a,e,true)},open:function(c,g,f,b,h,e){var b=this._getUrl(b,g);if(!b){return true}var d=this._getWindowName(g);var a=this._getWindow(b,d,c,f,e);if(!a||typeof a.closed=="undefined"||a.closed){return false}R9.cmp2.openWindows.lastWindow=a.name;R9.cmp2.openWindows[d]=a;this._handleInitialWindowFocus(a);return a},isThisWindowOpen:function(c){if(!c){return false}var b=this._getWindowName(c);var d=R9.cmp2.openWindows[b];try{if(d&&typeof d.r9Open=="object"&&!d.closed){return true}}catch(a){}return false},_getWindow:function(a,e,d,h,b){try{var f=+jq("#cmp2predict-nativeopen").val(),k;if(!b&&(d+1>f)){k=e;e=(R9.cmp2.reserveWindows.length&&R9.cmp2.reserveWindows.shift())||e}var l=(!jq.browser.webkit&&(!jq.browser.mozilla||parseInt(jq.browser.version,10)<12))?"1":"0";var j;var g;if(b){j=((typeof window.screenX=="undefined")?window.screenLeft:window.screenX)+10;g=((typeof window.screenY=="undefined")?window.screenTop:window.screenY)+10}else{j=this._getWindowLeft(d,h);g=this._getWindowTop()}var m=this._top.window.open(a,e,"toolbar="+l+",scrollbars=1,location=1,statusbar=1,menubar=0,resizable=1,top="+g+",left="+j+",screenX="+j+",screenY="+g+",width="+this._getWindowWidth(d,h,b)+",height="+this._getWindowHeight(b));if(k){if(!b&&m.name.indexOf(R9.cmp2.reservedWindowNamePrefix)===0){delete R9.cmp2.openWindows[m.name]}m.name=k}return m}catch(c){return false}},_getWindowWidth:function(a,d,c){if(c){return Math.min(1000,(jq(window.top).width()-20))}var e;if(jq("#cmp2windowinframe")&&jq("#cmp2windowinframe").val()==="true"){e=this._getScreenWidth()/d-10}else{e=this.options.screenWidth}if(this.options.tileWindows){return Math.min(e,Math.floor(this._getScreenWidth()/d-10))}var b=0;if(typeof(this._top.window.innerWidth)=="number"){b=this._top.window.innerWidth}if(this._top.document.documentElement&&this._top.document.documentElement.clientWidth){b=this._top.document.documentElement.clientWidth}if(this.options.minWidth){return this.options.minWidth>b?this.options.minWidth:b}return b},_getWindowHeight:function(b){if(b){return Math.min(800,(jq(window.top).height()-20))}if(this.options.heightRule){return Math.round(this._getScreenHeight()*0.6)}if(this.options.tileWindows){return this._getScreenHeight()}var a=0;if(typeof(this._top.window.innerHeight)=="number"){a=this._top.window.innerHeight}if(this._top.document.documentElement&&this._top.document.documentElement.clientHeight){a=this._top.document.documentElement.clientHeight}if(this.options.minHeight){return this.options.minHeight>a?this.options.minHeight:a}return a},_getWindowTop:function(){if(this.options.heightRule){return Math.round(this._getScreenHeight()*0.4)}if(this.options.tileWindows){return 0}if(this._top.window.screenTop!=undefined){return this._top.window.screenTop}return this._top.window.screenY},_getWindowLeft:function(a,b){if(this.options.tileWindows){return Math.floor(this._getWindowWidth(a,b)*a+10*a)}if(this._top.window.screenLeft!=undefined){return this._top.window.screenLeft}return this._top.window.screenX},_getWindowName:function(a){if(a.indexOf("_")>0){return a.substring(0,a.indexOf("_"))}return a},_getUrl:function(a,c){if(a!=null){return a}if(this.options.searchType){var b;if(this.options.destination){b="/s/compareresults/startredirectnow?type="+this.options.searchType+"&p="+c;b+="&dst="+this.options.destination}else{b="/s/compareresults/startingsearch?type="+this.options.searchType+"&p="+c}if(this.options.duration){b+="&dur="+this.options.duration}if(this.options.earliestDeparture){b+="&edep="+this.options.earliestDeparture}if(this.options.latestDeparture){b+="&ldep="+this.options.latestDeparture}if(this.options.departureAirport){b+="&dac="+this.options.departureAirport}if(this.options.adults){b+="&adults="+this.options.adults}if(this.options.children){b+="&children="+this.options.children}return b}return""},_handleInitialWindowFocus:function(a){if(!this.options.popUnder){return}a.blur();if(jq.browser.msie){window.focus();try{opener.window.focus()}catch(b){}}else{if(jq.browser.mozilla||jq.browser.webkit){a.opener.window.open("","_self","")}try{if(jq.browser.webkit){a.blur()}a.opener.window.focus()}catch(b){}}},_getScreenWidth:function(){if(window.screen.availWidth){return window.screen.availWidth}return window.screen.availWidth},_getScreenHeight:function(){if(window.screen.availHeight){return window.screen.availHeight}return this.options.screenHeight}});if(typeof R9==="undefined"){R9=new Object()}R9.CompareTo={_currentForm:null,_getFormType:function(a){if(typeof a.tab!=="undefined"){return a.tab.value}else{return"unknown"}},_getMaxCompares:function(a){if(typeof a.comparetomax!=="undefined"){return a.comparetomax.value}else{return 5}},_getCurrentCompares:function(a){return jq(a).find(".compareToCheckboxes span.cmp2item:visible").size()},_getArgs:function(c){var b=this._getFormType(c);var a="";if(b==="flights"){a="ptype=flights";a+="&depart_date="+c.depart_date.value;a+="&return_date="+c.return_date.value;a+="&origin="+c.origin.value;a+="&origincode="+c.origincode.value;a+="&destination="+c.destination.value;a+="&destcode="+c.destcode.value;a+="&cabin=e"}else{if(b==="hotels"){a="ptype=hotels";a+="&checkin_date="+c.checkin_date.value;a+="&checkout_date="+c.checkout_date.value;a+="&location="+c.othercity.value;a+="&citycode="+c.citycode.value}else{if(b==="cars"){a="ptype=cars";a+="&pickup_date="+c.pickup_date.value;a+="&dropoff_date="+c.dropoff_date.value;a+="&location1="+c.location.value;a+="&citycode1="+c.citycode1.value;if(typeof c.citycode2!=="undefined"&&typeof c.location2!=="undefined"){a+="&location2="+c.location2.value;a+="&citycode2="+c.citycode2.value}}else{if(b==="vacations"){a="ptype=vacations";a+="&depart_date="+c.depart_date.value;a+="&return_date="+c.return_date.value;a+="&origin="+c.origin.value;a+="&origincode="+c.origincode.value;a+="&destination="+c.destination.value;a+="&destcode="+c.destcode.value}}}}return a},_showBox:function(b){var c=this._getFormType(b);var a=false;if(c==="flights"){if(b.origin.value!==""&&b.destination.value!==""){a=true}}else{if(c==="hotels"){if(b.othercity.value!==""){a=true}}else{if(c==="cars"){if(b.location.value!==""){a=true}}else{if(c==="vacations"){if(b.origin.value!==""&&b.destination.value!==""){a=true}}}}}if(a===true){jq(b).find(".compareToBox").show()}else{jq(b).find(".compareToBox").hide()}return a},_hideAllCompareTos:function(a){jq(a).find("input[name=comparetosite]").parent().hide()},_compare2chk:function(b){this._hideAllCompareTos(b);var a=this._setCmp2Count;this._currentForm=b;jq.getScript("/s/cmp2chk?"+this._getArgs(b),a)},_setCmp2Count:function(){},_shouldLaunchFromCheckbox:function(a){if(a.parent().is(":visible")&&a.val()!=null&&a.val()!=""){return true}else{return false}},_addCheckedCompareTos:function(b,a){var c=this;jq(b).find("input[name=comparetosite]:checked").each(function(d){if(c._shouldLaunchFromCheckbox(jq(this))===true){a.push({code:jq(this).val()})}})},launch:function(d){if(typeof d.comparetosite==="undefined"){return true}var a=new Array();this._addCheckedCompareTos(d,a);this._uncheckAllHidden(d);var c=new R9.utils.windowopener({searchType:this._getFormType(d),tileWindows:true});for(var b=0;b<a.length;b++){if(a[b].code!=null&&a[b].code!=""){if(!c.open(b,a[b].code,a.length)){return false}}}return true},_checkAll:function(a){jq(a).closest("form").find(".compareToCheckboxes input[name=comparetosite]:visible").prop("checked",true)},_uncheckAllHidden:function(a){jq(a).find(".compareToCheckboxes input[name=comparetosite]:hidden").prop("checked",false)},smartboxCallback:function(a){if(this._showBox(a)===true){this._compare2chk(a)}},checkCallback:function(a,e,c){if(e!=null&&e.indexOf("KAYAK")==0){return}try{var d=this._currentForm;R9.CompareTo._toggleIndividualCompareTo(d,a,e)}catch(b){}},_toggleIndividualCompareTo:function(d,b,c){var a=jq(d).find("span.cmp2item."+c);if(typeof a!="undefined"){if(b){a.show();a.find("div").show()}else{a.hide();a.find("div").hide()}}},_checkboxClick:function(b){var a="false";if(jq(b).is(":checked")){a="true"}jq.ajax({type:"POST",url:"/k/cookie",data:{action:"setmeta",metacookie:jq(b).val(),metavalue:a}})},init:function(a){var b=this;jq(a).find("input[name=comparetosite]").click(function(){b._checkboxClick(jq(this))});jq(a).find("a.compareToCheckAll").click(function(){b._checkAll(jq(this))});b.smartboxCallback(a)}};function cmp2set(a,c,b){R9.CompareTo.checkCallback(a,c,b)}function cmp2am(a,b){}function checkmoresites(){}function setCmp2Count(){}var who;var ESC=27;var TAB=9;var ALT=18;var UP=38;var DOWN=40;var LEFT=37;var RIGHT=39;var ENTER=13;var SHIFT=16;var lastKey=0;function keyDown(c){var b=document.all?window.event.keyCode:c.which;var a=String.fromCharCode(b).toLowerCase();lastKey=b;if(who!=null){who(b,a)}}function keysInit(a){document.onkeydown=keyDown;who=a;if(document.layers){document.captureEvents(Event.KEYPRESS)}}function noEnter(){return lastKey!=ENTER}var _toolong,_lastsent,_timeout,_itemCount,_idletimer,_cursel,_target;var _prevsel;var _inputcode=null,_searchtype;var _targetBG;var _input=null;var _numChoices;var sbHttp=null;var _stop;var _chars=1;var _sboxminwidth;var _clientsbcb;var _sbcountrycode;var _kayakSmartUrl="/m/smarty?";var _forceSelection=true;var _forceSingle=false;var _sbextraargs="";function cancelSmartBox(){keysInit(null);if((_forceSelection||(_forceSingle&&_itemCount==1))&&_inputcode!=null&&_inputcode.value!=null&&_inputcode.value.length<1){_setValue(0)}abortSmartBox();closeSmartBox();_input=null;_stop=false}function abortSmartBox(){if(sbHttp!=null){if(sbHttp.inprogress){sbHttp.cancelRequest()}}}function closeSmartBox(){if(_target!=null){_target.style.display="none";_target.innerHTML=""}if(_targetBG!=null){_targetBG.style.display="none"}_stop=true}function initSmartBox(j,n,g,m,f,l,a,c,b,d){_inputcode=_input=null;if(c!=null){_forceSelection=c}else{_forceSelection=true}if(d!=null){_forceSingle=d}else{_forceSingle=false}if(a){_kayakSmartUrl=a}else{_kayakSmartUrl="/m/smarty?"}if(b){_sbextraargs=b}else{_sbextraargs=""}cancelSmartBox();var k=document.getElementsByTagName("body")[0];_target=document.getElementById("smartbox");if(!_target){_target=document.createElement("div");_target.id="smartbox";_target.style.zIndex=5001;_target.style.position="absolute";_target.style.display="none";_target.style.width="auto";k.appendChild(_target)}_target.className="smartbox smartbox-"+g;_targetBG=document.getElementById("smartboxBG");if(!_targetBG){_targetBG=document.createElement("iframe");_targetBG.id="smartboxBG";_targetBG.style.zIndex=5000;_targetBG.setAttribute("scrolling","no");_targetBG.setAttribute("frameborder","0");_targetBG.style.position="absolute";_targetBG.style.display="none";k.appendChild(_targetBG)}try{j.setAttribute("autocomplete","off");j.setAttribute("autocapitalize","off");j.setAttribute("autocorrect","off")}catch(e){}if(isNaN(parseInt(f))){_sboxminwidth=-1}else{_sboxminwidth=parseInt(f)}keysInit(keypressed);_input=j;_inputcode=n;_searchtype=g;_lastsent="";_timeout=m;_clientsbcb=l;var h=jq(j).offset();_target.style.top=(h.top+j.offsetHeight+1)+"px";_target.style.left=h.left+"px";if(_idletimer){clearTimeout(_idletimer);_idletimer=""}_toolong=false;_lastsent="";_cursel=-1;_prevsel=-1;_stop=false}function _runSearch(a){if(_lastsent==_input.value||_input.value.length<_chars){return}window.status="searching...";_lastsent=_input.value;var b="where="+encodeURIComponent(_lastsent);b+="&lc=en&lc_cc=GB";if(_searchtype=="air"){b+="&s=1"}else{if(_searchtype=="car"){b+="&s=2"}else{if(_searchtype=="hotel"){b+="&s=3"}else{if(_searchtype=="any"){b+="&s=4"}else{if(_searchtype=="crc"){b+="&s=5"}else{if(_searchtype=="crcg"){b+="&s=6"}else{if(_searchtype=="deal"){b+="&s=7"}else{if(_searchtype=="crcga"){b+="&s=8"}else{if(_searchtype=="hotelname"){b+="&s=11"}else{b+="&s="+_searchtype}}}}}}}}}if(_sbcountrycode!=null&&_sbcountrycode.length>0){b+="&cc="+_sbcountrycode}b+="&f=h";b+=_sbextraargs;jq.post(_kayakSmartUrl,b,function(e){window.status="";if(_input==a){_target.innerHTML=e;var d=_getSmartboxList();if(d&&d.childNodes){_itemCount=d.childNodes.length}else{_itemCount=0}if(_itemCount>0){for(var c=0;c<d.childNodes.length;c++){li=d.childNodes[c];li.onmousedown=_sbMouseDown;li.onmouseover=_sbMouseOver;li.onmouseout=_sbMouseOut}_target.style.width="auto";_showChoices()}else{_hideChoices()}_cursel=(_forceSelection||(_forceSingle&&_itemCount==1)?0:-1);_prevsel=_cursel;selChoice(_cursel)}},"text")}function setSbCountryCode(a){_sbcountrycode=a}function clearSbCountryCode(){_sbcountrycode=null}function getSbIndex(e){var f=_getSmartboxList();var c=0;if(f&&f.childNodes){for(var b=0;b<f.childNodes.length;b++){var d=f.childNodes[b];if(e==d){c=b;break}var g=false;for(var a=0;a<d.childNodes.length;a++){if(e==d.childNodes[a]){c=b;g=true;break}}if(g){break}}}return c}function _sbMouseOut(a){var b=a?a.target:this;_cursel=-1;selChoice(-1)}function _sbMouseDown(a){var b=a?a.target:this;_cursel=getSbIndex(b);_setValue(_cursel);closeSmartBox()}function _sbMouseOver(a){var b=a?a.target:this;_cursel=getSbIndex(b);selChoice(_cursel)}function _showChoices(){_target.style.display="inline";if(_sbShowBGIframe()){_targetBG.style.display="inline"}if(_sboxminwidth>_target.offsetWidth){_targetBG.style.width=_sboxminwidth+"px";_target.style.width=_sboxminwidth+"px"}else{_targetBG.style.width=_target.offsetWidth+"px";_target.style.width=_target.offsetWidth+"px"}_targetBG.style.height=_target.offsetHeight+"px";_targetBG.style.top=_target.style.top;_targetBG.style.left=_target.style.left}function _hideChoices(){_target.style.display="none";_targetBG.style.display="none"}function _getSmartboxList(){var b;if(_target.childNodes){for(var a=0;a<_target.childNodes.length;a++){var c=_target.childNodes[a];if(c.nodeName=="UL"){b=c;break}}}return b}function _setValue(c){if(c<0){_lastsent="";try{var j=(_inputcode.value!="");_inputcode.value="";if(j){_clientsbcb(null)}}catch(g){}}else{if(_itemCount>0){var h=_getSmartboxList();if(h==null||h.childNodes==null){return}var d=h.childNodes[c];var f=d.id.split("-");var a;if(f.length>1){a=f[1]}_inputcode.value=a;if(d.innerText!=undefined){_input.value=d.innerText}else{_input.value=d.textContent}try{if(typeof _clientsbcb=="function"){var k=new Object();k.str=d.innerHTML;k.type=f[0];k.id=a;k.inputField=_input;k.inputCodeField=_inputcode;if(f.length>2){k.hc=f[2]}if(f.length>3){if(k.type=="hotel"){k.hid=f[3]}else{k.lmid=f[3]}}_clientsbcb(k)}}catch(b){}}}}function selChoice(a){var c=_getSmartboxList();if(c&&c.childNodes&&c.childNodes.length>0){if(_prevsel>=0){var b=c.childNodes[_prevsel];if(b.className){b.className=b.className.replace(/ *smartbox-hover/,"")}else{b.className=""}}if(a>=0){if(c.childNodes.length>0){var d=c.childNodes[a];d.className=d.className+" smartbox-hover"}_prevsel=a}}}var _pressed=0;function keypressed(a,b){clearTimeout(_idletimer);_pressed=new Date().getTime();switch(a){case LEFT:case UP:_cursel=_cursel-1;if(_cursel<0){_cursel=0}selChoice(_cursel);break;case RIGHT:case DOWN:_cursel++;if(_cursel>=_itemCount){_cursel=_itemCount-1}selChoice(_cursel);break;case ENTER:if(_itemCount>0){_setValue(_cursel);closeSmartBox()}break;case ESC:closeSmartBox();break;case TAB:if(_cursel>=0&&_cursel<_itemCount){_setValue(_cursel)}case ALT:case SHIFT:break;default:_setValue(-1);_idletimer=self.setTimeout("idle()",_timeout)}}function sbNoEnter(){var a=(_stop==null||_stop!=true);_stop=false;return(a?true:noEnter())}function idle(a){if(noEnter()){_input.focus();var b=new Date().getTime();if(b-_pressed>_timeout){clearTimeout(_idletimer);_typer(_input)}else{clearTimeout(_idletimer);_idletimer=self.setTimeout("idle()",_timeout)}}}function _typer(a){if((_input!=null)&&_input.value.length>0){abortSmartBox();_runSearch(a)}else{_setValue(-1);closeSmartBox()}}function _sbShowBGIframe(){return(window.opera)?false:true}function fireTimer(b){var c=b;function a(){if(c.inprogress){c._abortRequest(c)}}c._timeoutID=window.setTimeout(a,c.timeoutMS)}function R9HTTPXml(){}R9HTTPXml.prototype={uservars:null,url:null,postbuffer:null,xmlhttp:null,inprogress:false,thecallback:null,timeoutMS:-1,_timeoutID:null,cancelled:false,init:function(c,b,a){this.url=c;this.uservars=a;this.postbuffer=b;if(window.XMLHttpRequest){this.xmlhttp=new XMLHttpRequest()}else{if(window.ActiveXObject){this.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}else{window.alert("Sorry your browser is not compatible with this functionality")}}},setTimeout:function(a){this.timeoutMS=a},asyncGET:function(a){if(this.inprogress){throw new Error("Call in progress")}var b=this;if(a==null){a=b}this.thecallback=a;var c=null;if(this.postbuffer==null){this.xmlhttp.open("GET",this.url,true)}else{this.xmlhttp.open("POST",this.url,true);this.xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");c=this.postbuffer}this.xmlhttp.onreadystatechange=function(){b.stateChangeCallback(b)};this.inprogress=true;this.cancelled=false;this.xmlhttp.send(c);if(this.timeoutMS>0){fireTimer(this)}},stateChangeCallback:function(b){switch(b.xmlhttp.readyState){case 1:try{if(!b.cancelled){b.thecallback.onInit()}}catch(c){}break;case 2:try{if(b.xmlhttp.status!=200&&b.xmlhttp.status!=0){if(!b.cancelled){window.status="error";b.thecallback.onError(b.xmlhttp.status,b.xmlhttp.statusText,b)}b.xmlhttp.abort();b.inprogress=false}}catch(c){}break;case 3:var a;try{try{a=b.xmlhttp.getResponseHeader("Content-Length")}catch(c){a=NaN}if(!b.cancelled){window.status="ping";b.thecallback.onProgress(b.xmlhttp.responseText,a)}}catch(c){}break;case 4:try{if(b._timeoutID){window.clearTimeout(b._timeoutID);b._timeoutID=null}if(b.inprogress){b.inprogress=false;if(!b.cancelled){window.status="done";b.thecallback.onLoad(b)}}}catch(c){}finally{b.inprogress=false}break}},cancelRequest:function(){var a=this;this.cancelled=true;if(this._timeoutID){window.clearTimeout(this._timeoutID);this._timeoutID=null}a._abortRequest(a)},_abortRequest:function(b){if(b.xmlhttp!=null){try{b.xmlhttp.abort();if(b.inprogress){window.status="abort";b.thecallback.onError("timeout","Your request has timed out.",b)}}catch(a){}b.cancelled=true;b.inprogress=false}},getText:function(){return this.xmlhttp.responseText},getXML:function(){return this.xmlhttp.responseXML},getTags:function(a){try{return this.xmlhttp.responseXML.getElementsByTagName(a)}catch(b){return null}},getOperaText:function(d,g,b){try{var a=d.getElementsByTagName(g)[b];if(a){var h="",c=0,f;while(f=a.childNodes[c]){h+=f.nodeValue;c++}return h}else{return""}}catch(j){opera.postError("exception: "+j)}},getOpera:function(b,c,a){return"foo"},getTagText:function(c,d,b){var a=c.getElementsByTagName(d)[b];if(a){if(a.childNodes.length>1){return a.childNodes[1].nodeValue}else{if(a.childNodes.length==1){return a.firstChild.nodeValue}}}else{return""}},onProgress:function(b,a){},onError:function(b,a,d){},onLoad:function(a){},onInit:function(a){}};var R9CalDayOfWeek=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var R9CalDaysInMonth=[31,0,31,30,31,30,31,31,30,31,30,31];var R9CalMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var R9CalMonthRecords=[];function R9Cal_getDaysInMonth(a,b){if(a==2){return(b%4==0)?29:28}return R9CalDaysInMonth[a-1]}function R9Cal(){this.dayOffset=0;this.lastDay=0;this.monthShown=-100;this.totalMonths=0;this.monthsDomID;this.firstYear=0;this.lastYear=0;this.firstMonthAllowed=0;this.lastMonthAllowed=0;this.thisYear=0;this.thisMonth=0;this.thisDay=0;this.allowPast=false;this.monthWidth=0;this.highlighted={year:0,month:0,day:0};this.marked={year:0,month:0,day:0};return true}SCOPE=(function(){function c(){var f=document.createElement("p");return(f.innerText!=undefined)}var b;if(c()){b=function(f,g){f.innerText=g}}else{b=function(f,g){f.textContent=g}}function a(f,j,g){var h=document.createElement(f);if(j){b(h,j)}if(g){h.className=g}return h}function e(h,f,k,g){var j=document.createElement(f);if(k){b(j,k)}if(g){j.className=g}h.appendChild(j);return j}function d(f,g){f.appendChild(g)}R9Cal.prototype.isOldDate=function(h,f,g){if(g<this.thisYear){return true}if(g==this.thisYear){if(h<this.thisMonth){return true}if(h==this.thisMonth){return f<this.thisDay}}return false};R9Cal.prototype.drawMonth=function(n,q){var k=q.firstOffset;for(var f=0;f<6;++f){var j=f==5?"week lastWeek":"week";if(jq.browser.mozilla){j+=" firefoxWeek"}else{if(jq.browser.msie&&jq.browser.version.substr(0,1)=="8"){j+=" ie8Week"}}var h=a("div",null,j);for(var m=0;m<7;++m){var l,g,o;if(k<=0){l=q.lastMonEnd+k;o="prevMon"}else{if(k>q.thisMonEnd){l=k-q.thisMonEnd;o="nextMon"}else{l=k;o=null}}if(!this.allowPast&&this.isOldDate(q.month,l,q.year)){o="oldDate"}e(h,"p",l,o);++k}d(n,h)}};R9Cal.prototype.setupMonth=function(n,k,f,m,j,l,o){var h={firstOffset:k,lastMonEnd:f,thisMonEnd:m,month:j,year:l,isValid:o,isDrawn:false};R9CalMonthRecords.push(h);var g=k+6*7;this.dayOffset=(g-m-1)%7-6;this.lastDay=m};R9Cal.prototype.makeDowHeader=function(){var f=a("div",null,"dayHeader");jq.each(R9CalDayOfWeek,function(){d(f,a("p",this.charAt(0)))});return f};R9Cal.prototype.drawControls=function(j,g){var f=document.createElement("div");f.className="calControls";if(g){f.className+=" singleMonthCalControls"}var k=document.createElement("a");k.id="gotoPrev";k.href="#";jq(k).html("&laquo;");var h=document.createElement("a");h.id="gotoNext";h.href="#";jq(h).html("&raquo;");var l=document.createElement("a");l.id="closeCal";l.href="#";jq(l).html("&times;");f.appendChild(k);f.appendChild(l);f.appendChild(h);j.appendChild(f)};R9Cal.prototype.drawMonths=function(m,j,x,u,l,z){if(x==null){x=false}if(z==null){z=false}var s=new Date();this.thisYear=s.getFullYear();this.thisMonth=s.getMonth()+1;this.thisDay=s.getDate();this.firstYear=u;this.lastYear=l;this.totalMonths=(l-u+1)*12;this.monthShown=-100;this.allowPast=z;if(z==null||!z){this.firstMonthAllowed=this.getMonthNum(this.thisMonth,this.thisYear);this.lastMonthAllowed=this.firstMonthAllowed+12}else{this.firstMonthAllowed=this.getMonthNum(this.thisMonth,this.firstYear);this.lastMonthAllowed=this.firstMonthAllowed+36;this.totalMonths=36}this.monthsDomID=j.id;this.drawControls(m,x);var p=this.makeDowHeader();var r=a("div",null);r.id=j.id;r.className="months";var k=true;var A=0;for(var n=u;n<=l;++n){for(var v=0;v<12;++v){var o=a("div",null,"month");var t=(v+1)+"/"+n;var q=R9CalMonthNames[v]+" "+n;o.id=t;var h=R9CalDaysInMonth[v];if(v==1){h=(n%4==0)?29:28}var w=e(o,"div",null,"calhead");e(w,"p",q,"monthHeader");d(w,jq(p).clone().get(0));var f=A>=this.firstMonthAllowed&&A<=this.lastMonthAllowed;if(k){var y=new Date();y.setFullYear(n,0,1);var g=1-y.getDay();g+=2-1;this.setupMonth(o,g,31,h,v+1,n,f);k=false}else{this.setupMonth(o,this.dayOffset,this.lastDay,h,v+1,n,f)}d(r,o);++A}}m.replaceChild(r,j)};R9Cal.prototype.isIgnoredDate=function(f){return jq(f).is(".nextMon,.prevMon,.oldDate")};R9Cal.prototype.getDate=function(j){var k=jq(j);if(k.is("p")&&!this.isIgnoredDate(j)){var g=k.parent();if(g.is(".week")){var h=g.parent();if(h.is(".month")){var f=h.attr("id").split("/");return{day:k.text(),month:f[0],year:f[1]}}}}return null};R9Cal.prototype.getMonthNum=function(g,f){if(f>=this.firstYear&&f<=this.lastYear){return(f-this.firstYear)*12+g-1}return -1};R9Cal.prototype.gotoMonth=function(g,f){this.gotoMonthNum(this.getMonthNum(g,f),false)};R9Cal.prototype.withDateElement=function(m,g,k,j){var n=this.getMonthNum(m,k);if(n>=0&&g>=1){var h=jq("div.month","#"+this.monthsDomID).eq(n);var f=this;var l=h.find("p").filter(function(){return jq(this).text()==g&&!f.isIgnoredDate(this)});j(l)}};R9Cal.prototype.highlightDate=function(j,f,k,g,h){this.withDateElement(j.month,j.day,j.year,function(l){l.removeClass(f)});this.withDateElement(k,g,h,function(l){l.addClass(f)});j.month=k;j.day=g;j.year=h};R9Cal.prototype.showNextMonth=function(){if(this.monthShown<this.lastMonthAllowed){this.gotoMonthNum(this.monthShown+1,true)}};R9Cal.prototype.showPreviousMonth=function(){if(this.monthShown>this.firstMonthAllowed){this.gotoMonthNum(this.monthShown-1,true)}};R9Cal.prototype.drawOnDemand=function(h){var f=R9CalMonthRecords[h];if(!f.isDrawn){var g=jq("div.month","#"+this.monthsDomID).eq(h).get(0);this.drawMonth(g,f);f.isDrawn=true}};R9Cal.prototype.gotoMonthNum=function(h,f){if(h>=this.firstMonthAllowed&&h<=this.lastMonthAllowed){if(!f&&this.monthShown==h-1){h=this.monthShown}if(h==this.lastMonthAllowed){--h}if(h!=this.monthShown){this.monthShown=h;this.drawOnDemand(h);this.drawOnDemand(h+1);if(!this.monthWidth){var g=jq("div.month","#"+this.monthsDomID).get(0);this.monthWidth=g.offsetWidth}jq("#"+this.monthsDomID).css("left",(-(this.monthWidth)*h)+"px")}}}})();var R9DatePickerNowShowing=null;function R9DatePicker(c,d,b,a){this.popup=c;this.dayID=b;this.dowID=a;this.calID=c.frameid;this.iconID=d;this.onDateChanged=function(g,e,f){if(typeof this.onChangeCB=="function"){this.onChangeCB(this)}};this.intervalID=-1;this.day=0;this.month=0;this.year=0;this.calendarFocused=false;this.domFocused=false;this.focusTimeout=-1;this.onChangeCB=null}R9DatePicker.prototype.withCal=function(a){var b=window.frames[this.calID];if(b&&b.cal){a(b.cal)}};R9DatePicker.prototype.frameDoc=function(){return window.frames[this.calID].document};R9DatePicker.prototype.setCalendarFocused=function(a){this.calendarFocused=a;if(a){this.domFocused=false}};R9DatePicker.prototype.setDayOfMonthFocused=function(a){this.domFocused=a;if(a){this.calendarFocused=false}};R9DatePicker.prototype.scheduleFocusCheck=function(){var a=this;var b=function(){if(R9DatePickerNowShowing==a.dayID&&!a.domFocused&&!a.calendarFocused){a.updateFromControls();if(a.isVisible()){a.toggle(jq("#"+a.iconID).get(0))}}};this.focusTimeout=window.setTimeout(b,250)};function R9DatePicker_zeroPad(a){return a<10?"0"+a:a}R9DatePicker.prototype.setEvents=function(){var a=this;var b=window.frames[this.calID];var c=b.cal;b.onDatePicked=function(d){a.popup.hide(false,function(){a.setDate(d.month,d.day,d.year);a.onDateChanged(d.month,d.day,d.year)})};b.onNextMonth=function(){c.showNextMonth()};b.onPrevMonth=function(){c.showPreviousMonth()};b.onCloseCal=function(){a.popup.hide()};b.onCalendarFocus=function(){a.setCalendarFocused(true)}};R9DatePicker.prototype.humanReadable=function(c,a,b){return R9DatePicker_zeroPad(a)+"/"+R9DatePicker_zeroPad(c)+"/"+b};R9DatePicker.prototype.parseHumanReadable=function(c){var h;var e;h=2;e=1;var d=/\s*(\d+)[^0-9](\d+)([^0-9](\d+))?\s*/.exec(c);var b=null;if(d){var f=d[4]?parseInt(d[4],10):-1;b={month:parseInt(d[h],10),day:parseInt(d[e],10),year:f}}else{return null}if(b.year<0){var a=new Date();b.year=(b.month<(a.getMonth()+1))?a.getFullYear()+1:a.getFullYear()}if(b.year<21){b.year+=2000}if(b.year<2000||b.year>2020||b.month<1||b.month>12||b.day<1||b.day>31){return null}var j=R9Cal_getDaysInMonth(b.month,b.year);if(b.day>j){return null}var g=true;this.withCal(function(l){var k=l.getMonthNum(b.month,b.year);g=k>=l.firstMonthAllowed&&k<=l.lastMonthAllowed});if(!g){return null}return b};R9DatePicker.prototype.setInputField=function(c,a,b){jq("#"+this.dayID).val((a&&a>0)?this.humanReadable(c,a,b):"")};R9DatePicker.prototype.setDate=function(c,a,b){a=typeof(a)=="string"?(a.length==0?-1:parseInt(a,10)):a;c=typeof(c)=="string"?parseInt(c,10):c;b=typeof(b)=="string"?parseInt(b,10):b;this.setInputField(c,a,b);this.month=c;this.day=a||-1;this.year=b;this.dateHasChanged()};R9DatePicker.prototype.setFromCanonical=function(b){var a=b.split("/");this.setDate(a[0],a[1],a[2])};R9DatePicker.prototype.setMonthYearFromCanonical=function(b){var a=b.split("/");this.setDate(a[0],null,a[2])};R9DatePicker.prototype.clearDay=function(){this.setDate(this.month,null,this.year)};R9DatePicker.prototype.updateFromControls=function(){this.sync();this.setInputField(this.month,this.day,this.year);this.onDateChanged(this.month,this.day,this.year)};R9DatePicker.prototype.sync=function(g,b){var f=this.day,d=this.month,e=this.year;var a=jq("#"+this.dayID).val();var c=this.parseHumanReadable(a);if(c){this.month=c.month;this.day=c.day;this.year=c.year}else{this.day=-1}if(f!=this.day||e!=this.year||d!=this.month||g){this.dateHasChanged()}};R9DatePicker.prototype.dateHasChanged=function(){var b=this;this.withCal(function(g){g.gotoMonth(b.month,b.year);g.highlightDate(g.highlighted,"highlighted",b.month,b.day,b.year)});var e=this.valueAsDate();if(e){var c=(e.getDay()-(2-1));if(c<0){c+=7}var f=R9CalDayOfWeek[c];var d=R9CalMonthNames[this.month-1];var a;a=f+", "+this.day+" "+d+" "+this.year;jq("#"+this.dowID).text(a)}else{jq("#"+this.dowID).text("dd/mm/yyyy")}};R9DatePicker.prototype.fields=function(){this.sync(false,true);return this};R9DatePicker.prototype.valueAsDate=function(a){var c=this.fields();if(c.day>0||a){var b=new Date();b.setDate(1);b.setFullYear(c.year);b.setMonth(c.month-1);b.setDate(c.day>0?c.day:a);return b}return null};R9DatePicker.prototype.markDate=function(a){this.withCal(function(b){b.highlightDate(b.marked,"marked",a.month,a.day,a.year)})};R9DatePicker.prototype.clearMarkedDate=function(){this.withCal(function(a){a.highlightDate(a.marked,"marked",0,0,0)})};R9DatePicker.prototype.toggle=function(a){if(!this.popup.isVisible()){this.setEvents();R9DatePickerNowShowing=this.dayID}else{this.clearInterval();if(this.focusTimeout!=-1){window.clearTimeout(this.focusTimeout);this.focusTimeout=-1}this.calendarFocused=false;this.domFocused=false}this.sync(true);this.popup.controllingIcon=this.iconID;this.popup.controllingInput=this.dayID;this.popup.toggle(a)};R9DatePicker.prototype.setInterval=function(){var a=this;this.intervalID=window.setInterval(function(){a.sync(false,true)},750)};R9DatePicker.prototype.clearInterval=function(){if(this.intervalID!=-1){window.clearInterval(this.intervalID);this.intervalID=-1}};R9DatePicker.prototype.isVisible=function(a){return this.popup.isVisible()};var whenFrameLoadedHook=function(){};function onCalendarLoaded(b,a){whenFrameLoadedHook()}R9CalPopup=function(h,c,b){this.posCache={};this.controllingIcon=null;this.controllingInput=null;this.isHiding=false;var a=document.createElement("div");a.className="r9calContainer";if(c){a.className+=" singleMonthCalContainer"}a.style.visibility="hidden";this.container=a;var d="en_GB.GB";var e="/h/nvtl/califrame.vtl?lc="+d+"&singleMonth="+c+"&allowPast="+((b)?"true":false);var g='<iframe src="'+e+'" class="calIframe" frameborder="0" scrolling="no" name="'+h+'" id="'+h+'">';jq(a).html(g);this.positionFunc=function(j){j.l-=80;j.t+=10};this.frameid=h;var f=document.createElement("div");f.className="r9calShadow";this.shadow=f;a.appendChild(f)};function truePos(c){var a=0;var b=0;while(c&&c!=document.body){a+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}return{l:a,t:b}}R9CalPopup.prototype.toggle=function(e){var g=jq(this.container);var d=(g.css("visibility")=="visible");if(d){var b=jq(e);if(b.is(".calicon")){var a="#"+this.controllingIcon;if(!b.is(a)&&!b.parent().is(a)){this.hide(true)}else{if(this.hideOnNextClick){this.hide(false);this.hideOnNextClick=false}else{this.hideOnNextClick=true}}}else{var f=e.id;if(f==this.controllingInput){return true}else{if(b.is(".calendar_dom")){this.hide(true);return true}else{this.hide(false)}}}}else{this.show(e)}return false};R9CalPopup.prototype.isVisible=function(a){return(jq(this.container).css("visibility")!="hidden")};R9CalPopup.prototype.show=function(c){var e=c.id;var d=this.posCache[e];if(!d||true){d=truePos(c);d.t+=c.offsetHeight;d.target=c;this.positionFunc(d);if(e){this.posCache[e]={l:d.l,t:d.t}}}hideMeOnPopup(true);var b=this.container.style;b.left=d.l+"px";b.top=d.t+"px";b.visibility="visible";var a=this;jq(document.body).mousedown(function(f){var g=a.toggle(f.target);if(!g){f.preventDefault();return false}return g})};R9CalPopup.prototype.hide=function(b,d){if(this.isHiding){return}var e=jq(this.container);if(b||!jq.browser.firefox){this.container.style.visibility="hidden";if(d){d()}}else{this.isHiding=true;var a=this;e.hide(160,function(){e.css("visibility","hidden");e.show();if(d){d()}a.isHiding=false})}hideMeOnPopup(false);jq(document.body).unbind("mousedown")};function initDatePicker(a,c){var b=new R9DatePicker(a,c.icon_id,c.input_id,c.dow_id);jq("#"+c.icon_id).click(function(d){b.setCalendarFocused(true);b.toggle(d.target);return true});jq("#"+c.input_id).blur(function(d){b.clearInterval();b.setDayOfMonthFocused(false);b.scheduleFocusCheck();return true}).focus(function(d){b.setDayOfMonthFocused(true);b.setInterval();if(!b.isVisible()){b.toggle(jq("#"+c.icon_id).get(0))}return true});if(c.initial_date&&c.initial_date.length>0){b.setFromCanonical(c.initial_date)}else{b.clearDay()}if(c.chg_callback_func&&typeof c.chg_callback_func=="function"){b.onChangeCB=c.chg_callback_func}return b}function setCalendarLoadedHook(a){if(a){whenFrameLoadedHook=a}}function R9DoubleDatePicker(a,e,d,c){setCalendarLoadedHook(d);if(c==null){c=false}this.pop=new R9CalPopup(a.calid,a.singleMonth,c);var f=initDatePicker(this.pop,a);var b=initDatePicker(this.pop,e);if(a.initial_date&&a.initial_date.length>0&&((!e.initial_date)||e.initial_date.length==0)){b.setMonthYearFromCanonical(a.initial_date)}if(e.initial_date&&e.initial_date>0&&((!a.initial_date)||a.initial_date.length==0)){f.setMonthYearFromCanonical(e.initial_date)}this.firstDate=this.departDate=this.checkinDate=this.pickupDate=f;this.secondDate=this.returnDate=this.checkoutDate=this.dropoffDate=b;f.onDateChanged=function(g,k,l){var j=f.valueAsDate();var h=b.valueAsDate(1);if(j&&h&&j>h){b.setDate(g,null,l)}b.markDate(f.fields());if(typeof f.onChangeCB=="function"){f.onChangeCB(this)}};b.onDateChanged=function(g,k,l){var j=f.valueAsDate(1);var h=b.valueAsDate();if(j&&h&&j>h){f.setDate(g,null,l);b.clearMarkedDate()}if(typeof b.onChangeCB=="function"){b.onChangeCB(this)}};if(document.getElementById(a.calid)==null){document.body.appendChild(this.pop.container)}else{this.pop.container=document.getElementById(a.calid).parentNode}}(function(){var a=new Date();a.setFullYear(a.getFullYear()+1);jq.datepicker.setDefaults({altFormat:"D, d M yy",closeText:"Close",currentText:"Current",dateFormat:"dd/mm/yy",dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesMin:"S,M,T,W,T,F,S".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),firstDay:parseInt("2")-1,maxDate:a,minDate:new Date(),monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),prevText:"Prev",nextText:"Next",showAnim:"",showMonthAfterYear:false})})();jq.r9datepicker={parseDate:function(a){return jq.datepicker.parseDate("mm/dd/yy",a)}};jq.fn.r9datepicker=function(k){var g=k.defaultDate,b=k.dateFormat||"dd/mm/yy",c="dd/mm/yyyy";if(g){this.val(jq.datepicker.formatDate(b,g,k));jq(k.altField).text(jq.datepicker.formatDate(k.altFormat||"D, d M yy",g,k))}else{jq(k.altField).text(c)}var j=k.beforeShow;var a=k.onClose;var e=k.onSelect;var f=this;var h=function(d,n,l,m){jq(f).trigger(d,[m]);if(n){n(m,l)}};k.beforeShow=function(d,l){h("sbopen",j,d,l)};k.onClose=function(l,d){h("sbclose",a,l,d)};k.onSelect=function(l,d){h("sbset",e,l,d)};return this.attr({autocomplete:"off",autocapitalize:"off",autocorrect:"off"}).datepicker(k)};var R9=R9||{};R9.dp=(function(){function a(e,d){return(c(d)-c(e))/86400000}function b(e,f){var d=e[f];delete e[f];return d}function c(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}return{doublePicker:function(s,q){var f=s.defaultDate,d=q.defaultDate,j=jq(s.altField),g=jq(q.altField),o=b(s,"onSelect")||jq.noop,m=b(q,"onSelect")||jq.noop,n=jq(b(s,"selector")),l=jq(b(q,"selector")),r=s.resetAfterDays||30,e=s.minRangeDays||0,k=s.numberOfMonths||2,h=q.numberOfMonths||2,p=s.pop2==undefined?true:s.pop2;n.r9datepicker(jq.extend({beforeShowDay:function(t){return[true,(t&&d&&t.getTime()==d.getTime())?"ui-datepicker-marked-day":""]},numberOfMonths:k,onSelect:function(w,v){f=n.datepicker("getDate");var u=d&&a(f,d);if(!d||u>r||u<e){l.datepicker("setDate",null).datepicker("option","defaultDate",f);g.text("dd/mm/yyyy")}o.call(this,w,v);if(p){if(l.is(":visible")&&l.css("visibility")!="hidden"){function t(){l.focus()}window.setTimeout(t,50)}}}},s));l.r9datepicker(jq.extend({beforeShowDay:function(t){return[true,(f&&t&&f.getTime()==t.getTime())?"ui-datepicker-marked-day":""]},numberOfMonths:h,onSelect:function(v,u){d=l.datepicker("getDate");var t=f&&a(f,d);if(!f||t<e){n.datepicker("setDate",null).datepicker("option","defaultDate",d);j.text("dd/mm/yyyy")}m.call(this,v,u);l.r9datepicker("hide")}},q))}}})();if(typeof R9==="undefined"){R9=new Object()}R9.form={_getFormType:function(a){if(typeof a.tab!=="undefined"){return a.tab.value}else{return"unknown"}},_getUseCompareTo:function(a){if(typeof a.doCompareTo!=="undefined"){if(a.doCompareTo.value===true||a.doCompareTo.value==="true"){return true}}return false},_checkFormPopulated:function(a){if(typeof a=="undefined"||typeof a.value=="undefined"||a.value.length==0){return false}return true},_setDisabledImage:function(a){jq(a).attr("src","/v53470/images/button/redesign/a-search-button-fd-disabled.png").prop("disabled",true)},_dateFormat:"dd/mm/yy",_grabDate:function(b,a){if(typeof b!=="undefined"){return jq.datepicker.parseDate(R9.form._dateFormat,b)}else{if(typeof a!=="undefined"){return jq.datepicker.parseDate(R9.form._dateFormat,a)}else{return null}}},_submit:function(d,a){if(a(d)===false){return false}jq(d).find(".searchbutton").unbind("mouseup").unbind("mousedown");window.setTimeout("R9.form._setDisabledImage('.searchbtn input')",1);if(R9.form._getUseCompareTo(d)===true){R9.CompareTo.launch(d)}var e=generateSearchUrl(d);var c=jq(d).attr("action");var b=null;if(R9.form._useInServlet(d)){if(e!=null){b=R9.form._getInServletLink(d,e)}else{b=R9.form._getInServletLink(d,c+"?"+jq(d).serialize())}}else{if(e!=null){b=e}else{b=null}}if(b!=null){if(jq(d).attr("target")=="_blank"){window.open(b)}else{document.location.href=b}return false}return true},_useInServlet:function(a){if(typeof a.useInLink!="undefined"&&a.useInLink.value=="true"){return true}return false},_getInServletLink:function(b,a){return R9.form._getInServletLinkPrefix(b)+encodeURI(a)},_getInServletLinkPrefix:function(b){var a="";var c="";if(typeof b.ai!="undefined"&&typeof b.ai.value!="undefined"){a=b.ai.value}if(typeof b.p!="undefined"&&typeof b.p.value!="undefined"){c=b.p.value}return"/in?a="+encodeURI(a)+"&p="+encodeURI(c)+"&url="},_compareToCallback:function(b){var a=jq(this).closest("form").get(0);R9.form._smartboxPopulate(a,this,b);R9.CompareTo.smartboxCallback(a)},_smartboxCallback:function(b){var a=jq(this).closest("form").get(0);R9.form._smartboxPopulate(a,this,b)},_smartboxPopulate:function(c,a,d){var b=R9.form._getFormType(c);if(b==="flights"){if(jq(a).is("input[name=origin]")){c.origincode.value=d.id}else{if(jq(a).is("input[name=destination]")){c.destcode.value=d.id}}}else{if(b==="hotels"){c.citycode.value=d.id;if(typeof c.hid!="undefined"){c.hid.value=d.hid||""}if(typeof c.lmid!="undefined"){c.lmid.value=d.lmid||""}}else{if(b==="cars"){if(jq(a).is("input[name=location]")){c.citycode1.value=d.id}else{if(jq(a).is("input[name=location2]")){c.citycode2.value=d.id}}}else{if(b==="vacations"){if(jq(a).is("input[name=origin]")){c.origincode.value=d.id}else{if(jq(a).is("input[name=destination]")){c.destcode.value=d.id}}}}}}}};R9.form.flight={_oneWayToggle:function(a){var b=jq(a.target);var c=jq(b).closest("form");R9.form.flight._oneWayRefresh(b,c)},_oneWayRefresh:function(a,b){if(a.val()==="y"){jq(b).find(".roundtriponly").addClass("oneWayHidden")}else{if(a.val()==="n"){jq(b).find(".roundtriponly").removeClass("oneWayHidden")}else{if(a.val()==="m"){document.location.href="/flights?mc=y"}}}},_clickFlexOption:function(b,a){jq(b).find("input[name=dtFlexCat]").each(function(){if(jq(this).val()==a){jq(this).click()}})},_flexDateClick:function(b){var c=b.target;var e=jq(c).closest("form");var a=jq(e).find(".flexOptionButtons");var d=jq(e).find(".myDatesFlexible");if(a.is(":visible")){a.animate({width:"toggle"},600);d.removeClass("open");jq(e).find("input[name=dtFlexCat][value=exact]").prop("checked",true).trigger("click")}else{d.addClass("open");a.animate({width:"toggle"},600);jq(e).find("input[name=dtFlexCat][value=plusminusthree]").prop("checked",true).trigger("click")}return false},_flexTypeToggle:function(a){var b=jq(a.target);var c=jq(b).closest("form");return R9.form.flight._flexTypeRefresh(b,c)},_flexTypeRefresh:function(c,b){var a=".flexAwarePlusminusthree";if(c.val()==="exact"){a=".flexAwareExact"}else{if(c.val()==="weekend"){a=".flexAwareWeekend"}else{if(c.val()==="openflex"){a=".flexAwareOpenflex"}}}R9.form.flight._showCorrectFlexType(b,a);return true},_showCorrectFlexType:function(b,a){b.find(".flexAware").addClass("flexTypeHidden");b.find(a).removeClass("flexTypeHidden")},_setFlexValues:function(b,a){jq(b).find("select[name=depart_date_flex] option[value="+a+"]").prop("selected",true);jq(b).find("select[name=return_date_flex] option[value="+a+"]").prop("selected",true)},_hasFlexDates:function(a){if(typeof a.depart_date_flex!=="undefined"){return true}else{return false}},_getFlexType:function(a){var c="exact";if(R9.form.flight._hasFlexDates(a)){var b=jq(a).find("input[name=dtFlexCat]:checked");if(typeof b!="undefined"){c=b.val()}}return c},_getSharedFlightSwitchParams:function(a){var b="";b+="origin="+a.origin.value;b+="&origincode="+a.origincode.value;b+="&destination="+a.destination.value;b+="&destinationcode="+a.destcode.value;if(typeof a.nearbyO!=="undefined"&&typeof a.nearbyD!=="undefined"){b+="&nearbyO="+((document.flights.nearbyO.checked)?"y":"n");b+="&nearbyD="+((document.flights.nearbyD.checked)?"y":"n")}return b},_cabinChange:function(a){var b=a.target},_check:function(b){var a="";if(R9.form._checkFormPopulated(b.origin)===false){a="Please enter a 'from' airport."}else{if(R9.form._checkFormPopulated(b.destination)===false){a="Please enter a 'to' airport."}else{if(b.origincode.value===b.destcode.value){a="Please enter unique 'from' and 'to' airports."}}}var c=R9.form.flight._getFlexType(b);if(c=="exact"||c=="plusminusthree"){if(R9.form._checkFormPopulated(b.depart_date)===false){a="Please enter a 'Depart' date."}else{if(R9.form._checkFormPopulated(b.return_date)===false&&jq(b).find("input:radio[name=oneway]:checked").val()==="n"){a="Please enter a 'Return' date."}}}if(a.length>0){alert(a);return false}else{return true}},_submit:function(a){var c=a.target;if(R9.form.flight._hasFlexDates(c)){var b=jq(c).find("input[name=dtFlexCat]:checked").val();if(b=="exact"){R9.form.flight._setFlexValues(c,"exact")}}return R9.form._submit(c,R9.form.flight._check)},init:function(d,c,b,a){if(R9.form._getUseCompareTo(d)===true){jq(d.origin).smartbox({callback:R9.form._compareToCallback,searchType:"air"});jq(d.destination).smartbox({callback:R9.form._compareToCallback,searchType:"air"});R9.CompareTo.init(d)}else{jq(d.origin).smartbox({callback:R9.form._smartboxCallback,searchType:"air"});jq(d.destination).smartbox({callback:R9.form._smartboxCallback,searchType:"air"})}var f=jq(d).find("input[name=depart_date]");var e=jq(d).find("input[name=return_date]");c=R9.form._grabDate(c,f.val());b=R9.form._grabDate(b,e.val());if(typeof a=="undefined"){a=2}R9.dp.doublePicker({selector:f,altField:jq(d).find(".departDateHelperField"),defaultDate:c,numberOfMonths:a},{selector:e,altField:jq(d).find(".returnDateHelperField"),defaultDate:b,numberOfMonths:a});jq(d.oneway).click(R9.form.flight._oneWayToggle);if(typeof d.cabin!=="undefined"){jq(d.cabin).click(R9.form.flight._cabinChange)}if(R9.form.flight._hasFlexDates(d)){jq(d).find(".flexDateLink").click(R9.form.flight._flexDateClick);jq(d.dtFlexCat).click(R9.form.flight._flexTypeToggle);R9.form.flight._setFlexValues(d,"plusminusthree");R9.form.flight._flexTypeRefresh(jq("input[name=dtFlexCat]:checked"),jq(d))}jq(d).submit(R9.form.flight._submit).attr("method","post")}};R9.form.hotel={_emptyGuestList:function(a){while(a.options.length){a.options[0]=null}},_fillGuestList:function(a,b,f,g,j){var d=a.find("[name=guestsOptionPostfixSingular]").val();var e=a.find("[name=guestsOptionPostfixPlural]").val();if(typeof d=="undefined"){d=""}if(typeof e=="undefined"){e=""}var h;for(i=f;i<=g;i++){var c;if(i==1){c=new Option(i+" "+d,i)}else{c=new Option(i+" "+e,i)}h=b.length;b.options[h]=c;if(j==i){b.selectedIndex=h}}if(b.length>0&&b.selectedIndex<0){b.selectedIndex=0}},_roomsChanged:function(c){var d=c.target;var e=jq(d).closest("form");var b=jq(d).val();var a=jq(e).find("select[name=guests1]");var h=jq(e).find("select[name=guests2]");var g=jq(e).find(".guestsWrapper");if(b=="1"){jq(g[0]).show();jq(g[1]).hide();var f=parseInt(h.val(),10);a.val(f<4?f:4)}else{if(b=="2"){jq(g[0]).hide();jq(g[1]).show();var f=parseInt(a.val(),10);h.val(f==1?2:f)}}},_clearDates:function(a){var b=a.target;var c=jq(b).closest("form");jq(c).find("input[name=checkin_date]").val("");jq(c).find("input[name=checkout_date]").val("");jq(c).find(".checkin_date_label").html("dd/mm/yyyy");jq(c).find(".checkout_date_label").html("dd/mm/yyyy")},_check:function(c){var a="";var b=jq(c).data("datesOptional");if(R9.form._checkFormPopulated(c.othercity)===false){a="Please enter a city."}else{if(!b&&R9.form._checkFormPopulated(c.checkin_date)===false){a="Please enter a check-in date."}else{if(!b&&R9.form._checkFormPopulated(c.checkout_date)===false){a="Please enter a check-out date."}}}if(a.length>0){alert(a);return false}else{return true}},_submit:function(a){var b=a.target;return R9.form._submit(b,R9.form.hotel._check)},init:function(a,j,b,c,f){var h=jq(a.othercity);var g=h.is(":focus");h.blur();if(R9.form._getUseCompareTo(a)===true){h.smartbox({callback:R9.form._compareToCallback,searchType:"hotel"});R9.CompareTo.init(a)}else{h.smartbox({callback:R9.form._smartboxCallback,searchType:"hotel",smartUrl:"/f/smarty"})}if(g){h.focus()}var d=jq(a).find("input[name=checkin_date]");var e=jq(a).find("input[name=checkout_date]");j=R9.form._grabDate(j,d.val());b=R9.form._grabDate(b,e.val());if(typeof c=="undefined"){c=2}R9.dp.doublePicker({selector:d,altField:jq(a).find(".checkinDateHelperField"),defaultDate:j,numberOfMonths:c},{selector:e,altField:jq(a).find(".checkoutDateHelperField"),defaultDate:b,numberOfMonths:c});jq(a.rooms).change(R9.form.hotel._roomsChanged);jq(".clearDates").click(R9.form.hotel._clearDates);jq(a).submit(R9.form.hotel._submit).data("datesOptional",!!f).attr("method","post")}};R9.form.car={_oneWayToggle:function(a){var b=a.target;var c=jq(b).closest("form");var e=c.find(".pickupLocationSection");var d=c.find(".dropoffLocationSection");if(b.value==="y"){e.addClass("fieldBlockCol");c.find(".pickupLocationLabel").hide();c.find(".pickupLocationLabelOneWay").show();d.show()}else{if(b.value==="n"){e.removeClass("fieldBlockCol");c.find(".pickupLocationLabel").show();c.find(".pickupLocationLabelOneWay").hide();d.hide()}}},_check:function(b){var a="";if(R9.form._checkFormPopulated(b.citycode1)===false&&R9.form._checkFormPopulated(b.location)===false){a="Please pick a pick-up location."}else{if(R9.form._checkFormPopulated(b.pickup_date)===false){a="Please enter a pick-up date."}else{if(R9.form._checkFormPopulated(b.dropoff_date)===false){a="Please enter a drop-off date."}}}if(a.length>0){alert(a);return false}else{return true}},_submit:function(a){var b=a.target;return R9.form._submit(b,R9.form.car._check)},init:function(f,e,c,b){if(R9.form._getUseCompareTo(f)===true){jq(f.location).smartbox({callback:R9.form._compareToCallback,searchType:"car"});if(typeof f.location2!=="undefined"){jq(f.location2).smartbox({callback:R9.form._compareToCallback,searchType:"car"})}R9.CompareTo.init(f)}else{jq(f.location).smartbox({callback:R9.form._smartboxCallback,searchType:"car"});if(typeof f.location2!=="undefined"){jq(f.location2).smartbox({callback:R9.form._smartboxCallback,searchType:"car"})}}var d=jq(f).find("input[name=pickup_date]");var a=jq(f).find("input[name=dropoff_date]");e=R9.form._grabDate(e,d.val());c=R9.form._grabDate(c,a.val());if(typeof b=="undefined"){b=2}R9.dp.doublePicker({selector:d,altField:jq(f).find(".pickupDateHelperField"),defaultDate:e,numberOfMonths:b},{selector:a,altField:jq(f).find(".dropoffDateHelperField"),defaultDate:c,numberOfMonths:b});if(typeof f.oneway!=="undefined"){jq(f.oneway).click(R9.form.car._oneWayToggle)}jq(f).submit(R9.form.car._submit).attr("method","post")}};R9.form.vacation={_displayChildAges:function(a){var d=a.target;var b=parseInt(jq(d).val());var e=jq(d).closest("form");if(b<1){e.find(".childAgeTitle").hide()}else{e.find(".childAgeTitle").show()}var c=0;for(c=1;c<=4;c++){if(c<=b){e.find(".childAge"+c).show()}else{e.find(".childAge"+c).hide()}}},_check:function(b){var a="";if(R9.form._checkFormPopulated(b.origin)===false){a="Please enter a 'from' airport."}else{if(R9.form._checkFormPopulated(b.destination)===false){a="Please enter a 'to' airport."}else{if(R9.form._checkFormPopulated(b.depart_date)===false){a="Please enter a 'Depart' date."}else{if(R9.form._checkFormPopulated(b.return_date)===false){a="Please enter a 'Return' date."}}}}if(a.length>0){alert(a);return false}else{return true}},_submit:function(a){var b=a.target;return R9.form._submit(b,R9.form.vacation._check)},init:function(d,c,b,a){if(R9.form._getUseCompareTo(d)===true){jq(d.origin).smartbox({callback:R9.form._compareToCallback,searchType:"air"});jq(d.destination).smartbox({callback:R9.form._compareToCallback,searchType:"air"});R9.CompareTo.init(d)}else{jq(d.origin).smartbox({callback:R9.form._smartboxCallback,searchType:"air"});jq(d.destination).smartbox({callback:R9.form._smartboxCallback,searchType:"air"})}var f=jq(d).find("input[name=depart_date]");var e=jq(d).find("input[name=return_date]");c=R9.form._grabDate(c,f.val());b=R9.form._grabDate(b,e.val());if(typeof a=="undefined"){a=2}R9.dp.doublePicker({selector:f,altField:jq(d).find(".departDateHelperField"),defaultDate:c,numberOfMonths:a},{selector:e,altField:jq(d).find(".returnDateHelperField"),defaultDate:b,numberOfMonths:a});jq(d.kids).change(R9.form.vacation._displayChildAges).change();jq(d).submit(R9.form.vacation._submit).attr("method","post")}};R9.form.cruise={init:function(a){}};R9.form.deal={init:function(a){jq(a.dest).smartbox({callback:R9.form._smartboxCallback,searchType:"deal"});jq(a).submit(R9.form.deal._submit).attr("method","post");jq(a).find("a.exampleDeal").click(R9.form.deal._exampleClick)},_exampleClick:function(){var b=jq(this).text();var a=jq(this).closest("form");a.find("input#destination").val(b);a.submit()},_check:function(){return true},_submit:function(a){var b=a.target;return R9.form._submit(b,R9.form.deal._check)}};function hideSearchBox(){toggleFaderPane(false);jq("#popupSearch,table.popupsearch").hide()}function showcalendarhelp(){var b="/trips/calendarhelp";var c=window.open(b,"calhelp","height=500,width=515,resizable,scrollbars");try{c.focus()}catch(a){}}if(typeof R9==="undefined"){R9=new Object()}R9.form={_getFormType:function(a){if(typeof a.tab!=="undefined"){return a.tab.value}else{return"unknown"}},_getUseCompareTo:function(a){if(typeof a.doCompareTo!=="undefined"){if(a.doCompareTo.value===true||a.doCompareTo.value==="true"){return true}}return false},_checkFormPopulated:function(a){if(typeof a=="undefined"||typeof a.value=="undefined"||a.value.length==0){return false}return true},_setDisabledImage:function(a){jq(a).attr("src","/v53470/images/button/redesign/a-search-button-fd-disabled.png").prop("disabled",true)},_dateFormat:"dd/mm/yy",_grabDate:function(b,a){if(typeof b!=="undefined"){return jq.datepicker.parseDate(R9.form._dateFormat,b)}else{if(typeof a!=="undefined"){return jq.datepicker.parseDate(R9.form._dateFormat,a)}else{return null}}},_submit:function(d,a){if(a(d)===false){return false}jq(d).find(".searchbutton").unbind("mouseup").unbind("mousedown");window.setTimeout("R9.form._setDisabledImage('.searchbtn input')",1);if(R9.form._getUseCompareTo(d)===true){R9.CompareTo.launch(d)}var e=generateSearchUrl(d);var c=jq(d).attr("action");var b=null;if(R9.form._useInServlet(d)){if(e!=null){b=R9.form._getInServletLink(d,e)}else{b=R9.form._getInServletLink(d,c+"?"+jq(d).serialize())}}else{if(e!=null){b=e}else{b=null}}if(b!=null){if(jq(d).attr("target")=="_blank"){window.open(b)}else{document.location.href=b}return false}return true},_useInServlet:function(a){if(typeof a.useInLink!="undefined"&&a.useInLink.value=="true"){return true}return false},_getInServletLink:function(b,a){return R9.form._getInServletLinkPrefix(b)+encodeURI(a)},_getInServletLinkPrefix:function(b){var a="";var c="";if(typeof b.ai!="undefined"&&typeof b.ai.value!="undefined"){a=b.ai.value}if(typeof b.p!="undefined"&&typeof b.p.value!="undefined"){c=b.p.value}return"/in?a="+encodeURI(a)+"&p="+encodeURI(c)+"&url="},_compareToCallback:function(b){var a=jq(this).closest("form").get(0);R9.form._smartboxPopulate(a,this,b);R9.CompareTo.smartboxCallback(a)},_smartboxCallback:function(b){var a=jq(this).closest("form").get(0);R9.form._smartboxPopulate(a,this,b)},_smartboxPopulate:function(c,a,d){var b=R9.form._getFormType(c);if(b==="flights"){if(jq(a).is("input[name=origin]")){c.origincode.value=d.id}else{if(jq(a).is("input[name=destination]")){c.destcode.value=d.id}}}else{if(b==="hotels"){c.citycode.value=d.id;if(typeof c.hid!="undefined"){c.hid.value=d.hid||""}if(typeof c.lmid!="undefined"){c.lmid.value=d.lmid||""}}else{if(b==="cars"){if(jq(a).is("input[name=location]")){c.citycode1.value=d.id}else{if(jq(a).is("input[name=location2]")){c.citycode2.value=d.id}}}else{if(b==="vacations"){if(jq(a).is("input[name=origin]")){c.origincode.value=d.id}else{if(jq(a).is("input[name=destination]")){c.destcode.value=d.id}}}}}}}};R9.form.flight={_oneWayToggle:function(a){var b=jq(a.target);var c=jq(b).closest("form");R9.form.flight._oneWayRefresh(b,c)},_oneWayRefresh:function(a,b){if(a.val()==="y"){jq(b).find(".roundtriponly").addClass("oneWayHidden")}else{if(a.val()==="n"){jq(b).find(".roundtriponly").removeClass("oneWayHidden")}else{if(a.val()==="m"){document.location.href="/flights?mc=y"}}}},_clickFlexOption:function(b,a){jq(b).find("input[name=dtFlexCat]").each(function(){if(jq(this).val()==a){jq(this).click()}})},_flexDateClick:function(b){var c=b.target;var e=jq(c).closest("form");var a=jq(e).find(".flexOptionButtons");var d=jq(e).find(".myDatesFlexible");if(a.is(":visible")){a.animate({width:"toggle"},600);d.removeClass("open");jq(e).find("input[name=dtFlexCat][value=exact]").prop("checked",true).trigger("click")}else{d.addClass("open");a.animate({width:"toggle"},600);jq(e).find("input[name=dtFlexCat][value=plusminusthree]").prop("checked",true).trigger("click")}return false},_flexTypeToggle:function(a){var b=jq(a.target);var c=jq(b).closest("form");return R9.form.flight._flexTypeRefresh(b,c)},_flexTypeRefresh:function(c,b){var a=".flexAwarePlusminusthree";if(c.val()==="exact"){a=".flexAwareExact"}else{if(c.val()==="weekend"){a=".flexAwareWeekend"}else{if(c.val()==="openflex"){a=".flexAwareOpenflex"}}}R9.form.flight._showCorrectFlexType(b,a);return true},_showCorrectFlexType:function(b,a){b.find(".flexAware").addClass("flexTypeHidden");b.find(a).removeClass("flexTypeHidden")},_setFlexValues:function(b,a){jq(b).find("select[name=depart_date_flex] option[value="+a+"]").prop("selected",true);jq(b).find("select[name=return_date_flex] option[value="+a+"]").prop("selected",true)},_hasFlexDates:function(a){if(typeof a.depart_date_flex!=="undefined"){return true}else{return false}},_getFlexType:function(a){var c="exact";if(R9.form.flight._hasFlexDates(a)){var b=jq(a).find("input[name=dtFlexCat]:checked");if(typeof b!="undefined"){c=b.val()}}return c},_getSharedFlightSwitchParams:function(a){var b="";b+="origin="+a.origin.value;b+="&origincode="+a.origincode.value;b+="&destination="+a.destination.value;b+="&destinationcode="+a.destcode.value;if(typeof a.nearbyO!=="undefined"&&typeof a.nearbyD!=="undefined"){b+="&nearbyO="+((document.flights.nearbyO.checked)?"y":"n");b+="&nearbyD="+((document.flights.nearbyD.checked)?"y":"n")}return b},_cabinChange:function(a){var b=a.target},_check:function(b){var a="";if(R9.form._checkFormPopulated(b.origin)===false){a="Please enter a 'from' airport."}else{if(R9.form._checkFormPopulated(b.destination)===false){a="Please enter a 'to' airport."}else{if(b.origincode.value===b.destcode.value){a="Please enter unique 'from' and 'to' airports."}}}var c=R9.form.flight._getFlexType(b);if(c=="exact"||c=="plusminusthree"){if(R9.form._checkFormPopulated(b.depart_date)===false){a="Please enter a 'Depart' date."}else{if(R9.form._checkFormPopulated(b.return_date)===false&&jq(b).find("input:radio[name=oneway]:checked").val()==="n"){a="Please enter a 'Return' date."}}}if(a.length>0){alert(a);return false}else{return true}},_submit:function(a){var c=a.target;if(R9.form.flight._hasFlexDates(c)){var b=jq(c).find("input[name=dtFlexCat]:checked").val();if(b=="exact"){R9.form.flight._setFlexValues(c,"exact")}}return R9.form._submit(c,R9.form.flight._check)},init:function(d,c,b,a){if(R9.form._getUseCompareTo(d)===true){jq(d.origin).smartbox({callback:R9.form._compareToCallback,searchType:"air"});jq(d.destination).smartbox({callback:R9.form._compareToCallback,searchType:"air"});R9.CompareTo.init(d)}else{jq(d.origin).smartbox({callback:R9.form._smartboxCallback,searchType:"air"});jq(d.destination).smartbox({callback:R9.form._smartboxCallback,searchType:"air"})}var f=jq(d).find("input[name=depart_date]");var e=jq(d).find("input[name=return_date]");c=R9.form._grabDate(c,f.val());b=R9.form._grabDate(b,e.val());if(typeof a=="undefined"){a=2}R9.dp.doublePicker({selector:f,altField:jq(d).find(".departDateHelperField"),defaultDate:c,numberOfMonths:a},{selector:e,altField:jq(d).find(".returnDateHelperField"),defaultDate:b,numberOfMonths:a});jq(d.oneway).click(R9.form.flight._oneWayToggle);if(typeof d.cabin!=="undefined"){jq(d.cabin).click(R9.form.flight._cabinChange)}if(R9.form.flight._hasFlexDates(d)){jq(d).find(".flexDateLink").click(R9.form.flight._flexDateClick);jq(d.dtFlexCat).click(R9.form.flight._flexTypeToggle);R9.form.flight._setFlexValues(d,"plusminusthree");R9.form.flight._flexTypeRefresh(jq("input[name=dtFlexCat]:checked"),jq(d))}jq(d).submit(R9.form.flight._submit).attr("method","post")}};R9.form.hotel={_emptyGuestList:function(a){while(a.options.length){a.options[0]=null}},_fillGuestList:function(a,b,f,g,j){var d=a.find("[name=guestsOptionPostfixSingular]").val();var e=a.find("[name=guestsOptionPostfixPlural]").val();if(typeof d=="undefined"){d=""}if(typeof e=="undefined"){e=""}var h;for(i=f;i<=g;i++){var c;if(i==1){c=new Option(i+" "+d,i)}else{c=new Option(i+" "+e,i)}h=b.length;b.options[h]=c;if(j==i){b.selectedIndex=h}}if(b.length>0&&b.selectedIndex<0){b.selectedIndex=0}},_roomsChanged:function(c){var d=c.target;var e=jq(d).closest("form");var b=jq(d).val();var a=jq(e).find("select[name=guests1]");var h=jq(e).find("select[name=guests2]");var g=jq(e).find(".guestsWrapper");if(b=="1"){jq(g[0]).show();jq(g[1]).hide();var f=parseInt(h.val(),10);a.val(f<4?f:4)}else{if(b=="2"){jq(g[0]).hide();jq(g[1]).show();var f=parseInt(a.val(),10);h.val(f==1?2:f)}}},_clearDates:function(a){var b=a.target;var c=jq(b).closest("form");jq(c).find("input[name=checkin_date]").val("");jq(c).find("input[name=checkout_date]").val("");jq(c).find(".checkin_date_label").html("dd/mm/yyyy");jq(c).find(".checkout_date_label").html("dd/mm/yyyy")},_check:function(c){var a="";var b=jq(c).data("datesOptional");if(R9.form._checkFormPopulated(c.othercity)===false){a="Please enter a city."}else{if(!b&&R9.form._checkFormPopulated(c.checkin_date)===false){a="Please enter a check-in date."}else{if(!b&&R9.form._checkFormPopulated(c.checkout_date)===false){a="Please enter a check-out date."}}}if(a.length>0){alert(a);return false}else{return true}},_submit:function(a){var b=a.target;return R9.form._submit(b,R9.form.hotel._check)},init:function(a,j,b,c,f){var h=jq(a.othercity);var g=h.is(":focus");h.blur();if(R9.form._getUseCompareTo(a)===true){h.smartbox({callback:R9.form._compareToCallback,searchType:"hotel"});R9.CompareTo.init(a)}else{h.smartbox({callback:R9.form._smartboxCallback,searchType:"hotel",smartUrl:"/f/smarty"})}if(g){h.focus()}var d=jq(a).find("input[name=checkin_date]");var e=jq(a).find("input[name=checkout_date]");j=R9.form._grabDate(j,d.val());b=R9.form._grabDate(b,e.val());if(typeof c=="undefined"){c=2}R9.dp.doublePicker({selector:d,altField:jq(a).find(".checkinDateHelperField"),defaultDate:j,numberOfMonths:c},{selector:e,altField:jq(a).find(".checkoutDateHelperField"),defaultDate:b,numberOfMonths:c});jq(a.rooms).change(R9.form.hotel._roomsChanged);jq(".clearDates").click(R9.form.hotel._clearDates);jq(a).submit(R9.form.hotel._submit).data("datesOptional",!!f).attr("method","post")}};R9.form.car={_oneWayToggle:function(a){var b=a.target;var c=jq(b).closest("form");var e=c.find(".pickupLocationSection");var d=c.find(".dropoffLocationSection");if(b.value==="y"){e.addClass("fieldBlockCol");c.find(".pickupLocationLabel").hide();c.find(".pickupLocationLabelOneWay").show();d.show()}else{if(b.value==="n"){e.removeClass("fieldBlockCol");c.find(".pickupLocationLabel").show();c.find(".pickupLocationLabelOneWay").hide();d.hide()}}},_check:function(b){var a="";if(R9.form._checkFormPopulated(b.citycode1)===false&&R9.form._checkFormPopulated(b.location)===false){a="Please pick a pick-up location."}else{if(R9.form._checkFormPopulated(b.pickup_date)===false){a="Please enter a pick-up date."}else{if(R9.form._checkFormPopulated(b.dropoff_date)===false){a="Please enter a drop-off date."}}}if(a.length>0){alert(a);return false}else{return true}},_submit:function(a){var b=a.target;return R9.form._submit(b,R9.form.car._check)},init:function(f,e,c,b){if(R9.form._getUseCompareTo(f)===true){jq(f.location).smartbox({callback:R9.form._compareToCallback,searchType:"car"});if(typeof f.location2!=="undefined"){jq(f.location2).smartbox({callback:R9.form._compareToCallback,searchType:"car"})}R9.CompareTo.init(f)}else{jq(f.location).smartbox({callback:R9.form._smartboxCallback,searchType:"car"});if(typeof f.location2!=="undefined"){jq(f.location2).smartbox({callback:R9.form._smartboxCallback,searchType:"car"})}}var d=jq(f).find("input[name=pickup_date]");var a=jq(f).find("input[name=dropoff_date]");e=R9.form._grabDate(e,d.val());c=R9.form._grabDate(c,a.val());if(typeof b=="undefined"){b=2}R9.dp.doublePicker({selector:d,altField:jq(f).find(".pickupDateHelperField"),defaultDate:e,numberOfMonths:b},{selector:a,altField:jq(f).find(".dropoffDateHelperField"),defaultDate:c,numberOfMonths:b});if(typeof f.oneway!=="undefined"){jq(f.oneway).click(R9.form.car._oneWayToggle)}jq(f).submit(R9.form.car._submit).attr("method","post")}};R9.form.vacation={_displayChildAges:function(a){var d=a.target;var b=parseInt(jq(d).val());var e=jq(d).closest("form");if(b<1){e.find(".childAgeTitle").hide()}else{e.find(".childAgeTitle").show()}var c=0;for(c=1;c<=4;c++){if(c<=b){e.find(".childAge"+c).show()}else{e.find(".childAge"+c).hide()}}},_check:function(b){var a="";if(R9.form._checkFormPopulated(b.origin)===false){a="Please enter a 'from' airport."}else{if(R9.form._checkFormPopulated(b.destination)===false){a="Please enter a 'to' airport."}else{if(R9.form._checkFormPopulated(b.depart_date)===false){a="Please enter a 'Depart' date."}else{if(R9.form._checkFormPopulated(b.return_date)===false){a="Please enter a 'Return' date."}}}}if(a.length>0){alert(a);return false}else{return true}},_submit:function(a){var b=a.target;return R9.form._submit(b,R9.form.vacation._check)},init:function(d,c,b,a){if(R9.form._getUseCompareTo(d)===true){jq(d.origin).smartbox({callback:R9.form._compareToCallback,searchType:"air"});jq(d.destination).smartbox({callback:R9.form._compareToCallback,searchType:"air"});R9.CompareTo.init(d)}else{jq(d.origin).smartbox({callback:R9.form._smartboxCallback,searchType:"air"});jq(d.destination).smartbox({callback:R9.form._smartboxCallback,searchType:"air"})}var f=jq(d).find("input[name=depart_date]");var e=jq(d).find("input[name=return_date]");c=R9.form._grabDate(c,f.val());b=R9.form._grabDate(b,e.val());if(typeof a=="undefined"){a=2}R9.dp.doublePicker({selector:f,altField:jq(d).find(".departDateHelperField"),defaultDate:c,numberOfMonths:a},{selector:e,altField:jq(d).find(".returnDateHelperField"),defaultDate:b,numberOfMonths:a});jq(d.kids).change(R9.form.vacation._displayChildAges).change();jq(d).submit(R9.form.vacation._submit).attr("method","post")}};R9.form.cruise={init:function(a){}};R9.form.deal={init:function(a){jq(a.dest).smartbox({callback:R9.form._smartboxCallback,searchType:"deal"});jq(a).submit(R9.form.deal._submit).attr("method","post");jq(a).find("a.exampleDeal").click(R9.form.deal._exampleClick)},_exampleClick:function(){var b=jq(this).text();var a=jq(this).closest("form");a.find("input#destination").val(b);a.submit()},_check:function(){return true},_submit:function(a){var b=a.target;return R9.form._submit(b,R9.form.deal._check)}};function jqtoggle(a){jq(a).toggle()}var R9CalDayOfWeek=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function hideSearchBox(){toggleFaderPane(false);jq("#popupSearch,table.popupsearch").hide()}R9.extend("seo",{_defaultFormIdCounter:1,getAjaxHotelForm:function(e,g,b,a,c){var f="simpleHotelSearchForm"+R9.seo._defaultFormIdCounter,d={formId:f,hid:b};R9.seo._defaultFormIdCounter++;if(a){d.checkinDate=a}if(c){d.checkoutDate=c}jq.post("/ajaxform/simplehotelform",d,function(h){jq("<div title='"+g+"' class='hotelsearchwidget'>"+h+"</div>").r9popover({position:e,width:"500px"});R9.form.hotel.init(document.getElementById(f))},"html")},getAjaxFlightForm:function(e,g,a,c,d,b){var f="simpleFlightSearchForm"+R9.seo._defaultFormIdCounter;R9.seo._defaultFormIdCounter++;jq.post("/ajaxform/simpleflightform",{formId:f,originCode:a,destinationCode:c,departDate:d,returnDate:b},function(h){jq("<div title='"+g+"' class='flightsearchwidget'>"+h+"</div>").r9popover({position:e,width:"500px"});R9.form.flight.init(document.getElementById(f))},"html")}});R9.extend("seo.directFlights",{showSection:function(a){jq(".flightlistcontent").hide();jq(a).show()}});jq(function(){var a=jq(".adcontainer").attr("data-url");if(a!=null){jq("<div/>").load(a,function(){var b=jq(this);jq("#nrAds").html(b.find("#sideads"));jq("#bottomAdContainer").html(b.find("#bottomads"));if(typeof(bannerUrls)!=="undefined"){for(id in bannerUrls){jq("#"+id).attr("src",bannerUrls[id])}}})}});

;var jsck_widgets="v534";
/* et=34, mt=76, c=p4, i=sparkle064, v=R145, cc=4, r=none, af=kayak, afs=kayak, xp=none, pm=bot, lc=en, cc=GB */
