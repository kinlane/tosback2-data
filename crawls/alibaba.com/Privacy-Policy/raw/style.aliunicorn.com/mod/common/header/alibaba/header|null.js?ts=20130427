var globalImgServer="http://style.alibaba.com";location.protocol==="https:"&&(globalImgServer="https://ipaystyle.alibaba.com");;
AE.define("common.beacon.cookieInfo",["core"],function(e){function o(e,t){var n=r.getCookie(e),s=i;if(n){s[e]=n;var o=n.split("&"),u,a=o.length,f,l,c;for(u=0;u<a;u++){f=o[u],f=f.split("="),l=f[0],c=f[1];if(!t||t[l])s[l]=c}}}function u(){var e=null,t=i,n=t.x_user,r=n.split("|");e={country:r[0],firstName:r[1],lastName:r[2],memberType:r[3],memberSeq:r[4]},t.userInfo=e}function a(){var e=i;o("xman_us_f",{x_local:!0,x_user:!0}),o("xman_us_t",{sign:!0}),e.isNew=!1,e.isMember=!1,e.isLogin=!1,e.xman_us_f&&e.x_user?(e.isMember=!0,u()):e.isNew=!0,e.isMember&&e["sign"]=="y"&&(e.isLogin=!0)}var t=window,n=t.AE,r=n.util,i={},s=null;return a(),s={get:function(e){return i[e]},getUser:function(e){if(this.get("isMember")){var t=i.userInfo;return e&&(t=t[e]),t}}},s});;
AE.define('common.beacon.user', ['core', 'dom', 'common.beacon.cookieInfo'], function(core, dom , cookieInfo){

	var NEW_USER_HTML = 'Welcome to Alibaba.com , <a rel="nofollow" href="http://us.my.alibaba.com/user/join/join_step1.htm"><strong>Join Free</strong></a> | <a rel="nofollow" href="https://login.alibaba.com/">Sign In</a>',
		MEMBER_USER_HTML = 'Welcome <span title="{name}">{name}</span>, <a rel="nofollow" href="https://login.alibaba.com/">Sign In</a> (<a rel="nofollow" href="https://login.alibaba.com/">Not you?</a>) ',
		LOGIN_USER_HTML = 'Welcome <span title="{name}">{name}</span>, <a href="http://us.my.alibaba.com/user/sign/sign_out.htm" rel="nofollow">Sign Out</a>',
		LOADING_HTML = '<i class="loading"></i>',
		REGEXP = new RegExp('{name}','g'),
		doc = dom.Document(),
		exports = new core.Base(),
		Y = YAHOO,
		container;
	
    core.mix(exports,{
        init :　function(config){
            config = config || {};
            var info = cookieInfo,
                html = '';
            container = doc.byId(config.containerId || 'beacon-user');
            
            if(!container){
                return;
            }
            
            if(info.get('isLogin')){
                html = LOGIN_USER_HTML;
                html = html.replace(REGEXP, info.getUser('firstName').substr(0, 60));
            }else if(info.get('isMember')){
                html = MEMBER_USER_HTML;
                html = html.replace(REGEXP, info.getUser('firstName').substr(0, 60));
            }else{
                html = LOADING_HTML;
                this._groupUser();
            }
            container.set('innerHTML', html);
        },
        _groupUser : function(){
            var self = this;
            if(!window.getGroupUserLoginMsg){
                window.getGroupUserLoginMsg = function( json ){
                   var userMsg = '';
                   try{
                       if(json.data[0]){
                            if(json.data[0].email){
                                //如果有mail，则显示mail登录
                                userMsg=json.data[0].email;
                            }else{
                                //如果无mail，则判断有无mobile
                                if(json.data[0].mobile){
                                    userMsg=json.data[0].mobile;
                                }
                            }
                        }
                   }catch(e){}
                   
                   self._renderGroupUser(userMsg);
                };
            }
            
            Y.util.Get.script('https://passport.alipay.com/api/havana_top.js?site=4&callback=getGroupUserLoginMsg',{
                onSuccess:function(){
                    if( !self.alreadyRendered ){
                        self._renderGroupUser();
                    }
                },
                onFailure:function(){
                    self._renderGroupUser();
                },
                onTimeout:function(){
                    self._renderGroupUser();
                },
                timeout:2000
            });
        },
        _renderGroupUser : function(userMsg){
            var html = '';
            this.alreadyRendered = true;
            if( userMsg ){
                html = LOGIN_USER_HTML;
                html = html.replace(REGEXP, userMsg.substr(0, 60));
            }else{
                html = NEW_USER_HTML;
            }
            container.set('innerHTML', html);
        }
    });
    return exports;
});;;
AE.define("common.beacon.dropdown",["core","dom","ua"],function(e,t,n){var r={containerId:"beacon-main",menuClass:"ui-beacon-drop",linkClass:"ui-beacon-item-link",hoverClass:"ui-beacon-drop-hover"};this.exports.init=function(i){var s=t.Document(),i=e.merge(r,i||{}),o=s.byId(i.containerId),u=o.byClass(i.menuClass,"li");if(!o)return;n.ie===6&&u.forEach(function(e,t){e.on("mouseover",function(t){e.addClass(i.hoverClass)}),e.on("mouseout",function(t){e.removeClass(i.hoverClass)})})}});;
AE.define("common.beacon.dropdownMessage",["core","dom","lang"],function(e,t,n){function u(e,t){var i;e&&n.isString(e)&&(i="jsonp_callback_"+(new Date).getTime(),AE[i]=t,e=e+"?callback=AE."+i,r.script(e,{onSuccess:function(e){e.purge(),delete AE[i]},onFailure:function(e){e.purge(),delete AE[i]}}))}function a(e,t){var n="?tracelog=",r=!1,i="";return e&&t&&(i=e.replace(/\?((?:\&?[^\&#]+)+)/,function(e,i){return r=!0,n+t+"&"+i}),r||(i=e.replace(/#(?:[^\?]+)/,function(e){return r=!0,n+t+e})),r||(i+=n+t)),i}function f(e,t){return n.isString(e)&&n.isObject(t)&&(e=e.replace(/\{(\w+)\}/gi,function(e,n){return typeof t[n]=="undefined"?e:t[n]}).replace(/(\\\{)|\\\}/g,function(e,t){return t?"{":"}"})),e}var r=YAHOO.util.Get,i=window.location.pathname==="/"||window.location.pathname==="",s={targetId:"beacon-message",dataUrl:"http://notification.alibaba.com/notification.do",countElClass:"ui-beacon-message-count",countClass:"ui-beacon-message-has-count",subMenuClass:"ui-beacon-subs",subMenuItemTpl:'<li class="ui-beacon-sub"><a class="{className}" rel="nofollow" target="_blank" href="{link}">{content}</a></li>',subMenuItemLinkClass:{notification:"ui-beacon-sub-note",message:"ui-beacon-sub-link",separator:"ui-beacon-sub-separator",entrance:"ui-beacon-sub-entrance"},message:{no:"No new notifications",view:"View {name}",have:"<strong>{count}</strong> New {name}"}},o="javascript:;";this.exports.init=function(r){r=e.merge(s,r||{});var l=t.Document(),c=l.byId(r.targetId),h=c&&c.byClass(r.subMenuClass,"ul")[0],p=c&&c.byClass(r.countElClass,"span")[0],d;if(!c||!h)return;d=function(e){var t="",s=0,u=[],l=[],c=[],d=r.subMenuItemLinkClass,v=r.message,m;if(!n.isArray(e))return;e.forEach(function(e,t){var n=v.no,r="";if(!e.name)return;r="notification_"+e.name.toLowerCase().replace(" ","_"),r+=i?"_homepage":"",e.count>0?(n=f(v.have,{count:e.count,name:e.name}),u.push({className:d.message,link:a(e.url,r),content:n})):e.count===0&&(n=f(v.view,{name:e.name}),l.push({className:d.entrance,link:a(e.url,r),content:n})),s+=e.count}),p&&(s===0?(p.removeClass(r.countClass),p.set("innerHTML","")):(p.addClass(r.countClass),s=s<100?s:"99+",p.set("innerHTML",s))),m={className:d.separator,link:o,content:""},u.length===0&&(u=[{className:d.notification,link:o,content:v.no}]),l.length===0?c=u.concat(l):c=u.concat(m).concat(l),c.forEach(function(e,n){t+=f(r.subMenuItemTpl,e)}),h.set("innerHTML",t)},u(r.dataUrl,d)}});;
(function(){var e=!0,t=!1,n={style:{proxyUrl:"http://style.alibaba.com/js/5v/app/localstorage/local_storage_proxy.html?iframe_delete=true",isReady:t,exec:[]}},r="style",i=function(e){return"localstorage-proxy-ifr"+(e||"")},s=function(t){var r,s,o=n[t],u,a,f,l;if(get(i(t)))return get(i(t));if(o)return u=o.proxyUrl,a=o.exec,r=document.createElement("iframe"),r.id=i(t),r.src=u,YUD.setStyle(r,"display","none"),YUD.setStyle(r,"visibility","hidden"),YUE.on(r,"load",function(){o.isReady=e;for(f=0,l=a.length;f<l;f++)a[f].fn&&a[f].fn.call(a[f].scope||window,a[f].param);a=[]}),document.body.appendChild(r),r},o=function(e){return e=e||r,get(i(e))||s(e)},u=function(e){var t=o(e)||null;return t&&(t.contentWindow||t.contentDocument)},a=function(e){var t=u(e);return t&&t.AE&&t.AE.app.LocalStorage||null};AE.namespace("app");if(AE.app.localStorageProxy)return;AE.app.localStorageProxy={get:function(e,t){var n=a(t);return n&&n.get(e)},remove:function(n,r,i){var s=a(i);return s?(s.remove(n,r),e):t},set:function(n,r,i){var s=a(i);return s?(s.set(n,r),e):t},getSupport:function(e){var t=a(e);return t&&t.getSupport()},getHostname:function(e){var t=u(e);return t&&t.location.hostname},isReady:function(e){return e=e||r,!!get(i(e))&&n[e].isReady},onReady:function(e,t,i,s){s=s||r,YL.isFunction(e)&&n[s]&&(this.isReady(s)?e.call(i||window,t):n[s].exec.push({fn:e,param:t,scope:i}))}};try{document.domain="alibaba.com"}catch(f){}AE.defer(function(){s(r)})})();;
AE.define("common.header.Base",["lang","core","dom"],function(e,t,n){var r=n.Document(),i;return i=t.extend(t.Base,{_izer:function(e){this.disabled=!0,this._mods=e.mods,this.controllers=e.controllers,this.mods=undefined,this._modList={},this._container=r.byId(e.containerId)},_getMods:function(e){return e===undefined&&(e=this._mods),this.mods=e,e},getModList:function(){return this._modList},_mergeConfig:function(e){var n=t.merge({},e);return n},init:function(e){var t,n;n=this.config=this._mergeConfig(e),t=this._getMods(n.mod),this._container&&t?this.enable():this.disable()},getContainer:function(){return this._container},_addModList:function(t){var n,r,i;if(e.isArray(t))for(r=0,i=t.length;r<i;r++)n=t[r],this._addMod(n)},_addMod:function(e){var t=this._modList[e],n;t||(n=this.controllers[e],n&&(t=n(this)),t&&(this._modList[e]=t))},enable:function(){this.disabled=!1,this._addModList(this.mods)},disable:function(){this.disabled=!0,this.mods=this._mods,this._modList={},this._container&&this._container.setStyle("display","none")},getOperation:function(){return{}}},{containerId:"",mods:[],controllers:{}}),i});;
AE.define("common.beacon",["lang","core","dom","common.beacon.cookieInfo","common.beacon.user","common.beacon.dropdown","common.beacon.dropdownMessage","common.header.Base"],function(e,t,n,r,i,s,o,u){function d(){var e=a.byId(l),t=e.byClass("ui-beacon-community-popup"),n=AE.app.localStorageProxy;n.onReady(function(){if(t&&t[0]&&!n.get("headerBeaconCommunityPopup")){t[0].setStyle("display","block");var r=e.byClass("ui-beacon-community-popup-close")[0],i=-1;r.on("click",function(){n.set("headerBeaconCommunityPopup",1),t[0].setStyle("display","none"),window.clearTimeout(i)}),i=window.setTimeout(function(){t[0].setStyle("display","none")},5e3)}})}var a=n.Document(),f="beacon-user",l="beacon-main",c=a.byId("header2012"),h="ui-header-normal-beacon",p=null;return p=t.extend(u,{enable:function(){p.superclass.enable.call(this),c.addClass(h)},disable:function(){p.superclass.disable.call(this),c.removeClass(h)}},{containerId:"mod-beacon",mods:["user","nav"],controllers:{user:function(){i.init({containerId:f})},nav:function(){s.init({containerId:l}),o.init(),d()}}}),new p});;
AE.define("common.header.sundry.Base",["core","dom"],function(e,t){var n,r=t.Document();return n=e.extend(e.Base,{_izer:function(e){var t=this.config=e;this.disabled=!0,this._mod=r.byId(t.modId),this._uiClass=t.uiClass},init:function(e){this._container=e.getContainer(),this._mod&&this.enable()},getContainer:function(){return this._mod},enable:function(){this.disabled=!1,this._container.addClass(this._uiClass)},disable:function(){this.disabled=!0,this._container.removeClass(this._uiClass)},html:function(e){return this.disabled||this._mod.set("innerHTML",e),this}},{modId:"",uiClass:""}),n});;
AE.define("common.header.sundry.anchor",["common.header.sundry.Base"],function(e){var t;return t=new e({modId:"header-anchor",uiClass:"ui-header-mod-anchor"}),t});;
AE.define("common.header.sundry.action",["core","common.header.sundry.Base"],function(e,t){var n;return n=e.extend(t,{href:function(e){return this.disabled||this._mod.byTag("A")[0].set("href",e),this},buttonText:function(e){return this.disabled||this._mod.byTag("A")[0].set("innerHTML",e),this}},{modId:"header-action",uiClass:"ui-header-mod-action"}),new n});;
AE.define("common.header.sundry.extend",["common.header.sundry.Base"],function(e){var t;return t=new e({modId:"header-extend",uiClass:"ui-header-mod-extend"}),t});;
AE.define("common.header.sundry",["core","common.header.sundry.anchor","common.header.sundry.action","common.header.sundry.extend","common.header.Base"],function(e,t,n,r,i){var s,o;return s=e.extend(i,{getOperation:function(){return this.getModList()}},{containerId:"header2012",mods:["anchor","action","extend"],controllers:{anchor:function(e){t.init(e);if(!t.disabled)return t},action:function(e){n.init(e);if(!n.disabled)return n},extend:function(e){r.init(e);if(!r.disabled)return r}}}),o=new s,o.Base=s,o});;
AE.define("aisn.home.position",["dom","lang","ua"],function(e,t,n){function s(n){var s,o,u,a=[0,0],f="getRegion",l;if(n instanceof e.Element||n===r||!n)n===r||!n?(s=e.Document(),f="getClientRegion"):s=n,o="tl",u=[0,0],n={el:s,point:o,offset:u};else{s=n.el;if(!s||s===r)s=e.Document(),f="getClientRegion";if(!(s instanceof e.Node))throw"el is invalid!";o=(n.point||i.TL).toLowerCase();if(i[o.toUpperCase()]!==o)throw"point is invalid!";u=n.offset;if(t.isArray(u)){if(!t.isNumber(u[0])||!t.isNumber(u[1]))throw"offset is invalid!"}else u=[0,0]}l=s[f](),!l.width&&(l.width=l.right-l.left),!l.height&&(l.height=l.bottom-l.top);switch(o.charAt(0)){case"b":a[1]=l.bottom;break;case"c":a[1]=l.top+Math.floor(l.height/2);break;case"t":default:a[1]=l.top}switch(o.charAt(1)){case"r":a[0]=l.right;break;case"c":a[0]=l.left+Math.floor(l.width/2);break;case"l":default:a[0]=l.left}return a[0]+=u[0],a[1]+=u[1],n.referPoint=a,n.pos={top:l.top,left:l.left},n}var r="viewport",i={TL:"tl",TC:"tc",TR:"tr",CL:"cl",CC:"cc",CR:"cr",BL:"bl",BC:"bc",BR:"br",VIEWPORT:r};return i.align=function(e,t){var n=[0,0];if(!e&&!e.el)throw"no element to be positioned!";e=s(e),t=s(t),n[0]=t.referPoint[0]-e.referPoint[0],n[1]=t.referPoint[1]-e.referPoint[1],(n[0]!==n[1]||n[0]+n[1]!==0)&&e.el.setXY([e.pos.left+n[0],e.pos.top+n[1]])},i.center=function(e,t){i.align({el:e,point:"cc"},{el:t,point:"cc"})},i}),AE.define("aisn.home.triggershow.Base",["core","dom","lang","ua","aisn.home.position"],function(e,t,n,r,i){var s=!0,o=!1,u=function(e){return e.substring(0,1).toUpperCase()+e.substring(1)},a="visible",f="disabled",l=e.extend(e.Base,{_izer:function(e){if(!(e.triggerNode instanceof t.Node))throw"triggerNode is invalid!";if(!(e.contentNode instanceof t.Node))throw"contentNode is invalid!";this._triggerNode=e.triggerNode,this._contentNode=e.contentNode,this._showDelayTime=e.showDelayTime,this._hiddenDelayTime=e.hiddenDelayTime,this._timer=-1,this._property2UI(),this._initPropertys(e),this._initEvent(),this._bindUI(),this._initPosition(e.positionCfg)},_dtor:function(){this.rescue("set"),this.rescue("show"),this.rescue("hide"),this._triggerNode.detach(),this._contentNode.detach(),this.detach(),this.removeProperty(a),this.removeProperty(f),this._triggerNode=null,this._contentNode=null},_initPropertys:function(e){this.set(a,e.visible),this.set(f,e.disabled)},_initEvent:function(){this.hijack("show"),this.hijack("hide"),this.on("before:show",function(){return!this.getDisabled()}),this.on("before:hide",function(){return!this.getDisabled()})},_bindUI:function(){},_handleShow:function(e,t){var n=this._showDelayTime;this._clearTimer(),n?this._timer=setTimeout(function(){this.show()}.bind(this),n):this.show()},_handleHide:function(e,t){var n=this._hiddenDelayTime;this._clearTimer(),n?this._timer=setTimeout(function(){this.hide()}.bind(this),n):this.hide()},_clearTimer:function(){this._timer!=-1&&(clearTimeout(this._timer),this._timer=-1)},_initPosition:function(t){var r,s;n.isArray(t)&&(r=e.mix({el:this._contentNode},t[0]||{},o),s=e.mix({el:this._triggerNode},t[1]||{}),this.on("after:show",function(e,t){i.align(r,s)}))},_property2UI:function(){var e={};this._UI_ATTRS.forEach(function(t){e[t]=s}),this.hijack("set"),this.on("before:set",function(e,t){var n=t.args,r=n[0],i=n[1],s=this.get(r);return s!==i}),this.on("after:set",function(t,n){var r=n.args,i=r[0],s=r[1];e[i]&&this["_uiSet"+u(i)](s)})},getTrigger:function(){return this._triggerNode},getContent:function(){return this._contentNode},show:function(){this._clearTimer(),this.set(a,s)},hide:function(){this._clearTimer(),this.set(a,o)},enable:function(){this.set(f,o)},disable:function(){this.set(f,s)},getDisabled:function(){return this.get(f)},_uiSetVisible:function(e){this._contentNode.setStyle("display",e?"":"none")},_UI_ATTRS:[a]},{triggerNode:null,contentNode:null,showDelayTime:100,hiddenDelayTime:100,positionCfg:null,visible:o,disabled:o});return l}),AE.define("aisn.home.triggershow.Overshow",["core","aisn.home.triggershow.Base"],function(e,t){var n=e.extend(t,{_bindUI:function(){this._triggerNode.on("mouseover",this._handleShow.bind(this)),this._triggerNode.on("mouseout",this._handleHide.bind(this)),this._contentNode.on("mouseover",this._handleShow.bind(this)),this._contentNode.on("mouseout",this._handleHide.bind(this))}});return n}),AE.define("aisn.home.triggershow.Clickshow",["core","dom","aisn.home.triggershow.Base"],function(e,t,n){var r=e.extend(n,{_initEvent:function(){r.superclass._initEvent.call(this),this.hijack("_handleShow"),this.on("after:_handleShow",function(e,t){var n=t.args;n[0]&&n[0].stopPropagation()})},_dtor:function(){this.rescue("_handleShow")},_bindUI:function(){this._triggerNode.on("click",this._handleShow.bind(this)),t.Document().on("click",this._handleHide.bind(this)),this._contentNode.on("click",this._handleShow.bind(this))}});return r}),AE.define("aisn.home.triggershow",["aisn.home.triggershow.Overshow","aisn.home.triggershow.Clickshow"],function(e,t){var n="over",r="click",i=this.exports={OVER:n,CLICK:r};i.create=function(i,s){switch(i){case n:return new e(s);case r:return new t(s);default:throw"type is invalid!"}}});;
AE.define("aisn.home.position",["dom","lang","ua"],function(e,t,n){function s(n){var s,o,u,a=[0,0],f="getRegion",l;if(n instanceof e.Element||n===r||!n)n===r||!n?(s=e.Document(),f="getClientRegion"):s=n,o="tl",u=[0,0],n={el:s,point:o,offset:u};else{s=n.el;if(!s||s===r)s=e.Document(),f="getClientRegion";if(!(s instanceof e.Node))throw"el is invalid!";o=(n.point||i.TL).toLowerCase();if(i[o.toUpperCase()]!==o)throw"point is invalid!";u=n.offset;if(t.isArray(u)){if(!t.isNumber(u[0])||!t.isNumber(u[1]))throw"offset is invalid!"}else u=[0,0]}l=s[f](),!l.width&&(l.width=l.right-l.left),!l.height&&(l.height=l.bottom-l.top);switch(o.charAt(0)){case"b":a[1]=l.bottom;break;case"c":a[1]=l.top+Math.floor(l.height/2);break;case"t":default:a[1]=l.top}switch(o.charAt(1)){case"r":a[0]=l.right;break;case"c":a[0]=l.left+Math.floor(l.width/2);break;case"l":default:a[0]=l.left}return a[0]+=u[0],a[1]+=u[1],n.referPoint=a,n.pos={top:l.top,left:l.left},n}var r="viewport",i={TL:"tl",TC:"tc",TR:"tr",CL:"cl",CC:"cc",CR:"cr",BL:"bl",BC:"bc",BR:"br",VIEWPORT:r};return i.align=function(e,t){var n=[0,0];if(!e&&!e.el)throw"no element to be positioned!";e=s(e),t=s(t),n[0]=t.referPoint[0]-e.referPoint[0],n[1]=t.referPoint[1]-e.referPoint[1],(n[0]!==n[1]||n[0]+n[1]!==0)&&e.el.setXY([e.pos.left+n[0],e.pos.top+n[1]])},i.center=function(e,t){i.align({el:e,point:"cc"},{el:t,point:"cc"})},i}),AE.define("aisn.home.Placeholder",["core","dom","lang","aisn.home.position"],function(e,t,n,r){var i=!0,s=!1,o="placeholder",u="input",a="textarea",f=t.Document(),l=function(e){var n;if(!(e instanceof t.Node))throw"node is invalid!";n=e.get("tagName").toLowerCase();if(n!=u&&n!=a)throw"node is no input/textarea!"},c={cursor:"text",position:"absolute",overflow:"hidden",whiteSpace:"nowrap"},h=["fontSize","fontFamily","paddingTop","paddingBottom","paddingLeft","paddingRight","height","lineHeight"],p={parentNode:f.byTag("body")[0]},d;return o in document.createElement(u)?function(){}:(d=e.extend(e.Base,{_izer:function(t){p=e.merge(p,t),this._node=p.node,l(this._node),AE.defer(function(){this._createPlaceholder(),this._bindUI()},this)},_dtor:function(){this.detach()},_createPlaceholder:function(){var e=t.Document(),n=e.createElement("div"),r=this._node,u;for(u in c)c.hasOwnProperty(u)&&n.setStyle(u,c[u]);h.forEach(function(e){e.indexOf("padding")!=-1?n.setStyle(e,parseInt(r.getStyle(e))+parseInt(r.getStyle(e.replace("padding","border")+"Width"))+"px"):e=="lineHeight"?n.setStyle(e,Math.max(parseInt(r.getStyle(e))||0,parseInt(r.getStyle("height"))||0)+"px"):n.setStyle(e,r.getStyle(e))}),n.set("innerHTML",r.getAttribute(o)).set("className",r.get("className")+"-placeholder-hint"),n.setStyle("display",r.get("value")?"none":""),this._visible=r.get("value")?s:i,n.appendTo(p.parentNode),this._phNode=n,n=null,this._align()},_bindUI:function(){this._node.on("focus",this._hideHint.bind(this)),this._node.on("blur",this._showHint.bind(this)),this._phNode.on("click",this._hideHint.bind(this)),t(window).on("resize",function(){var e=this;this._fixed=s,setTimeout(function(){e._align()},200)}.bind(this))},_hideHint:function(){this._phNode.setStyle("display","none"),this._node[0].focus(),this._visible=s},_showHint:function(){this._node.get("value")||(this._phNode.setStyle("display",""),this._visible=i,this._fixed||this._align())},_align:function(){this._visible&&(r.align(this._phNode,this._node),this._fixed=i)},setValue:function(e){this._phNode&&this._phNode.set("innerHTML",e)}},{node:null}),d)});;
AE.define("common.searchbar.history",["core"],function(e){function f(e){return e!=null&&typeof e=="object"&&"join"in e}function l(e,t,s,o,u,a){this.expires=s?s:r,this.domain=o?o:null,this.path=u?u:"/",this.secure=a?a:!1,this.name=e?e:null,this.groups=t&&f(t)?t:[],this.__tree={},this.changed=!1,this.buildString=function(e){return null!=e&&e.length>0?e.join(i):null},this.parseFromString=function(e){if(null==e||""==e)return this;var t=e.split(i);this.removeAll();for(var n=0;n<t.length;n++)if(null!=t[n]&&""!=t[n]){var r=new c;r.parseFromString(t[n]),this.add(r)}return this},this.toString=function(){return this.buildString(this.groups)},this.size=function(){return this.groups.length},this.arrange=function(){var e=[],t={};for(var n=0;n<this.size();n++)null!=this.groups[n]&&(e[e.length]=this.groups[n],t[this.groups[n].name]=this.groups[n]);this.removeAll(),this.groups=e,this.__tree=t},this.__clearTree=function(){this.__tree={}},this.__addToTree=function(e){null!=e&&(this.__tree[e.name]=e)},this.__removeFromTree=function(e){null!=e&&delete this.__tree[e.name]},this.removeAll=function(){this.groups=[],this.__clearTree()},this.get=function(e){return this.__tree[e]?this.__tree[e]:null},this.add=function(e){if(null==e)return;for(var t=0;t<this.size();t++)e.name.toLowerCase()==this.groups[t].name.toLowerCase()&&this.remove(e.name);return e.parent=this,this.groups[this.size()]=e,this.__addToTree(e),this},this.remove=function(e){if(null==e||""==e)return;for(var t=0;t<this.size();t++)e.toLowerCase()==this.groups[t].name.toLowerCase()&&(this.__removeFromTree(this.groups[t]),this.groups[t]=null);return this.arrange(),this},this.save=function(){this.changed=!0,n.set(this.name,this.toString(),this.expires,this.domain,this.path,this.secure)},this.clear=function(){n.clear(this.name)};if(this.name!=null&&typeof t=="string")this.parseFromString(t);else if(this.name!=null&&f(t))for(var l=0;l<this.size();l++)null!=this.groups[l]&&(this.__addToTree(this.groups[l]),this.groups[l].parent=this)}function c(e,t){this.name=e?e:null,this.items=t&&f(t)?t:[],this.__tree={},this.max=20,this.parent=null,this.buildString=function(e){var t=this.name?this.name:a;return null!=e&&e.length>0?t+s+e.join(o):t},this.parseFromString=function(e){if(null==e||""==e)return this;var t=e.indexOf(s);if(t>-1){this.name=e.substring(0,t);var n=e.substring(t+s.length);if(null!=n&&n!=""){this.removeAll();var r=n.split(o);for(var i=0;i<r.length;i++)if(null!=r[i]&&""!=r[i]){var u=new h;u.parseFromString(r[i]),this.add(u)}}}else this.name=e;return this},this.toString=function(){return this.buildString(this.items)},this.getReverse=function(){var e=[];return this.size()>0?this.items.slice(0,this.items.length).reverse():e},this.setMax=function(e){this.max=e,this.arrange()},this.size=function(){return this.items.length},this.arrange=function(){var e=[],t={};for(var n=0;n<this.size();n++)null!=this.items[n]&&(e[e.length]=this.items[n]);e.length>this.max&&(e=e.slice(e.length-this.max,e.length));for(var n=0;n<e.length;n++)t[e.key]=e[n];this.removeAll(),this.items=e,this.__tree=t},this.__clearTree=function(){this.__tree={}},this.__addToTree=function(e){null!=e&&(this.__tree[e.key]=e)},this.__removeFromTree=function(e){null!=e&&delete this.__tree[e.key]},this.removeAll=function(){this.items=[],this.__clearTree()},this.get=function(e){return this.__tree[e]?this.__tree[e]:null},this.add=function(e){if(null==e)return;for(var t=0;t<this.size();t++)e.key.toLowerCase()==this.items[t].key.toLowerCase()&&this.remove(e.key);return e.parent=this,this.items[this.size()]=e,this.__addToTree(e),this},this.remove=function(e){if(null==e||""==e)return;for(var t=0;t<this.size();t++)e.toLowerCase()==this.items[t].key.toLowerCase()&&(this.__removeFromTree(this.items[t]),this.items[t]=null);return this.arrange(),this},this.save=function(){null!=this.parent&&(this.arrange(),this.parent.save())};if(this.name!=null&&typeof t=="string")this.parseFromString(this.name+s+t);else if(this.name!=null&&f(t))for(var n=0;n<this.size();n++)null!=this.items[n]&&(this.__addToTree(this.items[n]),this.items[n].parent=this)}function h(e,t){this.key=e?e:null,this.attributes=t&&f(t)?t:[],this.max=20,this.parent=null,this.buildString=function(e){var t=this.key?this.key:a;return null!=e&&e.length>0?t+u+e.join(u):t},this.parseFromString=function(e){if(null==e||""==e)return this;var t=e.split(u);return t.length>0&&(this.key=t[0],this.attributes=t.slice(1,t.length)),this},this.setMax=function(e){this.max=e,this.arrange()},this.size=function(){return this.attributes.length},this.toString=function(){return this.buildString(this.attributes)},this.getReverse=function(){var e=[];return this.size()>0?this.attributes.slice(0,this.attributes.length).reverse():e},this.reverseString=function(){return this.buildString(this.getReverse())},this.arrange=function(){var e=[];for(var t=0;t<this.size();t++)null!=this.attributes[t]&&(e[e.length]=this.attributes[t]);e.length>this.max?this.attributes=e.slice(e.length-this.max,e.length):this.attributes=e},this.removeAll=function(){this.attributes=[]},this.get=function(e){return e<this.size()?this.attributes[e]:null},this.add=function(e){if(null==e||""==e)return;return this.remove(e),this.attributes[this.size()]=e,this.arrange(),this},this.remove=function(e){if(null==e||""==e)return;for(var t=0;t<this.size();t++)e.toLowerCase()==this.attributes[t].toLowerCase()&&(this.attributes[t]=null);return this.arrange(),this},this.contains=function(e){for(var t=0;t<this.size();t++)if(e.toLowerCase()==this.attributes[t].toLowerCase())return!0},this.save=function(){null!=this.parent&&(this.arrange(),this.parent.save())},this.key!=null&&typeof t=="string"&&this.parseFromString(this.key+u+t)}function A(){return n.getCookieTable(d,p)}function O(e,t,n,r){if(null==n||""==n)return;var i=M(e),s=i.get(t),o=!1;f(n)?(s=new h(t,n),o=!0):(s=null==s?new h(t):s,s.add(n),o=!0),i.add(s),e==v?s.setMax(r):i.setMax(r),o&&i.save()}function M(e){var t=A(),n=t.get(e);return null==n&&(n=new c(e),t.add(n),n.parent=t),n}function _(e){O(v,v,e,S)}function D(e,t){O(E,e,t,L)}function P(e,t){O(E,e,t,L)}function H(e,t){O(b,e,t,C)}function B(e,t){O(y,e,t,N)}function j(e,t){O(w,e,t,k)}var t=this.exports,n={set:function(e,t){var n=arguments,r=arguments.length,i=r>2?n[2]:null,s=r>3?n[3]:null,o=r>4?n[4]:"/",u=r>5?n[5]:!1;document.cookie=e+"="+escape(t)+(i==null?"":"; expires="+i.toGMTString())+(o==null?"":"; path="+o)+(s==null?"":"; domain="+s)+(u==1?"; secure":"")},get:function(e){var t=e+"=",n=t.length,r=document.cookie.length,i=0,s=0;while(i<r){s=i+n;if(document.cookie.substring(i,s)==t)return this.__get(s);i=document.cookie.indexOf(" ",i)+1;if(i==0)break}return null},__get:function(e){var t=document.cookie.indexOf(";",e);return t==-1&&(t=document.cookie.length),unescape(document.cookie.substring(e,t))},clear:function(e){var t=arguments,n=arguments.length,r=n>1?t[1]:null,i=n>2?t[2]:"/",s=n>3?t[3]:!1;this.get(e)&&(document.cookie=e+"="+(i?"; path="+i:"")+(r?"; domain="+r:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT")},cookieCache:{},getCookieTable:function(e,t){var r=n.cookieCache[e];if(null==r||r.changed){r=new l(e);var i=n.get(e);null!=i&&i!=""&&r.parseFromString(i),t&&(r.domain=t),n.cookieCache[e]=r}return r}},r=new Date;r.setTime(r.getTime()+5184e6);var i="\n\n",s="^\n",o="$\n",u="\t",a="NOSET",p="alibaba.com",d="history",v="keywords",m="product",g="selloffer",y="buyoffer",b="company",w="category",E=m+"_"+g,S=8,x=8,T=8,N=6,C=4,k=6,L=8;e.mix(t,{getHistoryCookieGroup:M,logKeywordsHistory:_})});;
AE.define("common.searchbar.statistics",["lang","core","common.searchbar.searchbarData"],function(e,t,n){var r=window,i=r.dmtrack||{clickstat:function(e,t){var n=e+"?",r=[];Object.keys(t).forEach(function(e){r.push(e+"="+t[e])}),n+=r.join("&");var i=new Image;i.src=n}},s=null,o=null,u=r.dmstat&&r.dmstat.pid||"0bdbc7f56188458aa0a002d4aff8a65c",a="http://stat.alibaba.com/qr/queryreport.html";return{init:function(e){s=n,e.on(e.ITEM_SELECTED,this._intellItemSelected.bind(this)),e.on(e.DATA_BACK,this._intellDataBack.bind(this)),o=e},_createReport:function(e){var n={time:(new Date).getTime(),pid:u,set:s.get("statis")||"s",area:"sb1",value:""};e=t.merge(n,e);var r=[];Object.keys(e).forEach(function(t){r.push(t+"="+e[t])});var i=new Image;i.src=a+"?"+r.join("&")},_intellReport:function(){if(o.isSuggestKeyword()){var e=o.getKeywordInfo(),t=e.suggestCatId,n=e.suggestValue;t&&(n+="^"+t),this._createReport({type:"select",ckw:n,ckw2:e.lastValue,value:e.suggestIndex,ispersonal:e.isPersonal})}},_intellDataBack:function(){var e=o.getKeywordInfo(),t=o.getHasPersonal();this._createReport({type:"select",ckw:e.currentValue,ckw2:"",value:"",ispersonal:t})},_intellItemSelected:function(e){this._intellReport()},onTypeChange:function(e,t){var n=s.get("name");n&&i.clickstat("http://stat.alibaba.com/performance/list.html",{click_region:"top_switch_button",click_value:n.toLowerCase()})},onSubmit:function(e){if(!o)return;var t=o.getKeywordInfo();this._createReport({ckw:t.currentValue,ckw2:"",value:"",type:"sbtn"}),this._intellReport()}}});;
AE.define("common.searchbar.searchForm",["lang","core","dom","aisn.home.Placeholder","common.searchbar.history","common.searchbar.cem"],function(e,t,n,r,i,s){var o=n.Document(),u={keywordId:"",cateId:"",typeId:"",formId:"",searbarId:"",placeholder:"",keyword:""},a=null,f=null,l=null,c=null,h={},p=null,d=function(e){return e=e.replace(/&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&apos;|&#39;/g,"'"),e=e.replace(/&quot;/g,'"'),e};return t.mix(h,t.IEventable.prototype,{CHANGE_VALUE:"changeValue",SUBMIT:"submit",BEFORE_SUBMIT:"beforeSubmit",init:function(e){u=t.merge(u,e),a=o.byId(u.formId),f=o.byId(u.keywordId),l=o.byId(u.cateId),c=o.byId(u.typeId),this._initDefaultValue(f),this._bingEv(),this._bindUI(),this.setPlaceholderValue(u.placeholder),p=new r({node:f,parentNode:o.byId(u.searbarId)})},setPlaceholderValue:function(e){p&&p.setValue?p.setValue(e):f.setAttribute("placeholder",e)},setKeywordFieldName:function(e){f.set("name",e)},_initDefaultValue:function(e){u.keyword&&e.set("value",d(u.keyword));if(!e.get("value"))try{var t=window.opener.document,n=t.getElementById(u.keywordId).value;e.set("value",d(n))}catch(r){}},_bingEv:function(){s.subscribe(h.CHANGE_VALUE,function(e,t){var n=t.keyword,r=t.cateId,i=t.type,s=t.formAction;n!==undefined&&f.set("value",d(n)),r!==undefined&&l.set("value",r),i!==undefined&&c.set("value",i),s!==undefined&&(a[0].action=s)}),s.subscribe(h.SUBMIT,function(e,t){h._onSubmit()&&setTimeout(function(){a[0].submit()},100)})},_bindUI:function(){a.on("submit",function(e){e.preventDefault(),s.trigger(h.SUBMIT)})},_verifyKeyword:function(e){return""===e?(alert("Please input a search term."),!1):e.length>50?(alert("please input a search term less than 50 characters."),!1):e.search(/[^\x00-\x80]/g)?!0:(alert("Sorry, the information you filled in is not in English.\nPlease input the information in English instead."),!1)},_onSubmit:function(){var e=f.get("value").trim();return this._verifyKeyword(e)?(this._fire(h.BEFORE_SUBMIT),s.trigger(h.BEFORE_SUBMIT)):(f[0].focus(),!1)}}),t.IEventable.apply(h),h});;
AE.define("common.searchbar.searchAdvanced",["core","dom"],function(e,t){function i(e){return encodeURIComponent(e).replace(/%20/g,"+")}var n=t.Document(),r={inputId:"",btnId:"",url:"http://www.alibaba.com/trade/advancesearch"};this.exports.init=function(t,s){t=e.merge(r,t);var o=n.byId(t.inputId),u=n.byId(t.btnId),a=[];if(!u)return;s.getContainer().addClass(t.uiClass),u.on("click",function(e){e.preventDefault(),a.push("advancedSearchText="+i(o.get("value"))),AE.util.redirect(t.url+"?"+a.join("&"))})}});;
AE.define("common.searchbar.searchbarData",["lang","core"],function(e,t){var n=new t.Base,r=[],i={},s="products",o={staticSuggestType:"recentKeywords"};return t.mix(n,{_key4Data:function(e){var t=i[s];return t[e]||(t=o),t},_availableData:function(t){var n=null,i={},o=!0,u=this,a="";return t.data&&e.isArray(t.data)&&t.data.forEach(function(t,i){if(e.isString(t)&&r.some(function(e){return t===e.name})){var s=r.filter(function(e){return t===e.name});s&&n===null&&(n=[]),s&&n.push(s[0])}else e.isObject(t)&&(n===null&&(n=[]),n.push(t))}),n!==null&&(o=!1),n=n||r,n.forEach(function(e,t){var n=e.name.toLowerCase();t===0&&(a=n),u.addType(n),i[n]=e}),t.currentType?(s=t.currentType,delete t.currentType):o||(s=a),i},init:function(e){r=[{action:e.aisnServer+"/trade/search",name:"Products",typeValue:"product_en",statis:"p",recentUrl:"http://www.alibaba.com/products/{@}.html"},{action:e.aisnServer+"/trade/search",name:"Suppliers",typeValue:"company_en",statis:"c",recentUrl:"http://www.alibaba.com/corporations/{@}.html"},{action:"http://sourcing.alibaba.com/rfq_search_list.htm",name:"Buyers",typeValue:"offer_en",statis:"b",recentUrl:"http://sourcing.alibaba.com/rfq_search_list.htm?SearchText={@}"}],o=t.merge(o,e),this.registerTypeData(this._availableData(e)),this.hijack("set")},getType:function(){return s},setType:function(e){i[e]&&(s=e)},registerTypeData:function(e){var n=arguments,r=null;types=Object.keys(e),types.forEach(function(n){i[n]&&t.mix(i[n],e[n])})},addType:function(e){i[e]={}},getData:function(){return i}}),n.defineProperties({"*":{get:function(e){var t=this._key4Data(e),n=t[e];return n},set:function(e,t){var n=this._key4Data(e);n[e]=t}}}),n});;
AE.define("common.searchbar.searchTypeSelect",["core","dom","aisn.home.triggershow","common.searchbar.searchbarData","common.searchbar.cem"],function(e,t,n,r,i){var s={containerId:"",dropdownId:"",displayId:""},o=null,u=t.Document(),a=null,f=null,l=null,c=null,h=new e.Base;return e.mix(h,{ITEM_SELECTED:"changeValue",disabled:!0,syncType:function(e){if(this.disabled)return;e&&o.setType(e),l.set("innerHTML",o.get("name")),i.trigger(this.ITEM_SELECTED,{type:o.get("typeValue")||"",formAction:o.get("action")})},init:function(t,n){t=e.merge(s,t),o=r,a=u.byId(t.dropdownId),f=u.byId(t.containerId),l=u.byId(t.displayId);if(!f)return;this.disabled=!1,this.searchbar=n,n.getContainer().addClass(t.uiClass),o.get("isDefaultData")||this._renderUI(),this._initClickshow()},_renderUI:function(){var e=o.getData(),t=[],n;for(n in e)t.push('<li class="ui-searchbar-type-option"><a href="javascript:void(0)" data-value="'+n+'" rel="nofollow">'+e[n].name+"</a></li>");a.set("innerHTML",t.join(""))},_initClickshow:function(){var e=this;c=n.create("click",{triggerNode:f,contentNode:a}),a.on("click",function(e){var t=e.target,n=t.getAttribute("data-value");n&&(h.syncType(n),h._fire(h.ITEM_SELECTED,{type:n})),c.hide(),e.stopPropagation()})}}),h});;
AE.define("common.searchbar.searchSuggestStatic.recentKeywords",["core","dom","common.searchbar.history","aisn.home.triggershow","common.searchbar.searchbarData"],function(e,t,n,r,i){function d(){function s(e){if(e==null)return"";var t=escape(e);return e.indexOf("+")!=-1&&(t=t.replace(/\+/g,"%2B")),e.indexOf("/")!=-1&&(t=t.replace(/\//g,"%2F")),t}function u(e){return e==null?"":(e=e.replace(/^\s*|\s*$/g,""),e=e.replace(/\s+/g,"_"),e=s(e),s(e))}var e=null,t=null,r=[],i=null;return i=n.getHistoryCookieGroup(o),i&&i.size()>0&&(e=i.get(o),e&&e.size()>0&&(t=e.getReverse(),t.forEach(function(e){r.push('<a ref="nofollow" href="javascript:void(0);" data-keyword="'+u(e)+'">'+AE.util.xmlEncode(e)+"</a>")}))),r.join(", ")}function v(){function n(e){a.get("value")===""?t.show():t.hide()}var e=d(),t=r.create("over",{triggerNode:a,contentNode:f,hiddenDelayTime:200});a.on("click",n),a.on("keyup",n),l.on("click",function(e){var t=e.target,n=t.getAttribute("data-keyword");n&&AE.util.redirect(c.get("recentUrl").replace("{@}",n))}),l.set("innerHTML",e)}var s=t.Document(),o="keywords",u={keywordId:"searchbar-keyword",containerId:"searchbar-static",contentId:"searchbar-static-content"},a=null,f=null,l=null,c=null,h=this.exports,p=!1;e.IEventable.apply(h),e.mix(h,e.IEventable.prototype,{init:function(t){t=e.merge(u,t),c=i,a=s.byId(t.keywordId),f=s.byId(t.containerId);var r=n.getHistoryCookieGroup(o);p=r&&r.size()>0?!0:!1,p&&(f.addClass("ui-searchbar-recent"),f.set("innerHTML",'<strong class="ui-searchbar-static-title util-clearfix">Your Recent Searches:</strong><div id="'+t.contentId+'" class="ui-searchbar-static-content"></div>'),l=s.byId(t.contentId))},renderUI:function(){v()},logKeywords:function(){n.logKeywordsHistory(a.get("value").trim())},hasKeyword:function(){return p}})});;
AE.define("common.searchbar.searchSuggestStatic.popularKeywords",["core","dom","aisn.home.triggershow"],function(e,t,n){var r={keywordId:"searchbar-keyword",containerId:"searchbar-static",contentId:"searchbar-static-content"};this.exports.init=function(i){i=e.merge(r,i);var s=t.Document(),o=s.byId(i.keywordId),u=s.byId(i.containerId);if(!u||!u.getFirstChild())return;var a=s.byId(i.contentId),f=n.create("over",{triggerNode:o,contentNode:u,hiddenDelayTime:200})}});;
AE.define("common.searchbar.SearchSuggestDynamic",["lang","core","dom","common.searchbar.cem"],function(lang,core,dom,cem){var Y=YAHOO,doc=dom.Document(),ITEM_ID_PREFIX="__suggest-item-",CAT_CLASS="header-dynamic-search-category",CAN_BE_USE=!1,SuggestDynamic=core.extend(core.Base,{PRESS_ENTER:"press_enter",ITEM_SELECTED:"changeValue",DATA_BACK:"data_back",_izer:function(e){this._config=e,this._keywordNode=doc.byId(e.keywordId),this._typeNode=doc.byId(e.typeFieldId),this._contentNode=doc.byId(e.contentId),this._requestURL=e.requestURL,typeof e.autoSuggestCateId!="undefined"?this._autoSuggestionCateId=e.autoSuggestCateId:this._autoSuggestionCateId="",this._hasPersonal=0,this._enableNetInvoke=!1,this._keyword={lastValue:"",currentValue:"",suggestIndex:-1,suggestValue:"",suggestCatId:"",isPersonal:0},this._itemsNode=[],this._activeLength=0,this._renderUI(),this._bindUI()},_renderUI:function(){var e=doc.createElement("ul"),t=null;for(var n=0;n<10;n++)t=doc.createElement("li"),t.set("index",n),t.set("id",ITEM_ID_PREFIX+n),t.appendTo(e),this._itemsNode.push(t);this._hideItems(),e.appendTo(this._contentNode)},_bindUI:function(){var e=this;doc.on("click",function(){e.hide()}),YUE.on(this._keywordNode[0],"paste",function(t){AE.defer(function(){e.enable(),e._netInvoke()})}),this._keywordNode.on("keyup",function(t){e._netInvoke()}),this._keywordNode.on("click",function(t){e._getKeyword()?e.show():e.hide(),t.stopPropagation()}),this._keywordNode.on("keydown",this._onInputKeyDown.bind(this)),this._onItemMouseOver=this._onItemMouseOver.bind(this),this._onItemClick=this._onItemClick.bind(this),this._itemsNode.forEach(function(t){t.on("click",e._onItemClick),t.on("mouseover",e._onItemMouseOver)})},_syncUI:function(e){var t=this._itemsNode,n=null,r=null,i="",s=this._activeLength=e.length<t.length?e.length:t.length;this._hideItems();for(var o=0;o<s;o++){n=t[o],r=e[o],i='<a href="javascript:void(0)">',i+=r.keywords,n.set("catId","");if(r.cat){var u=Object.keys(r.cat);u.forEach(function(e){n.set("catId",e),i+='<span class="'+CAT_CLASS+'"> in '+r.cat[e]+"</span>"})}i+="</a>",n.set("keyword",r.keywords),n.set("innerHTML",i),n.set("personal",r.personal),n.setStyle("display","block")}},_getKeyword:function(){return this._keywordNode.get("value").trim()},getKeywordInfo:function(){return core.merge(this._keyword,{currentValue:this._getKeyword()})},isSuggestKeyword:function(){var e=this._keyword;return e.suggestValue&&e.suggestIndex>=0&&this._getKeyword()===e.suggestValue?!0:!1},_updateSuggestItem:function(e){var t=this._urldecode(e.get("keyword")),n=e.get("catId");this._keyword.suggestCatId=n,this._keyword.suggestValue=t,this._keyword.isPersonal=e.get("personal"),cem.trigger(this.ITEM_SELECTED,{keyword:t,cateId:n})},_urldecode:function(e){return e?(e=e.replace(/\&lt;/g,"<"),e=e.replace(/\&gt;/g,">"),e=e.replace(/\&quot;/g,'"'),e=e.replace(/\&#39;/g,"'"),e=e.replace(/\&amp;/g,"&"),e):""},_buildURL:function(e){var t=Object.prototype.hasOwnProperty,n=[],r={},i=this._requestURL;r={iframe_delete:"true",time:Date.now(),varname:this._config.JSONP,keyword:e,searchType:this._typeNode.get("value"),cateId:this._autoSuggestionCateId,cookieId:AE.util.getCookie("ali_beacon_id")};for(var s in r)t.call(r,s)&&n.push(s+"="+r[s]);return i.indexOf("?")<0&&(i+="?"),i+=n.join("&"),i},_parseData:function(e){var t=[],n=0;for(var r=0,i=e.length;r<i;r++){e[r].personal==="1"&&(n=1);if(e[r].cat){t.push({keywords:e[r].keywords,personal:e[r].personal});for(var s=0,o=e[r].cat.length;s<o;s++)t.push({keywords:e[r].keywords,cat:e[r].cat[s],personal:e[r].personal})}else t.push(e[r])}return this._hasPersonal=n,t},getHasPersonal:function(){return this._hasPersonal},_netInvoke:function(e){if(this._enableNetInvoke===!1)return!1;var e=this._getKeyword();if(!e)return this.hide(),!1;Y.util.Get.script(this._buildURL(e),{onSuccess:this._netSuccess,scope:this,data:e,charset:"utf-8"})},_netSuccess:function(o){var data=eval("window."+this._config.JSONP)||[];if(lang.isArray(data)&&data.length){var parsedData=this._parseData(data);this._fire(this.DATA_BACK),this._syncUI(parsedData),this._keyword.lastValue=o.data,this._keyword.suggestValue="",CAN_BE_USE=!0,this.show()}else this.hide()},_hideItems:function(){this._itemsNode.forEach(function(e){e.setStyle("display","none")})},_onItemClick:function(e){var t=e.currentTarget,n=this;n.hide(),n._updateSuggestItem(t),n._fire(n.ITEM_SELECTED),cem.trigger("submit"),e.stopPropagation()},_onItemMouseOver:function(e){var t=e.currentTarget;this._switchItem(this._keyword.suggestIndex,t.get("index"),!0)},_onInputKeyDown:function(e){var t=e.keyCode;this.enable();switch(t){case 13:this._fire(this.PRESS_ENTER),this.disable(),cem.trigger("submit");break;case 38:this.disable(),this._moveItemHandler("up");break;case 40:this.disable(),this._moveItemHandler("down")}},_moveItemHandler:function(e){var t=this._keyword.suggestIndex,n=t;switch(e){case"up":n--,n<-1&&(n=this._activeLength-1);break;case"down":n++,n>=this._activeLength&&(n=-1);break;default:return!1}this._switchItem(t,n)},_switchItem:function(e,t,n){var r=null,i=null;e>-1&&this._getByIndex(e).removeClass("current"),t>-1?(i=this._getByIndex(t),i.addClass("current"),n||this._updateSuggestItem(i)):cem.trigger(this.ITEM_SELECTED,{keyword:this._keyword.lastValue,cateId:""}),this._keyword.suggestIndex=t},_getByIndex:function(e){return doc.byId(ITEM_ID_PREFIX+e)},show:function(){CAN_BE_USE&&this._contentNode.setStyle("display","block")},hide:function(){this._contentNode.setStyle("display","none")},enable:function(){this._enableNetInvoke=!0},disable:function(){this._enableNetInvoke=!1}},{keywordId:"header-search-keyword",contentId:"header-suggest-dynamic",typeFieldId:"",requestURL:"http://connectkeyword.alibaba.com/lenoIframeJson.htm",JSONP:"intelSearchData",itemLength:10});return SuggestDynamic});;
AE.define("common.searchbar.searchRelated",["core","dom"],function(e,t){var n=t.Document(),r={containerId:"searchbar-related"},i=new e.Base;return e.mix(i,{init:function(t){r=e.merge(r,t),this.container=n.byId(r.containerId)},html:function(e){this.container&&e&&this.container.set("innerHTML",e).setStyle("display","block")}}),i});;
AE.define("common.searchbar.searchSpeech",["lang","core","dom"],function(e,t,n){var r=this.exports;r.run=function(e){function n(){var e=document.createElement("input"),t="onwebkitspeechchange"in e||"speech"in e;return t}var t=YUD.get(e.keywordId);n()&&t&&(t.onwebkitspeechchange=function(){var e="http://stat.alibaba.com/ued/post.html",t={tracelog:"speak_now"};dmtrack.clickstat(e,t)})}});;
AE.define("header.common.cem",["core","lang"],function(e,t){var n,r,i,s={},o={name:"",obj:null,bubble:!0};return r=function(t){var r=t.name,i=t.obj,s=t.bubble;this.domainType="unnamed",r&&(this.name=r,this.domainType="named"),this._bubble=s,this._ranCE={},i&&(this._context=i,e.mix(i,this),e.mix(i,n.prototype))},n=e.extend(e.Base,{_izer:r,_trigger:function(e,n,r){var s=!1;return t.isString(e)&&(e={type:e}),e.target=e.target||this._context||this,s=this._fire(e,n),r=r||!0,(r||this._bubble)&&this!==i&&i.trigger(e,n,!1),this._ranCE[e.type]=[e.target,n],s},trigger:function(e,n,r){var i,s,o=e,u,a=[];t.isArray(e)||(o=[e]);for(i=0,s=o.length;i<s;i++)u=o[i],a.push(this._trigger.apply(this,arguments));return a.length>1?a:a.shift()},_instant:function(e,t,n){var r={type:e},i=this._ranCE[e];i!==undefined&&(r.target=i[0],n&&(r.data=n),t.call(i[0],r,i[1]))},subscribe:function(e,n,r,i){t.isBoolean(Array.prototype.slice.call(arguments).pop())&&(i=r,r=undefined),this.on(e,r,n),i&&this._instant(e,n,r)},subscribeOnce:function(e,t,n,r){r?this._instant(e,t,n):this.once(e,n,t)},unbind:function(e){var t=this._events;this.unsubscribeAll(e),delete t[e]},unsubscribe:function(e,t){this.detach(e,t)},unsubscribeAll:function(e){var t=this._events,n=t[e],r,i;for(r=0,i=n.length;r<i;++r)this.unsubscribe(e,n[r])}},o),i===undefined&&(i=new n({bubble:!1}),e.mix(i,{domain:function(e,r,i){arguments.length<3&&(t.isBoolean(e)&&(i=e,e="",r=null),t.isObject(e)&&(r=e,i=r,e=""));var o;return e&&(o=s[e]),o===undefined&&(o=new n({name:e,obj:r,bubble:i||!0})),e&&(s[e]=o),o},domainType:"global"},!0)),i});;
AE.define("common.searchbar.cem",["header.common.cem"],function(e){var t="searchbar",n=e.domain(t,!1);return n});;
AE.define("common.searchbar",["lang","core","dom","common.searchbar.searchbarData","common.searchbar.searchTypeSelect","common.searchbar.searchSuggestStatic.recentKeywords","common.searchbar.searchSuggestStatic.popularKeywords","common.searchbar.SearchSuggestDynamic","common.searchbar.searchForm","common.searchbar.searchAdvanced","common.searchbar.statistics","common.searchbar.searchRelated","common.searchbar.searchSpeech","common.header.Base"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d,v="mod-searchbar",m="searchbar-form",g="searchbar-type",y="searchbar-field-type",b="searchbar-field-category",w="searchbar-type-options",E="searchbar-type-display",S="SearchTextIdx",x="searchbar-static",T="searchbar-static-content",N="searchbar-dynamic",C="searchbar-advanced",k="searchbar-related",L="searchbar-submit",A="ui-searchbar-mod-type",O="ui-searchbar-mod-advanced",M,_=n.Document(),D=null,P={data:null,currentType:"",keyword:"",autoSuggestionCateId:"",placeholder:"Please input a keyword",staticSuggestType:"recentKeywords",aisnServer:"http://www.alibaba.com"},H=_.byId(S);if(!H||H.get("type")!=="text")S="searchbar-keyword";return D={initSearchForm:function(){a.init({keywordId:S,cateId:b,typeId:y,formId:m,searbarId:v,placeholder:P.placeholder,keyword:P.keyword})},initStatistics:function(){var e=l;M&&e.init(M),a.on(a.BEFORE_SUBMIT,e.onSubmit.bind(e)),i.on(i.ITEM_SELECTED,e.onTypeChange.bind(e))}},d=t.extend(p,{_mergeConfig:function(e){return P=t.merge(P,e),function(){var e=P.aisnServer,t=e.length;"/"===e[t-1]&&(P.aisnServer=e.substr(0,t-1))}(),P},init:function(e){this.formMod=_.byId(m),this.formMod||this.disable(),h.run({keywordId:S}),d.superclass.init.call(this,e)},enable:function(){_.byId(v).setStyle("display","block"),r.init(this.config),D.initSearchForm(),d.superclass.enable.call(this),D.initStatistics()},_getField:function(e){var t=this.formMod.byTag("input"),n=null;return t.forEach(function(t,r){t.get("name")===e&&t.get("type")==="hidden"&&(n=t)}),n},_addField:function(e,t,r){if(!this.formMod)return;var i=this._getField(e);return i?i.set("value",t):(i=n.Element({node:document.createElement("input")}),i.set("name",e).set("value",t).set("type","hidden"),r&&i.set("id",r),i.appendTo(this.formMod)),i},_removeField:function(e){if(!this.formMod)return;var t=this._getField(e);t&&t.remove()},_setFormAction:function(e){if(!this.formMod)return;this.formMod.set("action",e)},getOperation:function(){return{addField:this._addField.bind(this),removeField:this._removeField.bind(this),setFormAction:this._setFormAction.bind(this),setPlaceholder:a.setPlaceholderValue.bind(this),setKeywordFieldName:a.setKeywordFieldName.bind(this),related:c}}},{containerId:"mod-searchbar",mods:["type","static","dynamic","advanced","related"],controllers:{type:function(e){i.init({containerId:g,dropdownId:w,displayId:E,uiClass:A},e),i.syncType()},"static":function(){if(_.byId(v).hasClass("ui-searchbar-normal"))return;var e=_.byId(x);s.init({keywordId:S,containerId:x,contentId:T}),a.on(a.BEFORE_SUBMIT,s.logKeywords.bind(s)),s.hasKeyword()?s.renderUI():o.init({keywordId:S,containerId:x,contentId:T})},dynamic:function(){var e=_.byId(N);if(!e)return;M=new u({keywordId:S,contentId:N,typeFieldId:y,autoSuggestCateId:P.autoSuggestionCateId})},advanced:function(e){f.init({inputId:S,btnId:C,uiClass:O},e)},related:function(){c.init({containerId:k})}}}),new d});;
AE.define("common.header",["lang","core","dom","common.beacon","common.header.sundry","common.searchbar"],function(e,t,n,r,i,s){var o={mod:{},beacon:{},searchbar:{},sundry:{}},u=new t.Base;return t.mix(u,{init:function(n){o=t.merge(o,n);var u=o.mod;r.init(t.mix({},o,{mod:u.beacon},o.beacon,!0)),s.init(t.mix({},o,{mod:u.searchbar},o.searchbar,!0)),i.init(t.mix({},o,{mod:u.sundry},o.sundry,!0)),e.isFunction(o.initComplete)&&o.initComplete.call(this,r.getOperation(),i.getOperation(),s.getOperation())}}),u});;
;;
