AE.define("aisn.home.position",["dom","lang","ua"],function(f,e,b){var c="viewport",a={TL:"tl",TC:"tc",TR:"tr",CL:"cl",CC:"cc",CR:"cr",BL:"bl",BC:"bc",BR:"br",VIEWPORT:c};a.align=function(i,h){var g=[0,0];if(!i&&!i.el){throw ("no element to be positioned!")}i=d(i);h=d(h);g[0]=h.referPoint[0]-i.referPoint[0];g[1]=h.referPoint[1]-i.referPoint[1];if(g[0]!==g[1]||(g[0]+g[1]!==0)){i.el.setXY([i.pos.left+g[0],i.pos.top+g[1]])}};a.center=function(h,g){a.align({el:h,point:"cc"},{el:g,point:"cc"})};function d(i){var j,h,m,g=[0,0],k="getRegion",l;if(i instanceof f.Element||i===c||!i){if(i===c||!i){j=f.Document();k="getClientRegion"}else{j=i}h="tl";m=[0,0];i={el:j,point:h,offset:m}}else{j=i.el;if(!j||j===c){j=f.Document();k="getClientRegion"}if(!(j instanceof f.Node)){throw ("el is invalid!")}h=(i.point||a.TL).toLowerCase();if(a[h.toUpperCase()]!==h){throw ("point is invalid!")}m=i.offset;if(e.isArray(m)){if(!e.isNumber(m[0])||!e.isNumber(m[1])){throw ("offset is invalid!")}}else{m=[0,0]}}l=j[k]();!l.width&&(l.width=l.right-l.left);!l.height&&(l.height=l.bottom-l.top);switch(h.charAt(0)){case"b":g[1]=l.bottom;break;case"c":g[1]=l.top+Math.floor(l.height/2);break;case"t":default:g[1]=l.top;break}switch(h.charAt(1)){case"r":g[0]=l.right;break;case"c":g[0]=l.left+Math.floor(l.width/2);break;case"l":default:g[0]=l.left;break}g[0]+=m[0];g[1]+=m[1];i.referPoint=g;i.pos={top:l.top,left:l.left};return i}return a});
;
AE.define("aisn.home.triggershow.Base",["core","dom","lang","ua","aisn.home.position"],function(c,e,b,a,g){var d=true,i=false,k=function(l){return l.substring(0,1).toUpperCase()+l.substring(1)},j="visible",h="disabled",f=c.extend(c.Base,{_izer:function(l){if(!(l.triggerNode instanceof e.Node)){throw ("triggerNode is invalid!")}if(!(l.contentNode instanceof e.Node)){throw ("contentNode is invalid!")}this._triggerNode=l.triggerNode;this._contentNode=l.contentNode;this._showDelayTime=l.showDelayTime;this._hiddenDelayTime=l.hiddenDelayTime;this._timer=-1;this._property2UI();this._initPropertys(l);this._initEvent();this._bindUI();this._initPosition(l.positionCfg)},_dtor:function(){this.rescue("set");this.rescue("show");this.rescue("hide");this._triggerNode.detach();this._contentNode.detach();this.detach();this.removeProperty(j);this.removeProperty(h);this._triggerNode=null;this._contentNode=null},_initPropertys:function(l){this.set(j,l.visible);this.set(h,l.disabled)},_initEvent:function(){this.hijack("show");this.hijack("hide");this.on("before:show",function(){return !this.getDisabled()});this.on("before:hide",function(){return !this.getDisabled()})},_bindUI:function(){},_handleShow:function(n,l){var m=this._showDelayTime;this._clearTimer();if(m){this._timer=setTimeout((function(){this.show()}).bind(this),m)}else{this.show()}},_handleHide:function(n,l){var m=this._hiddenDelayTime;this._clearTimer();if(m){this._timer=setTimeout((function(){this.hide()}).bind(this),m)}else{this.hide()}},_clearTimer:function(){if(this._timer!=-1){clearTimeout(this._timer);this._timer=-1}},_initPosition:function(l){var n,m;if(b.isArray(l)){n=c.mix({el:this._contentNode},l[0]||{},i);m=c.mix({el:this._triggerNode},l[1]||{});this.on("after:show",function(p,o){g.align(n,m)})}},_property2UI:function(){var l={};this._UI_ATTRS.forEach(function(m){l[m]=d});this.hijack("set");this.on("before:set",function(r,p){var n=p.args,o=n[0],q=n[1],m=this.get(o);return m!==q});this.on("after:set",function(q,o){var m=o.args,n=m[0],p=m[1];if(l[n]){this["_uiSet"+k(n)](p)}})},getTrigger:function(){return this._triggerNode},getContent:function(){return this._contentNode},show:function(){this._clearTimer();this.set(j,d)},hide:function(){this._clearTimer();this.set(j,i)},enable:function(){this.set(h,i)},disable:function(){this.set(h,d)},getDisabled:function(){return this.get(h)},_uiSetVisible:function(l){this._contentNode.setStyle("display",l?"":"none")},_UI_ATTRS:[j]},{triggerNode:null,contentNode:null,showDelayTime:100,hiddenDelayTime:100,positionCfg:null,visible:i,disabled:i});return f});
;
AE.define("aisn.home.triggershow.Overshow",["core","aisn.home.triggershow.Base"],function(a,b){var c=a.extend(b,{_bindUI:function(){this._triggerNode.on("mouseover",this._handleShow.bind(this));this._triggerNode.on("mouseout",this._handleHide.bind(this));this._contentNode.on("mouseover",this._handleShow.bind(this));this._contentNode.on("mouseout",this._handleHide.bind(this))}});return c});
;
AE.define("aisn.home.triggershow.Clickshow",["core","dom","aisn.home.triggershow.Base"],function(a,d,b){var c=a.extend(b,{_initEvent:function(){c.superclass._initEvent.call(this);this.hijack("_handleShow");this.on("after:_handleShow",function(h,g){var f=g.args;if(f[0]){f[0].stopPropagation()}})},_dtor:function(){this.rescue("_handleShow")},_bindUI:function(){this._triggerNode.on("click",this._handleShow.bind(this));d.Document().on("click",this._handleHide.bind(this));this._contentNode.on("click",this._handleShow.bind(this))}});return c});
;
AE.define("aisn.home.triggershow",["aisn.home.triggershow.Overshow","aisn.home.triggershow.Clickshow"],function(e,d){var b="over",c="click",a=this.exports={OVER:b,CLICK:c};a.create=function(g,f){switch(g){case b:return new e(f);case c:return new d(f);default:throw ("type is invalid!");break}}});
;
AE.define("aisn.home.Placeholder",["core","dom","lang","aisn.home.position"],function(c,e,a,h){var d=true,j=false,f="placeholder",g="input",m="textarea",k=function(o){var n;if(!(o instanceof e.Node)){throw ("node is invalid!")}n=o.get("tagName").toLowerCase();if(n!=g&&n!=m){throw ("node is no input/textarea!")}},l={cursor:"text",position:"absolute",overflow:"hidden",whiteSpace:"nowrap"},i=["fontSize","fontFamily","paddingTop","paddingBottom","paddingLeft","paddingRight","height","lineHeight"],b;if(f in document.createElement(g)){return function(){}}b=c.extend(c.Base,{_izer:function(n){this._node=n.node;k(this._node);AE.defer(function(){this._createPlaceholder();this._bindUI()},this)},_dtor:function(){this.detach()},_createPlaceholder:function(){var q=e.Document(),n=q.createElement("div"),p=this._node,o;for(o in l){if(l.hasOwnProperty(o)){n.setStyle(o,l[o])}}i.forEach(function(r){if(r.indexOf("padding")!=-1){n.setStyle(r,parseInt(p.getStyle(r))+parseInt(p.getStyle(r.replace("padding","border")+"Width"))+"px")}else{if(r=="lineHeight"){n.setStyle(r,Math.max(parseInt(p.getStyle(r))||0,parseInt(p.getStyle("height"))||0)+"px")}else{n.setStyle(r,p.getStyle(r))}}});n.set("innerHTML",p.getAttribute(f)).set("className",p.get("className")+"-placeholder-hint");n.setStyle("display",p.get("value")?"none":"");this._visible=p.get("value")?j:d;n.appendTo(q.byTag("body")[0]);this._phNode=n;n=null;this._align()},_bindUI:function(){this._node.on("focus",this._hideHint.bind(this));this._node.on("blur",this._showHint.bind(this));this._phNode.on("click",this._hideHint.bind(this));e(window).on("resize",(function(){var n=this;this._fixed=j;setTimeout(function(){n._align()},200)}).bind(this))},_hideHint:function(){this._phNode.setStyle("display","none");this._node[0].focus();this._visible=j},_showHint:function(){if(!this._node.get("value")){this._phNode.setStyle("display","");this._visible=d;if(!this._fixed){this._align()}}},_align:function(){if(this._visible){h.align(this._phNode,this._node);this._fixed=d}}},{node:null});return b});
;

;
AE.define("common.header.navDropdown",["core","dom","aisn.home.triggershow"],function(a,d,b){var c={conId:"header-nav",menuClass:"J-nav-item-drop",hoverClass:"header-nav-item-hover",linkClass:"header-nav-item-link",subMenuClass:"header-nav-subitems"};this.exports.init=function(f){var g=d.Document();f=a.merge(c,f||{});var h=g.byId(f.conId),e=h.byClass(f.menuClass,"li");e.forEach(function(l){var j=l.byClass(f.linkClass,"a")[0],i=l.byClass(f.subMenuClass,"ul")[0],k=b.create("over",{triggerNode:j,contentNode:i,showDelayTime:50,hiddenDelayTime:50});k.on("after:show",function(m){i.getParent().addClass(f.hoverClass)});k.on("after:hide",function(m){i.getParent().removeClass(f.hoverClass)})})}});
;
AE.define("common.header.navDropdownMessage",["core","dom","lang"],function(c,d,b){var f=YAHOO.util.Get,i=(window.location.pathname==="/"||window.location.pathname===""),g={targetId:"header-nav-item-message",dataUrl:"http://notification.alibaba.com/notification.do",countElClass:"J-nav-item-message-count",countClass:"header-nav-item-message-count",subMenuClass:"header-nav-subitems",subMenuItemTpl:'<li class="header-nav-subitem"><a class="{className}" rel="nofollow" target="_blank" href="{link}">{content}</a></li>',subMenuItemLinkClass:{notification:"header-nav-subitem-note",message:"header-nav-subitem-link",separator:"header-nav-subitem-separator",entrance:"header-nav-subitem-entrance"},message:{no:"No new notifications",view:"View {name}",have:"<strong>{count}</strong> New {name}"}},a="javascript:;";function h(k,m){var l;if(k&&b.isString(k)){l="jsonp_callback_"+(new Date().getTime());AE[l]=m;k=k+"?callback=AE."+l;f.script(k,{onSuccess:function(n){n.purge();delete AE[l]},onFailure:function(n){n.purge();delete AE[l]}})}}function j(l,n){var o="?tracelog=",m=false,k="";if(l&&n){k=l.replace(/\?((?:\&?[^\&#]+)+)/,function(q,p){m=true;return o+n+"&"+p});if(!m){k=l.replace(/#(?:[^\?]+)/,function(p){m=true;return o+n+p})}if(!m){k+=(o+n)}}return k}function e(l,k){if(b.isString(l)&&b.isObject(k)){l=l.replace(/\{(\w+)\}/gi,function(n,m){return(typeof k[m]==="undefined")?n:k[m]}).replace(/(\\\{)|\\\}/g,function(n,m){return m?"{":"}"})}return l}this.exports.init=function(l){l=c.merge(g,l||{});var n=d.Document(),m=n.byId(l.targetId),k=m&&m.byClass(l.subMenuClass,"ul")[0],o=m&&m.byClass(l.countElClass,"span")[0],p;if(!m||!k){return}p=function(s){var w="",v=0,t=[],x=[],q=[],u=l.subMenuItemLinkClass,y=l.message,r;if(!b.isArray(s)){return}s.forEach(function(C,z){var B=y.no,A="";if(!C.name){return}A="notification_"+C.name.toLowerCase().replace(" ","_");A=A+(i?"_homepage":"");if(C.count>0){B=e(y.have,{count:C.count,name:C.name});t.push({className:u.message,link:j(C.url,A),content:B})}else{if(C.count===0){B=e(y.view,{name:C.name});x.push({className:u.entrance,link:j(C.url,A),content:B})}}v+=C.count});if(o){if(v===0){o.removeClass(l.countClass);o.set("innerHTML","")}else{o.addClass(l.countClass);v=v<100?v:"99+";o.set("innerHTML",v)}}r={className:u.separator,link:a,content:""};if(t.length===0){t=[{className:u.notification,link:a,content:y.no}]}if(x.length===0){q=t.concat(x)}else{q=t.concat(r).concat(x)}q.forEach(function(A,z){w+=e(l.subMenuItemTpl,A)});k.set("innerHTML",w)};h(l.dataUrl,p)}});
;
AE.define("common.header.history",["core"],function(r){var F=this.exports;var x={set:function(O,Q){var M=arguments;var T=arguments.length;var N=(T>2)?M[2]:null;var P=(T>3)?M[3]:null;var S=(T>4)?M[4]:"/";var R=(T>5)?M[5]:false;document.cookie=O+"="+escape(Q)+((N==null)?"":("; expires="+N.toGMTString()))+((S==null)?"":("; path="+S))+((P==null)?"":("; domain="+P))+((R==true)?"; secure":"")},get:function(P){var N=P+"=";var R=N.length;var M=document.cookie.length;var Q=0;var O=0;while(Q<M){O=Q+R;if(document.cookie.substring(Q,O)==N){return this.__get(O)}Q=document.cookie.indexOf(" ",Q)+1;if(Q==0){break}}return null},__get:function(N){var M=document.cookie.indexOf(";",N);if(M==-1){M=document.cookie.length}return unescape(document.cookie.substring(N,M))},clear:function(N){var M=arguments;var R=arguments.length;var O=(R>1)?M[1]:null;var Q=(R>2)?M[2]:"/";var P=(R>3)?M[3]:false;if(this.get(N)){document.cookie=N+"="+((Q)?"; path="+Q:"")+((O)?"; domain="+O:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}},cookieCache:{},getCookieTable:function(M,O){var N=x.cookieCache[M];if(null==N||N.changed){N=new s(M);var P=x.get(M);if(null!=P&&P!=""){N.parseFromString(P)}if(O){N.domain=O}x.cookieCache[M]=N}return N}};var z=new Date();z.setTime(z.getTime()+60*60*1000*24*60);var o="\n\n";var p="^\n";var D="$\n";var v="\t";var f="NOSET";function m(M){return M!=null&&typeof M=="object"&&"join" in M}function s(N,P,M,Q,S,R){this.expires=M?M:z;this.domain=Q?Q:null;this.path=S?S:"/";this.secure=R?R:false;this.name=N?N:null;this.groups=P&&m(P)?P:[];this.__tree={};this.changed=false;this.buildString=function(T){if(null!=T&&T.length>0){return T.join(o)}return null};this.parseFromString=function(W){if(null==W||""==W){return this}var T=W.split(o);this.removeAll();for(var U=0;U<T.length;U++){if(null!=T[U]&&""!=T[U]){var V=new q();V.parseFromString(T[U]);this.add(V)}}return this};this.toString=function(){return this.buildString(this.groups)};this.size=function(){return this.groups.length};this.arrange=function(){var T=[],V={};for(var U=0;U<this.size();U++){if(null!=this.groups[U]){T[T.length]=this.groups[U];V[this.groups[U].name]=this.groups[U]}}this.removeAll();this.groups=T;this.__tree=V};this.__clearTree=function(){this.__tree={}};this.__addToTree=function(T){if(null!=T){this.__tree[T.name]=T}};this.__removeFromTree=function(T){if(null!=T){delete this.__tree[T.name]}};this.removeAll=function(){this.groups=[];this.__clearTree()};this.get=function(T){if(this.__tree[T]){return this.__tree[T]}return null};this.add=function(U){if(null==U){return}for(var T=0;T<this.size();T++){if(U.name.toLowerCase()==this.groups[T].name.toLowerCase()){this.remove(U.name)}}U.parent=this;this.groups[this.size()]=U;this.__addToTree(U);return this};this.remove=function(U){if(null==U||""==U){return}for(var T=0;T<this.size();T++){if(U.toLowerCase()==this.groups[T].name.toLowerCase()){this.__removeFromTree(this.groups[T]);this.groups[T]=null}}this.arrange();return this};this.save=function(){this.changed=true;x.set(this.name,this.toString(),this.expires,this.domain,this.path,this.secure)};this.clear=function(){x.clear(this.name)};if(this.name!=null&&typeof(P)=="string"){this.parseFromString(P)}else{if(this.name!=null&&m(P)){for(var O=0;O<this.size();O++){if(null!=this.groups[O]){this.__addToTree(this.groups[O]);this.groups[O].parent=this}}}}}function q(M,O){this.name=M?M:null;this.items=O&&m(O)?O:[];this.__tree={};this.max=20;this.parent=null;this.buildString=function(P){var Q=this.name?this.name:f;if(null!=P&&P.length>0){return Q+p+P.join(D)}return Q};this.parseFromString=function(U){if(null==U||""==U){return this}var S=U.indexOf(p);if(S>-1){this.name=U.substring(0,S);var T=U.substring(S+p.length);if(null!=T&&T!=""){this.removeAll();var P=T.split(D);for(var Q=0;Q<P.length;Q++){if(null!=P[Q]&&""!=P[Q]){var R=new b();R.parseFromString(P[Q]);this.add(R)}}}}else{this.name=U}return this};this.toString=function(){return this.buildString(this.items)};this.getReverse=function(){var P=[];if(this.size()>0){return this.items.slice(0,this.items.length).reverse()}return P};this.setMax=function(P){this.max=P;this.arrange()};this.size=function(){return this.items.length};this.arrange=function(){var P=[],R={};for(var Q=0;Q<this.size();Q++){if(null!=this.items[Q]){P[P.length]=this.items[Q]}}if(P.length>this.max){P=P.slice(P.length-this.max,P.length)}for(var Q=0;Q<P.length;Q++){R[P.key]=P[Q]}this.removeAll();this.items=P;this.__tree=R};this.__clearTree=function(){this.__tree={}};this.__addToTree=function(P){if(null!=P){this.__tree[P.key]=P}};this.__removeFromTree=function(P){if(null!=P){delete this.__tree[P.key]}};this.removeAll=function(){this.items=[];this.__clearTree()};this.get=function(P){if(this.__tree[P]){return this.__tree[P]}return null};this.add=function(Q){if(null==Q){return}for(var P=0;P<this.size();P++){if(Q.key.toLowerCase()==this.items[P].key.toLowerCase()){this.remove(Q.key)}}Q.parent=this;this.items[this.size()]=Q;this.__addToTree(Q);return this};this.remove=function(Q){if(null==Q||""==Q){return}for(var P=0;P<this.size();P++){if(Q.toLowerCase()==this.items[P].key.toLowerCase()){this.__removeFromTree(this.items[P]);this.items[P]=null}}this.arrange();return this};this.save=function(){if(null!=this.parent){this.arrange();this.parent.save()}};if(this.name!=null&&typeof(O)=="string"){this.parseFromString(this.name+p+O)}else{if(this.name!=null&&m(O)){for(var N=0;N<this.size();N++){if(null!=this.items[N]){this.__addToTree(this.items[N]);this.items[N].parent=this}}}}}function b(N,M){this.key=N?N:null;this.attributes=M&&m(M)?M:[];this.max=20;this.parent=null;this.buildString=function(O){var P=this.key?this.key:f;if(null!=O&&O.length>0){return P+v+O.join(v)}return P};this.parseFromString=function(P){if(null==P||""==P){return this}var O=P.split(v);if(O.length>0){this.key=O[0];this.attributes=O.slice(1,O.length)}return this};this.setMax=function(O){this.max=O;this.arrange()};this.size=function(){return this.attributes.length};this.toString=function(){return this.buildString(this.attributes)};this.getReverse=function(){var O=[];if(this.size()>0){return this.attributes.slice(0,this.attributes.length).reverse()}return O};this.reverseString=function(){return this.buildString(this.getReverse())};this.arrange=function(){var O=[];for(var P=0;P<this.size();P++){if(null!=this.attributes[P]){O[O.length]=this.attributes[P]}}if(O.length>this.max){this.attributes=O.slice(O.length-this.max,O.length)}else{this.attributes=O}};this.removeAll=function(){this.attributes=[]};this.get=function(O){return O<this.size()?this.attributes[O]:null};this.add=function(O){if(null==O||""==O){return}this.remove(O);this.attributes[this.size()]=O;this.arrange();return this};this.remove=function(P){if(null==P||""==P){return}for(var O=0;O<this.size();O++){if(P.toLowerCase()==this.attributes[O].toLowerCase()){this.attributes[O]=null}}this.arrange();return this};this.contains=function(P){for(var O=0;O<this.size();O++){if(P.toLowerCase()==this.attributes[O].toLowerCase()){return true}}};this.save=function(){if(null!=this.parent){this.arrange();this.parent.save()}};if(this.key!=null&&typeof(M)=="string"){this.parseFromString(this.key+v+M)}}var n="alibaba.com";var L="history";var a="keywords";var H="product";var I="selloffer";var K="buyoffer";var j="company";var e="category";var i=H+"_"+I;var w=8;var h=8;var J=8;var t=6;var G=4;var E=6;var d=8;function B(){return x.getCookieTable(L,n)}function k(S,R,O,M){if(null==O||""==O){return}var P=A(S);var N=P.get(R);var Q=false;if(m(O)){N=new b(R,O);Q=true}else{N=(null==N)?new b(R):N;N.add(O);Q=true}P.add(N);if(S==a){N.setMax(M)}else{P.setMax(M)}if(Q){P.save()}}function A(O){var M=B();var N=M.get(O);if(null==N){N=new q(O);M.add(N);N.parent=M}return N}function c(M){k(a,a,M,w)}function g(N,M){k(i,N,M,d)}function u(N,M){k(i,N,M,d)}function C(N,M){k(j,N,M,G)}function y(N,M){k(K,N,M,t)}function l(N,M){k(e,N,M,E)}r.mix(F,{getHistoryCookieGroup:A,logKeywordsHistory:c})});
;
AE.define("common.header.statistics",["lang","core"],function(b,c){var f=window,g=f.dmtrack||{clickstat:function(l,k){var n=l+"?",m=[];Object.keys(k).forEach(function(o){m.push(o+"="+k[o])});n+=m.join("&");var j=new Image();j.src=n}},i=null,a=null,d=(f.dmstat&&f.dmstat.pid)||"0bdbc7f56188458aa0a002d4aff8a65c",h="http://stat.alibaba.com/qr/queryreport.html",e={products:{statisType:"p",statisSelectType:"product"},suppliers:{statisType:"c",statisSelectType:"supplier"},buyers:{statisType:"b",statisSelectType:"buyer"}};return{init:function(k,j){i=k;i.registerTypeData(e);j.on(j.ITEM_SELECTED,this._intellItemSelected.bind(this));j.on(j.DATA_BACK,this._intellDataBack.bind(this));a=j},_createReport:function(k){var m={time:(new Date).getTime(),pid:d,set:i.get("statisType")||"s",area:"sb1",value:""};k=c.merge(m,k);var l=[];Object.keys(k).forEach(function(n){l.push(n+"="+k[n])});var j=new Image();j.src=h+"?"+l.join("&")},_intellReport:function(){if(a.isSuggestKeyword()){var j=a.getKeywordInfo(),k=j.suggestCatId,l=j.suggestValue;if(k){l+="^"+k}this._createReport({type:"select",ckw:l,ckw2:j.lastValue,value:j.suggestIndex,ispersonal:j.isPersonal})}},_intellDataBack:function(){var j=a.getKeywordInfo(),k=a.getHasPersonal();this._createReport({type:"select",ckw:j.currentValue,ckw2:"",value:"",ispersonal:k})},_intellItemSelected:function(j){this._intellReport()},onTypeChange:function(k,j){g.clickstat("http://stat.alibaba.com/performance/list.html",{click_region:"top_switch_button",click_value:i.get("statisSelectType")})},onSubmit:function(k){var j=a.getKeywordInfo();this._createReport({ckw:j.currentValue,ckw2:"",value:"",type:"sbtn"});this._intellReport()}}});
;
AE.define("common.header.searchForm",["lang","core","dom","aisn.home.Placeholder","common.header.history"],function(b,e,g,d,i){var j=g.Document(),c={keywordId:"",formId:"",searBtnId:"header-action-search"},a=null,h=null,f={};e.mix(f,e.IEventable.prototype,{BEFORE_SUBMIT:"before_submit",init:function(k){c=e.merge(c,k);a=j.byId(c.formId);h=j.byId(c.keywordId);this._initDefaultValue(h);this._bindUI();new d({node:h})},_initDefaultValue:function(k){if(!k.get("defaultValue")){try{var n=window.opener.document,l=n.getElementById(c.keywordId).value;k.set("value",l)}catch(m){}}},_bindUI:function(){a.on("submit",this._onSubmit.bind(this))},_verifyKeyword:function(k){if(""===k){alert("Please input a search term.");return false}else{if(k.length>50){alert("please input a search term less than 50 characters.");return false}else{if(!k.search(/[^\x00-\x80]/g)){alert("Sorry, the information you filled in is not in English.\nPlease input the information in English instead.");return false}}}return true},_onSubmit:function(l){var k=h.get("value").trim();l.preventDefault();if(this._verifyKeyword(k)){this._fire(f.BEFORE_SUBMIT);setTimeout(function(){a[0].submit()},100)}else{h[0].focus()}}});e.IEventable.apply(f);return f});
;
AE.define("common.header.searchAdvanced",["core","dom"],function(a,e){var d=e.Document(),c={inputId:"",btnId:"",url:"http://www.alibaba.com/trade/advancesearch"};function b(f){return encodeURIComponent(f).replace(/%20/g,"+")}this.exports.init=function(g){g=a.merge(c,g);var h=d.byId(g.inputId),f=d.byId(g.btnId),i=[];f.on("click",function(j){j.preventDefault();i.push("advancedSearchText="+b(h.get("value")));AE.util.redirect(g.url+"?"+i.join("&"))})}});
;
AE.define("common.header.headerData",["lang","core"],function(f,b){var a=new b.Base(),d="products",c={staticSuggestType:"recentKeywords"},e={products:{},buyers:{},suppliers:{}};b.mix(a,{P:"products",B:"buyers",S:"suppliers",_key4Data:function(g){var h=e[d];if(!h[g]){h=c}return h},init:function(g,h){if(g.currentType){d=g.currentType;delete g.currentType}c=b.merge(c,g);if(h){this.registerTypeData(h)}this.hijack("set")},getType:function(){return d},setType:function(g){if(e[g]){d=g}},registerTypeData:function(h){var g=arguments,i=null;i=Object.keys(e);i.forEach(function(j){if(e[j]){b.mix(e[j],h[j])}})},addType:function(g){e[g]={}}});a.defineProperties({"*":{get:function(g){var i=this._key4Data(g),h=i[g];return h},set:function(g,i){var h=this._key4Data(g);h[g]=i}}});return a});
;
AE.define("common.header.searchTypeSelect",["core","dom","aisn.home.triggershow","common.header.headerData"],function(c,e,b,f){var g={containerId:"",dropdownId:"",displayId:"",typeFieldId:"",keywordFieldId:""},o=null,i=e.Document(),n=null,a=null,m=null,l=null,j=null,h=null,d=new c.Base(),k="SearchText";c.mix(d,{ITEM_SELECTED:"item_selected",syncType:function(p){if(p){o.setType(p)}m.set("innerHTML",o.get("typeDisplay"));l.set("value",o.get("typeValue"));h.action=o.get("actionURL");keywordFieldNode.set("name",o.get("keywordFieldName")||k)},init:function(q,p){q=c.merge(g,q);o=p;o.registerTypeData({products:{actionURL:o.get("aisnServer")+"/trade/search",typeDisplay:"Products",typeValue:"product_en",keywordFieldName:k},buyers:{actionURL:"http://sourcing.alibaba.com/rfq_search_list.htm",typeDisplay:"Buyers",typeValue:"offer_en",keywordFieldName:k},suppliers:{actionURL:o.get("aisnServer")+"/trade/search",typeDisplay:"Suppliers",typeValue:"company_en",keywordFieldName:k}});n=i.byId(q.dropdownId);a=i.byId(q.containerId);m=i.byId(q.displayId);l=i.byId(q.typeFieldId);keywordFieldNode=i.byId(q.keywordFieldId);h=l[0].form;this._initClickshow()},_initClickshow:function(){j=b.create("click",{triggerNode:a,contentNode:n});n.on("click",function(r){var q=r.target,p=q.getAttribute("data-value");if(p){d.syncType(p);d._fire(d.ITEM_SELECTED,{type:p})}j.hide();r.stopPropagation()})}});return d});
;
AE.define("common.header.searchSuggestStatic.recentKeywords",["core","dom","common.header.history","aisn.home.triggershow"],function(a,e,h,g){var k=e.Document(),m="keywords",j={keywordId:"header-search-keyword",containerId:"header-suggest-static",contentId:"header-suggest-static-content"},i=null,b=null,f=null,n=null,d=this.exports;function l(){var o=null,q=null,p=[],t=null;t=h.getHistoryCookieGroup(m);function s(v){if(v==null){return""}var u=escape(v);if(v.indexOf("+")!=-1){u=u.replace(/\+/g,"%2B")}if(v.indexOf("/")!=-1){u=u.replace(/\//g,"%2F")}return u}function r(u){if(u==null){return""}u=u.replace(/^\s*|\s*$/g,"");u=u.replace(/\s+/g,"_");u=s(u);return s(u)}if(t&&t.size()>0){o=t.get(m);if(o&&o.size()>0){q=o.getReverse();q.forEach(function(u){p.push('<a ref="nofollow" href="javascript:void(0);" data-keyword="'+r(u)+'">'+AE.util.xmlEncode(u)+"</a>")})}}return p.join(", ")}function c(){var o=l(),p=g.create("over",{triggerNode:i,contentNode:b,hiddenDelayTime:200});function q(r){if(i.get("value")===""){p.show()}else{p.hide()}}i.on("click",q);i.on("keyup",q);f.on("click",function(t){var s=t.target,r=s.getAttribute("data-keyword");if(r){AE.util.redirect(n.get("recentWordURL").replace("{@}",r))}});f.set("innerHTML",o)}a.IEventable.apply(d);a.mix(d,a.IEventable.prototype,{init:function(p,o){p=a.merge(j,p);n=o;n.registerTypeData({products:{recentWordURL:"http://www.alibaba.com/products/{@}.html"},buyers:{recentWordURL:"http://sourcing.alibaba.com/rfq_search_list.htm?SearchText={@}"},suppliers:{recentWordURL:"http://www.alibaba.com/corporations/{@}.html"}});i=k.byId(p.keywordId);b=k.byId(p.containerId);f=k.byId(p.contentId)},renderUI:function(){c()},logKeywords:function(){h.logKeywordsHistory(i.get("value").trim())}})});
;
AE.define("common.header.searchSuggestStatic.popularKeywords",["core","dom","aisn.home.triggershow"],function(a,c,d){var b={keywordId:"header-search-keyword",containerId:"header-suggest-static",contentId:"header-suggest-static-content"};this.exports.init=function(g){g=a.merge(b,g);var j=c.Document(),i=j.byId(g.keywordId),f=j.byId(g.containerId),e=j.byId(g.contentId),h=d.create("over",{triggerNode:i,contentNode:f,hiddenDelayTime:200})}});
;
AE.define("common.header.SearchSuggestDynamic",["lang","core","dom"],function(lang,core,dom){var Y=YAHOO,doc=dom.Document(),ITEM_ID_PREFIX="__suggest-item-",CAT_CLASS="header-dynamic-search-category",CAN_BE_USE=false;var SuggestDynamic=core.extend(core.Base,{PRESS_ENTER:"press_enter",ITEM_SELECTED:"item_selected",DATA_BACK:"data_back",_izer:function(config){this._config=config;this._keywordNode=doc.byId(config.keywordId);this._typeNode=doc.byId(config.typeFieldId),this._contentNode=doc.byId(config.contentId);this._catNode=doc.byId(config.catFieldId);this._requestURL=config.requestURL;if(typeof config.autoSuggestCateId!=="undefined"){this._autoSuggestionCateId=config.autoSuggestCateId}else{this._autoSuggestionCateId=""}this._hasPersonal=0;this._enableNetInvoke=false;this._keyword={lastValue:"",currentValue:"",suggestIndex:-1,suggestValue:"",suggestCatId:"",isPersonal:0};this._itemsNode=[];this._activeLength=0;this._renderUI();this._bindUI()},_renderUI:function(){var UL=doc.createElement("ul"),LI=null;for(var i=0;i<10;i++){LI=doc.createElement("li");LI.set("index",i);LI.set("id",ITEM_ID_PREFIX+i);LI.appendTo(UL);this._itemsNode.push(LI)}this._hideItems();UL.appendTo(this._contentNode)},_bindUI:function(){var self=this;doc.on("click",function(){self.hide()});YUE.on(this._keywordNode[0],"paste",function(e){AE.defer(function(){self.enable();self._netInvoke()})});this._keywordNode.on("keyup",function(e){self._netInvoke()});this._keywordNode.on("click",function(e){if(self._getKeyword()){self.show()}else{self.hide()}e.stopPropagation()});this._keywordNode.on("keydown",this._onInputKeyDown.bind(this));this._onItemMouseOver=this._onItemMouseOver.bind(this);this._onItemClick=this._onItemClick.bind(this);this._itemsNode.forEach(function(item){item.on("click",self._onItemClick);item.on("mouseover",self._onItemMouseOver)})},_syncUI:function(datas){var items=this._itemsNode,item=null,data=null,html="",len=this._activeLength=datas.length<items.length?datas.length:items.length;this._hideItems();for(var i=0;i<len;i++){item=items[i];data=datas[i];html='<a href="javascript:void(0)">';html+=data.keywords;item.set("catId","");if(data.cat){var catIds=Object.keys(data.cat);catIds.forEach(function(catId){item.set("catId",catId);html+='<span class="'+CAT_CLASS+'"> in '+data.cat[catId]+"</span>"})}html+="</a>";item.set("keyword",data.keywords);item.set("innerHTML",html);item.set("personal",data.personal);item.setStyle("display","block")}},_getKeyword:function(){return this._keywordNode.get("value").trim()},_setKeyword:function(value){this._keywordNode.set("value",value)},getKeywordInfo:function(){return core.merge(this._keyword,{currentValue:this._getKeyword()})},isSuggestKeyword:function(){var word=this._keyword;if(word.suggestValue&&word.suggestIndex>=0&&this._getKeyword()===word.suggestValue){return true}else{return false}},_updateSuggestItem:function(suggestItem){var value=this._urldecode(suggestItem.get("keyword")),catId=suggestItem.get("catId");this._setKeyword(value);this._catNode.set("value",catId);this._keyword.suggestCatId=catId;this._keyword.suggestValue=value;this._keyword.isPersonal=suggestItem.get("personal")},_urldecode:function(str){if(!str){return""}str=str.replace(/\&lt;/g,"<");str=str.replace(/\&gt;/g,">");str=str.replace(/\&quot;/g,'"');str=str.replace(/\&#39;/g,"'");str=str.replace(/\&amp;/g,"&");return str},_buildURL:function(keyword){var hasOwn=Object.prototype.hasOwnProperty,parts=[],args={},url=this._requestURL;args={iframe_delete:"true",time:Date.now(),varname:this._config.JSONP,keyword:keyword,searchType:this._typeNode.get("value"),cateId:this._autoSuggestionCateId,cookieId:AE.util.getCookie("ali_beacon_id")};for(var i in args){if(hasOwn.call(args,i)){parts.push(i+"="+args[i])}}if(url.indexOf("?")<0){url+="?"}url=url+parts.join("&");return url},_parseData:function(data){var items=[],hasPersonal=0;for(var i=0,l=data.length;i<l;i++){if(data[i].personal==="1"){hasPersonal=1}if(data[i].cat){items.push({keywords:data[i].keywords,personal:data[i].personal});for(var j=0,k=data[i].cat.length;j<k;j++){items.push({keywords:data[i].keywords,cat:data[i].cat[j],personal:data[i].personal})}}else{items.push(data[i])}}this._hasPersonal=hasPersonal;return items},getHasPersonal:function(){return this._hasPersonal},_netInvoke:function(keyword){if(this._enableNetInvoke===false){return false}var keyword=this._getKeyword();if(!keyword){this.hide();return false}Y.util.Get.script(this._buildURL(keyword),{onSuccess:this._netSuccess,scope:this,data:keyword,charset:"utf-8"})},_netSuccess:function(o){var data=eval("window."+this._config.JSONP)||[];if(lang.isArray(data)&&data.length){var parsedData=this._parseData(data);this._fire(this.DATA_BACK);this._syncUI(parsedData);this._keyword.lastValue=o.data;this._keyword.suggestValue="";CAN_BE_USE=true;this.show()}else{this.hide()}},_hideItems:function(){this._itemsNode.forEach(function(item){item.setStyle("display","none")})},_onItemClick:function(e){var item=e.currentTarget,self=this;self.hide();self._updateSuggestItem(item);self._fire(self.ITEM_SELECTED);setTimeout(function(){self.submit()},100);e.stopPropagation()},_onItemMouseOver:function(e){var item=e.currentTarget;this._switchItem(this._keyword.suggestIndex,item.get("index"),true)},_onInputKeyDown:function(e){var keyCode=e.keyCode;this.enable();switch(keyCode){case 13:this._fire(this.PRESS_ENTER);this.disable();break;case 38:this._moveItemHandler("up");this.disable();break;case 40:this._moveItemHandler("down");this.disable();break}},_moveItemHandler:function(action){var lastIndex=this._keyword.suggestIndex,index=lastIndex;switch(action){case"up":index--;if(index<-1){index=this._activeLength-1}break;case"down":index++;if(index>=this._activeLength){index=-1}break;default:return false}this._switchItem(lastIndex,index)},_switchItem:function(last,current,keepValue){var lastItem=null,currentItem=null;if(last>-1){this._getByIndex(last).removeClass("current")}if(current>-1){currentItem=this._getByIndex(current);currentItem.addClass("current");if(!keepValue){this._updateSuggestItem(currentItem)}}else{this._setKeyword(this._keyword.lastValue)}this._keyword.suggestIndex=current},_getByIndex:function(index){return doc.byId(ITEM_ID_PREFIX+index)},show:function(){if(CAN_BE_USE){this._contentNode.setStyle("display","block")}},hide:function(){this._contentNode.setStyle("display","none")},enable:function(){this._enableNetInvoke=true},disable:function(){this._enableNetInvoke=false},submit:function(){this._keywordNode[0].form.submit()}},{keywordId:"header-search-keyword",contentId:"header-suggest-dynamic",catFieldId:"",typeFieldId:"",requestURL:"http://connectkeyword.alibaba.com/lenoIframeJson.htm",JSONP:"intelSearchData",itemLength:10});return SuggestDynamic});
;
AE.define("common.header.cookieInfo",["core"],function(b){var h=window,e=h.AE,g=e.util,a={},f=null;function d(j,k){var l=g.getCookie(j),o=a;if(l){o[j]=l;var n=l.split("&"),p,q=n.length,m,s,r;for(p=0;p<q;p++){m=n[p];m=m.split("=");s=m[0];r=m[1];if(!k||k[s]){o[s]=r}}}}function c(){var j=null,l=a,k=l.x_user,m=k.split("|");j={country:m[0],firstName:m[1],lastName:m[2],memberType:m[3],memberSeq:m[4]};l.userInfo=j}function i(){var j=a;d("xman_us_f",{x_local:true,x_user:true});d("xman_us_t",{sign:true});j.isNew=false;j.isMember=false;j.isLogin=false;if(j.xman_us_f&&j.x_user){j.isMember=true;c()}else{j.isNew=true}if(j.isMember&&j.sign=="y"){j.isLogin=true}}i();f={get:function(j){return a[j]},getUser:function(j){if(this.get("isMember")){var k=a.userInfo;if(j){k=k[j]}return k}}};return f});
;
AE.define("common.header.navUser",["core","dom","common.header.cookieInfo"],function(b,g,c){var f='Welcome to Alibaba.com , <a rel="nofollow" href="http://us.my.alibaba.com/user/join/join_step1.htm"><strong>Join Free</strong></a> | <a rel="nofollow" href="https://login.alibaba.com/">Sign In</a>',e='Welcome {firstName}, <a rel="nofollow" href="https://login.alibaba.com/">Sign In</a> (<a rel="nofollow" href="https://login.alibaba.com/">Not you?</a>) ',a='Welcome {firstName}, <a href="http://us.my.alibaba.com/user/sign/sign_out.htm" rel="nofollow">Sign Out</a>',d=g.Document();this.exports.init=function(i){i=i||{};var k=c,j="",h=d.byId(i.containerId||"header-nav-user");if(k.get("isLogin")){j=a;j=j.replace("{firstName}",k.getUser("firstName").substr(0,20))}else{if(k.get("isMember")){j=e;j=j.replace("{firstName}",k.getUser("firstName").substr(0,20))}else{j=f}}h.set("innerHTML",j)}});
;
AE.define("common.header.ModExtend",["lang","core","dom"],function(f,a,e){var d=e.Document(),b={};var c=a.extend(a.Base,{_izer:function(){},init:function(k,o,g){this.config=a.merge(b,k);var m=this.config.mod,n=d.byId(m.headerExtendId);if(g.extend&&n){g.extend.set("innerHTML",n.get("innerHTML"));n.remove()}if(g.form&&m.search){var j=m.search.fields,p=m.search.action,l=m.search.searchTypes,h=d.byId(m.search.suggestStaticId);if(j){j.forEach(function(s,q){var r=document.createElement("input");r.name=s.name;r.value=s.value;r.id=s.id;r.type="hidden";g.form[0].appendChild(r)})}if(p){g.form.set("action",p)}if(g.searchType&&l&&l.length>0){var i=[];l.forEach(function(s,q){var t,r="";for(t in s){r=t;break}o.addType(t);if(q===0){o.setType(t)}if(!s[r].statisType){s[r].statisType=r;s[r].statisSelectType=r}o.registerTypeData(s);i.push('<li class="header-search-type-option"><a href="javascript:void(0)" data-value="'+r+'" rel="nofollow">'+s[r].typeDisplay+"</a></li>")});g.searchType.set("innerHTML",i.join(""))}if(g.suggestStatic&&h){g.suggestStatic.set("innerHTML",h.get("innerHTML"));h.remove()}}}});return new c()});
;
AE.define("common.header.headerChannel",["lang","core","dom","common.header.headerData","common.header.navDropdown","common.header.searchTypeSelect","common.header.searchSuggestStatic.recentKeywords","common.header.searchSuggestStatic.popularKeywords","common.header.SearchSuggestDynamic","common.header.searchForm","common.header.searchAdvanced","common.header.statistics","common.header.navDropdownMessage","common.header.navUser","common.header.ModExtend"],function(H,A,z,p,j,a,k,r,v,g,c,y,w,f,s){var h="header-nav",o="header-nav-user",n="header-search-form",e="SearchTextIdx",x="header-field-type",u="header-field-category",i="header-search-type",t="search-type-display",m="search-type-options",F="header-suggest-dynamic",l="header-suggest-static",E="header-suggest-static-content",D="header-advanced-search",B="header-extend";var b=window,G=z.Document(),q=null,d=null,C={currentType:"products",currentKeyword:"",staticSuggestType:"",aisnServer:"http://www.alibaba.com",autoSuggestionCateId:"",modConfig:null};q={initNavigator:function(){f.init({containerId:o});j.init({conId:h});w.init()},initTypeSelect:function(){a.init({containerId:i,dropdownId:m,displayId:t,typeFieldId:x,keywordFieldId:e},p);a.syncType()},initSearchForm:function(){g.init({keywordId:e,formId:n})},initStaticSuggest:function(){k.init({keywordId:e,containerId:l,contentId:E},p);g.on(g.BEFORE_SUBMIT,k.logKeywords.bind(k));if(p.get("staticSuggestType")==="recentKeywords"){k.renderUI()}else{r.init({keywordId:e,containerId:l,contentId:E})}},initDynamicSuggest:function(){d=new v({contentId:F,keywordId:e,typeFieldId:x,catFieldId:u,autoSuggestCateId:C.autoSuggestionCateId})},initSearchAdvanced:function(){c.init({inputId:e,btnId:D})},initStatistics:function(){var I=y;if(d){I.init(p,d)}g.on(g.BEFORE_SUBMIT,I.onSubmit.bind(I));a.on(a.ITEM_SELECTED,I.onTypeChange.bind(I))}};this.exports.init=function(Q){C=A.merge(C,Q);(function(){var S=C.aisnServer,R=S.length;if("/"===S[R-1]){C.aisnServer=S.substr(0,R-1)}})();p.init(C);var K=G.byId(h),O=G.byId(B),P=G.byId(n),L=G.byId(m),I=G.byId(D),M=G.byId(F),N=G.byId(l),J=G.byId(t);if(C.mod){s.init(C,p,{form:P,searchType:L,extend:O,suggestStatic:N})}if(K){q.initNavigator()}if(J){J.setStyle("visibility","visible")}if(L){q.initTypeSelect()}if(P){q.initSearchForm()}if(N&&N.getFirstChild()){q.initStaticSuggest()}if(M){q.initDynamicSuggest()}if(I){q.initSearchAdvanced()}q.initStatistics()}});
;
