var APPDYNAMICS_GEO = {"status" : "OK","country" : "US","countryName" : "United States","region" : "CA","regionName" : "California","city" : "San Francisco","zip" : "null","lat" : "37.748402","long" : "-122.415604"};
(function(){var g=window.XMLHttpRequest;var a=!!window.controllers,k=window.document.all&&!window.opera,l=k&&window.navigator.userAgent.match(/MSIE 7.0/);function d(){this._object=g&&!l?new g:new window.ActiveXObject("Microsoft.XMLHTTP");this._listeners=[]}function c(){return new d}c.prototype=d.prototype;if(a&&g.wrapped){c.wrapped=g.wrapped}c.UNSENT=0;c.OPENED=1;c.HEADERS_RECEIVED=2;c.LOADING=3;c.DONE=4;c.prototype.readyState=c.UNSENT;c.prototype.responseText="";c.prototype.responseXML=null;c.prototype.status=0;c.prototype.statusText="";c.prototype.priority="NORMAL";c.prototype.onreadystatechange=null;c.onreadystatechange=null;c.onopen=null;c.onsend=null;c.onabort=null;c.prototype.open=function(p,s,o,t,n){delete this._headers;if(arguments.length<3){o=true}this._async=o;var r=this,q=this.readyState,m;if(k&&o){m=function(){if(q!=c.DONE){e(r);r.abort()}};window.attachEvent("onunload",m)}if(c.onopen){c.onopen.apply(this,arguments)}if(arguments.length>4){this._object.open(p,s,o,t,n)}else{if(arguments.length>3){this._object.open(p,s,o,t)}else{this._object.open(p,s,o)}}this.readyState=c.OPENED;b(this);this._object.onreadystatechange=function(){if(a&&!o){return}r.readyState=r._object.readyState;h(r);if(r._aborted){r.readyState=c.UNSENT;return}if(r.readyState==c.DONE){delete r._data;e(r);if(k&&o){window.detachEvent("onunload",m)}}if(q!=r.readyState){b(r)}q=r.readyState}};function f(m){m._object.send(m._data);if(a&&!m._async){m.readyState=c.OPENED;h(m);while(m.readyState<c.DONE){m.readyState++;b(m);if(m._aborted){return}}}}c.prototype.send=function(m){if(c.onsend){c.onsend.apply(this,arguments)}if(!arguments.length){m=null}if(m&&m.nodeType){m=window.XMLSerializer?new window.XMLSerializer().serializeToString(m):m.xml;if(!oRequest._headers["Content-Type"]){oRequest._object.setRequestHeader("Content-Type","application/xml")}}this._data=m;f(this)};c.prototype.abort=function(){if(c.onabort){c.onabort.apply(this,arguments)}if(this.readyState>c.UNSENT){this._aborted=true}this._object.abort();e(this);this.readyState=c.UNSENT;delete this._data};c.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()};c.prototype.getResponseHeader=function(m){return this._object.getResponseHeader(m)};c.prototype.setRequestHeader=function(m,n){if(!this._headers){this._headers={}}this._headers[m]=n;return this._object.setRequestHeader(m,n)};c.prototype.addEventListener=function(p,o,n){for(var m=0,q;q=this._listeners[m];m++){if(q[0]==p&&q[1]==o&&q[2]==n){return}}this._listeners.push([p,o,n])};c.prototype.removeEventListener=function(p,o,n){for(var m=0,q;q=this._listeners[m];m++){if(q[0]==p&&q[1]==o&&q[2]==n){break}}if(q){this._listeners.splice(m,1)}};c.prototype.dispatchEvent=function(n){var o={type:n.type,target:this,currentTarget:this,eventPhase:2,bubbles:n.bubbles,cancelable:n.cancelable,timeStamp:n.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}};if(o.type=="readystatechange"&&this.onreadystatechange){(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[o])}for(var m=0,p;p=this._listeners[m];m++){if(p[0]==o.type&&!p[2]){(p[1].handleEvent||p[1]).apply(this,[o])}}};c.prototype.toString=function(){return"[object XMLHttpRequest]"};c.toString=function(){return"[XMLHttpRequest]"};function b(m){if(c.onreadystatechange){c.onreadystatechange.apply(this,arguments)}m.dispatchEvent({type:"readystatechange",bubbles:false,cancelable:false,timeStamp:new Date+0})}function j(o){var n=o.responseXML,m=o.responseText;if(k&&m&&n&&!n.documentElement&&o.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)){n=new window.ActiveXObject("Microsoft.XMLDOM");n.async=false;n.validateOnParse=false;n.loadXML(m)}if(n){if((k&&n.parseError!=0)||!n.documentElement||(n.documentElement&&n.documentElement.tagName=="parsererror")){return null}}return n}function h(m){try{m.responseText=m._object.responseText}catch(n){}try{m.responseXML=j(m._object)}catch(n){}try{m.status=m._object.status}catch(n){}try{m.statusText=m._object.statusText}catch(n){}}function e(m){m._object.onreadystatechange=new window.Function}if(!window.Function.prototype.apply){window.Function.prototype.apply=function(m,n){if(!n){n=[]}m.__func=this;m.__func(n[0],n[1],n[2],n[3],n[4]);delete m.__func}}window.XMLHttpRequest=c})();var _AD={HEADER_NAME:"singularityjsheader",LOCK_COOKIE_NAME:"singularitylock",DATA_COOKIE_NAME:"singularitydata",GEO_COOKIE_NAME:"singularitygeo",HEADER_SERVER_TIME:"singularityst",TIMESTAMP_COOKIE_NAME:"singularitytimestamp",MAX_LOCK_ATTEMPT:5,GEO_CALLBACK_URL:"http://saas.georesolver.appdynamics.com/geo/?c=_AD.setGeoCookie",ACTION_EVENTS:["click","beforeunload"],DEBUG:null,handleAjaxResponse:function(c,h,a,e){_AD.log("handleAjaxResponse - is heartbeat? "+e);var f=c.getResponseHeader(_AD.HEADER_NAME);if(f!=null){var g=c.getResponseHeader(_AD.HEADER_SERVER_TIME);var d=0;if(g){d=parseInt(g,10);_AD.log("ajax server time: "+d)}var j=d;if(g.indexOf(",")!=-1){j=parseInt(g.split(",")[1],10);_AD.log("ajax flush time: "+j)}var b=_AD.parseHeader(f,d,j);if(b!=null){b.t0=h;if(c._ad_firstByte){_AD.log("ad first byte:"+c._ad_firstByte);b.t1=c._ad_firstByte}else{b.t1=a}b.t2=a;b.t3=a;_AD.log("response text: ["+c.responseText+"] - ["+c.status+"]");b.size=c.responseText.length;_AD.updateData(b,1,e)}}else{_AD.log("no appd header in ajax response")}},handlePageLoad:function(d){_AD.log("handlePageLoad");_AD.verifyAndGetLocationCookie();var c=null;if(typeof _AD_HEADER!="undefined"){c=_AD_HEADER}if(c!=null){if(c.indexOf("debug=true")!=-1){_AD.DEBUG=window.open("","AppDynamicsDebugWindow","status=0,toolbar=0,location=0,menubar=0,resizable=1,scrollbars=1,height=350,width=350");_AD.log("<h3>AppDynamics Javascript Log</h3><pre>"+d.type)}var a={t0:0,t1:0,t2:0,t3:0,serverTime:0,flushTime:0};var e=true;if(typeof _AD_USE_PERF_DATA!="undefined"){e=_AD_USE_PERF_DATA}_AD.log(e);if(e){_AD.populateTimingData(a)}if(a.t0==0){a.t0=_AD.findStartTimeFromCookie();if(a.t0==0){_AD.log("bailing out. timingData.t0 is 0");return}a.t3=_AD.getCurrentTime();if(typeof _AD_FB!="undefined"){a.t1=_AD_FB;a.t2=_AD_FB;if(typeof _AD_LB!="undefined"){a.t2=_AD_LB}}_AD.log("data collection from _AD vars")}else{_AD.log("data collection from window.performance")}if(typeof _AD_RT!="undefined"){a.serverTime=_AD_RT}if(typeof _AD_FT!="undefined"){a.flushTime=_AD_FT}if(a.t0==0){return}var b=_AD.parseHeader(c,a.serverTime,a.flushTime);if(b!=null){b.t0=a.t0;b.t1=a.t1;b.t2=a.t2;b.t3=a.t3;b.size=_AD.getPageSize();_AD.log("updating data: timestamp = ["+b.tstamp+"]");_AD.updateData(b,1,false)}}},populateTimingData:function(b){var c=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance;if("undefined"!=typeof(c)&&"undefined"!=typeof(c.timing)&&"undefined"!=typeof(c.timing.navigationStart)){if(c.timing.responseEnd<c.timing.responseStart){_AD.log("responseEnd in navigation.timing object is less than responseStart. Not using navigation timing.");return}b.t0=c.timing.navigationStart;b.t1=c.timing.connectStart;b.t2=c.timing.responseEnd;b.t3=c.timing.loadEventStart;if(false){var a=0;a=_AD.printTime(c.timing,"navigationStart",a);a=_AD.printTime(c.timing,"unloadEventStart",a);a=_AD.printTime(c.timing,"unloadEventEnd",a);a=_AD.printTime(c.timing,"fetchStart",a);a=_AD.printTime(c.timing,"domainLookupStart",a);a=_AD.printTime(c.timing,"domainLookupEnd",a);a=_AD.printTime(c.timing,"connectStart",a);a=_AD.printTime(c.timing,"connectEnd",a);a=_AD.printTime(c.timing,"requestStart",a);a=_AD.printTime(c.timing,"responseStart",a);a=_AD.printTime(c.timing,"responseEnd",a);a=_AD.printTime(c.timing,"domLoading",a);a=_AD.printTime(c.timing,"domInteractive",a);a=_AD.printTime(c.timing,"domContentLoadedStart",a);a=_AD.printTime(c.timing,"domContentLoadedEnd",a);a=_AD.printTime(c.timing,"domComplete",a);a=_AD.printTime(c.timing,"loadEventStart",a);a=_AD.printTime(c.timing,"loadEventEnd",a)}return b}else{_AD.log("no navigation timing available for this browser")}return null},printTime:function(c,a,b){_AD.log("timing "+a+" : "+c[a]+" ("+(c[a]-b)+")");return c[a]},findStartTimeFromCookie:function(){var b=_AD.readCookie(_AD.TIMESTAMP_COOKIE_NAME);_AD.log("Found start time from cookie:"+b);if(b){var a=b.indexOf(":");if(a!=-1){var d=b.substring(0,a);var c=b.substring(a+1);if(c==document.referrer){return parseInt(d,10)}_AD.log("Document referrer does not match: ["+document.referrer+"] ["+c+"] Ignore")}}return 0},getPageSize:function(){var a=0;try{a+=document.body.innerHTML.length;a+=(document.head?document.head.innerHTML.length:document.getElementsByTagName("head")[0].innerHTML.length)}catch(b){_AD.log("error finding document size:"+b);return a}return a},scheduleHeartBeat:function(a){if(typeof _AD_HEARTBEAT_URL==="undefined"){_AD.log("heartbeat url is null, no heartbeat scheduled.")}else{_AD.log("heartbeat scheduled for 5 seconds.");setTimeout(function(){var b=_AD.readCookie(_AD.DATA_COOKIE_NAME);if(b==a){_AD.log("sending heartbeat. datatext's are the same.");_AD.sendHeartBeat()}else{_AD.log("not sending heartbeat, datatext's are different. current ["+b+"] old ["+a+"]")}},5*1000)}},log:function(a){if(_AD.DEBUG!=null){_AD.DEBUG.document.write(a+"<br/>");_AD.DEBUG.scrollTo(0,_AD.DEBUG.document.body.scrollHeight)}},logError:function(a){_AD.log("ERROR: "+a)},parseHeader:function(f,b,e){var a=f.split(",");if(!b){b=parseInt(a[2],10)}var d=0;if(typeof _AD_LB!="undefined"){d=_AD_LB-_AD_FB;_AD.log("page load time:"+d)}var c={};c.b=a[0];c.g=a[1];c.tstamp=a[3];c.stime=b;c.ftime=e;c.t0=-1;c.t1=-1;c.t2=-1;c.t3=-1;return c},responseToString:function(a){return"btid:"+a.b+", guid="+a.g+", servertime="+a.stime+", flushtime="+a.ftime+", t0="+a.t0+", t1="+a.t1+", t2="+a.t2+", t3="+a.t3+", size="+a.size+"<br/>network time="+(a.t2-a.t0-a.stime);+", eum time="+(a.t3-a.t0)},updateData:function(e,h,d){if(!h){h=1}_AD.log(_AD.responseToString(e)+" try: "+h);var a=_AD.acquireDataLock(h);if(a){try{var g=_AD.readCookie(_AD.DATA_COOKIE_NAME);if(!_AD.isEmpty(g)&&g.indexOf(e.tstamp+"|")==0){_AD.log("resetting data cookie. timestamps match");_AD.eraseCookie(_AD.DATA_COOKIE_NAME);g=null}else{if(g!=null){_AD.log("updating data. time stamp does not match:"+g.substring(0,g.indexOf("|")))}}var f=null;var c="#B"+e.b+"#G"+e.g+"#S"+e.stime+"#0"+e.t0+"#1"+e.t1+"#2"+e.t2+"#3"+e.t3+"#size"+e.size+"#F"+e.ftime;if(_AD.isEmpty(g)){g=_AD.getCurrentTime()+"|"+c}else{g+="|"+c;var b=g.indexOf("|");g=g.substring(b);g=_AD.getCurrentTime()+g}_AD.log("datatext:"+g);_AD.createCookie(_AD.DATA_COOKIE_NAME,g);_AD.log("cookies written: "+document.cookie);if(!d){_AD.scheduleHeartBeat(g)}}finally{_AD.releaseDataLock()}}else{if(h==_AD.MAX_LOCK_ATTEMPT){_AD.log("give up")}else{setTimeout(function(){_AD.updateData(e,h+1,d)},1000)}}},sendHeartBeat:function(){var a=new XMLHttpRequest();a.isHeartbeatRequest=true;a.open("GET",_AD_HEARTBEAT_URL,true);a.onreadystatechange=function(){if(a.readyState==4){_AD.log("heartbeat request sent successfully.")}};a.send(null)},acquireDataLock:function(a){var b=_AD.readCookie(_AD.LOCK_COOKIE_NAME);_AD.log("cookieValue ["+b+"]");if(b==""||b==null){_AD.createCookie(_AD.LOCK_COOKIE_NAME,"lock");_AD.log("lock acquired");return true}return false},releaseDataLock:function(){_AD.eraseCookie(_AD.LOCK_COOKIE_NAME);_AD.log("lock released")},action:function(a){_AD.createCookie(_AD.TIMESTAMP_COOKIE_NAME,_AD.getCurrentTime()+":"+escape(document.location));_AD.log("timestamp:"+document.cookie)},load:function(a){_AD.log("loaded");try{_AD.handlePageLoad(a)}catch(a){_AD.logError("error:"+a)}},isEmpty:function(a){if(!a||a==null||a==""){return true}},createCookie:function(c,d,e){var a="";if(e){var b=new Date();b.setTime(b.getTime()+(24*60*e*1000));a="; expires="+b.toGMTString()}document.cookie=c+"="+d+a+"; path=/"},readCookie:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return unescape(f.substring(e.length,f.length))}}return null},eraseCookie:function(a){_AD.createCookie(a,"",-1)},getCurrentTime:function(){return(new Date()).getTime()},setGeoCookie:function(c){var b=function(d){if(!d){return"Unknown"}if(d.length==0){return"Unknown"}return d.replace(/,/g,"").replace(/;/g,"").replace(/-/g,"")};if(c.status=="OK"){_AD.log(c.countryName+" "+c.zip);var a=_ADBrowserUtil.findBrowserInformation();_AD.createCookie(_AD.GEO_COOKIE_NAME,escape(b(c.countryName))+"|"+escape(b(c.regionName))+"|"+escape(b(c.city))+"|"+b(c.lat)+"|"+b(c["long"])+"|"+c.zip+"|"+a.name+"|"+a.version+"|"+a.platform)}},verifyAndGetLocationCookie:function(){if(typeof APPDYNAMICS_GEO==="undefined"){if(true){return}var a=_AD.readCookie(_AD.GEO_COOKIE_NAME);if(_AD.DEBUG!=null||!a){if(false){_AD.log("Location cookie does not exist. Fetching new.");script=document.createElement("script");script.src=_AD.GEO_CALLBACK_URL;document.body.appendChild(script)}}else{_AD.log("Location cookie exists, not fetching again. "+a)}}else{_AD.log("Embedded location string.");_AD.setGeoCookie(APPDYNAMICS_GEO)}},bindEvent:function(c,a,b){if(c.addEventListener){c.addEventListener(a,b,false)}else{if(c.attachEvent){c.attachEvent("on"+a,b)}}}};var _ADBrowserUtil={findBrowserInformation:function(){var a={name:null,version:null,platform:null};a.name=_ADBrowserUtil.searchString(_ADBrowserUtil.dataBrowser)||"Other";a.version=_ADBrowserUtil.searchVersion(navigator.userAgent)||_ADBrowserUtil.searchVersion(navigator.appVersion)||"n/a";a.platform=_ADBrowserUtil.searchString(_ADBrowserUtil.dataOS)||"Unknown";return a},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;_ADBrowserUtil.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity}}else{if(c){return d[a].identity}}}},searchVersion:function(b){var a=b.indexOf(_ADBrowserUtil.versionSearchString);if(a!=-1){return parseFloat(b.substring(a+_ADBrowserUtil.versionSearchString.length+1))}return null},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"iPad",identity:"Safari/iPad",versionSearch:"Version"},{string:navigator.userAgent,subString:"iPhone",identity:"Safari/iPhone",versionSearch:"Version"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Android",identity:"Android",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"}]};XMLHttpRequest.onopen=function(e,c,d,a,b){};XMLHttpRequest.onsend=function(){try{var b="isajax=true";if(this.isHeartbeatRequest){b+=",isheartbeat=true"}this.setRequestHeader(_AD.HEADER_NAME,b);this._ad_requestStartTime=_AD.getCurrentTime()}catch(a){_AD.logError(a)}};XMLHttpRequest.onreadystatechange=function(a){try{_AD.log("req ready ? "+a.status+" "+a.appdDone);if(a.status==200&&a.readyState==4&&!a.appdDone){a.appdDone=true;try{_AD.handleAjaxResponse(a,a._ad_requestStartTime,_AD.getCurrentTime(),a.isHeartbeatRequest)}catch(b){_AD.logError("handleAjaxResponse "+b)}}else{(a.readyState==2)}a._ad_firstByte=_AD.getCurrentTime()}catch(b){_AD.logError(b)}};for(var i=0;i<_AD.ACTION_EVENTS.length;i++){_AD.bindEvent(window,_AD.ACTION_EVENTS[i],_AD.action)}_AD.bindEvent(window,"load",_AD.load);