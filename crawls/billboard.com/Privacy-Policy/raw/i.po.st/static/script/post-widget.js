!function(window,undefined){if(window.post_widget!==undefined)return;function detectIE(){if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search(new RegExp("MSIE 6.0"))!==-1)return"IE6";if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search(new RegExp("MSIE 7.0"))!==-1)return"IE7";if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search(new RegExp("MSIE 8.0"))!==-1)return"IE8";return"Other"}var html=document.getElementsByTagName("html");
if(html)html=html[0];switch(detectIE()){case "IE6":return;case "IE7":html.className+=" ra1-pw-ie7";break;case "IE8":html.className+=" ra1-pw-ie8";break}var enums={};enums.sizeItem={small:{text:"small",X:16,Y:16,margin:3},medium:{text:"medium",X:24,Y:24,margin:3},large:{text:"large",X:32,Y:32,margin:3},custom:{text:"custom",X:10,Y:10}};enums.counter={vertical:"vertical",horizontal:"horizontal",none:"none",show:"show"};enums.boxes={toolbox:"toolbox",custombox:"custombox",nativebox:"nativebox",alonebox:"alonebox",
looknativebox:"looknativebox",relikebox:"relikebox"};var helper={};helper.ScriptNamePostfix="post-widget.js";helper.idIndex=0;helper.containersForRecycling=[];helper.clickBackFired=false;helper.initialized=false;helper.allWidgets=[];helper.preInitWidgets=[];helper.getRandomTime=function(){return(new Date).getTime()+parseInt(Math.random()*1E5)};helper.jsonpRequest=function(url,func,context,callback){window.__pwidgetCallbacks=window.__pwidgetCallbacks||{};var functionName="__pwidgetData"+helper.getRandomTime();
window.__pwidgetCallbacks[functionName]=function(data){func.call(context,data);if(callback)callback.call(context)};var callbackFunction="window.__pwidgetCallbacks."+functionName;var fullUrl=url+"&callback="+callbackFunction;helper.loadScript(fullUrl)};helper.initClass=function(newClass,baseClass){if(!newClass)throw new Error("ArgumentException");if(baseClass){var f=function(){};f.prototype=baseClass.prototype;newClass.prototype=new f;newClass.prototype.constructor=newClass;newClass.base=baseClass.prototype;
newClass.baseClass=baseClass}};helper.domEvent=function(){var guid=0;function fixEvent(event){event=event||window.event;if(event.isFixed)return event;event.isFixed=true;event.preventDefault=event.preventDefault||function(){this.returnValue=false};event.stopPropagation=event.stopPropagaton||function(){this.cancelBubble=true};if(!event.target)event.target=event.srcElement;if(!event.relatedTarget&&event.fromElement)event.relatedTarget=event.fromElement==event.target?event.toElement:event.fromElement;
if(event.pageX==null&&event.clientX!=null){var html=document.documentElement,body=document.body;event.pageX=event.clientX+(html&&html.scrollLeft||body&&body.scrollLeft||0)-(html.clientLeft||0);event.pageY=event.clientY+(html&&html.scrollTop||body&&body.scrollTop||0)-(html.clientTop||0)}if(!event.which&&event.button)event.which=event.button&1?1:event.button&2?3:event.button&4?2:0;return event}function commonHandle(event,object,args){event=fixEvent(event);var handlers=this.events[event.type];for(var g in handlers){var handler=
handlers[g];event.Args=args;var ret=handler.call(object,this,event);if(ret===false){event.preventDefault();event.stopPropagation()}}}return{add:function(elem,type,handler,object,args){if(elem.setInterval&&elem!=window&&!elem.frameElement)elem=window;if(!handler.guid)handler.guid=++guid;if(!elem.events){elem.events={};elem.handle=function(event){if(event!==undefined)return commonHandle.call(elem,event,object,args)}}if(!elem.events[type]){elem.events[type]={};if(elem.addEventListener)elem.addEventListener(type,
elem.handle,true);else if(elem.attachEvent)elem.attachEvent("on"+type,elem.handle)}elem.events[type][handler.guid]=handler},remove:function(elem,type,handler){var handlers=elem.events&&elem.events[type];if(!handlers)return;delete handlers[handler.guid];for(var any in handlers)return;if(elem.removeEventListener)elem.removeEventListener(type,elem.handle,true);else if(elem.detachEvent)elem.detachEvent("on"+type,elem.handle);delete elem.events[type];for(var any in elem.events)return;try{delete elem.handle;
delete elem.events}catch(e){elem.handle=null;elem.events=null}}}}();helper.hideNode=function(node){if(node)node.style.display="none"};helper.showNode=function(node){if(node)node.style.display=""};helper.DOMReady=function(handler){if(document.readyState=="complete")handler();var called=false;function ready(){if(called)return;called=true;handler()}if(document.addEventListener)document.addEventListener("DOMContentLoaded",function(){ready()},false);else if(document.attachEvent){if(document.documentElement.doScroll&&
window==window.top){function tryScroll(){if(called)return;if(!document.body)return;try{document.documentElement.doScroll("left");ready()}catch(e){setTimeout(tryScroll,0)}}tryScroll()}document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete")ready()})}if(window.addEventListener)window.addEventListener("load",ready,false);else if(window.attachEvent)window.attachEvent("onload",ready)};helper.getScrollPosition=function(){var x=window.pageXOffset||document.documentElement.scrollLeft;
var y=window.pageYOffset||document.documentElement.scrollTop;return{X:x,Y:y}};helper.insertAfter=function(node,newNode){node.parentNode.insertBefore(newNode,node.nextSibling)};helper.nodeListToArray=function(nodeList){var array=[];for(var i=0;i<nodeList.length;i++)array.push(nodeList[i]);return array};helper.isFlashPlayerInstalled=function(){var installed=false;if(navigator.plugins&&navigator.plugins.length>0){var type="application/x-shockwave-flash";var mimeTypes=navigator.mimeTypes;if(mimeTypes&&
mimeTypes[type]&&mimeTypes[type].enabledPlugin)installed=true}else if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash");installed=true}catch(err){}return installed};helper.stopEventBubble=function(nodes,args){var anchor=null;if(nodes.length>0)anchor=nodes[0];var e=args.toElement||args.target;if(e.parentNode==anchor||e.parentNode==this._DomNode)return false;return true};helper.clearContainersForInit=function(){for(var i=0;i<helper.containersForRecycling.length;i++)if(helper.containersForRecycling[i].parentNode)helper.containersForRecycling[i].parentNode.removeChild(helper.containersForRecycling[i]);
helper.containersForRecycling=[]};helper.getCenterCoordForNode=function(node){var result={};var size=helper.getClientOffset();var centerX=size.Width/2;var centerY=size.Height/2;result.X=centerX-node.offsetWidth/2;result.Y=centerY-node.offsetHeight/2;return result};helper.getSizeItem=function(sizeString){switch(sizeString){case "large":case "32":return enums.sizeItem.large;case "medium":case "24":return enums.sizeItem.medium;default:return enums.sizeItem.small}};helper.isIdString=function(str){if(str.search(new RegExp("#"))==
0){var id=str.replace("#","");if(id.length>0)return id}return false};helper.isClassString=function(str){if(str.search(new RegExp("."))==0){var className=str.replace(".","");if(className.length>0)return className}return false};helper.getComputedStyle=function(node){if(window.getComputedStyle)return window.getComputedStyle(node,null);else return node.currentStyle};helper.getElementsByClassName=function(classList,node){if(document.getElementsByClassName)return(node||document).getElementsByClassName(classList);
else{var nodeIn=node||document,list=nodeIn.getElementsByTagName("*"),length=list.length,classArray=classList.split(/\s+/),classes=classArray.length,result=[],i,j,z,classArrayOfElemets;for(i=0;i<length;i++)for(j=0;j<classes;j++){classArrayOfElemets=list[i].className.split(" ");for(z=0;z<classArrayOfElemets.length;z++)if(classArrayOfElemets[z]==classArray[j]){result.push(list[i]);break}}return result}};helper.getOffsetElement=function(element){if(element.getBoundingClientRect)return helper.getOffsetRect(element);
else return helper.getOffsetSum(element)};helper.getOffsetRect=function(elem){var box=elem.getBoundingClientRect();var body=document.body;var docElem=document.documentElement;var scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop;var scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft;var clientTop=docElem.clientTop||body.clientTop||0;var clientLeft=docElem.clientLeft||body.clientLeft||0;var top=box.top+scrollTop-clientTop;var left=box.left+scrollLeft-clientLeft;return{top:Math.round(top),
left:Math.round(left)}};helper.getOffsetSum=function(elem){var top=0,left=0;while(elem){top=top+parseInt(elem.offsetTop);left=left+parseInt(elem.offsetLeft);elem=elem.offsetParent}return{top:top,left:left}};helper.getClientOffset=function(){var size={};if(window.opera){size.Width=window.innerWidth;size.Height=window.innerHeight}else if(document.compatMode=="CSS1Compat"){size.Width=document.documentElement.clientWidth;size.Height=document.documentElement.clientHeight}else{size.Width=document.body.clientWidth;
size.Height=document.body.clientHeight}return size};helper.isContainClassName=function(node,className){var classList=node.className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i]===className)return true;return false};helper.log=function(message){if(window.console&&window.console.log)window.console.log(message)};helper.loadScript=function(url,onload){var script=document.createElement("script");script.src=url;if("onreadystatechange"in script)script.onreadystatechange=function(e){if(this.readyState==
"loaded"||this.readyState=="complete"){if(onload)onload(e);script.parentNode.removeChild(script);script=null;this.onreadystatechange=null}};else script.onload=function(e){if(onload)onload(e);script.parentNode.removeChild(script);script=null};var model=rapost.PostWidgetModel();model.PwRoot.appendChild(script)};helper.getPublisherKey=function(key){if(key)return key;else{var scripts=document.getElementsByTagName("script");if(scripts.length>0)for(var i=0;i<scripts.length;i++){var src=scripts[i].src;if(src.search(new RegExp(helper.ScriptNamePostfix))!==
-1){var jsUrlParts=src.split("#");if(jsUrlParts.length!==2)continue;var params=jsUrlParts[1];var paramsList=params.split("&");for(var j=0;j<paramsList.length;j++)if(paramsList[j].search(new RegExp("publisherKey="))!==-1){var pubKey=paramsList[j].replace("publisherKey=","");if(pubKey!=="")return pubKey;else break}else continue}else continue}}return window.pwidget_config.publisherKey};helper.isArray=function(elements){var type=Object.prototype.toString.call(elements);if(type==="[object NodeList]"||
type==="[object HTMLCollection]"||type==="[object Array]")return true;return false};helper.getNewId=function(){helper.idIndex++;return"pw_post_"+helper.idIndex};helper.getS4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};helper.getGuid=function(){return helper.getS4()+helper.getS4()+"-"+helper.getS4()+"-"+helper.getS4()+"-"+helper.getS4()+"-"+helper.getS4()+helper.getS4()+helper.getS4()};helper.clearOfUrl=function(url){if(pwidget_config.track==true||pwidget_config.track==
"query"){var regExp=/[\?&#]{1}([a-z\d]{16})\.([\d]{2})(?:|$)/i;return url.replace(regExp,"")}else return url};helper.getInstanceWidgetById=function(id){for(var i=0;i<helper.allWidgets.length;i++)if(id==helper.allWidgets[i]._Id)return helper.allWidgets[i];return null};helper.getPartsOfUrl=function(url){var result={};var partsOfUrl=url.split("?");result.pu=partsOfUrl[0];if(partsOfUrl[1])result.pq=partsOfUrl[1];else{partsOfUrl=partsOfUrl[0].split("#");result.pu=partsOfUrl[0];if(partsOfUrl[1])result.pq=
"#"+partsOfUrl[1];else result.pq=""}return result};helper.getWrapersOfWidgets=function(widgets){if(widgets instanceof rapost.PostWidget)return{id:widgets._Id,url:widgets._SharerUrl,title:widgets._Title,updateConfig:function(config){var widget=helper.getInstanceWidgetById(this.id);if(widget){widget.updateConfig(config);this.url=widget._SharerUrl;this.title=widget._Title}return this}};if(helper.isArray(widgets)){var widgetsList=[];for(var i=0;i<widgets.length;i++)widgetsList.push(helper.getWrapersOfWidgets(widgets[i]));
return widgetsList}return[]};helper.updateGlobalConfig=function(){window.pwidget_config.onload=window.pwidget_config.onload||null;window.pwidget_config.onshare=window.pwidget_config.onshare||null;window.pwidget_config.publisherKey=window.pwidget_config.publisherKey||null;window.pwidget_config.init=window.pwidget_config.init||null;window.pwidget_config.track=window.pwidget_config.track!==undefined?window.pwidget_config.track:true;window.pwidget_config.copypaste=window.pwidget_config.copypaste!==undefined?
window.pwidget_config.copypaste:null;window.pwidget_config.defaults=window.pwidget_config.defaults||{};window.pwidget_config.defaults.transformations=window.pwidget_config.defaults.transformations||{};window.pwidget_config.defaults.transformations.shorten=window.pwidget_config.defaults.transformations.shorten!==undefined?window.pwidget_config.defaults.transformations.shorten:null;window.pwidget_config.defaults.transformations.tracking=window.pwidget_config.defaults.transformations.tracking!==undefined?
window.pwidget_config.defaults.transformations.tracking:true;window.pwidget_config.defaults.afterShare=window.pwidget_config.defaults.afterShare!==undefined?window.pwidget_config.defaults.afterShare:true;window.pwidget_config.defaults.image=window.pwidget_config.defaults.image||null;if(window.pwidget_config.defaults.image==null){window.pwidget_config.defaults.imageURL=window.pwidget_config.defaults.imageURL||null;window.pwidget_config.defaults.image=window.pwidget_config.defaults.imageURL}window.pwidget_config.defaults.url=
window.pwidget_config.defaults.url||document.location.href;var title=window.pwidget_config.defaults.title;if(title=="")window.pwidget_config.defaults.title=title;else window.pwidget_config.defaults.title=window.pwidget_config.defaults.title!==undefined?window.pwidget_config.defaults.title:document.title;window.pwidget_config.defaults.showPost=window.pwidget_config.defaults.showPost!==undefined?window.pwidget_config.defaults.showPost:false;window.pwidget_config.defaults.services=window.pwidget_config.defaults.services||
{};window.pwidget_config.defaults.size=window.pwidget_config.defaults.size||enums.sizeItem.small;window.pwidget_config.defaults.buttons=window.pwidget_config.defaults.buttons||["facebook","twitter","linkedin"];window.pwidget_config.defaults.click=window.pwidget_config.defaults.click!==undefined?window.pwidget_config.defaults.click:false;window.pwidget_config.defaults.button=window.pwidget_config.defaults.button||null;window.pwidget_config.defaults.vertical=window.pwidget_config.defaults.vertical!==
undefined?window.pwidget_config.defaults.vertical:false;window.pwidget_config.defaults.counter=window.pwidget_config.defaults.counter!==undefined?window.pwidget_config.defaults.counter:null};helper.analizeOfCustomConfig=function(customConfig){helper.updateGlobalConfig();var config={};config.container=customConfig.container!==undefined?customConfig.container:enums.boxes.custombox;config.publisherKey=customConfig.publisherKey!==undefined?customConfig.publisherKey:window.pwidget_config.publisherKey;
config.url=customConfig.url!==undefined?customConfig.url:window.pwidget_config.defaults.url;var title=customConfig.title;if(title=="")config.title="";else config.title=customConfig.title!==undefined?customConfig.title:window.pwidget_config.defaults.title;config.showPost=customConfig.showPost!==undefined?customConfig.showPost:window.pwidget_config.defaults.showPost;config.isHtmlInit=customConfig.isHtmlInit!==undefined?customConfig.isHtmlInit:false;config.size=customConfig.size!==undefined?customConfig.size:
window.pwidget_config.defaults.size;config.services=customConfig.services!==undefined?customConfig.services:undefined;config.afterShare=customConfig.afterShare!==undefined?customConfig.afterShare:window.pwidget_config.defaults.afterShare;config.transformations=customConfig.transformations!==undefined?customConfig.transformations:{};config.counter=customConfig.counter!==undefined?customConfig.counter:window.pwidget_config.defaults.counter;config.buttons=customConfig.buttons!==undefined?customConfig.buttons:
window.pwidget_config.defaults.buttons;config.button=customConfig.button!==undefined?customConfig.button:window.pwidget_config.defaults.button;config.vertical=customConfig.vertical!==undefined?customConfig.vertical:window.pwidget_config.defaults.vertical;config.click=customConfig.click!==undefined?customConfig.click:window.pwidget_config.defaults.click;config.onshare=customConfig.onshare!==undefined?customConfig.onshare:window.pwidget_config.onshare;config.image=customConfig.image!==undefined?customConfig.image:
null;if(config.image==null){config.image=customConfig.pinterestImage!==undefined?customConfig.pinterestImage:null;config.image=customConfig.imageURL!==undefined?customConfig.imageURL:config.image}return config};helper.initWidgets=function(){helper.initialized=true;helper.updateGlobalConfig();var nodes=helper.getElementsByClassName("pw_counter_buttons");if(nodes.length>0)helper.postWidget(nodes,{container:"nativebox",showPost:true,isHtmlInit:true});nodes=helper.getElementsByClassName("pw_widget");
if(nodes.length>0)helper.postWidget(nodes,{container:"toolbox",showPost:true,isHtmlInit:true});nodes=helper.getElementsByClassName("pw-widget");var typeOfContainer=null;if(nodes.length>0)for(var i=0;i<nodes.length;i++){typeOfContainer=enums.boxes.toolbox;var items=nodes[i].getElementsByTagName("a");for(var j=0;j<items.length;j++){if(helper.isContainClassName(items[j],"pw_title")||helper.isContainClassName(items[j],"pw-title")||helper.isContainClassName(items[j],"pw_url")||helper.isContainClassName(items[j],
"pw-url")||helper.isContainClassName(items[j],"pw_separator"))continue;if(items[j].className.search(new RegExp("-like?|-share?|twitter-twitt?|-plus?"))!==-1)typeOfContainer=enums.boxes.nativebox;break}helper.postWidget(nodes[i],{container:typeOfContainer,isHtmlInit:true})}var model=rapost.PostWidgetModel();for(var i=0;i<model.Metadata.length;i++){var className="pw-button-";className+=model.Metadata[i].name;nodes=helper.getElementsByClassName(className);if(nodes.length>0){var filter_nodes=helper.filterAloneWd(nodes);
if(filter_nodes.length>0){var config={button:model.Metadata[i].name,container:"alonebox",isHtmlInit:true};helper.postWidget(filter_nodes,config)}}}for(var i=0;i<helper.preInitWidgets.length;i++)helper.postWidget(helper.preInitWidgets[i].idOrClass,helper.preInitWidgets[i].config);helper.clearContainersForInit();if(window.pwidget_config.onload)window.pwidget_config.onload();helper.setCopypasteOption()};helper.setCopypasteOption=function(){function setCopypasteTrueForAllWidgets(){for(var i=0;i<helper.allWidgets.length;i++)if(helper.allWidgets[i]._IsHtmlInit)helper.allWidgets[i]._CopyPaste=
true}function checkAllWidgetsCopyPasteState(){for(var i=0;i<helper.allWidgets.length;i++)if(helper.allWidgets[i]._CopyPaste){setCopypasteTrueForAllWidgets();break}else continue}if(window.pwidget_config.copypaste!==null)if(window.pwidget_config.copypaste){checkAllWidgetsCopyPasteState();helper.loadCopyPaste();return}var copypaste=null;for(var i=0;i<helper.allWidgets.length;i++){var widget=helper.allWidgets[i];if(widget._IsHtmlInit)copypaste=copypaste||widget._CopyPaste}if(copypaste==null||copypaste==
true){setCopypasteTrueForAllWidgets();helper.loadCopyPaste();window.pwidget_config.copypaste=true;return}window.pwidget_config.copypaste=false};helper.loadCopyPaste=function(){if(!window.radium){var model=rapost.PostWidgetModel();var scriptName=model.PostCDNServer+"/script/post-copypaste.js";var onload=function(){var sGuid=model.getSGuid();var radvars={"min":7,"url":model.getSharerUrl(window.location.href,"clipboard",sGuid,window.pwidget_config.defaults.transformations.tracking),"msg":"Read more at ",
"allowLink":false,"callback":function(){helper.trackClickBack(helper.createLogCopyPaste());helper.updateCopyPasteCounter()}};window.radium.init(radvars)};helper.loadScript(scriptName,onload)}};helper.updateCopyPasteCounter=function(){var shareUrl=encodeURIComponent(document.location.href);window.__pwidgetCallbacks.___raCallbackUpdateWidgetsCounters=function(data){var counterValue=data.total;for(var i=0;i<helper.allWidgets.length;i++){var widget=helper.allWidgets[i];if(widget._SharerUrl==window.location.href)widget._callbackUpdateCounter({total:counterValue})}};
var callbackFunction="window.__pwidgetCallbacks.___raCallbackUpdateWidgetsCounters";var url=rapost.PostWidgetModel().PostShortenerURL+"/v1/counter?publisherKey="+helper.getPublisherKey()+"&increment="+true+"&channel="+"clipboard"+"&url="+shareUrl+"&callback="+callbackFunction+"&"+(new Date).getTime();helper.loadScript(url)};helper.createLogCopyPaste=function(){var result={};result.pub=helper.getPublisherKey();result.random=(new Date).getTime()+parseInt(Math.random()*1E5);var url=helper.clearOfUrl(document.location.href);
var parts=helper.getPartsOfUrl(url);result.pu=parts.pu;result.pq=parts.pq;result.t="share";if(!rapost.PostWidgetModel().OptOutStatus){result.ru=document.referrer;result.pt=document.title;result.vGUID=helper.getGuid();result.cGUID=helper.getGuid();result.sGUID=rapost.PostWidgetModel().getSGuid();result.sm="classic";result.sc1="clipboard";result.su1=""}return result};helper.trackClickBack=function(event){if(event.t==undefined)return;var model=rapost.PostWidgetModel();if(model.OptOutStatusLoaded){var logUrl=
model.PostPixelLogServer,first=true;for(key in event){if(first){logUrl+="?";first=false}else logUrl+="&";logUrl+=key+"="+encodeURIComponent(event[key])}var tracker=document.createElement("img");tracker.setAttribute("id",(new Date).getTime());tracker.className="ra1-pw-logImage";tracker.setAttribute("src",logUrl);model.PwRoot.appendChild(tracker);tracker.parentNode.removeChild(tracker)}else model.DelayedEvents.push(event)};helper.filterAloneWd=function(nodes){var filter_nodes=[];var parentClass="";
for(var i2=0;i2<nodes.length;i2++){parentClass=nodes[i2].parentNode.className;if(!parentClass.match(/\bpw-widget\b/)&&!parentClass.match(/\bpw_widget\b/))filter_nodes.push(nodes[i2])}return filter_nodes};helper.chekInitType=function(){var scriptTags=document.getElementsByTagName("script"),script;if(scriptTags.length>0)for(var q=0;q<scriptTags.length;q++){script=scriptTags[q];var src=script.src;if(src.search(new RegExp(helper.ScriptNamePostfix))!==-1){var jsUrlParts=script.src.split("#");if(jsUrlParts.length==
2){var params=jsUrlParts[1];var paramsList=params.split("&");for(var i=0;i<paramsList.length;i++){var init="";if(paramsList[i].search(new RegExp("init="))!==-1)init=paramsList[i].replace("init=","");switch(init){case "immediate":helper.initWidgets();return;case "lazy":helper.initialized=true;if(window.pwidget_config.onload){var callback=window.pwidget_config.onload;window.pwidget_config.onload=null;callback()}return}}}}}helper.DOMReady(helper.initWidgets)};helper.postWidget=function(){var arguments=
arguments;if(!helper.initialized){var settings={};if(arguments.length>0){if(arguments.length==1){settings.idOrClass=arguments[0];settings.config={}}if(arguments.length==2){settings.idOrClass=arguments[0];settings.config=arguments[1]}helper.preInitWidgets.push(settings)}return[]}if(arguments.length==1&&arguments[0]instanceof rapost.PostWidget)return helper.getWrapersOfWidgets(arguments[0]);if(arguments.length==0)return helper.getWrapersOfWidgets(helper.allWidgets);var customConfig={};if(arguments[1])customConfig=
helper.analizeOfCustomConfig(arguments[1]);var type=Object.prototype.toString.call(arguments[0]);if(type==="[object String]"){if(helper.isIdString(arguments[0])){var id=helper.isIdString(arguments[0]);for(var i=0;i<helper.allWidgets.length;i++)if(helper.allWidgets[i]._Id==id)return helper.postWidget(helper.allWidgets[i]);var node=document.getElementById(id);var wdg=helper.postWidget(node,customConfig);return wdg}else if(helper.isClassString(arguments[0])){var className=helper.isClassString(arguments[0]);
var nodes=helper.getElementsByClassName(className);var createdWidgets=[];for(var i=0;i<nodes.length;i++){var id=nodes[i].getAttribute("id")?nodes[i].getAttribute("id"):helper.getNewId();nodes[i].setAttribute("id",id);createdWidgets.push(helper.postWidget(nodes[i],customConfig))}return helper.getWrapersOfWidgets(createdWidgets)}return[]}if(arguments[0].getAttribute){var node=arguments[0];if(node.getAttribute("pw-widget")!=="init"){node.setAttribute("pw-widget","init");var widget=new rapost.PostWidget({domNode:arguments[0],
config:customConfig});helper.allWidgets.push(widget);return helper.postWidget(widget)}}if(helper.isArray(arguments[0])){var nodes=arguments[0];var createdWidgets=[];for(var i=0;i<nodes.length;i++){var id=nodes[i].getAttribute("id")?nodes[i].getAttribute("id"):helper.getNewId();nodes[i].setAttribute("id",id);createdWidgets.push(helper.postWidget(nodes[i],customConfig))}return helper.getWrapersOfWidgets(createdWidgets)}return[]};var rapost={};rapost.Object=function(settings){this._Model=rapost.PostWidgetModel()};
rapost.Object.prototype.getMetadataByName=function(name){if(name=="email")name="mail";for(var i=0;i<this._Model.Metadata.length;i++)if(this._Model.Metadata[i].name==name)return this._Model.Metadata[i]};rapost.Delegate=function(func,context,args){if(!(this instanceof rapost.Delegate))return new rapost.Delegate(func,context,args);if(func)this.add(func,context,args)};var raDel=rapost.Delegate.prototype;raDel.fire=function(sender,args){if(!sender)throw new Error("ArgumentNullException");if(!this._On)return;
var res=null;if(!args)args={};for(var i=0;i<this._On.length;i++){var element=this._On[i];if(element&&element.Callback){if(element.Context){args.Args=element.Args;res=element.Callback.call(element.Context,sender,args)}else res=element.Callback.call(sender,sender,args);if(args&&args.Break)break}}return res};raDel.clear=function(context){if(!context)context=null;if(this._On)for(var i=0;i<this._On.length;i++)if(this._On[i]&&context===this._On[i].Context)delete this._On[i]};raDel.add=function(func,context,
args){if(!func)return null;if(!this._On)this._On=[];if(func instanceof rapost.Delegate)if(func._On){this._On=this._On.concat(func._On);return this._On.length}else return false;else{var id=this._On.length;if(!context)context=null;this._On.push({Callback:func,Context:context,Args:args});return id}};raDel.remove=function(func,context){if(!this._On)return;var type=(typeof func).toLowerCase();if(type=="number"){if(this._On.length>func)delete this._On[func]}else if(type=="function")for(var i=0;i<this._On.length;i++){if(!this._On[i])continue;
if(this._On[i].Callback==func)if(context&&this._On[i].Context===context){delete this._On[i];return}}else throw new Error("ArgumentException");};rapost.PostWidgetModel=function(){if(!rapost.modelInstance)rapost.modelInstance=new rapost.PostWidgetMdl;return rapost.modelInstance};rapost.PostWidgetMdl=function(){this.PostPixelLogServer="http://p.po.st/p";this.PostCDNServer="http://i.po.st/static";this.PostShortenerURL="http://po.st";this.PostCssURL=this.PostCDNServer+"/css/r1post.css?2_6_1_pch_168";this.PrivacyPolicyLink=
"http://www.po.st/privacy.html";this.PoStLink="http://www.po.st";this.CompatModeAnalized=false;this.CSSLoaded=false;this.OptOutStatusLoading=false;this.OptOutStatusLoaded=false;this.OptOutStatus=false;this.DelayedEvents=[];this.PwRoot=document.createElement("div");this.PwRoot.className="pw-root";document.body.appendChild(this.PwRoot);this.SharingServices=[];this.SharingChannels=[];this.NativePartyButtons=["facebook","twitter","linkedin","googleplus","pinterest"];this.Metadata=[{name:"facebook",value:"http://www.facebook.com/share.php?src=bm&u=[URL]&t=[TITLE]&v=3",
displayName:"Facebook",classicPopUp:true,id:"1"},{name:"twitter",value:"http://twitter.com/share?url=[URL]&text=[TITLE]&via=[VIA]",displayName:"Twitter",classicPopUp:true,shorten:true,id:"2"},{name:"mail",value:"emailButtonClick",displayName:"Email",classicPopUp:true,id:"3"},{name:"print",value:"printButtonClick",displayName:"Print",classicPopUp:true,id:"4"},{name:"stumbleupon",value:"http://www.stumbleupon.com/submit?url=[URL]&title=[TITLE]",displayName:"StumbleUpon",classicPopUp:true,id:"5"},{name:"favorites",
value:"favoritesButtonClick",displayName:"Favorites",classicPopUp:true,id:"6"},{name:"linkedin",value:"http://www.linkedin.com/shareArticle?mini=true&url=[URL]&title=[TITLE]",displayName:"LinkedIn",shorten:true,classicPopUp:true,id:"7"},{name:"googlebookmarks",otherNames:["google_bookmarks","google-bookmarks"],value:"http://www.google.com/bookmarks/mark?op=edit&bkmk=[URL]&title=[TITLE]",displayName:"Google Bookmarks",classicPopUp:true,id:"8"},{name:"msmessenger",value:"http://profile.live.com/badge?url=[URL]&title=[TITLE]",
displayName:"MS Messenger",id:"9"},{name:"myspace",value:"http://www.myspace.com/Modules/PostTo/Pages/?u=[URL]&t=[TITLE]",displayName:"MySpace",id:"10"},{name:"delicious",value:"http://delicious.com/save?url=[URL]&title=[TITLE]",displayName:"Delicious",id:"11"},{name:"digg",value:"http://digg.com/submit?phase=2&url=[URL]&title=[TITLE]",displayName:"Digg",id:"12"},{name:"orkut",value:"http://promote.orkut.com/preview?nt=orkut.com&tt=[TITLE]&du=[URL]",displayName:"Orkut",id:"13"},{name:"gmail",value:"http://mail.google.com/mail/?view=cm&fs=1&to&su=[TITLE]&body=[URL]&ui=2&tf=1",
displayName:"GMail",id:"14"},{name:"blogger",value:"http://www.blogger.com/blog_this.pyra?t&u=[URL]&n=[TITLE]&pli=1",displayName:"Blogger",id:"15"},{name:"reddit",value:"http://reddit.com/submit?resubmit=true&url=[URL]&title=[TITLE]",displayName:"Reddit",classicPopUp:true,id:"16"},{name:"yahoomail",value:"http://compose.mail.yahoo.com/?Subject=[TITLE]&Body=[URL]",displayName:"Yahoo Mail","extraUrlEncoding":true,id:"17"},{name:"tumblr",value:"http://www.tumblr.com/share?v=3&u=[URL]&t=[TITLE]&s=",displayName:"Tumblr",
classicPopUp:true,id:"18"},{name:"hotmail",value:"http://www.hotmail.msn.com/secure/start?action=compose&to=&subject=[TITLE]&body=[URL]",displayName:"Hotmail",id:"19"},{name:"aolmail",value:"http://webmail.aol.com/25045/aol/en-us/Mail/compose-message.aspx?to=&subject=[TITLE]&body=[URL]",displayName:"AOL Mail",id:"20"},{name:"livejournal",value:"http://www.livejournal.com/update.bml?subject=[TITLE]&event=[URL]",displayName:"LiveJournal",id:"21"},{name:"posterous",value:"http://posterous.com/share?linkto=[URL]",
displayName:"Posterous",id:"22"},{name:"aollifestream",value:"http://lifestream.aol.com/share/?url=[URL]&title=[TITLE]&description=",displayName:"AOL LifeStream",shorten:true,id:"23"},{name:"wordpress",value:"wordpressButtonClick",displayName:"WordPress",id:"24"},{name:"vkontakte",value:"http://vkontakte.ru/share.php?url=[URL]&title=[TITLE]",displayName:"VKontakte",id:"26"},{name:"baidu",value:"http://cang.baidu.com/do/add?it=[TITLE]&iu=[URL]&fr=ien&dc=",displayName:"Baidu",id:"27"},{name:"mailru",
value:"http://connect.mail.ru/share?url=[URL]&title=[TITLE]",displayName:"Mail.ru",id:"28"},{name:"hyves",value:"http://www.hyves.net/profilemanage/add/tips/?name=[TITLE]&text=[URL]&type=12",displayName:"Hyves",id:"29"},{name:"googleplus",value:"https://plus.google.com/share?url=[URL]&t=[TITLE]",displayName:"Google+",openedPopUpShow:false,id:"30"},{name:"clipboard",id:"99",openedPopUpShow:false},{name:"pinterest",value:"http://pinterest.com/pin/create/button/?url=[URL]&description=[TITLE]&media=[IMAGEURL]",
classicPopUp:true,displayName:"Pinterest",id:"32"},{name:"more",displayName:"More",openedPopUpShow:false,classicPopUp:true},{name:"post",displayName:"Post",openedPopUpShow:false},{name:"post-share",displayName:"Post-Share",openedPopUpShow:false},{name:"share",displayName:"Post-Share",openedPopUpShow:false}];this.fillData()};var rapostModel=rapost.PostWidgetMdl.prototype;rapostModel.fillData=function(){for(var i=0;i<this.Metadata.length;i++){this.SharingServices[this.Metadata[i].name]=this.Metadata[i].value;
var id=this.Metadata[i].id||"undefinedId";if(id!=="undefinedId")if(id.length==1)id="0"+id;this.SharingChannels["id"+id]=this.Metadata[i].name}};rapostModel.getSharerUrl=function(url,service,sguid,tracking){if(url==undefined)return;if(tracking!==undefined&&tracking==false)return url;sguid=sguid||this.getSGuid();if(pwidget_config.track==true||pwidget_config.track=="query"){var reg=/[\?#]/;if((url.search(new RegExp("http://"))!==-1||url.search(new RegExp("https://"))!==-1)&&url.search(reg)==-1){var partsOfurl=
url.split("//");if(partsOfurl[1].search(new RegExp("/"))==-1)url+="/"}else if(url.search(new RegExp("/"))==-1&&url.search(reg)==-1)url+="/";var separator=pwidget_config.track==true?"#":"?";var hash="";var hashIndex=url.indexOf("#");if(hashIndex>-1){hash=url.substring(hashIndex);url=url.substring(0,hashIndex)}if(separator=="?"){var queryIndex=url.indexOf(separator);if(queryIndex>-1){separator="&";queryIndex=url.lastIndexOf(separator);if(queryIndex>-1)url=url.substring(0,queryIndex)}}else hash="";var sharerId=
this.getSharerId(service);var fullShareGuid="";if(tracking)fullShareGuid=sguid+"."+sharerId;return url+separator+fullShareGuid+hash}return url};rapostModel.getSharerId=function(service){var sharerId="00";for(var i=0;i<this.Metadata.length;i++)if(this.Metadata[i].name==service){if(this.Metadata[i].id.length==1)sharerId="0"+this.Metadata[i].id;else sharerId=this.Metadata[i].id;break}return sharerId};rapostModel.getSGuid=function(){var s="abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMOPQRSTUVWXYZ0123456789";
var sGUID="";while(sGUID.length!=16)sGUID+=s.charAt(Math.round(Math.random()*(s.length-1)));return sGUID};rapostModel.correctSeparatorsInServices=function(node){if(helper.isContainClassName(node,"pw_google_bookmarks")||helper.isContainClassName(node,"pw-google-bookmarks")){node.className="pw-googlebookmarks";return}if(helper.isContainClassName(node,"pw_microsoft_messenger")||helper.isContainClassName(node,"pw-microsoft-messenger")){node.className="pw-msmessenger";return}if(helper.isContainClassName(node,
"pw_yahoo_mail")||helper.isContainClassName(node,"pw-yahoo-mail")){node.className="pw-yahoomail";return}if(helper.isContainClassName(node,"pw_aol_mail")||helper.isContainClassName(node,"pw-aol-mail")){node.className="pw-aolmail";return}if(helper.isContainClassName(node,"pw_live_journal")||helper.isContainClassName(node,"pw-live-journal")){node.className="pw-livejournal";return}if(helper.isContainClassName(node,"pw_aol_lifestream")||helper.isContainClassName(node,"pw-aol-lifestream")){node.className=
"pw-aollifestream";return}if(helper.isContainClassName(node,"pw_mail.ru")||helper.isContainClassName(node,"pw-mail.ru")){node.className="pw-mailru";return}if(helper.isContainClassName(node,"pw_stumble_upon")||helper.isContainClassName(node,"pw-stumble-upon")){node.className="pw-stumbleupon";return}};rapost.PostWidget=function(settings){settings=settings||{};settings.domNode=settings.domNode?settings.domNode:null;if(settings.domNode==null)throw new Error("domNode is not defined");settings.config=settings.config?
settings.config:helper.analizeOfCustomConfig(pwidget_config);this._Settings=settings;this._DomNode=settings.domNode;this._Id=settings.domNode.getAttribute("id")||helper.getNewId();this._DomNode.setAttribute("id",this._Id);this._CountClicked="";this._Container=settings.config.container||null;this._IsHtmlInit=settings.config.isHtmlInit!==undefined?settings.config.isHtmlInit:false;this._Click=settings.config.click!==undefined?settings.config.click:pwidget_config.defaults.click;this._AloneService=settings.config.button||
pwidget_config.defaults.button;this._Services=settings.config.buttons||pwidget_config.defaults.buttons;this._OnShare=settings.config.onshare||null;this._Vertical=settings.config.vertical!==undefined?settings.config.vertical:pwidget_config.defaults.vertical;this._Counter=settings.config.counter||pwidget_config.defaults.counter;this._CounterFromHtml=null;this._PublisherKey=settings.config.publisherKey||pwidget_config.publisherKey;this._SizeItem=helper.getSizeItem(settings.config.size)||pwidget_config.defaults.size;
this._Settings.config.size=this._SizeItem;this._Title=settings.config.title!==undefined?settings.config.title:pwidget_config.defaults.title;this._SharerUrl=settings.config.url||pwidget_config.defaults.url;this._Tracking=settings.config.transformations.tracking!==undefined?settings.config.transformations.tracking:window.pwidget_config.defaults.transformations.tracking;this._Settings.config.transformations.tracking=this._Tracking;this._UrlWithoutSguid=null;this._ShowPost=settings.config.showPost!==
undefined?settings.config.showPost:pwidget_config.defaults.showPost;this._QueryString="";this._CopyPaste=window.pwidget_config.copypaste!==null?window.pwidget_config.copypaste:true;this._IsClassicPopUpOpenedLastOpend=false;this._ImageUrl=settings.config.image?settings.config.image:pwidget_config.defaults.image;this._Settings.config.image=this._ImageUrl;this._TwitterVia=this.setTwitterVia(settings);this._VGuid=this._getGuid();this._Settings.config.transformations.shorten=settings.config.transformations.shorten!==
undefined?settings.config.transformations.shorten:window.pwidget_config.defaults.transformations.shorten;this._UsingAfterShare=settings.config.afterShare!==undefined?settings.config.afterShare:window.pwidget_config.defaults.afterShare;this._IsContainLookNativeButtons=false;this._ToolBoxesView=null;this._AloneBoxView=null;this._NativePartyButtonsView=null;this._ArbitraryView=null;this._RelikeBoxView=null;this._LookNativeBox=null;rapost.PostWidget.base.constructor.apply(this,arguments);this._UrlWithoutSguid=
this._clearOfUrl(this._SharerUrl);this._PublisherKey=helper.getPublisherKey(this._PublisherKey);if(this._IsHtmlInit)this._analizeOfContainer();if(this._Container!==enums.boxes.relikebox)this._trackClickBack(this._createLogEvent("view"));this._loadStatus();this._analizeCompatMode();if(this._Settings.config.transformations.shorten)this._getShortUrl();else{this._init();this._bindEvents()}};helper.initClass(rapost.PostWidget,rapost.Object);var rapostWidget=rapost.PostWidget.prototype;rapostWidget._getShortUrl=
function(){var url=this._Model.PostShortenerURL+"/v1/shorten?longUrl="+encodeURIComponent(this._SharerUrl)+"&sGUID="+this._Model.getSGuid()+"&pub="+helper.getPublisherKey();function one(data){if(data&&data.url)this._Settings.config.shortUrl=data.url}helper.jsonpRequest(url,one,this,function(){this._init();this._bindEvents()})};rapostWidget._clearOfUrl=helper.clearOfUrl;rapostWidget.setTwitterVia=function(settings){var twitterVia="po_st";var services=settings.config.services!==undefined?settings.config.services:
window.pwidget_config.defaults.services;if(services.twitter)if(services.twitter.via)twitterVia=services.twitter.via;return twitterVia};rapostWidget._init=function(){if(this._PublisherKey==null)throw new Error("PublisherKey is not found!");if(this._Container){if(!this._IsHtmlInit)if(this._isLookNativeButtons()){this._Container=enums.boxes.looknativebox;this._IsContainLookNativeButtons=true}switch(this._Container){case enums.boxes.relikebox:this._RelikeBoxView=new rapost.RelikeBoxView(this._Settings);
break;case enums.boxes.nativebox:this._Counter=this._Counter||enums.counter.horizontal;this._Settings.config.counter=this._Counter;if(this._Settings.config.twitterVia==undefined)this._Settings.config.twitterVia=this._TwitterVia;this._Settings.config.title=this._Title;this._Settings.config.url=this._SharerUrl;this._NativePartyButtonsView=new rapost.NativePartyButtonsView(this._Settings);this._NativePartyButtonsView.updateCounter(this._CountClicked);break;case enums.boxes.custombox:this._ArbitraryView=
new rapost.ArbitraryView(this._Settings);break;case enums.boxes.alonebox:this._Settings.config.counter=this._Counter;this._AloneBoxView=new rapost.AloneBoxView(this._Settings);this._AloneBoxView.updateCounter(this._CountClicked);break;case enums.boxes.toolbox:this._Counter=this._Counter||enums.counter.none;this._Settings.config.counter=this._Counter;this._ToolBoxesView=new rapost.ToolBoxesView(this._Settings);this._ToolBoxesView.updateCounter(this._CountClicked);break;case enums.boxes.looknativebox:this._IsContainLookNativeButtons=
true;this._Settings.config.size=this._SizeItem=enums.sizeItem.small;this._createButtonBox();break}}this._createPopUps()};rapostWidget._isLookNativeButtons=function(){for(var i=0;i<this._Services.length;i++)if(typeof this._Services[i]=="object")if(this._Services[i].look&&this._Services[i].look=="native")return true};rapostWidget._createButtonBox=function(){var counterForLookNative=enums.counter.horizontal;if(this._Counter==null)this._Counter=enums.counter.none;else counterForLookNative=this._Counter;
var box=[];if(this._IsHtmlInit){var nodes=helper.nodeListToArray(this._DomNode.getElementsByTagName("a"));for(var i=0;i<nodes.length;i++){this._Settings.childNode=nodes[i];this._Settings.config.counter=this._CounterFromHtml||this._Counter;this._Settings.config.counterForLookNative=counterForLookNative;var buttonView=new rapost.AloneBoxView(this._Settings);if(!buttonView._isButtonCorrect){buttonView._DomNode.parentNode.removeChild(buttonView._DomNode);continue}buttonView.updateCounter("");this._bindEventsForLookNativeButtons(buttonView);
box.push(buttonView)}}else{var container=document.createElement("div");this._DomNode.parentNode.insertBefore(container,this._DomNode);var id=this._DomNode.getAttribute("id");if(id)container.setAttribute("id",id);else container.setAttribute("id",helper.getNewId());helper.containersForRecycling.push(this._DomNode);this._DomNode=container;for(var i=0;i<this._Services.length;i++){this._Settings.config.counter=this._CounterFromHtml||this._Counter;this._Settings.config.counterForLookNative=counterForLookNative;
this._Settings.config.button=this._Services[i];var buttonNode=document.createElement("a");this._DomNode.appendChild(buttonNode);this._Settings.domNode=buttonNode;var buttonView=new rapost.AloneBoxView(this._Settings);if(!buttonView._isButtonCorrect){buttonView._DomNode.parentNode.removeChild(buttonView._DomNode);continue}buttonView.updateCounter("");this._bindEventsForLookNativeButtons(buttonView);box.push(buttonView)}}this._DomNode.className+=" ra1-pw-widget-looknative";this._Counter=this._CounterFromHtml||
this._Counter;this._addClassesForLookNativeBoxNode(this._DomNode,counterForLookNative);this._LookNativeBox=box};rapostWidget._addClassesForLookNativeBoxNode=function(node,counter){if(this._Vertical)node.className+=" ra1-pw-layout-vertical";else node.className+=" ra1-pw-layout-horizontal";switch(counter){case enums.counter.horizontal:node.className+=" ra1-pw-counter-horizontal";break;case enums.counter.vertical:node.className+=" ra1-pw-counter-vertical";break;case enums.counter.none:node.className+=
" ra1-pw-counter-none";break}};rapostWidget._updateCounterInLookNativeBox=function(response){for(var i=0;i<this._LookNativeBox.length;i++){var currentbox=this._LookNativeBox[i];switch(this._LookNativeBox[i]._Service){case "linkedin":this._universalUpdateCounter(currentbox,response.linkedin);break;case "facebook":this._universalUpdateCounter(currentbox,response.facebook);break;case "twitter":this._universalUpdateCounter(currentbox,response.twitter);break;case "pinterest":this._universalUpdateCounter(currentbox,
response.pinterest);break;case "googleplus":this._universalUpdateCounter(currentbox,response.googleplus);break;default:this._universalUpdateCounter(currentbox,response.total)}}};rapostWidget._universalUpdateCounter=function(buttonView,count){if(count!==undefined)buttonView.updateCounter(count);else buttonView.updateCounter(0)};rapostWidget._bindEventsForLookNativeButtons=function(buttonView){buttonView.Click.add(this._onItemsClick,this);buttonView.PostOver.add(this._onToolBoxesPostOver,this);buttonView.PostOut.add(this._onToolBoxesPostOut,
this)};rapostWidget._bindEvents=function(){if(this._ToolBoxesView){this._ToolBoxesView.Click.add(this._onItemsClick,this);this._ToolBoxesView.PostOver.add(this._onToolBoxesPostOver,this);this._ToolBoxesView.PostOut.add(this._onToolBoxesPostOut,this)}if(this._NativePartyButtonsView){this._NativePartyButtonsView.PostOver.add(this._onToolBoxesPostOver,this);this._NativePartyButtonsView.PostOut.add(this._onToolBoxesPostOut,this)}if(this._ArbitraryView)if(this._Click){this._ArbitraryView.Click.add(this._onToolBoxesPostOver,
this);this._ArbitraryView.MouseOut.add(this._onToolBoxesPostOut,this)}else{this._ArbitraryView.MouseOver.add(this._onToolBoxesPostOver,this);this._ArbitraryView.MouseOut.add(this._onToolBoxesPostOut,this)}if(this._AloneBoxView){this._AloneBoxView.Click.add(this._onItemsClick,this);this._AloneBoxView.PostOver.add(this._onToolBoxesPostOver,this);this._AloneBoxView.PostOut.add(this._onToolBoxesPostOut,this)}if(this._RelikeBoxView)this._RelikeBoxView.Click.add(this._onItemsClick,this)};rapostWidget._analizeOfContainer=
function(){if(this._Container){var container=this._DomNode;if(helper.isContainClassName(container,"pw_vertical")||helper.isContainClassName(container,"pw-vertical")){this._Vertical=true;this._Counter=enums.counter.vertical;this._CounterFromHtml=this._Counter}if(helper.isContainClassName(container,"pw_copypaste_true")||helper.isContainClassName(container,"pw-copypaste-true"))this._CopyPaste=true;if(helper.isContainClassName(container,"pw_post_false")||helper.isContainClassName(container,"pw-post-false"))this._ShowPost=
false;if(helper.isContainClassName(container,"pw_share_false")||helper.isContainClassName(container,"pw-share-false"))this._ShowPost=false;if(helper.isContainClassName(container,"pw_counter_vertical")||helper.isContainClassName(container,"pw-counter-vertical")){this._Counter=enums.counter.vertical;this._CounterFromHtml=this._Counter}if(helper.isContainClassName(container,"pw_counter_horizontal")||helper.isContainClassName(container,"pw-counter-horizontal")||helper.isContainClassName(container,"pw_counter_true")||
helper.isContainClassName(container,"pw-counter-show")){this._Counter=enums.counter.horizontal;this._CounterFromHtml=this._Counter}if(helper.isContainClassName(container,"pw_counter_none")||helper.isContainClassName(container,"pw_counter_false")||helper.isContainClassName(container,"pw-counter-none")){this._Counter=enums.counter.none;this._CounterFromHtml=this._Counter}var classList=container.className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i].search(new RegExp("pw_size_"))!==
-1||classList[i].search(new RegExp("pw-size-"))!==-1){var sizeItem=classList[i].replace("pw_size_","").replace("pw-size-","");this._SizeItem=helper.getSizeItem(sizeItem)}var items=container.getElementsByTagName("a");if(items.length>0){var isFirstButton=true;for(var i=0;i<items.length;i++){if(helper.isContainClassName(items[i],"pw_title")||helper.isContainClassName(items[i],"pw-title")){this._Title=items[i].innerHTML;continue}if(helper.isContainClassName(items[i],"pw_url")||helper.isContainClassName(items[i],
"pw-url")){this._SharerUrl=items[i].innerHTML;continue}if(helper.isContainClassName(items[i],"pw_separator")){if(items[i].innerHTML=="?")pwidget_config.track="query";continue}if(isFirstButton&&items[i].className.search(new RegExp("-like?|-share?|twitter-twitt?|-plus?"))!==-1)this._Container=enums.boxes.nativebox;if(isFirstButton&&helper.isContainClassName(items[i],"pw-look-native"))this._Container=enums.boxes.looknativebox;isFirstButton=false;var pintImg=items[i].getAttribute("pw:image");if(!pintImg)pintImg=
items[i].getAttribute("pw:pinterest-image");if(pintImg){this._ImageUrl=pintImg;this._Settings.config.image=pintImg}this._Model.correctSeparatorsInServices(items[i])}}this._SharerUrl=container.getAttribute("pw:url")||this._SharerUrl;var title=container.getAttribute("pw:title");if(title=="")this._Title=title;this._Title=title||this._Title;var image=container.getAttribute("pw:image");if(!image)image=container.getAttribute("pw:pinterest-image");if(image)this._ImageUrl=this._Settings.config.image=image;
var sizeItem=container.getAttribute("pw:size");if(sizeItem)this._SizeItem=helper.getSizeItem(sizeItem);var twitterVia=container.getAttribute("pw:twitter-via");if(twitterVia)this._TwitterVia=twitterVia;var layout=container.getAttribute("pw:layout");if(layout=="vertical"){this._Vertical=true;this._Counter=enums.counter.vertical;this._CounterFromHtml=this._Counter}if(layout&&this._Container!==enums.boxes.looknativebox)if(layout=="vertical")this._Counter=enums.counter.vertical;else{this._Vertical=false;
this._Counter=enums.counter.horizontal}var counterPosition=container.getAttribute("pw:counter");if(counterPosition){switch(counterPosition){case "horizontal":this._Counter=enums.counter.horizontal;break;case "vertical":this._Counter=enums.counter.vertical;break;case "none":this._Counter=enums.counter.none;break;case "show":this._Counter=enums.counter.horizontal;break}this._CounterFromHtml=this._Counter}var copypaste=container.getAttribute("pw:copypaste");if(copypaste)if(copypaste=="true")this._CopyPaste=
true;else if(copypaste=="false")this._CopyPaste=false;var postbuttonShow=container.getAttribute("pw:postbutton");if(postbuttonShow)if(copypaste=="false")this._ShowPost=false;this._updateSettings()}};rapostWidget._updateSettings=function(){this._Settings.config.counter=this._Counter;this._Settings.config.vertical=this._Vertical;this._Settings.config.size=this._SizeItem;this._Settings.config.showPost=this._ShowPost};rapostWidget._createPopUps=function(){if(this._Container!==enums.boxes.relikebox){this._Settings.viaTwitter=
this._ViaTwitter;this._ClassicPopUpView=rapost.ClassicPopUpView(this._Settings);this._ClassicPopUpOpenedView=rapost.ClassicPopUpOpenedView(this._Settings);this._updateCounterValue(false,"")}if(this._UsingAfterShare)this._ClassicPopUpSuccessView=rapost.ClassicPopUpSuccessView()};rapostWidget._checkClickBack=function(){if(pwidget_config.track)if(!helper.clickBackFired)this._getClickBackInfo()};rapostWidget._getGuid=helper.getGuid;rapostWidget._sanitizeString=function(str){try{str=str.replace("\n","",
"g");str=str.replace("\t","","g");str=str.replace("\r","","g")}catch(e){}return str};rapostWidget._createLogEvent=function(eventType,shareGuid,sharerName,clickGuid){var result={};result.pub=this._PublisherKey;result.random=helper.getRandomTime();var url=this._clearOfUrl(this._SharerUrl);if(eventType=="view"||eventType=="clickback")url=this._clearOfUrl(document.location.href);var parts=helper.getPartsOfUrl(url);result.pu=parts.pu;result.pq=parts.pq;if(sharerName=="mail")sharerName="email";result.t=
eventType;if(!this._Model.OptOutStatus){result.pt=this._Title;result.ru=document.referrer;if(eventType=="clickback"){result.sc=sharerName;result.sGUID=shareGuid;result.bGUID=this._getGuid()}else{result.vGUID=this._VGuid;if(eventType=="copylink")result.lGUID=this._getGuid();else if(eventType=="more"){result.mGUID=this._getGuid();result.label="More"}else if(eventType=="click"){result.cGUID=clickGuid;result.clicked=sharerName}else if(eventType=="share"){result.cGUID=clickGuid;result.sGUID=shareGuid;
result.sm="classic";if(this._Container==enums.boxes.relikebox)result.sm="html";result.sc1=sharerName;result.su1=""}}}return result};rapostWidget._updateViewEvent=function(event){if(this._Model.OptOutStatus){delete event.pt;delete event.ru;delete event.vGUID}return event};rapostWidget._loadStatus=function(){if(!this._Model.OptOutStatusLoading){this._Model.OptOutStatusLoading=true;var callbackFunction="window.postJsonP('"+this._Id+"').getStatus";var url=this._Model.PostShortenerURL+"/v1/status?callback="+
callbackFunction+"&random"+(new Date).getTime();helper.loadScript(url)}};rapostWidget.updateStatus=function(data){if(data.optout)this._Model.OptOutStatus=true;this._Model.OptOutStatusLoaded=true;this._checkClickBack();for(var i=0;i<this._Model.DelayedEvents.length;i++)if(this._Model.DelayedEvents[i].t=="view")this._trackClickBack(this._updateViewEvent(this._Model.DelayedEvents[i]));else this._trackClickBack(this._Model.DelayedEvents[i])};rapostWidget._trackClickBack=helper.trackClickBack;rapostWidget._getClickBackInfo=
function(){var patterns=[{regex:/^#([a-z\d]{16})\.([\d]{2})$/i,target:document.location.hash},{regex:/[\?&]{1}([a-z\d]{16})\.([\d]{2})(?:#|$)/i,target:document.location.href}];for(var i in patterns){if(!patterns.hasOwnProperty(i))continue;var matcher=patterns[i];var match=matcher.regex.exec(matcher.target);if(match){var channelId=match[2];var sharerName=this._Model.SharingChannels["id"+channelId];if(sharerName){this._trackClickBack(this._createLogEvent("clickback",match[1],sharerName));helper.clickBackFired=
true}}}};rapostWidget._parseUrl=function(){var startQueryIndexOffset=1;var startQueryIndex=this._SharerUrl.indexOf("?");if(startQueryIndex<0){startQueryIndex=this._SharerUrl.indexOf("#");startQueryIndexOffset=0}if(startQueryIndex>-1){if(startQueryIndex+startQueryIndexOffset<this._SharerUrl.length)this._QueryString=this._SharerUrl.substring(startQueryIndex+startQueryIndexOffset);this._SharerUrl=this._SharerUrl.substring(0,startQueryIndex)}};rapostWidget._analizeCompatMode=function(){if(!this._Model.CompatModeAnalized){this._Model.CompatModeAnalized=
true;if(!window.addEventListener&&document.documentMode&&document.documentMode<=6)document.getElementsByTagName("html")[0].className+=" pw-compatmode"}};rapostWidget._showEmailFrame=function(cGuid){this._EmailFrameView=rapost.EmailFrameView();var sharerUrl=this._clearOfUrl(this._SharerUrl);var url=this._Model.PostShortenerURL+"/share"+"/classic-email.html?pubKey="+encodeURIComponent(this._PublisherKey)+"&url="+encodeURIComponent(sharerUrl)+"&sharerId="+encodeURIComponent(this._Model.getSharerId("mail"))+
"&track="+encodeURIComponent(this._Tracking)+"&title="+encodeURIComponent(this._Title)+"&shorten="+encodeURIComponent(this._Settings.config.transformations.shorten?"true":"false")+"&cGUID="+encodeURIComponent(cGuid)+"&referrer="+encodeURIComponent(document.referrer)+"&vGUID="+encodeURIComponent(this._VGuid);this._EmailFrameView.show({emailUrl:url})};rapostWidget._updateClassicPopUpSuccess=function(){var callbackFunction="window.postJsonP('"+this._Id+"').getData";var url=this._Model.PostShortenerURL+
"/v1/aftershare?publisherKey="+this._PublisherKey+"&callback="+callbackFunction+"&random"+(new Date).getTime();helper.loadScript(url)};rapostWidget._updateCounterValue=function(increment,sharerName,ignoreCondition){if(ignoreCondition||this._Counter!==enums.counter.none||this._Container==enums.boxes.looknativebox&&this._Settings.config.counterForLookNative!==enums.counter.none){var shareUrl=encodeURIComponent(this._SharerUrl);var callbackFunction="window.postJsonP('"+this._Id+"').getData";var exParam=
this._IsContainLookNativeButtons?"ex&":"";var url=this._Model.PostShortenerURL+"/v1/counter?"+exParam+"publisherKey="+this._PublisherKey+"&increment="+increment+"&channel="+sharerName+"&url="+shareUrl+"&callback="+callbackFunction+"&"+(new Date).getTime();helper.loadScript(url)}};rapostWidget._callbackUpdateCounter=function(response){if(this._ToolBoxesView)this._ToolBoxesView.updateCounter(response.total);if(this._NativePartyButtonsView)this._NativePartyButtonsView.updateCounter(response.total);if(this._AloneBoxView)this._AloneBoxView.updateCounter(response.total);
if(this._Container==enums.boxes.looknativebox)this._updateCounterInLookNativeBox(response);this._CountClicked=response.total};rapostWidget._addFavorites=function(){if(window.chrome){alert("Please press Ctrl+D to bookmark this page.");return}if(window.sidebar)window.sidebar.addPanel(this._Title,this._SharerUrl,"");else if(window.external)window.external.AddFavorite(this._SharerUrl,this._Title);else alert("Please press Ctrl+D to bookmark this page.")};rapostWidget._getSizeItemOfView=function(){var sizeItem=
this._SizeItem;if(this._ToolBoxesView)sizeItem=this._ToolBoxesView._SizeItem;else if(this._ArbitraryView)sizeItem=this._ArbitraryView._SizeItem;else if(this._AloneBoxView)sizeItem=this._AloneBoxView._SizeItem;else if(this._NativePartyButtonsView)sizeItem={X:60,Y:20};return sizeItem};rapostWidget._onItemsClick=function(sender,args){if(args.service=="post")return;var cGuid=this._getGuid();var sGuid=this._Model.getSGuid();if(this._ClassicPopUpView&&this._ClassicPopUpOpenedView){this._ClassicPopUpView.hide();
this._ClassicPopUpOpenedView.hide()}var redirectUrl=null;var sharer=this.getMetadataByName(args.service);if(sharer.name!=="more")this._trackClickBack(this._createLogEvent("click",null,sharer.name,cGuid));switch(sharer.name){case "more":if(this._ClassicPopUpSuccessView)this._ClassicPopUpSuccessView.hide();this._ClassicPopUpOpenedView.show({image:this._ImageUrl});this._ClassicPopUpOpenedView.Click.add(this._onItemsClick,this);this._ClassicPopUpOpenedView.Closed.add(this._onClassicPopUpOpenedClosed,
this);this._IsClassicPopUpOpenedLastOpend=true;this._trackClickBack(this._createLogEvent("more"));return false;case "mail":this._showEmailFrame(cGuid);this._updateCounterValue(true,"mail",true);break;case "print":if(window.navigator.appName=="Opera")setTimeout("window.print()",1E3);else window.print();this._updateCounterValue(true,"print",true);break;case "favorites":this._addFavorites();this._updateCounterValue(true,"favorites",true);this._showPopUpSuccessView(args.args);break;default:redirectUrl=
sharer.value;if(redirectUrl){if(redirectUrl=="wordpressButtonClick"){redirectUrl=this._wordpressButtonClick();if(redirectUrl==null)return}else if(args.service=="pinterest"){var pintUrl=null;if(this._ImageUrl)pintUrl=this._ImageUrl;else if(args.pinterestUrl)pintUrl=args.pinterestUrl;if(pintUrl)redirectUrl=redirectUrl.replace("[IMAGEURL]",encodeURIComponent(pintUrl))}else if(args.service=="twitter")redirectUrl=redirectUrl.replace("[VIA]",encodeURIComponent(this._TwitterVia));this._shareClickHandler(sharer,
redirectUrl,sGuid)}this._showPopUpSuccessView(args.args)}if(this._OnShare)this._OnShare(sharer.name);if(sharer.name!=="mail")this._trackClickBack(this._createLogEvent("share",sGuid,sharer.name,cGuid));return false};rapostWidget._showPopUpSuccessView=function(args){if(this._ClassicPopUpSuccessView){if(args){var coord=helper.getOffsetElement(args.target);this._ClassicPopUpSuccessView.show({left:coord.left,top:coord.top+args.target.offsetHeight})}else if(this._ClassicPopUpView)this._ClassicPopUpSuccessView.show({left:this._ClassicPopUpView._Location.left,
top:this._ClassicPopUpView._Location.top});else if(this._RelikeBoxView){var fullRelikeBox=helper.getElementsByClassName("pw-sharelist");fullRelikeBox=fullRelikeBox.length>0?fullRelikeBox[0]:null;if(fullRelikeBox){var coordRelikeBox=helper.getOffsetElement(this._DomNode);var coordOuterBox=helper.getOffsetElement(fullRelikeBox);this._ClassicPopUpSuccessView.show({left:coordRelikeBox.left,top:coordOuterBox.top});fullRelikeBox.style.display="none";this._ClassicPopUpSuccessView.Closed.add(this._onPopUpSuccessShare,
this)}}this._updateClassicPopUpSuccess();this._ClassicPopUpSuccessView.ClickShareAgain.add(this._onPopUpSuccessShare,this)}};rapostWidget._shareClickHandler=function(sharer,redirectUrl,sharerGuid){var shortenUrl=this._Settings.config.transformations.shorten==false?this._Settings.config.transformations.shorten:sharer.shorten;var wndUrl=this._Model.PostCDNServer+"/share.html?"+"&url="+(shortenUrl?encodeURIComponent(this._SharerUrl):encodeURIComponent(this._Model.getSharerUrl(this._SharerUrl,sharer.name,
sharerGuid,this._Tracking)))+"&via="+encodeURIComponent(this._TwitterVia)+"&title="+encodeURIComponent(this._Title)+"&sharer="+encodeURIComponent(sharer.displayName)+"&sharerUrl="+encodeURIComponent(redirectUrl)+this._getShortenUrlParameter(sharer)+(sharer.extraUrlEncoding?"&extraUrlEncoding=true":"")+"&sGUID="+sharerGuid+"&pub="+this._PublisherKey;var wnd=window.open(wndUrl);if(wnd==null)alert("Please disable pop-up blocker to share.");else this._updateCounterValue(true,sharer.name,true)};rapostWidget._getShortenUrlParameter=
function(sharer){var parameter="";var shortenParam="&shorten=true";if(this._Settings.config.transformations.shorten==null){parameter=sharer.shorten?shortenParam:"";return parameter}else if(this._Settings.config.transformations.shorten){parameter=shortenParam;return parameter}else return parameter};rapostWidget._wordpressButtonClick=function(){var blogName=prompt("Please enter your WordPress Blog URL:","http://");if(blogName!=null){blogName=blogName.replace(/^\s+|\/+\s+$/g,"");if(/http[s]{0,1}:\/\/[\S]+\.[\S]+.*/.test(blogName))return blogName+
"/wp-admin/press-this.php?u=[URL]&t=[TITLE]&v=4"}return null};rapostWidget._onToolBoxesPostOver=function(sender,args){var coord=helper.getOffsetElement(args.target);this._ClassicPopUpOpenedView.hide();if(this._ClassicPopUpSuccessView)this._ClassicPopUpSuccessView.hide();if(this._ClassicPopUpView){this._ClassicPopUpView.hide();var sizeItem=this._getSizeItemOfView();this._ClassicPopUpView.show({x:coord.left,y:coord.top+args.target.offsetHeight,sizeItem:sizeItem,image:this._ImageUrl});this._ClassicPopUpView.Click.add(this._onItemsClick,
this);this._ClassicPopUpView.Closed.add(this._onClassicPopUpClosed,this);this._IsClassicPopUpOpenedLastOpend=false}};rapostWidget._onToolBoxesPostOut=function(sender,args){if(this._ClassicPopUpView)this._ClassicPopUpView.hideWithTimeOut()};rapostWidget._onClassicPopUpClosed=function(sender,args){this._ClassicPopUpView.Click.remove(this._onItemsClick,this);this._ClassicPopUpView.Closed.remove(this._onClassicPopUpClosed,this);if(this._ClassicPopUpSuccessView)this._ClassicPopUpSuccessView.ClickShareAgain.remove(this._onPopUpSuccessShare,
this)};rapostWidget._onClassicPopUpOpenedClosed=function(sender,args){this._ClassicPopUpOpenedView.Click.remove(this._onItemsClick,this);this._ClassicPopUpOpenedView.Closed.remove(this._onClassicPopUpOpenedClosed,this);if(this._ClassicPopUpSuccessView)this._ClassicPopUpSuccessView.ClickShareAgain.remove(this._onPopUpSuccessShare,this)};rapostWidget._onPopUpSuccessShare=function(sender,args){if(this._RelikeBoxView){var fullRelikeBox=helper.getElementsByClassName("pw-sharelist");fullRelikeBox=fullRelikeBox.length>
0?fullRelikeBox[0]:null;if(fullRelikeBox){fullRelikeBox.style.display="";this._ClassicPopUpSuccessView.ClickShareAgain.remove(this._onPopUpSuccessShare,this);this._ClassicPopUpSuccessView.Closed.remove(this._onPopUpSuccessShare,this)}return}if(this._IsClassicPopUpOpenedLastOpend){if(this._ClassicPopUpOpenedView){this._ClassicPopUpOpenedView.show({image:this._ImageUrl});this._ClassicPopUpOpenedView.Click.add(this._onItemsClick,this);this._ClassicPopUpOpenedView.Closed.add(this._onClassicPopUpOpenedClosed,
this)}}else if(this._ClassicPopUpView){this._ClassicPopUpView.Click.add(this._onItemsClick,this);this._ClassicPopUpView.Closed.add(this._onClassicPopUpClosed,this);this._ClassicPopUpView.show({x:this._ClassicPopUpSuccessView._Location.left,y:this._ClassicPopUpSuccessView._Location.top,sizeItem:this._SizeItem,image:this._ImageUrl})}};rapostWidget.updateConfig=function(settings){settings=settings||{};if(settings.total||settings.total==0){this._callbackUpdateCounter(settings);return}if(settings.html){this._ClassicPopUpSuccessView.updateShareContent(settings.html);
return}if(settings.title)this._Title=settings.title;if(settings.url){this._SharerUrl=settings.url;this._updateCounterValue(false,"")}if(settings.image)this._ImageUrl=settings.image;if(settings.buttons){var buttons=settings.buttons;for(var i=0;i<buttons.length;i++)if(typeof buttons[i]=="object")if(buttons[i]["pinterest"])if(buttons[i]["pinterest"].imageURL){this._ImageUrl=buttons[i]["pinterest"].imageURL;settings.image=this._ImageUrl}else if(buttons[i]["pinterest"].image){this._ImageUrl=buttons[i]["pinterest"].image;
settings.image=this._ImageUrl}}if(this._Container==enums.boxes.nativebox)this._NativePartyButtonsView.updateConfig(this._Id,settings)};rapost.PostWidgetView=function(settings){settings=settings||{};settings.config=settings.config||{};this._Model=new rapost.PostWidgetModel;this._Showed=true;this._PinterestImageURL=settings.config.image!==undefined&&settings.config.image!==null?settings.config.image:pwidget_config.defaults.image;this._RenderSuccsess=true;this._Style=null;rapost.PostWidgetView.base.constructor.apply(this,
arguments);if(!this._Model.CSSLoaded){this._loadCss(this._Model.PostCssURL);this._Model.CSSLoaded=true}if(settings.config&&settings.config.buttons){this._analizeButtonsList(settings.config.buttons);this._Service=settings.config.buttons[0]}this._render();if(this._RenderSuccsess){this._setStyle();this._bindEvents()}};helper.initClass(rapost.PostWidgetView,rapost.Object);var raPWV=rapost.PostWidgetView.prototype;raPWV._analizeButtonsList=function(buttons){for(var i=0;i<buttons.length;i++)if(typeof buttons[i]==
"object"&&buttons[i]!==null){if(buttons[i].id){if(buttons[i].look&&buttons[i].look=="native")this._LookNative=true;if(buttons[i].id=="pinterest"||buttons[i].id=="pinterest-share")if(buttons[i].imageURL)this._PinterestImageURL=buttons[i].imageURL;else if(buttons[i].image)this._PinterestImageURL=buttons[i].image;buttons[i]=buttons[i].id}continue}};raPWV._render=function(){return new Error("Not Implements")};raPWV._verifyPinterest=function(imageUrl){if(imageUrl)this._showPinterestIcon();else this._hidePinterestIcon()};
raPWV._getPinterestNode=function(){var liPinterestNodes=this._DomNode.getElementsByTagName("li");for(var i=0;i<liPinterestNodes.length;i++)if(liPinterestNodes[i].innerHTML.search("ra1-pw-icon-pinterest")!==-1)return liPinterestNodes[i];return null};raPWV._showPinterestIcon=function(){var pinterestNode=this._getPinterestNode();helper.showNode(pinterestNode)};raPWV._hidePinterestIcon=function(){var pinterestNode=this._getPinterestNode();helper.hideNode(pinterestNode)};raPWV._setStyle=function(){if(this._Style!==
null){var style=this._DomNode.getAttribute("style");if(style===null)style="";this._DomNode.setAttribute("style",style+this._Style)}};raPWV.setContent=function(html){this._DomNode.innerHTML=html};raPWV._bindEvents=function(){return new Error("Not Implements")};raPWV._loadCss=function(url){var head=document.getElementsByTagName("head")[0];var link=document.createElement("link");link.rel="stylesheet";link.href=url;link.media="screen";link.type="text/css";head.appendChild(link)};raPWV._getUserClasses=
function(node){this._Style=node.getAttribute("style");var classList=node.className.split(" ");var result="";for(var i=0;i<classList.length;i++)if(classList[i].search(new RegExp("pw"))==-1)result+=" "+classList[i];return result};raPWV._analizeOfContainer=function(domNode){var params={};var items=domNode.getElementsByTagName("a");if(items.length==0)return null;var servicesList=[];for(var i=0;i<items.length;i++){var className=items[i].className;var service=className.replace("pw_","").replace("pw-","").replace("button-",
"");if(service=="email")service="mail";if(service=="title"||service=="url")continue;if(service=="pinterest"||service=="pinterest-share"){var attribute=items[i].getAttribute("pw:pinterest-image")||null;if(attribute)params.image=attribute}servicesList.push(service)}params.services=servicesList;return params};raPWV.show=function(){this._Showed=true;this._DomNode.style.display="block"};raPWV.hide=function(){this._Showed=false;this._DomNode.style.display="none"};rapost.NativePartyButtonsView=function(settings){settings=
settings||{};this._DomNode=settings.domNode;this._PostNode=null;this._CounterNode=null;this._Counter=settings.config.counter;this._SizeItem=settings.config.size;this._TwitterVia=settings.config.twitterVia;this._Vertical=settings.config.vertical;this._Services=settings.config.buttons;this._ShowPost=settings.config.showPost;this._CounterNode=null;this._Title=settings.config.title;this._Shorten=settings.config.transformations.shorten;this._SharerUrl=settings.config.url;this._ShortUrl=settings.config.shortUrl||
null;this._PinterestImageURL=null;this._Tracking=settings.config.transformations.tracking;rapost.NativePartyButtonsView.base.constructor.apply(this,arguments);this.PostOver=new rapost.Delegate;this.PostOut=new rapost.Delegate};helper.initClass(rapost.NativePartyButtonsView,rapost.PostWidgetView);var raNPBView=rapost.NativePartyButtonsView.prototype;raNPBView._render=function(){this._correctServicesList();var container=document.createElement("span");if(this._Vertical){if(this._Counter!==enums.counter.horizontal)container.style.width=
"66px";else container.style.width="120px";container.className="ra1-pw-layout-vertical"}else container.className="ra1-pw-layout-horizontal";var html="";var linkedInNode=null;for(var i=0;i<this._Services.length;i++){var cssClass="ra1-pw-originalbuttons";cssClass+=" ra1-pw-native-"+this._Services[i];switch(this._Services[i]){case "post":html+=this._addPostButton(cssClass);break;case "pinterest":html+=this._addPinterestButton(cssClass);break;case "facebook":html+=this._addFacebookButton(cssClass);break;
case "twitter":html+=this._addTwitterButton(cssClass);break;case "linkedin":html+="<span class='pw_linkedIn'></span>";linkedInNode=this._addLinkedinButton(cssClass);break;case "googleplus":if(detectIE()!=="IE7")html+=this._addGooglePlusButton(cssClass);break}}if(this._ShowPost)html+=this._addPostButton();container.innerHTML=html;var linkedInSpan=helper.getElementsByClassName("pw_linkedIn",container);if(linkedInSpan.length>0){linkedInSpan=linkedInSpan[0];linkedInSpan.parentNode.insertBefore(linkedInNode,
linkedInSpan);linkedInSpan.parentNode.removeChild(linkedInSpan)}container.setAttribute("id",this._DomNode.getAttribute("id"));this._DomNode.parentNode.insertBefore(container,this._DomNode);helper.containersForRecycling.push(this._DomNode);var userClasses=this._getUserClasses(this._DomNode);this._DomNode=container;this._DomNode.className+=userClasses;for(var i=0;i<this._Services.length;i++)switch(this._Services[i]){case "facebook":this._loadFacebookScript();break;case "twitter":this._loadTwitterScript();
break;case "googleplus":if(detectIE()!=="IE7")this._loadGooglePlusScript();break;case "pinterest":this._loadPinterestScript();break;case "linkedin":this._loadLinkedInScript();break}};raNPBView._addPostButton=function(cssClass){var html="";html+="<span class='[SPANCLASS]'>";var buttonPost='<span class="ra1-pw-originalbuttons ra1-pw-postshare"><a href="" class="ra1-pw-sharealone-brd ra1-pw-sharealone-brd__16"><i class="ra1-pw-icon ra1-pw-icon-post"></i><span class="ra1-pw-sharealone-txt">Share</span></a></span>';
var counterPost='<span class="ra1-pw-counter"><a href="" class="ra1-pw-count"><span>8</span><i class="ra1-pw-count-brd"></i></a></span>';if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){html+=counterPost;html+=buttonPost;cssClass+=" ra1-pw-vertical"}else{html+=buttonPost;html+=counterPost;cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){html+=buttonPost;html+=counterPost;cssClass+=" ra1-pw-post-share"}else{html+=
counterPost;html+=buttonPost;cssClass+=" ra1-pw-counter-vertical"}else{html+=buttonPost;cssClass+=" ra1-pw-without-counter"}html+="</span>";html=html.replace("[SPANCLASS]",cssClass);return html};raNPBView._addGooglePlusButton=function(cssClass){var button='<span class="[SPANCLASS]"><div class="g-plusone" data-annotation="[COUNTER]" data-size="[DATACOUNTER]" data-href="[SHARERURL]"></div></span>';var size="[SIZE]";if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){size=
"tall";cssClass+=" ra1-pw-vertical"}else{size="medium";cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){size="medium";cssClass+=" ra1-pw-googleplus"}else{size="tall";cssClass+=" ra1-pw-counter-vertical"}else{button=button.replace("[COUNTER]","none");size="tall";cssClass+=" ra1-pw-without-counter"}var fullUrl=this._Shorten?this._ShortUrl:this._SharerUrl;button=this._replacePlaceholders(button,size,fullUrl,cssClass);return button};raNPBView._addLinkedinButton=
function(cssClass){var dataCounter=null;if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){dataCounter="top";cssClass+=" ra1-pw-vertical"}else{dataCounter="right";cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){dataCounter="right";cssClass+=" ra1-pw-linkedin"}else{dataCounter="top";cssClass+=" ra1-pw-counter-vertical"}else cssClass+=" ra1-pw-without-counter";var fullUrl=this._Shorten?this._ShortUrl:
this._SharerUrl;var span=document.createElement("span");span.className=cssClass;var scriptLinkedIn=document.createElement("script");scriptLinkedIn.setAttribute("type","IN/Share");scriptLinkedIn.setAttribute("data-url",fullUrl);if(dataCounter!==null)scriptLinkedIn.setAttribute("data-counter",dataCounter);span.appendChild(scriptLinkedIn);return span};raNPBView._addTwitterButton=function(cssClass){var button='<span class="[SPANCLASS]"><a href="https://twitter.com/share" class="twitter-share-button" data-url="[SHARERURL]" data-text="[TITLE]" data-count="[DATACOUNTER]" data-via="[VIA]" data-counturl="[URLFORSEARCH]">Tweet</a></span>';
var dataCounter="none";if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){dataCounter="vertical";cssClass+=" ra1-pw-vertical"}else{dataCounter="horizontal";cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){dataCounter="horizontal";cssClass+=" ra1-pw-twitter"}else{dataCounter="vertical";cssClass+=" ra1-pw-counter-vertical"}else cssClass+=" ra1-pw-without-counter";var fullUrl=this._Shorten?this._ShortUrl:
this._Model.getSharerUrl(this._SharerUrl,"twitter",null,this._Tracking);button=this._replacePlaceholders(button,dataCounter,fullUrl,cssClass,this._Title);button=button.replace("[URLFORSEARCH]",this._SharerUrl);button=button.replace("[VIA]",this._TwitterVia);return button};raNPBView._addPinterestButton=function(cssClass){if(this._PinterestImageURL==null){helper.log("pw:pinterest-image attribute is not found. Widget-ID: "+this._DomNode.getAttribute("id"));return""}var button='<span class="[SPANCLASS]"><a href="http://pinterest.com/pin/create/button/?url=[SHARERURL]&media=[IMG]&description=[TITLE]" class="pin-it-button" count-layout="[DATACOUNTER]"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a></span>';
button=button.replace("[IMG]",encodeURIComponent(this._PinterestImageURL));var dataCounter="";if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){dataCounter="vertical";cssClass+=" ra1-pw-vertical"}else{dataCounter="horizontal";cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){dataCounter="horizontal";cssClass+=" ra1-pw-pinterest"}else{dataCounter="vertical";cssClass+=" ra1-pw-counter-vertical"}else{dataCounter=
"none";cssClass+=" ra1-pw-without-counter"}button=this._replacePlaceholders(button,dataCounter,encodeURIComponent(this._SharerUrl),cssClass,encodeURIComponent(this._Title));return button};raNPBView._addFacebookButton=function(cssClass){var fbRoot=document.getElementById("fb-root");if(!fbRoot){fbRoot=document.createElement("div");fbRoot.setAttribute("id","fb-root");document.body.appendChild(fbRoot)}var button='<span class="[SPANCLASS]"><fb:like href="[SHARERURL]" width="[WIDTH]" send="false" layout="[DATACOUNTER]" show_faces="false"></fb:like></span>';
var dataCounter="";if(this._Counter!==enums.counter.none)if(this._Vertical)if(this._Counter!==enums.counter.horizontal){dataCounter="box_count";cssClass+=" ra1-pw-vertical"}else{dataCounter="button_count";cssClass+=" ra1-pw-vertical ra1-pw-counter-horizontal"}else if(this._Counter==enums.counter.horizontal){dataCounter="button_count";cssClass+=" ra1-pw-facebook";button=button.replace("[WIDTH]","110")}else{dataCounter="box_count";cssClass+=" ra1-pw-counter-vertical"}else{cssClass+=" ra1-pw-without-counter";
button='<span class="[SPANCLASS]"><fb:send href="[SHARERURL]"></fb:send></span>'}var url=this._Shorten?this._ShortUrl:this._SharerUrl;button=this._replacePlaceholders(button,dataCounter,url,cssClass);return button};raNPBView._replacePlaceholders=function(buttonStr,dataCounter,url,cssClass,title){buttonStr=buttonStr.replace("[DATACOUNTER]",dataCounter);buttonStr=buttonStr.replace("[SHARERURL]",url);buttonStr=buttonStr.replace("[SPANCLASS]",cssClass);buttonStr=buttonStr.replace("[TITLE]",title);return buttonStr};
raNPBView.updateConfig=function(widgetId,settings){if(settings.url)this._SharerUrl=settings.url;if(settings.title)this._Title=settings.title;var widgetNode=document.getElementById(widgetId);if(widgetNode){this._updateParametersInNativeButton(widgetNode,settings,"facebook");this._updateParametersInNativeButton(widgetNode,settings,"pinterest");this._updateParametersInNativeButton(widgetNode,settings,"twitter");this._updateParametersInNativeButton(widgetNode,settings,"googleplus");this._updateParametersInLinkedInNativeButton(widgetNode,
settings)}};raNPBView._updateParametersInLinkedInNativeButton=function(widgetNode,settings){if(settings.url){var buttonIsNotRendered=false;var linkedInNodes=helper.getElementsByClassName("ra1-pw-native-linkedin");if(linkedInNodes.length>0){for(var i=0;i<linkedInNodes.length;i++){var nativeButtonsLinkedIn=helper.getElementsByClassName("IN-widget",linkedInNodes[i]);if(nativeButtonsLinkedIn[0]&&nativeButtonsLinkedIn[0].innerHTML!==""){for(var j=0;j<nativeButtonsLinkedIn.length;j++)nativeButtonsLinkedIn[j].style.display=
"none";helper.containersForRecycling.push(nativeButtonsLinkedIn[0]);setTimeout(function(){helper.clearContainersForInit()},5E3);var boxForInit=linkedInNodes[i].getElementsByTagName("script")[0];boxForInit.removeAttribute("type");boxForInit.setAttribute("data-url",settings.url);boxForInit.setAttribute("type","IN/Share");IN.parse()}else{buttonIsNotRendered=true;break}}if(buttonIsNotRendered){var self=this;setTimeout(function(){self._updateParametersInLinkedInNativeButton(widgetNode,settings)},10)}}}};
raNPBView._updateParametersInNativeButton=function(widgetNode,settings,buttonType){var className="ra1-pw-native-"+buttonType;var nativeButtonNodes=helper.getElementsByClassName(className,widgetNode);var buttonIsNotRendered=false;for(var i=0;i<nativeButtonNodes.length;i++){var iframeNode=nativeButtonNodes[i].getElementsByTagName("iframe")[0];if(iframeNode){var url=iframeNode.src;switch(buttonType){case "facebook":url=this._replaceParameterValueInUrl(url,"href",settings.url);break;case "pinterest":url=
this._replaceParameterValueInUrl(url,"media",settings.image);url=this._replaceParameterValueInUrl(url,"url",settings.url);url=this._replaceParameterValueInUrl(url,"description",settings.title);break;case "googleplus":url=this._replaceParameterValueInUrl(url,"url",settings.url);break;case "twitter":var twitterHtmlForInit=this._addTwitterButton("").replace('<span class=" ra1-pw-twitter">',"").replace("</span>","");nativeButtonNodes[i].innerHTML=twitterHtmlForInit;twttr.widgets.load();return}this._iframeRenderAgain(iframeNode,
url)}else{buttonIsNotRendered=true;break}}if(buttonIsNotRendered){var self=this;setTimeout(function(){self._updateParametersInNativeButton(widgetNode,settings,buttonType)},10)}};raNPBView._replaceParameterValueInUrl=function(url,paramenter,newValue){if(newValue!==undefined){var currentValue=url.split(paramenter+"=")[1].split("&")[0];var result=url.replace(currentValue,encodeURIComponent(newValue));return result}return url};raNPBView._iframeRenderAgain=function(iframe,url){iframe.src=url};raNPBView._bindEvents=
function(){var nodes=helper.getElementsByClassName("ra1-pw-postshare",this._DomNode);if(nodes.length>0){this._PostNode=nodes[0];helper.domEvent.add(this._PostNode,"mouseover",this._onMouseOver,this);helper.domEvent.add(this._PostNode,"mouseout",this._onMouseOut,this);helper.domEvent.add(this._PostNode,"click",this._onMouseClick,this)}nodes=helper.getElementsByClassName("ra1-pw-counter",this._DomNode);if(nodes.length>0){this._CounterNode=nodes[0];helper.domEvent.add(this._CounterNode,"click",this._onMouseClick,
this)}};raNPBView._correctServicesList=function(){var result=this._analizeOfContainer(this._DomNode);if(result){this._Services=result.services;if(result.image)this._PinterestImageURL=result.image}if(this._Services)for(var i=0;i<this._Services.length;i++){if(this._Services[i].search(new RegExp("-like?|-share?|twitter-twitt?|-plus?"))==-1)if(this._Services[i].search(new RegExp("_button"))==-1)this._Services[i]="";this._Services[i]=this._Services[i].replace("_button","");this._Services[i]=this._Services[i].replace("-like",
"");this._Services[i]=this._Services[i].replace("-twitt","");this._Services[i]=this._Services[i].replace("-plus","");this._Services[i]=this._Services[i].replace("-share","");this._Services[i]=this._Services[i].replace("button-","");if(this._Services[i]=="google")this._Services[i]="googleplus";if(this._Services[i]=="post")this._ShowPost=false}else this._Services=this._Model.NativePartyButtons};raNPBView._loadPinterestScript=function(){helper.loadScript("//assets.pinterest.com/js/pinit.js?")};raNPBView._loadFacebookScript=
function(){if(window.FB)FB.init({status:true,cookie:true,xfbml:true});else{window.fbAsyncInit=function(){FB.init({status:true,cookie:true,xfbml:true})};helper.loadScript("//connect.facebook.net/en_US/all.js#xfbml=1")}};raNPBView._loadTwitterScript=function(){function initTwitter(){if(twttr.widgets)twttr.widgets.load();else setTimeout(initTwitter,1)}if(window.twttr)initTwitter();else helper.loadScript("//platform.twitter.com/widgets.js")};raNPBView._loadGooglePlusScript=function(){if(window.gapi)gapi.plusone.go();
else helper.loadScript("https://apis.google.com/js/plusone.js")};raNPBView._loadLinkedInScript=function(){if(window.IN)IN.init();else helper.loadScript("http://platform.linkedin.com/in.js")};raNPBView.updateCounter=function(value){if(this._Counter!==enums.counter.none){var nodes=helper.getElementsByClassName("ra1-pw-counter",this._DomNode);if(nodes.length>0){var counterContainer=nodes[0];nodes=counterContainer.getElementsByTagName("span");if(nodes.length>0){var counterNode=nodes[0];counterNode.innerHTML=
value}}}};raNPBView._onMouseOver=function(sender,args){var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._PostNode);if(helper.stopEventBubble(nodes,args))this.PostOver.fire(this,args);return false};raNPBView._onMouseOut=function(sender,args){var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._PostNode);if(helper.stopEventBubble(nodes,args))this.PostOut.fire(this,args);return false};raNPBView._onMouseClick=function(sender,args){return false};rapost.ArbitraryView=
function(settings){settings=settings||{};this._DomNode=settings.domNode;this.Click=new rapost.Delegate;this.MouseOver=new rapost.Delegate;this.MouseOut=new rapost.Delegate;rapost.ArbitraryView.base.constructor.apply(this,arguments)};helper.initClass(rapost.ArbitraryView,rapost.PostWidgetView);var raArbView=rapost.ArbitraryView.prototype;raArbView._render=function(){};raArbView._bindEvents=function(){this._SizeItem={X:this._DomNode.offsetWidth,Y:this._DomNode.offsetHeight};helper.domEvent.add(this._DomNode,
"click",this._onClick,this);helper.domEvent.add(this._DomNode,"mouseover",this._onMouseOver,this);helper.domEvent.add(this._DomNode,"mouseout",this._onMouseOut,this)};raArbView._onClick=function(sender,args){this.Click.fire(this,args);return false};raArbView._onMouseOver=function(sender,args){this.MouseOver.fire(this,args)};raArbView._onMouseOut=function(sender,args){this.MouseOut.fire(this,args)};rapost.AloneBoxView=function(settings){settings=settings||{};settings.config=settings.config||{};this._isButtonCorrect=
true;this._isAloneBox=settings.config.isAloneBox!==undefined?settings.config.isAloneBox!==undefined:false;this._DomNode=settings.childNode||settings.domNode;this._ButtonNode=null;this._CounterNode=null;this._IsHtmlInit=settings.config.isHtmlInit||false;this._LookNative=settings.config.lookNative||false;this._CounterForLookNative=settings.config.counterForLookNative||null;if(!helper.isArray(settings.config.buttons)){var button=settings.config.buttons;settings.config.buttons=[];settings.config.buttons.push(button)}else if(!helper.isArray(settings.config.button)){settings.config.buttons=
[];settings.config.buttons.push(settings.config.button)}else{settings.config.buttons=[];settings.config.buttons.push("post-share")}this._SizeItem=settings.config.size;this._Counter=settings.config.counter||null;this._PinterestImageURL=null;this._PostShareTransparent=false;this._TwitterVia=null;this.Click=new rapost.Delegate;this.PostOver=new rapost.Delegate;this.PostOut=new rapost.Delegate;rapost.AloneBoxView.base.constructor.apply(this,arguments)};helper.initClass(rapost.AloneBoxView,rapost.PostWidgetView);
var raAloneView=rapost.AloneBoxView.prototype;raAloneView._render=function(){this._RenderSuccsess=false;if(this._IsHtmlInit)this._analizeOfContainer(this._DomNode);var meta=this.getMetadataByName(this._Service);if(meta){var container=document.createElement("span");container.className="ra1-pw-alone-button";container.className+=" ra1-pw-button-"+this._SizeItem.text;var buttonNode=null;if(meta.name=="post-share"){buttonNode=this._createLookNativeButton(container,"post");this._LookNative=true}else if(meta.name==
"facebook"&&this._LookNative)buttonNode=this._createLookNativeButton(container,"facebook");else if(meta.name=="googleplus"&&this._LookNative)buttonNode=this._createLookNativeButton(container,"googleplus");else if(meta.name=="twitter"&&this._LookNative)buttonNode=this._createLookNativeButton(container,"twitter");else if(meta.name=="linkedin"&&this._LookNative)buttonNode=this._createLookNativeButton(container,"linkedin");else if(meta.name=="pinterest"&&this._LookNative)buttonNode=this._createLookNativeButton(container,
"pinterest");else{if(this._Counter==null)this._Counter=enums.counter.none;this._LookNative=false;var buttonNode=document.createElement("a");buttonNode.href="#";buttonNode.className="ra1-pw-icon ra1-pw-icon-"+meta.name}if(this._Counter==enums.counter.vertical){if(!this._LookNative)container.style.minWidth=this._SizeItem.X+"px";container.className+=" ra1-pw-counter-vertical"}else if(this._Counter==enums.counter.horizontal)container.className+=" ra1-pw-counter-horizontal";var counterNode=null;if(this._Counter!==
enums.counter.none||this._CounterForLookNative!==enums.counter.none){counterNode=document.createElement("a");counterNode.className="ra1-pw-count";counterNode.href="#";counterNode.innerHTML='<span>8</span><i class="ra1-pw-count-brd"></i>'}var id=this._DomNode.getAttribute("id");if(id)container.setAttribute("id",id);container.appendChild(buttonNode);this._DomNode.parentNode.insertBefore(container,this._DomNode);helper.containersForRecycling.push(this._DomNode);var userClasses=this._getUserClasses(this._DomNode);
this._DomNode=container;this._DomNode.className+=userClasses;if(counterNode)if(!this._LookNative)if(this._Counter==enums.counter.horizontal)helper.insertAfter(buttonNode,counterNode);else{if(this._Counter==enums.counter.vertical)buttonNode.parentNode.insertBefore(counterNode,buttonNode)}else if(this._CounterForLookNative==enums.counter.horizontal)helper.insertAfter(buttonNode,counterNode);else if(this._CounterForLookNative==enums.counter.vertical)buttonNode.parentNode.insertBefore(counterNode,buttonNode);
if(meta.name=="pinterest")this._pinterestIsCorrect(buttonNode,counterNode);this._ButtonNode=buttonNode;this._CounterNode=counterNode;this._RenderSuccsess=true}};raAloneView._pinterestIsCorrect=function(buttonNode,counterNode){if(this._PinterestImageURL==null){helper.log("pw:pinterest-image attribute is not found");if(buttonNode)buttonNode.style.display="none";if(counterNode)counterNode.style.display="none";this._isButtonCorrect=false}};raAloneView._createLookNativeButton=function(container,buttonName){if(this._CounterForLookNative==
null)if(this._Counter==null)this._CounterForLookNative=enums.counter.horizontal;else this._CounterForLookNative=this._Counter;var buttonNode=document.createElement("span");buttonNode.className="ra1-pw-originalbuttons";var shareHtml="";if(buttonName=="post"){container.className+=" pw-widget-postshare-"+this._SizeItem.X;buttonNode.className+=" ra1-pw-postshare";shareHtml+='<a class="ra1-pw-sharealone-brd ra1-pw-sharealone-brd__'+this._SizeItem.X}else{container.className+=" pw-widget-ln-"+buttonName+
"-"+this._SizeItem.X;buttonNode.className+=" ra1-pw-button-"+buttonName;shareHtml+='<a class="ra1-pw-ln-'+buttonName}buttonNode.style.cursor="pointer";if(this._PostShareTransparent)shareHtml+=" ra1-pw-post-share-transparent";shareHtml+='"><i class="ra1-pw-icon ra1-pw-icon-'+buttonName+'"></i> <span class="ra1-pw-sharealone-txt">[SHARE]</span></a>';shareHtml=this._replaceShareLabel(shareHtml,buttonName);buttonNode.innerHTML=shareHtml;return buttonNode};raAloneView._replaceShareLabel=function(html,
buttonName){switch(buttonName){case "twitter":html=html.replace("[SHARE]","Tweet");break;case "pinterest":html=html.replace("[SHARE]","Pin It");break;case "googleplus":html=html.replace("[SHARE]","+1");break;default:html=html.replace("[SHARE]","Share")}return html};raAloneView._bindEvents=function(){helper.domEvent.add(this._ButtonNode,"click",this._onClick,this);helper.domEvent.add(this._ButtonNode,"mouseover",this._onMouseOver,this);helper.domEvent.add(this._ButtonNode,"mouseout",this._onMouseOut,
this)};raAloneView.updateCounter=function(value){if(this._CounterNode){var counterNode=this._CounterNode.getElementsByTagName("span")[0];counterNode.innerHTML=value}};raAloneView.isPostItem=function(className){var classList=className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i]==="ra1-pw-postshare"||classList[i]==="ra1-pw-icon-post")return true;return false};raAloneView._analizeOfContainer=function(container){if(!this._SizeItem)this._SizeItem=helper.getSizeItem(container.getAttribute("pw:size"));
var classList=container.className.split(" ");for(var i=0;i<classList.length;i++){if(classList[i].search(new RegExp("pw-size-"))!==-1)if(!this._SizeItem){var value=classList[i].replace("pw-size-","");this._SizeItem=helper.getSizeItem(value)}if(classList[i].search(new RegExp("pw-button-post-share-transparent"))!==-1||classList[i].search(new RegExp("pw_share_transparent"))!==-1)this._PostShareTransparent=true;if(classList[i].search("pw-look-native")!==-1)this._LookNative=true;if(classList[i].search("pw-button-")!==
-1)this._Service=classList[i].replace("pw-button-","")}var image=container.getAttribute("pw:image");if(!image)image=container.getAttribute("pw:pinterest-image");if(image)this._PinterestImageURL=image};raAloneView._onClick=function(sender,args){var classList=sender.className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i].search(new RegExp("ra1-pw-icon-"))!==-1){this.Click.fire(this,{service:classList[i].split("ra1-pw-icon-")[1],args:args,pinterestUrl:this._PinterestImageURL});return false}var buttonName=
this._getButtonName(sender);if(buttonName!==null&&buttonName!=="post")this.Click.fire(this,{service:buttonName,args:args,pinterestUrl:this._PinterestImageURL});return false};raAloneView._onMouseOver=function(sender,args){var anchor=null;var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._DomNode);if(nodes.length>0)anchor=nodes[0];var e=args.toElement||args.target;if(e.parentNode==anchor)return false;if(this.isPostItem(sender.className))this.PostOver.fire(this,args);return false};
raAloneView._onMouseOut=function(sender,args){var anchor=null;var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._DomNode);if(nodes.length>0)anchor=nodes[0];var e=args.toElement||args.target;if(e.parentNode==anchor)return false;if(this.isPostItem(sender.className))this.PostOut.fire(this,args);return false};raAloneView._getButtonName=function(node){var classList=node.className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i].search("ra1-pw-button-")!==-1){var buttonName=
classList[i].replace("ra1-pw-button-","");return buttonName}return null};rapost.ToolBoxesView=function(settings){settings=settings||{};this._DomNode=settings.domNode;this._Counter=settings.config.counter;this._SizeItem=settings.config.size;this._Vertical=settings.config.vertical;this._Services=settings.config.buttons;this._ShowPost=settings.config.showPost;this._CounterNode=null;this._GooglePlusShown=false;this._ShowPostShare=false;this._PostNode=null;this.Click=new rapost.Delegate;this.PostOver=
new rapost.Delegate;this.PostOut=new rapost.Delegate;rapost.ToolBoxesView.base.constructor.apply(this,arguments)};helper.initClass(rapost.ToolBoxesView,rapost.PostWidgetView);var raTBV=rapost.ToolBoxesView.prototype;raTBV._render=function(){this._analizeOfContainer(this._DomNode);var html="";var container=document.createElement("div");container.className+="ra1-pw ra1-pw-classicWidget";for(var i=0;i<this._Services.length;i++){var meta=this.getMetadataByName(this._Services[i]);if(meta){if(meta.name==
"pinterest")if(this._PinterestImageURL==null){helper.log("pw:image attribute is not found. Widget-ID: "+this._DomNode.getAttribute("id"));continue}if(meta.name=="share"||meta.name=="post-share"){var shareButton=document.createElement("span");shareButton.className="ra1-pw-postshare";shareButton.style.zIndex=1E4;var htmlShareButton='<a href="" class="ra1-pw-sharealone-brd ra1-pw-sharealone-brd__'+this._SizeItem.X+'"><i class="ra1-pw-icon ra1-pw-icon-post"></i> <span class="ra1-pw-sharealone-txt">Share</span></a>';
shareButton.innerHTML=htmlShareButton;container.className+=" pw-widget-postshare-"+this._SizeItem.X;container.appendChild(shareButton);this._ShowPost=false;this._ShowPostShare=true;continue}if(meta.name=="googleplus")this._GooglePlusShown=true;var buttonNode=document.createElement("a");buttonNode.href="#";buttonNode.className="ra1-pw-icon ra1-pw-icon-"+meta.name;container.appendChild(buttonNode)}}if(this._ShowPost){var buttonNode=document.createElement("a");buttonNode.href="#";buttonNode.className=
"ra1-pw-icon ra1-pw-icon-post";container.appendChild(buttonNode)}if(this._Counter!==enums.counter.none){var counterNode=document.createElement("a");counterNode.href="#";counterNode.className="ra1-pw-count";counterNode.innerHTML='<span>0</span><i class="ra1-pw-count-brd"></i>';container.appendChild(counterNode);this._CounterNode=counterNode}container.className+=" ra1-pw_size_"+this._SizeItem.text;if(this._Vertical)container.className+=" ra1-pw-vertical";container.setAttribute("id",this._DomNode.getAttribute("id"));
this._DomNode.parentNode.insertBefore(container,this._DomNode);helper.containersForRecycling.push(this._DomNode);var userClasses=this._getUserClasses(this._DomNode);this._DomNode=container;this._DomNode.className+=userClasses;this._setWidth()};raTBV._setWidth=function(){if(this._Vertical)if(this._GooglePlusShown)switch(this._SizeItem){case enums.sizeItem.small:this._DomNode.style.width="24px";break;case enums.sizeItem.medium:case enums.sizeItem.large:this._DomNode.style.width="32px";break}else this._DomNode.style.width=
this._SizeItem.X+"px"};raTBV._bindEvents=function(){helper.domEvent.add(this._DomNode,"click",this._onClick,this);if(this._ShowPostShare){var nodes=helper.getElementsByClassName("ra1-pw-postshare",this._DomNode);if(nodes.length>0){this._PostNode=nodes[0];helper.domEvent.add(this._PostNode,"mouseover",this._onPostShareMouseOver,this);helper.domEvent.add(this._PostNode,"mouseout",this._onPostShareMouseOut,this)}}else{helper.domEvent.add(this._DomNode,"mouseover",this._onMouseOver,this);helper.domEvent.add(this._DomNode,
"mouseout",this._onMouseOut,this)}};raTBV._analizeOfContainer=function(domNode){var result=rapost.ToolBoxesView.base._analizeOfContainer.call(this,domNode);if(result!==null){this._Services=result.services?result.services:this._Services;for(var i=0;i<this._Services.length;i++)if(this._Services[i]=="post"){this._ShowPost=false;break}if(result.image)this._PinterestImageURL=result.image}};raTBV.updateCounter=function(value){if(this._CounterNode){var counterNode=this._CounterNode.getElementsByTagName("span")[0];
counterNode.innerHTML=value}};raTBV.isPostItem=function(className){var classList=className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i]==="ra1-pw-icon-post")return true;return false};raTBV._onClick=function(sender,args){var classList=args.target.className.split(" ");for(var i=0;i<classList.length;i++)if(classList[i].search(new RegExp("ra1-pw-icon-"))!==-1)this.Click.fire(this,{service:classList[i].split("ra1-pw-icon-")[1],pinterestUrl:this._PinterestImageURL,args:args});return false};
raTBV._onMouseOver=function(sender,args){if(this.isPostItem(args.target.className))this.PostOver.fire(this,args)};raTBV._onMouseOut=function(sender,args){if(this.isPostItem(args.target.className))this.PostOut.fire(this,args)};raTBV._onPostShareMouseOver=function(sender,args){var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",this._PostNode);if(helper.stopEventBubble(nodes,args))this.PostOver.fire(this,args);return false};raTBV._onPostShareMouseOut=function(sender,args){var nodes=helper.getElementsByClassName("ra1-pw-sharealone-brd",
this._PostNode);if(helper.stopEventBubble(nodes,args))this.PostOut.fire(this,args);return false};rapost.RelikeBoxView=function(settings){settings=settings||{};this._Settings=settings;this._DomNode=settings.domNode;this._PinterestImageUrl=window.pwidget_config.defaults.image?window.pwidget_config.defaults.image:"";this.Click=new rapost.Delegate;rapost.RelikeBoxView.base.constructor.apply(this,arguments)};helper.initClass(rapost.RelikeBoxView,rapost.PostWidgetView);var raRBView=rapost.RelikeBoxView.prototype;
raRBView._render=function(){var content='<ul class="ra1-pw-relike">';for(var i=0;i<this._Model.Metadata.length;i++)if(this._Model.Metadata[i].openedPopUpShow===undefined||this._Model.Metadata[i].openedPopUpShow){switch(this._Model.Metadata[i].name){case "print":case "favorites":continue;case "wordpress":case "blogger":if(this._Settings.config.title=="")continue;break;case "pinterest":if(this._PinterestImageUrl=="")continue;break}content+='<li><a href="#" class="ra1-pw-icon ra1-pw-icon-'+this._Model.Metadata[i].name+
' ra1-pw_size_small"></a><span style="cursor: pointer" class="ra1-pw-txt-'+this._Model.Metadata[i].name+'">'+this._Model.Metadata[i].displayName+"</span></li>"}content+="</ul>";this._DomNode.innerHTML=content};raRBView._bindEvents=function(){helper.domEvent.add(this._DomNode,"click",this._onClick,this)};raRBView._onClick=function(sender,args){var classList=args.target.className.split(" ");for(var i=0;i<classList.length;i++){if(classList[i].search(new RegExp("ra1-pw-icon-"))!==-1){this.Click.fire(this,
{service:classList[i].split("ra1-pw-icon-")[1],pinterestUrl:this._PinterestImageUrl});break}if(classList[i].search(new RegExp("ra1-pw-txt"))!==-1){this.Click.fire(this,{service:classList[i].split("ra1-pw-txt-")[1],pinterestUrl:this._PinterestImageUrl});break}}return false};rapost.ClassicPopUpSuccessView=function(settings){if(!rapost._CPUSVInstance)rapost._CPUSVInstance=new rapost.ClassicPopUpSuccess(settings);return rapost._CPUSVInstance};rapost.ClassicPopUpSuccess=function(settings){this._DomNode=
null;this._Location={top:0,left:0};this._Width=320;this._StartHeight=126;this.ClickShareAgain=new rapost.Delegate;this.Closed=new rapost.Delegate;rapost.ClassicPopUpSuccess.base.constructor.apply(this,arguments)};helper.initClass(rapost.ClassicPopUpSuccess,rapost.PostWidgetView);var raCPUSView=rapost.ClassicPopUpSuccess.prototype;raCPUSView._render=function(){this._DomNode=document.createElement("div");this._DomNode.className="ra1-pw-popup";if(detectIE()=="IE7")this._DomNode.style.width=this._Width+
"px";this._DomNode.style.minWidth=this._Width+"px";this._DomNode.style.position="absolute";this._DomNode.style.left="-9999px";this._DomNode.style.top="-9999px";var html='<div class="ra1-pw-popup-i"><span class="ra1-pw-popup-close"></span><h2 class="ra1-pw-popup-title">Sharing Successful!</h2>'+'<div class="ra1-pw-share-success"><div class="ra1-pw-share-txt"><a href="" class="ra1-pw-small-btn"><span><span class="ra1-pw-share-again">Share again!</span></span></a>'+'<p>You\'ve successfully shared using Po.st! </p></div><div class="ra1-pw-share-offer">Welcome to po.st!</div>'+
'</div><div class="ra1-pw-popup-footer"><a href="'+this._Model.PoStLink+'" class="ra1-pw-powered">Powered by Po.st</a><a href="'+this._Model.PrivacyPolicyLink+'" class="ra1-pw-privacy">Privacy</a></div></div>';this._DomNode.innerHTML=html;document.body.appendChild(this._DomNode)};raCPUSView.updateShareContent=function(data){data=data.replace("[R1_FLASH]",helper.isFlashPlayerInstalled()?"f":"");var nodeShareOffer=helper.getElementsByClassName("ra1-pw-share-offer",this._DomNode);if(nodeShareOffer.length>
0)nodeShareOffer=nodeShareOffer[0];else return;nodeShareOffer.innerHTML=data;var scripts=nodeShareOffer.getElementsByTagName("script");var script;for(var i=0;script=scripts[i];i++)eval(script.innerHTML)};raCPUSView.show=function(data){if(this._DomNode.offsetHeight>this._StartHeight){var position={browserHeight:helper.getClientOffset().Height+helper.getScrollPosition().Y,browserWidth:helper.getClientOffset().Width+helper.getScrollPosition().X,popUpHeight:this._DomNode.offsetHeight,popUpWidth:this._DomNode.offsetWidth};
var coord={X:data.left,Y:data.top};if(position.popUpHeight<position.browserHeight&&position.popUpHeight+data.top>position.browserHeight)coord.Y=position.browserHeight-position.popUpHeight;if(position.popUpWidth<position.browserWidth&&position.popUpWidth+data.left>position.browserWidth)coord.X=position.browserWidth-position.popUpWidth;rapost.ClassicPopUpSuccess.base.show.call(this);this._DomNode.style.position="absolute";this._DomNode.style.left=coord.X+"px";this._DomNode.style.top=coord.Y+"px";this._Location.left=
data.left;this._Location.top=data.top}else{var self=this;setTimeout(function(){self.show(data)},1E3)}};raCPUSView.hide=function(){this._DomNode.style.left="-9999px";this._DomNode.style.top="-9999px";this.Closed.fire(this,{})};raCPUSView._bindEvents=function(){helper.domEvent.add(this._DomNode,"click",this._onClick,this)};raCPUSView._onClick=function(sender,args){if(helper.isContainClassName(args.target,"ra1-pw-share-again")){this.hide();this.ClickShareAgain.fire(this,{});return false}if(helper.isContainClassName(args.target,
"ra1-pw-popup-close")){this.hide();return false}if(helper.isContainClassName(args.target,"ra1-pw-powered")||helper.isContainClassName(args.target,"ra1-pw-privacy"))if(window.open(args.target.href)==null)return true;return true};rapost.ClassicPopUpView=function(settings){if(!rapost._ClassicPopUpInstance)rapost._ClassicPopUpInstance=new rapost.ClassicPopUp(settings);return rapost._ClassicPopUpInstance};rapost.ClassicPopUp=function(settings){this._SizeItem=enums.sizeItem.small;this._Location={left:0,
right:0};this._Width=280;this._TimeOutId=null;this._TimeOut=1500;this._TwitterVia=settings.twitterVia;this._ReserveItemNode=null;this.Click=new rapost.Delegate;this.Closed=new rapost.Delegate;rapost.ClassicPopUp.base.constructor.apply(this,arguments);this.hide()};helper.initClass(rapost.ClassicPopUp,rapost.PostWidgetView);var raClassicPopUp=rapost.ClassicPopUp.prototype;raClassicPopUp._render=function(){var content='<div class="ra1-pw-popup-i"><span class="ra1-pw-popup-close"></span><h2 class="ra1-pw-popup-title">Share with friends:</h2><div class="ra1-pw-popup-area"><ul class="ra1-pw-popup__ul ra1-pw_size_small">';
for(var i=0;i<this._Model.Metadata.length;i++){var systemMeta=this._Model.Metadata[i];if(systemMeta.classicPopUp!==undefined||systemMeta.classicPopUp)content+='<li><a href=""><i class="ra1-pw-icon ra1-pw-icon-'+systemMeta.name+'"></i> <span class="ra1-pw-txt ra1-pw-txt-'+systemMeta.name+'">'+systemMeta.displayName+"</span></a></li>"}content+="</ul></div>";content+='<div class="ra1-pw-popup-footer"><a href="'+this._Model.PoStLink+'" class="ra1-pw-powered">Powered by Po.st</a><a href="'+this._Model.PrivacyPolicyLink+
'" class="ra1-pw-privacy">Privacy</a></div></div>';this._DomNode=document.createElement("div");this._DomNode.style.width=this._Width+"px";this._DomNode.className="ra1-pw-popup";this._DomNode.style.textAlign="left";this._DomNode.innerHTML=content;document.body.appendChild(this._DomNode)};raClassicPopUp._bindEvents=function(){helper.domEvent.add(this._DomNode,"click",this._onClick,this);helper.domEvent.add(this._DomNode,"mouseover",this._onMouseOver,this);helper.domEvent.add(this._DomNode,"mouseout",
this._onMouseOut,this)};raClassicPopUp.show=function(settings){var x=settings.x||0;var y=settings.y||0;var sizeItem=settings.sizeItem;rapost.ClassicPopUp.base.show.call(this);this._DomNode.style.position="absolute";var position={browserHeight:helper.getClientOffset().Height+helper.getScrollPosition().Y,browserWidth:helper.getClientOffset().Width+helper.getScrollPosition().X,popUpHeight:this._DomNode.offsetHeight,popUpWidth:this._DomNode.offsetWidth};this._DomNode.style.top=y+"px";this._DomNode.style.left=
x+"px";if(y+position.popUpHeight>position.browserHeight&&position.popUpHeight<position.browserHeight)this._DomNode.style.top=y-position.popUpHeight-sizeItem.Y+"px";if(x+position.popUpWidth>position.browserWidth&&position.popUpWidth<position.browserWidth)this._DomNode.style.left=x-position.popUpWidth+sizeItem.X+"px";this._Location.left=parseInt(this._DomNode.style.left);this._Location.top=parseInt(this._DomNode.style.top);this._verifyPinterest(settings.image);if(!settings.image)this._replacePinterest();
else helper.hideNode(this._ReserveItemNode)};raClassicPopUp._replacePinterest=function(){if(!this._ReserveItemNode){var liPinterest=this._getPinterestNode();helper.hideNode(liPinterest);var reserveMeta=this._getReserveSystem();this._ReserveItemNode=document.createElement("li");this._ReserveItemNode.innerHTML='<a href=""><i class="ra1-pw-icon ra1-pw-icon-'+reserveMeta.name+'"></i> <span class="ra1-pw-txt ra1-pw-txt-'+reserveMeta.name+'">'+reserveMeta.displayName+"</span></a>";helper.insertAfter(liPinterest,
this._ReserveItemNode)}else helper.showNode(this._ReserveItemNode)};raClassicPopUp._getReserveSystem=function(){for(var i=0;i<this._Model.Metadata.length;i++){var meta=this._Model.Metadata[i];if(!meta.classicPopUp)return meta}return this._Model.Metadata[0]};raClassicPopUp.hide=function(){this._clearTimeOut();rapost.ClassicPopUp.base.hide.call(this);this.Closed.fire(this,{})};raClassicPopUp.hideWithTimeOut=function(){this._clearTimeOut();var self=this;this._TimeOutId=setTimeout(function(){self.hide()},
self._TimeOut)};raClassicPopUp._clearTimeOut=function(){if(this._TimeOutId){clearTimeout(this._TimeOutId);this._TimeOutId=null}};raClassicPopUp._onClick=function(sender,args){this._clearTimeOut();if(helper.isContainClassName(args.target,"ra1-pw-popup-close"))this.hide();var classList=args.target.className.split(" ");for(var i=0;i<classList.length;i++){if(classList[i].search(new RegExp("ra1-pw-icon-"))!==-1){this.Click.fire(this,{service:classList[i].split("ra1-pw-icon-")[1],pinterestUrl:this._PinterestImageUrl});
return false}if(classList[i].search(new RegExp("ra1-pw-txt-"))!==-1){this.Click.fire(this,{service:classList[i].split("ra1-pw-txt-")[1],pinterestUrl:this._PinterestImageUrl});return false}if(classList[i].search(new RegExp("ra1-pw-powered"))!==-1||classList[i].search(new RegExp("ra1-pw-privacy"))!==-1){if(window.open(args.target.href)==null)return true;return false}}return false};raClassicPopUp._onMouseOver=function(sender,args){this._clearTimeOut()};raClassicPopUp._onMouseOut=function(sender,args){this._clearTimeOut();
var self=this;this._TimeOutId=setTimeout(function(){self.hide()},self._TimeOut)};rapost.ClassicPopUpOpenedView=function(settings){if(!rapost.ClassicPopUpOpenedInstance)rapost.ClassicPopUpOpenedInstance=new rapost.ClassicPopUpOpened(settings);return rapost.ClassicPopUpOpenedInstance};rapost.ClassicPopUpOpened=function(settings){settings=settings||{};rapost.ClassicPopUpOpened.base.constructor.apply(this,arguments)};helper.initClass(rapost.ClassicPopUpOpened,rapost.ClassicPopUp);var raCPUOpened=rapost.ClassicPopUpOpened.prototype;
raCPUOpened._render=function(){var html='<div class="ra1-pw-popup-i"><span class="ra1-pw-popup-close"></span><h2 class="ra1-pw-popup-title">Share with friends:</h2><div class="ra1-pw-popup-area"><ul class="ra1-pw-popup__ul ra1-pw_size_small">';for(var i=0;i<this._Model.Metadata.length;i++){var meta=this._Model.Metadata[i];if(meta.openedPopUpShow===undefined||meta.openedPopUpShow)html+='<li><a href=""><i class="ra1-pw-icon ra1-pw-icon-'+meta.name+'"></i> <span class="ra1-pw-txt ra1-pw-txt-'+meta.name+
'">'+meta.displayName+"</span></a></li>"}html+="</ul></div>";html+='<div class="ra1-pw-popup-footer"><a href="'+this._Model.PoStLink+'" class="ra1-pw-powered">Powered by Po.st</a><a href="'+this._Model.PrivacyPolicyLink+'" class="ra1-pw-privacy">Privacy</a></div></div>';this._DomNode=document.createElement("div");this._DomNode.className="ra1-pw-popup ra1-pw-popup-area-scroll";this._DomNode.style.position="fixed";this._DomNode.style.textAlign="left";this._DomNode.innerHTML=html;document.body.appendChild(this._DomNode)};
raCPUOpened._bindEvents=function(){helper.domEvent.add(this._DomNode,"click",this._onClick,this)};raCPUOpened.show=function(settings){helper.domEvent.add(window,"resize",this._onWindowResize,this);this._DomNode.style.display="block";var size=helper.getClientOffset();var centerX=size.Width/2;var centerY=size.Height/2;this._DomNode.style.left=centerX-this._DomNode.offsetWidth/2+"px";this._DomNode.style.top=centerY-this._DomNode.offsetHeight/2+"px";this._verifyPinterest(settings.image)};raCPUOpened.hide=
function(){this._DomNode.style.display="none";helper.domEvent.remove(window,"resize",this._onWindowResize,this);this.Closed.fire(this,{})};raCPUOpened._onWindowResize=function(sender,args){this.show()};rapost.EmailFrameView=function(settings){if(!rapost._EmailFrameInstance)rapost._EmailFrameInstance=new rapost.EmailFrame(settings);return rapost._EmailFrameInstance};rapost.EmailFrame=function(settings){this._DomNode=null;this._IframeNode=null;this._CloseButtonNode=null;this._CloseButtonSize={width:54,
height:30};this._UrlForRequest="#";this._DomNode=null;this._Width=495;this._Height=425;rapost.EmailFrame.base.constructor.apply(this,arguments)};helper.initClass(rapost.EmailFrame,rapost.PostWidgetView);var raEmailFrameView=rapost.EmailFrame.prototype;raEmailFrameView._render=function(){this._DomNode=document.createElement("div");this._DomNode.style.width="100%";this._DomNode.style.height="100%";this._DomNode.style.backgroundColor="black";this._DomNode.style.zIndex=1E4;this._DomNode.style.position=
"fixed";this._DomNode.style.left="0px";this._DomNode.style.top="0px";this._DomNode.style.opacity="0.8";this._DomNode.style.filter="alpha(opacity = 80)";document.body.appendChild(this._DomNode);this._CloseButtonNode=document.createElement("div");this._CloseButtonNode.style.width=this._CloseButtonSize.width+"px";this._CloseButtonNode.style.height=this._CloseButtonSize.height+"px";this._CloseButtonNode.style.zIndex=10002;this._CloseButtonNode.style.cursor="pointer";this._CloseButtonNode.style.position=
"fixed";this._CloseButtonNode.style.left="0px";this._CloseButtonNode.style.top="0px";document.body.appendChild(this._CloseButtonNode)};raEmailFrameView._bindEvents=function(){helper.domEvent.add(this._CloseButtonNode,"click",this._onClick,this)};raEmailFrameView.show=function(data){helper.domEvent.add(window,"resize",this._onWindowResize,this);this._DomNode.style.display="block";this._CloseButtonNode.style.display="block";this._IframeNode=document.createElement("iframe");this._IframeNode.src=data.emailUrl;
this._IframeNode.style.border="0px";this._IframeNode.style.position="fixed";this._IframeNode.style.left="0px";this._IframeNode.style.top="0px";this._IframeNode.style.zIndex=10001;this._IframeNode.frameBorder=0;this._IframeNode.allowTransparency=true;this._IframeNode.style.width=this._Width+"px";this._IframeNode.style.height=this._Height+"px";this._IframeNode.setAttribute("scrolling","no");this._DomNode.parentNode.insertBefore(this._IframeNode,this._DomNode);this._showInCenter()};raEmailFrameView.hide=
function(){this._DomNode.style.display="none";this._CloseButtonNode.style.display="none";this._IframeNode.parentNode.removeChild(this._IframeNode);helper.domEvent.remove(window,"resize",this._onWindowResize,this)};raEmailFrameView._showInCenter=function(){var size=helper.getClientOffset();var centerX=size.Width/2;var centerY=size.Height/2;this._IframeNode.style.left=centerX-this._Width/2+"px";this._IframeNode.style.top=centerY-this._Height/2+"px";this._CloseButtonNode.style.left=parseInt(this._IframeNode.style.left)+
this._Width-this._CloseButtonSize.width+"px";this._CloseButtonNode.style.top=this._IframeNode.style.top};raEmailFrameView._onClick=function(sender,args){this.hide()};raEmailFrameView._onWindowResize=function(sender,args){if(this._IframeNode)this._showInCenter()};window.postJsonP=function(id){var widgets=helper.allWidgets;for(var i=0;i<widgets.length;i++)if(id==widgets[i]._Id)return{getData:function(data){widgets[i].updateConfig(data)},getStatus:function(data){widgets[i].updateStatus(data)}}};window.post_widget=
helper.postWidget;window.post_init=helper.initWidgets;window.pwidget_config=window.pwidget_config||{};helper.chekInitType()}(window);