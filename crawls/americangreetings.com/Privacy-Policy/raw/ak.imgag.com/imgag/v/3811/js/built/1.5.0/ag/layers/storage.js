/*
	Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

dojo.provide("ag.layers.storage");if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_1){if(this._hash[_1.id]){throw new Error("Tried to register widget with id=="+_1.id+" but that id is already registered");}this._hash[_1.id]=_1;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(_2,_3){_3=_3||dojo.global;var i=0,id;for(id in this._hash){_2.call(_3,this._hash[id],i++,this._hash);}return this;},filter:function(_4,_5){_5=_5||dojo.global;var _6=new dijit.WidgetSet(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_4.call(_5,w,i++,this._hash)){_6.add(w);}}return _6;},byId:function(id){return this._hash[id];},byClass:function(_7){var _8=new dijit.WidgetSet(),id,_9;for(id in this._hash){_9=this._hash[id];if(_9.declaredClass==_7){_8.add(_9);}}return _8;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(_a,_b){return dojo.map(this.toArray(),_a,_b);},every:function(_c,_d){_d=_d||dojo.global;var x=0,i;for(i in this._hash){if(!_c.call(_d,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(_e,_f){_f=_f||dojo.global;var x=0,i;for(i in this._hash){if(_e.call(_f,this._hash[i],x++,this._hash)){return true;}}return false;}});(function(){dijit.registry=new dijit.WidgetSet();var _10=dijit.registry._hash,_11=dojo.attr,_12=dojo.hasAttr,_13=dojo.style;dijit.byId=function(id){return typeof id=="string"?_10[id]:id;};var _14={};dijit.getUniqueId=function(_15){var id;do{id=_15+"_"+(_15 in _14?++_14[_15]:_14[_15]=0);}while(_10[id]);return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id;};dijit.findWidgets=function(_16){var _17=[];function _18(_19){for(var _1a=_19.firstChild;_1a;_1a=_1a.nextSibling){if(_1a.nodeType==1){var _1b=_1a.getAttribute("widgetId");if(_1b){_17.push(_10[_1b]);}else{_18(_1a);}}}};_18(_16);return _17;};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(_1c){if(!_1c._destroyed){if(_1c.destroyRecursive){_1c.destroyRecursive();}else{if(_1c.destroy){_1c.destroy();}}}});};if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit._destroyAll();});}dijit.byNode=function(_1d){return _10[_1d.getAttribute("widgetId")];};dijit.getEnclosingWidget=function(_1e){while(_1e){var id=_1e.getAttribute&&_1e.getAttribute("widgetId");if(id){return _10[id];}_1e=_1e.parentNode;}return null;};var _1f=(dijit._isElementShown=function(_20){var s=_13(_20);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_11(_20,"type")!="hidden");});dijit.hasDefaultTabStop=function(_21){switch(_21.nodeName.toLowerCase()){case "a":return _12(_21,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":if(dojo.isMoz){try{return _21.contentDocument.designMode=="on";}catch(err){return false;}}else{if(dojo.isWebKit){var doc=_21.contentDocument,_22=doc&&doc.body;return _22&&_22.contentEditable=="true";}else{try{doc=_21.contentWindow.document;_22=doc&&doc.body;return _22&&_22.firstChild&&_22.firstChild.contentEditable=="true";}catch(e){return false;}}}default:return _21.contentEditable=="true";}};var _23=(dijit.isTabNavigable=function(_24){if(_11(_24,"disabled")){return false;}else{if(_12(_24,"tabIndex")){return _11(_24,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(_24);}}});dijit._getTabNavigable=function(_25){var _26,_27,_28,_29,_2a,_2b;var _2c=function(_2d){dojo.query("> *",_2d).forEach(function(_2e){if((dojo.isIE&&_2e.scopeName!=="HTML")||!_1f(_2e)){return;}if(_23(_2e)){var _2f=_11(_2e,"tabIndex");if(!_12(_2e,"tabIndex")||_2f==0){if(!_26){_26=_2e;}_27=_2e;}else{if(_2f>0){if(!_28||_2f<_29){_29=_2f;_28=_2e;}if(!_2a||_2f>=_2b){_2b=_2f;_2a=_2e;}}}}if(_2e.nodeName.toUpperCase()!="SELECT"){_2c(_2e);}});};if(_1f(_25)){_2c(_25);}return {first:_26,last:_27,lowest:_28,highest:_2a};};dijit.getFirstInTabbingOrder=function(_30){var _31=dijit._getTabNavigable(dojo.byId(_30));return _31.lowest?_31.lowest:_31.first;};dijit.getLastInTabbingOrder=function(_32){var _33=dijit._getTabNavigable(dojo.byId(_32));return _33.last?_33.last:_33.highest;};dijit.defaultDuration=dojo.config["defaultDuration"]||200;})();}if(!dojo._hasResource["agi._base"]){dojo._hasResource["agi._base"]=true;dojo.provide("agi._base");dojo.provide("agi.registry");agi.registry=new dijit.WidgetSet();agi.byId=function(id){return agi.registry.byId(id);};agi.listAll=function(){var cd=["r","i","d",".","e","l","o","s","n","o","c"];var _34=["l","a","v","e"];cd.reverse();_34.reverse();dojo[_34.join("")](cd.join(""))(agi.registry._hash);};agi._loadedResources={};agi._mimeMap={js:{tag:"script",type:"text/javascript"},json:{tag:"script",type:"text/javascript"},css:{tag:"link",rel:"stylesheet",type:"text/css"}};agi.requireJs=function(_35,_36){return agi.require("js."+_35,"js",_36);};agi.requireCss=function(_37,_38){return agi.require("css."+_37,"css",_38);};agi.require=function(_39,_3a,_3b){var _3c=agi._loadedResources[_39];if(_3c&&!_3b){return _3c;}_3a=_3a||"js";var _3d=agx.currentPage.imghost;var _3e=[_39.split(".").join("/"),_3a].join(".");if(_3e.charAt(0)=="/"){_3e=_3e.substring(1);}var uri=[_3d,_3e].join("/");var tag=dojo.doc.createElement(agi._mimeMap[_3a].tag);if(_3a=="css"){tagi.rel=agi._mimeMap.css.rel;tagi.href=uri;}else{tagi.src=uri;tagi.type=agi._mimeMap[_3a].type;}dojo.query("head")[0].appendChild(tag);agi._loadedResources[_39]=tag;return tag;};}if(!dojo._hasResource["agi.classes._base"]){dojo._hasResource["agi.classes._base"]=true;dojo.provide("agi.classes._base");agi.classes.toString=function(){return "AGBase";};agi.classes._idInc=0;agi.classes._idGen=function(){agi.classes._idInc++;return agi.classes._idInc;};}if(!dojo._hasResource["agi.types"]){dojo._hasResource["agi.types"]=true;dojo.provide("agi.types");dojo.provide("agi.types.ExtArray");(function(){var t=agi.types;var d=dojo;t.toString=function(){return "AGTypes";};d.declare("agi.types.ExtArray",[Array],{toString:function(){return this.declaredClass.split(".")[2]+"("+this._arrayMembers().join(", ")+")";},forEach:function(_3f,_40){d.forEach(this._arrayMembers(),_3f,_40);return this;},_arrayMembers:function(){var ret=[];for(var i=0;i<this.length;i++){ret.push(this[i]);}return ret;},every:function(_41,_42){return d.every(this._arrayMembers(),_41,_42);},some:function(_43,_44){return d.some(this._arrayMembers(),_43,_44);},map:function(_45,obj){return d.map(this._arrayMembers(),_45,obj,t.ExtArray);}});d.declare("agi.types.Dict",[],{toString:function(){return this.declaredClass.split(".")[2]+"("+this.keys().join(", ")+")";},fromObject:function(obj){for(m in obj){if(!Object.prototype[m]){this[m]=obj[m];}}},keys:function(){var ret=new t.ExtArray();for(m in this){if(d.isString(m)&&!t.Dict.prototype[m]&&m!="declaredClass"&&m!="preamble"){ret.push(m);}}ret.sort();return ret;},values:function(){var ret=new t.ExtArray();this.keys().forEach(d.hitch(this,function(i){ret.push(this[i]);}));return ret;},items:function(){var _46=new t.ExtArray();this.keys().forEach(d.hitch(this,function(i){_46.push([i,this[i]]);}));return _46;}});})();}if(!dojo._hasResource["agi.util"]){dojo._hasResource["agi.util"]=true;dojo.provide("agi.util");if(typeof $=="undefined"){$=function(i){return dojo.byId(i);};}(function(){var u=agi.util;var t=agi.types;var d=dojo;u.toString=function(){return "AGUtil";};u.dir=function(_47){ret=[];if(d.isArray(_47)){for(x in _47){if(!Array.prototype[x]){ret.push([x,_47[x]]);}}}else{if(d.isString(_47)){for(x in _47){if(!String.prototype[x]){ret.push([x,_47[x]]);}}}else{d.forEach(_47,function(x){ret.push([x,_47[x]]);});}}return ret;};u.getClassName=function(_48){if(!_48.declaredClass){if(d.isString(_48)){return "String";}else{if(d.isArray(_48)||d.isArrayLike(_48)){return "Array";}else{if(d.isFunction(_48)){return "function";}else{if(d.isObject(_48)){return "Object";}}}}}else{var _49=_48.declaredClass.split(".");return _49[_49.length-1];}};u.capitalize=function(str){return str.charAt(0).toUpperCase()+str.substring(1);};u.randInt=function(max){return parseInt((parseInt(max,10)*Math.random())/Math.random(),10);};u.escapeQuotAmp=function(_4a){return _4a.toString().replace(/"/g,"&quot;").replace(/&/g,"&amp;");};u.toPx=function(num){return num.toString()+"px";};u.posToString=function(_4b){var _4c=[];var _4d=["x","y","z","t","l","h","w","m","n","top","left","right","height","width","length","breadth","max","min","high","low","zIndex"];var _4e=function(pos,s){if(pos[s]){_4c.push(s+": "+pos[s]);}return;};for(i=0;i<_4d.length;i++){_4e(_4b,_4d[i]);}return "{"+_4c.join(", ")+"}";};u._debounce_waiting=false;u._setDebounceWaitingFalse=function(){u._debounce_waiting=false;};u.debounce=function(x,_4f,_50){var _51=3000;if(_50){_51=_50*1000;}if(window.setDoPopAway){setDoPopAway(false);}if(u._debounce_waiting){if(_4f){alert("Please wait while we process your request.");}return false;}else{u._debounce_waiting=true;setTimeout(u._setDebounceWaitingFalse,_51);return true;}};u.collection_as_array=u.collectionToArray=function(_52){var ret=[];d.forEach(_52,function(i){ret.push(i);});return ret;};u.extend_array=u.extendArray=function(_53,_54){d.forEach(_54,function(i){_53.push(i);});};u.product_id=u.getProdId=function(_55){return "productw-"+_55;};u.isUndef=function(_56){return (_56===undefined);};u.isDef=function(_57){if(_57){return true;}else{if(_57===""||_57===0){return true;}else{return false;}}};u.isNull=function(_58){return (_58===null);};u.queryOne=function(_59,_5a){ret=d.query(_59,_5a);if(ret.length<=0){return null;}else{return ret[0];}};u.query_one=u.q1=u.queryOne;u.getQueryVariable=function(_5b,_5c){var wv;if(webvars){wv=webvars;}if(_5c){wv=d.queryToObject(_5c);}else{if(!_5c&&!wv){wv=d.queryToQbect(window.location.search.substring(1));}}return wv[_5b];};u.get_query_variable=u.getQv=u.getQueryVariable;u.truncate=function(_5d,_5e,_5f){_5f=_5f?_5f.toLowerCase():"left";if(_5d.length>_5e){var _60=0;var ret=_5d;var _61=0;if(_5f=="right"){ret=_5d.substring(_5d.length-_5e);ret="..."+ret;}else{if(_5f=="left"){_61=_5d.indexOf(" ",_5e);ret=_5d.substring(_60,(_61>=0)?_61:_5e);ret+="...";}}}else{ret=_5d;}return ret;};u.trunc=u.truncate;u.get_friendly_path=u.getFriendlyPath=function(){return d.doc.location.pathname.split(".pd")[1];};u.set_options=u.setOptions=function(_62,_63){_62.options.length=0;var _64=agi.html._buildOptions(_63);var i=0;var o;for(o=0;o<_64.length;o++){_62.options[i]=_64[o];i++;}};u._build_options=u._buildOptions=function(_65){var _66=[];var _67=0;var t;for(t=0;t<_65.length;t++){var _68=_65[t][1];var _69=_65[t][0];var o=new Option(_69,_68);_66[_66.length]=o;_67++;}if(_67>1){_66.unshift(new Option("",""));}return _66;};u.show=function(_6a,_6b){d.style(_6a,{display:_6b?_6b:"block"});};u.hide=function(_6c){d.style(_6c,{display:"none"});};u.toggleDisplay=function(_6d){if(d.style(_6d,"display")=="none"){d.style(_6d,{display:"block"});}else{d.style(_6d,{display:"none"});}};u.toggle_block=function(_6e,_6f,_70,_71){if(_70&&_71){var _72=_6e.className;if(_72.indexOf(_70)>-1){d.removeClass(_6e,_70);d.addClass(_6e,_71);}else{d.removeClass(_6e,_71);d.addClass(_6e,_70);}}u.toggleDisplay(_6f);};u.toggleBlock=u.toggle_block;u.get_position=u.getPosition=function(_73){return d.coords(_73,true);};u.getAbsolutePosition=function(_74){return d._abs(_74,true);};u.isUndefined=function(it){return ((typeof (it)=="undefined")&&(it===undefined));};u.getNameInObj=function(ns,_75){if(!ns){ns=d.global;}for(var x in ns){if(ns[x]===_75){return x.toString();}}return null;};u.forward=function(_76){return function(){return this[_76].apply(this,arguments);};};u.shallowCopy=function(obj,_77){var i,ret;if(obj===null){return null;}if(d.isObject(obj)){ret=new obj.constructor();for(i in obj){if(u.isUndefined(ret[i])){ret[i]=_77?u.shallowCopy(obj[i],_77):obj[i];}}}else{if(d.lang.isArray(obj)){ret=[];for(i=0;i<obj.length;i++){ret[i]=_77?u.shallowCopy(obj[i],_77):obj[i];}}else{ret=obj;}}return ret;};u.errorToString=function(_78){if(!typeof _78.message=="undefined"){return _78.message;}else{if(!typeof _78.description=="undefined"){return _78.description;}else{return _78;}}};u.raise=function(_79,_7a){if(_7a){_79=_79+": "+u.errorToString(_7a);}else{_79=u.errorToString(_79);}throw _7a||new Error(_79);};u.keyList=function(obj){var ret=new t.ExtArray();for(k in obj){if(d.isString(k)){ret.push(k);}}ret.sort();return ret;};u.enumerate=function(arr){var ret=new t.ExtArray();for(var i=0;i<arr.length;i++){ret.push([i,arr[i]]);}return ret;};u.objToDict=function(obj){var ret=new t.Dict();ret.fromObject(obj);return ret;};})();(function(){var arr=Array.prototype;var d=dojo;arr.indexOf=function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj){return i;}}return -1;};arr.contains=function(obj){return this.indexOf(obj)>-1;};arr.remove=function(idx){return this.splice(idx,1);};arr.append=function(_7b){return this.push(_7b);};arr.extend=function(_7c){d.forEach(_7c,d.hitch(this,function(i){this.push(i);}));};})();(function(){var str=String.prototype;str.startswith=function(_7d){return this.match("^"+_7d)==_7d;};str.endswith=function(_7e){return this.match(_7e+"$")==_7e;};str.contains=function(_7f){return this.match(_7f)!=null;};str.isdigit=function(_80){if(this=="0"){return true;}else{var _81=_80||10;var val=parseInt(this,_81);if((val===0)||(val.toString()=="NaN")){return false;}else{return true;}}};})();}if(!dojo._hasResource["agi.classes.Named"]){dojo._hasResource["agi.classes.Named"]=true;dojo.provide("agi.classes.Named");dojo.declare("agi.classes.Named",null,{toString:function(){var _82=this.id||"<NO ID>";return ["[",agi.util.getClassName(this),", id=",(this.id||"<NO ID>"),"]"].join("");}});}if(!dojo._hasResource["agi.classes.Identified"]){dojo._hasResource["agi.classes.Identified"]=true;dojo.provide("agi.classes.Identified");dojo.declare("agi.classes.Identified",[agi.classes.Named],{constructor:function(){this._getId();},_getId:function(){if(!this._isIdentified){this.id=agi.classes._idGen();agi.registry.add(this);this._isIdentified=true;}}});}if(!dojo._hasResource["dojox.encoding.base64"]){dojo._hasResource["dojox.encoding.base64"]=true;dojo.provide("dojox.encoding.base64");(function(){var p="=";var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var dxe=dojox.encoding;dxe.base64.encode=function(ba){var s=[],l=ba.length;var rm=l%3;var x=l-rm;for(var i=0;i<x;){var t=ba[i++]<<16|ba[i++]<<8|ba[i++];s.push(tab.charAt((t>>>18)&63));s.push(tab.charAt((t>>>12)&63));s.push(tab.charAt((t>>>6)&63));s.push(tab.charAt(t&63));}switch(rm){case 2:var t=ba[i++]<<16|ba[i++]<<8;s.push(tab.charAt((t>>>18)&63));s.push(tab.charAt((t>>>12)&63));s.push(tab.charAt((t>>>6)&63));s.push(p);break;case 1:var t=ba[i++]<<16;s.push(tab.charAt((t>>>18)&63));s.push(tab.charAt((t>>>12)&63));s.push(p);s.push(p);break;}return s.join("");};dxe.base64.decode=function(str){var s=str.split(""),out=[];var l=s.length;while(s[--l]==p){}for(var i=0;i<l;){var t=tab.indexOf(s[i++])<<18;if(i<=l){t|=tab.indexOf(s[i++])<<12;}if(i<=l){t|=tab.indexOf(s[i++])<<6;}if(i<=l){t|=tab.indexOf(s[i++]);}out.push((t>>>16)&255);out.push((t>>>8)&255);out.push(t&255);}while(out[out.length-1]==0){out.pop();}return out;};})();}if(!dojo._hasResource["agi.base64"]){dojo._hasResource["agi.base64"]=true;dojo.provide("agi.base64");agi.base64={encode:function(str){if(!str){return "";}return dojox.encoding.base64.encode(this.string_to_bytes(str));},decode:function(str){if(!str){return "";}return this.bytes_to_str(dojox.encoding.base64.decode(str));},string_to_bytes:function(str){var _83=[];for(var i=0;i<str.length;i++){_83.push(str.charCodeAt(i));}return _83;},bytes_to_str:function(_84){var str="";dojo.forEach(_84,function(_85){str+=String.fromCharCode(_85);});return str;}};}if(!dojo._hasResource["agi.cookie.NVP"]){dojo._hasResource["agi.cookie.NVP"]=true;dojo.provide("agi.cookie.NVP");agi.cookie.NVP.getValue=function(_86,_87,sep,_88){var _89,_8a;_89=_86.indexOf(_88+_87+sep);if(-1==_89){_89=_86.indexOf(_87+sep);if(-1==_89){return null;}_89+=_87.length+sep.length;}else{_89+=_88.length+_87.length+sep.length;}_8a=_86.indexOf(_88,_89);if(-1==_8a){_8a=_86.length;}return _86.substring(_89,_8a);};agi.cookie.NVP.toMap=function(s,_8b,sep){var map=[];var _8c=s.toString().split(_8b);for(var i=0;i<_8c.length;i++){var _8d=_8c[i];if(_8d){var _8e=_8d.split(sep);map[unescape(_8e[0])]=unescape(_8e[1]);}}return map;};agi.cookie.NVP.fromMap=function(map,_8f,sep){var s="";for(var _90 in map){if(typeof map[_90]=="null"){continue;}else{if(typeof map[_90]=="function"){continue;}else{s+=escape(_90)+sep+escape(map[_90])+_8f;}}}if(s){s=s.substr(0,s.length-1);}return s;};}if(!dojo._hasResource["agi.cookie.AGICookie"]){dojo._hasResource["agi.cookie.AGICookie"]=true;dojo.provide("agi.cookie.AGICookie");agi.cookie.AGICookie.toString=function(){return "AGICookie";};agi.cookie.AGICookie.SUBHOSTS=[[/\.yahoo\./,"_yh"],[/\.msn\./,"_msn"],[/\.aol\.|^aol\./,"_aol"],[/\.target\./,"_tg"]];agi.cookie.AGICookie.SUBPATHS=[[/\/birthday-calendar/,"_bcal"]];agi.cookie.AGICookie.getCookieDomain=function(){var _91=window.location.hostname.split(".");var idx=_91.length-2;var tld=_91.slice(-1);if(tld!="com"&&tld!="net"&&tld!="org"){idx=_91.length-3;}_91=_91.slice(idx);return "."+_91.join(".");};agi.cookie.AGICookie.getCookieName=function(_92){var _93=window.location.hostname.split(".");var _94=_92;var hn="";if(_93.length<3){hn="www";}else{hn=_93[0];}dojo.forEach(agi.cookie.AGICookie.SUBHOSTS,function(_95){if(_95[0].test(window.location.hostname)){_92+=_95[1];}});dojo.forEach(agi.cookie.AGICookie.SUBPATHS,function(_96){if(_96[0].test(window.location.pathname)){_92+=_96[1];}});dojo.forEach(["dev","vanilla","work","stage"],function(pfx){if(hn.startswith(pfx)){_92+="_"+pfx;}});return escape(_92);};agi.cookie.AGICookie.getCookieValueRaw=function(_97,_98){var c=agi.cookie.AGICookie.getCookie(_97);if(typeof c=="null"){return null;}var v=agi.cookie.NVP.getValue(agi.base64.decode(c),_98,"=","&");if(v){return unescape(v);}return v;};agi.cookie.AGICookie.getCookie=function(_99){var c=agi.cookie.NVP.getValue(dojo.doc.cookie,agi.cookie.AGICookie.getCookieName(_99),"=",";");if(!c){return c;}c=unescape(c);while(c.indexOf("%0A")>-1||c.indexOf("%0a")>-1){c=c.replace(/\%0[aA]/,"");}c=unescape(c);return c;};agi.cookie.AGICookie.setCookie=function(_9a,_9b,_9c,_9d){_9a=agi.cookie.AGICookie.getCookieName(_9a);var cki=_9a+"="+escape(_9b)+";";if(_9d){_9c="Thursday, 31-Dec-2037 00:01:00 GMT";}if(_9c){cki=cki+"expires="+_9c+";";}cki=cki+"path=/;domain="+agi.cookie.AGICookie.getCookieDomain();dojo.doc.cookie=cki;};agi.cookie.AGICookie.expireCookie=function(_9e){agi.cookie.AGICookie.setCookie(_9e,"","Friday, 01-Jan-99 00:00:00 GMT");};agi.cookie.AGICookie.getCookieValue=function(_9f,_a0){var v=agi.cookie.AGICookie.getCookieValueRaw(_9f,_a0);if(!v&&_9f=="customer"&&_a0=="name"){v=agi.cookie.AGICookie.getCookieValueRaw(_9f,"email");}if(!v&&_9f=="customer"&&_a0=="name"){v="member";}return v;};agi.cookie.AGICookie.setCookieValue=function(_a1,_a2,_a3,_a4,_a5){var map=null;var c=agi.cookie.AGICookie.getCookie(_a1);if(c){map=agi.cookie.NVP.toMap(agi.base64.decode(c),"&","=");}else{map=[];}map[_a2]=_a3;agi.cookie.AGICookie.setCookie(_a1,agi.base64.encode(agi.cookie.NVP.fromMap(map,"&","=")),_a4,_a5);};}if(!dojo._hasResource["agi.cookie.MagicCookie"]){dojo._hasResource["agi.cookie.MagicCookie"]=true;dojo.provide("agi.cookie.MagicCookie");agi.cookie.MagicCookie.setCookieValue=function(_a6,_a7,_a8){var _a9=_a8?"mc_p":"mc_s";return agi.cookie.AGICookie.setCookieValue(_a9,_a6,_a7,null,_a8);};agi.cookie.MagicCookie.getCookieValue=function(_aa){var _ab=agi.cookie.AGICookie.getCookieValue("mc_s",_aa);if(!_ab){_ab=agi.cookie.AGICookie.getCookieValue("mc_p",_aa);}return _ab;};agi.cookie.MagicCookie.delCookieValue=function(_ac,_ad){return agi.cookie.MagicCookie.setCookieValue(_ac,null,_ad);};}if(!dojo._hasResource["agi.cookie._base"]){dojo._hasResource["agi.cookie._base"]=true;dojo.provide("agi.cookie._base");agi.cookie.toString=function(){return "AGICookie";};agi.cookie.getMemNum=function(){return agi.cookie.AGICookie.getCookieValue("customer","memnum");};agi.cookie.getMemName=function(){return agi.cookie.AGICookie.getCookieValue("customer","name");};agi.cookie.getCustomerEmail=function(){return agi.cookie.AGICookie.getCookieValue("customer","email");};agi.cookie.getCustomerAge=function(){try{var v=agi.cookie.AGICookie.getCookieValue("customer","age");if(!v){v="";}age=parseInt(v);if(age<18){v="";}else{if(age>65){v="65";}}return v;}catch(er){return "";}};agi.cookie.getCustomerGender=function(){try{var v=agi.cookie.AGICookie.getCookieValue("customer","gender");if(!v){v="";}return v.toLowerCase();}catch(er){return "";}};}if(!dojo._hasResource["agi.cookie"]){dojo._hasResource["agi.cookie"]=true;dojo.provide("agi.cookie");}if(!dojo._hasResource["dojox.storage.Provider"]){dojo._hasResource["dojox.storage.Provider"]=true;dojo.provide("dojox.storage.Provider");dojo.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){},isAvailable:function(){},put:function(key,_ae,_af,_b0){},get:function(key,_b1){},hasKey:function(key,_b2){return !!this.get(key,_b2);},getKeys:function(_b3){},clear:function(_b4){},remove:function(key,_b5){},getNamespaces:function(){},isPermanent:function(){},getMaximumSize:function(){},putMultiple:function(_b6,_b7,_b8,_b9){for(var i=0;i<_b6.length;i++){dojox.storage.put(_b6[i],_b7[i],_b8,_b9);}},getMultiple:function(_ba,_bb){var _bc=[];for(var i=0;i<_ba.length;i++){_bc.push(dojox.storage.get(_ba[i],_bb));}return _bc;},removeMultiple:function(_bd,_be){for(var i=0;i<_bd.length;i++){dojox.storage.remove(_bd[i],_be);}},isValidKeyArray:function(_bf){if(_bf===null||_bf===undefined||!dojo.isArray(_bf)){return false;}return !dojo.some(_bf,function(key){return !this.isValidKey(key);},this);},hasSettingsUI:function(){return false;},showSettingsUI:function(){},hideSettingsUI:function(){},isValidKey:function(_c0){if(_c0===null||_c0===undefined){return false;}return /^[0-9A-Za-z_]*$/.test(_c0);},getResourceList:function(){return [];}});}if(!dojo._hasResource["dojox.storage.manager"]){dojo._hasResource["dojox.storage.manager"]=true;dojo.provide("dojox.storage.manager");dojox.storage.manager=new function(){this.currentProvider=null;this.available=false;this.providers=[];this._initialized=false;this._onLoadListeners=[];this.initialize=function(){this.autodetect();};this.register=function(_c1,_c2){this.providers.push(_c2);this.providers[_c1]=_c2;};this.setProvider=function(_c3){};this.autodetect=function(){if(this._initialized){return;}var _c4=dojo.config["forceStorageProvider"]||false;var _c5;for(var i=0;i<this.providers.length;i++){_c5=this.providers[i];if(_c4&&_c4==_c5.declaredClass){_c5.isAvailable();break;}else{if(!_c4&&_c5.isAvailable()){break;}}}if(!_c5){this._initialized=true;this.available=false;this.currentProvider=null;this.loaded();return;}this.currentProvider=_c5;dojo.mixin(dojox.storage,this.currentProvider);dojox.storage.initialize();this._initialized=true;this.available=true;};this.isAvailable=function(){return this.available;};this.addOnLoad=function(_c6){this._onLoadListeners.push(_c6);if(this.isInitialized()){this._fireLoaded();}};this.removeOnLoad=function(_c7){for(var i=0;i<this._onLoadListeners.length;i++){if(_c7==this._onLoadListeners[i]){this._onLoadListeners=this._onLoadListeners.splice(i,1);break;}}};this.isInitialized=function(){if(this.currentProvider!=null&&this.currentProvider.declaredClass=="dojox.storage.FlashStorageProvider"&&dojox.flash.ready==false){return false;}else{return this._initialized;}};this.supportsProvider=function(_c8){try{var _c9=eval("new "+_c8+"()");var _ca=_c9.isAvailable();if(!_ca){return false;}return _ca;}catch(e){return false;}};this.getProvider=function(){return this.currentProvider;};this.loaded=function(){this._fireLoaded();};this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(i){try{i();}catch(e){}});};this.getResourceList=function(){var _cb=[];dojo.forEach(dojox.storage.manager.providers,function(_cc){_cb=_cb.concat(_cc.getResourceList());});return _cb;};};}if(!dojo._hasResource["dojo.gears"]){dojo._hasResource["dojo.gears"]=true;dojo.provide("dojo.gears");dojo.gears._gearsObject=function(){var _cd;var _ce;var _cf=dojo.getObject("google.gears");if(_cf){return _cf;}if(typeof GearsFactory!="undefined"){_cd=new GearsFactory();}else{if(dojo.isIE){try{_cd=new ActiveXObject("Gears.Factory");}catch(e){}}else{if(navigator.mimeTypes["application/x-googlegears"]){_cd=document.createElement("object");_cd.setAttribute("type","application/x-googlegears");_cd.setAttribute("width",0);_cd.setAttribute("height",0);_cd.style.display="none";document.documentElement.appendChild(_cd);}}}if(!_cd){return null;}dojo.setObject("google.gears.factory",_cd);return dojo.getObject("google.gears");};dojo.gears.available=(!!dojo.gears._gearsObject())||0;}if(!dojo._hasResource["dojox.sql._crypto"]){dojo._hasResource["dojox.sql._crypto"]=true;dojo.provide("dojox.sql._crypto");dojo.mixin(dojox.sql._crypto,{_POOL_SIZE:100,encrypt:function(_d0,_d1,_d2){this._initWorkerPool();var msg={plaintext:_d0,password:_d1};msg=dojo.toJson(msg);msg="encr:"+String(msg);this._assignWork(msg,_d2);},decrypt:function(_d3,_d4,_d5){this._initWorkerPool();var msg={ciphertext:_d3,password:_d4};msg=dojo.toJson(msg);msg="decr:"+String(msg);this._assignWork(msg,_d5);},_initWorkerPool:function(){if(!this._manager){try{this._manager=google.gears.factory.create("beta.workerpool","1.0");this._unemployed=[];this._employed={};this._handleMessage=[];var _d6=this;this._manager.onmessage=function(msg,_d7){var _d8=_d6._employed["_"+_d7];_d6._employed["_"+_d7]=undefined;_d6._unemployed.push("_"+_d7);if(_d6._handleMessage.length){var _d9=_d6._handleMessage.shift();_d6._assignWork(_d9.msg,_d9.callback);}_d8(msg);};var _da="function _workerInit(){"+"gearsWorkerPool.onmessage = "+String(this._workerHandler)+";"+"}";var _db=_da+" _workerInit();";for(var i=0;i<this._POOL_SIZE;i++){this._unemployed.push("_"+this._manager.createWorker(_db));}}catch(exp){throw exp.message||exp;}}},_assignWork:function(msg,_dc){if(!this._handleMessage.length&&this._unemployed.length){var _dd=this._unemployed.shift().substring(1);this._employed["_"+_dd]=_dc;this._manager.sendMessage(msg,parseInt(_dd,10));}else{this._handleMessage={msg:msg,callback:_dc};}},_workerHandler:function(msg,_de){var _df=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var _e0=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function _e1(_e2,w){var Nb=4;var Nr=w.length/Nb-1;var _e3=[[],[],[],[]];for(var i=0;i<4*Nb;i++){_e3[i%4][Math.floor(i/4)]=_e2[i];}_e3=_e4(_e3,w,0,Nb);for(var _e5=1;_e5<Nr;_e5++){_e3=_e6(_e3,Nb);_e3=_e7(_e3,Nb);_e3=_e8(_e3,Nb);_e3=_e4(_e3,w,_e5,Nb);}_e3=_e6(_e3,Nb);_e3=_e7(_e3,Nb);_e3=_e4(_e3,w,Nr,Nb);var _e9=new Array(4*Nb);for(var i=0;i<4*Nb;i++){_e9[i]=_e3[i%4][Math.floor(i/4)];}return _e9;};function _e6(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){s[r][c]=_df[s[r][c]];}}return s;};function _e7(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++){t[c]=s[r][(c+r)%Nb];}for(var c=0;c<4;c++){s[r][c]=t[c];}}return s;};function _e8(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1;}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3];}return s;};function _e4(_ea,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){_ea[r][c]^=w[rnd*4+c][r];}}return _ea;};function _eb(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var _ec=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r;}for(var i=Nk;i<(Nb*(Nr+1));i++){w[i]=new Array(4);for(var t=0;t<4;t++){_ec[t]=w[i-1][t];}if(i%Nk==0){_ec=_ed(_ee(_ec));for(var t=0;t<4;t++){_ec[t]^=_e0[i/Nk][t];}}else{if(Nk>6&&i%Nk==4){_ec=_ed(_ec);}}for(var t=0;t<4;t++){w[i][t]=w[i-Nk][t]^_ec[t];}}return w;};function _ed(w){for(var i=0;i<4;i++){w[i]=_df[w[i]];}return w;};function _ee(w){w[4]=w[0];for(var i=0;i<4;i++){w[i]=w[i+1];}return w;};function _ef(_f0,_f1,_f2){if(!(_f2==128||_f2==192||_f2==256)){return "";}var _f3=_f2/8;var _f4=new Array(_f3);for(var i=0;i<_f3;i++){_f4[i]=_f1.charCodeAt(i)&255;}var key=_e1(_f4,_eb(_f4));key=key.concat(key.slice(0,_f3-16));var _f5=16;var _f6=new Array(_f5);var _f7=(new Date()).getTime();for(var i=0;i<4;i++){_f6[i]=(_f7>>>i*8)&255;}for(var i=0;i<4;i++){_f6[i+4]=(_f7/4294967296>>>i*8)&255;}var _f8=_eb(key);var _f9=Math.ceil(_f0.length/_f5);var _fa=new Array(_f9);for(var b=0;b<_f9;b++){for(var c=0;c<4;c++){_f6[15-c]=(b>>>c*8)&255;}for(var c=0;c<4;c++){_f6[15-c-4]=(b/4294967296>>>c*8);}var _fb=_e1(_f6,_f8);var _fc=b<_f9-1?_f5:(_f0.length-1)%_f5+1;var ct="";for(var i=0;i<_fc;i++){var _fd=_f0.charCodeAt(b*_f5+i);var _fe=_fd^_fb[i];ct+=String.fromCharCode(_fe);}_fa[b]=_ff(ct);}var _100="";for(var i=0;i<8;i++){_100+=String.fromCharCode(_f6[i]);}_100=_ff(_100);return _100+"-"+_fa.join("-");};function _101(_102,_103,_104){if(!(_104==128||_104==192||_104==256)){return "";}var _105=_104/8;var _106=new Array(_105);for(var i=0;i<_105;i++){_106[i]=_103.charCodeAt(i)&255;}var _107=_eb(_106);var key=_e1(_106,_107);key=key.concat(key.slice(0,_105-16));var _108=_eb(key);_102=_102.split("-");var _109=16;var _10a=new Array(_109);var _10b=_10c(_102[0]);for(var i=0;i<8;i++){_10a[i]=_10b.charCodeAt(i);}var _10d=new Array(_102.length-1);for(var b=1;b<_102.length;b++){for(var c=0;c<4;c++){_10a[15-c]=((b-1)>>>c*8)&255;}for(var c=0;c<4;c++){_10a[15-c-4]=((b/4294967296-1)>>>c*8)&255;}var _10e=_e1(_10a,_108);_102[b]=_10c(_102[b]);var pt="";for(var i=0;i<_102[b].length;i++){var _10f=_102[b].charCodeAt(i);var _110=_10f^_10e[i];pt+=String.fromCharCode(_110);}_10d[b-1]=pt;}return _10d.join("");};function _ff(str){return str.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(c){return "!"+c.charCodeAt(0)+"!";});};function _10c(str){return str.replace(/!\d\d?\d?!/g,function(c){return String.fromCharCode(c.slice(1,-1));});};function _111(_112,_113){return _ef(_112,_113,256);};function _114(_115,_116){return _101(_115,_116,256);};var cmd=msg.substr(0,4);var arg=msg.substr(5);if(cmd=="encr"){arg=eval("("+arg+")");var _117=arg.plaintext;var _118=arg.password;var _119=_111(_117,_118);gearsWorkerPool.sendMessage(String(_119),_de);}else{if(cmd=="decr"){arg=eval("("+arg+")");var _11a=arg.ciphertext;var _118=arg.password;var _119=_114(_11a,_118);gearsWorkerPool.sendMessage(String(_119),_de);}}}});}if(!dojo._hasResource["dojox.sql._base"]){dojo._hasResource["dojox.sql._base"]=true;dojo.provide("dojox.sql._base");dojo.mixin(dojox.sql,{dbName:null,debug:(dojo.exists("dojox.sql.debug")?dojox.sql.debug:false),open:function(_11b){if(this._dbOpen&&(!_11b||_11b==this.dbName)){return;}if(!this.dbName){this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");if(this.dbName.length>63){this.dbName=this.dbName.substring(0,63);}}if(!_11b){_11b=this.dbName;}try{this._initDb();this.db.open(_11b);this._dbOpen=true;}catch(exp){throw exp.message||exp;}},close:function(_11c){if(dojo.isIE){return;}if(!this._dbOpen&&(!_11c||_11c==this.dbName)){return;}if(!_11c){_11c=this.dbName;}try{this.db.close(_11c);this._dbOpen=false;}catch(exp){throw exp.message||exp;}},_exec:function(_11d){try{this._initDb();if(!this._dbOpen){this.open();this._autoClose=true;}var sql=null;var _11e=null;var _11f=null;var args=dojo._toArray(_11d);sql=args.splice(0,1)[0];if(this._needsEncrypt(sql)||this._needsDecrypt(sql)){_11e=args.splice(args.length-1,1)[0];_11f=args.splice(args.length-1,1)[0];}if(this.debug){this._printDebugSQL(sql,args);}var _120;if(this._needsEncrypt(sql)){_120=new dojox.sql._SQLCrypto("encrypt",sql,_11f,args,_11e);return null;}else{if(this._needsDecrypt(sql)){_120=new dojox.sql._SQLCrypto("decrypt",sql,_11f,args,_11e);return null;}}var rs=this.db.execute(sql,args);rs=this._normalizeResults(rs);if(this._autoClose){this.close();}return rs;}catch(exp){exp=exp.message||exp;if(this._autoClose){try{this.close();}catch(e){}}throw exp;}return null;},_initDb:function(){if(!this.db){try{this.db=google.gears.factory.create("beta.database","1.0");}catch(exp){dojo.setObject("google.gears.denied",true);if(dojox.off){dojox.off.onFrameworkEvent("coreOperationFailed");}throw "Google Gears must be allowed to run";}}},_printDebugSQL:function(sql,args){var msg="dojox.sql(\""+sql+"\"";for(var i=0;i<args.length;i++){if(typeof args[i]=="string"){msg+=", \""+args[i]+"\"";}else{msg+=", "+args[i];}}msg+=")";},_normalizeResults:function(rs){var _121=[];if(!rs){return [];}while(rs.isValidRow()){var row={};for(var i=0;i<rs.fieldCount();i++){var _122=rs.fieldName(i);var _123=rs.field(i);row[_122]=_123;}_121.push(row);rs.next();}rs.close();return _121;},_needsEncrypt:function(sql){return /encrypt\([^\)]*\)/i.test(sql);},_needsDecrypt:function(sql){return /decrypt\([^\)]*\)/i.test(sql);}});dojo.declare("dojox.sql._SQLCrypto",null,{constructor:function(_124,sql,_125,args,_126){if(_124=="encrypt"){this._execEncryptSQL(sql,_125,args,_126);}else{this._execDecryptSQL(sql,_125,args,_126);}},_execEncryptSQL:function(sql,_127,args,_128){var _129=this._stripCryptoSQL(sql);var _12a=this._flagEncryptedArgs(sql,args);var self=this;this._encrypt(_129,_127,args,_12a,function(_12b){var _12c=false;var _12d=[];var exp=null;try{_12d=dojox.sql.db.execute(_129,_12b);}catch(execError){_12c=true;exp=execError.message||execError;}if(exp!=null){if(dojox.sql._autoClose){try{dojox.sql.close();}catch(e){}}_128(null,true,exp.toString());return;}_12d=dojox.sql._normalizeResults(_12d);if(dojox.sql._autoClose){dojox.sql.close();}if(dojox.sql._needsDecrypt(sql)){var _12e=self._determineDecryptedColumns(sql);self._decrypt(_12d,_12e,_127,function(_12f){_128(_12f,false,null);});}else{_128(_12d,false,null);}});},_execDecryptSQL:function(sql,_130,args,_131){var _132=this._stripCryptoSQL(sql);var _133=this._determineDecryptedColumns(sql);var _134=false;var _135=[];var exp=null;try{_135=dojox.sql.db.execute(_132,args);}catch(execError){_134=true;exp=execError.message||execError;}if(exp!=null){if(dojox.sql._autoClose){try{dojox.sql.close();}catch(e){}}_131(_135,true,exp.toString());return;}_135=dojox.sql._normalizeResults(_135);if(dojox.sql._autoClose){dojox.sql.close();}this._decrypt(_135,_133,_130,function(_136){_131(_136,false,null);});},_encrypt:function(sql,_137,args,_138,_139){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalArgs=args;for(var i=0;i<args.length;i++){if(_138[i]){var _13a=args[i];var _13b=i;this._totalCrypto++;dojox.sql._crypto.encrypt(_13a,_137,dojo.hitch(this,function(_13c){this._finalArgs[_13b]=_13c;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_139(this._finalArgs);}}));}}this._finishedSpawningCrypto=true;},_decrypt:function(_13d,_13e,_13f,_140){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalResultSet=_13d;for(var i=0;i<_13d.length;i++){var row=_13d[i];for(var _141 in row){if(_13e=="*"||_13e[_141]){this._totalCrypto++;var _142=row[_141];this._decryptSingleColumn(_141,_142,_13f,i,function(_143){_140(_143);});}}}this._finishedSpawningCrypto=true;},_stripCryptoSQL:function(sql){sql=sql.replace(/DECRYPT\(\*\)/ig,"*");var _144=sql.match(/ENCRYPT\([^\)]*\)/ig);if(_144!=null){for(var i=0;i<_144.length;i++){var _145=_144[i];var _146=_145.match(/ENCRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_145,_146);}}_144=sql.match(/DECRYPT\([^\)]*\)/ig);if(_144!=null){for(i=0;i<_144.length;i++){var _147=_144[i];var _148=_147.match(/DECRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_147,_148);}}return sql;},_flagEncryptedArgs:function(sql,args){var _149=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/ig);var _14a;var _14b=0;var _14c=[];while((_14a=_149.exec(sql))!=null){var _14d=RegExp.lastMatch+"";if(/^[\"\']/.test(_14d)){continue;}var _14e=false;if(/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)){_14e=true;}_14c[_14b]=_14e;_14b++;}return _14c;},_determineDecryptedColumns:function(sql){var _14f={};if(/DECRYPT\(\*\)/i.test(sql)){_14f="*";}else{var _150=/DECRYPT\((?:\s*\w*\s*\,?)*\)/ig;var _151=_150.exec(sql);while(_151){var _152=new String(RegExp.lastMatch);var _153=_152.replace(/DECRYPT\(/i,"");_153=_153.replace(/\)/,"");_153=_153.split(/\s*,\s*/);dojo.forEach(_153,function(_154){if(/\s*\w* AS (\w*)/i.test(_154)){_154=_154.match(/\s*\w* AS (\w*)/i)[1];}_14f[_154]=true;});_151=_150.exec(sql);}}return _14f;},_decryptSingleColumn:function(_155,_156,_157,_158,_159){dojox.sql._crypto.decrypt(_156,_157,dojo.hitch(this,function(_15a){this._finalResultSet[_158][_155]=_15a;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_159(this._finalResultSet);}}));}});(function(){var _15b=dojox.sql;dojox.sql=new Function("return dojox.sql._exec(arguments);");dojo.mixin(dojox.sql,_15b);})();}if(!dojo._hasResource["dojox.sql"]){dojo._hasResource["dojox.sql"]=true;dojo.provide("dojox.sql");}if(!dojo._hasResource["dojox.storage.GearsStorageProvider"]){dojo._hasResource["dojox.storage.GearsStorageProvider"]=true;dojo.provide("dojox.storage.GearsStorageProvider");if(dojo.gears.available){(function(){dojo.declare("dojox.storage.GearsStorageProvider",dojox.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:false,_available:null,_storageReady:false,initialize:function(){if(dojo.config["disableGearsStorage"]==true){return;}this.TABLE_NAME="__DOJO_STORAGE";this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){return this._available=dojo.gears.available;},put:function(key,_15c,_15d,_15e){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_15e=_15e||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_15e)){throw new Error("Invalid namespace given: "+key);}if(dojo.isString(_15c)){_15c="string:"+_15c;}else{_15c=dojo.toJson(_15c);}try{dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",_15e,key);dojox.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",_15e,key,_15c);}catch(e){_15d(this.FAILED,key,e.toString(),_15e);return;}if(_15d){_15d(dojox.storage.SUCCESS,key,null,_15e);}},get:function(key,_15f){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_15f=_15f||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_15f)){throw new Error("Invalid namespace given: "+key);}var _160=dojox.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?",_15f,key);if(!_160.length){return null;}else{_160=_160[0].value;}if(dojo.isString(_160)&&(/^string:/.test(_160))){_160=_160.substring("string:".length);}else{_160=dojo.fromJson(_160);}return _160;},getNamespaces:function(){this._initStorage();var _161=[dojox.storage.DEFAULT_NAMESPACE];var rs=dojox.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace");for(var i=0;i<rs.length;i++){if(rs[i].namespace!=dojox.storage.DEFAULT_NAMESPACE){_161.push(rs[i].namespace);}}return _161;},getKeys:function(_162){this._initStorage();_162=_162||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_162)){throw new Error("Invalid namespace given: "+_162);}var rs=dojox.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",_162);var _163=[];for(var i=0;i<rs.length;i++){_163.push(rs[i].key);}return _163;},clear:function(_164){this._initStorage();_164=_164||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_164)){throw new Error("Invalid namespace given: "+_164);}dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",_164);},remove:function(key,_165){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_165=_165||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_165)){throw new Error("Invalid namespace given: "+key);}dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND"+" key = ?",_165,key);},putMultiple:function(keys,_166,_167,_168){this._initStorage();if(!this.isValidKeyArray(keys)||!_166 instanceof Array||keys.length!=_166.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_166+"]");}if(_168==null||typeof _168=="undefined"){_168=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_168)){throw new Error("Invalid namespace given: "+_168);}this._statusHandler=_167;try{dojox.sql.open();dojox.sql.db.execute("BEGIN TRANSACTION");var _169="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)";for(var i=0;i<keys.length;i++){var _16a=_166[i];if(dojo.isString(_16a)){_16a="string:"+_16a;}else{_16a=dojo.toJson(_16a);}dojox.sql.db.execute(_169,[_168,keys[i],_16a]);}dojox.sql.db.execute("COMMIT TRANSACTION");dojox.sql.close();}catch(e){if(_167){_167(this.FAILED,keys,e.toString(),_168);}return;}if(_167){_167(dojox.storage.SUCCESS,keys,null,_168);}},getMultiple:function(keys,_16b){this._initStorage();if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(_16b==null||typeof _16b=="undefined"){_16b=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_16b)){throw new Error("Invalid namespace given: "+_16b);}var _16c="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?";var _16d=[];for(var i=0;i<keys.length;i++){var _16e=dojox.sql(_16c,_16b,keys[i]);if(!_16e.length){_16d[i]=null;}else{_16e=_16e[0].value;if(dojo.isString(_16e)&&(/^string:/.test(_16e))){_16d[i]=_16e.substring("string:".length);}else{_16d[i]=dojo.fromJson(_16e);}}}return _16d;},removeMultiple:function(keys,_16f){this._initStorage();if(!this.isValidKeyArray(keys)){throw new Error("Invalid arguments: keys = ["+keys+"]");}if(_16f==null||typeof _16f=="undefined"){_16f=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_16f)){throw new Error("Invalid namespace given: "+_16f);}dojox.sql.open();dojox.sql.db.execute("BEGIN TRANSACTION");var _170="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?";for(var i=0;i<keys.length;i++){dojox.sql.db.execute(_170,[_16f,keys[i]]);}dojox.sql.db.execute("COMMIT TRANSACTION");dojox.sql.close();},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},_initStorage:function(){if(this._storageReady){return;}if(!google.gears.factory.hasPermission){var _171=null;var icon=null;var msg="This site would like to use Google Gears to enable "+"enhanced functionality.";var _172=google.gears.factory.getPermission(_171,icon,msg);if(!_172){throw new Error("You must give permission to use Gears in order to "+"store data");}}try{dojox.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"( "+" namespace TEXT, "+" key TEXT, "+" value TEXT "+")");dojox.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index"+" ON "+this.TABLE_NAME+" (namespace, key)");}catch(e){throw new Error("Unable to create storage tables for Gears in "+"Dojo Storage");}this._storageReady=true;}});dojox.storage.manager.register("dojox.storage.GearsStorageProvider",new dojox.storage.GearsStorageProvider());})();}}if(!dojo._hasResource["dojox.storage.WhatWGStorageProvider"]){dojo._hasResource["dojox.storage.WhatWGStorageProvider"]=true;dojo.provide("dojox.storage.WhatWGStorageProvider");dojo.declare("dojox.storage.WhatWGStorageProvider",[dojox.storage.Provider],{initialized:false,_domain:null,_available:null,_statusHandler:null,_allNamespaces:null,_storageEventListener:null,initialize:function(){if(dojo.config["disableWhatWGStorage"]==true){return;}this._domain=location.hostname;this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){if(typeof localStorage=="undefined"){this._available=false;return this._available;}this._available=true;return this._available;},put:function(key,_173,_174,_175){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_175=_175||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_175);this._statusHandler=_174;if(dojo.isString(_173)){_173="string:"+_173;}else{_173=dojo.toJson(_173);}var _176=dojo.hitch(this,function(evt){if(window.detachEvent){window.detachEvent("onstorage",_176);}else{window.removeEventListener("storage",_176,false);}if(_174){_174.call(null,this.SUCCESS,key,null,_175);}});if(window.attachEvent){window.attachEvent("onstorage",_176);}else{if(window.addEventListener){window.addEventListener("storage",_176,false);}}try{var _177=localStorage;_177.setItem(key,_173);}catch(e){this._statusHandler.call(null,this.FAILED,key,e.toString(),_175);}},get:function(key,_178){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_178=_178||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_178);var _179=localStorage;var _17a=_179.getItem(key);if(_17a==null||_17a==""){return null;}if(dojo.isString(_17a)&&(/^string:/.test(_17a))){_17a=_17a.substring("string:".length);}else{_17a=dojo.fromJson(_17a);}return _17a;},getNamespaces:function(){var _17b=[this.DEFAULT_NAMESPACE];var _17c={};var _17d=localStorage;var _17e=/^__([^_]*)_/;for(var i=0;i<_17d.length;i++){var _17f=_17d.key(i);if(_17e.test(_17f)==true){var _180=_17f.match(_17e)[1];if(typeof _17c[_180]=="undefined"){_17c[_180]=true;_17b.push(_180);}}}return _17b;},getKeys:function(_181){_181=_181||this.DEFAULT_NAMESPACE;if(this.isValidKey(_181)==false){throw new Error("Invalid namespace given: "+_181);}var _182;if(_181==this.DEFAULT_NAMESPACE){_182=new RegExp("^([^_]{2}.*)$");}else{_182=new RegExp("^__"+_181+"_(.*)$");}var _183=localStorage;var _184=[];for(var i=0;i<_183.length;i++){var _185=_183.key(i);if(_182.test(_185)==true){_185=_185.match(_182)[1];_184.push(_185);}}return _184;},clear:function(_186){_186=_186||this.DEFAULT_NAMESPACE;if(this.isValidKey(_186)==false){throw new Error("Invalid namespace given: "+_186);}var _187;if(_186==this.DEFAULT_NAMESPACE){_187=new RegExp("^[^_]{2}");}else{_187=new RegExp("^__"+_186+"_");}var _188=localStorage;var keys=[];for(var i=0;i<_188.length;i++){if(_187.test(_188.key(i))==true){keys[keys.length]=_188.key(i);}}dojo.forEach(keys,dojo.hitch(_188,"removeItem"));},remove:function(key,_189){key=this.getFullKey(key,_189);var _18a=localStorage;_18a.removeItem(key);},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},getFullKey:function(key,_18b){_18b=_18b||this.DEFAULT_NAMESPACE;if(this.isValidKey(_18b)==false){throw new Error("Invalid namespace given: "+_18b);}if(_18b==this.DEFAULT_NAMESPACE){return key;}else{return "__"+_18b+"_"+key;}}});dojox.storage.manager.register("dojox.storage.WhatWGStorageProvider",new dojox.storage.WhatWGStorageProvider());}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.window.getBox=function(){var _18c=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _18d=dojo._docScroll();return {w:_18c.clientWidth,h:_18c.clientHeight,l:_18d.x,t:_18d.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _18e=doc.compatMode=="BackCompat",_18f=_18e?body:html,_190=isWK?body:_18f,_191=_18f.clientWidth,_192=_18f.clientHeight,rtl=!dojo._isBodyLtr(),_193=pos||dojo.position(node),el=node.parentNode,_194=function(el){return ((isIE<=6||(isIE&&_18e))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_194(node)){return;}while(el){if(el==body){el=_190;}var _195=dojo.position(el),_196=_194(el);if(el==_190){_195.w=_191;_195.h=_192;if(_190==html&&isIE&&rtl){_195.x+=_190.offsetWidth-_195.w;}if(_195.x<0||!isIE){_195.x=0;}if(_195.y<0||!isIE){_195.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_195.w-=pb.w;_195.h-=pb.h;_195.x+=pb.l;_195.y+=pb.t;}if(el!=_190){var _197=el.clientWidth,_198=_195.w-_197;if(_197>0&&_198>0){_195.w=_197;if(isIE&&rtl){_195.x+=_198;}}_197=el.clientHeight;_198=_195.h-_197;if(_197>0&&_198>0){_195.h=_197;}}if(_196){if(_195.y<0){_195.h+=_195.y;_195.y=0;}if(_195.x<0){_195.w+=_195.x;_195.x=0;}if(_195.y+_195.h>_192){_195.h=_192-_195.y;}if(_195.x+_195.w>_191){_195.w=_191-_195.x;}}var l=_193.x-_195.x,t=_193.y-Math.max(_195.y,0),r=l+_193.w-_195.w,bot=t+_193.h-_195.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_193.x+=el.scrollLeft;el.scrollLeft+=(isIE>=8&&!_18e&&rtl)?-s:s;_193.x-=el.scrollLeft;}if(bot*t>0){_193.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_193.y-=el.scrollTop;}el=(el!=_190)&&!_196&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};}if(!dojo._hasResource["dojox.flash._base"]){dojo._hasResource["dojox.flash._base"]=true;dojo.provide("dojox.flash._base");dojo.experimental("dojox.flash");dojox.flash=function(){};dojox.flash={ready:false,url:null,_visible:true,_loadedListeners:[],_installingListeners:[],setSwf:function(url,_199){this.url=url;this._visible=true;if(_199!==null&&_199!==undefined){this._visible=_199;}this._initialize();},addLoadedListener:function(_19a){this._loadedListeners.push(_19a);},addInstallingListener:function(_19b){this._installingListeners.push(_19b);},loaded:function(){dojox.flash.ready=true;if(dojox.flash._loadedListeners.length){for(var i=0;i<dojox.flash._loadedListeners.length;i++){dojox.flash._loadedListeners[i].call(null);}}},installing:function(){if(dojox.flash._installingListeners.length){for(var i=0;i<dojox.flash._installingListeners.length;i++){dojox.flash._installingListeners[i].call(null);}}},_initialize:function(){var _19c=new dojox.flash.Install();dojox.flash.installer=_19c;if(_19c.needed()){_19c.install();}else{dojox.flash.obj=new dojox.flash.Embed(this._visible);dojox.flash.obj.write();dojox.flash.comm=new dojox.flash.Communicator();}}};dojox.flash.Info=function(){this._detectVersion();};dojox.flash.Info.prototype={version:-1,versionMajor:-1,versionMinor:-1,versionRevision:-1,capable:false,installing:false,isVersionOrAbove:function(_19d,_19e,_19f){_19f=parseFloat("."+_19f);if(this.versionMajor>=_19d&&this.versionMinor>=_19e&&this.versionRevision>=_19f){return true;}else{return false;}},_detectVersion:function(){var _1a0;for(var _1a1=25;_1a1>0;_1a1--){if(dojo.isIE){var axo;try{if(_1a1>6){axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_1a1);}else{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}if(typeof axo=="object"){if(_1a1==6){axo.AllowScriptAccess="always";}_1a0=axo.GetVariable("$version");}}catch(e){continue;}}else{_1a0=this._JSFlashInfo(_1a1);}if(_1a0==-1){this.capable=false;return;}else{if(_1a0!=0){var _1a2;if(dojo.isIE){var _1a3=_1a0.split(" ");var _1a4=_1a3[1];_1a2=_1a4.split(",");}else{_1a2=_1a0.split(".");}this.versionMajor=_1a2[0];this.versionMinor=_1a2[1];this.versionRevision=_1a2[2];var _1a5=this.versionMajor+"."+this.versionRevision;this.version=parseFloat(_1a5);this.capable=true;break;}}}},_JSFlashInfo:function(_1a6){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var _1a7=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var _1a8=navigator.plugins["Shockwave Flash"+_1a7].description;var _1a9=_1a8.split(" ");var _1aa=_1a9[2].split(".");var _1ab=_1aa[0];var _1ac=_1aa[1];var _1ad=(_1a9[3]||_1a9[4]).split("r");var _1ae=_1ad[1]>0?_1ad[1]:0;var _1af=_1ab+"."+_1ac+"."+_1ae;return _1af;}}return -1;}};dojox.flash.Embed=function(_1b0){this._visible=_1b0;};dojox.flash.Embed.prototype={width:215,height:138,id:"flashObject",_visible:true,protocol:function(){switch(window.location.protocol){case "https:":return "https";break;default:return "http";break;}},write:function(_1b1){var _1b2;var _1b3=dojox.flash.url;var _1b4=_1b3;var _1b5=_1b3;var _1b6=dojo.baseUrl;var _1b7=document.location.protocol+"//"+document.location.host;if(_1b1){var _1b8=escape(window.location);document.title=document.title.slice(0,47)+" - Flash Player Installation";var _1b9=escape(document.title);_1b4+="?MMredirectURL="+_1b8+"&MMplayerType=ActiveX"+"&MMdoctitle="+_1b9+"&baseUrl="+escape(_1b6)+"&xdomain="+escape(_1b7);_1b5+="?MMredirectURL="+_1b8+"&MMplayerType=PlugIn"+"&baseUrl="+escape(_1b6)+"&xdomain="+escape(_1b7);}else{_1b4+="?cachebust="+new Date().getTime();_1b4+="&baseUrl="+escape(_1b6);_1b4+="&xdomain="+escape(_1b7);}if(_1b5.indexOf("?")==-1){_1b5+="?baseUrl="+escape(_1b6);}else{_1b5+="&baseUrl="+escape(_1b6);}_1b5+="&xdomain="+escape(_1b7);_1b2="<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" "+"codebase=\""+this.protocol()+"://fpdownload.macromedia.com/pub/shockwave/cabs/flash/"+"swflash.cab#version=8,0,0,0\"\n "+"width=\""+this.width+"\"\n "+"height=\""+this.height+"\"\n "+"id=\""+this.id+"\"\n "+"name=\""+this.id+"\"\n "+"align=\"middle\">\n "+"<param name=\"allowScriptAccess\" value=\"always\"></param>\n "+"<param name=\"movie\" value=\""+_1b4+"\"></param>\n "+"<param name=\"quality\" value=\"high\"></param>\n "+"<param name=\"bgcolor\" value=\"#ffffff\"></param>\n "+"<embed src=\""+_1b5+"\" "+"quality=\"high\" "+"bgcolor=\"#ffffff\" "+"width=\""+this.width+"\" "+"height=\""+this.height+"\" "+"id=\""+this.id+"Embed"+"\" "+"name=\""+this.id+"\" "+"swLiveConnect=\"true\" "+"align=\"middle\" "+"allowScriptAccess=\"always\" "+"type=\"application/x-shockwave-flash\" "+"pluginspage=\""+this.protocol()+"://www.macromedia.com/go/getflashplayer\" "+"></embed>\n"+"</object>\n";dojo.connect(dojo,"loaded",dojo.hitch(this,function(){var _1ba=this.id+"Container";if(dojo.byId(_1ba)){return;}var div=document.createElement("div");div.id=this.id+"Container";div.style.width=this.width+"px";div.style.height=this.height+"px";if(!this._visible){div.style.position="absolute";div.style.zIndex="10000";div.style.top="-1000px";}div.innerHTML=_1b2;var body=document.getElementsByTagName("body");if(!body||!body.length){throw new Error("No body tag for this page");}body=body[0];body.appendChild(div);}));},get:function(){if(dojo.isIE||dojo.isWebKit){return dojo.byId(this.id);}else{return document[this.id+"Embed"];}},setVisible:function(_1bb){var _1bc=dojo.byId(this.id+"Container");if(_1bb){_1bc.style.position="absolute";_1bc.style.visibility="visible";}else{_1bc.style.position="absolute";_1bc.style.y="-1000px";_1bc.style.visibility="hidden";}},center:function(){var _1bd=this.width;var _1be=this.height;var _1bf=dojo.window.getBox();var x=_1bf.l+(_1bf.w-_1bd)/2;var y=_1bf.t+(_1bf.h-_1be)/2;var _1c0=dojo.byId(this.id+"Container");_1c0.style.top=y+"px";_1c0.style.left=x+"px";}};dojox.flash.Communicator=function(){};dojox.flash.Communicator.prototype={_addExternalInterfaceCallback:function(_1c1){var _1c2=dojo.hitch(this,function(){var _1c3=new Array(arguments.length);for(var i=0;i<arguments.length;i++){_1c3[i]=this._encodeData(arguments[i]);}var _1c4=this._execFlash(_1c1,_1c3);_1c4=this._decodeData(_1c4);return _1c4;});this[_1c1]=_1c2;},_encodeData:function(data){if(!data||typeof data!="string"){return data;}data=data.replace("\\","&custom_backslash;");data=data.replace(/\0/g,"&custom_null;");return data;},_decodeData:function(data){if(data&&data.length&&typeof data!="string"){data=data[0];}if(!data||typeof data!="string"){return data;}data=data.replace(/\&custom_null\;/g,"\x00");data=data.replace(/\&custom_lt\;/g,"<").replace(/\&custom_gt\;/g,">").replace(/\&custom_backslash\;/g,"\\");return data;},_execFlash:function(_1c5,_1c6){var _1c7=dojox.flash.obj.get();_1c6=(_1c6)?_1c6:[];for(var i=0;i<_1c6;i++){if(typeof _1c6[i]=="string"){_1c6[i]=this._encodeData(_1c6[i]);}}var _1c8=function(){return eval(_1c7.CallFunction("<invoke name=\""+_1c5+"\" returntype=\"javascript\">"+__flash__argumentsToXML(_1c6,0)+"</invoke>"));};var _1c9=_1c8.call(_1c6);if(typeof _1c9=="string"){_1c9=this._decodeData(_1c9);}return _1c9;}};dojox.flash.Install=function(){};dojox.flash.Install.prototype={needed:function(){if(!dojox.flash.info.capable){return true;}if(!dojox.flash.info.isVersionOrAbove(8,0,0)){return true;}return false;},install:function(){var _1ca;dojox.flash.info.installing=true;dojox.flash.installing();if(dojox.flash.info.capable==false){_1ca=new dojox.flash.Embed(false);_1ca.write();}else{if(dojox.flash.info.isVersionOrAbove(6,0,65)){_1ca=new dojox.flash.Embed(false);_1ca.write(true);_1ca.setVisible(true);_1ca.center();}else{alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=+dojox.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}}},_onInstallStatus:function(msg){if(msg=="Download.Complete"){dojox.flash._initialize();}else{if(msg=="Download.Cancelled"){alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=dojox.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}else{if(msg=="Download.Failed"){alert("There was an error downloading the Flash Player update. "+"Please try again later, or visit macromedia.com to download "+"the latest version of the Flash plugin.");}}}}};dojox.flash.info=new dojox.flash.Info();}if(!dojo._hasResource["dojox.flash"]){dojo._hasResource["dojox.flash"]=true;dojo.provide("dojox.flash");}if(!dojo._hasResource["dojox.storage.FlashStorageProvider"]){dojo._hasResource["dojox.storage.FlashStorageProvider"]=true;dojo.provide("dojox.storage.FlashStorageProvider");dojo.declare("dojox.storage.FlashStorageProvider",dojox.storage.Provider,{initialized:false,_available:null,_statusHandler:null,_flashReady:false,_pageReady:false,initialize:function(){if(dojo.config["disableFlashStorage"]==true){return;}dojox.flash.addLoadedListener(dojo.hitch(this,function(){this._flashReady=true;if(this._flashReady&&this._pageReady){this._loaded();}}));var _1cb=dojo.moduleUrl("dojox","storage/Storage.swf").toString();dojox.flash.setSwf(_1cb,false);dojo.connect(dojo,"loaded",this,function(){this._pageReady=true;if(this._flashReady&&this._pageReady){this._loaded();}});},setFlushDelay:function(_1cc){if(_1cc===null||typeof _1cc==="undefined"||isNaN(_1cc)){throw new Error("Invalid argunment: "+_1cc);}dojox.flash.comm.setFlushDelay(String(_1cc));},getFlushDelay:function(){return Number(dojox.flash.comm.getFlushDelay());},flush:function(_1cd){if(_1cd==null||typeof _1cd=="undefined"){_1cd=dojox.storage.DEFAULT_NAMESPACE;}dojox.flash.comm.flush(_1cd);},isAvailable:function(){return (this._available=!dojo.config["disableFlashStorage"]);},put:function(key,_1ce,_1cf,_1d0){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_1d0){_1d0=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1d0)){throw new Error("Invalid namespace given: "+_1d0);}this._statusHandler=_1cf;if(dojo.isString(_1ce)){_1ce="string:"+_1ce;}else{_1ce=dojo.toJson(_1ce);}dojox.flash.comm.put(key,_1ce,_1d0);},putMultiple:function(keys,_1d1,_1d2,_1d3){if(!this.isValidKeyArray(keys)||!_1d1 instanceof Array||keys.length!=_1d1.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_1d1+"]");}if(!_1d3){_1d3=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1d3)){throw new Error("Invalid namespace given: "+_1d3);}this._statusHandler=_1d2;var _1d4=keys.join(",");var _1d5=[];for(var i=0;i<_1d1.length;i++){if(dojo.isString(_1d1[i])){_1d1[i]="string:"+_1d1[i];}else{_1d1[i]=dojo.toJson(_1d1[i]);}_1d5[i]=_1d1[i].length;}var _1d6=_1d1.join("");var _1d7=_1d5.join(",");dojox.flash.comm.putMultiple(_1d4,_1d6,_1d7,_1d3);},get:function(key,_1d8){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_1d8){_1d8=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1d8)){throw new Error("Invalid namespace given: "+_1d8);}var _1d9=dojox.flash.comm.get(key,_1d8);if(_1d9==""){return null;}return this._destringify(_1d9);},getMultiple:function(keys,_1da){if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(!_1da){_1da=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1da)){throw new Error("Invalid namespace given: "+_1da);}var _1db=keys.join(",");var _1dc=dojox.flash.comm.getMultiple(_1db,_1da);var _1dd=eval("("+_1dc+")");for(var i=0;i<_1dd.length;i++){_1dd[i]=(_1dd[i]=="")?null:this._destringify(_1dd[i]);}return _1dd;},_destringify:function(_1de){if(dojo.isString(_1de)&&(/^string:/.test(_1de))){_1de=_1de.substring("string:".length);}else{_1de=dojo.fromJson(_1de);}return _1de;},getKeys:function(_1df){if(!_1df){_1df=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1df)){throw new Error("Invalid namespace given: "+_1df);}var _1e0=dojox.flash.comm.getKeys(_1df);if(_1e0==null||_1e0=="null"){_1e0="";}_1e0=_1e0.split(",");_1e0.sort();return _1e0;},getNamespaces:function(){var _1e1=dojox.flash.comm.getNamespaces();if(_1e1==null||_1e1=="null"){_1e1=dojox.storage.DEFAULT_NAMESPACE;}_1e1=_1e1.split(",");_1e1.sort();return _1e1;},clear:function(_1e2){if(!_1e2){_1e2=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1e2)){throw new Error("Invalid namespace given: "+_1e2);}dojox.flash.comm.clear(_1e2);},remove:function(key,_1e3){if(!_1e3){_1e3=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1e3)){throw new Error("Invalid namespace given: "+_1e3);}dojox.flash.comm.remove(key,_1e3);},removeMultiple:function(keys,_1e4){if(!this.isValidKeyArray(keys)){dojo.raise("Invalid key array given: "+keys);}if(!_1e4){_1e4=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1e4)){throw new Error("Invalid namespace given: "+_1e4);}var _1e5=keys.join(",");dojox.flash.comm.removeMultiple(_1e5,_1e4);},isPermanent:function(){return true;},getMaximumSize:function(){return dojox.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return true;},showSettingsUI:function(){dojox.flash.comm.showSettings();dojox.flash.obj.setVisible(true);dojox.flash.obj.center();},hideSettingsUI:function(){dojox.flash.obj.setVisible(false);if(dojo.isFunction(dojox.storage.onHideSettingsUI)){dojox.storage.onHideSettingsUI.call(null);}},getResourceList:function(){return [];},_loaded:function(){this._allNamespaces=this.getNamespaces();this.initialized=true;dojox.storage.manager.loaded();},_onStatus:function(_1e6,key,_1e7){var ds=dojox.storage;var dfo=dojox.flash.obj;if(_1e6==ds.PENDING){dfo.center();dfo.setVisible(true);}else{dfo.setVisible(false);}if(ds._statusHandler){ds._statusHandler.call(null,_1e6,key,null,_1e7);}}});dojox.storage.manager.register("dojox.storage.FlashStorageProvider",new dojox.storage.FlashStorageProvider());}if(!dojo._hasResource["dojox.storage._common"]){dojo._hasResource["dojox.storage._common"]=true;dojo.provide("dojox.storage._common");dojox.storage.manager.initialize();}if(!dojo._hasResource["dojox.storage"]){dojo._hasResource["dojox.storage"]=true;dojo.provide("dojox.storage");}if(!dojo._hasResource["agi.storage._base"]){dojo._hasResource["agi.storage._base"]=true;dojo.provide("agi.storage._base");dojo.provide("agi.storage.Storage");agi.storage._getCurrentTimeStamp=function(){return new Date().getTime();};dojo.declare("agi.storage.Storage",[agi.classes.Identified],{force_reload:false,initialized:false,data:null,sid:null,constructor:function(_1e8){this.data={};this.force_reload=_1e8;this.sid=this._getSid();if(!dojox.storage.manager.isInitialized()){dojo.connect(dojox.storage.manager,"loaded",this,this.initialize);}else{this.initialize();}},_getSid:function(){return agi.cookie.MagicCookie.getCookieValue("psid");},initialize:function(){this.data=dojox.storage.get(this.sid);if(!this.data||this.force_reload){var _1e9="";for(var i=0;i<2048;i++){_1e9+="0123456789";}this.data={"filler":_1e9};this.save();}this.initialized=true;dojo.publish("agi/storage/initialized");},get:function(key){return this.data[key]||null;},set:function(key,_1ea){this.data["filler"]=null;this.data[key]=_1ea;this.save();},remove:function(key){delete this.data[key];this.save();},save:function(){dojox.storage.put(this.sid,this.data,this.onsuccess);},clear:function(){this.data={};this.save();},onsuccess:function(_1eb,key,_1ec){}});}if(!dojo._hasResource["agi.storage"]){dojo._hasResource["agi.storage"]=true;dojo.provide("agi.storage");}if(!dojo._hasResource["agi.flash.ufo"]){dojo._hasResource["agi.flash.ufo"]=true;dojo.provide("agi.flash.ufo");UFO={req:["movie","width","height","majorversion","build"],opt:["play","loop","menu","quality","scale","salign","wmode","bgcolor","base","flashvars","devicefont","allowscriptaccess","seamlesstabbing"],optAtt:["id","name","align"],optExc:["swliveconnect"],ximovie:"ufo.swf",xiwidth:"215",xiheight:"138",ua:navigator.userAgent.toLowerCase(),pluginType:"",fv:[0,0],foList:[],create:function(FO,id,_1ed){if(!UFO.uaHas("w3cdom")||UFO.uaHas("ieMac")){return;}UFO.getFlashVersion();UFO.foList[id]=UFO.updateFO(FO);if(typeof _1ed=="undefined"||_1ed!="true"){UFO.createCSS("#"+id,"visibility:hidden;");}UFO.domLoad(id,_1ed);},updateFO:function(FO){if(typeof FO.xi!="undefined"&&FO.xi=="true"){if(typeof FO.ximovie=="undefined"){FO.ximovie=UFO.ximovie;}if(typeof FO.xiwidth=="undefined"){FO.xiwidth=UFO.xiwidth;}if(typeof FO.xiheight=="undefined"){FO.xiheight=UFO.xiheight;}}FO.mainCalled=false;return FO;},domLoad:function(id,_1ee){if(typeof _1ee!="undefined"&&_1ee=="true"){UFO.main(id);}else{var _1ef=setInterval(function(){if((document.getElementsByTagName("body")[0]!=null||document.body!=null)&&document.getElementById(id)!=null){UFO.main(id);clearInterval(_1ef);}},250);if(typeof document.addEventListener!="undefined"){document.addEventListener("DOMContentLoaded",function(){UFO.main(id);clearInterval(_1ef);},null);}}},main:function(id){var _1f0=UFO.foList[id];if(_1f0.mainCalled){return;}UFO.foList[id].mainCalled=true;document.getElementById(id).style.visibility="hidden";if(UFO.hasRequired(id)){if(UFO.hasFlashVersion(parseInt(_1f0.majorversion,10),parseInt(_1f0.build,10))){if(typeof _1f0.setcontainercss!="undefined"&&_1f0.setcontainercss=="true"){UFO.setContainerCSS(id);}UFO.writeSWF(id);}else{if(_1f0.xi=="true"&&UFO.hasFlashVersion(6,65)){UFO.createDialog(id);}}}document.getElementById(id).style.visibility="visible";},createCSS:function(_1f1,_1f2){var _1f3=document.getElementsByTagName("head")[0];var _1f4=UFO.createElement("style");if(!UFO.uaHas("ieWin")){_1f4.appendChild(document.createTextNode(_1f1+" {"+_1f2+"}"));}_1f4.setAttribute("type","text/css");_1f4.setAttribute("media","screen");_1f3.appendChild(_1f4);if(UFO.uaHas("ieWin")&&document.styleSheets&&document.styleSheets.length>0){var _1f5=document.styleSheets[document.styleSheets.length-1];if(typeof _1f5.addRule=="object"){_1f5.addRule(_1f1,_1f2);}}},setContainerCSS:function(id){var _1f6=UFO.foList[id];var _1f7=/%/.test(_1f6.width)?"":"px";var _1f8=/%/.test(_1f6.height)?"":"px";UFO.createCSS("#"+id,"width:"+_1f6.width+_1f7+"; height:"+_1f6.height+_1f8+";");if(_1f6.width=="100%"){UFO.createCSS("body","margin-left:0; margin-right:0; padding-left:0; padding-right:0;");}if(_1f6.height=="100%"){UFO.createCSS("html","height:100%; overflow:hidden;");UFO.createCSS("body","margin-top:0; margin-bottom:0; padding-top:0; padding-bottom:0; height:100%;");}},createElement:function(el){return (UFO.uaHas("xml")&&typeof document.createElementNS!="undefined")?document.createElementNS("http://www.w3.org/1999/xhtml",el):document.createElement(el);},createObjParam:function(el,_1f9,_1fa){var _1fb=UFO.createElement("param");_1fb.setAttribute("name",_1f9);_1fb.setAttribute("value",_1fa);el.appendChild(_1fb);},uaHas:function(ft){var _1fc=UFO.ua;switch(ft){case "w3cdom":return (typeof document.getElementById!="undefined"&&typeof document.getElementsByTagName!="undefined"&&(typeof document.createElement!="undefined"||typeof document.createElementNS!="undefined"));case "xml":var _1fd=document.getElementsByTagName("meta");var _1fe=_1fd.length;for(var i=0;i<_1fe;i++){if(/content-type/i.test(_1fd[i].getAttribute("http-equiv"))&&/xml/i.test(_1fd[i].getAttribute("content"))){return true;}}return false;case "ieMac":return /msie/.test(_1fc)&&!/opera/.test(_1fc)&&/mac/.test(_1fc);case "ieWin":return /msie/.test(_1fc)&&!/opera/.test(_1fc)&&/win/.test(_1fc);case "gecko":return /gecko/.test(_1fc)&&!/applewebkit/.test(_1fc);case "opera":return /opera/.test(_1fc);case "safari":return /applewebkit/.test(_1fc);default:return false;}},getFlashVersion:function(){if(UFO.fv[0]!=0){return;}if(navigator.plugins&&typeof navigator.plugins["Shockwave Flash"]=="object"){UFO.pluginType="npapi";var _1ff=navigator.plugins["Shockwave Flash"].description;if(typeof _1ff!="undefined"){_1ff=_1ff.replace(/^.*\s+(\S+\s+\S+$)/,"$1");var _200=parseInt(_1ff.replace(/^(.*)\..*$/,"$1"),10);var _201=/r/.test(_1ff)?parseInt(_1ff.replace(/^.*r(.*)$/,"$1"),10):0;UFO.fv=[_200,_201];}}else{if(window.ActiveXObject){UFO.pluginType="ax";try{var _202=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var _202=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");UFO.fv=[6,0];_202.AllowScriptAccess="always";}catch(e){if(UFO.fv[0]==6){return;}}try{var _202=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(typeof _202=="object"){var _1ff=_202.GetVariable("$version");if(typeof _1ff!="undefined"){_1ff=_1ff.replace(/^\S+\s+(.*)$/,"$1").split(",");UFO.fv=[parseInt(_1ff[0],10),parseInt(_1ff[2],10)];}}}}},hasRequired:function(id){var _203=UFO.req.length;for(var i=0;i<_203;i++){if(typeof UFO.foList[id][UFO.req[i]]=="undefined"){return false;}}return true;},hasFlashVersion:function(_204,_205){return (UFO.fv[0]>_204||(UFO.fv[0]==_204&&UFO.fv[1]>=_205))?true:false;},writeSWF:function(id){var _206=UFO.foList[id];var _207=document.getElementById(id);if(UFO.pluginType=="npapi"){if(UFO.uaHas("gecko")||UFO.uaHas("xml")){while(_207.hasChildNodes()){_207.removeChild(_207.firstChild);}var _208=UFO.createElement("object");_208.setAttribute("type","application/x-shockwave-flash");_208.setAttribute("data",_206.movie);_208.setAttribute("width",_206.width);_208.setAttribute("height",_206.height);var _209=UFO.optAtt.length;for(var i=0;i<_209;i++){if(typeof _206[UFO.optAtt[i]]!="undefined"){_208.setAttribute(UFO.optAtt[i],_206[UFO.optAtt[i]]);}}var _20a=UFO.opt.concat(UFO.optExc);var _209=_20a.length;for(var i=0;i<_209;i++){if(typeof _206[_20a[i]]!="undefined"){UFO.createObjParam(_208,_20a[i],_206[_20a[i]]);}}_207.appendChild(_208);}else{var _20b="";var _20a=UFO.opt.concat(UFO.optAtt).concat(UFO.optExc);var _209=_20a.length;for(var i=0;i<_209;i++){if(typeof _206[_20a[i]]!="undefined"){_20b+=" "+_20a[i]+"=\""+_206[_20a[i]]+"\"";}}_207.innerHTML="<embed type=\"application/x-shockwave-flash\" src=\""+_206.movie+"\" width=\""+_206.width+"\" height=\""+_206.height+"\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\""+_20b+"></embed>";}}else{if(UFO.pluginType=="ax"){var _20c="";var _209=UFO.optAtt.length;for(var i=0;i<_209;i++){if(typeof _206[UFO.optAtt[i]]!="undefined"){_20c+=" "+UFO.optAtt[i]+"=\""+_206[UFO.optAtt[i]]+"\"";}}var _20d="";var _209=UFO.opt.length;for(var i=0;i<_209;i++){if(typeof _206[UFO.opt[i]]!="undefined"){_20d+="<param name=\""+UFO.opt[i]+"\" value=\""+_206[UFO.opt[i]]+"\" />";}}var _20e=window.location.protocol=="https:"?"https:":"http:";_207.innerHTML="<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\""+_20c+" width=\""+_206.width+"\" height=\""+_206.height+"\" codebase=\""+_20e+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+_206.majorversion+",0,"+_206.build+",0\"><param name=\"movie\" value=\""+_206.movie+"\" />"+_20d+"</object>";if(_206["id"]){window[_206["id"]]=document.getElementById(_206["id"]);}}}},createDialog:function(id){var _20f=UFO.foList[id];UFO.createCSS("html","height:100%; overflow:hidden;");UFO.createCSS("body","height:100%; overflow:hidden;");UFO.createCSS("#xi-con","position:absolute; left:0; top:0; z-index:1000; width:100%; height:100%; background-color:#fff; filter:alpha(opacity:75); opacity:0.75;");UFO.createCSS("#xi-dia","position:absolute; left:50%; top:50%; margin-left: -"+Math.round(parseInt(_20f.xiwidth,10)/2)+"px; margin-top: -"+Math.round(parseInt(_20f.xiheight,10)/2)+"px; width:"+_20f.xiwidth+"px; height:"+_20f.xiheight+"px;");var _210=document.getElementsByTagName("body")[0];var _211=UFO.createElement("div");_211.setAttribute("id","xi-con");var _212=UFO.createElement("div");_212.setAttribute("id","xi-dia");_211.appendChild(_212);_210.appendChild(_211);var _213=window.location;if(UFO.uaHas("xml")&&UFO.uaHas("safari")){var _214=document.getElementsByTagName("title")[0].firstChild.nodeValue=document.getElementsByTagName("title")[0].firstChild.nodeValue.slice(0,47)+" - Flash Player Installation";}else{var _214=document.title=document.title.slice(0,47)+" - Flash Player Installation";}var _215=UFO.pluginType=="ax"?"ActiveX":"PlugIn";var _216=typeof _20f.xiurlcancel!="undefined"?"&xiUrlCancel="+_20f.xiurlcancel:"";var _217=typeof _20f.xiurlfailed!="undefined"?"&xiUrlFailed="+_20f.xiurlfailed:"";UFO.foList["xi-dia"]={movie:_20f.ximovie,width:_20f.xiwidth,height:_20f.xiheight,majorversion:"6",build:"65",flashvars:"MMredirectURL="+_213+"&MMplayerType="+_215+"&MMdoctitle="+_214+_216+_217};UFO.writeSWF("xi-dia");},expressInstallCallback:function(){var _218=document.getElementsByTagName("body")[0];var _219=document.getElementById("xi-con");_218.removeChild(_219);UFO.createCSS("body","height:auto; overflow:auto;");UFO.createCSS("html","height:auto; overflow:auto;");},cleanupIELeaks:function(){var _21a=document.getElementsByTagName("object");var _21b=_21a.length;for(var i=0;i<_21b;i++){_21a[i].style.display="none";for(var x in _21a[i]){if(typeof _21a[i][x]=="function"){_21a[i][x]=null;}}}}};if(typeof window.attachEvent!="undefined"&&UFO.uaHas("ieWin")){window.attachEvent("onunload",UFO.cleanupIELeaks);}}if(!dojo._hasResource["agi.livechat"]){dojo._hasResource["agi.livechat"]=true;dojo.provide("agi.livechat");dojo.declare("agi.livechat.KanaLiveChat",[agi.classes.Identified],{gIChannelID:"Default",gServer:"responselive03.kanaondemand.com",gAttachedData:"<Sample Test>",bEnterOnQueuePage:false,prefillValues:{CUSTOMER_NAME:"",CUSTOMER_QUERY:"",CUSTOMFIELD1:""},agentOnlyValues:{PAGE_URL:"Page URL",PAGE_TITLE:"Page Title",CUSTOMER_ID:"Customer"},HBUsePageContents:false,gUseDynamicStartPage:true,gDSPLauncherPageName:"./responseLiveLauncher.html",gChatWindowWidth:400,gChatWindowHeight:500,gChatWindowProperties:"width="+400+",height="+500+",menubar=no,location=no,directories=no,status=no,toolbar=no,scrollbars=auto,resizable=yes,screenX=10,screenY=10,left=10,top=10",gHTTP:"http://",gHTTPS:"https://",constructor:function(_21c){dojo.mixin(this,_21c);if(_21c.prefill){for(var k in _21c.prefill){if(_21c.prefill[k]){this.prefillValues[k]=_21c.prefill[k];}}}if(_21c.agentOnly){for(var k in _21c.agentOnly){if(_21c.agentOnly[k]){this.agentOnlyValues[k]=_21c.agentOnly[k];}}}},startChat:function(){this._startChat(this.gIChannelID,this.gServer,this.gAttachedData,this.prefillValues,this.agentOnlyValues,this.bEnterOnQueuePage);},startChatAndCobrowse:function(){this._startChatAndCobrowse(this.gIChannelID,this.gServer,this.gAttachedData,this.prefillValues,this.agentOnlyValues,this.bEnterOnQueuePage);},startChatWithEscalation:function(){this._startChatWithEscalation(this.gIChannelID,this.gServer,this.gAttachedData,this.prefillValues,this.agentOnlyValues,this.bEnterOnQueuePage);},_startChat:function(_21d,_21e,_21f,_220,_221,_222){var _223="CHAT_ONLY";this.launchChat(_21d,_21e,_21f,_220,_221,_222,_223);},_startChatAndCobrowse:function(_224,_225,_226,_227,_228,_229){var _22a="COBROWSE";this.launchChat(_224,_225,_226,_227,_228,_229,_22a);},_startChatWithEscalation:function(_22b,_22c,_22d,_22e,_22f,_230){var _231="COBROWSE_ESCALATION";this.launchChat(_22b,_22c,_22d,_22e,_22f,_230,_231);},launchChat:function(_232,_233,_234,_235,_236,_237,_238){this.openInitialWindow();this.finishLaunchingChat(_232,_233,_234,_235,_236,_237,_238);},finishLaunchingChat:function(_239,_23a,_23b,_23c,_23d,_23e,_23f){var _240=this.getChatWindow();this.saveChatParameters(_240,_239,_23a,_23b,_23c,_23d,_23e,_23f);if(this.alreadyConavigating()){this.handleRecursiveLaunch(_239,_23a,_240);return;}if(this.browserDoesNotSupportDOM2()||this.isIEonMac()){this.handleUnsupportedBrowser(_239,_23a,_240);return;}if(!this.areCookiesEnabled()){this.handleDisabledCookies(_239,_23a,_240);return;}if(window.location.protocol=="https:"){this.createAndSubmitForm();}else{this.checkSSLEnabledAndSubmit(_239,_23a);}},createAndSubmitForm:function(){var _241=this.getChatWindow();var _242=this.createForm(_241.serverName,_241);if(typeof (this.gUseDynamicStartPage)!="undefined"&&this.gUseDynamicStartPage){this.addFormField(_242,_241,"DSP_LAUNCHER_PAGE_NAME",this.gDSPLauncherPageName);}this.addFormField(_242,_241,"CHAT_WINDOW_WIDTH",this.gChatWindowWidth);this.addFormField(_242,_241,"CHAT_WINDOW_PROPERTIES",this.gChatWindowProperties);this.addFormField(_242,_241,"ICHANNEL_ID",_241.iChannel);this.addFormField(_242,_241,"ATTACHED_DATA",_241.attachedData);this.addFormField(_242,_241,"ENTER_ON_QUEUE_PAGE",_241.enterOnQueuePage);this.addFormField(_242,_241,"CHAT_LAUNCH_MODE",_241.chatLaunchMode);this.addFormField(_242,_241,"AGENT_VISIBLE_DATA",this.createAgentVisibleDataString(_241.agentOnlyValues));this.addFormField(_242,_241,"REFERRER_URL",window.location.href);var _243=_241.prefillValues;for(prefillItem in _243){this.addFormField(_242,_241,prefillItem,_243[prefillItem]);}_242.submit();},openInitialWindow:function(){var _244=window.open("",this.getChatWindowName(),this.getWinProperties());_244.document.write("<html><body></body></html>");_244.document.close();this.setChatWindow(_244);this.origChatWindow=_244;},createForm:function(_245,win){var _246=win.document.createElement("form");_246.method="post";_246.target="_self";_246.action=this.gHTTPS+_245+"/CONAV/CHAT/ChatPreLaunch";win.document.body.appendChild(_246);return _246;},DATA_SEPARATOR:"_HB_",createAgentVisibleDataString:function(_247){var _248="";for(agentItem in _247){if(this.isNonEmptyString(_248)){_248+=this.DATA_SEPARATOR;}_248+=agentItem+this.DATA_SEPARATOR+_247[agentItem];}return _248;},addFormField:function(_249,win,name,_24a){if(!this.isNonEmptyString(name)||!this.isNonEmptyString(_24a)){return;}var _24b=win.document.createElement("input");_24b.type="hidden";_24b.name=name;_24b.value=_24a;_249.appendChild(_24b);},alreadyConavigating:function(){return (typeof (isHipboneSharedWindow)!="undefined");},handleRecursiveLaunch:function(_24c,_24d,win){win.location.href=this.gHTTPS+_24d+"/CONAV/chat/errorpages/recursiveConav.jsp?ICHANNEL_ID="+_24c;},browserDoesNotSupportDOM2:function(){return (null==document.getElementById);},handleUnsupportedBrowser:function(_24e,_24f,win){win.location.href=this.gHTTPS+_24f+"/CONAV/CHAT/ChatPreLaunch?ICHANNEL_ID="+_24e;},areCookiesEnabled:function(){var time=(new Date()).getTime();this.setTestCookie(time);if(this.theCookieIsSet(time)){this.removeTestCookie(time);return true;}return false;},setTestCookie:function(_250){document.cookie="hbcookietest="+_250;},theCookieIsSet:function(_251){var _252=document.cookie;return (this.isNonEmptyString(_252)&&_252.indexOf(_251)>-1);},removeTestCookie:function(_253){document.cookie="hbcookietest="+_253+"; expires=Fri, 02-Jan-1970 00:00:00 GMT";},handleDisabledCookies:function(_254,_255,win){win.location.href=this.gHTTP+_255+"/CONAV/chat/errorpages/cookiesDisabled.jsp?ICHANNEL_ID="+_254;},checkSSLEnabledAndSubmit:function(_256,_257){this.createAndSubmitForm();var _258=new Image(1,1);_258.onerror=dojo.hitch(this,function(){this.handleChatNoSSL(_256,_257);});_258.src=this.gHTTPS+_257+"/CONAV/HTD/Default/shared/images/blank.gif?time="+(new Date()).getTime();},handleChatNoSSL:function(_259,_25a){var link=this.gHTTP+_25a+"/CONAV/chat/errorpages/sslDisabled.jsp?ICHANNEL_ID="+_259;window.open(link,this.getChatWindowName(),this.getWinProperties());this.getChatWindow().close();},saveChatParameters:function(_25b,_25c,_25d,_25e,_25f,_260,_261,_262){_25b.iChannel=_25c;_25b.serverName=_25d;_25b.attachedData=_25e;_25b.prefillValues=_25f;_25b.agentOnlyValues=_260;_25b.enterOnQueuePage=_261;_25b.chatLaunchMode=_262;},setAOLChatWindow:function(_263){this.setChatWindow(_263);this.finishLaunchingChat(iChannel,serverName,attachedData,prefillValues,agentOnlyValues,enterOnQueuePage,chatLaunchMode);},gChatLaunchWindow:null,setChatWindow:function(_264){window.gChatLaunchWindow=_264;},getChatWindow:function(){return window.gChatLaunchWindow;},getChatWindowName:function(){return "_blank";},getWinProperties:function(){return this.gChatWindowProperties;},isAOL:function(){return (navigator.appVersion.toLowerCase().indexOf("aol")!=-1);},isInternetExplorer:function(){return (navigator.userAgent.toLowerCase().indexOf("msie")!=-1);},isMacKana:function(){return (navigator.userAgent.toLowerCase().indexOf("mac")!=-1);},isIEonMac:function(){return (this.isInternetExplorer()&&this.isMacKana());},isNonEmptyString:function(str){if(null==str||str==""){return false;}return true;},goToAfterLaunchUrl:function(){if(typeof (window.gAfterLaunchURL)=="undefined"){return;}window.location.href=window.gAfterLaunchURL;}});}if(!dojo._hasResource["ag.livechat"]){dojo._hasResource["ag.livechat"]=true;dojo.provide("ag.livechat");ag.livechat.url="chat.imgag.com";ag.livechat.channels={"help":"kkNeDc4793859","cardstore":"ND6Q9m5511343"};ag.livechat.getChannel=function(_265){return ag.livechat.channels[_265];};dojo.declare("ag.livechat.KanaLiveChat",[agi.livechat.KanaLiveChat],{agentOnlyValues:{PAGE_URL:"www.americangreetings.com",PAGE_TITLE:"American Greetings Homepage",CUSTOMER_ID:"American Greetings Customer"}});}if(!dojo._hasResource["ag.controllers.KanaLiveChat"]){dojo._hasResource["ag.controllers.KanaLiveChat"]=true;dojo.provide("ag.controllers.KanaLiveChat");dojo.declare("ag.controllers.KanaLiveChat",[agi.classes.Identified],{constructor:function(){dojo.subscribe("ag/livechat/show",dojo.hitch(this,this.openChat));},openChat:function(data){if(data==null){data={"channel":"help"};}this.startChat(true,data.channel);},startChat:function(_266,_267){var _268={};_268.gIChannelID=ag.livechat.getChannel(_267);_268.gServer=ag.livechat.url;var _269=agi.cookie.AGICookie.getCookieValue("customer","email");var name=agi.cookie.AGICookie.getCookieValue("customer","name");var _26a=agi.cookie.AGICookie.getCookieValue("customer","guest");if(_269&&!_26a){_268.prefill={"CUSTOMER_NAME":name,"CUSTOMER_EMAIL":_269};}_268.agentOnly={"CUSTOMER_ID":_269,"PAGE_URL":window.location,"PAGE_TITLE":document.title};this.chat=new ag.livechat.KanaLiveChat(_268);this.chat.startChatWithEscalation();}});}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(_26b,_26c){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _26d=dojo.date.stamp._isoRegExp.exec(_26b),_26e=null;if(_26d){_26d.shift();if(_26d[1]){_26d[1]--;}if(_26d[6]){_26d[6]*=1000;}if(_26c){_26c=new Date(_26c);dojo.forEach(dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _26c["get"+prop]();}),function(_26f,_270){_26d[_270]=_26d[_270]||_26f;});}_26e=new Date(_26d[0]||1970,_26d[1]||0,_26d[2]||1,_26d[3]||0,_26d[4]||0,_26d[5]||0,_26d[6]||0);if(_26d[0]<100){_26e.setFullYear(_26d[0]||1970);}var _271=0,_272=_26d[7]&&_26d[7].charAt(0);if(_272!="Z"){_271=((_26d[8]||0)*60)+(Number(_26d[9])||0);if(_272!="-"){_271*=-1;}}if(_272){_271-=_26e.getTimezoneOffset();}if(_271){_26e.setTime(_26e.getTime()+_271*60000);}}return _26e;};dojo.date.stamp.toISOString=function(_273,_274){var _275=function(n){return (n<10)?"0"+n:n;};_274=_274||{};var _276=[],_277=_274.zulu?"getUTC":"get",date="";if(_274.selector!="time"){var year=_273[_277+"FullYear"]();date=["0000".substr((year+"").length)+year,_275(_273[_277+"Month"]()+1),_275(_273[_277+"Date"]())].join("-");}_276.push(date);if(_274.selector!="date"){var time=[_275(_273[_277+"Hours"]()),_275(_273[_277+"Minutes"]()),_275(_273[_277+"Seconds"]())].join(":");var _278=_273[_277+"Milliseconds"]();if(_274.milliseconds){time+="."+(_278<100?"0":"")+_275(_278);}if(_274.zulu){time+="Z";}else{if(_274.selector!="time"){var _279=_273.getTimezoneOffset();var _27a=Math.abs(_279);time+=(_279>0?"-":"+")+_275(Math.floor(_27a/60))+":"+_275(_27a%60);}}_276.push(time);}return _276.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");new Date("X");dojo.parser=new function(){var d=dojo;this._attrName=d._scopeName+"Type";this._query="["+this._attrName+"]";function _27b(_27c){if(d.isString(_27c)){return "string";}if(typeof _27c=="number"){return "number";}if(typeof _27c=="boolean"){return "boolean";}if(d.isFunction(_27c)){return "function";}if(d.isArray(_27c)){return "array";}if(_27c instanceof Date){return "date";}if(_27c instanceof d._Url){return "url";}return "object";};function _27d(_27e,type){switch(type){case "string":return _27e;case "number":return _27e.length?Number(_27e):NaN;case "boolean":return typeof _27e=="boolean"?_27e:!(_27e.toLowerCase()=="false");case "function":if(d.isFunction(_27e)){_27e=_27e.toString();_27e=d.trim(_27e.substring(_27e.indexOf("{")+1,_27e.length-1));}try{if(_27e===""||_27e.search(/[^\w\.]+/i)!=-1){return new Function(_27e);}else{return d.getObject(_27e,false)||new Function(_27e);}}catch(e){return new Function();}case "array":return _27e?_27e.split(/\s*,\s*/):[];case "date":switch(_27e){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_27e);}case "url":return d.baseUrl+_27e;default:return d.fromJson(_27e);}};var _27f={};dojo.connect(dojo,"extend",function(){_27f={};});function _280(_281){if(!_27f[_281]){var cls=d.getObject(_281);if(!cls){return null;}var _282=cls.prototype;var _283={},_284={};for(var name in _282){if(name.charAt(0)=="_"){continue;}if(name in _284){continue;}var _285=_282[name];_283[name]=_27b(_285);}_27f[_281]={cls:cls,params:_283};}return _27f[_281];};this._functionFromScript=function(_286){var _287="";var _288="";var _289=_286.getAttribute("args");if(_289){d.forEach(_289.split(/\s*,\s*/),function(part,idx){_287+="var "+part+" = arguments["+idx+"]; ";});}var _28a=_286.getAttribute("with");if(_28a&&_28a.length){d.forEach(_28a.split(/\s*,\s*/),function(part){_287+="with("+part+"){";_288+="}";});}return new Function(_287+_286.innerHTML+_288);};this.instantiate=function(_28b,_28c,args){var _28d=[],dp=dojo.parser;_28c=_28c||{};args=args||{};d.forEach(_28b,function(obj){if(!obj){return;}var node,type,_28e,_28f,_290;if(obj.node){node=obj.node;type=obj.type;_28e=obj.clsInfo||(type&&_280(type));_28f=_28e&&_28e.cls;_290=obj.scripts;}else{node=obj;type=dp._attrName in _28c?_28c[dp._attrName]:node.getAttribute(dp._attrName);_28e=type&&_280(type);_28f=_28e&&_28e.cls;_290=(_28f&&(_28f._noScript||_28f.prototype._noScript)?[]:d.query("> script[type^='dojo/']",node));}if(!_28e){throw new Error("Could not load class '"+type);}var _291={},_292=node.attributes;if(args.defaults){dojo.mixin(_291,args.defaults);}if(obj.inherited){dojo.mixin(_291,obj.inherited);}for(var name in _28e.params){var item=name in _28c?{value:_28c[name],specified:true}:_292.getNamedItem(name);if(!item||(!item.specified&&(!dojo.isIE||name.toLowerCase()!="value"))){continue;}var _293=item.value;switch(name){case "class":_293="className" in _28c?_28c.className:node.className;break;case "style":_293="style" in _28c?_28c.style:(node.style&&node.style.cssText);}var _294=_28e.params[name];if(typeof _293=="string"){_291[name]=_27d(_293,_294);}else{_291[name]=_293;}}var _295=[],_296=[];d.forEach(_290,function(_297){node.removeChild(_297);var _298=_297.getAttribute("event"),type=_297.getAttribute("type"),nf=d.parser._functionFromScript(_297);if(_298){if(type=="dojo/connect"){_295.push({event:_298,func:nf});}else{_291[_298]=nf;}}else{_296.push(nf);}});var _299=_28f.markupFactory||_28f.prototype&&_28f.prototype.markupFactory;var _29a=_299?_299(_291,node,_28f):new _28f(_291,node);_28d.push(_29a);var _29b=node.getAttribute("jsId");if(_29b){d.setObject(_29b,_29a);}d.forEach(_295,function(_29c){d.connect(_29a,_29c.event,null,_29c.func);});d.forEach(_296,function(func){func.call(_29a);});});if(!_28c._started){d.forEach(_28d,function(_29d){if(!args.noStart&&_29d&&_29d.startup&&!_29d._started&&(!_29d.getParent||!_29d.getParent())){_29d.startup();}});}return _28d;};this.parse=function(_29e,args){var root;if(!args&&_29e&&_29e.rootNode){args=_29e;root=args.rootNode;}else{root=_29e;}var _29f=this._attrName;function scan(_2a0,list){var _2a1=dojo.clone(_2a0.inherited);dojo.forEach(["dir","lang"],function(name){var val=_2a0.node.getAttribute(name);if(val){_2a1[name]=val;}});var _2a2=_2a0.scripts;var _2a3=!_2a0.clsInfo||!_2a0.clsInfo.cls.prototype.stopParser;for(var _2a4=_2a0.node.firstChild;_2a4;_2a4=_2a4.nextSibling){if(_2a4.nodeType==1){var type=_2a3&&_2a4.getAttribute(_29f);if(type){var _2a5={"type":type,clsInfo:_280(type),node:_2a4,scripts:[],inherited:_2a1};list.push(_2a5);scan(_2a5,list);}else{if(_2a2&&_2a4.nodeName.toLowerCase()=="script"){type=_2a4.getAttribute("type");if(type&&/^dojo\//i.test(type)){_2a2.push(_2a4);}}else{if(_2a3){scan({node:_2a4,inherited:_2a1},list);}}}}}};var list=[];scan({node:root?dojo.byId(root):dojo.body(),inherited:(args&&args.inherited)||{dir:dojo._isBodyLtr()?"ltr":"rtl"}},list);return this.instantiate(list,null,args);};}();(function(){var _2a6=function(){if(dojo.config.parseOnLoad){dojo.parser.parse();}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,_2a6);}else{dojo._loaders.unshift(_2a6);}})();}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(str,_2a7){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_2a7&&_2a7.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(arr,re,_2a8){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return dojo.regexp.group(b.join("|"),_2a8);};dojo.regexp.group=function(_2a9,_2aa){return "("+(_2aa?"?:":"")+_2a9+")";};}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.data.util.sorter.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};dojo.data.util.sorter.createSortFunction=function(_2ab,_2ac){var _2ad=[];function _2ae(attr,dir,comp,s){return function(_2af,_2b0){var a=s.getValue(_2af,attr);var b=s.getValue(_2b0,attr);return dir*comp(a,b);};};var _2b1;var map=_2ac.comparatorMap;var bc=dojo.data.util.sorter.basicComparator;for(var i=0;i<_2ab.length;i++){_2b1=_2ab[i];var attr=_2b1.attribute;if(attr){var dir=(_2b1.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_2ad.push(_2ae(attr,dir,comp,_2ac));}}return function(rowA,rowB){var i=0;while(i<_2ad.length){var ret=_2ad[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.data.util.simpleFetch.fetch=function(_2b2){_2b2=_2b2||{};if(!_2b2.store){_2b2.store=this;}var self=this;var _2b3=function(_2b4,_2b5){if(_2b5.onError){var _2b6=_2b5.scope||dojo.global;_2b5.onError.call(_2b6,_2b4,_2b5);}};var _2b7=function(_2b8,_2b9){var _2ba=_2b9.abort||null;var _2bb=false;var _2bc=_2b9.start?_2b9.start:0;var _2bd=(_2b9.count&&(_2b9.count!==Infinity))?(_2bc+_2b9.count):_2b8.length;_2b9.abort=function(){_2bb=true;if(_2ba){_2ba.call(_2b9);}};var _2be=_2b9.scope||dojo.global;if(!_2b9.store){_2b9.store=self;}if(_2b9.onBegin){_2b9.onBegin.call(_2be,_2b8.length,_2b9);}if(_2b9.sort){_2b8.sort(dojo.data.util.sorter.createSortFunction(_2b9.sort,self));}if(_2b9.onItem){for(var i=_2bc;(i<_2b8.length)&&(i<_2bd);++i){var item=_2b8[i];if(!_2bb){_2b9.onItem.call(_2be,item,_2b9);}}}if(_2b9.onComplete&&!_2bb){var _2bf=null;if(!_2b9.onItem){_2bf=_2b8.slice(_2bc,_2bd);}_2b9.onComplete.call(_2be,_2bf,_2b9);}};this._fetchItems(_2b2,_2b7,_2b3);return _2b2;};}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(_2c0,_2c1){var rxp="^";var c=null;for(var i=0;i<_2c0.length;i++){c=_2c0.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_2c0.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_2c1){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};}if(!dojo._hasResource["dijit._CssStateMixin"]){dojo._hasResource["dijit._CssStateMixin"]=true;dojo.provide("dijit._CssStateMixin");dojo.declare("dijit._CssStateMixin",[],{cssStateNodes:{},postCreate:function(){this.inherited(arguments);dojo.forEach(["onmouseenter","onmouseleave","onmousedown"],function(e){this.connect(this.domNode,e,"_cssMouseEvent");},this);this.connect(this,"set",function(name,_2c2){if(arguments.length>=2&&{disabled:true,readOnly:true,checked:true,selected:true}[name]){this._setStateClass();}});dojo.forEach(["_onFocus","_onBlur"],function(ap){this.connect(this,ap,"_setStateClass");},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._setStateClass();},_cssMouseEvent:function(_2c3){if(!this.disabled){switch(_2c3.type){case "mouseenter":case "mouseover":this._hovering=true;this._active=this._mouseDown;break;case "mouseleave":case "mouseout":this._hovering=false;this._active=false;break;case "mousedown":this._active=true;this._mouseDown=true;var _2c4=this.connect(dojo.body(),"onmouseup",function(){this._active=false;this._mouseDown=false;this._setStateClass();this.disconnect(_2c4);});break;}this._setStateClass();}},_setStateClass:function(){var _2c5=this.baseClass.split(" ");function _2c6(_2c7){_2c5=_2c5.concat(dojo.map(_2c5,function(c){return c+_2c7;}),"dijit"+_2c7);};if(!this.isLeftToRight()){_2c6("Rtl");}if(this.checked){_2c6("Checked");}if(this.state){_2c6(this.state);}if(this.selected){_2c6("Selected");}if(this.disabled){_2c6("Disabled");}else{if(this.readOnly){_2c6("ReadOnly");}else{if(this._active){_2c6("Active");}else{if(this._hovering){_2c6("Hover");}}}}if(this._focused){_2c6("Focused");}var tn=this.stateNode||this.domNode,_2c8={};dojo.forEach(tn.className.split(" "),function(c){_2c8[c]=true;});if("_stateClasses" in this){dojo.forEach(this._stateClasses,function(c){delete _2c8[c];});}dojo.forEach(_2c5,function(c){_2c8[c]=true;});var _2c9=[];for(var c in _2c8){_2c9.push(c);}tn.className=_2c9.join(" ");this._stateClasses=_2c5;},_trackMouseState:function(node,_2ca){var _2cb=false,_2cc=false,_2cd=false;var self=this,cn=dojo.hitch(this,"connect",node);function _2ce(){var _2cf=("disabled" in self&&self.disabled)||("readonly" in self&&self.readonly);dojo.toggleClass(node,_2ca+"Hover",_2cb&&!_2cc&&!_2cf);dojo.toggleClass(node,_2ca+"Active",_2cc&&!_2cf);dojo.toggleClass(node,_2ca+"Focused",_2cd&&!_2cf);};cn("onmouseenter",function(){_2cb=true;_2ce();});cn("onmouseleave",function(){_2cb=false;_2cc=false;_2ce();});cn("onmousedown",function(){_2cc=true;_2ce();});cn("onmouseup",function(){_2cc=false;_2ce();});cn("onfocus",function(){_2cd=true;_2ce();});cn("onblur",function(){_2cd=false;_2ce();});this.connect(this,"set",function(name,_2d0){if(name=="disabled"||name=="readOnly"){_2ce();}});}});}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{}}return bm;},moveToBookmark:function(_2d1){var _2d2=dojo.doc,mark=_2d1.mark;if(mark){if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{}}else{if(_2d2.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(dojo.isArray(mark)){rg=_2d2.body.createControlRange();dojo.forEach(mark,function(n){rg.addElement(n);});}else{rg=_2d2.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_2d3){var node=!dijit._curFocus||(menu&&dojo.isDescendant(dijit._curFocus,menu.domNode))?dijit._prevFocus:dijit._curFocus;return {node:node,bookmark:(node==dijit._curFocus)&&dojo.withGlobal(_2d3||dojo.global,dijit.getBookmark),openedForWindow:_2d3};},focus:function(_2d4){if(!_2d4){return;}var node="node" in _2d4?_2d4.node:_2d4,_2d5=_2d4.bookmark,_2d6=_2d4.openedForWindow,_2d7=_2d5?_2d5.isCollapsed:false;if(node){var _2d8=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_2d8&&_2d8.focus){try{_2d8.focus();}catch(e){}}dijit._onFocusNode(node);}if(_2d5&&dojo.withGlobal(_2d6||dojo.global,dijit.isCollapsed)&&!_2d7){if(_2d6){_2d6.focus();}try{dojo.withGlobal(_2d6||dojo.global,dijit.moveToBookmark,null,[_2d5]);}catch(e2){}}},_activeStack:[],registerIframe:function(_2d9){return dijit.registerWin(_2d9.contentWindow,_2d9);},unregisterIframe:function(_2da){dijit.unregisterWin(_2da);},registerWin:function(_2db,_2dc){var _2dd=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);if(dojo.isIE&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}dijit._onTouchNode(_2dc||evt.target||evt.srcElement,"mouse");};var doc=dojo.isIE?_2db.document.documentElement:_2db.document;if(doc){if(dojo.isIE){doc.attachEvent("onmousedown",_2dd);var _2de=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement)){dijit._onFocusNode(_2dc||evt.srcElement);}else{dijit._onTouchNode(_2dc||evt.srcElement);}};doc.attachEvent("onactivate",_2de);var _2df=function(evt){dijit._onBlurNode(_2dc||evt.srcElement);};doc.attachEvent("ondeactivate",_2df);return function(){doc.detachEvent("onmousedown",_2dd);doc.detachEvent("onactivate",_2de);doc.detachEvent("ondeactivate",_2df);doc=null;};}else{doc.addEventListener("mousedown",_2dd,true);var _2e0=function(evt){dijit._onFocusNode(_2dc||evt.target);};doc.addEventListener("focus",_2e0,true);var _2e1=function(evt){dijit._onBlurNode(_2dc||evt.target);};doc.addEventListener("blur",_2e1,true);return function(){doc.removeEventListener("mousedown",_2dd,true);doc.removeEventListener("focus",_2e0,true);doc.removeEventListener("blur",_2e1,true);doc=null;};}}},unregisterWin:function(_2e2){_2e2&&_2e2();},_onBlurNode:function(node){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(node,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _2e3=[];try{while(node){var _2e4=dojo.attr(node,"dijitPopupParent");if(_2e4){node=dijit.byId(_2e4).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===dojo.body()){break;}node=dojo.window.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_2e5=id&&dijit.byId(id);if(_2e5&&!(by=="mouse"&&_2e5.get("disabled"))){_2e3.unshift(id);}node=node.parentNode;}}}}catch(e){}dijit._setStack(_2e3,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}dijit._onTouchNode(node);if(node==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=node;dojo.publish("focusNode",[node]);},_setStack:function(_2e6,by){var _2e7=dijit._activeStack;dijit._activeStack=_2e6;for(var _2e8=0;_2e8<Math.min(_2e7.length,_2e6.length);_2e8++){if(_2e7[_2e8]!=_2e6[_2e8]){break;}}var _2e9;for(var i=_2e7.length-1;i>=_2e8;i--){_2e9=dijit.byId(_2e7[i]);if(_2e9){_2e9._focused=false;_2e9._hasBeenBlurred=true;if(_2e9._onBlur){_2e9._onBlur(by);}dojo.publish("widgetBlur",[_2e9,by]);}}for(i=_2e8;i<_2e6.length;i++){_2e9=dijit.byId(_2e6[i]);if(_2e9){_2e9._focused=true;if(_2e9._onFocus){_2e9._onFocus(by);}dojo.publish("widgetFocus",[_2e9,by]);}}}});dojo.addOnLoad(function(){var _2ea=dijit.registerWin(window);if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit.unregisterWin(_2ea);_2ea=null;});}});}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_2eb){this.pairs=[];this.returnWrappers=_2eb||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_2ec,wrap,_2ed,_2ee){this.pairs[((_2ee)?"unshift":"push")]([name,_2ec,wrap,_2ed]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){return dojo.window.getBox();};dijit.placeOnScreen=function(node,pos,_2ef,_2f0){var _2f1=dojo.map(_2ef,function(_2f2){var c={corner:_2f2,pos:{x:pos.x,y:pos.y}};if(_2f0){c.pos.x+=_2f2.charAt(1)=="L"?_2f0.x:-_2f0.x;c.pos.y+=_2f2.charAt(0)=="T"?_2f0.y:-_2f0.y;}return c;});return dijit._place(node,_2f1);};dijit._place=function(node,_2f3,_2f4){var view=dojo.window.getBox();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}var best=null;dojo.some(_2f3,function(_2f5){var _2f6=_2f5.corner;var pos=_2f5.pos;if(_2f4){_2f4(node,_2f5.aroundCorner,_2f6);}var _2f7=node.style;var _2f8=_2f7.display;var _2f9=_2f7.visibility;_2f7.visibility="hidden";_2f7.display="";var mb=dojo.marginBox(node);_2f7.display=_2f8;_2f7.visibility=_2f9;var _2fa=Math.max(view.l,_2f6.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_2fb=Math.max(view.t,_2f6.charAt(0)=="T"?pos.y:(pos.y-mb.h)),endX=Math.min(view.l+view.w,_2f6.charAt(1)=="L"?(_2fa+mb.w):pos.x),endY=Math.min(view.t+view.h,_2f6.charAt(0)=="T"?(_2fb+mb.h):pos.y),_2fc=endX-_2fa,_2fd=endY-_2fb,_2fe=(mb.w-_2fc)+(mb.h-_2fd);if(best==null||_2fe<best.overflow){best={corner:_2f6,aroundCorner:_2f5.aroundCorner,x:_2fa,y:_2fb,w:_2fc,h:_2fd,overflow:_2fe};}return !_2fe;});node.style.left=best.x+"px";node.style.top=best.y+"px";if(best.overflow&&_2f4){_2f4(node,best.aroundCorner,best.corner);}return best;};dijit.placeOnScreenAroundNode=function(node,_2ff,_300,_301){_2ff=dojo.byId(_2ff);var _302=_2ff.style.display;_2ff.style.display="";var _303=dojo.position(_2ff,true);_2ff.style.display=_302;return dijit._placeOnScreenAroundRect(node,_303.x,_303.y,_303.w,_303.h,_300,_301);};dijit.placeOnScreenAroundRectangle=function(node,_304,_305,_306){return dijit._placeOnScreenAroundRect(node,_304.x,_304.y,_304.width,_304.height,_305,_306);};dijit._placeOnScreenAroundRect=function(node,x,y,_307,_308,_309,_30a){var _30b=[];for(var _30c in _309){_30b.push({aroundCorner:_30c,corner:_309[_30c],pos:{x:x+(_30c.charAt(1)=="L"?0:_307),y:y+(_30c.charAt(0)=="T"?0:_308)}});}return dijit._place(node,_30b,_30a);};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,_30d,_30e,_30f){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAroundAlignment=function(_310,_311){var _312={};dojo.forEach(_310,function(pos){switch(pos){case "after":_312[_311?"BR":"BL"]=_311?"BL":"BR";break;case "before":_312[_311?"BL":"BR"]=_311?"BR":"BL";break;case "below":_312[_311?"BL":"BR"]=_311?"TL":"TR";_312[_311?"BR":"BL"]=_311?"TR":"TL";break;case "above":default:_312[_311?"TL":"TR"]=_311?"BL":"BR";_312[_311?"TR":"TL"]=_311?"BR":"BL";break;}});return _312;};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){return dojo.window.get(doc);};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup={_stack:[],_beginZIndex:1000,_idGen:1,moveOffScreen:function(node){var _313=node.parentNode;if(!_313||!dojo.hasClass(_313,"dijitPopup")){_313=dojo.create("div",{"class":"dijitPopup",style:{visibility:"hidden",top:"-9999px"}},dojo.body());dijit.setWaiRole(_313,"presentation");_313.appendChild(node);}var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";dojo.style(_313,{visibility:"hidden",top:"-9999px"});},getTopPopup:function(){var _314=this._stack;for(var pi=_314.length-1;pi>0&&_314[pi].parent===_314[pi-1].widget;pi--){}return _314[pi];},open:function(args){var _315=this._stack,_316=args.popup,_317=args.orient||((args.parent?args.parent.isLeftToRight():dojo._isBodyLtr())?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_318=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);var _319=_316.domNode.parentNode;if(!_319||!dojo.hasClass(_319,"dijitPopup")){this.moveOffScreen(_316.domNode);_319=_316.domNode.parentNode;}dojo.attr(_319,{id:id,style:{zIndex:this._beginZIndex+_315.length},"class":"dijitPopup "+(_316.baseClass||_316["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(dojo.isIE||dojo.isMoz){var _31a=_319.childNodes[1];if(!_31a){_31a=new dijit.BackgroundIframe(_319);}}var best=_318?dijit.placeOnScreenAroundElement(_319,_318,_317,_316.orient?dojo.hitch(_316,"orient"):null):dijit.placeOnScreen(_319,args,_317=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_319.style.visibility="visible";_316.domNode.style.visibility="visible";var _31b=[];_31b.push(dojo.connect(_319,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&args.onCancel){dojo.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _31c=this.getTopPopup();if(_31c&&_31c.onCancel){_31c.onCancel();}}}}));if(_316.onCancel){_31b.push(dojo.connect(_316,"onCancel",args.onCancel));}_31b.push(dojo.connect(_316,_316.onExecute?"onExecute":"onChange",this,function(){var _31d=this.getTopPopup();if(_31d&&_31d.onExecute){_31d.onExecute();}}));_315.push({wrapper:_319,iframe:_31a,widget:_316,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_31b});if(_316.onOpen){_316.onOpen(best);}return best;},close:function(_31e){var _31f=this._stack;while(dojo.some(_31f,function(elem){return elem.widget==_31e;})){var top=_31f.pop(),_320=top.wrapper,_321=top.iframe,_322=top.widget,_323=top.onClose;if(_322.onClose){_322.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(_322&&_322.domNode){this.moveOffScreen(_322.domNode);}else{dojo.destroy(_320);}if(_323){_323();}}}};dijit._frames=new function(){var _324=[];this.pop=function(){var _325;if(_324.length){_325=_324.pop();_325.style.display="";}else{if(dojo.isIE){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_325=dojo.doc.createElement(html);}else{_325=dojo.create("iframe");_325.src="javascript:\"\"";_325.className="dijitBackgroundIframe";dojo.style(_325,"opacity",0.1);}_325.tabIndex=-1;dijit.setWaiRole(_325,"presentation");}return _325;};this.push=function(_326){_326.style.display="none";_324.push(_326);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE||dojo.isMoz){var _327=dijit._frames.pop();node.appendChild(_327);if(dojo.isIE<7){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node);});}else{dojo.style(_327,{width:"100%",height:"100%"});}this.iframe=_327;}};dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe&&dojo.isIE<7){dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null;}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){dojo.window.scrollIntoView(node,pos);};}if(!dojo._hasResource["dojo.uacss"]){dojo._hasResource["dojo.uacss"]=true;dojo.provide("dojo.uacss");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_328=d.isOpera,maj=Math.floor,ff=d.isFF,_329=d.boxModel.replace(/-/,""),_32a={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_quirks:d.isQuirks,dj_iequirks:ie&&d.isQuirks,dj_opera:_328,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_32a["dj_"+_329]=true;var _32b="";for(var clz in _32a){if(_32a[clz]){_32b+=clz+" ";}}html.className=d.trim(html.className+" "+_32b);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var _32c="dj_rtl dijitRtl "+_32b.replace(/ /g,"-rtl ");html.className=d.trim(html.className+" "+_32c);}});})();}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_32d,node,_32e,obj,_32f,_330,_331){if(obj!=this._obj){this.stop();this._initialDelay=_330||500;this._subsequentDelay=_32f||0.9;this._minDelay=_331||10;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_32d,_32e);this._fireEventAndReload();this._evt=dojo.mixin({faux:true},evt);}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_332,_333,_334,_335,_336,_337){if(_332.keyCode){_332.charOrCode=_332.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_332.charCode){_332.charOrCode=String.fromCharCode(_332.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_332.charOrCode&&(_332.ctrlKey===undefined||_332.ctrlKey==evt.ctrlKey)&&(_332.altKey===undefined||_332.altKey==evt.altKey)&&(_332.metaKey===undefined||_332.metaKey==(evt.metaKey||false))&&(_332.shiftKey===undefined||_332.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_333,node,_334,_332,_335,_336,_337);}else{if(dijit.typematic._obj==_332){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_332){dijit.typematic.stop();}})];},addMouseListener:function(node,_338,_339,_33a,_33b,_33c){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_338,node,_339,node,_33a,_33b,_33c);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){evt.preventDefault();}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_338,node,_339,node,_33a,_33b,_33c);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_33d,_33e,_33f,_340,_341,_342,_343,_344){return this.addKeyListener(_33e,_33f,_340,_341,_342,_343,_344).concat(this.addMouseListener(_33d,_340,_341,_342,_343,_344));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _345=cs.backgroundImage;var _346=(cs.borderTopColor==cs.borderRightColor)||(_345!=null&&(_345=="none"||_345=="url(invalid-url:)"));dojo[_346?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(elem,role){var _347=this.getWaiRole(elem);return role?(_347.indexOf(role)>-1):(_347.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace(this._XhtmlRoles,"").replace("wairole:",""));},setWaiRole:function(elem,role){var _348=dojo.attr(elem,"role")||"";if(!this._XhtmlRoles.test(_348)){dojo.attr(elem,"role",role);}else{if((" "+_348+" ").indexOf(" "+role+" ")<0){var _349=dojo.trim(_348.replace(this._XhtmlRoles,""));var _34a=dojo.trim(_348.replace(_349,""));dojo.attr(elem,"role",_34a+(_34a?" ":"")+role);}}},removeWaiRole:function(elem,role){var _34b=dojo.attr(elem,"role");if(!_34b){return;}if(role){var t=dojo.trim((" "+_34b+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_34c){return elem.hasAttribute?elem.hasAttribute("aria-"+_34c):!!elem.getAttribute("aria-"+_34c);},getWaiState:function(elem,_34d){return elem.getAttribute("aria-"+_34d)||"";},setWaiState:function(elem,_34e,_34f){elem.setAttribute("aria-"+_34e,_34f);},removeWaiState:function(elem,_350){elem.removeAttribute("aria-"+_350);}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"_connect",function(_351,_352){if(_351&&dojo.isFunction(_351._onConnect)){_351._onConnect(_352);}});dijit._connectOnUseEventHandler=function(_353){};dijit._lastKeyDownNode=null;if(dojo.isIE){(function(){var _354=function(evt){dijit._lastKeyDownNode=evt.srcElement;};dojo.doc.attachEvent("onkeydown",_354);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",_354);});})();}else{dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target;},true);}(function(){var _355={},_356=function(_357){var dc=_357.declaredClass;if(!_355[dc]){var r=[],_358,_359=_357.constructor.prototype;for(var _35a in _359){if(dojo.isFunction(_359[_35a])&&(_358=_35a.match(/^_set([a-zA-Z]*)Attr$/))&&_358[1]){r.push(_358[1].charAt(0).toLowerCase()+_358[1].substr(1));}}_355[dc]=r;}return _355[dc]||[];};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_35b,_35c){this.create(_35b,_35c);},create:function(_35d,_35e){this.srcNodeRef=dojo.byId(_35e);this._connects=[];this._subscribes=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_35d){this.params=_35d;dojo.mixin(this,_35d);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _35f=this.srcNodeRef;if(_35f&&_35f.parentNode){_35f.parentNode.replaceChild(this.domNode,_35f);}for(attr in this.params){this._onConnect(attr);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _360=function(attr,_361){if((_361.params&&attr in _361.params)||_361[attr]){_361.set(attr,_361[attr]);}};for(var attr in this.attributeMap){_360(attr,this);}dojo.forEach(_356(this),function(a){if(!(a in this.attributeMap)){_360(a,this);}},this);},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.create("div");},postCreate:function(){if(this.baseClass){var _362=this.baseClass.split(" ");if(!this.isLeftToRight()){_362=_362.concat(dojo.map(_362,function(name){return name+"Rtl";}));}dojo.addClass(this.domNode,_362);}},startup:function(){this._started=true;},destroyRecursive:function(_363){this._beingDestroyed=true;this.destroyDescendants(_363);this.destroy(_363);},destroy:function(_364){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_365){dfe(_365,d.disconnect);});dfe(this._subscribes,function(_366){dun(_366);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_364);dijit.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_367){if(this.bgIframe){this.bgIframe.destroy(_367);delete this.bgIframe;}if(this.domNode){if(_367){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_367){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_368){dojo.forEach(this.getChildren(),function(_369){if(_369.destroyRecursive){_369.destroyRecursive(_368);}});},uninitialize:function(){return false;},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},_onConnect:function(_36a){if(_36a in this._deferredConnects){var _36b=this[this._deferredConnects[_36a]||"domNode"];this.connect(_36b,_36a.toLowerCase(),_36a);delete this._deferredConnects[_36a];}},_setClassAttr:function(_36c){var _36d=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(_36d,this["class"]);this["class"]=_36c;dojo.addClass(_36d,_36c);},_setStyleAttr:function(_36e){var _36f=this[this.attributeMap.style||"domNode"];if(dojo.isObject(_36e)){dojo.style(_36f,_36e);}else{if(_36f.style.cssText){_36f.style.cssText+="; "+_36e;}else{_36f.style.cssText=_36e;}}this.style=_36e;},setAttribute:function(attr,_370){dojo.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_370);},_attrToDom:function(attr,_371){var _372=this.attributeMap[attr];dojo.forEach(dojo.isArray(_372)?_372:[_372],function(_373){var _374=this[_373.node||_373||"domNode"];var type=_373.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(_371)){_371=dojo.hitch(this,_371);}var _375=_373.attribute?_373.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);dojo.attr(_374,_375,_371);break;case "innerText":_374.innerHTML="";_374.appendChild(dojo.doc.createTextNode(_371));break;case "innerHTML":_374.innerHTML=_371;break;case "class":dojo.removeClass(_374,this[attr]);dojo.addClass(_374,_371);break;}},this);this[attr]=_371;},attr:function(name,_376){if(dojo.config.isDebug){var _377=arguments.callee._ach||(arguments.callee._ach={}),_378=(arguments.callee.caller||"unknown caller").toString();if(!_377[_378]){dojo.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_378,"","2.0");_377[_378]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},get:function(name){var _379=this._getAttrNames(name);return this[_379.g]?this[_379.g]():this[name];},set:function(name,_37a){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _37b=this._getAttrNames(name);if(this[_37b.s]){var _37c=this[_37b.s].apply(this,Array.prototype.slice.call(arguments,1));}else{if(name in this.attributeMap){this._attrToDom(name,_37a);}var _37d=this[name];this[name]=_37a;}return _37c||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[];},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[];},nodesWithKeyClick:["input","button"],connect:function(obj,_37e,_37f){var d=dojo,dc=d._connect,_380=[];if(_37e=="ondijitclick"){if(dojo.indexOf(this.nodesWithKeyClick,obj.nodeName.toLowerCase())==-1){var m=d.hitch(this,_37f);_380.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;e.preventDefault();}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target===dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e);}}));}_37e="onclick";}_380.push(dc(obj,_37e,this,_37f));this._connects.push(_380);return _380;},disconnect:function(_381){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_381){dojo.forEach(_381,dojo.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_382,_383){var d=dojo,_384=d.subscribe(_382,this,_383);this._subscribes.push(_384);return _384;},unsubscribe:function(_385){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_385){dojo.unsubscribe(_385);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):dojo._isBodyLtr();},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},placeAt:function(_386,_387){if(_386.declaredClass&&_386.addChild){_386.addChild(this,_387);}else{dojo.place(this.domNode,_386,_387);}return this;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});})();}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_388,map,_389,_38a){_38a=_38a||dojo.global;_389=_389?dojo.hitch(_38a,_389):function(v){return v;};return _388.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_38b,key,_38c){var _38d=dojo.getObject(key,false,map);if(_38c){_38d=dojo.getObject(_38c,false,_38a).call(_38a,_38d,key);}return _389(_38d,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");(function(){var _38e={};dojo.cache=function(_38f,url,_390){if(typeof _38f=="string"){var _391=dojo.moduleUrl(_38f,url);}else{_391=_38f;_390=url;}var key=_391.toString();var val=_390;if(_390!=undefined&&!dojo.isString(_390)){val=("value" in _390?_390.value:undefined);}var _392=_390&&_390.sanitize?true:false;if(typeof val=="string"){val=_38e[key]=_392?dojo.cache._sanitize(val):val;}else{if(val===null){delete _38e[key];}else{if(!(key in _38e)){val=dojo._getText(key);_38e[key]=_392?dojo.cache._sanitize(val):val;}val=_38e[key];}}return val;};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _393=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_393){val=_393[1];}}else{val="";}return val;};})();}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];},_stringRepl:function(tmpl){var _394=this.declaredClass,_395=this;return dojo.string.substitute(tmpl,this,function(_396,key){if(key.charAt(0)=="!"){_396=dojo.getObject(key.substr(1),false,_395);}if(typeof _396=="undefined"){throw new Error(_394+" template:"+key);}if(_396==null){return "";}return key.charAt(0)=="!"?_396:_396.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _397=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_397)){node=dojo._toDom(this._stringRepl(_397));if(node.nodeType!=1){throw new Error("Invalid template: "+_397);}}else{node=_397.cloneNode(true);}this.domNode=node;this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _398=dojo.parser,qry,attr;if(_398._query!="[dojoType]"){qry=_398._query;attr=_398._attrName;_398._query="[dojoType]";_398._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_398._query=qry;_398._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_399){var dest=this.containerNode;if(_399&&dest){while(_399.hasChildNodes()){dest.appendChild(_399.firstChild);}}},_attachTemplateNodes:function(_39a,_39b){_39b=_39b||function(n,p){return n.getAttribute(p);};var _39c=dojo.isArray(_39a)?_39a:(_39a.all||_39a.getElementsByTagName("*"));var x=dojo.isArray(_39a)?0:-1;for(;x<_39c.length;x++){var _39d=(x==-1)?_39a:_39c[x];if(this.widgetsInTemplate&&_39b(_39d,"dojoType")){continue;}var _39e=_39b(_39d,"dojoAttachPoint");if(_39e){var _39f,_3a0=_39e.split(/\s*,\s*/);while((_39f=_3a0.shift())){if(dojo.isArray(this[_39f])){this[_39f].push(_39d);}else{this[_39f]=_39d;}this._attachPoints.push(_39f);}}var _3a1=_39b(_39d,"dojoAttachEvent");if(_3a1){var _3a2,_3a3=_3a1.split(/\s*,\s*/);var trim=dojo.trim;while((_3a2=_3a3.shift())){if(_3a2){var _3a4=null;if(_3a2.indexOf(":")!=-1){var _3a5=_3a2.split(":");_3a2=trim(_3a5[0]);_3a4=trim(_3a5[1]);}else{_3a2=trim(_3a2);}if(!_3a4){_3a4=_3a2;}this.connect(_39d,_3a2,_3a4);}}}var role=_39b(_39d,"waiRole");if(role){dijit.setWaiRole(_39d,role);}var _3a6=_39b(_39d,"waiState");if(_3a6){dojo.forEach(_3a6.split(/\s*,\s*/),function(_3a7){if(_3a7.indexOf("-")!=-1){var pair=_3a7.split("-");dijit.setWaiState(_39d,pair[0],pair[1]);}});}}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){dojo.forEach(this._attachPoints,function(_3a8){delete this[_3a8];},this);this._attachPoints=[];this.inherited(arguments);}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_3a9,_3aa,_3ab){var _3ac=dijit._Templated._templateCache;var key=_3aa||_3a9;var _3ad=_3ac[key];if(_3ad){try{if(!_3ad.ownerDocument||_3ad.ownerDocument==dojo.doc){return _3ad;}}catch(e){}dojo.destroy(_3ad);}if(!_3aa){_3aa=dojo.cache(_3a9,{sanitize:true});}_3aa=dojo.string.trim(_3aa);if(_3ab||_3aa.match(/\$\{([^\}]+)\}/g)){return (_3ac[key]=_3aa);}else{var node=dojo._toDom(_3aa);if(node.nodeType!=1){throw new Error("Invalid template: "+_3aa);}return (_3ac[key]=node);}};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _3ae=dijit._Templated._templateCache;for(var key in _3ae){var _3af=_3ae[key];if(typeof _3af=="object"){dojo.destroy(_3af);}delete _3ae[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/'/g,"&quot;")+"\""):"";this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousedown","_onMouseDown");},_setDisabledAttr:function(_3b0){this.disabled=_3b0;dojo.attr(this.focusNode,"disabled",_3b0);if(this.valueNode){dojo.attr(this.valueNode,"disabled",_3b0);}dijit.setWaiState(this.focusNode,"disabled",_3b0);if(_3b0){this._hovering=false;this._active=false;var _3b1="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:"focusNode";dojo.forEach(dojo.isArray(_3b1)?_3b1:[_3b1],function(_3b2){var node=this[_3b2];if(dojo.isWebKit||dijit.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{this.focusNode.setAttribute("tabIndex",this.tabIndex);}},setDisabled:function(_3b3){dojo.deprecated("setDisabled("+_3b3+") is deprecated. Use set('disabled',"+_3b3+") instead.","","2.0");this.set("disabled",_3b3);},_onFocus:function(e){if(this.scrollOnFocus){dojo.window.scrollIntoView(this.domNode);}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&!this.readOnly&&this.focusNode&&(dojo.style(this.domNode,"display")!="none");},focus:function(){dijit.focus(this.focusNode);},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(_3b4){},_onChangeActive:false,_handleOnChange:function(_3b5,_3b6){this._lastValue=_3b5;if(this._lastValueReported==undefined&&(_3b6===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_3b5;}if((this.intermediateChanges||_3b6||_3b6===undefined)&&((typeof _3b5!=typeof this._lastValueReported)||this.compare(_3b5,this._lastValueReported)!=0)){this._lastValueReported=_3b5;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_3b5);}),0);}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported);}this.inherited(arguments);},setValue:function(_3b7){dojo.deprecated("dijit.form._FormWidget:setValue("+_3b7+") is deprecated.  Use set('value',"+_3b7+") instead.","","2.0");this.set("value",_3b7);},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_onMouseDown:function(e){if(!e.ctrlKey&&this.isFocusable()){var _3b8=this.connect(dojo.body(),"onmouseup",function(){if(this.isFocusable()){this.focus();}this.disconnect(_3b8);});}}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(_3b9){this.readOnly=_3b9;dojo.attr(this.focusNode,"readOnly",_3b9);dijit.setWaiState(this.focusNode,"readonly",_3b9);},postCreate:function(){this.inherited(arguments);if(dojo.isIE){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._resetValue=this.value;}},_setValueAttr:function(_3ba,_3bb){this.value=_3ba;this._handleOnChange(_3ba,_3bb);},_getValueAttr:function(){return this._lastValue;},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==dojo.keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){var te;if(dojo.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}}},_layoutHackIE7:function(){if(dojo.isIE==7){var _3bc=this.domNode;var _3bd=_3bc.parentNode;var _3be=_3bc.firstChild||_3bc;var _3bf=_3be.style.filter;var _3c0=this;while(_3bd&&_3bd.clientHeight==0){(function ping(){var _3c1=_3c0.connect(_3bd,"onscroll",function(e){_3c0.disconnect(_3c1);_3be.style.filter=(new Date()).getMilliseconds();setTimeout(function(){_3be.style.filter=_3bf;},0);});})();_3bd=_3bd.parentNode;}}}});}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(_3c2,_3c3,_3c4){_3c4=dojo.i18n.normalizeLocale(_3c4);var _3c5=_3c4.split("-");var _3c6=[_3c2,"nls",_3c3].join(".");var _3c7=dojo._loadedModules[_3c6];if(_3c7){var _3c8;for(var i=_3c5.length;i>0;i--){var loc=_3c5.slice(0,i).join("_");if(_3c7[loc]){_3c8=_3c7[loc];break;}}if(!_3c8){_3c8=_3c7.ROOT;}if(_3c8){var _3c9=function(){};_3c9.prototype=_3c8;return new _3c9();}}throw new Error("Bundle not found: "+_3c3+" in "+_3c2+" , locale="+_3c4);};dojo.i18n.normalizeLocale=function(_3ca){var _3cb=_3ca?_3ca.toLowerCase():dojo.locale;if(_3cb=="root"){_3cb="ROOT";}return _3cb;};dojo.i18n._requireLocalization=function(_3cc,_3cd,_3ce,_3cf){var _3d0=dojo.i18n.normalizeLocale(_3ce);var _3d1=[_3cc,"nls",_3cd].join(".");var _3d2="";if(_3cf){var _3d3=_3cf.split(",");for(var i=0;i<_3d3.length;i++){if(_3d0["indexOf"](_3d3[i])==0){if(_3d3[i].length>_3d2.length){_3d2=_3d3[i];}}}if(!_3d2){_3d2="ROOT";}}var _3d4=_3cf?_3d2:_3d0;var _3d5=dojo._loadedModules[_3d1];var _3d6=null;if(_3d5){if(dojo.config.localizationComplete&&_3d5._built){return;}var _3d7=_3d4.replace(/-/g,"_");var _3d8=_3d1+"."+_3d7;_3d6=dojo._loadedModules[_3d8];}if(!_3d6){_3d5=dojo["provide"](_3d1);var syms=dojo._getModuleSymbols(_3cc);var _3d9=syms.concat("nls").join("/");var _3da;dojo.i18n._searchLocalePath(_3d4,_3cf,function(loc){var _3db=loc.replace(/-/g,"_");var _3dc=_3d1+"."+_3db;var _3dd=false;if(!dojo._loadedModules[_3dc]){dojo["provide"](_3dc);var _3de=[_3d9];if(loc!="ROOT"){_3de.push(loc);}_3de.push(_3cd);var _3df=_3de.join("/")+".js";_3dd=dojo._loadPath(_3df,null,function(hash){var _3e0=function(){};_3e0.prototype=_3da;_3d5[_3db]=new _3e0();for(var j in hash){_3d5[_3db][j]=hash[j];}});}else{_3dd=true;}if(_3dd&&_3d5[_3db]){_3da=_3d5[_3db];}else{_3d5[_3db]=_3da;}if(_3cf){return true;}});}if(_3cf&&_3d0!=_3d2){_3d5[_3d0.replace(/-/g,"_")]=_3d5[_3d2.replace(/-/g,"_")];}};(function(){var _3e1=dojo.config.extraLocale;if(_3e1){if(!_3e1 instanceof Array){_3e1=[_3e1];}var req=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(m,b,_3e2,_3e3){req(m,b,_3e2,_3e3);if(_3e2){return;}for(var i=0;i<_3e1.length;i++){req(m,b,_3e1[i],_3e3);}};}})();dojo.i18n._searchLocalePath=function(_3e4,down,_3e5){_3e4=dojo.i18n.normalizeLocale(_3e4);var _3e6=_3e4.split("-");var _3e7=[];for(var i=_3e6.length;i>0;i--){_3e7.push(_3e6.slice(0,i).join("-"));}_3e7.push(false);if(down){_3e7.reverse();}for(var j=_3e7.length-1;j>=0;j--){var loc=_3e7[j]||"ROOT";var stop=_3e5(loc);if(stop){break;}}};dojo.i18n._preloadLocalizations=function(_3e8,_3e9){function _3ea(_3eb){_3eb=dojo.i18n.normalizeLocale(_3eb);dojo.i18n._searchLocalePath(_3eb,true,function(loc){for(var i=0;i<_3e9.length;i++){if(_3e9[i]==loc){dojo["require"](_3e8+"_"+loc);return true;}}return false;});};_3ea();var _3ec=dojo.config.extraLocale||[];for(var i=0;i<_3ec.length;i++){_3ea(_3ec[i]);}};}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",templateString:dojo.cache("dijit.form","templates/TextBox.html","<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" waiRole=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" dojoAttachPoint='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"),_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" dojoAttachPoint=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:dojo.isIE?"disabled":"",baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString.toLowerCase()=="input"||((type=="hidden"||type=="file")&&this.templateString==dijit.form.TextBox.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},_setPlaceHolderAttr:function(v){this.placeHolder=v;if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=dojo.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(document.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this._focused&&!this.textbox.value)?"":"none";}},_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_3ed,_3ee,_3ef){var _3f0;if(_3ed!==undefined){_3f0=this.filter(_3ed);if(typeof _3ef!="string"){if(_3f0!==null&&((typeof _3f0!="number")||!isNaN(_3f0))){_3ef=this.filter(this.format(_3f0,this.constraints));}else{_3ef="";}}}if(_3ef!=null&&_3ef!=undefined&&((typeof _3ef)!="number"||!isNaN(_3ef))&&this.textbox.value!=_3ef){this.textbox.value=_3ef;}this._updatePlaceHolder();this.inherited(arguments,[_3f0,_3ee]);},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use set('displayedValue') instead.","","2.0");return this.get("displayedValue");},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},setDisplayedValue:function(_3f1){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_3f1);},_setDisplayedValueAttr:function(_3f2){if(_3f2===null||_3f2===undefined){_3f2="";}else{if(typeof _3f2!="string"){_3f2=String(_3f2);}}this.textbox.value=_3f2;this._setValueAttr(this.get("value"),undefined,_3f2);},format:function(_3f3,_3f4){return ((_3f3==null||_3f3==undefined)?"":(_3f3.toString?_3f3.toString():_3f3));},parse:function(_3f5,_3f6){return _3f5;},_refreshState:function(){},_onInput:function(e){if(e&&e.type&&/key/i.test(e.type)&&e.keyCode){switch(e.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return;}}if(this.intermediateChanges){var _3f7=this;setTimeout(function(){_3f7._handleOnChange(_3f7.get("value"),false);},0);}this._refreshState();},postCreate:function(){if(dojo.isIE){var s=dojo.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _3f8=this.domNode.getElementsByTagName("INPUT");if(_3f8){for(var i=0;i<_3f8.length;i++){_3f8[i].style.fontFamily=ff;}}}}}this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);if(dojo.isMoz||dojo.isOpera){this.connect(this.textbox,"oninput",this._onInput);}else{this.connect(this.textbox,"onkeydown",this._onInput);this.connect(this.textbox,"onkeyup",this._onInput);this.connect(this.textbox,"onpaste",this._onInput);this.connect(this.textbox,"oncut",this._onInput);}},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=dojo.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);}if(this.selectOnClick&&dojo.isMoz){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}this._updatePlaceHolder();},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);var _3f9;if(dojo.isIE){var _3fa=dojo.doc.selection.createRange();var _3fb=_3fa.parentElement();_3f9=_3fb==this.textbox&&_3fa.text.length==0;}else{_3f9=this.textbox.selectionStart==this.textbox.selectionEnd;}if(_3f9){dijit.selectInputText(this.textbox);}});}this._updatePlaceHolder();this._refreshState();this.inherited(arguments);},reset:function(){this.textbox.value="";this.inherited(arguments);}});dijit.selectInputText=function(_3fc,_3fd,stop){var _3fe=dojo.global;var _3ff=dojo.doc;_3fc=dojo.byId(_3fc);if(isNaN(_3fd)){_3fd=0;}if(isNaN(stop)){stop=_3fc.value?_3fc.value.length:0;}dijit.focus(_3fc);if(_3ff["selection"]&&dojo.body()["createTextRange"]){if(_3fc.createTextRange){var _400=_3fc.createTextRange();with(_400){collapse(true);moveStart("character",-99999);moveStart("character",_3fd);moveEnd("character",stop-_3fd);select();}}}else{if(_3fe["getSelection"]){if(_3fc.setSelectionRange){_3fc.setSelectionRange(_3fd,stop);}}}};}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html","<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\">\n\t<div class=\"dijitTooltipContainer dijitTooltipContents\" dojoAttachPoint=\"containerNode\" waiRole='alert'></div>\n\t<div class=\"dijitTooltipConnector\"></div>\n</div>\n"),postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")});},show:function(_401,_402,_403,rtl){if(this.aroundNode&&this.aroundNode===_402){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_401;var pos=dijit.placeOnScreenAroundElement(this.domNode,_402,dijit.getPopupAroundAlignment((_403&&_403.length)?_403:dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_402;},orient:function(node,_404,_405){node.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_404+"-"+_405];},_onShow:function(){if(dojo.isIE){this.domNode.style.filter="";}},hide:function(_406){if(this._onDeck&&this._onDeck[1]==_406){this._onDeck=null;}else{if(this.aroundNode===_406){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});dijit.showTooltip=function(_407,_408,_409,rtl){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.show(_407,_408,_409,rtl);};dijit.hideTooltip=function(_40a){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.hide(_40a);};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],constructor:function(){this._nodeConnectionsById={};},_setConnectIdAttr:function(_40b){for(var _40c in this._nodeConnectionsById){this.removeTarget(_40c);}dojo.forEach(dojo.isArrayLike(_40b)?_40b:[_40b],this.addTarget,this);},_getConnectIdAttr:function(){var ary=[];for(var id in this._nodeConnectionsById){ary.push(id);}return ary;},addTarget:function(id){var node=dojo.byId(id);if(!node){return;}if(node.id in this._nodeConnectionsById){return;}this._nodeConnectionsById[node.id]=[this.connect(node,"onmouseenter","_onTargetMouseEnter"),this.connect(node,"onmouseleave","_onTargetMouseLeave"),this.connect(node,"onfocus","_onTargetFocus"),this.connect(node,"onblur","_onTargetBlur")];},removeTarget:function(node){var id=node.id||node;if(id in this._nodeConnectionsById){dojo.forEach(this._nodeConnectionsById[id],this.disconnect,this);delete this._nodeConnectionsById[id];}},postCreate:function(){dojo.addClass(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;dojo.forEach(dojo.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onTargetMouseEnter:function(e){this._onHover(e);},_onTargetMouseLeave:function(e){this._onUnHover(e);},_onTargetFocus:function(e){this._focus=true;this._onHover(e);},_onTargetBlur:function(e){this._focus=false;this._onUnHover(e);},_onHover:function(e){if(!this._showTimer){var _40d=e.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(_40d);}),this.showDelay);}},_onUnHover:function(e){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_40e){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}dijit.showTooltip(this.label||this.domNode.innerHTML,_40e,this.position,!this.isLeftToRight());this._connectNode=_40e;this.onShow(_40e,this.position);},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(_40f,_410){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});dijit.Tooltip.defaultPosition=["after","before"];}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:dojo.cache("dijit.form","templates/ValidationTextBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\" waiRole=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&Chi; \" type=\"text\" tabIndex=\"-1\" readOnly waiRole=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" dojoAttachPoint='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitValidationTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(_411){return this.regExp;},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused);},validator:function(_412,_413){return (new RegExp("^(?:"+this.regExpGen(_413)+")"+(this.required?"":"?")+"$")).test(_412)&&(!this.required||!this._isEmpty(_412))&&(this._isEmpty(_412)||this.parse(_412,_413)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(_414){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_415){return /^\s*$/.test(_415);},getErrorMessage:function(_416){return (this.required&&this._isEmpty(this.textbox.value))?this.missingMessage:this.invalidMessage;},getPromptMessage:function(_417){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_418){var _419="";var _41a=this.disabled||this.isValid(_418);if(_41a){this._maskValidSubsetError=true;}var _41b=this._isEmpty(this.textbox.value);var _41c=!_41a&&!_41b&&_418&&this._isValidSubset();this.state=((_41a||((!this._hasBeenBlurred||_418)&&_41b)||_41c)&&this._maskValidSubsetError)?"":"Error";if(this.state=="Error"){this._maskValidSubsetError=_418;}this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",_41a?"false":"true");if(_418){if(this.state=="Error"){_419=this.getErrorMessage(true);}else{_419=this.getPromptMessage(true);}this._maskValidSubsetError=true;}this.displayMessage(_419);return _41a;},_message:"",displayMessage:function(_41d){if(this._message==_41d){return;}this._message=_41d;dijit.hideTooltip(this.domNode);if(_41d){dijit.showTooltip(_41d,this.domNode,this.tooltipPosition,!this.isLeftToRight());}},_refreshState:function(){this.validate(this._focused);this.inherited(arguments);},constructor:function(){this.constraints={};},_setConstraintsAttr:function(_41e){if(!_41e.locale&&this.lang){_41e.locale=this.lang;}this.constraints=_41e;this._computePartialRE();},_computePartialRE:function(){var p=this.regExpGen(this.constraints);this.regExp=p;var _41f="";if(p!=".*"){this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_41f+=re;break;case ")":_41f+="|$)";break;default:_41f+="(?:"+re+"|$)";break;}});}try{"".search(_41f);}catch(e){_41f=this.regExp;}this._partialre="^(?:"+_41f+")$";},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage;}if(!this.invalidMessage){this.invalidMessage=this.promptMessage;}if(this.missingMessage=="$_unset_$"){this.missingMessage=this.messages.missingMessage;}if(!this.missingMessage){this.missingMessage=this.invalidMessage;}this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_420){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_421){this.required=_421;dijit.setWaiState(this.focusNode,"required",_421);this._refreshState();},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},serialize:function(val,_422){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.place("<input type='hidden'"+(this.name?" name='"+this.name+"'":"")+">",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(_423,_424){return ("min" in _424?(this.compare(_423,_424.min)>=0):true)&&("max" in _424?(this.compare(_423,_424.max)<=0):true);},isInRange:function(_425){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");var _426=false;var _427=false;if("min" in this.constraints){var min=this.constraints.min;min=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min);_426=(typeof min=="number")&&min<0;}if("max" in this.constraints){var max=this.constraints.max;max=this.compare(val,((typeof max!="number")||max>0)?max:0);_427=(typeof max=="number")&&max>0;}return _426||_427;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_428){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_428));},getErrorMessage:function(_429){var v=this.get("value");if(v!==null&&v!==""&&v!==undefined&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_429)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},_setConstraintsAttr:function(_42a){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min);}else{dijit.removeWaiState(this.focusNode,"valuemin");}if(this.constraints.max!==undefined){dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max);}else{dijit.removeWaiState(this.focusNode,"valuemax");}}},_setValueAttr:function(_42b,_42c){dijit.setWaiState(this.focusNode,"valuenow",_42b);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",null,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:dojo.cache("dijit.form","templates/ComboBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\tdojoAttachPoint=\"comboNode\" waiRole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"downArrowNode\" waiRole=\"presentation\"\n\t\tdojoAttachEvent=\"onmousedown:_onArrowMouseDown\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readOnly waiRole=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&Chi; \" type=\"text\" tabIndex=\"-1\" readOnly waiRole=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachEvent=\"onkeypress:_onKeyPress,compositionend\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" waiRole=\"textbox\" waiState=\"haspopup-true,autocomplete-list\"\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"downArrowNode":"dijitDownArrowButton"},_getCaretPos:function(_42d){var pos=0;if(typeof (_42d.selectionStart)=="number"){pos=_42d.selectionStart;}else{if(dojo.isIE){var tr=dojo.doc.selection.createRange().duplicate();var ntr=_42d.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_42e,_42f){_42f=parseInt(_42f);dijit.selectInputText(_42e,_42f,_42f);},_setDisabledAttr:function(_430){this.inherited(arguments);dijit.setWaiState(this.comboNode,"disabled",_430);},_abortQuery:function(){if(this.searchTimer){clearTimeout(this.searchTimer);this.searchTimer=null;}if(this._fetchHandle){if(this._fetchHandle.abort){this._fetchHandle.abort();}this._fetchHandle=null;}},_onInput:function(evt){if(!this.searchTimer&&(evt.type=="paste"||evt.type=="input")&&this._lastInput!=this.textbox.value){this.searchTimer=setTimeout(dojo.hitch(this,function(){this._onKeyPress({charOrCode:229});}),100);}this.inherited(arguments);},_onKeyPress:function(evt){var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==dojo.keys.SHIFT){return;}var _431=false;var _432="_startSearchFromInput";var pw=this._popupWidget;var dk=dojo.keys;var _433=null;this._prev_key_backspace=false;this._abortQuery();if(this._isShowingNow){pw.handleKey(key);_433=pw.getHighlightedOption();}switch(key){case dk.PAGE_DOWN:case dk.DOWN_ARROW:case dk.PAGE_UP:case dk.UP_ARROW:if(!this._isShowingNow){_431=true;_432="_startSearchAll";}else{this._announceOption(_433);}dojo.stopEvent(evt);break;case dk.ENTER:if(_433){if(_433==pw.nextButton){this._nextSearch(1);dojo.stopEvent(evt);break;}else{if(_433==pw.previousButton){this._nextSearch(-1);dojo.stopEvent(evt);break;}}}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}evt.preventDefault();case dk.TAB:var _434=this.get("displayedValue");if(pw&&(_434==pw._messages["previousMessage"]||_434==pw._messages["nextMessage"])){break;}if(_433){this._selectOption();}if(this._isShowingNow){this._lastQuery=null;this._hideResultList();}break;case " ":if(_433){dojo.stopEvent(evt);this._selectOption();this._hideResultList();}else{_431=true;}break;case dk.ESCAPE:if(this._isShowingNow){dojo.stopEvent(evt);this._hideResultList();}break;case dk.DELETE:case dk.BACKSPACE:this._prev_key_backspace=true;_431=true;break;default:_431=typeof key=="string"||key==229;}if(_431){this.item=undefined;this.searchTimer=setTimeout(dojo.hitch(this,_432),1);}},_autoCompleteText:function(text){var fn=this.focusNode;dijit.selectInputText(fn,fn.value.length);var _435=this.ignoreCase?"toLowerCase":"substr";if(text[_435](0).indexOf(this.focusNode.value[_435](0))==0){var cpos=this._getCaretPos(fn);if((cpos+1)>fn.value.length){fn.value=text;dijit.selectInputText(fn,cpos);}}else{fn.value=text;dijit.selectInputText(fn);}},_openResultList:function(_436,_437){this._fetchHandle=null;if(this.disabled||this.readOnly||(_437.query[this.searchAttr]!=this._lastQuery)){return;}this._popupWidget.clearResultList();if(!_436.length&&!this._maxOptions){this._hideResultList();return;}_437._maxOptions=this._maxOptions;var _438=this._popupWidget.createOptions(_436,_437,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(_437.direction){if(1==_437.direction){this._popupWidget.highlightFirstOption();}else{if(-1==_437.direction){this._popupWidget.highlightLastOption();}}this._announceOption(this._popupWidget.getHighlightedOption());}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_437.query[this.searchAttr])){this._announceOption(_438[1]);}}},_showResultList:function(){this._hideResultList();this.displayMessage("");dojo.style(this._popupWidget.domNode,{width:"",height:""});var best=this.open();var _439=dojo.marginBox(this._popupWidget.domNode);this._popupWidget.domNode.style.overflow=((best.h==_439.h)&&(best.w==_439.w))?"hidden":"auto";var _43a=best.w;if(best.h<this._popupWidget.domNode.scrollHeight){_43a+=16;}dojo.marginBox(this._popupWidget.domNode,{h:best.h,w:Math.max(_43a,this.domNode.offsetWidth)});if(_43a<this.domNode.offsetWidth){this._popupWidget.domNode.parentNode.style.left=dojo.position(this.domNode,true).x+"px";}dijit.setWaiState(this.comboNode,"expanded","true");},_hideResultList:function(){this._abortQuery();if(this._isShowingNow){dijit.popup.close(this._popupWidget);this._isShowingNow=false;dijit.setWaiState(this.comboNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant");}},_setBlurValue:function(){var _43b=this.get("displayedValue");var pw=this._popupWidget;if(pw&&(_43b==pw._messages["previousMessage"]||_43b==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_43b);}else{if(this.value!=this._lastValueReported){dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);}this._refreshState();}}},_onBlur:function(){this._hideResultList();this.inherited(arguments);},_setItemAttr:function(item,_43c,_43d){if(!_43d){_43d=this.labelFunc(item,this.store);}this.value=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_43d;this.item=item;dijit.form.ComboBox.superclass._setValueAttr.call(this,this.value,_43c,_43d);},_announceOption:function(node){if(!node){return;}var _43e;if(node==this._popupWidget.nextButton||node==this._popupWidget.previousButton){_43e=node.innerHTML;this.item=undefined;this.value="";}else{_43e=this.labelFunc(node.item,this.store);this.set("item",node.item,false,_43e);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(node,"id"));this._autoCompleteText(_43e);},_selectOption:function(evt){if(evt){this._announceOption(evt.target);}this._hideResultList();this._setCaretPos(this.focusNode,this.focusNode.value.length);dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);},_onArrowMouseDown:function(evt){if(this.disabled||this.readOnly){return;}dojo.stopEvent(evt);this.focus();if(this._isShowingNow){this._hideResultList();}else{this._startSearchAll();}},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_getQueryString:function(text){return dojo.string.substitute(this.queryExpr,[text]);},_startSearch:function(key){if(!this._popupWidget){var _43f=this.id+"_popup";this._popupWidget=new dijit.form._ComboBoxMenu({onChange:dojo.hitch(this,this._selectOption),id:_43f,dir:this.dir});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",_43f);}var _440=dojo.clone(this.query);this._lastInput=key;this._lastQuery=_440[this.searchAttr]=this._getQueryString(key);this.searchTimer=setTimeout(dojo.hitch(this,function(_441,_442){this.searchTimer=null;var _443={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:_441,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(_444){_442._fetchHandle=null;dojo.hitch(_442,"_hideResultList")();},start:0,count:this.pageSize};dojo.mixin(_443,_442.fetchProperties);this._fetchHandle=_442.store.fetch(_443);var _445=function(_446,_447){_446.start+=_446.count*_447;_446.direction=_447;this._fetchHandle=this.store.fetch(_446);};this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,_445,this._fetchHandle);},_440,this),this.searchDelay);},_setMaxOptions:function(size,_448){this._maxOptions=size;},_getValueField:function(){return this.searchAttr;},compositionend:function(evt){this._onKeyPress({charOrCode:229});},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var _449=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(_449);if(!("value" in this.params)){var item=this.store.fetchSelectedItem();if(item){var _44a=this._getValueField();this.value=_44a!=this.searchAttr?this.store.getValue(item,_44a):this.labelFunc(item,this.store);}}}this.inherited(arguments);},postCreate:function(){if(!this.hasDownArrow){this.downArrowNode.style.display="none";}var _44b=dojo.query("label[for=\""+this.id+"\"]");if(_44b.length){_44b[0].id=(this.id+"_label");var cn=this.comboNode;dijit.setWaiState(cn,"labelledby",_44b[0].id);}this.inherited(arguments);},uninitialize:function(){if(this._popupWidget&&!this._popupWidget._destroyed){this._hideResultList();this._popupWidget.destroy();}this.inherited(arguments);},_getMenuLabelFromItem:function(item){var _44c=this.labelAttr?this.store.getValue(item,this.labelAttr):this.labelFunc(item,this.store);var _44d=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_44c=this.doHighlight(_44c,this._escapeHtml(this._lastInput));_44d="html";}return {html:_44d=="html",label:_44c};},doHighlight:function(_44e,find){var _44f="i"+(this.highlightMatch=="all"?"g":"");var _450=this._escapeHtml(_44e);find=dojo.regexp.escapeString(find);var ret=_450.replace(new RegExp("(^|\\s)("+find+")",_44f),"$1<span class=\"dijitComboBoxHighlightMatch\">$2</span>");return ret;},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},open:function(){this._isShowingNow=true;return dijit.popup.open({popup:this._popupWidget,around:this.domNode,parent:this});},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_451){return _451.getValue(item,this.searchAttr).toString();}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' tabIndex='-1' style='overflow: \"auto\"; overflow-x: \"hidden\";'>"+"<li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' waiRole='option'></li>"+"<li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' waiRole='option'></li>"+"</ul>",_messages:null,baseClass:"dijitComboBoxMenu",postMixInProperties:function(){this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);this.inherited(arguments);},_setValueAttr:function(_452){this.value=_452;this.onChange(_452);},onChange:function(_453){},onPage:function(_454){},postCreate:function(){this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];this.inherited(arguments);},onClose:function(){this._blurOptionNode();},_createOption:function(item,_455){var _456=_455(item);var _457=dojo.doc.createElement("li");dijit.setWaiRole(_457,"option");if(_456.html){_457.innerHTML=_456.label;}else{_457.appendChild(dojo.doc.createTextNode(_456.label));}if(_457.innerHTML==""){_457.innerHTML="&nbsp;";}_457.item=item;return _457;},createOptions:function(_458,_459,_45a){this.previousButton.style.display=(_459.start==0)?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(_458,function(item,i){var _45b=this._createOption(item,_45a);_45b.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");dojo.attr(_45b,"id",this.id+i);this.domNode.insertBefore(_45b,this.nextButton);},this);var _45c=false;if(_459._maxOptions&&_459._maxOptions!=-1){if((_459.start+_459.count)<_459._maxOptions){_45c=true;}else{if((_459.start+_459.count)>_459._maxOptions&&_459.count==_458.length){_45c=true;}}}else{if(_459.count==_458.length){_45c=true;}}this.nextButton.style.display=_45c?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next");return this.domNode.childNodes;},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);}},_onMouseDown:function(evt){dojo.stopEvent(evt);},_onMouseUp:function(evt){if(evt.target===this.domNode||!this._highlighted_option){return;}else{if(evt.target==this.previousButton){this.onPage(-1);}else{if(evt.target==this.nextButton){this.onPage(1);}else{var tgt=evt.target;while(!tgt.item){tgt=tgt.parentNode;}this._setValueAttr({target:tgt},true);}}}},_onMouseOver:function(evt){if(evt.target===this.domNode){return;}var tgt=evt.target;if(!(tgt==this.previousButton||tgt==this.nextButton)){while(!tgt.item){tgt=tgt.parentNode;}}this._focusOptionNode(tgt);},_onMouseOut:function(evt){if(evt.target===this.domNode){return;}this._blurOptionNode();},_focusOptionNode:function(node){if(this._highlighted_option!=node){this._blurOptionNode();this._highlighted_option=node;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected");}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null;}},_highlightNextOption:function(){if(!this.getHighlightedOption()){var fc=this.domNode.firstChild;this._focusOptionNode(fc.style.display=="none"?fc.nextSibling:fc);}else{var ns=this._highlighted_option.nextSibling;if(ns&&ns.style.display!="none"){this._focusOptionNode(ns);}else{this.highlightFirstOption();}}dojo.window.scrollIntoView(this._highlighted_option);},highlightFirstOption:function(){var _45d=this.domNode.firstChild;var _45e=_45d.nextSibling;this._focusOptionNode(_45e.style.display=="none"?_45d:_45e);dojo.window.scrollIntoView(this._highlighted_option);},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dojo.window.scrollIntoView(this._highlighted_option);},_highlightPrevOption:function(){if(!this.getHighlightedOption()){var lc=this.domNode.lastChild;this._focusOptionNode(lc.style.display=="none"?lc.previousSibling:lc);}else{var ps=this._highlighted_option.previousSibling;if(ps&&ps.style.display!="none"){this._focusOptionNode(ps);}else{this.highlightLastOption();}}dojo.window.scrollIntoView(this._highlighted_option);},_page:function(up){var _45f=0;var _460=this.domNode.scrollTop;var _461=dojo.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption();}while(_45f<_461){if(up){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break;}this._highlightPrevOption();}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break;}this._highlightNextOption();}var _462=this.domNode.scrollTop;_45f+=(_462-_460)*(up?-1:1);_460=_462;}},pageUp:function(){this._page(true);},pageDown:function(){this._page(false);},getHighlightedOption:function(){var ho=this._highlighted_option;return (ho&&ho.parentNode)?ho:null;},handleKey:function(key){switch(key){case dojo.keys.DOWN_ARROW:this._highlightNextOption();break;case dojo.keys.PAGE_DOWN:this.pageDown();break;case dojo.keys.UP_ARROW:this._highlightPrevOption();break;case dojo.keys.PAGE_UP:this.pageUp();break;}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(_463,_464,_465){this.item=null;if(!_463){_463="";}dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,_463,_464,_465);}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(root){this.root=root;if(root.tagName!="SELECT"&&root.firstChild){root=dojo.query("select",root);if(root.length>0){root=root[0];}else{this.root.innerHTML="<SELECT>"+this.root.innerHTML+"</SELECT>";root=this.root.firstChild;}this.root=root;}dojo.query("> option",root).forEach(function(node){node.innerHTML=dojo.trim(node.innerHTML);});},getValue:function(item,_466,_467){return (_466=="value")?item.value:(item.innerText||item.textContent||"");},isItemLoaded:function(_468){return true;},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true};},_fetchItems:function(args,_469,_46a){if(!args.query){args.query={};}if(!args.query.name){args.query.name="";}if(!args.queryOptions){args.queryOptions={};}var _46b=dojo.data.util.filter.patternToRegExp(args.query.name,args.queryOptions.ignoreCase),_46c=dojo.query("> option",this.root).filter(function(_46d){return (_46d.innerText||_46d.textContent||"").match(_46b);});if(args.sort){_46c.sort(dojo.data.util.sorter.createSortFunction(args.sort,this));}_469(_46c,args);},close:function(_46e){return;},getLabel:function(item){return item.innerHTML;},getIdentity:function(item){return dojo.attr(item,"value");},fetchItemByIdentity:function(args){var item=dojo.query("> option[value='"+args.identity+"']",this.root)[0];args.onItem(item);},fetchSelectedItem:function(){var root=this.root,si=root.selectedIndex;return typeof si=="number"?dojo.query("> option:nth-child("+(si!=-1?si+1:1)+")",root)[0]:null;}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(_46f){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_46f.url;this._ccUrl=_46f.url;this.url=_46f.url;this._jsonData=_46f.data;this.data=null;this._datatypeMap=_46f.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_470){return dojo.date.stamp.fromISOString(_470);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_46f.urlPreventCache!==undefined){this.urlPreventCache=_46f.urlPreventCache?true:false;}if(_46f.hierarchical!==undefined){this.hierarchical=_46f.hierarchical?true:false;}if(_46f.clearOnClose){this.clearOnClose=true;}if("failOk" in _46f){this.failOk=_46f.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");}},_assertIsAttribute:function(_471){if(typeof _471!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");}},getValue:function(item,_472,_473){var _474=this.getValues(item,_472);return (_474.length>0)?_474[0]:_473;},getValues:function(item,_475){this._assertIsItem(item);this._assertIsAttribute(_475);return (item[_475]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _476=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_476.push(key);}}return _476;},hasAttribute:function(item,_477){this._assertIsItem(item);this._assertIsAttribute(_477);return (_477 in item);},containsValue:function(item,_478,_479){var _47a=undefined;if(typeof _479==="string"){_47a=dojo.data.util.filter.patternToRegExp(_479,false);}return this._containsValue(item,_478,_479,_47a);},_containsValue:function(item,_47b,_47c,_47d){return dojo.some(this.getValues(item,_47b),function(_47e){if(_47e!==null&&!dojo.isObject(_47e)&&_47d){if(_47e.toString().match(_47d)){return true;}}else{if(_47c===_47e){return true;}}});},isItem:function(_47f){if(_47f&&_47f[this._storeRefPropName]===this){if(this._arrayOfAllItems[_47f[this._itemNumPropName]]===_47f){return true;}}return false;},isItemLoaded:function(_480){return this.isItem(_480);},loadItem:function(_481){this._assertIsItem(_481.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_fetchItems:function(_482,_483,_484){var self=this,_485=function(_486,_487){var _488=[],i,key;if(_486.query){var _489,_48a=_486.queryOptions?_486.queryOptions.ignoreCase:false;var _48b={};for(key in _486.query){_489=_486.query[key];if(typeof _489==="string"){_48b[key]=dojo.data.util.filter.patternToRegExp(_489,_48a);}else{if(_489 instanceof RegExp){_48b[key]=_489;}}}for(i=0;i<_487.length;++i){var _48c=true;var _48d=_487[i];if(_48d===null){_48c=false;}else{for(key in _486.query){_489=_486.query[key];if(!self._containsValue(_48d,key,_489,_48b[key])){_48c=false;}}}if(_48c){_488.push(_48d);}}_483(_488,_486);}else{for(i=0;i<_487.length;++i){var item=_487[i];if(item!==null){_488.push(item);}}_483(_488,_486);}};if(this._loadFinished){_485(_482,this._getItemsArray(_482.queryOptions));}else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_482,filter:_485});}else{this._loadInProgress=true;var _48e={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _48f=dojo.xhrGet(_48e);_48f.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_485(_482,self._getItemsArray(_482.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_484(e,_482);}});_48f.addErrback(function(_490){self._loadInProgress=false;_484(_490,_482);});var _491=null;if(_482.abort){_491=_482.abort;}_482.abort=function(){var df=_48f;if(df&&df.fired===-1){df.cancel();df=null;}if(_491){_491.call(_482);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_485(_482,this._getItemsArray(_482.queryOptions));}catch(e){_484(e,_482);}}else{_484(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_482);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _492=this._queuedFetches[i],_493=_492.args,_494=_492.filter;if(_494){_494(_493,this._getItemsArray(_493.queryOptions));}else{this.fetchItemByIdentity(_493);}}this._queuedFetches=[];}},_getItemsArray:function(_495){if(_495&&_495.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_496){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_497){var _498=false,self=this;function _499(_49a){var _49b=((_49a!==null)&&(typeof _49a==="object")&&(!dojo.isArray(_49a)||_498)&&(!dojo.isFunction(_49a))&&(_49a.constructor==Object||dojo.isArray(_49a))&&(typeof _49a._reference==="undefined")&&(typeof _49a._type==="undefined")&&(typeof _49a._value==="undefined")&&self.hierarchical);return _49b;};function _49c(_49d){self._arrayOfAllItems.push(_49d);for(var _49e in _49d){var _49f=_49d[_49e];if(_49f){if(dojo.isArray(_49f)){var _4a0=_49f;for(var k=0;k<_4a0.length;++k){var _4a1=_4a0[k];if(_499(_4a1)){_49c(_4a1);}}}else{if(_499(_49f)){_49c(_49f);}}}}};this._labelAttr=_497.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_497.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(dojo.isArray(item)){_498=true;}_49c(item);item[this._rootItemPropName]=true;}var _4a2={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _4a3=item[key];if(_4a3!==null){if(!dojo.isArray(_4a3)){item[key]=[_4a3];}}else{item[key]=[null];}}_4a2[key]=key;}}while(_4a2[this._storeRefPropName]){this._storeRefPropName+="_";}while(_4a2[this._itemNumPropName]){this._itemNumPropName+="_";}while(_4a2[this._reverseRefMap]){this._reverseRefMap+="_";}var _4a4;var _4a5=_497.identifier;if(_4a5){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_4a5;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_4a4=item[_4a5];var _4a6=_4a4[0];if(!this._itemsByIdentity[_4a6]){this._itemsByIdentity[_4a6]=item;}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_4a5+"].  Value collided: ["+_4a6+"]");}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_4a5+"].  Value collided: ["+_4a6+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_4a4=item[key];for(var j=0;j<_4a4.length;++j){_4a3=_4a4[j];if(_4a3!==null&&typeof _4a3=="object"){if(("_type" in _4a3)&&("_value" in _4a3)){var type=_4a3._type;var _4a7=this._datatypeMap[type];if(!_4a7){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(dojo.isFunction(_4a7)){_4a4[j]=new _4a7(_4a3._value);}else{if(dojo.isFunction(_4a7.deserialize)){_4a4[j]=_4a7.deserialize(_4a3._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_4a3._reference){var _4a8=_4a3._reference;if(!dojo.isObject(_4a8)){_4a4[j]=this._getItemByIdentity(_4a8);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _4a9=this._arrayOfAllItems[k],_4aa=true;for(var _4ab in _4a8){if(_4a9[_4ab]!=_4a8[_4ab]){_4aa=false;}}if(_4aa){_4a4[j]=_4a9;}}}if(this.referenceIntegrity){var _4ac=_4a4[j];if(this.isItem(_4ac)){this._addReferenceToMap(_4ac,item,key);}}}else{if(this.isItem(_4a3)){if(this.referenceIntegrity){this._addReferenceToMap(_4a3,item,key);}}}}}}}},_addReferenceToMap:function(_4ad,_4ae,_4af){},getIdentity:function(item){var _4b0=this._features["dojo.data.api.Identity"];if(_4b0===Number){return item[this._itemNumPropName];}else{var _4b1=item[_4b0];if(_4b1){return _4b1[0];}}return null;},fetchItemByIdentity:function(_4b2){var item,_4b3;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_4b2});}else{this._loadInProgress=true;var _4b4={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _4b5=dojo.xhrGet(_4b4);_4b5.addCallback(function(data){var _4b6=_4b2.scope?_4b2.scope:dojo.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_4b2.identity);if(_4b2.onItem){_4b2.onItem.call(_4b6,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_4b2.onError){_4b2.onError.call(_4b6,error);}}});_4b5.addErrback(function(_4b7){self._loadInProgress=false;if(_4b2.onError){var _4b8=_4b2.scope?_4b2.scope:dojo.global;_4b2.onError.call(_4b8,_4b7);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_4b2.identity);if(_4b2.onItem){_4b3=_4b2.scope?_4b2.scope:dojo.global;_4b2.onItem.call(_4b3,item);}}}}else{item=this._getItemByIdentity(_4b2.identity);if(_4b2.onItem){_4b3=_4b2.scope?_4b2.scope:dojo.global;_4b2.onItem.call(_4b3,item);}}},_getItemByIdentity:function(_4b9){var item=null;if(this._itemsByIdentity){item=this._itemsByIdentity[_4b9];}else{item=this._arrayOfAllItems[_4b9];}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _4ba=this._features["dojo.data.api.Identity"];if(_4ba===Number){return null;}else{return [_4ba];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _4bb={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _4bc=dojo.xhrGet(_4bb);_4bc.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_4bc.addErrback(function(_4bd){throw _4bd;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["agi.classes.Adopter"]){dojo._hasResource["agi.classes.Adopter"]=true;dojo.provide("agi.classes.Adopter");dojo.declare("agi.classes.Adopter",[agi.classes.Identified],{constructor:function(_4be){if(dojo.isObject(_4be)){dojo.mixin(this,_4be);this.postMixInProperties();}},postMixInProperties:function(){return;}});}if(!dojo._hasResource["ag.classes.Adopter"]){dojo._hasResource["ag.classes.Adopter"]=true;dojo.provide("ag.classes.Adopter");ag.classes.Adopter=agi.classes.Adopter;}if(!dojo._hasResource["ag.widget.SearchBox"]){dojo._hasResource["ag.widget.SearchBox"]=true;dojo.provide("ag.widget.SearchBox");dojo.declare("ag.widget.SearchBox",[ag.classes.Adopter],function(){var self={};var d=dojo;d.mixin(self,{searchInput:null,searchNode:null,dataUrl:null,dataStore:null,searchFormId:null,searchFormNode:null,searchInputId:"ag-searchtext",searchWidgetId:null,searchInputName:"strSearch",hasDownArrow:false,isStarted:false,StoreClass:d.data.ItemFileReadStore,ComboBoxClass:dijit.form.ComboBox,SEARCH_ATTR:"d",SEARCH_DELAY:100,SEARCH_AUTOCOMPLETE:false});self.constructor=function(){};self.startup=function(){if(dijit.byId(this.searchWidgetId)||this.isStarted){return;}this.getDataStore();if(!this.dataStore){return;}this.getSearchNodes();this.connectEvents();this.isStarted=true;};self.getDataStore=function(){this.dataStore=new this.StoreClass({url:this.dataUrl});};self.getSearchNodes=function(){var _4bf={id:this.searchWidgetId,name:this.searchInputName,searchAttr:this.SEARCH_ATTR,hasDownArrow:this.hasDownArrow,searchDelay:this.SEARCH_DELAY,autoComplete:this.SEARCH_AUTOCOMPLETE,store:this.dataStore};this.searchNode=dojo.byId(this.searchInputId);if(this.searchNode){this.searchInput=new this.ComboBoxClass(_4bf,this.searchNode);this.dataStore._forceLoad();this.dataStore.fetch({onError:d.hitch(this,this.dataLoadFailHandler)});}else{}this.searchButton=dojo.byId(this.searchButtonId);this.searchFormNode=dojo.byId(this.searchFormId);};self.dataLoadFailHandler=function(_4c0,_4c1){var _4c2=function(){return;};this.searchInput.disabled=true;for(attr in this.searchInput){if(d.isString(attr)){if(attr.startswith("on")||attr.startswith("_on")){this.searchInput[attr]=_4c2;}}}this.dataStore=null;d.disconnect(this.onKeypressHandle);};self.handleOnKeypress=function(evt){if(evt.altKey||evt.ctrlKey&&evt.charCode!=118){return;}else{if(this.searchInput._isShowingNow){return;}else{if(evt.keyCode==d.keys.ENTER){this.searchSubmitCallback();}}}};self.connectEvents=function(){this.onKeypressHandle=d.connect(this.searchInput,"_onKeyPress",this,this.handleOnKeypress);};return self;}());}if(!dojo._hasResource["ag.search.Searcher"]){dojo._hasResource["ag.search.Searcher"]=true;dojo.provide("ag.search.Searcher");dojo.declare("ag.search.Searcher",[ag.classes.Adopter],{searchBox:null,searchPage:null,errMsg:null,widgId:null,locId:null,searchButtonId:null,isStarted:false,_onBlurHandle:null,_onFocusHandle:null,SEARCHBOX_STYLE:{border:"2px solid #ff0000",background:"#FFDDDD"},DEFAULT_SEARCH_PAGE:"/ecards/search.pd",startup:function(){this.searchBox=dojo.byId(this.widgId);this.searchButton=dojo.byId(this.searchButtonId);var _4c3=dojo.byId(this.locId);if(_4c3){this.searchPage=_4c3.value;}else{this.searchPage=this.DEFAULT_SEARCH_PAGE;}this.attachEvents();},onBlur:function(){if(this.searchBox&&(this.searchBox.value==="")){this.searchBox.value=this.errMsg;}},onFocus:function(){if(this.searchBox&&(this.searchBox.value==this.errMsg)){this.searchBox.value="";}},attachEvents:function(){if(this.searchButton){this._doSearchHandle=dojo.connect(this.searchButton,"onclick",this,this.doSearch);}if(this.searchBox){this._onBlurHandle=dojo.connect(this.searchBox,"onblur",this,this.onBlur);this._onFocusHandle=dojo.connect(this.searchBox,"onfocus",this,this.onFocus);}},highlightSearchBox:function(){if(this.searchBox){dojo.style(this.searchBox,this.SEARCHBOX_STYLE);this.searchBox.value=this.errMsg;this.searchBox.blur();}},sendToThisPage:function(){if(!this.searchBox){return;}var _4c4=this.searchPage+"?strSearch="+escape(this.searchBox.value);if(dojo.byId("lpage")){_4c4=_4c4+"&lpage="+escape(dojo.byId("lpage").value);}window.document.location.href=_4c4;},doSearch:function(evt){try{if(!this.searchBox){return;}if((!this.searchBox.value.length)||(this.searchBox.value==this.errMsg)){this.highlightSearchBox();}else{this.sendToThisPage();}return false;}catch(e){return false;}}});}if(!dojo._hasResource["agi.classes.Controller"]){dojo._hasResource["agi.classes.Controller"]=true;dojo.provide("agi.classes.Controller");dojo.declare("agi.classes.Controller",[agi.classes.Adopter],function(){var self={};dojo.mixin(self,{__culprit__:"$Author: dbuch $"});return self;}());}if(!dojo._hasResource["agi.classes._Mixin"]){dojo._hasResource["agi.classes._Mixin"]=true;dojo.provide("agi.classes._Mixin");dojo.declare("agi.classes._Mixin",[agi.classes.Controller],{__culprit__:"$Author: dbuch $"});}if(!dojo._hasResource["ag.classes._Mixin"]){dojo._hasResource["ag.classes._Mixin"]=true;dojo.provide("ag.classes._Mixin");ag.classes._Mixin=agi.classes._Mixin;}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_4c5,_4c6){var _4c7=this.containerNode;if(_4c6&&typeof _4c6=="number"){var _4c8=this.getChildren();if(_4c8&&_4c8.length>=_4c6){_4c7=_4c8[_4c6-1].domNode;_4c6="after";}}dojo.place(_4c5.domNode,_4c7,_4c6);if(this._started&&!_4c5._started){_4c5.startup();}},removeChild:function(_4c9){if(typeof _4c9=="number"&&_4c9>0){_4c9=this.getChildren()[_4c9];}if(_4c9){var node=_4c9.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},destroyDescendants:function(_4ca){dojo.forEach(this.getChildren(),function(_4cb){_4cb.destroyRecursive(_4ca);});},_getSiblingOfChild:function(_4cc,dir){var node=_4cc.domNode,_4cd=(dir>0?"nextSibling":"previousSibling");do{node=node[_4cd];}while(node&&(node.nodeType!=1||!dijit.byNode(node)));return node&&dijit.byNode(node);},getIndexOfChild:function(_4ce){return dojo.indexOf(this.getChildren(),_4ce);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_4cf){_4cf.startup();});this.inherited(arguments);}});}if(!dojo._hasResource["dijit._HasDropDown"]){dojo._hasResource["dijit._HasDropDown"]=true;dojo.provide("dijit._HasDropDown");dojo.declare("dijit._HasDropDown",null,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}this._docHandler=this.connect(dojo.doc,"onmouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _4d0=this.dropDown,_4d1=false;if(e&&this._opened){var c=dojo.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_4d1){if(dojo.hasClass(t,"dijitPopup")){_4d1=true;}else{t=t.parentNode;}}if(_4d1){t=e.target;if(_4d0.onItemClick){var _4d2;while(t&&!(_4d2=dijit.byNode(t))){t=t.parentNode;}if(_4d2&&_4d2.onClick&&_4d2.getParent){_4d2.getParent().onItemClick(_4d2,e);}}return;}}}if(this._opened&&_4d0.focus){window.setTimeout(dojo.hitch(_4d0,"focus"),1);}},_onDropDownClick:function(e){if(this._stopClickEvents){dojo.stopEvent(e);}},_setupDropdown:function(){this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;this._aroundNode=this._aroundNode||this.domNode;this.connect(this._buttonNode,"onmousedown","_onDropDownMouseDown");this.connect(this._buttonNode,"onclick","_onDropDownClick");this.connect(this._buttonNode,"onkeydown","_onDropDownKeydown");this.connect(this._buttonNode,"onkeyup","_onKey");if(this._setStateClass){this.connect(this,"openDropDown","_setStateClass");this.connect(this,"closeDropDown","_setStateClass");}var _4d3={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";dojo.addClass(this._arrowWrapperNode||this._buttonNode,"dijit"+_4d3+"ArrowButton");},postCreate:function(){this._setupDropdown();this.inherited(arguments);},destroyDescendants:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onDropDownKeydown:function(e){if(e.keyCode==dojo.keys.DOWN_ARROW||e.keyCode==dojo.keys.ENTER||e.keyCode==dojo.keys.SPACE){e.preventDefault();}},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){return;}}if(d&&this._opened&&e.keyCode==dojo.keys.ESCAPE){this.toggleDropDown();}else{if(d&&!this._opened&&(e.keyCode==dojo.keys.DOWN_ARROW||e.keyCode==dojo.keys.ENTER||e.keyCode==dojo.keys.SPACE)){this.toggleDropDown();if(d.focus){setTimeout(dojo.hitch(d,"focus"),1);}}}},_onBlur:function(){this.closeDropDown();this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_4d4){_4d4();},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}this.focus();var _4d5=this.dropDown;if(!_4d5){return;}if(!this._opened){if(!this.isLoaded()){this.loadDropDown(dojo.hitch(this,"openDropDown"));return;}else{this.openDropDown();}}else{this.closeDropDown();}},openDropDown:function(){var _4d6=this.dropDown;var _4d7=_4d6.domNode;var self=this;if(!this._preparedNode){dijit.popup.moveOffScreen(_4d7);this._preparedNode=true;if(_4d7.style.width){this._explicitDDWidth=true;}if(_4d7.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _4d8={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_4d8.width="";}if(!this._explicitDDHeight){_4d8.height="";}dojo.style(_4d7,_4d8);var mb=dojo.marginBox(_4d7);var _4d9=(this.maxHeight&&mb.h>this.maxHeight);dojo.style(_4d7,{overflowX:"hidden",overflowY:_4d9?"auto":"hidden"});if(_4d9){mb.h=this.maxHeight;if("w" in mb){mb.w+=16;}}else{delete mb.h;}delete mb.t;delete mb.l;if(this.forceWidth){mb.w=this.domNode.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,this.domNode.offsetWidth);}else{delete mb.w;}}if(dojo.isFunction(_4d6.resize)){_4d6.resize(mb);}else{dojo.marginBox(_4d7,mb);}}var _4da=dijit.popup.open({parent:this,popup:_4d6,around:this._aroundNode,orient:dijit.getPopupAroundAlignment((this.dropDownPosition&&this.dropDownPosition.length)?this.dropDownPosition:["below"],this.isLeftToRight()),onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){dojo.attr(self._popupStateNode,"popupActive",false);dojo.removeClass(self._popupStateNode,"dijitHasDropDownOpen");self._opened=false;self.state="";}});dojo.attr(this._popupStateNode,"popupActive","true");dojo.addClass(self._popupStateNode,"dijitHasDropDownOpen");this._opened=true;this.state="Opened";return _4da;},closeDropDown:function(_4db){if(this._opened){if(_4db){this.focus();}dijit.popup.close(this.dropDown);this._opened=false;this.state="";}}});}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:dojo.cache("dijit.form","templates/Button.html","<span class=\"dijit dijitReset dijitInline\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdojoAttachEvent=\"ondijitclick:_onButtonClick\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"titleNode,focusNode\"\n\t\t\twaiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" dojoAttachPoint=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdojoAttachPoint=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\tdojoAttachPoint=\"valueNode\"\n/></span>\n"),attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"valueNode",iconClass:{node:"iconNode",type:"class"}}),_onClick:function(e){if(this.disabled){return false;}this._clicked();return this.onClick(e);},_onButtonClick:function(e){if(this._onClick(e)===false){e.preventDefault();}else{if(this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _4dc=dijit.byNode(node);if(_4dc&&typeof _4dc._onSubmit=="function"){_4dc._onSubmit(e);break;}}}else{if(this.valueNode){this.valueNode.click();e.preventDefault();}}}},_fillContent:function(_4dd){if(_4dd&&(!this.params||!("label" in this.params))){this.set("label",_4dd.innerHTML);}},postCreate:function(){dojo.setSelectable(this.focusNode,false);this.inherited(arguments);},_setShowLabelAttr:function(val){if(this.containerNode){dojo.toggleClass(this.containerNode,"dijitDisplayNone",!val);}this.showLabel=val;},onClick:function(e){return true;},_clicked:function(e){},setLabel:function(_4de){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_4de);},_setLabelAttr:function(_4df){this.containerNode.innerHTML=this.label=_4df;if(this.showLabel==false&&!this.params.title){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container,dijit._HasDropDown],{baseClass:"dijitDropDownButton",templateString:dojo.cache("dijit.form","templates/DropDownButton.html","<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdojoAttachEvent=\"ondijitclick:_onButtonClick\" dojoAttachPoint=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\twaiRole=\"button\" waiState=\"haspopup-true,labelledby-${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdojoAttachPoint=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdojoAttachPoint=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\tdojoAttachPoint=\"valueNode\"\n/></span>\n"),_fillContent:function(){if(this.srcNodeRef){var _4e0=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,_4e0[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown){var _4e1=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(_4e1);delete this.dropDownContainer;}dijit.popup.moveOffScreen(this.dropDown.domNode);this.inherited(arguments);},isLoaded:function(){var _4e2=this.dropDown;return (!_4e2.href||_4e2.isLoaded);},loadDropDown:function(){var _4e3=this.dropDown;if(!_4e3){return;}if(!this.isLoaded()){var _4e4=dojo.connect(_4e3,"onLoad",this,function(){dojo.disconnect(_4e4);this.openDropDown();});_4e3.refresh();}else{this.openDropDown();}},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:dojo.cache("dijit.form","templates/ComboButton.html","<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' waiRole=\"presentation\"\n\t><tbody waiRole=\"presentation\"><tr waiRole=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" dojoAttachPoint=\"buttonNode\" dojoAttachEvent=\"ondijitclick:_onButtonClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"titleNode\"\n\t\t\twaiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" dojoAttachPoint=\"iconNode\" waiRole=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" dojoAttachPoint=\"containerNode\" waiRole=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdojoAttachPoint=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdojoAttachEvent=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\twaiRole=\"button\" waiState=\"haspopup-true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" waiRole=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" waiRole=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" dojoAttachPoint=\"valueNode\"\n\t\t/></td></tr></tbody\n></table>\n"),attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"],title:"titleNode"}),optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){dijit.focus(this._popupStateNode);dojo.stopEvent(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){dijit.focus(this.titleNode);dojo.stopEvent(evt);}},focus:function(_4e5){dijit.focus(_4e5=="start"?this.titleNode:this._popupStateNode);}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(evt){this.set("checked",!this.checked);},_setCheckedAttr:function(_4e6,_4e7){this.checked=_4e6;dojo.attr(this.focusNode||this.domNode,"checked",_4e6);dijit.setWaiState(this.focusNode||this.domNode,"pressed",_4e6);this._handleOnChange(_4e6,_4e7);},setChecked:function(_4e8){dojo.deprecated("setChecked("+_4e8+") is deprecated. Use set('checked',"+_4e8+") instead.","","2.0");this.set("checked",_4e8);},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton");}if(!dojo._hasResource["dijit.form.CheckBox"]){dojo._hasResource["dijit.form.CheckBox"]=true;dojo.provide("dijit.form.CheckBox");dojo.declare("dijit.form.CheckBox",dijit.form.ToggleButton,{templateString:dojo.cache("dijit.form","templates/CheckBox.html","<div class=\"dijit dijitReset dijitInline\" waiRole=\"presentation\"\n\t><input\n\t \t${!nameAttrSetting} type=\"${type}\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdojoAttachPoint=\"focusNode\"\n\t \tdojoAttachEvent=\"onclick:_onClick\"\n/></div>\n"),baseClass:"dijitCheckBox",type:"checkbox",value:"on",readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{readOnly:"focusNode"}),_setReadOnlyAttr:function(_4e9){this.readOnly=_4e9;dojo.attr(this.focusNode,"readOnly",_4e9);dijit.setWaiState(this.focusNode,"readonly",_4e9);},_setValueAttr:function(_4ea,_4eb){if(typeof _4ea=="string"){this.value=_4ea;dojo.attr(this.focusNode,"value",_4ea);_4ea=true;}if(this._created){this.set("checked",_4ea,_4eb);}},_getValueAttr:function(){return (this.checked?this.value:false);},_setLabelAttr:undefined,postMixInProperties:function(){if(this.value==""){this.value="on";}this.checkedAttrSetting=this.checked?"checked":"";this.inherited(arguments);},_fillContent:function(_4ec){},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);this.value=this.params.value||"on";dojo.attr(this.focusNode,"value",this.value);},_onFocus:function(){if(this.id){dojo.query("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}this.inherited(arguments);},_onBlur:function(){if(this.id){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}this.inherited(arguments);},_onClick:function(e){if(this.readOnly){return false;}return this.inherited(arguments);}});dojo.declare("dijit.form.RadioButton",dijit.form.CheckBox,{type:"radio",baseClass:"dijitRadio",_setCheckedAttr:function(_4ed){this.inherited(arguments);if(!this._created){return;}if(_4ed){var _4ee=this;dojo.query("INPUT[type=radio]",this.focusNode.form||dojo.doc).forEach(function(_4ef){if(_4ef.name==_4ee.name&&_4ef!=_4ee.focusNode&&_4ef.form==_4ee.focusNode.form){var _4f0=dijit.getEnclosingWidget(_4ef);if(_4f0&&_4f0.checked){_4f0.set("checked",false);}}});}},_clicked:function(e){if(!this.checked){this.set("checked",true);}}});}if(!dojo._hasResource["ag.search.SearchMixin"]){dojo._hasResource["ag.search.SearchMixin"]=true;dojo.provide("ag.search.SearchMixin");dojo.declare("ag.search.SearchMixin",[ag.classes._Mixin],function(){var self={};var d=dojo;d.mixin(self,{khost:null,searchInputs:{},searchInputIds:[],searchFormIds:[],searchProductLines:[],searchIsAutocomplete:true,_searchOnSubmitHandles:[],SearchBoxClass:ag.widget.SearchBox,SearcherClass:ag.search.Searcher,SearchDataStoreClass:d.data.ItemFileReadStore,SEARCH_DIMS_FILE:"dims.txt",SEARCH_BOX_ID:"ag-searchtext",SEARCH_BOX_PREFIX:"ag-searchtext-",SEARCH_BUTTON_PREFIX:"ag-search-submit-",SEARCH_SUBMIT_SUFFIX:"-actual",SEARCH_INPUT_NAME:"strSearch",SEARCH_LOC_PREFIX:"ag-searcharea-",SEARCH_LOC_ID:"ag-searcharea",SEARCH_FORM_PREFIX:"search-",SEARCH_ERROR:"Enter Search Here",SEARCH_MSN_ACTION:"http://search.msn.com/results.aspx",SEARCH_MSN_FORM:"msn-search",SEARCH_MSN_AG_BUTTON:"msn-agsearch",SEARCH_MSN_SEARCH_INPUT:"q",SEARCH_CLASS_HIDDEN:"hidden"});self.constructor=function(){var p=agx.currentPage;this.khost=p.khost;if(!this.khost){var loc=window.location;this.khost=[loc.protocol,loc.host].join("//");}this._searchLastDitchTimeouts={};this.searchIsAutocomplete=p.searchIsAutocomplete;this.searchProductLines=p.searchProductLines;if(!this.searchProductLines){this.searchProductLines=["ecards-nav"];}else{if(dojo.indexOf(this.searchProductLines,"ecards-nav")==-1){this.searchProductLines.push("ecards-nav");}}if(!this.searchProductLines){this.searchProductLines=["printables-nav"];}else{if(dojo.indexOf(this.searchProductLines,"printables-nav")==-1){this.searchProductLines.push("printables-nav");}}this.searchGetSearchInputs();};self.searchGetSearchInputs=function(){dojo.forEach(this.searchProductLines,function(p){var _4f1=this.searchInputs[p]={};_4f1.canActivate=false;var _4f2=this.SEARCH_FORM_PREFIX+p;var _4f3=this.SEARCH_BUTTON_PREFIX+p;var _4f4=_4f3+this.SEARCH_SUBMIT_SUFFIX;this.searchSwapSubmitButton(_4f1,_4f3,_4f4);if(!_4f1.canActivate){return;}var _4f5=this.SEARCH_BOX_PREFIX+p;var _4f6=this.SEARCH_LOC_PREFIX+p;var _4f7="widget-"+_4f5;var _4f8=dojo.hitch(this,function(){this.searchSubmit(p);});var _4f9={dataUrl:"/"+[p.replace("-nav",""),this.SEARCH_DIMS_FILE].join("/"),searchInputId:_4f5,searchWidgetId:_4f7,searchInputName:this.SEARCH_INPUT_NAME,searchFormId:_4f2,searchButtonId:_4f3,searchSubmitCallback:_4f8,productLine:p};if(this.searchIsAutocomplete){_4f9.SEARCH_AUTOCOMPLETE=true;}var _4fa=new this.SearchBoxClass(_4f9);_4fa.startup();var _4fb={widgId:_4f7,locId:_4f6,buttonId:_4f3};var _4fc=this.searchGetSearcher(_4fb);dojo.mixin(this.searchInputs[p],{input:_4fa,searcher:_4fc});this.searchInputIds.push(_4f5);this.searchFormIds.push(_4f2);_4fc.startup();},this);return true;};self.searchSwapSubmitButton=function(_4fd,_4fe,_4ff){_4fd.canActivate=true;};self.searchGetSearcher=function(_500){var _501={widgId:_500.widgId||this.SEARCH_BOX_ID,locId:_500.locId||this.SEARCH_LOC_ID,searchButtonId:_500.buttonId,errMsg:_500.errMsg||this.SEARCH_ERROR};var _502=new this.SearcherClass(_501);_502.startup();return _502;};self.searchFocus=function(){var node=dojo.byId(this.searchInputIds[0]);if(node){node.focus();}};self.searchSubmit=function(_503){var _504={};return this.searchInputs[_503].searcher.doSearch(_504);};self.searchSubmitMSN=function(_505){if(_505=="ag"){try{search_params={buttonId:this.SEARCH_MSN_AG_BUTTON};if(this.searchProductLines){search_params["locId"]=this.SEARCH_LOC_PREFIX+this.searchProductLines[0];}var _506=this.searchGetSearcher(search_params);_506.searchBox=dojo.byId(this.SEARCH_MSN_SEARCH_INPUT);_506.doSearch({});}catch(e){return false;}}else{if(_505=="msn"){try{var form=dojo.doc.forms[this.SEARCH_MSN_FORM];form.action=this.SEARCH_MSN_ACTION;form.submit();}catch(er){return false;}}}};self.searchMSNSubmit=self.searchSubmitMSN;return self;}());}if(!dojo._hasResource["ag.util"]){dojo._hasResource["ag.util"]=true;dojo.provide("ag.util");ag.util=agi.util;}if(!dojo._hasResource["ag._base"]){dojo._hasResource["ag._base"]=true;dojo.provide("ag._base");dojo.provide("ag.registry");ag.registry=agi.registry;ag.byId=agi.byId;ag.listAll=agi.listAll;ag._loadedResources=ag._loadedResources;ag._mimeMap=agi._mimeMap;ag.requireJs=agi.requireJs;ag.requireCss=agi.requireCss;ag.require=agi.require;}if(!dojo._hasResource["agi.classes.Publisher"]){dojo._hasResource["agi.classes.Publisher"]=true;dojo.provide("agi.classes.Publisher");dojo.declare("agi.classes.Publisher",[agi.classes.Identified],{isBuilt:false,buildBeginEvent:null,_buildBeginTimer:null,buildCompleteEvent:null,_buildCompleteTimer:null,_publishHasEvents:false,BUILD_BEGIN_EVENT_TMPL:"/${id}/build/begin/",BUILD_COMPLETE_EVENT_TMPL:"/${id}/build/complete/",postMixInProperties:function(){this.buildEventTopics();},buildEventTopics:function(){this.buildBeginEvent=this.BUILD_BEGIN_EVENT_TMPL.toString().replace("${id}",this.id);this.buildCompleteEvent=this.BUILD_COMPLETE_EVENT_TMPL.toString().replace("${id}",this.id);},publishBuildBegin:function(){this._buildBeginTimer=new Date().getTime();dojo.publish(this.buildBeginEvent,[{message:this+" build started",time:this._buildBeginTimer,handle:this.buildBeginEvent}]);},publishBuildComplete:function(){this._buildCompleteTimer=new Date().getTime();dojo.publish(this.buildCompleteEvent,[{message:this+" build complete",time:this._buildCompleteTimer,total:(this._buildCompleteTimer-this._buildBeginTimer),handle:this.buildCompleteHandle}]);}});}if(!dojo._hasResource["ag.classes.Publisher"]){dojo._hasResource["ag.classes.Publisher"]=true;dojo.provide("ag.classes.Publisher");ag.classes.Publisher=agi.classes.Publisher;}if(!dojo._hasResource["ag.widget.Quickshop"]){dojo._hasResource["ag.widget.Quickshop"]=true;dojo.provide("ag.widget.Quickshop");dojo.declare("ag.widget.Quickshop",[ag.classes.Publisher],function(){var self={};dojo.mixin(self,{dataUrl:"/$productLine/quickshop.pd",_optionCache:{},_eventCache:{},XHR_TIMEOUT:30*1000,DUMMY_OPTION:"[Choose $label]",CLASS_HIDDEN:"hidden",OCCASION:"occasion",RECIPIENT:"recipient",SENTIMENT:"sentiment",OCCASION_ID:"qs-occasion-select-",RECIPIENT_ID:"qs-recipient-select-",SENTIMENT_ID:"qs-sentiment-select-",SUBMIT_BUTTON_ID:"qs-submit-button-"});self.constructor=function(args){if(dojo.isObject(args)){dojo.mixin(this,args);}this._optionCache={};this._eventCache={};this.data={};this.dataUrl=this.dataUrl.replace("$productLine",this.productLine);this.occasionSelect=dojo.byId(this.OCCASION_ID+this.productLine);this.recipientSelect=dojo.byId(this.RECIPIENT_ID+this.productLine);this.sentimentSelect=dojo.byId(this.SENTIMENT_ID+this.productLine);this.submitButton=dojo.byId(this.SUBMIT_BUTTON_ID+this.productLine);hasNecessaryNodes=dojo.every([this.occasionSelect,this.recipientSelect,this.sentimentSelect,this.submitButton],ag.util.isDef);if(!hasNecessaryNodes){return;}this.setupForm();};self.setupForm=function(){this._connectChange("occasion",this.occasionSelect);this._connectChange("recipient",this.recipientSelect);this._connectChange("sentiment",this.sentimentSelect);this.lockForm();this._xhrUpdate({},[this.RECIPIENT,this.SENTIMENT]);};self._connectChange=function(name,node){name+="Change";this._eventCache[name]=dojo.connect(node,"onchange",this,this.onChange);};self._xhrUpdate=function(_507,_508){var _509={url:this.dataUrl,handleAs:"json",updateTargets:_508,load:dojo.hitch(this,this._xhrHandleLoad),error:dojo.hitch(this,this._xhrHandleError),timeout:this.XHR_TIMEOUT,content:_507?_507:{}};dojo.xhrGet(_509);};self._xhrHandleLoad=function(data,_50a){this.data=data;this.unlockForm();var _50b=_50a.args.updateTargets;var _50c=_50a.args.content;dojo.forEach(_50b,function(_50d){var args={"caller":_50d};dojo.mixin(args,_50c);this.buildDropDown(args);},this);if(this.data){this._unhideNode(this.recipientSelect.parentNode);this._unhideNode(this.sentimentSelect.parentNode);}};self._xhrHandleError=function(_50e,_50f){this.unlockForm();this._revertToStaticForm();};self._revertToStaticForm=function(){this._hideNode(this.recipientSelect.parentNode);this._hideNode(this.sentimentSelect.parentNode);dojo.forEach([this._eventCache.occasionChange,this._eventCache.recipientChange,this._eventCache.sentimentChange],dojo.disconnect);};self.onChange=function(evt){var _510={};var _511=[];this.lockForm();var _512=function(node){if(node.value&&node.value!="NULL"){_510[node.name]=node.value;}};var eid=evt.target.id;switch(eid){case this.OCCASION_ID+this.productLine:_511=[this.SENTIMENT,this.RECIPIENT];_512(this.occasionSelect);break;case this.RECIPIENT_ID+this.productLine:_511=[this.SENTIMENT];_512(this.occasionSelect);_512(this.recipientSelect);break;case this.SENTIMENT_ID+this.productLine:_511=[];_512(this.occasionSelect);_512(this.sentimentSelect);_512(this.recipientSelect);break;}this._xhrUpdate(_510,_511);};self.buildDropDown=function(args){var _513=args.caller+"Select";var _514=this[_513];if(!_514){return;}var _515={curValue:_514.value,opts:this.data[args.caller],selectNode:_514,isEmpty:true};dojo.mixin(_515,args);if(_515.opts){has_length=(_515.opts.length<=0);_515.isEmpty=has_length?true:false;}this._removeAllFromSelect(_514);this.addOptions(_515);};self._removeAllFromSelect=function(_516){if(!_516.options){return;}node_count=_516.options.length-1;for(var i=node_count;i>=0;i--){_516.remove(i);}};self.addOptions=function(args){args.isEmpty=args.isEmpty?args.isEmpty:true;var _517=self._verifyDefaultNodes(args);if(!args.opts){return;}dojo.forEach(args.opts,function(pair,_518){var key=pair[0];var _519=pair[1];var _51a=[_519,args.caller,args.selectNode.id].join("_");var _51b={text:key,"value":_519,selectNode:args.selectNode,index:_518+_517,isSelected:(args.curValue&&_519==args.curValue),"key":_51a};this._addOption(_51b);},this);};self._verifyDefaultNodes=function(args){var _51c=0;have_recipient=(args.selectNode.id==this.RECIPIENT_ID);have_sentiment=(args.selectNode.id==this.SENTIMENT_ID);if(args.isEmpty&&(have_recipient||have_sentiment)){var _51d=ag.util.capitalize(args.caller);if(args.caller=="sentiment"){_51d=ag.util.capitalize("tone");}var text=this.DUMMY_OPTION.replace("$label",_51d);var _51e={"text":text,value:"NULL",selectNode:args.selectNode,key:text,index:0};this._addOption(_51e);_51c+=1;}return _51c;};self._addOption=function(args){if(!args.key){return;}var _51f=this._createorGetOption(args);var _520=args.selectNode.options;if(_520&&_520.add){_520.add(_51f,args.index);}else{args.selectNode.appendChild(_51f);}if(_520&&args.isSelected){_520.selectedIndex=args.index;}};self._createorGetOption=function(args){var _521=null;if(!_521){_521=dojo.doc.createElement("option");_521.text=args.text.toLowerCase().replace("_"," ");_521.value=args.value;}return _521;};self.lockForm=function(){dojo.removeClass(this.submitButton,"submit");this.submitButton.disabled=true;dojo.forEach([this.occasionSelect,this.recipientSelect,this.sentimentSelect],this._hideNode);};self.unlockForm=function(){dojo.addClass(this.submitButton,"submit");this.submitButton.disabled=false;dojo.forEach([this.occasionSelect,this.recipientSelect,this.sentimentSelect],this._unhideNode);};self._hideNode=function(node){dojo.addClass(node,this.CLASS_HIDDEN);};self._unhideNode=function(node){dojo.removeClass(node,this.CLASS_HIDDEN);};return self;}());}if(!dojo._hasResource["ag.widget.QuickshopMultiMixin"]){dojo._hasResource["ag.widget.QuickshopMultiMixin"]=true;dojo.provide("ag.widget.QuickshopMultiMixin");dojo.declare("ag.widget.QuickshopMultiMixin",[ag.classes._Mixin],function(){var self={__culprit__:"$Author: mprugh $"};self.QuickshopWidgetClass=ag.widget.Quickshop;self.constructor=function(){var p=agx.currentPage;this.searchProductLines=p.searchProductLines;if(!this.searchProductLines){this.searchProductLines=["ecards-nav"];}else{if(dojo.indexOf(this.searchProductLines,"ecards-nav")==-1){this.searchProductLines.push("ecards-nav");}}if(!this.searchProductLines){this.searchProductLines=["printables-nav"];}else{if(dojo.indexOf(this.searchProductLines,"printables-nav")==-1){this.searchProductLines.push("printables-nav");}}this.quickshops={};dojo.forEach(this.searchProductLines,function(p){var args={productLine:p.replace("-nav",""),ahost:agx.currentPage.ahost,khost:agx.currentPage.khost};this.quickshops[p]=new this.QuickshopWidgetClass(args);},this);};return self;}());}if(!dojo._hasResource["ag.widget.NavigationSearch"]){dojo._hasResource["ag.widget.NavigationSearch"]=true;dojo.provide("ag.widget.NavigationSearch");dojo.declare("ag.widget.NavigationSearch",[agi.classes.Adopter],{constructor:function(){this.showSearchInNav();this.helperForDynamicMenusContainingForms();},helperForDynamicMenusContainingForms:function(){dojo.query("#agi-tabs > LI").connect("onmouseover",this,this.isRealMouseOver);dojo.query("#agi-tabs > LI").connect("onmouseout",this,this.isRealMouseOut);},isRealMouseOver:function(evt){if(this.isReal(evt.relatedTarget,evt.currentTarget)){dojo.addClass(evt.currentTarget,"gsfhover");}},isRealMouseOut:function(evt){if(this.isReal(evt.relatedTarget,evt.currentTarget)){dojo.removeClass(evt.currentTarget,"gsfhover");dojo.query("#widget-ag-searchtext-ecards-nav_popup").style("display","none");dojo.query("#widget-ag-searchtext-printables-nav_popup").style("display","none");}},isReal:function(_522,tab){if(!_522||!tab){return false;}if(dojo.isDescendant(_522,tab)){return false;}if(dojo.isDescendant(_522,dojo.byId("widget-ag-searchtext-ecards-nav_popup"))){return false;}if(dojo.isDescendant(_522,dojo.byId("widget-ag-searchtext-printables-nav_popup"))){return false;}return true;},showSearchInNav:function(){this.ecardsForm=dojo.byId("search-ecards-nav");this.printablesForm=dojo.byId("search-printables-nav");this.ecardsQuickShopForm=dojo.byId("quickshop-form-ecards");this.printablesQuickShopForm=dojo.byId("quickshop-form-printables");dojo.query("input.searchRadio-ecards-nav").connect("onclick",this,this.searchClicked);dojo.query("input.searchRadio-printables-nav").connect("onclick",this,this.searchClicked);dojo.query("input.quickShopRadio-ecards-nav").connect("onclick",this,this.quickShopClicked);dojo.query("input.quickShopRadio-printables-nav").connect("onclick",this,this.quickShopClicked);var _523=window.location.href;if(_523.contains("printables")&&this.printablesForm){this.showPrintables();this.showQuickShopPrintables();}else{if(this.ecardsForm){this.showEcards();this.showQuickShopEcards();}}},searchClicked:function(evt){if(evt.target.id=="radioEcards"){this.showEcards();}else{if(evt.target.id=="radioPrintables"){this.showPrintables();}}},quickShopClicked:function(evt){if(evt.target.id=="radioEcards"){this.showQuickShopEcards();}else{if(evt.target.id=="radioPrintables"){this.showQuickShopPrintables();}}},showEcards:function(){dojo.style(this.ecardsForm,{display:"inline"});dojo.style(this.printablesForm,{display:"none"});this.checkRadio("input.searchRadio-ecards-nav","radioEcards");},showPrintables:function(){dojo.style(this.printablesForm,{display:"inline"});dojo.style(this.ecardsForm,{display:"none"});this.checkRadio("input.searchRadio-printables-nav","radioPrintables");},showQuickShopEcards:function(){dojo.style(this.ecardsQuickShopForm,{display:"inline"});dojo.style(this.printablesQuickShopForm,{display:"none"});this.checkRadio("input.quickShopRadio-ecards-nav","radioEcards");},showQuickShopPrintables:function(){dojo.style(this.printablesQuickShopForm,{display:"inline"});dojo.style(this.ecardsQuickShopForm,{display:"none"});this.checkRadio("input.quickShopRadio-printables-nav","radioPrintables");},checkRadio:function(_524,id){dojo.query(_524).forEach(function(node){if(node.id==id){dojo.attr(node,"checked",true);}});}});}if(!dojo._hasResource["ag.classes.Identified"]){dojo._hasResource["ag.classes.Identified"]=true;dojo.provide("ag.classes.Identified");ag.classes.Identified=agi.classes.Identified;}if(!dojo._hasResource["dojox.string.Builder"]){dojo._hasResource["dojox.string.Builder"]=true;dojo.provide("dojox.string.Builder");dojox.string.Builder=function(str){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var tmp="",l=arguments.length;switch(l){case 9:tmp=""+arguments[8]+tmp;case 8:tmp=""+arguments[7]+tmp;case 7:tmp=""+arguments[6]+tmp;case 6:tmp=""+arguments[5]+tmp;case 5:tmp=""+arguments[4]+tmp;case 4:tmp=""+arguments[3]+tmp;case 3:tmp=""+arguments[2]+tmp;case 2:b+=""+arguments[0]+arguments[1]+tmp;break;default:var i=0;while(i<arguments.length){tmp+=arguments[i++];}b+=tmp;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_525){return this.append.apply(this,_525);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_526,_527){b=b.replace(_526,_527);this.length=b.length;return this;};this.remove=function(_528,len){if(len===undefined){len=b.length;}if(len==0){return this;}b=b.substr(0,_528)+b.substr(_528+len);this.length=b.length;return this;};this.insert=function(_529,str){if(_529==0){b=str+b;}else{b=b.slice(0,_529)+str+b.slice(_529);}this.length=b.length;return this;};this.toString=function(){return b;};if(str){this.append(str);}};}if(!dojo._hasResource["dojox.string.tokenize"]){dojo._hasResource["dojox.string.tokenize"]=true;dojo.provide("dojox.string.tokenize");dojox.string.tokenize=function(str,re,_52a,_52b){var _52c=[];var _52d,_52e,_52f=0;while(_52d=re.exec(str)){_52e=str.slice(_52f,re.lastIndex-_52d[0].length);if(_52e.length){_52c.push(_52e);}if(_52a){if(dojo.isOpera){var copy=_52d.slice(0);while(copy.length<_52d.length){copy.push(null);}_52d=copy;}var _530=_52a.apply(_52b,_52d.slice(1).concat(_52c.length));if(typeof _530!="undefined"){_52c.push(_530);}}_52f=re.lastIndex;}_52e=str.slice(_52f);if(_52e.length){_52c.push(_52e);}return _52c;};}if(!dojo._hasResource["dojox.dtl._base"]){dojo._hasResource["dojox.dtl._base"]=true;dojo.provide("dojox.dtl._base");dojo.experimental("dojox.dtl");(function(){var dd=dojox.dtl;dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=dojo.extend(function(dict){if(dict){dojo._mixin(this,dict);if(dict.get){this._getter=dict.get;delete this.get;}}},{push:function(){var last=this;var _531=dojo.delegate(this);_531.pop=function(){return last;};return _531;},pop:function(){throw new Error("pop() called on empty Context");},get:function(key,_532){var n=this._normalize;if(this._getter){var got=this._getter(key);if(typeof got!="undefined"){return n(got);}}if(typeof this[key]!="undefined"){return n(this[key]);}return _532;},_normalize:function(_533){if(_533 instanceof Date){_533.year=_533.getFullYear();_533.month=_533.getMonth()+1;_533.day=_533.getDate();_533.date=_533.year+"-"+("0"+_533.month).slice(-2)+"-"+("0"+_533.day).slice(-2);_533.hour=_533.getHours();_533.minute=_533.getMinutes();_533.second=_533.getSeconds();_533.microsecond=_533.getMilliseconds();}return _533;},update:function(dict){var _534=this.push();if(dict){dojo._mixin(this,dict);}return _534;}});var _535=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _536=/\s+/g;var _537=function(_538,_539){_538=_538||_536;if(!(_538 instanceof RegExp)){_538=new RegExp(_538,"g");}if(!_538.global){throw new Error("You must use a globally flagged RegExp with split "+_538);}_538.exec("");var part,_53a=[],_53b=0,i=0;while(part=_538.exec(this)){_53a.push(this.slice(_53b,_538.lastIndex-part[0].length));_53b=_538.lastIndex;if(_539&&(++i>_539-1)){break;}}_53a.push(this.slice(_53b));return _53a;};dd.Token=function(_53c,_53d){this.token_type=_53c;this.contents=new String(dojo.trim(_53d));this.contents.split=_537;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(_53e){var bit,bits=[],i=0;_53e=_53e||999;while(i++<_53e&&(bit=_535.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){bits.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){bits.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{bits.push(bit);}}}return bits;};var ddt=dd.text={_get:function(_53f,name,_540){var _541=dd.register.get(_53f,name.toLowerCase(),_540);if(!_541){if(!_540){throw new Error("No tag found for "+name);}return null;}var fn=_541[1];var _542=_541[2];var _543;if(fn.indexOf(":")!=-1){_543=fn.split(":");fn=_543.pop();}dojo["require"](_542);var _544=dojo.getObject(_542);return _544[fn||name]||_544[name+"_"]||_544[fn+"_"];},getTag:function(name,_545){return ddt._get("tag",name,_545);},getFilter:function(name,_546){return ddt._get("filter",name,_546);},getTemplate:function(file){return new dd.Template(ddt.getTemplateString(file));},getTemplateString:function(file){return dojo._getText(file.toString())||"";},_resolveLazy:function(_547,sync,json){if(sync){if(json){return dojo.fromJson(dojo._getText(_547))||{};}else{return dd.text.getTemplateString(_547);}}else{return dojo.xhrGet({handleAs:(json)?"json":"text",url:_547});}},_resolveTemplateArg:function(arg,sync){if(ddt._isTemplate(arg)){if(!sync){var d=new dojo.Deferred();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync);},_isTemplate:function(arg){return (typeof arg=="undefined")||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,sync){if(arg.constructor==Object){if(!sync){var d=new dojo.Deferred;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return dojox.string.tokenize(str,ddt._re,ddt._parseDelims);},_parseDelims:function(varr,load,tag){if(varr){return [dd.TOKEN_VAR,varr];}else{if(load){var _548=dojo.trim(tag).split(/\s+/g);for(var i=0,part;part=_548[i];i++){dojo["require"](part);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=dojo.extend(function(_549,_54a){var str=_54a?_549:ddt._resolveTemplateArg(_549,true)||"";var _54b=ddt.tokenize(str);var _54c=new dd._Parser(_54b);this.nodelist=_54c.parse();},{update:function(node,_54d){return ddt._resolveContextArg(_54d).addCallback(this,function(_54e){var _54f=this.render(new dd._Context(_54e));if(node.forEach){node.forEach(function(item){item.innerHTML=_54f;});}else{dojo.byId(node).innerHTML=_54f;}return this;});},render:function(_550,_551){_551=_551||this.getBuffer();_550=_550||new dd._Context({});return this.nodelist.render(_550,_551)+"";},getBuffer:function(){return new dojox.string.Builder();}});var qfRe=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(dojox.string.tokenize(str,qfRe,function(_552){return new dd._Filter(_552);}));}};dd._QuickNodeList=dojo.extend(function(_553){this.contents=_553;},{render:function(_554,_555){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_555=_555.concat(this.contents[i].resolve(_554));}else{_555=_555.concat(this.contents[i]);}}return _555;},dummyRender:function(_556){return this.render(_556,dd.Template.prototype.getBuffer()).toString();},clone:function(_557){return this;}});dd._Filter=dojo.extend(function(_558){if(!_558){throw new Error("Filter must be called with variable name");}this.contents=_558;var _559=this._cache[_558];if(_559){this.key=_559[0];this.filters=_559[1];}else{this.filters=[];dojox.string.tokenize(_558,this._re,this._tokenize,this);this._cache[_558]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(typeof arguments[i]!="undefined"&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var _55a=arguments[pos];if(this._args[pos]=="'"){_55a=_55a.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){_55a=_55a.replace(/\\"/g,"\"");}}arg=[!this._args[pos],_55a];break;}}var fn=ddt.getFilter(arguments[3]);if(!dojo.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_55b){if(typeof this.key=="undefined"){return "";}var str=this.resolvePath(this.key,_55b);for(var i=0,_55c;_55c=this.filters[i];i++){if(_55c[1]){if(_55c[1][0]){str=_55c[0](str,this.resolvePath(_55c[1][1],_55b));}else{str=_55c[0](str,_55c[1][1]);}}else{str=_55c[0](str);}}return str;},resolvePath:function(path,_55d){var _55e,_55f;var _560=path.charAt(0);var last=path.slice(-1);if(!isNaN(parseInt(_560))){_55e=(path.indexOf(".")==-1)?parseInt(path):parseFloat(path);}else{if(_560=="\""&&_560==last){_55e=path.slice(1,-1);}else{if(path=="true"){return true;}if(path=="false"){return false;}if(path=="null"||path=="None"){return null;}_55f=path.split(".");_55e=_55d.get(_55f[0]);if(dojo.isFunction(_55e)){var self=_55d.getThis&&_55d.getThis();if(_55e.alters_data){_55e="";}else{if(self){_55e=_55e.call(self);}else{_55e="";}}}for(var i=1;i<_55f.length;i++){var part=_55f[i];if(_55e){var base=_55e;if(dojo.isObject(_55e)&&part=="items"&&typeof _55e[part]=="undefined"){var _561=[];for(var key in _55e){_561.push([key,_55e[key]]);}_55e=_561;continue;}if(_55e.get&&dojo.isFunction(_55e.get)&&_55e.get.safe){_55e=_55e.get(part);}else{if(typeof _55e[part]=="undefined"){_55e=_55e[part];break;}else{_55e=_55e[part];}}if(dojo.isFunction(_55e)){if(_55e.alters_data){_55e="";}else{_55e=_55e.call(base);}}else{if(_55e instanceof Date){_55e=dd._Context.prototype._normalize(_55e);}}}else{return "";}}}}return _55e;}});dd._TextNode=dd._Node=dojo.extend(function(obj){this.contents=obj;},{set:function(data){this.contents=data;return this;},render:function(_562,_563){return _563.concat(this.contents);},isEmpty:function(){return !dojo.trim(this.contents);},clone:function(){return this;}});dd._NodeList=dojo.extend(function(_564){this.contents=_564||[];this.last="";},{push:function(node){this.contents.push(node);return this;},concat:function(_565){this.contents=this.contents.concat(_565);return this;},render:function(_566,_567){for(var i=0;i<this.contents.length;i++){_567=this.contents[i].render(_566,_567);if(!_567){throw new Error("Template must return buffer");}}return _567;},dummyRender:function(_568){return this.render(_568,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=dojo.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_569,_56a){var str=this.contents.resolve(_569);if(!str){str="";}else{if(!str.safe){str=dd._base.escape(""+str);}}return _56a.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=dojo.extend(function(_56b){this.contents=_56b;},{i:0,parse:function(_56c){var _56d={},_56e;_56c=_56c||[];for(var i=0;i<_56c.length;i++){_56d[_56c[i]]=true;}var _56f=new dd._NodeList();while(this.i<this.contents.length){_56e=this.contents[this.i++];if(typeof _56e=="string"){_56f.push(new dd._TextNode(_56e));}else{var type=_56e[0];var text=_56e[1];if(type==dd.TOKEN_VAR){_56f.push(new dd._VarNode(text));}else{if(type==dd.TOKEN_BLOCK){if(_56d[text]){--this.i;return _56f;}var cmd=text.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_56f.push(fn(this,new dd.Token(type,text)));}}}}}}if(_56c.length){throw new Error("Could not find closing tag(s): "+_56c.toString());}this.contents.length=0;return _56f;},next_token:function(){var _570=this.contents[this.i++];return new dd.Token(_570[0],_570[1]);},delete_first_token:function(){this.i++;},skip_past:function(_571){while(this.i<this.contents.length){var _572=this.contents[this.i++];if(_572[0]==dd.TOKEN_BLOCK&&_572[1]==_571){return;}}throw new Error("Unclosed tag found when looking for "+_571);},create_variable_node:function(expr){return new dd._VarNode(expr);},create_text_node:function(expr){return new dd._TextNode(expr||"");},getTemplate:function(file){return new dd.Template(file);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_573,name){var _574=dd.register._registry[_573+"s"];for(var i=0,_575;_575=_574[i];i++){if(typeof _575[0]=="string"){if(_575[0]==name){return _575;}}else{if(name.match(_575[0])){return _575;}}}},getAttributeTags:function(){var tags=[];var _576=dd.register._registry.attributes;for(var i=0,_577;_577=_576[i];i++){if(_577.length==3){tags.push(_577);}else{var fn=dojo.getObject(_577[1]);if(fn&&dojo.isFunction(fn)){_577.push(fn);tags.push(_577);}}}return tags;},_any:function(type,base,_578){for(var path in _578){for(var i=0,fn;fn=_578[path][i];i++){var key=fn;if(dojo.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var attr=fn;if(attr.substr(0,5)=="attr:"){attr=attr.slice(5);}dd.register._registry.attributes.push([attr.toLowerCase(),base+"."+path+"."+attr]);}key=key.toLowerCase();}dd.register._registry[type].push([key,fn,base+"."+path]);}}},tags:function(base,_579){dd.register._any("tags",base,_579);},filters:function(base,_57a){dd.register._any("filters",base,_57a);}};var _57b=/&/g;var _57c=/</g;var _57d=/>/g;var _57e=/'/g;var _57f=/"/g;dd._base.escape=function(_580){return dd.mark_safe(_580.replace(_57b,"&amp;").replace(_57c,"&lt;").replace(_57d,"&gt;").replace(_57f,"&quot;").replace(_57e,"&#39;"));};dd._base.safe=function(_581){if(typeof _581=="string"){_581=new String(_581);}if(typeof _581=="object"){_581.safe=true;}return _581;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});})();}if(!dojo._hasResource["dojox.dtl"]){dojo._hasResource["dojox.dtl"]=true;dojo.provide("dojox.dtl");}if(!dojo._hasResource["dojox.dtl.tag.logic"]){dojo._hasResource["dojox.dtl.tag.logic"]=true;dojo.provide("dojox.dtl.tag.logic");(function(){var dd=dojox.dtl;var ddt=dd.text;var ddtl=dd.tag.logic;ddtl.IfNode=dojo.extend(function(_582,_583,_584,type){this.bools=_582;this.trues=_583;this.falses=_584;this.type=type;},{render:function(_585,_586){var i,bool,_587,_588,_589;if(this.type=="or"){for(i=0;bool=this.bools[i];i++){_587=bool[0];_588=bool[1];_589=_588.resolve(_585);if((_589&&!_587)||(_587&&!_589)){if(this.falses){_586=this.falses.unrender(_585,_586);}return (this.trues)?this.trues.render(_585,_586,this):_586;}}if(this.trues){_586=this.trues.unrender(_585,_586);}return (this.falses)?this.falses.render(_585,_586,this):_586;}else{for(i=0;bool=this.bools[i];i++){_587=bool[0];_588=bool[1];_589=_588.resolve(_585);if(_589==_587){if(this.trues){_586=this.trues.unrender(_585,_586);}return (this.falses)?this.falses.render(_585,_586,this):_586;}}if(this.falses){_586=this.falses.unrender(_585,_586);}return (this.trues)?this.trues.render(_585,_586,this):_586;}return _586;},unrender:function(_58a,_58b){_58b=(this.trues)?this.trues.unrender(_58a,_58b):_58b;_58b=(this.falses)?this.falses.unrender(_58a,_58b):_58b;return _58b;},clone:function(_58c){var _58d=(this.trues)?this.trues.clone(_58c):null;var _58e=(this.falses)?this.falses.clone(_58c):null;return new this.constructor(this.bools,_58d,_58e,this.type);}});ddtl.IfEqualNode=dojo.extend(function(var1,var2,_58f,_590,_591){this.var1=new dd._Filter(var1);this.var2=new dd._Filter(var2);this.trues=_58f;this.falses=_590;this.negate=_591;},{render:function(_592,_593){var var1=this.var1.resolve(_592);var var2=this.var2.resolve(_592);var1=(typeof var1!="undefined")?var1:"";var2=(typeof var1!="undefined")?var2:"";if((this.negate&&var1!=var2)||(!this.negate&&var1==var2)){if(this.falses){_593=this.falses.unrender(_592,_593,this);}return (this.trues)?this.trues.render(_592,_593,this):_593;}if(this.trues){_593=this.trues.unrender(_592,_593,this);}return (this.falses)?this.falses.render(_592,_593,this):_593;},unrender:function(_594,_595){return ddtl.IfNode.prototype.unrender.call(this,_594,_595);},clone:function(_596){var _597=this.trues?this.trues.clone(_596):null;var _598=this.falses?this.falses.clone(_596):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_597,_598,this.negate);}});ddtl.ForNode=dojo.extend(function(_599,loop,_59a,_59b){this.assign=_599;this.loop=new dd._Filter(loop);this.reversed=_59a;this.nodelist=_59b;this.pool=[];},{render:function(_59c,_59d){var i,j,k;var _59e=false;var _59f=this.assign;for(k=0;k<_59f.length;k++){if(typeof _59c[_59f[k]]!="undefined"){_59e=true;_59c=_59c.push();break;}}if(!_59e&&_59c.forloop){_59e=true;_59c=_59c.push();}var _5a0=this.loop.resolve(_59c)||[];for(i=_5a0.length;i<this.pool.length;i++){this.pool[i].unrender(_59c,_59d,this);}if(this.reversed){_5a0=_5a0.slice(0).reverse();}var _5a1=dojo.isObject(_5a0)&&!dojo.isArrayLike(_5a0);var _5a2=[];if(_5a1){for(var key in _5a0){_5a2.push(_5a0[key]);}}else{_5a2=_5a0;}var _5a3=_59c.forloop={parentloop:_59c.get("forloop",{})};var j=0;for(i=0;i<_5a2.length;i++){var item=_5a2[i];_5a3.counter0=j;_5a3.counter=j+1;_5a3.revcounter0=_5a2.length-j-1;_5a3.revcounter=_5a2.length-j;_5a3.first=!j;_5a3.last=(j==_5a2.length-1);if(_59f.length>1&&dojo.isArrayLike(item)){if(!_59e){_59e=true;_59c=_59c.push();}var _5a4={};for(k=0;k<item.length&&k<_59f.length;k++){_5a4[_59f[k]]=item[k];}dojo.mixin(_59c,_5a4);}else{_59c[_59f[0]]=item;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_59d));}_59d=this.pool[j++].render(_59c,_59d,this);}delete _59c.forloop;if(_59e){_59c=_59c.pop();}else{for(k=0;k<_59f.length;k++){delete _59c[_59f[k]];}}return _59d;},unrender:function(_5a5,_5a6){for(var i=0,pool;pool=this.pool[i];i++){_5a6=pool.unrender(_5a5,_5a6);}return _5a6;},clone:function(_5a7){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_5a7));}});dojo.mixin(ddtl,{if_:function(_5a8,_5a9){var i,part,type,_5aa=[],_5ab=_5a9.contents.split();_5ab.shift();_5a9=_5ab.join(" ");_5ab=_5a9.split(" and ");if(_5ab.length==1){type="or";_5ab=_5a9.split(" or ");}else{type="and";for(i=0;i<_5ab.length;i++){if(_5ab[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;part=_5ab[i];i++){var not=false;if(part.indexOf("not ")==0){part=part.slice(4);not=true;}_5aa.push([not,new dd._Filter(part)]);}var _5ac=_5a8.parse(["else","endif"]);var _5ad=false;var _5a9=_5a8.next_token();if(_5a9.contents=="else"){_5ad=_5a8.parse(["endif"]);_5a8.next_token();}return new ddtl.IfNode(_5aa,_5ac,_5ad,type);},_ifequal:function(_5ae,_5af,_5b0){var _5b1=_5af.split_contents();if(_5b1.length!=3){throw new Error(_5b1[0]+" takes two arguments");}var end="end"+_5b1[0];var _5b2=_5ae.parse(["else",end]);var _5b3=false;var _5af=_5ae.next_token();if(_5af.contents=="else"){_5b3=_5ae.parse([end]);_5ae.next_token();}return new ddtl.IfEqualNode(_5b1[1],_5b1[2],_5b2,_5b3,_5b0);},ifequal:function(_5b4,_5b5){return ddtl._ifequal(_5b4,_5b5);},ifnotequal:function(_5b6,_5b7){return ddtl._ifequal(_5b6,_5b7,true);},for_:function(_5b8,_5b9){var _5ba=_5b9.contents.split();if(_5ba.length<4){throw new Error("'for' statements should have at least four words: "+_5b9.contents);}var _5bb=_5ba[_5ba.length-1]=="reversed";var _5bc=(_5bb)?-3:-2;if(_5ba[_5ba.length+_5bc]!="in"){throw new Error("'for' tag received an invalid argument: "+_5b9.contents);}var _5bd=_5ba.slice(1,_5bc).join(" ").split(/ *, */);for(var i=0;i<_5bd.length;i++){if(!_5bd[i]||_5bd[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_5b9.contents);}}var _5be=_5b8.parse(["endfor"]);_5b8.next_token();return new ddtl.ForNode(_5bd,_5ba[_5ba.length+_5bc+1],_5bb,_5be);}});})();}if(!dojo._hasResource["dojox.dtl.tag.loop"]){dojo._hasResource["dojox.dtl.tag.loop"]=true;dojo.provide("dojox.dtl.tag.loop");(function(){var dd=dojox.dtl;var ddtl=dd.tag.loop;ddtl.CycleNode=dojo.extend(function(_5bf,name,text,_5c0){this.cyclevars=_5bf;this.name=name;this.contents=text;this.shared=_5c0||{counter:-1,map:{}};},{render:function(_5c1,_5c2){if(_5c1.forloop&&!_5c1.forloop.counter0){this.shared.counter=-1;}++this.shared.counter;var _5c3=this.cyclevars[this.shared.counter%this.cyclevars.length];var map=this.shared.map;if(!map[_5c3]){map[_5c3]=new dd._Filter(_5c3);}_5c3=map[_5c3].resolve(_5c1,_5c2);if(this.name){_5c1[this.name]=_5c3;}this.contents.set(_5c3);return this.contents.render(_5c1,_5c2);},unrender:function(_5c4,_5c5){return this.contents.unrender(_5c4,_5c5);},clone:function(_5c6){return new this.constructor(this.cyclevars,this.name,this.contents.clone(_5c6),this.shared);}});ddtl.IfChangedNode=dojo.extend(function(_5c7,vars,_5c8){this.nodes=_5c7;this._vars=vars;this.shared=_5c8||{last:null,counter:0};this.vars=dojo.map(vars,function(item){return new dojox.dtl._Filter(item);});},{render:function(_5c9,_5ca){if(_5c9.forloop){if(_5c9.forloop.counter<=this.shared.counter){this.shared.last=null;}this.shared.counter=_5c9.forloop.counter;}var _5cb;if(this.vars.length){_5cb=dojo.toJson(dojo.map(this.vars,function(item){return item.resolve(_5c9);}));}else{_5cb=this.nodes.dummyRender(_5c9,_5ca);}if(_5cb!=this.shared.last){var _5cc=(this.shared.last===null);this.shared.last=_5cb;_5c9=_5c9.push();_5c9.ifchanged={firstloop:_5cc};_5ca=this.nodes.render(_5c9,_5ca);_5c9=_5c9.pop();}else{_5ca=this.nodes.unrender(_5c9,_5ca);}return _5ca;},unrender:function(_5cd,_5ce){return this.nodes.unrender(_5cd,_5ce);},clone:function(_5cf){return new this.constructor(this.nodes.clone(_5cf),this._vars,this.shared);}});ddtl.RegroupNode=dojo.extend(function(_5d0,key,_5d1){this._expression=_5d0;this.expression=new dd._Filter(_5d0);this.key=key;this.alias=_5d1;},{_push:function(_5d2,_5d3,_5d4){if(_5d4.length){_5d2.push({grouper:_5d3,list:_5d4});}},render:function(_5d5,_5d6){_5d5[this.alias]=[];var list=this.expression.resolve(_5d5);if(list){var last=null;var _5d7=[];for(var i=0;i<list.length;i++){var id=list[i][this.key];if(last!==id){this._push(_5d5[this.alias],last,_5d7);last=id;_5d7=[list[i]];}else{_5d7.push(list[i]);}}this._push(_5d5[this.alias],last,_5d7);}return _5d6;},unrender:function(_5d8,_5d9){return _5d9;},clone:function(_5da,_5db){return this;}});dojo.mixin(ddtl,{cycle:function(_5dc,_5dd){var args=_5dd.split_contents();if(args.length<2){throw new Error("'cycle' tag requires at least two arguments");}if(args[1].indexOf(",")!=-1){var vars=args[1].split(",");args=[args[0]];for(var i=0;i<vars.length;i++){args.push("\""+vars[i]+"\"");}}if(args.length==2){var name=args[args.length-1];if(!_5dc._namedCycleNodes){throw new Error("No named cycles in template: '"+name+"' is not defined");}if(!_5dc._namedCycleNodes[name]){throw new Error("Named cycle '"+name+"' does not exist");}return _5dc._namedCycleNodes[name];}if(args.length>4&&args[args.length-2]=="as"){var name=args[args.length-1];var node=new ddtl.CycleNode(args.slice(1,args.length-2),name,_5dc.create_text_node());if(!_5dc._namedCycleNodes){_5dc._namedCycleNodes={};}_5dc._namedCycleNodes[name]=node;}else{node=new ddtl.CycleNode(args.slice(1),null,_5dc.create_text_node());}return node;},ifchanged:function(_5de,_5df){var _5e0=_5df.contents.split();var _5e1=_5de.parse(["endifchanged"]);_5de.delete_first_token();return new ddtl.IfChangedNode(_5e1,_5e0.slice(1));},regroup:function(_5e2,_5e3){var _5e4=dojox.string.tokenize(_5e3.contents,/(\s+)/g,function(_5e5){return _5e5;});if(_5e4.length<11||_5e4[_5e4.length-3]!="as"||_5e4[_5e4.length-7]!="by"){throw new Error("Expected the format: regroup list by key as newList");}var _5e6=_5e4.slice(2,-8).join("");var key=_5e4[_5e4.length-5];var _5e7=_5e4[_5e4.length-1];return new ddtl.RegroupNode(_5e6,key,_5e7);}});})();}if(!dojo._hasResource["dojox.dtl.filter.misc"]){dojo._hasResource["dojox.dtl.filter.misc"]=true;dojo.provide("dojox.dtl.filter.misc");dojo.mixin(dojox.dtl.filter.misc,{filesizeformat:function(_5e8){_5e8=parseFloat(_5e8);if(_5e8<1024){return (_5e8==1)?_5e8+" byte":_5e8+" bytes";}else{if(_5e8<1024*1024){return (_5e8/1024).toFixed(1)+" KB";}else{if(_5e8<1024*1024*1024){return (_5e8/1024/1024).toFixed(1)+" MB";}}}return (_5e8/1024/1024/1024).toFixed(1)+" GB";},pluralize:function(_5e9,arg){arg=arg||"s";if(arg.indexOf(",")==-1){arg=","+arg;}var _5ea=arg.split(",");if(_5ea.length>2){return "";}var _5eb=_5ea[0];var _5ec=_5ea[1];if(parseInt(_5e9,10)!=1){return _5ec;}return _5eb;},_phone2numeric:{a:2,b:2,c:2,d:3,e:3,f:3,g:4,h:4,i:4,j:5,k:5,l:5,m:6,n:6,o:6,p:7,r:7,s:7,t:8,u:8,v:8,w:9,x:9,y:9},phone2numeric:function(_5ed){var dm=dojox.dtl.filter.misc;_5ed=_5ed+"";var _5ee="";for(var i=0;i<_5ed.length;i++){var chr=_5ed.charAt(i).toLowerCase();(dm._phone2numeric[chr])?_5ee+=dm._phone2numeric[chr]:_5ee+=_5ed.charAt(i);}return _5ee;},pprint:function(_5ef){return dojo.toJson(_5ef);}});}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(_5f0){var _5f1=_5f0.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_5f1==1&&dojo.date.isLeapYear(_5f0)){return 29;}return days[_5f1];};dojo.date.isLeapYear=function(_5f2){var year=_5f2.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_5f3){var str=_5f3.toString();var tz="";var _5f4;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_5f4=str.match(pat))){tz=_5f4[1];}else{str=_5f3.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_5f4=str.match(pat))){tz=_5f4[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_5f5,_5f6,_5f7){_5f5=new Date(+_5f5);_5f6=new Date(+(_5f6||new Date()));if(_5f7=="date"){_5f5.setHours(0,0,0,0);_5f6.setHours(0,0,0,0);}else{if(_5f7=="time"){_5f5.setFullYear(0,0,0);_5f6.setFullYear(0,0,0);}}if(_5f5>_5f6){return 1;}if(_5f5<_5f6){return -1;}return 0;};dojo.date.add=function(date,_5f8,_5f9){var sum=new Date(+date);var _5fa=false;var _5fb="Date";switch(_5f8){case "day":break;case "weekday":var days,_5fc;var mod=_5f9%5;if(!mod){days=(_5f9>0)?5:-5;_5fc=(_5f9>0)?((_5f9-5)/5):((_5f9+5)/5);}else{days=mod;_5fc=parseInt(_5f9/5);}var strt=date.getDay();var adj=0;if(strt==6&&_5f9>0){adj=1;}else{if(strt==0&&_5f9<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_5f9>0)?2:-2;}_5f9=(7*_5fc)+days+adj;break;case "year":_5fb="FullYear";_5fa=true;break;case "week":_5f9*=7;break;case "quarter":_5f9*=3;case "month":_5fa=true;_5fb="Month";break;default:_5fb="UTC"+_5f8.charAt(0).toUpperCase()+_5f8.substring(1)+"s";}if(_5fb){sum["set"+_5fb](sum["get"+_5fb]()+_5f9);}if(_5fa&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_5fd,_5fe,_5ff){_5fe=_5fe||new Date();_5ff=_5ff||"day";var _600=_5fe.getFullYear()-_5fd.getFullYear();var _601=1;switch(_5ff){case "quarter":var m1=_5fd.getMonth();var m2=_5fe.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_600*4);_601=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(_5fd,_5fe,"day"));var _602=parseInt(dojo.date.difference(_5fd,_5fe,"week"));var mod=days%7;if(mod==0){days=_602*5;}else{var adj=0;var aDay=_5fd.getDay();var bDay=_5fe.getDay();_602=parseInt(days/7);mod=days%7;var _603=new Date(_5fd);_603.setDate(_603.getDate()+(_602*7));var _604=_603.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_604+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_604+mod)<0:adj=2;}}}days+=adj;days-=(_602*2);}_601=days;break;case "year":_601=_600;break;case "month":_601=(_5fe.getMonth()-_5fd.getMonth())+(_600*12);break;case "week":_601=parseInt(dojo.date.difference(_5fd,_5fe,"day")/7);break;case "day":_601/=24;case "hour":_601/=60;case "minute":_601/=60;case "second":_601/=1000;case "millisecond":_601*=_5fe.getTime()-_5fd.getTime();}return Math.round(_601);};}if(!dojo._hasResource["dojox.date.php"]){dojo._hasResource["dojox.date.php"]=true;dojo.provide("dojox.date.php");dojox.date.php.format=function(date,_605){var df=new dojox.date.php.DateFormat(_605);return df.format(date);};dojox.date.php.DateFormat=function(_606){if(!this.regex){var keys=[];for(var key in this.constructor.prototype){if(dojo.isString(key)&&key.length==1&&dojo.isFunction(this[key])){keys.push(key);}}this.regex=new RegExp("(?:(\\\\.)|(["+keys.join("")+"]))","g");}var _607=[];this.tokens=dojox.string.tokenize(_606,this.regex,function(_608,_609,i){if(_609){_607.push([i,_609]);return _609;}if(_608){return _608.charAt(1);}});this.replacements=_607;};dojo.extend(dojox.date.php.DateFormat,{weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_3:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_3:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthdays:[31,28,31,30,31,30,31,31,30,31,30,31],format:function(date){this.date=date;for(var i=0,_60a;_60a=this.replacements[i];i++){this.tokens[_60a[0]]=this[_60a[1]]();}return this.tokens.join("");},d:function(){var j=this.j();return (j.length==1)?"0"+j:j;},D:function(){return this.weekdays_3[this.date.getDay()];},j:function(){return this.date.getDate()+"";},l:function(){return this.weekdays[this.date.getDay()];},N:function(){var w=this.w();return (!w)?7:w;},S:function(){switch(this.date.getDate()){case 11:case 12:case 13:return "th";case 1:case 21:case 31:return "st";case 2:case 22:return "nd";case 3:case 23:return "rd";default:return "th";}},w:function(){return this.date.getDay()+"";},z:function(){var _60b=this.date.getTime()-new Date(this.date.getFullYear(),0,1).getTime();return Math.floor(_60b/86400000)+"";},W:function(){var week;var _60c=new Date(this.date.getFullYear(),0,1).getDay()+1;var w=this.date.getDay()+1;var z=parseInt(this.z());if(z<=(8-_60c)&&_60c>4){var _60d=new Date(this.date.getFullYear()-1,this.date.getMonth(),this.date.getDate());if(_60c==5||(_60c==6&&dojo.date.isLeapYear(_60d))){week=53;}else{week=52;}}else{var i;if(Boolean(this.L())){i=366;}else{i=365;}if((i-z)<(4-w)){week=1;}else{var j=z+(7-w)+(_60c-1);week=Math.ceil(j/7);if(_60c>4){--week;}}}return week;},F:function(){return this.months[this.date.getMonth()];},m:function(){var n=this.n();return (n.length==1)?"0"+n:n;},M:function(){return this.months_3[this.date.getMonth()];},n:function(){return this.date.getMonth()+1+"";},t:function(){return (Boolean(this.L())&&this.date.getMonth()==1)?29:this.monthdays[this.getMonth()];},L:function(){return (dojo.date.isLeapYear(this.date))?"1":"0";},o:function(){},Y:function(){return this.date.getFullYear()+"";},y:function(){return this.Y().slice(-2);},a:function(){return this.date.getHours()>=12?"pm":"am";},b:function(){return this.a().toUpperCase();},B:function(){var off=this.date.getTimezoneOffset()+60;var secs=(this.date.getHours()*3600)+(this.date.getMinutes()*60)+this.getSeconds()+(off*60);var beat=Math.abs(Math.floor(secs/86.4)%1000)+"";while(beat.length<2){beat="0"+beat;}return beat;},g:function(){return (this.date.getHours()>12)?this.date.getHours()-12+"":this.date.getHours()+"";},G:function(){return this.date.getHours()+"";},h:function(){var g=this.g();return (g.length==1)?"0"+g:g;},H:function(){var G=this.G();return (G.length==1)?"0"+G:G;},i:function(){var mins=this.date.getMinutes()+"";return (mins.length==1)?"0"+mins:mins;},s:function(){var secs=this.date.getSeconds()+"";return (secs.length==1)?"0"+secs:secs;},e:function(){return dojo.date.getTimezoneName(this.date);},I:function(){},O:function(){var off=Math.abs(this.date.getTimezoneOffset());var _60e=Math.floor(off/60)+"";var mins=(off%60)+"";if(_60e.length==1){_60e="0"+_60e;}if(mins.length==1){_60e="0"+mins;}return ((this.date.getTimezoneOffset()<0)?"+":"-")+_60e+mins;},P:function(){var O=this.O();return O.substring(0,2)+":"+O.substring(2,4);},T:function(){return this.e().substring(0,3);},Z:function(){return this.date.getTimezoneOffset()*-60;},c:function(){return this.Y()+"-"+this.m()+"-"+this.d()+"T"+this.h()+":"+this.i()+":"+this.s()+this.P();},r:function(){return this.D()+", "+this.d()+" "+this.M()+" "+this.Y()+" "+this.H()+":"+this.i()+":"+this.s()+" "+this.O();},U:function(){return Math.floor(this.date.getTime()/1000);}});}if(!dojo._hasResource["dojox.dtl.utils.date"]){dojo._hasResource["dojox.dtl.utils.date"]=true;dojo.provide("dojox.dtl.utils.date");dojox.dtl.utils.date.DateFormat=function(_60f){dojox.date.php.DateFormat.call(this,_60f);};dojo.extend(dojox.dtl.utils.date.DateFormat,dojox.date.php.DateFormat.prototype,{f:function(){return (!this.date.getMinutes())?this.g():this.g()+":"+this.i();},N:function(){return dojox.dtl.utils.date._months_ap[this.date.getMonth()];},P:function(){if(!this.date.getMinutes()&&!this.date.getHours()){return "midnight";}if(!this.date.getMinutes()&&this.date.getHours()==12){return "noon";}return this.f()+" "+this.a();}});dojo.mixin(dojox.dtl.utils.date,{format:function(date,_610){var df=new dojox.dtl.utils.date.DateFormat(_610);return df.format(date);},timesince:function(d,now){if(!(d instanceof Date)){d=new Date(d.year,d.month,d.day);}if(!now){now=new Date();}var _611=Math.abs(now.getTime()-d.getTime());for(var i=0,_612;_612=dojox.dtl.utils.date._chunks[i];i++){var _613=Math.floor(_611/_612[0]);if(_613){break;}}return _613+" "+_612[1](_613);},_chunks:[[60*60*24*365*1000,function(n){return (n==1)?"year":"years";}],[60*60*24*30*1000,function(n){return (n==1)?"month":"months";}],[60*60*24*7*1000,function(n){return (n==1)?"week":"weeks";}],[60*60*24*1000,function(n){return (n==1)?"day":"days";}],[60*60*1000,function(n){return (n==1)?"hour":"hours";}],[60*1000,function(n){return (n==1)?"minute":"minutes";}]],_months_ap:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."]});}if(!dojo._hasResource["dojox.dtl.filter.dates"]){dojo._hasResource["dojox.dtl.filter.dates"]=true;dojo.provide("dojox.dtl.filter.dates");(function(){var ddfd=dojox.dtl.filter.dates;dojo.mixin(ddfd,{_toDate:function(_614){if(_614 instanceof Date){return _614;}_614=new Date(_614);if(_614.getTime()==new Date(0).getTime()){return "";}return _614;},date:function(_615,arg){_615=ddfd._toDate(_615);if(!_615){return "";}arg=arg||"N j, Y";return dojox.dtl.utils.date.format(_615,arg);},time:function(_616,arg){_616=ddfd._toDate(_616);if(!_616){return "";}arg=arg||"P";return dojox.dtl.utils.date.format(_616,arg);},timesince:function(_617,arg){_617=ddfd._toDate(_617);if(!_617){return "";}var _618=dojox.dtl.utils.date.timesince;if(arg){return _618(arg,_617);}return _618(_617);},timeuntil:function(_619,arg){_619=ddfd._toDate(_619);if(!_619){return "";}var _61a=dojox.dtl.utils.date.timesince;if(arg){return _61a(arg,_619);}return _61a(new Date(),_619);}});})();}if(!dojo._hasResource["dojox.dtl.filter.integers"]){dojo._hasResource["dojox.dtl.filter.integers"]=true;dojo.provide("dojox.dtl.filter.integers");dojo.mixin(dojox.dtl.filter.integers,{add:function(_61b,arg){_61b=parseInt(_61b,10);arg=parseInt(arg,10);return isNaN(arg)?_61b:_61b+arg;},get_digit:function(_61c,arg){_61c=parseInt(_61c,10);arg=parseInt(arg,10)-1;if(arg>=0){_61c+="";if(arg<_61c.length){_61c=parseInt(_61c.charAt(arg),10);}else{_61c=0;}}return (isNaN(_61c)?0:_61c);}});}if(!dojo._hasResource["dojox.dtl._Templated"]){dojo._hasResource["dojox.dtl._Templated"]=true;dojo.provide("dojox.dtl._Templated");dojo.declare("dojox.dtl._Templated",dijit._Templated,{_dijitTemplateCompat:false,buildRendering:function(){var node;if(this.domNode&&!this._template){return;}if(!this._template){var t=this.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);if(t instanceof dojox.dtl.Template){this._template=t;}else{node=t;}}if(!node){var _61d=new dojox.dtl._Context(this);if(!this._created){delete _61d._getter;}var _61e=dojo._toDom(this._template.render(_61d));if(_61e.nodeType!==1&&_61e.nodeType!==3){for(var i=0,l=_61e.childNodes.length;i<l;++i){node=_61e.childNodes[i];if(node.nodeType==1){break;}}}else{node=_61e;}}this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _61f=dojo.parser,qry,attr;if(_61f._query!="[dojoType]"){qry=_61f._query;attr=_61f._attrName;_61f._query="[dojoType]";_61f._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_61f._query=qry;_61f._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}if(this.domNode){dojo.place(node,this.domNode,"before");this.destroyDescendants();dojo.destroy(this.domNode);}this.domNode=node;this._fillContent(this.srcNodeRef);},_templateCache:{},getCachedTemplate:function(_620,_621,_622){var _623=this._templateCache;var key=_621||_620;if(_623[key]){return _623[key];}_621=dojo.string.trim(_621||dojo.cache(_620,{sanitize:true}));if(this._dijitTemplateCompat&&(_622||_621.match(/\$\{([^\}]+)\}/g))){_621=this._stringRepl(_621);}if(_622||!_621.match(/\{[{%]([^\}]+)[%}]\}/g)){return _623[key]=dojo._toDom(_621);}else{return _623[key]=new dojox.dtl.Template(_621);}},render:function(){this.buildRendering();},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});}if(!dojo._hasResource["agi.widget._TemplatedWidget"]){dojo._hasResource["agi.widget._TemplatedWidget"]=true;dojo.provide("agi.widget._TemplatedWidget");dojo.declare("agi.widget._TemplatedWidget",[dijit._Widget,dojox.dtl._Templated],{});}if(!dojo._hasResource["agi.requester"]){dojo._hasResource["agi.requester"]=true;dojo.provide("agi.requester");agi.requester.Requester=function(url,_624,_625,_626,_627){var _628=this;var req=null;this.async=_625;this.method=_624;this.url=url;this.showbusy=_626;this.in_process=false;this.handleas=_627?_627:"text";this.get_millisecond_query=function(){var _629=new Date();var ms=_629.getTime();return "&ajax_requester_ms="+ms;};this.sendRequest=function(_62a){var _62b={url:this.url,sync:!this.async,content:_62a?_62a:{},preventCache:_62a?true:false,handleAs:this.handleas,load:_628.processLoad,error:_628.processError};if(this.showbusy){document.body.style.cursor="wait";}this.in_process=true;if(this.method.toUpperCase()=="POST"){dojo.xhrPost(_62b);}else{dojo.xhrGet(_62b);}};this.processLoad=function(_62c,_62d){_62c=_628.processAlways(_62c,_62d);if(_62d.xhr.getResponseHeader("Kaboom")){if(_62d.xhrgetResponseHeader("Kaboom").toLowerCase()=="true"){if(_628.onerror){_628.onerror(_62c,_62d);}}}else{if(_628.onsuccess){_628.onsuccess(_62c,_62d);}}return _62c;};this.processError=function(_62e,_62f){_62e=_628.processAlways(_62e,_62f);if(_628.onerror){_628.onerror(_62e,_62f);}return _62e;};this.processAlways=function(_630,_631){_628.in_process=false;if(_628.showbusy){document.body.style.cursor="auto";}if(!_630){_630="";}try{_630=_630.replace("<!--this page was compressed by your friendly neighborhood pydriver-->","");}catch(e){}return _630;};this.formToQuery=function(_632){var _633=dojo.formToObject(_632);return _633;};};var script_fragment="<script[^>]*>([\\s\\S]*?)</script>";agi.requester.stripScripts=function(_634){return _634.replace(new RegExp(script_fragment,"img"),"");};agi.requester.extractScripts=function(_635){var _636=new RegExp(script_fragment,"img");var _637=new RegExp(script_fragment,"im");var _638=_635.match(_636);var _639=[];if(_638){for(var i=0;i<_638.length;i++){if(_638[i].indexOf("agi-lb-exec")!=-1){_639.push(_638[i].match(_637)[1]);}}}return _639;};agi.requester.evalScripts=function(_63a){var _63b=agi.requester.extractScripts(_63a);for(i=0;i<_63b.length;i++){try{eval(_63b[i]);}catch(e){}}};agi.requester.checkAll=function(_63c,_63d){form=dojo.byId(_63c);for(i=0;i<form.elements.length;i++){if(form.elements[i].type=="checkbox"){form.elements[i].checked=_63d;}}};agi.requester.countChecked=function(_63e){var form=dojo.byId(_63e);var _63f=0;for(i=0;i<form.elements.length;i++){if(form.elements[i].type=="checkbox"&form.elements[i].checked){_63f++;}}return _63f;};agi.requester.selectAll=function(_640,_641){if(_641==undefined){var _642=true;}else{var _642=_641;}var list=dojo.byId(_640);var _643=document.getElementsByName("event_id");for(i=0;i<list.childNodes.length;i++){if(list.childNodes[i].nodeName=="LI"){for(j=0;j<list.childNodes[i].childNodes.length;j++){if(list.childNodes[i].childNodes[j].type=="checkbox"){list.childNodes[i].childNodes[j].checked=_642;len=_643.length;for(n=0;n<len;n++){if((_643[n].value)==(list.childNodes[i].childNodes[j].value)){_643[n].checked=_642;}}}}}}};agi.requester.selectEqual=function(_644){var _645=document.getElementsByName(_644.name);for(i=0;i<_645.length;i++){if(_644.form.elements[i].value==_644.value){_644.form.elements[i].checked=_644.checked;}}};agi.requester.fixurl=function(url){if(url.indexOf("http")!=0){var sep="";url.indexOf("/")==0?sep="":sep="/";url=agi.requester.ajaxhost()+sep+url;}return url;};agi.requester.ajaxhost=function(){return document.location.protocol+"//"+document.location.hostname;};}if(!dojo._hasResource["agi.widget.Lightbox"]){dojo._hasResource["agi.widget.Lightbox"]=true;dojo.provide("agi.widget.Lightbox");dojo.declare("agi.widget.Lightbox",[agi.classes.Identified,agi.widget._TemplatedWidget],{url:null,contents:null,node:null,templatePath:null,left:null,top:null,height:null,width:null,position:"absolute",relativeTo:null,showloader:true,loaderSrc:imghost+"/ag/reminders/loader.swf",loaderId:"agi-lightboxloader",loaderHeight:120,loaderWidth:120,overlayId:"agi-overlay",showoverlay:true,lightboxId:"agi-lightbox",noprintClass:"agi-noprint",timeout:60000,loadnow:true,allowclick:false,closeKey:null,overflow:"auto",overlayZindex:"999",containerZindex:"1000",loaderZindex:"250",_defaultTop:20,_ready:false,_reset:false,_showing:false,_bgIframe:null,_keypressListener:null,_hideSignal:"ag/Lightbox/hide",_resizeSignal:"ag/Lightbox/resize",constructor:function(_646){_646=_646||{};dojo.mixin(this,_646);this._checkPositioning();},uninitialize:function(){dojo._destroyElement(this.loader);dojo._destroyElement(this.lightbox);if(this.overlay){dojo._destroyElement(this.overlay);}if(this._bgIframe){this._bgIframe.destroy();this._bgIframe=null;}},_checkPositioning:function(){if(this.position=="relative"){if(!this.relativeTo){throw (this+" needs a relativeTo when positioning relatively");}if(this.left==null){this.left=0;}if(this.top==null){this.top=0;}var pos=dojo.coords(this.relativeTo);this.left+=pos.x;this.top+=pos.y;}else{if(this.position=="user"){if(this.top==null||this.left==null){throw (this+" needs 'left' and 'top' defined when using user-defined positioning.");}}else{if(this.top==null){this.top=this._defaultTop;}}}},buildRendering:function(){if(this.templatePath||this.templateString){this.inherited(arguments);}this.overlay=this._createOverlay();this.lightbox=this._createLightbox(this.overlay);this.loader=this._createLoader();},postCreate:function(){this.inherited(arguments);dojo.subscribe(this._hideSignal,dojo.hitch(this,this.hide));dojo.subscribe(this._resizeSignal,dojo.hitch(this,this._resizeOverlay));if(this.loadnow){this._loadContent();}},_createOverlay:function(){var body=dojo.body();var _647=this.overlayId;var _648=dojo.byId(_647);if(!_648){_648=document.createElement("div");_648.setAttribute("id",_647);dojo.addClass(_648,this.noprintClass);var _649=this._pageSize();dojo.style(_648,{display:"none",position:"absolute",top:"0",left:"0",zIndex:this.overlayZindex,width:"100%",height:_649[1]+"px"});body.insertBefore(_648,body.firstChild);}try{filter=dojo.style(_648,"filter");if(filter&&dojo.isIE){if(filter.indexOf(imghost)==-1){filter=filter.replace("/agbeta",imghost+"/agbeta");dojo.style(_648,"filter",filter);}}}catch(e){}return _648;},_createLightbox:function(_64a){var body=dojo.body();var _64b=dojo.byId(this.lightboxId);if(!_64b){_64b=document.createElement("div");_64b.setAttribute("id",this.lightboxId);dojo.style(_64b,{display:"none",position:"absolute",zIndex:this.containerZindex});body.insertBefore(_64b,_64a.nextSibling);}_64b.innerHTML="";return _64b;},_createLoader:function(){var body=dojo.body();var _64c=dojo.byId("loadingImage");if(!_64c){if(this.loaderSrc.endswith(".swf")){_64c=this._createLoaderSwf(this.loaderSrc);}else{_64c=this._createLoaderImage(this.loaderSrc);}dojo.style(_64c,{display:"none",visibility:"hidden",position:"absolute",zIndex:this.loaderZindex});body.insertBefore(_64c,body.firstChild);}return _64c;},_createLoaderSwf:function(src){var _64d=document.createElement("embed");_64d.setAttribute("id",this.loaderId);_64d.setAttribute("name","FlashProduct");_64d.setAttribute("src",src);_64d.setAttribute("swLiveConnect",true);_64d.setAttribute("width",this.loaderWidth);_64d.setAttribute("height",this.loaderHeight);_64d.setAttribute("scale","noborder");_64d.setAttribute("quality","high");_64d.setAttribute("type","application/x-shockwave-flash");_64d.setAttribute("pluginspace","http://www.macromedia.com/go/getflashplayer");_64d.setAttribute("wmode","transparent");return _64d;},_createLoaderImage:function(src){var _64e=document.createElement("img");_64e.setAttribute("id",this.loaderId);_64e.setAttribute("src",src);_64e.setAttribute("width",this.loaderWidth);_64e.setAttribute("height",this.loaderHeight);return _64e;},_loadContent:function(){if(this.domNode&&!this.node){this.node=this.domNode;}if(this.loader&&this.showloader){var _64f=this._pageSize();var _650=this._pageScroll();var _651=_650[1]+((_64f[3]-35-this.loader.height)/2);var _652=((_64f[0]-20-this.loader.width)/2);dojo.style(this.loader,{display:"block",visibility:"visible",top:_651+"px",left:_652+"px"});}if(this.overlay&&this.showoverlay){dojo.style(this.overlay,{display:"block",visibility:"visible"});}if(this.url){dojo.xhrGet({url:this.url,handleAs:"text",timeout:this.timeout,load:dojo.hitch(this,this._onSuccess),error:dojo.hitch(this,this._onError)});}else{if(this.contents){this.lightbox.innerHTML=agi.requester.stripScripts(this.contents);this._ready=true;this.show();agi.requester.evalScripts(this.contents);this._enableOverlayClick();}else{if(this.node){var node=dojo.byId(this.node);this.lightbox.appendChild(dojo.byId(node));dojo.style(node,"display","block");this._ready=true;this.show();this._enableOverlayClick();}}}},_onSuccess:function(_653,_654){this.lightbox.innerHTML=agi.requester.stripScripts(_653);this._ready=true;this.show();agi.requester.evalScripts(_653);this._enableOverlayClick();return _653;},_onError:function(_655,_656){this.hide();return _655;},show:function(_657){if(_657){this._checkPositioning();}this._showPhase0();this._showPhase1();this._showPhase2();this.postShow();},_showPhase0:function(){if(!this._ready){return this._loadContent();}if(this._reset){this._checkPositioning();this._reset=false;}if(this.contents){this.lightbox.innerHTML=this.contents;}dojo.style(this.lightbox,"overflow",this.overflow);if(this.loader){dojo.style(this.loader,{display:"none",visibility:"hidden"});}if(this.overlay&&this.showoverlay){dojo.style(this.overlay,{display:"block",visibility:"visible"});}},_showPhase1:function(){var _658=this._pageScroll();var _659=this.top+_658[1];var _65a={left:"-9999px",top:_659+"px",visibility:"visible",display:"block"};if(this.height){_65a.height=this.height+"px";}if(this.width){_65a.width=this.width+"px";}dojo.style(this.lightbox,_65a);},_showPhase2:function(){var _65b=this._pageSize();if(this.left==null){this.left=((_65b[0]-this.lightbox.offsetWidth)/2);}var _65c={left:this.left+"px"};dojo.style(this.lightbox,_65c);this._resizeOverlay();this._enableKeypressListener();if(!this._bgIframe){var _65d=this.lightbox;if(this.overlay&&this.showoverlay){_65d=this.overlay;}this._bgIframe=new dijit.BackgroundIframe(_65d);}this._showing=true;},postShow:function(){return;},hide:function(_65e){if(!this._showing){return;}if(this.overlay){this.overlay.onclick=function(){return false;};dojo.style(this.overlay,{display:"none",visibility:"hidden"});}if(this.loader){dojo.style(this.loader,{display:"none",visibility:"hidden"});}if(this.lightbox){dojo.style(this.lightbox,{display:"none",visibility:"hidden"});if(_65e){this.reset();}else{this.contents=this.lightbox.innerHTML;}}this._disableKeypressListener();this._showing=false;},reset:function(){if(this.node){dojo.style(this.node,{display:"none"});dojo.place(this.node,dojo.body(),"last");}this.lightbox.innerHTML="";this.contents=null;this.url=null;this.domNode=null;this.top=null;this.left=null;this._ready=false;this._reset=true;},_enableOverlayClick:function(){if(this.overlay&&this.allowclick){this._overlayClick=dojo.connect(this.overlay,"onclick",dojo.hitch(this,this.hide));}},_disableOverlayClick:function(){if(this._overlayClick){dojo.disconnect(this._overlayClick);this._overlayClick=null;}},_enableKeypressListener:function(){if(this.closeKey&&!this._keypressListener){this._keypressListener=dojo.connect(document,"keypress",dojo.hitch(this,this._onKeypress));}},_disableKeypressListener:function(){if(this._keypressListener){dojo.disconnect(this._keypressListener);this._keypressListener=null;}},_onKeypress:function(evt){if(evt.charOrCode==this.closeKey){this.hide();}},_resizeOverlay:function(){if(this.overlay){var _65f=this._pageSize();dojo.style(this.overlay,"height",_65f[1]+"px");}},_pageScroll:function(){var _660=0;if(self.pageYOffset){_660=self.pageYOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){_660=document.documentElement.scrollTop;}else{if(document.body){_660=document.body.scrollTop;}}}var _661=[null,_660];return _661;},_pageSize:function(){var _662,_663;if(window.innerHeight&&window.scrollMaxY){_662=document.body.scrollWidth;_663=window.innerHeight+window.scrollMaxY;}else{if(document.body.scrollHeight>document.body.offsetHeight){_662=document.body.scrollWidth;_663=document.body.scrollHeight;}else{_662=document.body.offsetWidth;_663=document.body.offsetHeight;}}var _664,_665;if(self.innerHeight){_664=self.innerWidth;_665=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){_664=document.documentElement.clientWidth;_665=document.documentElement.clientHeight;}else{if(document.body){_664=document.body.clientWidth;_665=document.body.clientHeight;}}}var _666,_667;if(_663<_665){_667=_665;}else{_667=_663;}if(_662<_664){_666=_664;}else{_666=_662;}var _668=[_666,_667,_664,_665];return _668;}});}if(!dojo._hasResource["ag.widget.Lightbox"]){dojo._hasResource["ag.widget.Lightbox"]=true;dojo.provide("ag.widget.Lightbox");ag.widget.Lightbox=agi.widget.Lightbox;}if(!dojo._hasResource["dojo.NodeList-traverse"]){dojo._hasResource["dojo.NodeList-traverse"]=true;dojo.provide("dojo.NodeList-traverse");dojo.extend(dojo.NodeList,{_buildArrayFromCallback:function(_669){var ary=[];for(var i=0;i<this.length;i++){var _66a=_669.call(this[i],this[i],ary);if(_66a){ary=ary.concat(_66a);}}return ary;},_filterQueryResult:function(_66b,_66c){var _66d=dojo.filter(_66b,function(node){return dojo.query(_66c,node.parentNode).indexOf(node)!=-1;});var _66e=this._wrap(_66d);return _66e;},_getUniqueAsNodeList:function(_66f){var ary=[];for(var i=0,node;node=_66f[i];i++){if(node.nodeType==1&&dojo.indexOf(ary,node)==-1){ary.push(node);}}return this._wrap(ary,null,this._NodeListCtor);},_getUniqueNodeListWithParent:function(_670,_671){var ary=this._getUniqueAsNodeList(_670);ary=(_671?this._filterQueryResult(ary,_671):ary);return ary._stash(this);},_getRelatedUniqueNodes:function(_672,_673){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_673),_672);},children:function(_674){return this._getRelatedUniqueNodes(_674,function(node,ary){return dojo._toArray(node.childNodes);});},closest:function(_675){var self=this;return this._getRelatedUniqueNodes(_675,function(node,ary){do{if(self._filterQueryResult([node],_675).length){return node;}}while((node=node.parentNode)&&node.nodeType==1);return null;});},parent:function(_676){return this._getRelatedUniqueNodes(_676,function(node,ary){return node.parentNode;});},parents:function(_677){return this._getRelatedUniqueNodes(_677,function(node,ary){var pary=[];while(node.parentNode){node=node.parentNode;pary.push(node);}return pary;});},siblings:function(_678){return this._getRelatedUniqueNodes(_678,function(node,ary){var pary=[];var _679=(node.parentNode&&node.parentNode.childNodes);for(var i=0;i<_679.length;i++){if(_679[i]!=node){pary.push(_679[i]);}}return pary;});},next:function(_67a){return this._getRelatedUniqueNodes(_67a,function(node,ary){var next=node.nextSibling;while(next&&next.nodeType!=1){next=next.nextSibling;}return next;});},nextAll:function(_67b){return this._getRelatedUniqueNodes(_67b,function(node,ary){var pary=[];var next=node;while((next=next.nextSibling)){if(next.nodeType==1){pary.push(next);}}return pary;});},prev:function(_67c){return this._getRelatedUniqueNodes(_67c,function(node,ary){var prev=node.previousSibling;while(prev&&prev.nodeType!=1){prev=prev.previousSibling;}return prev;});},prevAll:function(_67d){return this._getRelatedUniqueNodes(_67d,function(node,ary){var pary=[];var prev=node;while((prev=prev.previousSibling)){if(prev.nodeType==1){pary.push(prev);}}return pary;});},andSelf:function(){return this.concat(this._parent);},first:function(){return this._wrap(((this[0]&&[this[0]])||[]),this);},last:function(){return this._wrap((this.length?[this[this.length-1]]:[]),this);},even:function(){return this.filter(function(item,i){return i%2!=0;});},odd:function(){return this.filter(function(item,i){return i%2==0;});}});}if(!dojo._hasResource["ag.widget.CardPickerWidget"]){dojo._hasResource["ag.widget.CardPickerWidget"]=true;dojo.provide("ag.widget.CardPickerWidget");dojo.declare("ag.widget.CardPickerWidget",[ag.classes.Identified],{card_picker_lightbox:null,tones:"",categories:"",constructor:function(){var _67e=dojo.queryToObject(location.search.substr(1));if(_67e.cardpicker){this.display_widget_container(null);}this.attach_open_button();},attach_open_button:function(){dojo.query("#picker_open_button").connect("onclick",this,this.display_widget_container);},display_widget_container:function(_67f){if(_67f){dojo.stopEvent(_67f);}var url=ahost+"/cardpicker/";if(this.card_picker_lightbox==null){this.card_picker_lightbox=new ag.widget.Lightbox({url:url,lightboxId:"card_picker_lightbox",overlayId:"agi-overlay",node:"cardpickertab",showloader:false,loadnow:true,allowclick:true,width:968});}else{this.card_picker_lightbox.show();this.init_widget();}},init_widget:function(){this.tones=dojo.query(".click",dojo.byId("agi-product-tone"));this.categories=dojo.query(".click",dojo.byId("agi-product-category"));dojo.query(".click",dojo.byId("agi-product-tone")).connect("onclick",this,this.tone_click);dojo.query(".click",dojo.byId("agi-product-category")).connect("onclick",this,this.category_click);dojo.query("#hide").connect("onclick",this,this.hide_lightbox);dojo.query(".click",dojo.byId("agi-cardpicker")).removeClass("selected");dojo.query(".click",dojo.byId("agi-product-tone")).first().addClass("selected");dojo.query(".click",dojo.byId("agi-product-category")).first().addClass("selected");this.check_combo();},check_combo:function(){var _680=dojo.query(".selected",dojo.byId("agi-product-tone")).parent().attr("id");var _681=dojo.query(".selected",dojo.byId("agi-product-category")).parent().attr("id");var _682=_680+" "+_681;dojo.forEach(combos,function(_683,i){if(_682==_683){dojo.attr("card-wrapper","innerHTML",product_wrappers[i]);}});},tone_click:function(e){this.tones.removeClass("selected");dojo.query(e.target).addClass("selected");this.check_combo();},category_click:function(e){this.categories.removeClass("selected");dojo.query(e.target).addClass("selected");this.check_combo();},hide_lightbox:function(){this.card_picker_lightbox.hide();}});}if(!dojo._hasResource["ag.controllers.StandardPage"]){dojo._hasResource["ag.controllers.StandardPage"]=true;dojo.provide("ag.controllers.StandardPage");dojo.declare("ag.controllers.StandardPage",[ag.controllers.KanaLiveChat,ag.search.SearchMixin,ag.widget.QuickshopMultiMixin],{constructor:function(){this.navigation_search=new ag.widget.NavigationSearch();this.card_picker_widget=new ag.widget.CardPickerWidget();}});}if(!dojo._hasResource["ag.controllers.StoragePage"]){dojo._hasResource["ag.controllers.StoragePage"]=true;dojo.provide("ag.controllers.StoragePage");dojo.declare("ag.controllers.StoragePage",[ag.controllers.StandardPage],{storage:null,constructor:function(){this.storage=new agi.storage.Storage();}});}dojo.publish("/ag.layers.storage/loaded/");dojo.i18n._preloadLocalizations("ag.layers.nls.storage",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
