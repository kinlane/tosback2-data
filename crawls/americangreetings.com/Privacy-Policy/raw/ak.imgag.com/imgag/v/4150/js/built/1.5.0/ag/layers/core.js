/*
	Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

dojo.provide("ag.layers.core");if(!dojo._hasResource["dojox.encoding.base64"]){dojo._hasResource["dojox.encoding.base64"]=true;dojo.provide("dojox.encoding.base64");(function(){var p="=";var _1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var _2=dojox.encoding;_2.base64.encode=function(ba){var s=[],l=ba.length;var rm=l%3;var x=l-rm;for(var i=0;i<x;){var t=ba[i++]<<16|ba[i++]<<8|ba[i++];s.push(_1.charAt((t>>>18)&63));s.push(_1.charAt((t>>>12)&63));s.push(_1.charAt((t>>>6)&63));s.push(_1.charAt(t&63));}switch(rm){case 2:var t=ba[i++]<<16|ba[i++]<<8;s.push(_1.charAt((t>>>18)&63));s.push(_1.charAt((t>>>12)&63));s.push(_1.charAt((t>>>6)&63));s.push(p);break;case 1:var t=ba[i++]<<16;s.push(_1.charAt((t>>>18)&63));s.push(_1.charAt((t>>>12)&63));s.push(p);s.push(p);break;}return s.join("");};_2.base64.decode=function(_3){var s=_3.split(""),_4=[];var l=s.length;while(s[--l]==p){}for(var i=0;i<l;){var t=_1.indexOf(s[i++])<<18;if(i<=l){t|=_1.indexOf(s[i++])<<12;}if(i<=l){t|=_1.indexOf(s[i++])<<6;}if(i<=l){t|=_1.indexOf(s[i++]);}_4.push((t>>>16)&255);_4.push((t>>>8)&255);_4.push(t&255);}while(_4[_4.length-1]==0){_4.pop();}return _4;};})();}if(!dojo._hasResource["agi.base64"]){dojo._hasResource["agi.base64"]=true;dojo.provide("agi.base64");agi.base64={encode:function(_5){if(!_5){return "";}return dojox.encoding.base64.encode(this.string_to_bytes(_5));},decode:function(_6){if(!_6){return "";}return this.bytes_to_str(dojox.encoding.base64.decode(_6));},string_to_bytes:function(_7){var _8=[];for(var i=0;i<_7.length;i++){_8.push(_7.charCodeAt(i));}return _8;},bytes_to_str:function(_9){var _a="";dojo.forEach(_9,function(_b){_a+=String.fromCharCode(_b);});return _a;}};}if(!dojo._hasResource["agi.cookie.NVP"]){dojo._hasResource["agi.cookie.NVP"]=true;dojo.provide("agi.cookie.NVP");agi.cookie.NVP.getValue=function(_c,_d,_e,_f){var _10,_11;_10=_c.indexOf(_f+_d+_e);if(-1==_10){_10=_c.indexOf(_d+_e);if(-1==_10){return null;}_10+=_d.length+_e.length;}else{_10+=_f.length+_d.length+_e.length;}_11=_c.indexOf(_f,_10);if(-1==_11){_11=_c.length;}return _c.substring(_10,_11);};agi.cookie.NVP.toMap=function(s,_12,sep){var map=[];var _13=s.toString().split(_12);for(var i=0;i<_13.length;i++){var _14=_13[i];if(_14){var _15=_14.split(sep);map[unescape(_15[0])]=unescape(_15[1]);}}return map;};agi.cookie.NVP.fromMap=function(map,_16,sep){var s="";for(var _17 in map){if(typeof map[_17]=="null"){continue;}else{if(typeof map[_17]=="function"){continue;}else{s+=escape(_17)+sep+escape(map[_17])+_16;}}}if(s){s=s.substr(0,s.length-1);}return s;};}if(!dojo._hasResource["agi.cookie.AGICookie"]){dojo._hasResource["agi.cookie.AGICookie"]=true;dojo.provide("agi.cookie.AGICookie");agi.cookie.AGICookie.toString=function(){return "AGICookie";};agi.cookie.AGICookie.SUBHOSTS=[[/\.yahoo\./,"_yh"],[/\.msn\./,"_msn"],[/\.aol\.|^aol\./,"_aol"],[/\.target\./,"_tg"]];agi.cookie.AGICookie.SUBPATHS=[[/\/birthday-calendar/,"_bcal"]];agi.cookie.AGICookie.overlays={};agi.cookie.AGICookie.getCookieDomain=function(){var _18=window.location.hostname.split(".");var idx=_18.length-2;var tld=_18.slice(-1);if(tld!="com"&&tld!="net"&&tld!="org"){idx=_18.length-3;}_18=_18.slice(idx);return "."+_18.join(".");};agi.cookie.AGICookie.getCookieName=function(_19){var _1a=window.location.hostname.split(".");var _1b=_19;var hn="";if(_1a.length<3){hn="www";}else{hn=_1a[0];}dojo.forEach(agi.cookie.AGICookie.SUBHOSTS,function(_1c){if(_1c[0].test(window.location.hostname)){_19+=_1c[1];}});dojo.forEach(agi.cookie.AGICookie.SUBPATHS,function(_1d){if(_1d[0].test(window.location.pathname)){_19+=_1d[1];}});dojo.forEach(["dev","vanilla","work","stage"],function(pfx){if(hn.startswith(pfx)){_19+="_"+pfx;}});return escape(_19);};agi.cookie.AGICookie.getCookieValueRaw=function(_1e,_1f){var _20=agi.cookie.AGICookie.getCookieName(_1e);var c=agi.cookie.AGICookie.overlays[_20];if(c){}else{c=agi.cookie.AGICookie.getCookie(_1e);if(typeof c=="null"){return null;}}var v=agi.cookie.NVP.getValue(agi.base64.decode(c),_1f,"=","&");if(v){return unescape(v);}return v;};agi.cookie.AGICookie.getCookie=function(_21){var c=agi.cookie.NVP.getValue(dojo.doc.cookie,agi.cookie.AGICookie.getCookieName(_21),"=",";");if(!c){return c;}c=unescape(c);while(c.indexOf("%0A")>-1||c.indexOf("%0a")>-1){c=c.replace(/\%0[aA]/,"");}c=unescape(c);return c;};agi.cookie.AGICookie.overlayCookies=function(_22){dojo.forEach(_22,function(_23){agi.cookie.AGICookie.overlays[_23.name]=unescape(unescape(_23.value));});};agi.cookie.AGICookie.setCookie=function(_24,_25,_26,_27){_24=agi.cookie.AGICookie.getCookieName(_24);var cki=_24+"="+escape(_25)+";";if(_27){_26="Thursday, 31-Dec-2037 00:01:00 GMT";}if(_26){cki=cki+"expires="+_26+";";}cki=cki+"path=/;domain="+agi.cookie.AGICookie.getCookieDomain();dojo.doc.cookie=cki;};agi.cookie.AGICookie.expireCookie=function(_28){agi.cookie.AGICookie.setCookie(_28,"","Friday, 01-Jan-99 00:00:00 GMT");};agi.cookie.AGICookie.getCookieValue=function(_29,_2a){var v=agi.cookie.AGICookie.getCookieValueRaw(_29,_2a);if(!v&&_29=="customer"&&_2a=="name"){v=agi.cookie.AGICookie.getCookieValueRaw(_29,"email");}if(!v&&_29=="customer"&&_2a=="name"){v="member";}return v;};agi.cookie.AGICookie.setCookieValue=function(_2b,_2c,_2d,_2e,_2f){var map=null;var c=agi.cookie.AGICookie.getCookie(_2b);if(c){map=agi.cookie.NVP.toMap(agi.base64.decode(c),"&","=");}else{map=[];}map[_2c]=_2d;agi.cookie.AGICookie.setCookie(_2b,agi.base64.encode(agi.cookie.NVP.fromMap(map,"&","=")),_2e,_2f);};}if(!dojo._hasResource["agi.cookie.MagicCookie"]){dojo._hasResource["agi.cookie.MagicCookie"]=true;dojo.provide("agi.cookie.MagicCookie");agi.cookie.MagicCookie.setCookieValue=function(_30,_31,_32){var _33=_32?"mc_p":"mc_s";return agi.cookie.AGICookie.setCookieValue(_33,_30,_31,null,_32);};agi.cookie.MagicCookie.getCookieValue=function(_34){var _35=agi.cookie.AGICookie.getCookieValue("mc_s",_34);if(!_35){_35=agi.cookie.AGICookie.getCookieValue("mc_p",_34);}return _35;};agi.cookie.MagicCookie.delCookieValue=function(_36,_37){return agi.cookie.MagicCookie.setCookieValue(_36,null,_37);};}if(!dojo._hasResource["agi.cookie._base"]){dojo._hasResource["agi.cookie._base"]=true;dojo.provide("agi.cookie._base");agi.cookie.toString=function(){return "AGICookie";};agi.cookie.getMemNum=function(){return agi.cookie.AGICookie.getCookieValue("customer","memnum");};agi.cookie.getMemName=function(){return agi.cookie.AGICookie.getCookieValue("customer","name");};agi.cookie.getCustomerEmail=function(){return agi.cookie.AGICookie.getCookieValue("customer","email");};agi.cookie.getCustomerAge=function(){try{var v=agi.cookie.AGICookie.getCookieValue("customer","age");if(!v){v="";}age=parseInt(v);if(age<18){v="";}else{if(age>65){v="65";}}return v;}catch(er){return "";}};agi.cookie.getCustomerGender=function(){try{var v=agi.cookie.AGICookie.getCookieValue("customer","gender");if(!v){v="";}return v.toLowerCase();}catch(er){return "";}};}if(!dojo._hasResource["agi.cookie"]){dojo._hasResource["agi.cookie"]=true;dojo.provide("agi.cookie");}if(!dojo._hasResource["agi.types"]){dojo._hasResource["agi.types"]=true;dojo.provide("agi.types");dojo.provide("agi.types.ExtArray");(function(){var t=agi.types;var d=dojo;t.toString=function(){return "AGTypes";};d.declare("agi.types.ExtArray",[Array],{toString:function(){return this.declaredClass.split(".")[2]+"("+this._arrayMembers().join(", ")+")";},forEach:function(_38,_39){d.forEach(this._arrayMembers(),_38,_39);return this;},_arrayMembers:function(){var ret=[];for(var i=0;i<this.length;i++){ret.push(this[i]);}return ret;},every:function(_3a,_3b){return d.every(this._arrayMembers(),_3a,_3b);},some:function(_3c,_3d){return d.some(this._arrayMembers(),_3c,_3d);},map:function(_3e,obj){return d.map(this._arrayMembers(),_3e,obj,t.ExtArray);}});d.declare("agi.types.Dict",[],{toString:function(){return this.declaredClass.split(".")[2]+"("+this.keys().join(", ")+")";},fromObject:function(obj){for(m in obj){if(!Object.prototype[m]){this[m]=obj[m];}}},keys:function(){var ret=new t.ExtArray();for(m in this){if(d.isString(m)&&!t.Dict.prototype[m]&&m!="declaredClass"&&m!="preamble"){ret.push(m);}}ret.sort();return ret;},values:function(){var ret=new t.ExtArray();this.keys().forEach(d.hitch(this,function(i){ret.push(this[i]);}));return ret;},items:function(){var _3f=new t.ExtArray();this.keys().forEach(d.hitch(this,function(i){_3f.push([i,this[i]]);}));return _3f;}});})();}if(!dojo._hasResource["agi.util"]){dojo._hasResource["agi.util"]=true;dojo.provide("agi.util");if(typeof $=="undefined"){$=function(i){return dojo.byId(i);};}(function(){var u=agi.util;var t=agi.types;var d=dojo;u.toString=function(){return "AGUtil";};u.dir=function(_40){ret=[];if(d.isArray(_40)){for(x in _40){if(!Array.prototype[x]){ret.push([x,_40[x]]);}}}else{if(d.isString(_40)){for(x in _40){if(!String.prototype[x]){ret.push([x,_40[x]]);}}}else{d.forEach(_40,function(x){ret.push([x,_40[x]]);});}}return ret;};u.getClassName=function(_41){if(!_41.declaredClass){if(d.isString(_41)){return "String";}else{if(d.isArray(_41)||d.isArrayLike(_41)){return "Array";}else{if(d.isFunction(_41)){return "function";}else{if(d.isObject(_41)){return "Object";}}}}}else{var _42=_41.declaredClass.split(".");return _42[_42.length-1];}};u.capitalize=function(str){return str.charAt(0).toUpperCase()+str.substring(1);};u.randInt=function(max){return parseInt((parseInt(max,10)*Math.random())/Math.random(),10);};u.escapeQuotAmp=function(_43){return _43.toString().replace(/"/g,"&quot;").replace(/&/g,"&amp;");};u.toPx=function(num){return num.toString()+"px";};u.posToString=function(_44){var _45=[];var _46=["x","y","z","t","l","h","w","m","n","top","left","right","height","width","length","breadth","max","min","high","low","zIndex"];var _47=function(pos,s){if(pos[s]){_45.push(s+": "+pos[s]);}return;};for(i=0;i<_46.length;i++){_47(_44,_46[i]);}return "{"+_45.join(", ")+"}";};u._debounce_waiting=false;u._setDebounceWaitingFalse=function(){u._debounce_waiting=false;};u.debounce=function(x,_48,_49){var _4a=3000;if(_49){_4a=_49*1000;}if(window.setDoPopAway){setDoPopAway(false);}if(u._debounce_waiting){if(_48){alert("Please wait while we process your request.");}return false;}else{u._debounce_waiting=true;setTimeout(u._setDebounceWaitingFalse,_4a);return true;}};u.collection_as_array=u.collectionToArray=function(_4b){var ret=[];d.forEach(_4b,function(i){ret.push(i);});return ret;};u.extend_array=u.extendArray=function(_4c,_4d){d.forEach(_4d,function(i){_4c.push(i);});};u.product_id=u.getProdId=function(_4e){return "productw-"+_4e;};u.isUndef=function(_4f){return (_4f===undefined);};u.isDef=function(_50){if(_50){return true;}else{if(_50===""||_50===0){return true;}else{return false;}}};u.isNull=function(_51){return (_51===null);};u.queryOne=function(_52,_53){ret=d.query(_52,_53);if(ret.length<=0){return null;}else{return ret[0];}};u.query_one=u.q1=u.queryOne;u.getQueryVariable=function(_54,_55){var wv;if(webvars){wv=webvars;}if(_55){wv=d.queryToObject(_55);}else{if(!_55&&!wv){wv=d.queryToQbect(window.location.search.substring(1));}}return wv[_54];};u.get_query_variable=u.getQv=u.getQueryVariable;u.truncate=function(_56,_57,_58){_58=_58?_58.toLowerCase():"left";if(_56.length>_57){var _59=0;var ret=_56;var _5a=0;if(_58=="right"){ret=_56.substring(_56.length-_57);ret="..."+ret;}else{if(_58=="left"){_5a=_56.indexOf(" ",_57);ret=_56.substring(_59,(_5a>=0)?_5a:_57);ret+="...";}}}else{ret=_56;}return ret;};u.trunc=u.truncate;u.get_friendly_path=u.getFriendlyPath=function(){return d.doc.location.pathname.split(".pd")[1];};u.set_options=u.setOptions=function(_5b,_5c){_5b.options.length=0;var _5d=agi.html._buildOptions(_5c);var i=0;var o;for(o=0;o<_5d.length;o++){_5b.options[i]=_5d[o];i++;}};u._build_options=u._buildOptions=function(_5e){var _5f=[];var _60=0;var t;for(t=0;t<_5e.length;t++){var _61=_5e[t][1];var _62=_5e[t][0];var o=new Option(_62,_61);_5f[_5f.length]=o;_60++;}if(_60>1){_5f.unshift(new Option("",""));}return _5f;};u.show=function(_63,_64){d.style(_63,{display:_64?_64:"block"});};u.hide=function(_65){d.style(_65,{display:"none"});};u.toggleDisplay=function(_66){if(d.style(_66,"display")=="none"){d.style(_66,{display:"block"});}else{d.style(_66,{display:"none"});}};u.toggle_block=function(_67,_68,_69,_6a){if(_69&&_6a){var _6b=_67.className;if(_6b.indexOf(_69)>-1){d.removeClass(_67,_69);d.addClass(_67,_6a);}else{d.removeClass(_67,_6a);d.addClass(_67,_69);}}u.toggleDisplay(_68);};u.toggleBlock=u.toggle_block;u.get_position=u.getPosition=function(_6c){return d.coords(_6c,true);};u.getAbsolutePosition=function(_6d){return d._abs(_6d,true);};u.isUndefined=function(it){return ((typeof (it)=="undefined")&&(it===undefined));};u.getNameInObj=function(ns,_6e){if(!ns){ns=d.global;}for(var x in ns){if(ns[x]===_6e){return x.toString();}}return null;};u.forward=function(_6f){return function(){return this[_6f].apply(this,arguments);};};u.shallowCopy=function(obj,_70){var i,ret;if(obj===null){return null;}if(d.isObject(obj)){ret=new obj.constructor();for(i in obj){if(u.isUndefined(ret[i])){ret[i]=_70?u.shallowCopy(obj[i],_70):obj[i];}}}else{if(d.lang.isArray(obj)){ret=[];for(i=0;i<obj.length;i++){ret[i]=_70?u.shallowCopy(obj[i],_70):obj[i];}}else{ret=obj;}}return ret;};u.errorToString=function(_71){if(!typeof _71.message=="undefined"){return _71.message;}else{if(!typeof _71.description=="undefined"){return _71.description;}else{return _71;}}};u.raise=function(_72,_73){if(_73){_72=_72+": "+u.errorToString(_73);}else{_72=u.errorToString(_72);}throw _73||new Error(_72);};u.keyList=function(obj){var ret=new t.ExtArray();for(k in obj){if(d.isString(k)){ret.push(k);}}ret.sort();return ret;};u.enumerate=function(arr){var ret=new t.ExtArray();for(var i=0;i<arr.length;i++){ret.push([i,arr[i]]);}return ret;};u.objToDict=function(obj){var ret=new t.Dict();ret.fromObject(obj);return ret;};})();(function(){var arr=Array.prototype;var d=dojo;arr.indexOf=function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj){return i;}}return -1;};arr.contains=function(obj){return this.indexOf(obj)>-1;};arr.remove=function(idx){return this.splice(idx,1);};arr.append=function(_74){return this.push(_74);};arr.extend=function(_75){d.forEach(_75,d.hitch(this,function(i){this.push(i);}));};})();(function(){var str=String.prototype;str.startswith=function(_76){return this.match("^"+_76)==_76;};str.endswith=function(_77){return this.match(_77+"$")==_77;};str.contains=function(_78){return this.match(_78)!=null;};str.isdigit=function(_79){if(this=="0"){return true;}else{var _7a=_79||10;var val=parseInt(this,_7a);if((val===0)||(val.toString()=="NaN")){return false;}else{return true;}}};})();}if(!dojo._hasResource["agi.dom.window"]){dojo._hasResource["agi.dom.window"]=true;dojo.provide("agi.dom.window");agi.dom.window._scrollInterval=null;agi.dom.window.scroll_into_view=function(_7b){try{clearInterval(agi.dom.window._scrollInterval);}catch(e){}var _7c=dojo.byId(_7b);var _7d=dojo.coords(_7c,true);var top=_7d.y;var _7e=_7d.y+_7d.h;var _7f=dijit.getViewport();var _80=_7f.t;var _81=_7f.l;var _82=Math.floor((agi.dom.window.getSize().height-_7c.clientHeight)/2);var _83=agi.dom.window.getLightboxTop();if(_80<top&&_7e<agi.dom.window.getSize().height){return;}if((_7e-_83)<agi.dom.window.getSize().height){agi.dom.window.scrollTo(_83);}else{if(_82>0){agi.dom.window.scrollTo(top-_82);}else{if(_80>top){agi.dom.window.scrollTo(top);}}}};agi.dom.window.scrollTo=function(y){if(y>agi.dom.window.getMaxScroll()){y=agi.dom.window.getMaxScroll();}step=Math.abs(dijit.getViewport().t-y)/25;agi.dom.window._scrollInterval=setInterval("agi.dom.window.smoothScroll("+step+","+y+")",5);};agi.dom.window.smoothScroll=function(_84,_85){var _86=dijit.getViewport().t;var _87;if(_86>_85){_87=Math.max(_86-_84,_85);}else{_87=Math.min(_86+_84,_85);}window.scroll(0,_87);if(_87==_85){clearInterval(agi.dom.window._scrollInterval);}};agi.dom.window.getSize=function(){var _88={};_88.width=0;_88.height=0;if(typeof (window.innerWidth)=="number"){_88.width=window.innerWidth;_88.height=window.innerHeight;}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){_88.width=document.documentElement.clientWidth;_88.height=document.documentElement.clientHeight;}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){_88.width=document.body.clientWidth;_88.height=document.body.clientHeight;}}}return _88;};agi.dom.window.getScrollOffset=function(){var _89={};_89.pageYOffset=dijit.getViewport().t;_89.pageXOffset=dijit.getViewport().l;return _89;};agi.dom.window.getElementScrollOffset=function(_8a){var _8b=dojo.byId(_8a);var _8c={};if(typeof (_8b.pageYOffset)=="number"){_8c.pageYOffset=_8b.pageYOffset;_8c.pageXOffset=_8b.pageXOffset;}else{_8c.pageYOffset=_8b.scrollTop;_8c.pageXOffset=_8b.scrollLeft;}return _8c;};agi.dom.window.getMaxScroll=function(){var _8d=document.body.clientHeight;if(typeof (window.innerHeight)=="number"){var _8e=window.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){var _8e=document.documentElement.clientHeight;}}if(_8d>_8e){return _8d-_8e;}else{return 0;}};agi.dom.window.getLightboxTop=function(){try{var tmp=dojo.byId("lightbox");var top=0;if(tmp.style.display=="none"){return 0;}while(tmp.offsetParent&&tmp.tagName.toUpperCase()!="BODY"){top+=tmp.offsetTop;tmp=tmp.offsetParent;}top+=tmp.offsetTop;if(top>10){return top-10;}else{return top;}}catch(e){return 0;}};agi.dom.window.getStyle=function(el,_8f){return dojo.style(el,_8f);};}if(!dojo._hasResource["agi.validation"]){dojo._hasResource["agi.validation"]=true;dojo.provide("agi.validation");agi.validation.PASS=true;agi.validation.FAIL=false;agi.validation.EMAIL_FAIL="EMAIL_FAIL";agi.validation.IS_EMPTY="IS_EMPTY";agi.validation.TOO_LONG="TOO_LONG";agi.validation.ONE_EMAIL="ONE_EMAIL";agi.validation.defaultErrorMessages=[];agi.validation.defaultErrorMessages[agi.validation.EMAIL_FAIL]=" is not a valid email address.";agi.validation.defaultErrorMessages[agi.validation.TOO_LONG]=" is too long to fit in our database; please choose an alternative email address.";agi.validation.defaultErrorMessages[agi.validation.IS_EMPTY]="Please specify at least one recipient's email for your card.";agi.validation.defaultErrorMessages[agi.validation.ONE_EMAIL]="Please enter one email address at a time.";agi.validation.isEmpty=function(val){if(agi.validation.trim(val)==""){return true;}return false;};agi.validation.ltrim=function(val){return val.replace(/^\s*/g,"");};agi.validation.rtrim=function(val){return val.replace(/\s*$/g,"");};agi.validation.trim=function(val){return val.replace(/^\s*|\s*$/g,"");};agi.validation.write_message=function(_90,_91,_92){var _93=dojo.byId(_90);var _94=_93.className;if(_91){if(_92){_93.setAttribute("class",_92);_93.setAttribute("className",_92);}_93.style.display="block";_93.innerHTML=_91;agi.dom.window.scroll_into_view(_90);}else{_93.style.display="none";}};agi.validation.reformat_emails=function(_95,_96){var _97="";for(var i=0;i<_95.length;i++){if(!agi.validation.isEmpty(_95[i])){_97+=agi.validation.trim(_95[i]);if(i<_95.length-1){_97+=", ";}}}if(_96){_96.value=_97;}return _97;};agi.validation.validate_email=function(_98,_99,_9a){var _9b=agi.validation.trim(_98);var _9c;var _9d;var _9e=[];var _9f;if(!_99){_99=75;}if(!_9a){_9a;}if(_9b==""&&!_9a){throw (agi.validation.IS_EMPTY);}else{if(_9b==""){return;}}if(_9b.length>_99){throw (agi.validation.TOO_LONG);}if(_9b.match(/.*@$|.*@.*@.|^@.*|^[^@]*$/)){throw (agi.validation.EMAIL_FAIL);}_9c=_9b.split("@")[0];_9d=_9b.split("@")[1];if(_9c==""||_9d==""){throw (agi.validation.EMAIL_FAIL);}if(_9c.match(/.*[*()<>;:,\[\]\\'" ].*/)){throw (agi.validation.EMAIL_FAIL);}if(_9d.indexOf("..")!=-1){throw (agi.validation.EMAIL_FAIL);}_9e=_9d.split(".");_9f=_9e.length;if(_9f==1){throw (agi.validation.EMAIL_FAIL);}if(_9e[_9f-1].length<2||_9e[_9f-1].length>6){throw (agi.validation.EMAIL_FAIL);}return agi.validation.PASS;};agi.validation.validate_emails=function(_a0,_a1,_a2){var _a3=true;var _a4=_a0.value.replace(/;/g,",");var _a5={"error_message":"","error_codes":[],"pass_validation":agi.validation.FAIL,"emails":""};if(!_a1){_a1=true;}if(!_a2){_a2=agi.validation.defaultErrorMessages;}if(_a1){_a4=_a4.replace(/\n/g,", ");_a4=_a4.replace(/\r/g,", ");}if(agi.validation.isEmpty(_a4)||agi.validation.isEmpty(_a4.replace(/,/g,""))){_a3=agi.validation.FAIL;_a5.error_message+="<p>"+_a2[agi.validation.IS_EMPTY]+"</p>";}_a4=_a4.split(",");for(i=0;i<_a4.length;i++){try{agi.validation.validate_email(_a4[i],"",true);}catch(e_code){_a5.error_message+="<p>"+_a4[i]+" "+_a2[e_code]+"</p>";_a3=agi.validation.FAIL;_a5.error_codes[_a5.error_codes.length]=e_code+"|"+_a4[i];}}if(_a1){agi.validation.reformat_emails(_a4,_a0);}_a5.emails=_a4;_a5.pass_validation=_a3;return _a5;};agi.validation.validate_checkboxes=function(_a6){var _a7=document.getElementsByName(_a6);var _a8=false;for(var i=0;i<_a7.length;i++){if(_a7[i].checked){_a8=true;break;}}if(!_a8){return agi.validation.FAIL;}return agi.validation.PASS;};agi.validation.Error=function(_a9,_aa,_ab){var _ac=this;this.message=_aa;this.field=_a9;this.type=_ab;};agi.validation.Errors=function(_ad){var _ae=this;this.errors=[];this.display_div=dojo.byId(_ad);this.error_html="<p>%s</p>";this.error_color="#FF0000";this.ERROR="agi-message-area agi-error";this.MESSAGE="agi-message-area agi-message-demo";this.SUCCESS="agi-message-area agi-message-success";this.count=function(){return this.errors.length;};this.is_error=function(){return (this.errors.length>0);};this.display=function(_af){if(_af){agi.validation.write_message(this.display_div.id,this.to_html(),"agi-message-area agi-error");this.mark_fields();}else{agi.validation.write_message(this.display_div.id,null,"agi-message-area agi-error");this.clear_fields();}};this.set_class=function(_b0){var _b1=this.display_div.className;if(_b0&&(_b1.indexOf(_b0)==-1)){message_class=(this.display_div.className)?this.display_div.className+" "+_b0:_b0;this.display_div.setAttribute("class",message_class);this.display_div.setAttribute("className",message_class);}};this.write_message=function(_b2,_b3){if(_b2){this.display_div.style.display="block";this.display_div.innerHTML=_b2;}else{this.display_div.style.display="none";}};this.mark_fields=function(){for(i=0;i<this.errors.length;i++){try{dojo.byId(this.errors[i].field+"-error").className="agi-mesage-area agi-error";}catch(e){}}};this.clear_fields=function(){for(i=0;i<this.errors.length;i++){try{dojo.byId(this.errors[i].field+"-error").className="";}catch(e){}}};this.to_html=function(){var _b4="";for(i=0;i<this.errors.length;i++){_b4+=this.error_html.replace("%s",this.errors[i].message);}return _b4;};this.show=function(){this.display(true);};this.hide=function(){this.display(false);};this.reset=function(){this.hide();this.errors=[];};this.add=function(_b5){this.errors.push(_b5);};this.add_error=function(_b6,_b7,_b8){if(!_b8){_b8=this.ERROR;}this.add(new Error(_b6,_b7,_b8));};};}if(!dojo._hasResource["agi.permissions"]){dojo._hasResource["agi.permissions"]=true;dojo.provide("agi.permissions");agi.permissions.newsletter=1;agi.permissions.yakety_yaks=false;agi.permissions.has_perm=function(_b9,_ba){var _bb=_ba.split("|");for(var i=0;i<_bb.length;i++){var _bc=_bb[i].split("^");if((_b9==_bc[0])&&(_bc[1]=="C")){return true;}}return false;};agi.permissions.hide_signup=function(_bd){var _be;var _bf=dojo.byId("agi-signup-cont");if(_bf){var _c0=agi.cookie.MagicCookie.getCookieValue("vanperms");if((_c0!==null)&&(_c0!==_be)&&(_c0!=="")){if(agi.permissions.has_perm(1,_c0)){dojo.style(_bf,"display","none");}}}};agi.permissions.newsletter_signup=function(_c1,_c2){if(!_c1){_c1="";}if(_c2=="yakety-yaks"){agi.permissions.yakety_yaks=true;}agi.permissions.write_newsletter_message("");var _c3=dojo.byId("agi-newsletter-email");_c3.value=agi.validation.trim(_c3.value);if(agi.permissions.validate_email(_c3.value)){var _c4={url:"/newsletter/signup.pd",handleAs:"json",content:{email:_c3.value,"page":_c1,"referer_page":_c2},load:agi.permissions.newsletter_success,error:agi.permissions.newsletter_error};dojo.xhrPost(_c4);}else{agi.permissions.write_newsletter_message("Please enter a valid email address.");}};agi.permissions.newsletter_success=function(_c5,_c6){msg_area=dojo.byId("agi-newsletter-message-area");agi.permissions.write_newsletter_message(_c5.message);if(_c5.status>-1){dojo.byId("agi-newsletter-email").value="your email address";dojo.byId("agi-newsletter-email").blur();}if(agi.permissions.yakety_yaks){agx.currentPage.controller.redirect_to_coupon();}};agi.permissions.newsletter_clear=function(){agi.permissions.write_newsletter_message("");dojo.byId("agi-newsletter-email").value="your email address";dojo.byId("agi-newsletter-email").blur();};agi.permissions.newsletter_error=function(_c7,_c8){agi.permissions.write_newsletter_message("We were unable to process your request.  Please try again in a few minutes.");};agi.permissions.write_newsletter_message=function(_c9){msg_area=dojo.byId("agi-newsletter-message-area");msg_area.innerHTML=_c9;if(!_c9){agi.util.hide(msg_area);}else{agi.util.show(msg_area);}};agi.permissions.email_focus=function(_ca,_cb){if(_ca.value=="your email address"&&_cb){_ca.value="";}if(_ca.value==""&&!_cb){_ca.value="your email address";}};agi.permissions.validate_email=function(_cc){if(!_cc){return false;}else{try{agi.validation.validate_email(_cc);return true;}catch(e){return false;}}};}if(!dojo._hasResource["ag.util"]){dojo._hasResource["ag.util"]=true;dojo.provide("ag.util");ag.util=agi.util;}if(!dojo._hasResource["agi.dom._base"]){dojo._hasResource["agi.dom._base"]=true;dojo.provide("agi.dom._base");agi.dom.make_text=function(_cd){var re=/\&\#(\d*)\;/g;_cd=_cd.replace(re,agi.dom.get_unicode);var _ce=document.createTextNode(_cd);return _ce;};agi.dom.get_unicode=function(str,_cf,_d0,s){_cf=parseInt(_cf);return String.fromCharCode(_cf);};agi.dom.make_node=function(_d1,_d2,_d3){var _d4=document.createElement(_d1);if(_d2!=undefined){for(var _d5 in _d2){if(_d5.toLowerCase()=="class"||_d5.toLowerCase()=="classname"){_d4.className=_d2[_d5];}else{_d4.setAttribute(_d5,_d2[_d5]);}}}if(_d3!=undefined){if(!_d3.push||!_d3.join){_d3=[_d3];}for(var x=0;x<_d3.length;x++){try{_d4.appendChild(_d3[x]);}catch(e){}}}return _d4;};agi.dom.swap_node=function(_d6,_d7){_d6.parentNode.replaceChild(_d7,_d6);return _d7;};agi.dom.remove_children=function(_d8){var _d9=dojo.byId(_d8);var _da=_d9.childNodes;for(var i=_da.length-1;i>=0;i--){_d9.removeChild(_da[i]);}};agi.dom.addHiddenInputElement=function(_db,_dc,_dd){formElement=dojo.byId(_db);var _de=agi.dom.make_node("input",{"type":"hidden","name":_dc,"id":_dc,"value":_dd});if(dojo.byId(_dc)){var _df=dojo.byId(_dc);agi.dom.swap_node(_df,_de);return;}formElement.appendChild(_de);};agi.dom.insert_css_text=function(_e0,doc,URI){if(!_e0){return;}if(!doc){doc=document;}var _e1=doc.createElement("style");_e1.setAttribute("type","text/css");var _e2=dojo.query("head")[0];if(!_e2){return;}else{_e2.appendChild(_e1);}if(_e1.styleSheet){var _e3=function(){try{_e1.styleSheet.cssText=_e0;}catch(e){}};if(_e1.styleSheet.disabled){setTimeout(_e3,10);}else{_e3();}}else{var _e4=doc.createTextNode(_e0);_e1.appendChild(_e4);}return _e1;};agi.dom.find_parent=function(el,_e5){if(el==null){return null;}else{if(!_e5){return el.parentNode;}else{if(el.nodeType==1&&el.tagName.toLowerCase()==_e5.toLowerCase()){return el;}else{return agi.dom.find_parent(el.parentNode,_e5);}}}};agi.dom.selectedValue=function(el){return el[el.selectedIndex].value;};}if(!dojo._hasResource["ag.dom._base"]){dojo._hasResource["ag.dom._base"]=true;dojo.provide("ag.dom._base");ag.dom=agi.dom;}if(!dojo._hasResource["ag.dom"]){dojo._hasResource["ag.dom"]=true;dojo.provide("ag.dom");}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(_e6){var _e7=this;dojo.mixin(_e7,_e6);_e7.node=_e6.node;_e7._showArgs=dojo.mixin({},_e6);_e7._showArgs.node=_e7.node;_e7._showArgs.duration=_e7.showDuration;_e7.showAnim=_e7.showFunc(_e7._showArgs);_e7._hideArgs=dojo.mixin({},_e6);_e7._hideArgs.node=_e7.node;_e7._hideArgs.duration=_e7.hideDuration;_e7.hideAnim=_e7.hideFunc(_e7._hideArgs);dojo.connect(_e7.showAnim,"beforeBegin",dojo.hitch(_e7.hideAnim,"stop",true));dojo.connect(_e7.hideAnim,"beforeBegin",dojo.hitch(_e7.showAnim,"stop",true));},show:function(_e8){return this.showAnim.play(_e8||0);},hide:function(_e9){return this.hideAnim.play(_e9||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_ea={_fire:function(evt,_eb){if(this[evt]){this[evt].apply(this,_eb||[]);}return this;}};var _ec=function(_ed){this._index=-1;this._animations=_ed||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_ec,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_ee,_ef){if(!this._current){this._current=this._animations[this._index=0];}if(!_ef&&this._current.status()=="playing"){return this;}var _f0=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_f1=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_f2=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_f0);d.disconnect(_f1);d.disconnect(_f2);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_f3,_f4){this.pause();var _f5=this.duration*_f3;this._current=null;d.some(this._animations,function(a){if(a.duration<=_f5){this._current=a;return true;}_f5-=a.duration;return false;});if(this._current){this._current.gotoPercent(_f5/this._current.duration,_f4);}return this;},stop:function(_f6){if(this._current){if(_f6){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_ec,_ea);dojo.fx.chain=function(_f7){return new _ec(_f7);};var _f8=function(_f9){this._animations=_f9||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_f9,function(a){var _fa=a.duration;if(a.delay){_fa+=a.delay;}if(this.duration<_fa){this.duration=_fa;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var _fb=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){_fb._connects.push(d.connect(_fb._pseudoAnimation,evt,function(){_fb._fire(evt,arguments);}));});};d.extend(_f8,{_doAction:function(_fc,_fd){d.forEach(this._animations,function(a){a[_fc].apply(a,_fd);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_fe,_ff){var t=this._pseudoAnimation;t[_fe].apply(t,_ff);},play:function(_100,_101){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_102,_103){var ms=this.duration*_102;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_103);});this._call("gotoPercent",arguments);return this;},stop:function(_104){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_f8,_ea);dojo.fx.combine=function(_105){return new _f8(_105);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _106=d.style(node,"height");return Math.max(_106,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["agi.dom"]){dojo._hasResource["agi.dom"]=true;dojo.provide("agi.dom");}if(!dojo._hasResource["agi.widget.wiper"]){dojo._hasResource["agi.widget.wiper"]=true;dojo.provide("agi.widget.wiper");agi.widget.wiper.get_image_prefix=function(){if(ahost.indexOf("yahoo")>-1){return "yh07";}else{return "agbeta";}};agi.widget.wiper.set_navcookie=function(_107,val){var id=_107;var _108=agi.cookie.MagicCookie;var lnav=_108.getCookieValue("lnav");lnav=lnav?agi.base64.decode(lnav):"";if(!lnav){lnav=id+"="+val;}else{if(lnav.indexOf(id)<0){lnav+="&"+id+"="+val;}else{var rval=(val==0)?"1":"0";lnav=lnav.replace(id+"="+rval,id+"="+val);}}_108.setCookieValue("lnav",agi.base64.encode(lnav));};agi.widget.wiper.wipers=[];agi.widget.wiper.find_wipers=function(){var w=dojo.query(".wipe");for(var i=0;i<w.length;i++){new agi.widget.wiper.Wiper(w[i]);}};dojo.addOnLoad(agi.widget.wiper.find_wipers);agi.widget.wiper.Wiper=function(node){var dw=this;this._container=node;this._anim="";this._height="";this._direction="";this._time=800;this._images=true;this._icons={};this._open=false;this._dependent=false;this._cookie=true;this._wait=true;this.do_onload=function(){this._node=dojo.query(".wipe_block",this._container)[0];this._node.style.overflow="hidden";this._toggle=dojo.query(".wipe_toggle",this._container)[0];if(this._toggle){this._toggle.onclick=function(){dw.do_wipe();};}var _109=dojo.query(".wipe_parms",this._container)[0];if(_109){this._parse_parms(_109.value);}if(this._dependent){agi.widget.wiper.wipers.push(this);}this.preload();this._check_toggle();};this._parse_parms=function(_10a){var _10b=_10a.split(",");for(var i=0;i<_10b.length;i++){nvp=_10b[i].split("=");if(nvp.length==2){eval("this._"+nvp[0]+"="+nvp[1]);}}};this.preload=function(){if(this._images){var _10c=this._image_name?this._image_name:this._node.id;var _10d=new Image();_10d.src=imghost+"/"+agi.widget.wiper.get_image_prefix()+"/left/"+_10c+"_open.gif";var _10e=new Image();_10e.src=imghost+"/"+agi.widget.wiper.get_image_prefix()+"/left/"+_10c+"_close.gif";this._icons.open=_10d;this._icons.close=_10e;}};this.do_wipe=function(){var okay=this._check_status();if(!okay){return;}if(this._direction=="in"){this._wipe_out();}else{this._wipe_in();}this._toggle_others();};this._check_status=function(){if(this._anim){if(this._anim.status()=="playing"){if(this._wait){return false;}if(!this._height){return false;}this._stop_animation();}}return true;};this._wipe_in=function(_10f){this._direction="in";_10f=_10f==undefined?false:_10f;if(_10f){dojo.style(this._node,"display","block");}else{this._set_height();this._anim=dojo.fx.wipeIn({node:this._node,duration:this._time}).play();}this._change_toggle("close");this.set_cookie(1);};this._wipe_out=function(){this._direction="out";this._set_height();this._anim=dojo.fx.wipeOut({node:this._node,duration:this._time}).play();this._change_toggle("open");this.set_cookie(0);};this._stop_animation=function(){if(this._anim){this._anim.stop(false);}};this._toggle_others=function(){var idx=dojo.indexOf(agi.widget.wiper.wipers,this);if(!idx>-1){return;}for(var i=0;i<agi.widget.wiper.wipers.length;i++){if(i!=idx&&agi.widget.wiper.wipers[i]._direction=="in"){agi.widget.wiper.wipers[i]._stop_animation();agi.widget.wiper.wipers[i]._wipe_out();}}};this._set_height=function(){if(!this._height){var _110;if(this._direction=="in"){dojo.style(this._node,"display","block");}_110=dojo.contentBox(this._node).height;if(this._direction=="in"){dojo.style(this._node,"display","none");}if(_110>0){this._height=_110;}}};this.set_cookie=function(val){agi.widget.wiper.set_navcookie(this._node.id,val);};this.get_cookie=function(){var _111=this._open;var id=this._node.id;var _112=agi.cookie.MagicCookie;var lnav=_112.getCookieValue("lnav");lnav=lnav?agi.base64.decode(lnav):"";if(!lnav){return _111;}var vals=lnav.split("&");for(var i=0;i<vals.length;i++){if(vals[i].indexOf(id)>-1){var nvp=vals[i].split("=");if(nvp.length!=2){return _111;}return parseInt(nvp[1]);}}return _111;};this._change_toggle=function(_113){if(!this._images){this._toggle.innerHTML=_113;return;}var _114=this._toggle.childNodes;for(var i=_114.length-1;i>=0;i--){this._toggle.removeChild(_114[i]);}var icon=this._icons[_113];var _115=icon.width?icon.width:"";var _116=icon.height?icon.height:"";var _117=agi.dom.make_node("img",{"src":this._icons[_113].src,"width":_115,"height":_116,"border":"0","title":_113+" section","alt":_113+" section"});this._toggle.appendChild(_117);};this._check_toggle=function(){var show=this.get_cookie();if(show){this._wipe_in(true);}};this.do_onload();};agi.widget.wiper.turbowipe=function(){var _118=agi.cookie.MagicCookie;var lnav=_118.getCookieValue("lnav");lnav=lnav?agi.base64.decode(lnav):"";if(!lnav){agi.widget.wiper.set_navcookie("occasions",1);lnav="occasions=1";}var vals=lnav.split("&");for(var i=0;i<vals.length;i++){module_id=vals[i].split("=");var nvp=vals[i].split("=");if((nvp.length==2)&&(parseInt(nvp[1])==1)){e=dojo.byId(nvp[0]);if(e){e.style.display="block";toggle_img=dojo.byId(nvp[0]+"-toggle");if(!toggle_img){continue;}toggle_img.src=imghost+"/"+agi.widget.wiper.get_image_prefix()+"/left/"+nvp[0]+"_close.gif";toggle_img.height=30;toggle_img.width=160;agi.widget.wiper.set_navcookie(nvp[0],1);}}}};}if(!dojo._hasResource["ag.widget.wiper"]){dojo._hasResource["ag.widget.wiper"]=true;dojo.provide("ag.widget.wiper");ag.widget.wiper=agi.widget.wiper;}if(!dojo._hasResource["agi.widget.myagdrop"]){dojo._hasResource["agi.widget.myagdrop"]=true;dojo.provide("agi.widget.myagdrop");(function(){var m=agi.widget.myagdrop;var d=dojo;m.menuId="myag-menu";m.menu=null;m.menuItems="li";m.menuButton=null;m.connHandles=[];m.toString=function(){return "AGWidgetMyAGdrop";};m.init=function(){m.menu=dojo.byId(m.menuId);if(!m.menu){return;}var _119=m.menuButton=d.query("#"+m.menuId+" li")[0];d.forEach(m.connHandles,dojo.disconnect);m.connHandles.push(d.connect(_119,"onmouseover",m,m.showMenu));m.connHandles.push(d.connect(_119,"onmouseout",m,m.hideMenu));};m.showMenu=function(evt){var ma=agi.widget.myagdrop;dojo.addClass(ma.menu,"over");};m.hideMenu=function(evt){var ma=agi.widget.myagdrop;dojo.removeClass(ma.menu,"over");};})();}if(!dojo._hasResource["ag.widget.myagdrop"]){dojo._hasResource["ag.widget.myagdrop"]=true;dojo.provide("ag.widget.myagdrop");ag.widget.myagdrop=agi.widget.myagdrop;}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_11a){if(this._hash[_11a.id]){throw new Error("Tried to register widget with id=="+_11a.id+" but that id is already registered");}this._hash[_11a.id]=_11a;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(func,_11b){_11b=_11b||dojo.global;var i=0,id;for(id in this._hash){func.call(_11b,this._hash[id],i++,this._hash);}return this;},filter:function(_11c,_11d){_11d=_11d||dojo.global;var res=new dijit.WidgetSet(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_11c.call(_11d,w,i++,this._hash)){res.add(w);}}return res;},byId:function(id){return this._hash[id];},byClass:function(cls){var res=new dijit.WidgetSet(),id,_11e;for(id in this._hash){_11e=this._hash[id];if(_11e.declaredClass==cls){res.add(_11e);}}return res;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(func,_11f){return dojo.map(this.toArray(),func,_11f);},every:function(func,_120){_120=_120||dojo.global;var x=0,i;for(i in this._hash){if(!func.call(_120,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(func,_121){_121=_121||dojo.global;var x=0,i;for(i in this._hash){if(func.call(_121,this._hash[i],x++,this._hash)){return true;}}return false;}});(function(){dijit.registry=new dijit.WidgetSet();var hash=dijit.registry._hash,attr=dojo.attr,_122=dojo.hasAttr,_123=dojo.style;dijit.byId=function(id){return typeof id=="string"?hash[id]:id;};var _124={};dijit.getUniqueId=function(_125){var id;do{id=_125+"_"+(_125 in _124?++_124[_125]:_124[_125]=0);}while(hash[id]);return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id;};dijit.findWidgets=function(root){var _126=[];function _127(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _128=node.getAttribute("widgetId");if(_128){_126.push(hash[_128]);}else{_127(node);}}}};_127(root);return _126;};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(_129){if(!_129._destroyed){if(_129.destroyRecursive){_129.destroyRecursive();}else{if(_129.destroy){_129.destroy();}}}});};if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit._destroyAll();});}dijit.byNode=function(node){return hash[node.getAttribute("widgetId")];};dijit.getEnclosingWidget=function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;};var _12a=(dijit._isElementShown=function(elem){var s=_123(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(attr(elem,"type")!="hidden");});dijit.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _122(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":if(dojo.isMoz){try{return elem.contentDocument.designMode=="on";}catch(err){return false;}}else{if(dojo.isWebKit){var doc=elem.contentDocument,body=doc&&doc.body;return body&&body.contentEditable=="true";}else{try{doc=elem.contentWindow.document;body=doc&&doc.body;return body&&body.firstChild&&body.firstChild.contentEditable=="true";}catch(e){return false;}}}default:return elem.contentEditable=="true";}};var _12b=(dijit.isTabNavigable=function(elem){if(attr(elem,"disabled")){return false;}else{if(_122(elem,"tabIndex")){return attr(elem,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(elem);}}});dijit._getTabNavigable=function(root){var _12c,last,_12d,_12e,_12f,_130;var _131=function(_132){dojo.query("> *",_132).forEach(function(_133){if((dojo.isIE&&_133.scopeName!=="HTML")||!_12a(_133)){return;}if(_12b(_133)){var _134=attr(_133,"tabIndex");if(!_122(_133,"tabIndex")||_134==0){if(!_12c){_12c=_133;}last=_133;}else{if(_134>0){if(!_12d||_134<_12e){_12e=_134;_12d=_133;}if(!_12f||_134>=_130){_130=_134;_12f=_133;}}}}if(_133.nodeName.toUpperCase()!="SELECT"){_131(_133);}});};if(_12a(root)){_131(root);}return {first:_12c,last:last,lowest:_12d,highest:_12f};};dijit.getFirstInTabbingOrder=function(root){var _135=dijit._getTabNavigable(dojo.byId(root));return _135.lowest?_135.lowest:_135.first;};dijit.getLastInTabbingOrder=function(root){var _136=dijit._getTabNavigable(dojo.byId(root));return _136.last?_136.last:_136.highest;};dijit.defaultDuration=dojo.config["defaultDuration"]||200;})();}if(!dojo._hasResource["agi._base"]){dojo._hasResource["agi._base"]=true;dojo.provide("agi._base");dojo.provide("agi.registry");agi.registry=new dijit.WidgetSet();agi.byId=function(id){return agi.registry.byId(id);};agi.listAll=function(){var cd=["r","i","d",".","e","l","o","s","n","o","c"];var evil=["l","a","v","e"];cd.reverse();evil.reverse();dojo[evil.join("")](cd.join(""))(agi.registry._hash);};agi._loadedResources={};agi._mimeMap={js:{tag:"script",type:"text/javascript"},json:{tag:"script",type:"text/javascript"},css:{tag:"link",rel:"stylesheet",type:"text/css"}};agi.requireJs=function(_137,_138){return agi.require("js."+_137,"js",_138);};agi.requireCss=function(_139,_13a){return agi.require("css."+_139,"css",_13a);};agi.require=function(_13b,type,_13c){var _13d=agi._loadedResources[_13b];if(_13d&&!_13c){return _13d;}type=type||"js";var host=agx.currentPage.imghost;var _13e=[_13b.split(".").join("/"),type].join(".");if(_13e.charAt(0)=="/"){_13e=_13e.substring(1);}var uri=[host,_13e].join("/");var tag=dojo.doc.createElement(agi._mimeMap[type].tag);if(type=="css"){tagi.rel=agi._mimeMap.css.rel;tagi.href=uri;}else{tagi.src=uri;tagi.type=agi._mimeMap[type].type;}dojo.query("head")[0].appendChild(tag);agi._loadedResources[_13b]=tag;return tag;};}if(!dojo._hasResource["agi.classes._base"]){dojo._hasResource["agi.classes._base"]=true;dojo.provide("agi.classes._base");agi.classes.toString=function(){return "AGBase";};agi.classes._idInc=0;agi.classes._idGen=function(){agi.classes._idInc++;return agi.classes._idInc;};}if(!dojo._hasResource["agi.classes.Named"]){dojo._hasResource["agi.classes.Named"]=true;dojo.provide("agi.classes.Named");dojo.declare("agi.classes.Named",null,{toString:function(){var _13f=this.id||"<NO ID>";return ["[",agi.util.getClassName(this),", id=",(this.id||"<NO ID>"),"]"].join("");}});}if(!dojo._hasResource["agi.classes.Identified"]){dojo._hasResource["agi.classes.Identified"]=true;dojo.provide("agi.classes.Identified");dojo.declare("agi.classes.Identified",[agi.classes.Named],{constructor:function(){this._getId();},_getId:function(){if(!this._isIdentified){this.id=agi.classes._idGen();agi.registry.add(this);this._isIdentified=true;}}});}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.window.getBox=function(){var _140=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _141=dojo._docScroll();return {w:_140.clientWidth,h:_140.clientHeight,l:_141.x,t:_141.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _142=doc.compatMode=="BackCompat",_143=_142?body:html,_144=isWK?body:_143,_145=_143.clientWidth,_146=_143.clientHeight,rtl=!dojo._isBodyLtr(),_147=pos||dojo.position(node),el=node.parentNode,_148=function(el){return ((isIE<=6||(isIE&&_142))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_148(node)){return;}while(el){if(el==body){el=_144;}var _149=dojo.position(el),_14a=_148(el);if(el==_144){_149.w=_145;_149.h=_146;if(_144==html&&isIE&&rtl){_149.x+=_144.offsetWidth-_149.w;}if(_149.x<0||!isIE){_149.x=0;}if(_149.y<0||!isIE){_149.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_149.w-=pb.w;_149.h-=pb.h;_149.x+=pb.l;_149.y+=pb.t;}if(el!=_144){var _14b=el.clientWidth,_14c=_149.w-_14b;if(_14b>0&&_14c>0){_149.w=_14b;if(isIE&&rtl){_149.x+=_14c;}}_14b=el.clientHeight;_14c=_149.h-_14b;if(_14b>0&&_14c>0){_149.h=_14b;}}if(_14a){if(_149.y<0){_149.h+=_149.y;_149.y=0;}if(_149.x<0){_149.w+=_149.x;_149.x=0;}if(_149.y+_149.h>_146){_149.h=_146-_149.y;}if(_149.x+_149.w>_145){_149.w=_145-_149.x;}}var l=_147.x-_149.x,t=_147.y-Math.max(_149.y,0),r=l+_147.w-_149.w,bot=t+_147.h-_149.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_147.x+=el.scrollLeft;el.scrollLeft+=(isIE>=8&&!_142&&rtl)?-s:s;_147.x-=el.scrollLeft;}if(bot*t>0){_147.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_147.y-=el.scrollTop;}el=(el!=_144)&&!_14a&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{}}return bm;},moveToBookmark:function(_14d){var _14e=dojo.doc,mark=_14d.mark;if(mark){if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{}}else{if(_14e.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(dojo.isArray(mark)){rg=_14e.body.createControlRange();dojo.forEach(mark,function(n){rg.addElement(n);});}else{rg=_14e.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_14f){var node=!dijit._curFocus||(menu&&dojo.isDescendant(dijit._curFocus,menu.domNode))?dijit._prevFocus:dijit._curFocus;return {node:node,bookmark:(node==dijit._curFocus)&&dojo.withGlobal(_14f||dojo.global,dijit.getBookmark),openedForWindow:_14f};},focus:function(_150){if(!_150){return;}var node="node" in _150?_150.node:_150,_151=_150.bookmark,_152=_150.openedForWindow,_153=_151?_151.isCollapsed:false;if(node){var _154=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_154&&_154.focus){try{_154.focus();}catch(e){}}dijit._onFocusNode(node);}if(_151&&dojo.withGlobal(_152||dojo.global,dijit.isCollapsed)&&!_153){if(_152){_152.focus();}try{dojo.withGlobal(_152||dojo.global,dijit.moveToBookmark,null,[_151]);}catch(e2){}}},_activeStack:[],registerIframe:function(_155){return dijit.registerWin(_155.contentWindow,_155);},unregisterIframe:function(_156){dijit.unregisterWin(_156);},registerWin:function(_157,_158){var _159=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);if(dojo.isIE&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}dijit._onTouchNode(_158||evt.target||evt.srcElement,"mouse");};var doc=dojo.isIE?_157.document.documentElement:_157.document;if(doc){if(dojo.isIE){doc.attachEvent("onmousedown",_159);var _15a=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement)){dijit._onFocusNode(_158||evt.srcElement);}else{dijit._onTouchNode(_158||evt.srcElement);}};doc.attachEvent("onactivate",_15a);var _15b=function(evt){dijit._onBlurNode(_158||evt.srcElement);};doc.attachEvent("ondeactivate",_15b);return function(){doc.detachEvent("onmousedown",_159);doc.detachEvent("onactivate",_15a);doc.detachEvent("ondeactivate",_15b);doc=null;};}else{doc.addEventListener("mousedown",_159,true);var _15c=function(evt){dijit._onFocusNode(_158||evt.target);};doc.addEventListener("focus",_15c,true);var _15d=function(evt){dijit._onBlurNode(_158||evt.target);};doc.addEventListener("blur",_15d,true);return function(){doc.removeEventListener("mousedown",_159,true);doc.removeEventListener("focus",_15c,true);doc.removeEventListener("blur",_15d,true);doc=null;};}}},unregisterWin:function(_15e){_15e&&_15e();},_onBlurNode:function(node){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(node,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _15f=[];try{while(node){var _160=dojo.attr(node,"dijitPopupParent");if(_160){node=dijit.byId(_160).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===dojo.body()){break;}node=dojo.window.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_161=id&&dijit.byId(id);if(_161&&!(by=="mouse"&&_161.get("disabled"))){_15f.unshift(id);}node=node.parentNode;}}}}catch(e){}dijit._setStack(_15f,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}dijit._onTouchNode(node);if(node==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=node;dojo.publish("focusNode",[node]);},_setStack:function(_162,by){var _163=dijit._activeStack;dijit._activeStack=_162;for(var _164=0;_164<Math.min(_163.length,_162.length);_164++){if(_163[_164]!=_162[_164]){break;}}var _165;for(var i=_163.length-1;i>=_164;i--){_165=dijit.byId(_163[i]);if(_165){_165._focused=false;_165._hasBeenBlurred=true;if(_165._onBlur){_165._onBlur(by);}dojo.publish("widgetBlur",[_165,by]);}}for(i=_164;i<_162.length;i++){_165=dijit.byId(_162[i]);if(_165){_165._focused=true;if(_165._onFocus){_165._onFocus(by);}dojo.publish("widgetFocus",[_165,by]);}}}});dojo.addOnLoad(function(){var _166=dijit.registerWin(window);if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit.unregisterWin(_166);_166=null;});}});}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_167){this.pairs=[];this.returnWrappers=_167||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_168,wrap,_169,_16a){this.pairs[((_16a)?"unshift":"push")]([name,_168,wrap,_169]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){return dojo.window.getBox();};dijit.placeOnScreen=function(node,pos,_16b,_16c){var _16d=dojo.map(_16b,function(_16e){var c={corner:_16e,pos:{x:pos.x,y:pos.y}};if(_16c){c.pos.x+=_16e.charAt(1)=="L"?_16c.x:-_16c.x;c.pos.y+=_16e.charAt(0)=="T"?_16c.y:-_16c.y;}return c;});return dijit._place(node,_16d);};dijit._place=function(node,_16f,_170){var view=dojo.window.getBox();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}var best=null;dojo.some(_16f,function(_171){var _172=_171.corner;var pos=_171.pos;if(_170){_170(node,_171.aroundCorner,_172);}var _173=node.style;var _174=_173.display;var _175=_173.visibility;_173.visibility="hidden";_173.display="";var mb=dojo.marginBox(node);_173.display=_174;_173.visibility=_175;var _176=Math.max(view.l,_172.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_177=Math.max(view.t,_172.charAt(0)=="T"?pos.y:(pos.y-mb.h)),endX=Math.min(view.l+view.w,_172.charAt(1)=="L"?(_176+mb.w):pos.x),endY=Math.min(view.t+view.h,_172.charAt(0)=="T"?(_177+mb.h):pos.y),_178=endX-_176,_179=endY-_177,_17a=(mb.w-_178)+(mb.h-_179);if(best==null||_17a<best.overflow){best={corner:_172,aroundCorner:_171.aroundCorner,x:_176,y:_177,w:_178,h:_179,overflow:_17a};}return !_17a;});node.style.left=best.x+"px";node.style.top=best.y+"px";if(best.overflow&&_170){_170(node,best.aroundCorner,best.corner);}return best;};dijit.placeOnScreenAroundNode=function(node,_17b,_17c,_17d){_17b=dojo.byId(_17b);var _17e=_17b.style.display;_17b.style.display="";var _17f=dojo.position(_17b,true);_17b.style.display=_17e;return dijit._placeOnScreenAroundRect(node,_17f.x,_17f.y,_17f.w,_17f.h,_17c,_17d);};dijit.placeOnScreenAroundRectangle=function(node,_180,_181,_182){return dijit._placeOnScreenAroundRect(node,_180.x,_180.y,_180.width,_180.height,_181,_182);};dijit._placeOnScreenAroundRect=function(node,x,y,_183,_184,_185,_186){var _187=[];for(var _188 in _185){_187.push({aroundCorner:_188,corner:_185[_188],pos:{x:x+(_188.charAt(1)=="L"?0:_183),y:y+(_188.charAt(0)=="T"?0:_184)}});}return dijit._place(node,_187,_186);};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,_189,_18a,_18b){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAroundAlignment=function(_18c,_18d){var _18e={};dojo.forEach(_18c,function(pos){switch(pos){case "after":_18e[_18d?"BR":"BL"]=_18d?"BL":"BR";break;case "before":_18e[_18d?"BL":"BR"]=_18d?"BR":"BL";break;case "below":_18e[_18d?"BL":"BR"]=_18d?"TL":"TR";_18e[_18d?"BR":"BL"]=_18d?"TR":"TL";break;case "above":default:_18e[_18d?"TL":"TR"]=_18d?"BL":"BR";_18e[_18d?"TR":"TL"]=_18d?"BR":"BL";break;}});return _18e;};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){return dojo.window.get(doc);};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup={_stack:[],_beginZIndex:1000,_idGen:1,moveOffScreen:function(node){var _18f=node.parentNode;if(!_18f||!dojo.hasClass(_18f,"dijitPopup")){_18f=dojo.create("div",{"class":"dijitPopup",style:{visibility:"hidden",top:"-9999px"}},dojo.body());dijit.setWaiRole(_18f,"presentation");_18f.appendChild(node);}var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";dojo.style(_18f,{visibility:"hidden",top:"-9999px"});},getTopPopup:function(){var _190=this._stack;for(var pi=_190.length-1;pi>0&&_190[pi].parent===_190[pi-1].widget;pi--){}return _190[pi];},open:function(args){var _191=this._stack,_192=args.popup,_193=args.orient||((args.parent?args.parent.isLeftToRight():dojo._isBodyLtr())?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_194=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);var _195=_192.domNode.parentNode;if(!_195||!dojo.hasClass(_195,"dijitPopup")){this.moveOffScreen(_192.domNode);_195=_192.domNode.parentNode;}dojo.attr(_195,{id:id,style:{zIndex:this._beginZIndex+_191.length},"class":"dijitPopup "+(_192.baseClass||_192["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(dojo.isIE||dojo.isMoz){var _196=_195.childNodes[1];if(!_196){_196=new dijit.BackgroundIframe(_195);}}var best=_194?dijit.placeOnScreenAroundElement(_195,_194,_193,_192.orient?dojo.hitch(_192,"orient"):null):dijit.placeOnScreen(_195,args,_193=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_195.style.visibility="visible";_192.domNode.style.visibility="visible";var _197=[];_197.push(dojo.connect(_195,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&args.onCancel){dojo.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _198=this.getTopPopup();if(_198&&_198.onCancel){_198.onCancel();}}}}));if(_192.onCancel){_197.push(dojo.connect(_192,"onCancel",args.onCancel));}_197.push(dojo.connect(_192,_192.onExecute?"onExecute":"onChange",this,function(){var _199=this.getTopPopup();if(_199&&_199.onExecute){_199.onExecute();}}));_191.push({wrapper:_195,iframe:_196,widget:_192,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_197});if(_192.onOpen){_192.onOpen(best);}return best;},close:function(_19a){var _19b=this._stack;while(dojo.some(_19b,function(elem){return elem.widget==_19a;})){var top=_19b.pop(),_19c=top.wrapper,_19d=top.iframe,_19e=top.widget,_19f=top.onClose;if(_19e.onClose){_19e.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(_19e&&_19e.domNode){this.moveOffScreen(_19e.domNode);}else{dojo.destroy(_19c);}if(_19f){_19f();}}}};dijit._frames=new function(){var _1a0=[];this.pop=function(){var _1a1;if(_1a0.length){_1a1=_1a0.pop();_1a1.style.display="";}else{if(dojo.isIE){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_1a1=dojo.doc.createElement(html);}else{_1a1=dojo.create("iframe");_1a1.src="javascript:\"\"";_1a1.className="dijitBackgroundIframe";dojo.style(_1a1,"opacity",0.1);}_1a1.tabIndex=-1;dijit.setWaiRole(_1a1,"presentation");}return _1a1;};this.push=function(_1a2){_1a2.style.display="none";_1a0.push(_1a2);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE||dojo.isMoz){var _1a3=dijit._frames.pop();node.appendChild(_1a3);if(dojo.isIE<7){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node);});}else{dojo.style(_1a3,{width:"100%",height:"100%"});}this.iframe=_1a3;}};dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe&&dojo.isIE<7){dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null;}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){dojo.window.scrollIntoView(node,pos);};}if(!dojo._hasResource["dojo.uacss"]){dojo._hasResource["dojo.uacss"]=true;dojo.provide("dojo.uacss");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_1a4=d.isOpera,maj=Math.floor,ff=d.isFF,_1a5=d.boxModel.replace(/-/,""),_1a6={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_quirks:d.isQuirks,dj_iequirks:ie&&d.isQuirks,dj_opera:_1a4,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_1a6["dj_"+_1a5]=true;var _1a7="";for(var clz in _1a6){if(_1a6[clz]){_1a7+=clz+" ";}}html.className=d.trim(html.className+" "+_1a7);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var _1a8="dj_rtl dijitRtl "+_1a7.replace(/ /g,"-rtl ");html.className=d.trim(html.className+" "+_1a8);}});})();}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_1a9,node,_1aa,obj,_1ab,_1ac,_1ad){if(obj!=this._obj){this.stop();this._initialDelay=_1ac||500;this._subsequentDelay=_1ab||0.9;this._minDelay=_1ad||10;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_1a9,_1aa);this._fireEventAndReload();this._evt=dojo.mixin({faux:true},evt);}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_1ae,_1af,_1b0,_1b1,_1b2,_1b3){if(_1ae.keyCode){_1ae.charOrCode=_1ae.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_1ae.charCode){_1ae.charOrCode=String.fromCharCode(_1ae.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_1ae.charOrCode&&(_1ae.ctrlKey===undefined||_1ae.ctrlKey==evt.ctrlKey)&&(_1ae.altKey===undefined||_1ae.altKey==evt.altKey)&&(_1ae.metaKey===undefined||_1ae.metaKey==(evt.metaKey||false))&&(_1ae.shiftKey===undefined||_1ae.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_1af,node,_1b0,_1ae,_1b1,_1b2,_1b3);}else{if(dijit.typematic._obj==_1ae){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_1ae){dijit.typematic.stop();}})];},addMouseListener:function(node,_1b4,_1b5,_1b6,_1b7,_1b8){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_1b4,node,_1b5,node,_1b6,_1b7,_1b8);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){evt.preventDefault();}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_1b4,node,_1b5,node,_1b6,_1b7,_1b8);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_1b9,_1ba,_1bb,_1bc,_1bd,_1be,_1bf,_1c0){return this.addKeyListener(_1ba,_1bb,_1bc,_1bd,_1be,_1bf,_1c0).concat(this.addMouseListener(_1b9,_1bc,_1bd,_1be,_1bf,_1c0));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _1c1=cs.backgroundImage;var _1c2=(cs.borderTopColor==cs.borderRightColor)||(_1c1!=null&&(_1c1=="none"||_1c1=="url(invalid-url:)"));dojo[_1c2?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(elem,role){var _1c3=this.getWaiRole(elem);return role?(_1c3.indexOf(role)>-1):(_1c3.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace(this._XhtmlRoles,"").replace("wairole:",""));},setWaiRole:function(elem,role){var _1c4=dojo.attr(elem,"role")||"";if(!this._XhtmlRoles.test(_1c4)){dojo.attr(elem,"role",role);}else{if((" "+_1c4+" ").indexOf(" "+role+" ")<0){var _1c5=dojo.trim(_1c4.replace(this._XhtmlRoles,""));var _1c6=dojo.trim(_1c4.replace(_1c5,""));dojo.attr(elem,"role",_1c6+(_1c6?" ":"")+role);}}},removeWaiRole:function(elem,role){var _1c7=dojo.attr(elem,"role");if(!_1c7){return;}if(role){var t=dojo.trim((" "+_1c7+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_1c8){return elem.hasAttribute?elem.hasAttribute("aria-"+_1c8):!!elem.getAttribute("aria-"+_1c8);},getWaiState:function(elem,_1c9){return elem.getAttribute("aria-"+_1c9)||"";},setWaiState:function(elem,_1ca,_1cb){elem.setAttribute("aria-"+_1ca,_1cb);},removeWaiState:function(elem,_1cc){elem.removeAttribute("aria-"+_1cc);}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"_connect",function(_1cd,_1ce){if(_1cd&&dojo.isFunction(_1cd._onConnect)){_1cd._onConnect(_1ce);}});dijit._connectOnUseEventHandler=function(_1cf){};dijit._lastKeyDownNode=null;if(dojo.isIE){(function(){var _1d0=function(evt){dijit._lastKeyDownNode=evt.srcElement;};dojo.doc.attachEvent("onkeydown",_1d0);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",_1d0);});})();}else{dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target;},true);}(function(){var _1d1={},_1d2=function(_1d3){var dc=_1d3.declaredClass;if(!_1d1[dc]){var r=[],_1d4,_1d5=_1d3.constructor.prototype;for(var _1d6 in _1d5){if(dojo.isFunction(_1d5[_1d6])&&(_1d4=_1d6.match(/^_set([a-zA-Z]*)Attr$/))&&_1d4[1]){r.push(_1d4[1].charAt(0).toLowerCase()+_1d4[1].substr(1));}}_1d1[dc]=r;}return _1d1[dc]||[];};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_1d7,_1d8){this.create(_1d7,_1d8);},create:function(_1d9,_1da){this.srcNodeRef=dojo.byId(_1da);this._connects=[];this._subscribes=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_1d9){this.params=_1d9;dojo.mixin(this,_1d9);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _1db=this.srcNodeRef;if(_1db&&_1db.parentNode){_1db.parentNode.replaceChild(this.domNode,_1db);}for(attr in this.params){this._onConnect(attr);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _1dc=function(attr,_1dd){if((_1dd.params&&attr in _1dd.params)||_1dd[attr]){_1dd.set(attr,_1dd[attr]);}};for(var attr in this.attributeMap){_1dc(attr,this);}dojo.forEach(_1d2(this),function(a){if(!(a in this.attributeMap)){_1dc(a,this);}},this);},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.create("div");},postCreate:function(){if(this.baseClass){var _1de=this.baseClass.split(" ");if(!this.isLeftToRight()){_1de=_1de.concat(dojo.map(_1de,function(name){return name+"Rtl";}));}dojo.addClass(this.domNode,_1de);}},startup:function(){this._started=true;},destroyRecursive:function(_1df){this._beingDestroyed=true;this.destroyDescendants(_1df);this.destroy(_1df);},destroy:function(_1e0){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_1e1){dfe(_1e1,d.disconnect);});dfe(this._subscribes,function(_1e2){dun(_1e2);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_1e0);dijit.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_1e3){if(this.bgIframe){this.bgIframe.destroy(_1e3);delete this.bgIframe;}if(this.domNode){if(_1e3){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_1e3){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_1e4){dojo.forEach(this.getChildren(),function(_1e5){if(_1e5.destroyRecursive){_1e5.destroyRecursive(_1e4);}});},uninitialize:function(){return false;},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},_onConnect:function(_1e6){if(_1e6 in this._deferredConnects){var _1e7=this[this._deferredConnects[_1e6]||"domNode"];this.connect(_1e7,_1e6.toLowerCase(),_1e6);delete this._deferredConnects[_1e6];}},_setClassAttr:function(_1e8){var _1e9=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(_1e9,this["class"]);this["class"]=_1e8;dojo.addClass(_1e9,_1e8);},_setStyleAttr:function(_1ea){var _1eb=this[this.attributeMap.style||"domNode"];if(dojo.isObject(_1ea)){dojo.style(_1eb,_1ea);}else{if(_1eb.style.cssText){_1eb.style.cssText+="; "+_1ea;}else{_1eb.style.cssText=_1ea;}}this.style=_1ea;},setAttribute:function(attr,_1ec){dojo.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_1ec);},_attrToDom:function(attr,_1ed){var _1ee=this.attributeMap[attr];dojo.forEach(dojo.isArray(_1ee)?_1ee:[_1ee],function(_1ef){var _1f0=this[_1ef.node||_1ef||"domNode"];var type=_1ef.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(_1ed)){_1ed=dojo.hitch(this,_1ed);}var _1f1=_1ef.attribute?_1ef.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);dojo.attr(_1f0,_1f1,_1ed);break;case "innerText":_1f0.innerHTML="";_1f0.appendChild(dojo.doc.createTextNode(_1ed));break;case "innerHTML":_1f0.innerHTML=_1ed;break;case "class":dojo.removeClass(_1f0,this[attr]);dojo.addClass(_1f0,_1ed);break;}},this);this[attr]=_1ed;},attr:function(name,_1f2){if(dojo.config.isDebug){var _1f3=arguments.callee._ach||(arguments.callee._ach={}),_1f4=(arguments.callee.caller||"unknown caller").toString();if(!_1f3[_1f4]){dojo.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_1f4,"","2.0");_1f3[_1f4]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},get:function(name){var _1f5=this._getAttrNames(name);return this[_1f5.g]?this[_1f5.g]():this[name];},set:function(name,_1f6){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _1f7=this._getAttrNames(name);if(this[_1f7.s]){var _1f8=this[_1f7.s].apply(this,Array.prototype.slice.call(arguments,1));}else{if(name in this.attributeMap){this._attrToDom(name,_1f6);}var _1f9=this[name];this[name]=_1f6;}return _1f8||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[];},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[];},nodesWithKeyClick:["input","button"],connect:function(obj,_1fa,_1fb){var d=dojo,dc=d._connect,_1fc=[];if(_1fa=="ondijitclick"){if(dojo.indexOf(this.nodesWithKeyClick,obj.nodeName.toLowerCase())==-1){var m=d.hitch(this,_1fb);_1fc.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;e.preventDefault();}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target===dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e);}}));}_1fa="onclick";}_1fc.push(dc(obj,_1fa,this,_1fb));this._connects.push(_1fc);return _1fc;},disconnect:function(_1fd){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_1fd){dojo.forEach(_1fd,dojo.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_1fe,_1ff){var d=dojo,_200=d.subscribe(_1fe,this,_1ff);this._subscribes.push(_200);return _200;},unsubscribe:function(_201){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_201){dojo.unsubscribe(_201);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):dojo._isBodyLtr();},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},placeAt:function(_202,_203){if(_202.declaredClass&&_202.addChild){_202.addChild(this,_203);}else{dojo.place(this.domNode,_202,_203);}return this;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});})();}if(!dojo._hasResource["dojox.string.Builder"]){dojo._hasResource["dojox.string.Builder"]=true;dojo.provide("dojox.string.Builder");dojox.string.Builder=function(str){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var tmp="",l=arguments.length;switch(l){case 9:tmp=""+arguments[8]+tmp;case 8:tmp=""+arguments[7]+tmp;case 7:tmp=""+arguments[6]+tmp;case 6:tmp=""+arguments[5]+tmp;case 5:tmp=""+arguments[4]+tmp;case 4:tmp=""+arguments[3]+tmp;case 3:tmp=""+arguments[2]+tmp;case 2:b+=""+arguments[0]+arguments[1]+tmp;break;default:var i=0;while(i<arguments.length){tmp+=arguments[i++];}b+=tmp;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_204){return this.append.apply(this,_204);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_205,_206){b=b.replace(_205,_206);this.length=b.length;return this;};this.remove=function(_207,len){if(len===undefined){len=b.length;}if(len==0){return this;}b=b.substr(0,_207)+b.substr(_207+len);this.length=b.length;return this;};this.insert=function(_208,str){if(_208==0){b=str+b;}else{b=b.slice(0,_208)+str+b.slice(_208);}this.length=b.length;return this;};this.toString=function(){return b;};if(str){this.append(str);}};}if(!dojo._hasResource["dojox.string.tokenize"]){dojo._hasResource["dojox.string.tokenize"]=true;dojo.provide("dojox.string.tokenize");dojox.string.tokenize=function(str,re,_209,_20a){var _20b=[];var _20c,_20d,_20e=0;while(_20c=re.exec(str)){_20d=str.slice(_20e,re.lastIndex-_20c[0].length);if(_20d.length){_20b.push(_20d);}if(_209){if(dojo.isOpera){var copy=_20c.slice(0);while(copy.length<_20c.length){copy.push(null);}_20c=copy;}var _20f=_209.apply(_20a,_20c.slice(1).concat(_20b.length));if(typeof _20f!="undefined"){_20b.push(_20f);}}_20e=re.lastIndex;}_20d=str.slice(_20e);if(_20d.length){_20b.push(_20d);}return _20b;};}if(!dojo._hasResource["dojox.dtl._base"]){dojo._hasResource["dojox.dtl._base"]=true;dojo.provide("dojox.dtl._base");dojo.experimental("dojox.dtl");(function(){var dd=dojox.dtl;dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=dojo.extend(function(dict){if(dict){dojo._mixin(this,dict);if(dict.get){this._getter=dict.get;delete this.get;}}},{push:function(){var last=this;var _210=dojo.delegate(this);_210.pop=function(){return last;};return _210;},pop:function(){throw new Error("pop() called on empty Context");},get:function(key,_211){var n=this._normalize;if(this._getter){var got=this._getter(key);if(typeof got!="undefined"){return n(got);}}if(typeof this[key]!="undefined"){return n(this[key]);}return _211;},_normalize:function(_212){if(_212 instanceof Date){_212.year=_212.getFullYear();_212.month=_212.getMonth()+1;_212.day=_212.getDate();_212.date=_212.year+"-"+("0"+_212.month).slice(-2)+"-"+("0"+_212.day).slice(-2);_212.hour=_212.getHours();_212.minute=_212.getMinutes();_212.second=_212.getSeconds();_212.microsecond=_212.getMilliseconds();}return _212;},update:function(dict){var _213=this.push();if(dict){dojo._mixin(this,dict);}return _213;}});var _214=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _215=/\s+/g;var _216=function(_217,_218){_217=_217||_215;if(!(_217 instanceof RegExp)){_217=new RegExp(_217,"g");}if(!_217.global){throw new Error("You must use a globally flagged RegExp with split "+_217);}_217.exec("");var part,_219=[],_21a=0,i=0;while(part=_217.exec(this)){_219.push(this.slice(_21a,_217.lastIndex-part[0].length));_21a=_217.lastIndex;if(_218&&(++i>_218-1)){break;}}_219.push(this.slice(_21a));return _219;};dd.Token=function(_21b,_21c){this.token_type=_21b;this.contents=new String(dojo.trim(_21c));this.contents.split=_216;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(_21d){var bit,bits=[],i=0;_21d=_21d||999;while(i++<_21d&&(bit=_214.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){bits.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){bits.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{bits.push(bit);}}}return bits;};var ddt=dd.text={_get:function(_21e,name,_21f){var _220=dd.register.get(_21e,name.toLowerCase(),_21f);if(!_220){if(!_21f){throw new Error("No tag found for "+name);}return null;}var fn=_220[1];var _221=_220[2];var _222;if(fn.indexOf(":")!=-1){_222=fn.split(":");fn=_222.pop();}dojo["require"](_221);var _223=dojo.getObject(_221);return _223[fn||name]||_223[name+"_"]||_223[fn+"_"];},getTag:function(name,_224){return ddt._get("tag",name,_224);},getFilter:function(name,_225){return ddt._get("filter",name,_225);},getTemplate:function(file){return new dd.Template(ddt.getTemplateString(file));},getTemplateString:function(file){return dojo._getText(file.toString())||"";},_resolveLazy:function(_226,sync,json){if(sync){if(json){return dojo.fromJson(dojo._getText(_226))||{};}else{return dd.text.getTemplateString(_226);}}else{return dojo.xhrGet({handleAs:(json)?"json":"text",url:_226});}},_resolveTemplateArg:function(arg,sync){if(ddt._isTemplate(arg)){if(!sync){var d=new dojo.Deferred();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync);},_isTemplate:function(arg){return (typeof arg=="undefined")||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,sync){if(arg.constructor==Object){if(!sync){var d=new dojo.Deferred;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return dojox.string.tokenize(str,ddt._re,ddt._parseDelims);},_parseDelims:function(varr,load,tag){if(varr){return [dd.TOKEN_VAR,varr];}else{if(load){var _227=dojo.trim(tag).split(/\s+/g);for(var i=0,part;part=_227[i];i++){dojo["require"](part);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=dojo.extend(function(_228,_229){var str=_229?_228:ddt._resolveTemplateArg(_228,true)||"";var _22a=ddt.tokenize(str);var _22b=new dd._Parser(_22a);this.nodelist=_22b.parse();},{update:function(node,_22c){return ddt._resolveContextArg(_22c).addCallback(this,function(_22d){var _22e=this.render(new dd._Context(_22d));if(node.forEach){node.forEach(function(item){item.innerHTML=_22e;});}else{dojo.byId(node).innerHTML=_22e;}return this;});},render:function(_22f,_230){_230=_230||this.getBuffer();_22f=_22f||new dd._Context({});return this.nodelist.render(_22f,_230)+"";},getBuffer:function(){return new dojox.string.Builder();}});var qfRe=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(dojox.string.tokenize(str,qfRe,function(_231){return new dd._Filter(_231);}));}};dd._QuickNodeList=dojo.extend(function(_232){this.contents=_232;},{render:function(_233,_234){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_234=_234.concat(this.contents[i].resolve(_233));}else{_234=_234.concat(this.contents[i]);}}return _234;},dummyRender:function(_235){return this.render(_235,dd.Template.prototype.getBuffer()).toString();},clone:function(_236){return this;}});dd._Filter=dojo.extend(function(_237){if(!_237){throw new Error("Filter must be called with variable name");}this.contents=_237;var _238=this._cache[_237];if(_238){this.key=_238[0];this.filters=_238[1];}else{this.filters=[];dojox.string.tokenize(_237,this._re,this._tokenize,this);this._cache[_237]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(typeof arguments[i]!="undefined"&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var _239=arguments[pos];if(this._args[pos]=="'"){_239=_239.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){_239=_239.replace(/\\"/g,"\"");}}arg=[!this._args[pos],_239];break;}}var fn=ddt.getFilter(arguments[3]);if(!dojo.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_23a){if(typeof this.key=="undefined"){return "";}var str=this.resolvePath(this.key,_23a);for(var i=0,_23b;_23b=this.filters[i];i++){if(_23b[1]){if(_23b[1][0]){str=_23b[0](str,this.resolvePath(_23b[1][1],_23a));}else{str=_23b[0](str,_23b[1][1]);}}else{str=_23b[0](str);}}return str;},resolvePath:function(path,_23c){var _23d,_23e;var _23f=path.charAt(0);var last=path.slice(-1);if(!isNaN(parseInt(_23f))){_23d=(path.indexOf(".")==-1)?parseInt(path):parseFloat(path);}else{if(_23f=="\""&&_23f==last){_23d=path.slice(1,-1);}else{if(path=="true"){return true;}if(path=="false"){return false;}if(path=="null"||path=="None"){return null;}_23e=path.split(".");_23d=_23c.get(_23e[0]);if(dojo.isFunction(_23d)){var self=_23c.getThis&&_23c.getThis();if(_23d.alters_data){_23d="";}else{if(self){_23d=_23d.call(self);}else{_23d="";}}}for(var i=1;i<_23e.length;i++){var part=_23e[i];if(_23d){var base=_23d;if(dojo.isObject(_23d)&&part=="items"&&typeof _23d[part]=="undefined"){var _240=[];for(var key in _23d){_240.push([key,_23d[key]]);}_23d=_240;continue;}if(_23d.get&&dojo.isFunction(_23d.get)&&_23d.get.safe){_23d=_23d.get(part);}else{if(typeof _23d[part]=="undefined"){_23d=_23d[part];break;}else{_23d=_23d[part];}}if(dojo.isFunction(_23d)){if(_23d.alters_data){_23d="";}else{_23d=_23d.call(base);}}else{if(_23d instanceof Date){_23d=dd._Context.prototype._normalize(_23d);}}}else{return "";}}}}return _23d;}});dd._TextNode=dd._Node=dojo.extend(function(obj){this.contents=obj;},{set:function(data){this.contents=data;return this;},render:function(_241,_242){return _242.concat(this.contents);},isEmpty:function(){return !dojo.trim(this.contents);},clone:function(){return this;}});dd._NodeList=dojo.extend(function(_243){this.contents=_243||[];this.last="";},{push:function(node){this.contents.push(node);return this;},concat:function(_244){this.contents=this.contents.concat(_244);return this;},render:function(_245,_246){for(var i=0;i<this.contents.length;i++){_246=this.contents[i].render(_245,_246);if(!_246){throw new Error("Template must return buffer");}}return _246;},dummyRender:function(_247){return this.render(_247,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=dojo.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_248,_249){var str=this.contents.resolve(_248);if(!str){str="";}else{if(!str.safe){str=dd._base.escape(""+str);}}return _249.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=dojo.extend(function(_24a){this.contents=_24a;},{i:0,parse:function(_24b){var _24c={},_24d;_24b=_24b||[];for(var i=0;i<_24b.length;i++){_24c[_24b[i]]=true;}var _24e=new dd._NodeList();while(this.i<this.contents.length){_24d=this.contents[this.i++];if(typeof _24d=="string"){_24e.push(new dd._TextNode(_24d));}else{var type=_24d[0];var text=_24d[1];if(type==dd.TOKEN_VAR){_24e.push(new dd._VarNode(text));}else{if(type==dd.TOKEN_BLOCK){if(_24c[text]){--this.i;return _24e;}var cmd=text.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_24e.push(fn(this,new dd.Token(type,text)));}}}}}}if(_24b.length){throw new Error("Could not find closing tag(s): "+_24b.toString());}this.contents.length=0;return _24e;},next_token:function(){var _24f=this.contents[this.i++];return new dd.Token(_24f[0],_24f[1]);},delete_first_token:function(){this.i++;},skip_past:function(_250){while(this.i<this.contents.length){var _251=this.contents[this.i++];if(_251[0]==dd.TOKEN_BLOCK&&_251[1]==_250){return;}}throw new Error("Unclosed tag found when looking for "+_250);},create_variable_node:function(expr){return new dd._VarNode(expr);},create_text_node:function(expr){return new dd._TextNode(expr||"");},getTemplate:function(file){return new dd.Template(file);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_252,name){var _253=dd.register._registry[_252+"s"];for(var i=0,_254;_254=_253[i];i++){if(typeof _254[0]=="string"){if(_254[0]==name){return _254;}}else{if(name.match(_254[0])){return _254;}}}},getAttributeTags:function(){var tags=[];var _255=dd.register._registry.attributes;for(var i=0,_256;_256=_255[i];i++){if(_256.length==3){tags.push(_256);}else{var fn=dojo.getObject(_256[1]);if(fn&&dojo.isFunction(fn)){_256.push(fn);tags.push(_256);}}}return tags;},_any:function(type,base,_257){for(var path in _257){for(var i=0,fn;fn=_257[path][i];i++){var key=fn;if(dojo.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var attr=fn;if(attr.substr(0,5)=="attr:"){attr=attr.slice(5);}dd.register._registry.attributes.push([attr.toLowerCase(),base+"."+path+"."+attr]);}key=key.toLowerCase();}dd.register._registry[type].push([key,fn,base+"."+path]);}}},tags:function(base,_258){dd.register._any("tags",base,_258);},filters:function(base,_259){dd.register._any("filters",base,_259);}};var _25a=/&/g;var _25b=/</g;var _25c=/>/g;var _25d=/'/g;var _25e=/"/g;dd._base.escape=function(_25f){return dd.mark_safe(_25f.replace(_25a,"&amp;").replace(_25b,"&lt;").replace(_25c,"&gt;").replace(_25e,"&quot;").replace(_25d,"&#39;"));};dd._base.safe=function(_260){if(typeof _260=="string"){_260=new String(_260);}if(typeof _260=="object"){_260.safe=true;}return _260;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});})();}if(!dojo._hasResource["dojox.dtl"]){dojo._hasResource["dojox.dtl"]=true;dojo.provide("dojox.dtl");}if(!dojo._hasResource["dojox.dtl.tag.logic"]){dojo._hasResource["dojox.dtl.tag.logic"]=true;dojo.provide("dojox.dtl.tag.logic");(function(){var dd=dojox.dtl;var ddt=dd.text;var ddtl=dd.tag.logic;ddtl.IfNode=dojo.extend(function(_261,_262,_263,type){this.bools=_261;this.trues=_262;this.falses=_263;this.type=type;},{render:function(_264,_265){var i,bool,_266,_267,_268;if(this.type=="or"){for(i=0;bool=this.bools[i];i++){_266=bool[0];_267=bool[1];_268=_267.resolve(_264);if((_268&&!_266)||(_266&&!_268)){if(this.falses){_265=this.falses.unrender(_264,_265);}return (this.trues)?this.trues.render(_264,_265,this):_265;}}if(this.trues){_265=this.trues.unrender(_264,_265);}return (this.falses)?this.falses.render(_264,_265,this):_265;}else{for(i=0;bool=this.bools[i];i++){_266=bool[0];_267=bool[1];_268=_267.resolve(_264);if(_268==_266){if(this.trues){_265=this.trues.unrender(_264,_265);}return (this.falses)?this.falses.render(_264,_265,this):_265;}}if(this.falses){_265=this.falses.unrender(_264,_265);}return (this.trues)?this.trues.render(_264,_265,this):_265;}return _265;},unrender:function(_269,_26a){_26a=(this.trues)?this.trues.unrender(_269,_26a):_26a;_26a=(this.falses)?this.falses.unrender(_269,_26a):_26a;return _26a;},clone:function(_26b){var _26c=(this.trues)?this.trues.clone(_26b):null;var _26d=(this.falses)?this.falses.clone(_26b):null;return new this.constructor(this.bools,_26c,_26d,this.type);}});ddtl.IfEqualNode=dojo.extend(function(var1,var2,_26e,_26f,_270){this.var1=new dd._Filter(var1);this.var2=new dd._Filter(var2);this.trues=_26e;this.falses=_26f;this.negate=_270;},{render:function(_271,_272){var var1=this.var1.resolve(_271);var var2=this.var2.resolve(_271);var1=(typeof var1!="undefined")?var1:"";var2=(typeof var1!="undefined")?var2:"";if((this.negate&&var1!=var2)||(!this.negate&&var1==var2)){if(this.falses){_272=this.falses.unrender(_271,_272,this);}return (this.trues)?this.trues.render(_271,_272,this):_272;}if(this.trues){_272=this.trues.unrender(_271,_272,this);}return (this.falses)?this.falses.render(_271,_272,this):_272;},unrender:function(_273,_274){return ddtl.IfNode.prototype.unrender.call(this,_273,_274);},clone:function(_275){var _276=this.trues?this.trues.clone(_275):null;var _277=this.falses?this.falses.clone(_275):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_276,_277,this.negate);}});ddtl.ForNode=dojo.extend(function(_278,loop,_279,_27a){this.assign=_278;this.loop=new dd._Filter(loop);this.reversed=_279;this.nodelist=_27a;this.pool=[];},{render:function(_27b,_27c){var i,j,k;var _27d=false;var _27e=this.assign;for(k=0;k<_27e.length;k++){if(typeof _27b[_27e[k]]!="undefined"){_27d=true;_27b=_27b.push();break;}}if(!_27d&&_27b.forloop){_27d=true;_27b=_27b.push();}var _27f=this.loop.resolve(_27b)||[];for(i=_27f.length;i<this.pool.length;i++){this.pool[i].unrender(_27b,_27c,this);}if(this.reversed){_27f=_27f.slice(0).reverse();}var _280=dojo.isObject(_27f)&&!dojo.isArrayLike(_27f);var _281=[];if(_280){for(var key in _27f){_281.push(_27f[key]);}}else{_281=_27f;}var _282=_27b.forloop={parentloop:_27b.get("forloop",{})};var j=0;for(i=0;i<_281.length;i++){var item=_281[i];_282.counter0=j;_282.counter=j+1;_282.revcounter0=_281.length-j-1;_282.revcounter=_281.length-j;_282.first=!j;_282.last=(j==_281.length-1);if(_27e.length>1&&dojo.isArrayLike(item)){if(!_27d){_27d=true;_27b=_27b.push();}var _283={};for(k=0;k<item.length&&k<_27e.length;k++){_283[_27e[k]]=item[k];}dojo.mixin(_27b,_283);}else{_27b[_27e[0]]=item;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_27c));}_27c=this.pool[j++].render(_27b,_27c,this);}delete _27b.forloop;if(_27d){_27b=_27b.pop();}else{for(k=0;k<_27e.length;k++){delete _27b[_27e[k]];}}return _27c;},unrender:function(_284,_285){for(var i=0,pool;pool=this.pool[i];i++){_285=pool.unrender(_284,_285);}return _285;},clone:function(_286){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_286));}});dojo.mixin(ddtl,{if_:function(_287,_288){var i,part,type,_289=[],_28a=_288.contents.split();_28a.shift();_288=_28a.join(" ");_28a=_288.split(" and ");if(_28a.length==1){type="or";_28a=_288.split(" or ");}else{type="and";for(i=0;i<_28a.length;i++){if(_28a[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;part=_28a[i];i++){var not=false;if(part.indexOf("not ")==0){part=part.slice(4);not=true;}_289.push([not,new dd._Filter(part)]);}var _28b=_287.parse(["else","endif"]);var _28c=false;var _288=_287.next_token();if(_288.contents=="else"){_28c=_287.parse(["endif"]);_287.next_token();}return new ddtl.IfNode(_289,_28b,_28c,type);},_ifequal:function(_28d,_28e,_28f){var _290=_28e.split_contents();if(_290.length!=3){throw new Error(_290[0]+" takes two arguments");}var end="end"+_290[0];var _291=_28d.parse(["else",end]);var _292=false;var _28e=_28d.next_token();if(_28e.contents=="else"){_292=_28d.parse([end]);_28d.next_token();}return new ddtl.IfEqualNode(_290[1],_290[2],_291,_292,_28f);},ifequal:function(_293,_294){return ddtl._ifequal(_293,_294);},ifnotequal:function(_295,_296){return ddtl._ifequal(_295,_296,true);},for_:function(_297,_298){var _299=_298.contents.split();if(_299.length<4){throw new Error("'for' statements should have at least four words: "+_298.contents);}var _29a=_299[_299.length-1]=="reversed";var _29b=(_29a)?-3:-2;if(_299[_299.length+_29b]!="in"){throw new Error("'for' tag received an invalid argument: "+_298.contents);}var _29c=_299.slice(1,_29b).join(" ").split(/ *, */);for(var i=0;i<_29c.length;i++){if(!_29c[i]||_29c[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_298.contents);}}var _29d=_297.parse(["endfor"]);_297.next_token();return new ddtl.ForNode(_29c,_299[_299.length+_29b+1],_29a,_29d);}});})();}if(!dojo._hasResource["dojox.dtl.tag.loop"]){dojo._hasResource["dojox.dtl.tag.loop"]=true;dojo.provide("dojox.dtl.tag.loop");(function(){var dd=dojox.dtl;var ddtl=dd.tag.loop;ddtl.CycleNode=dojo.extend(function(_29e,name,text,_29f){this.cyclevars=_29e;this.name=name;this.contents=text;this.shared=_29f||{counter:-1,map:{}};},{render:function(_2a0,_2a1){if(_2a0.forloop&&!_2a0.forloop.counter0){this.shared.counter=-1;}++this.shared.counter;var _2a2=this.cyclevars[this.shared.counter%this.cyclevars.length];var map=this.shared.map;if(!map[_2a2]){map[_2a2]=new dd._Filter(_2a2);}_2a2=map[_2a2].resolve(_2a0,_2a1);if(this.name){_2a0[this.name]=_2a2;}this.contents.set(_2a2);return this.contents.render(_2a0,_2a1);},unrender:function(_2a3,_2a4){return this.contents.unrender(_2a3,_2a4);},clone:function(_2a5){return new this.constructor(this.cyclevars,this.name,this.contents.clone(_2a5),this.shared);}});ddtl.IfChangedNode=dojo.extend(function(_2a6,vars,_2a7){this.nodes=_2a6;this._vars=vars;this.shared=_2a7||{last:null,counter:0};this.vars=dojo.map(vars,function(item){return new dojox.dtl._Filter(item);});},{render:function(_2a8,_2a9){if(_2a8.forloop){if(_2a8.forloop.counter<=this.shared.counter){this.shared.last=null;}this.shared.counter=_2a8.forloop.counter;}var _2aa;if(this.vars.length){_2aa=dojo.toJson(dojo.map(this.vars,function(item){return item.resolve(_2a8);}));}else{_2aa=this.nodes.dummyRender(_2a8,_2a9);}if(_2aa!=this.shared.last){var _2ab=(this.shared.last===null);this.shared.last=_2aa;_2a8=_2a8.push();_2a8.ifchanged={firstloop:_2ab};_2a9=this.nodes.render(_2a8,_2a9);_2a8=_2a8.pop();}else{_2a9=this.nodes.unrender(_2a8,_2a9);}return _2a9;},unrender:function(_2ac,_2ad){return this.nodes.unrender(_2ac,_2ad);},clone:function(_2ae){return new this.constructor(this.nodes.clone(_2ae),this._vars,this.shared);}});ddtl.RegroupNode=dojo.extend(function(_2af,key,_2b0){this._expression=_2af;this.expression=new dd._Filter(_2af);this.key=key;this.alias=_2b0;},{_push:function(_2b1,_2b2,_2b3){if(_2b3.length){_2b1.push({grouper:_2b2,list:_2b3});}},render:function(_2b4,_2b5){_2b4[this.alias]=[];var list=this.expression.resolve(_2b4);if(list){var last=null;var _2b6=[];for(var i=0;i<list.length;i++){var id=list[i][this.key];if(last!==id){this._push(_2b4[this.alias],last,_2b6);last=id;_2b6=[list[i]];}else{_2b6.push(list[i]);}}this._push(_2b4[this.alias],last,_2b6);}return _2b5;},unrender:function(_2b7,_2b8){return _2b8;},clone:function(_2b9,_2ba){return this;}});dojo.mixin(ddtl,{cycle:function(_2bb,_2bc){var args=_2bc.split_contents();if(args.length<2){throw new Error("'cycle' tag requires at least two arguments");}if(args[1].indexOf(",")!=-1){var vars=args[1].split(",");args=[args[0]];for(var i=0;i<vars.length;i++){args.push("\""+vars[i]+"\"");}}if(args.length==2){var name=args[args.length-1];if(!_2bb._namedCycleNodes){throw new Error("No named cycles in template: '"+name+"' is not defined");}if(!_2bb._namedCycleNodes[name]){throw new Error("Named cycle '"+name+"' does not exist");}return _2bb._namedCycleNodes[name];}if(args.length>4&&args[args.length-2]=="as"){var name=args[args.length-1];var node=new ddtl.CycleNode(args.slice(1,args.length-2),name,_2bb.create_text_node());if(!_2bb._namedCycleNodes){_2bb._namedCycleNodes={};}_2bb._namedCycleNodes[name]=node;}else{node=new ddtl.CycleNode(args.slice(1),null,_2bb.create_text_node());}return node;},ifchanged:function(_2bd,_2be){var _2bf=_2be.contents.split();var _2c0=_2bd.parse(["endifchanged"]);_2bd.delete_first_token();return new ddtl.IfChangedNode(_2c0,_2bf.slice(1));},regroup:function(_2c1,_2c2){var _2c3=dojox.string.tokenize(_2c2.contents,/(\s+)/g,function(_2c4){return _2c4;});if(_2c3.length<11||_2c3[_2c3.length-3]!="as"||_2c3[_2c3.length-7]!="by"){throw new Error("Expected the format: regroup list by key as newList");}var _2c5=_2c3.slice(2,-8).join("");var key=_2c3[_2c3.length-5];var _2c6=_2c3[_2c3.length-1];return new ddtl.RegroupNode(_2c5,key,_2c6);}});})();}if(!dojo._hasResource["dojox.dtl.filter.misc"]){dojo._hasResource["dojox.dtl.filter.misc"]=true;dojo.provide("dojox.dtl.filter.misc");dojo.mixin(dojox.dtl.filter.misc,{filesizeformat:function(_2c7){_2c7=parseFloat(_2c7);if(_2c7<1024){return (_2c7==1)?_2c7+" byte":_2c7+" bytes";}else{if(_2c7<1024*1024){return (_2c7/1024).toFixed(1)+" KB";}else{if(_2c7<1024*1024*1024){return (_2c7/1024/1024).toFixed(1)+" MB";}}}return (_2c7/1024/1024/1024).toFixed(1)+" GB";},pluralize:function(_2c8,arg){arg=arg||"s";if(arg.indexOf(",")==-1){arg=","+arg;}var _2c9=arg.split(",");if(_2c9.length>2){return "";}var _2ca=_2c9[0];var _2cb=_2c9[1];if(parseInt(_2c8,10)!=1){return _2cb;}return _2ca;},_phone2numeric:{a:2,b:2,c:2,d:3,e:3,f:3,g:4,h:4,i:4,j:5,k:5,l:5,m:6,n:6,o:6,p:7,r:7,s:7,t:8,u:8,v:8,w:9,x:9,y:9},phone2numeric:function(_2cc){var dm=dojox.dtl.filter.misc;_2cc=_2cc+"";var _2cd="";for(var i=0;i<_2cc.length;i++){var chr=_2cc.charAt(i).toLowerCase();(dm._phone2numeric[chr])?_2cd+=dm._phone2numeric[chr]:_2cd+=_2cc.charAt(i);}return _2cd;},pprint:function(_2ce){return dojo.toJson(_2ce);}});}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(_2cf){var _2d0=_2cf.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_2d0==1&&dojo.date.isLeapYear(_2cf)){return 29;}return days[_2d0];};dojo.date.isLeapYear=function(_2d1){var year=_2d1.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_2d2){var str=_2d2.toString();var tz="";var _2d3;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_2d3=str.match(pat))){tz=_2d3[1];}else{str=_2d2.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_2d3=str.match(pat))){tz=_2d3[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_2d4,_2d5,_2d6){_2d4=new Date(+_2d4);_2d5=new Date(+(_2d5||new Date()));if(_2d6=="date"){_2d4.setHours(0,0,0,0);_2d5.setHours(0,0,0,0);}else{if(_2d6=="time"){_2d4.setFullYear(0,0,0);_2d5.setFullYear(0,0,0);}}if(_2d4>_2d5){return 1;}if(_2d4<_2d5){return -1;}return 0;};dojo.date.add=function(date,_2d7,_2d8){var sum=new Date(+date);var _2d9=false;var _2da="Date";switch(_2d7){case "day":break;case "weekday":var days,_2db;var mod=_2d8%5;if(!mod){days=(_2d8>0)?5:-5;_2db=(_2d8>0)?((_2d8-5)/5):((_2d8+5)/5);}else{days=mod;_2db=parseInt(_2d8/5);}var strt=date.getDay();var adj=0;if(strt==6&&_2d8>0){adj=1;}else{if(strt==0&&_2d8<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_2d8>0)?2:-2;}_2d8=(7*_2db)+days+adj;break;case "year":_2da="FullYear";_2d9=true;break;case "week":_2d8*=7;break;case "quarter":_2d8*=3;case "month":_2d9=true;_2da="Month";break;default:_2da="UTC"+_2d7.charAt(0).toUpperCase()+_2d7.substring(1)+"s";}if(_2da){sum["set"+_2da](sum["get"+_2da]()+_2d8);}if(_2d9&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_2dc,_2dd,_2de){_2dd=_2dd||new Date();_2de=_2de||"day";var _2df=_2dd.getFullYear()-_2dc.getFullYear();var _2e0=1;switch(_2de){case "quarter":var m1=_2dc.getMonth();var m2=_2dd.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_2df*4);_2e0=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(_2dc,_2dd,"day"));var _2e1=parseInt(dojo.date.difference(_2dc,_2dd,"week"));var mod=days%7;if(mod==0){days=_2e1*5;}else{var adj=0;var aDay=_2dc.getDay();var bDay=_2dd.getDay();_2e1=parseInt(days/7);mod=days%7;var _2e2=new Date(_2dc);_2e2.setDate(_2e2.getDate()+(_2e1*7));var _2e3=_2e2.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_2e3+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_2e3+mod)<0:adj=2;}}}days+=adj;days-=(_2e1*2);}_2e0=days;break;case "year":_2e0=_2df;break;case "month":_2e0=(_2dd.getMonth()-_2dc.getMonth())+(_2df*12);break;case "week":_2e0=parseInt(dojo.date.difference(_2dc,_2dd,"day")/7);break;case "day":_2e0/=24;case "hour":_2e0/=60;case "minute":_2e0/=60;case "second":_2e0/=1000;case "millisecond":_2e0*=_2dd.getTime()-_2dc.getTime();}return Math.round(_2e0);};}if(!dojo._hasResource["dojox.date.php"]){dojo._hasResource["dojox.date.php"]=true;dojo.provide("dojox.date.php");dojox.date.php.format=function(date,_2e4){var df=new dojox.date.php.DateFormat(_2e4);return df.format(date);};dojox.date.php.DateFormat=function(_2e5){if(!this.regex){var keys=[];for(var key in this.constructor.prototype){if(dojo.isString(key)&&key.length==1&&dojo.isFunction(this[key])){keys.push(key);}}this.regex=new RegExp("(?:(\\\\.)|(["+keys.join("")+"]))","g");}var _2e6=[];this.tokens=dojox.string.tokenize(_2e5,this.regex,function(_2e7,_2e8,i){if(_2e8){_2e6.push([i,_2e8]);return _2e8;}if(_2e7){return _2e7.charAt(1);}});this.replacements=_2e6;};dojo.extend(dojox.date.php.DateFormat,{weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_3:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_3:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthdays:[31,28,31,30,31,30,31,31,30,31,30,31],format:function(date){this.date=date;for(var i=0,_2e9;_2e9=this.replacements[i];i++){this.tokens[_2e9[0]]=this[_2e9[1]]();}return this.tokens.join("");},d:function(){var j=this.j();return (j.length==1)?"0"+j:j;},D:function(){return this.weekdays_3[this.date.getDay()];},j:function(){return this.date.getDate()+"";},l:function(){return this.weekdays[this.date.getDay()];},N:function(){var w=this.w();return (!w)?7:w;},S:function(){switch(this.date.getDate()){case 11:case 12:case 13:return "th";case 1:case 21:case 31:return "st";case 2:case 22:return "nd";case 3:case 23:return "rd";default:return "th";}},w:function(){return this.date.getDay()+"";},z:function(){var _2ea=this.date.getTime()-new Date(this.date.getFullYear(),0,1).getTime();return Math.floor(_2ea/86400000)+"";},W:function(){var week;var _2eb=new Date(this.date.getFullYear(),0,1).getDay()+1;var w=this.date.getDay()+1;var z=parseInt(this.z());if(z<=(8-_2eb)&&_2eb>4){var _2ec=new Date(this.date.getFullYear()-1,this.date.getMonth(),this.date.getDate());if(_2eb==5||(_2eb==6&&dojo.date.isLeapYear(_2ec))){week=53;}else{week=52;}}else{var i;if(Boolean(this.L())){i=366;}else{i=365;}if((i-z)<(4-w)){week=1;}else{var j=z+(7-w)+(_2eb-1);week=Math.ceil(j/7);if(_2eb>4){--week;}}}return week;},F:function(){return this.months[this.date.getMonth()];},m:function(){var n=this.n();return (n.length==1)?"0"+n:n;},M:function(){return this.months_3[this.date.getMonth()];},n:function(){return this.date.getMonth()+1+"";},t:function(){return (Boolean(this.L())&&this.date.getMonth()==1)?29:this.monthdays[this.getMonth()];},L:function(){return (dojo.date.isLeapYear(this.date))?"1":"0";},o:function(){},Y:function(){return this.date.getFullYear()+"";},y:function(){return this.Y().slice(-2);},a:function(){return this.date.getHours()>=12?"pm":"am";},b:function(){return this.a().toUpperCase();},B:function(){var off=this.date.getTimezoneOffset()+60;var secs=(this.date.getHours()*3600)+(this.date.getMinutes()*60)+this.getSeconds()+(off*60);var beat=Math.abs(Math.floor(secs/86.4)%1000)+"";while(beat.length<2){beat="0"+beat;}return beat;},g:function(){return (this.date.getHours()>12)?this.date.getHours()-12+"":this.date.getHours()+"";},G:function(){return this.date.getHours()+"";},h:function(){var g=this.g();return (g.length==1)?"0"+g:g;},H:function(){var G=this.G();return (G.length==1)?"0"+G:G;},i:function(){var mins=this.date.getMinutes()+"";return (mins.length==1)?"0"+mins:mins;},s:function(){var secs=this.date.getSeconds()+"";return (secs.length==1)?"0"+secs:secs;},e:function(){return dojo.date.getTimezoneName(this.date);},I:function(){},O:function(){var off=Math.abs(this.date.getTimezoneOffset());var _2ed=Math.floor(off/60)+"";var mins=(off%60)+"";if(_2ed.length==1){_2ed="0"+_2ed;}if(mins.length==1){_2ed="0"+mins;}return ((this.date.getTimezoneOffset()<0)?"+":"-")+_2ed+mins;},P:function(){var O=this.O();return O.substring(0,2)+":"+O.substring(2,4);},T:function(){return this.e().substring(0,3);},Z:function(){return this.date.getTimezoneOffset()*-60;},c:function(){return this.Y()+"-"+this.m()+"-"+this.d()+"T"+this.h()+":"+this.i()+":"+this.s()+this.P();},r:function(){return this.D()+", "+this.d()+" "+this.M()+" "+this.Y()+" "+this.H()+":"+this.i()+":"+this.s()+" "+this.O();},U:function(){return Math.floor(this.date.getTime()/1000);}});}if(!dojo._hasResource["dojox.dtl.utils.date"]){dojo._hasResource["dojox.dtl.utils.date"]=true;dojo.provide("dojox.dtl.utils.date");dojox.dtl.utils.date.DateFormat=function(_2ee){dojox.date.php.DateFormat.call(this,_2ee);};dojo.extend(dojox.dtl.utils.date.DateFormat,dojox.date.php.DateFormat.prototype,{f:function(){return (!this.date.getMinutes())?this.g():this.g()+":"+this.i();},N:function(){return dojox.dtl.utils.date._months_ap[this.date.getMonth()];},P:function(){if(!this.date.getMinutes()&&!this.date.getHours()){return "midnight";}if(!this.date.getMinutes()&&this.date.getHours()==12){return "noon";}return this.f()+" "+this.a();}});dojo.mixin(dojox.dtl.utils.date,{format:function(date,_2ef){var df=new dojox.dtl.utils.date.DateFormat(_2ef);return df.format(date);},timesince:function(d,now){if(!(d instanceof Date)){d=new Date(d.year,d.month,d.day);}if(!now){now=new Date();}var _2f0=Math.abs(now.getTime()-d.getTime());for(var i=0,_2f1;_2f1=dojox.dtl.utils.date._chunks[i];i++){var _2f2=Math.floor(_2f0/_2f1[0]);if(_2f2){break;}}return _2f2+" "+_2f1[1](_2f2);},_chunks:[[60*60*24*365*1000,function(n){return (n==1)?"year":"years";}],[60*60*24*30*1000,function(n){return (n==1)?"month":"months";}],[60*60*24*7*1000,function(n){return (n==1)?"week":"weeks";}],[60*60*24*1000,function(n){return (n==1)?"day":"days";}],[60*60*1000,function(n){return (n==1)?"hour":"hours";}],[60*1000,function(n){return (n==1)?"minute":"minutes";}]],_months_ap:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."]});}if(!dojo._hasResource["dojox.dtl.filter.dates"]){dojo._hasResource["dojox.dtl.filter.dates"]=true;dojo.provide("dojox.dtl.filter.dates");(function(){var ddfd=dojox.dtl.filter.dates;dojo.mixin(ddfd,{_toDate:function(_2f3){if(_2f3 instanceof Date){return _2f3;}_2f3=new Date(_2f3);if(_2f3.getTime()==new Date(0).getTime()){return "";}return _2f3;},date:function(_2f4,arg){_2f4=ddfd._toDate(_2f4);if(!_2f4){return "";}arg=arg||"N j, Y";return dojox.dtl.utils.date.format(_2f4,arg);},time:function(_2f5,arg){_2f5=ddfd._toDate(_2f5);if(!_2f5){return "";}arg=arg||"P";return dojox.dtl.utils.date.format(_2f5,arg);},timesince:function(_2f6,arg){_2f6=ddfd._toDate(_2f6);if(!_2f6){return "";}var _2f7=dojox.dtl.utils.date.timesince;if(arg){return _2f7(arg,_2f6);}return _2f7(_2f6);},timeuntil:function(_2f8,arg){_2f8=ddfd._toDate(_2f8);if(!_2f8){return "";}var _2f9=dojox.dtl.utils.date.timesince;if(arg){return _2f9(arg,_2f8);}return _2f9(new Date(),_2f8);}});})();}if(!dojo._hasResource["dojox.dtl.filter.integers"]){dojo._hasResource["dojox.dtl.filter.integers"]=true;dojo.provide("dojox.dtl.filter.integers");dojo.mixin(dojox.dtl.filter.integers,{add:function(_2fa,arg){_2fa=parseInt(_2fa,10);arg=parseInt(arg,10);return isNaN(arg)?_2fa:_2fa+arg;},get_digit:function(_2fb,arg){_2fb=parseInt(_2fb,10);arg=parseInt(arg,10)-1;if(arg>=0){_2fb+="";if(arg<_2fb.length){_2fb=parseInt(_2fb.charAt(arg),10);}else{_2fb=0;}}return (isNaN(_2fb)?0:_2fb);}});}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_2fc,map,_2fd,_2fe){_2fe=_2fe||dojo.global;_2fd=_2fd?dojo.hitch(_2fe,_2fd):function(v){return v;};return _2fc.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_2ff,key,_300){var _301=dojo.getObject(key,false,map);if(_300){_301=dojo.getObject(_300,false,_2fe).call(_2fe,_301,key);}return _2fd(_301,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(_302,_303){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _304=dojo.date.stamp._isoRegExp.exec(_302),_305=null;if(_304){_304.shift();if(_304[1]){_304[1]--;}if(_304[6]){_304[6]*=1000;}if(_303){_303=new Date(_303);dojo.forEach(dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _303["get"+prop]();}),function(_306,_307){_304[_307]=_304[_307]||_306;});}_305=new Date(_304[0]||1970,_304[1]||0,_304[2]||1,_304[3]||0,_304[4]||0,_304[5]||0,_304[6]||0);if(_304[0]<100){_305.setFullYear(_304[0]||1970);}var _308=0,_309=_304[7]&&_304[7].charAt(0);if(_309!="Z"){_308=((_304[8]||0)*60)+(Number(_304[9])||0);if(_309!="-"){_308*=-1;}}if(_309){_308-=_305.getTimezoneOffset();}if(_308){_305.setTime(_305.getTime()+_308*60000);}}return _305;};dojo.date.stamp.toISOString=function(_30a,_30b){var _30c=function(n){return (n<10)?"0"+n:n;};_30b=_30b||{};var _30d=[],_30e=_30b.zulu?"getUTC":"get",date="";if(_30b.selector!="time"){var year=_30a[_30e+"FullYear"]();date=["0000".substr((year+"").length)+year,_30c(_30a[_30e+"Month"]()+1),_30c(_30a[_30e+"Date"]())].join("-");}_30d.push(date);if(_30b.selector!="date"){var time=[_30c(_30a[_30e+"Hours"]()),_30c(_30a[_30e+"Minutes"]()),_30c(_30a[_30e+"Seconds"]())].join(":");var _30f=_30a[_30e+"Milliseconds"]();if(_30b.milliseconds){time+="."+(_30f<100?"0":"")+_30c(_30f);}if(_30b.zulu){time+="Z";}else{if(_30b.selector!="time"){var _310=_30a.getTimezoneOffset();var _311=Math.abs(_310);time+=(_310>0?"-":"+")+_30c(Math.floor(_311/60))+":"+_30c(_311%60);}}_30d.push(time);}return _30d.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");new Date("X");dojo.parser=new function(){var d=dojo;this._attrName=d._scopeName+"Type";this._query="["+this._attrName+"]";function _312(_313){if(d.isString(_313)){return "string";}if(typeof _313=="number"){return "number";}if(typeof _313=="boolean"){return "boolean";}if(d.isFunction(_313)){return "function";}if(d.isArray(_313)){return "array";}if(_313 instanceof Date){return "date";}if(_313 instanceof d._Url){return "url";}return "object";};function _314(_315,type){switch(type){case "string":return _315;case "number":return _315.length?Number(_315):NaN;case "boolean":return typeof _315=="boolean"?_315:!(_315.toLowerCase()=="false");case "function":if(d.isFunction(_315)){_315=_315.toString();_315=d.trim(_315.substring(_315.indexOf("{")+1,_315.length-1));}try{if(_315===""||_315.search(/[^\w\.]+/i)!=-1){return new Function(_315);}else{return d.getObject(_315,false)||new Function(_315);}}catch(e){return new Function();}case "array":return _315?_315.split(/\s*,\s*/):[];case "date":switch(_315){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_315);}case "url":return d.baseUrl+_315;default:return d.fromJson(_315);}};var _316={};dojo.connect(dojo,"extend",function(){_316={};});function _317(_318){if(!_316[_318]){var cls=d.getObject(_318);if(!cls){return null;}var _319=cls.prototype;var _31a={},_31b={};for(var name in _319){if(name.charAt(0)=="_"){continue;}if(name in _31b){continue;}var _31c=_319[name];_31a[name]=_312(_31c);}_316[_318]={cls:cls,params:_31a};}return _316[_318];};this._functionFromScript=function(_31d){var _31e="";var _31f="";var _320=_31d.getAttribute("args");if(_320){d.forEach(_320.split(/\s*,\s*/),function(part,idx){_31e+="var "+part+" = arguments["+idx+"]; ";});}var _321=_31d.getAttribute("with");if(_321&&_321.length){d.forEach(_321.split(/\s*,\s*/),function(part){_31e+="with("+part+"){";_31f+="}";});}return new Function(_31e+_31d.innerHTML+_31f);};this.instantiate=function(_322,_323,args){var _324=[],dp=dojo.parser;_323=_323||{};args=args||{};d.forEach(_322,function(obj){if(!obj){return;}var node,type,_325,_326,_327;if(obj.node){node=obj.node;type=obj.type;_325=obj.clsInfo||(type&&_317(type));_326=_325&&_325.cls;_327=obj.scripts;}else{node=obj;type=dp._attrName in _323?_323[dp._attrName]:node.getAttribute(dp._attrName);_325=type&&_317(type);_326=_325&&_325.cls;_327=(_326&&(_326._noScript||_326.prototype._noScript)?[]:d.query("> script[type^='dojo/']",node));}if(!_325){throw new Error("Could not load class '"+type);}var _328={},_329=node.attributes;if(args.defaults){dojo.mixin(_328,args.defaults);}if(obj.inherited){dojo.mixin(_328,obj.inherited);}for(var name in _325.params){var item=name in _323?{value:_323[name],specified:true}:_329.getNamedItem(name);if(!item||(!item.specified&&(!dojo.isIE||name.toLowerCase()!="value"))){continue;}var _32a=item.value;switch(name){case "class":_32a="className" in _323?_323.className:node.className;break;case "style":_32a="style" in _323?_323.style:(node.style&&node.style.cssText);}var _32b=_325.params[name];if(typeof _32a=="string"){_328[name]=_314(_32a,_32b);}else{_328[name]=_32a;}}var _32c=[],_32d=[];d.forEach(_327,function(_32e){node.removeChild(_32e);var _32f=_32e.getAttribute("event"),type=_32e.getAttribute("type"),nf=d.parser._functionFromScript(_32e);if(_32f){if(type=="dojo/connect"){_32c.push({event:_32f,func:nf});}else{_328[_32f]=nf;}}else{_32d.push(nf);}});var _330=_326.markupFactory||_326.prototype&&_326.prototype.markupFactory;var _331=_330?_330(_328,node,_326):new _326(_328,node);_324.push(_331);var _332=node.getAttribute("jsId");if(_332){d.setObject(_332,_331);}d.forEach(_32c,function(_333){d.connect(_331,_333.event,null,_333.func);});d.forEach(_32d,function(func){func.call(_331);});});if(!_323._started){d.forEach(_324,function(_334){if(!args.noStart&&_334&&_334.startup&&!_334._started&&(!_334.getParent||!_334.getParent())){_334.startup();}});}return _324;};this.parse=function(_335,args){var root;if(!args&&_335&&_335.rootNode){args=_335;root=args.rootNode;}else{root=_335;}var _336=this._attrName;function scan(_337,list){var _338=dojo.clone(_337.inherited);dojo.forEach(["dir","lang"],function(name){var val=_337.node.getAttribute(name);if(val){_338[name]=val;}});var _339=_337.scripts;var _33a=!_337.clsInfo||!_337.clsInfo.cls.prototype.stopParser;for(var _33b=_337.node.firstChild;_33b;_33b=_33b.nextSibling){if(_33b.nodeType==1){var type=_33a&&_33b.getAttribute(_336);if(type){var _33c={"type":type,clsInfo:_317(type),node:_33b,scripts:[],inherited:_338};list.push(_33c);scan(_33c,list);}else{if(_339&&_33b.nodeName.toLowerCase()=="script"){type=_33b.getAttribute("type");if(type&&/^dojo\//i.test(type)){_339.push(_33b);}}else{if(_33a){scan({node:_33b,inherited:_338},list);}}}}}};var list=[];scan({node:root?dojo.byId(root):dojo.body(),inherited:(args&&args.inherited)||{dir:dojo._isBodyLtr()?"ltr":"rtl"}},list);return this.instantiate(list,null,args);};}();(function(){var _33d=function(){if(dojo.config.parseOnLoad){dojo.parser.parse();}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,_33d);}else{dojo._loaders.unshift(_33d);}})();}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");(function(){var _33e={};dojo.cache=function(_33f,url,_340){if(typeof _33f=="string"){var _341=dojo.moduleUrl(_33f,url);}else{_341=_33f;_340=url;}var key=_341.toString();var val=_340;if(_340!=undefined&&!dojo.isString(_340)){val=("value" in _340?_340.value:undefined);}var _342=_340&&_340.sanitize?true:false;if(typeof val=="string"){val=_33e[key]=_342?dojo.cache._sanitize(val):val;}else{if(val===null){delete _33e[key];}else{if(!(key in _33e)){val=dojo._getText(key);_33e[key]=_342?dojo.cache._sanitize(val):val;}val=_33e[key];}}return val;};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _343=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_343){val=_343[1];}}else{val="";}return val;};})();}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];},_stringRepl:function(tmpl){var _344=this.declaredClass,_345=this;return dojo.string.substitute(tmpl,this,function(_346,key){if(key.charAt(0)=="!"){_346=dojo.getObject(key.substr(1),false,_345);}if(typeof _346=="undefined"){throw new Error(_344+" template:"+key);}if(_346==null){return "";}return key.charAt(0)=="!"?_346:_346.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _347=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_347)){node=dojo._toDom(this._stringRepl(_347));if(node.nodeType!=1){throw new Error("Invalid template: "+_347);}}else{node=_347.cloneNode(true);}this.domNode=node;this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _348=dojo.parser,qry,attr;if(_348._query!="[dojoType]"){qry=_348._query;attr=_348._attrName;_348._query="[dojoType]";_348._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_348._query=qry;_348._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_349){var dest=this.containerNode;if(_349&&dest){while(_349.hasChildNodes()){dest.appendChild(_349.firstChild);}}},_attachTemplateNodes:function(_34a,_34b){_34b=_34b||function(n,p){return n.getAttribute(p);};var _34c=dojo.isArray(_34a)?_34a:(_34a.all||_34a.getElementsByTagName("*"));var x=dojo.isArray(_34a)?0:-1;for(;x<_34c.length;x++){var _34d=(x==-1)?_34a:_34c[x];if(this.widgetsInTemplate&&_34b(_34d,"dojoType")){continue;}var _34e=_34b(_34d,"dojoAttachPoint");if(_34e){var _34f,_350=_34e.split(/\s*,\s*/);while((_34f=_350.shift())){if(dojo.isArray(this[_34f])){this[_34f].push(_34d);}else{this[_34f]=_34d;}this._attachPoints.push(_34f);}}var _351=_34b(_34d,"dojoAttachEvent");if(_351){var _352,_353=_351.split(/\s*,\s*/);var trim=dojo.trim;while((_352=_353.shift())){if(_352){var _354=null;if(_352.indexOf(":")!=-1){var _355=_352.split(":");_352=trim(_355[0]);_354=trim(_355[1]);}else{_352=trim(_352);}if(!_354){_354=_352;}this.connect(_34d,_352,_354);}}}var role=_34b(_34d,"waiRole");if(role){dijit.setWaiRole(_34d,role);}var _356=_34b(_34d,"waiState");if(_356){dojo.forEach(_356.split(/\s*,\s*/),function(_357){if(_357.indexOf("-")!=-1){var pair=_357.split("-");dijit.setWaiState(_34d,pair[0],pair[1]);}});}}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){dojo.forEach(this._attachPoints,function(_358){delete this[_358];},this);this._attachPoints=[];this.inherited(arguments);}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_359,_35a,_35b){var _35c=dijit._Templated._templateCache;var key=_35a||_359;var _35d=_35c[key];if(_35d){try{if(!_35d.ownerDocument||_35d.ownerDocument==dojo.doc){return _35d;}}catch(e){}dojo.destroy(_35d);}if(!_35a){_35a=dojo.cache(_359,{sanitize:true});}_35a=dojo.string.trim(_35a);if(_35b||_35a.match(/\$\{([^\}]+)\}/g)){return (_35c[key]=_35a);}else{var node=dojo._toDom(_35a);if(node.nodeType!=1){throw new Error("Invalid template: "+_35a);}return (_35c[key]=node);}};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _35e=dijit._Templated._templateCache;for(var key in _35e){var _35f=_35e[key];if(typeof _35f=="object"){dojo.destroy(_35f);}delete _35e[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["dojox.dtl._Templated"]){dojo._hasResource["dojox.dtl._Templated"]=true;dojo.provide("dojox.dtl._Templated");dojo.declare("dojox.dtl._Templated",dijit._Templated,{_dijitTemplateCompat:false,buildRendering:function(){var node;if(this.domNode&&!this._template){return;}if(!this._template){var t=this.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);if(t instanceof dojox.dtl.Template){this._template=t;}else{node=t;}}if(!node){var _360=new dojox.dtl._Context(this);if(!this._created){delete _360._getter;}var _361=dojo._toDom(this._template.render(_360));if(_361.nodeType!==1&&_361.nodeType!==3){for(var i=0,l=_361.childNodes.length;i<l;++i){node=_361.childNodes[i];if(node.nodeType==1){break;}}}else{node=_361;}}this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _362=dojo.parser,qry,attr;if(_362._query!="[dojoType]"){qry=_362._query;attr=_362._attrName;_362._query="[dojoType]";_362._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_362._query=qry;_362._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}if(this.domNode){dojo.place(node,this.domNode,"before");this.destroyDescendants();dojo.destroy(this.domNode);}this.domNode=node;this._fillContent(this.srcNodeRef);},_templateCache:{},getCachedTemplate:function(_363,_364,_365){var _366=this._templateCache;var key=_364||_363;if(_366[key]){return _366[key];}_364=dojo.string.trim(_364||dojo.cache(_363,{sanitize:true}));if(this._dijitTemplateCompat&&(_365||_364.match(/\$\{([^\}]+)\}/g))){_364=this._stringRepl(_364);}if(_365||!_364.match(/\{[{%]([^\}]+)[%}]\}/g)){return _366[key]=dojo._toDom(_364);}else{return _366[key]=new dojox.dtl.Template(_364);}},render:function(){this.buildRendering();},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});}if(!dojo._hasResource["agi.widget._TemplatedWidget"]){dojo._hasResource["agi.widget._TemplatedWidget"]=true;dojo.provide("agi.widget._TemplatedWidget");dojo.declare("agi.widget._TemplatedWidget",[dijit._Widget,dojox.dtl._Templated],{});}if(!dojo._hasResource["agi.requester"]){dojo._hasResource["agi.requester"]=true;dojo.provide("agi.requester");agi.requester.Requester=function(url,_367,_368,_369,_36a){var _36b=this;var req=null;this.async=_368;this.method=_367;this.url=url;this.showbusy=_369;this.in_process=false;this.handleas=_36a?_36a:"text";this.get_millisecond_query=function(){var _36c=new Date();var ms=_36c.getTime();return "&ajax_requester_ms="+ms;};this.sendRequest=function(_36d){var _36e={url:this.url,sync:!this.async,content:_36d?_36d:{},preventCache:_36d?true:false,handleAs:this.handleas,load:_36b.processLoad,error:_36b.processError};if(this.showbusy){document.body.style.cursor="wait";}this.in_process=true;if(this.method.toUpperCase()=="POST"){dojo.xhrPost(_36e);}else{dojo.xhrGet(_36e);}};this.processLoad=function(_36f,_370){_36f=_36b.processAlways(_36f,_370);if(_370.xhr.getResponseHeader("Kaboom")){if(_370.xhrgetResponseHeader("Kaboom").toLowerCase()=="true"){if(_36b.onerror){_36b.onerror(_36f,_370);}}}else{if(_36b.onsuccess){_36b.onsuccess(_36f,_370);}}return _36f;};this.processError=function(_371,_372){_371=_36b.processAlways(_371,_372);if(_36b.onerror){_36b.onerror(_371,_372);}return _371;};this.processAlways=function(_373,_374){_36b.in_process=false;if(_36b.showbusy){document.body.style.cursor="auto";}if(!_373){_373="";}try{_373=_373.replace("<!--this page was compressed by your friendly neighborhood pydriver-->","");}catch(e){}return _373;};this.formToQuery=function(_375){var _376=dojo.formToObject(_375);return _376;};};var script_fragment="<script[^>]*>([\\s\\S]*?)</script>";agi.requester.stripScripts=function(_377){return _377.replace(new RegExp(script_fragment,"img"),"");};agi.requester.extractScripts=function(_378){var _379=new RegExp(script_fragment,"img");var _37a=new RegExp(script_fragment,"im");var _37b=_378.match(_379);var _37c=[];if(_37b){for(var i=0;i<_37b.length;i++){if(_37b[i].indexOf("agi-lb-exec")!=-1){_37c.push(_37b[i].match(_37a)[1]);}}}return _37c;};agi.requester.evalScripts=function(_37d){var _37e=agi.requester.extractScripts(_37d);for(i=0;i<_37e.length;i++){try{eval(_37e[i]);}catch(e){}}};agi.requester.checkAll=function(_37f,_380){form=dojo.byId(_37f);for(i=0;i<form.elements.length;i++){if(form.elements[i].type=="checkbox"){form.elements[i].checked=_380;}}};agi.requester.countChecked=function(_381){var form=dojo.byId(_381);var _382=0;for(i=0;i<form.elements.length;i++){if(form.elements[i].type=="checkbox"&form.elements[i].checked){_382++;}}return _382;};agi.requester.selectAll=function(_383,_384){if(_384==undefined){var _385=true;}else{var _385=_384;}var list=dojo.byId(_383);var _386=document.getElementsByName("event_id");for(i=0;i<list.childNodes.length;i++){if(list.childNodes[i].nodeName=="LI"){for(j=0;j<list.childNodes[i].childNodes.length;j++){if(list.childNodes[i].childNodes[j].type=="checkbox"){list.childNodes[i].childNodes[j].checked=_385;len=_386.length;for(n=0;n<len;n++){if((_386[n].value)==(list.childNodes[i].childNodes[j].value)){_386[n].checked=_385;}}}}}}};agi.requester.selectEqual=function(_387){var _388=document.getElementsByName(_387.name);for(i=0;i<_388.length;i++){if(_387.form.elements[i].value==_387.value){_387.form.elements[i].checked=_387.checked;}}};agi.requester.fixurl=function(url){if(url.indexOf("http")!=0){var sep="";url.indexOf("/")==0?sep="":sep="/";url=agi.requester.ajaxhost()+sep+url;}return url;};agi.requester.ajaxhost=function(){return document.location.protocol+"//"+document.location.hostname;};}if(!dojo._hasResource["agi.widget.Lightbox"]){dojo._hasResource["agi.widget.Lightbox"]=true;dojo.provide("agi.widget.Lightbox");dojo.declare("agi.widget.Lightbox",[agi.classes.Identified,agi.widget._TemplatedWidget],{url:null,contents:null,node:null,templatePath:null,left:null,top:null,height:null,width:null,position:"absolute",relativeTo:null,showloader:true,loaderSrc:imghost+"/ag/reminders/loader.swf",loaderId:"agi-lightboxloader",loaderHeight:120,loaderWidth:120,overlayId:"agi-overlay",showoverlay:true,lightboxId:"agi-lightbox",noprintClass:"agi-noprint",timeout:60000,loadnow:true,allowclick:false,closeKey:null,overflow:"auto",overlayZindex:"999",containerZindex:"1000",loaderZindex:"250",_defaultTop:20,_ready:false,_reset:false,_showing:false,_bgIframe:null,_keypressListener:null,_hideSignal:"ag/Lightbox/hide",_resizeSignal:"ag/Lightbox/resize",constructor:function(_389){_389=_389||{};dojo.mixin(this,_389);this._checkPositioning();},uninitialize:function(){dojo._destroyElement(this.loader);dojo._destroyElement(this.lightbox);if(this.overlay){dojo._destroyElement(this.overlay);}if(this._bgIframe){this._bgIframe.destroy();this._bgIframe=null;}},_checkPositioning:function(){if(this.position=="relative"){if(!this.relativeTo){throw (this+" needs a relativeTo when positioning relatively");}if(this.left==null){this.left=0;}if(this.top==null){this.top=0;}var pos=dojo.coords(this.relativeTo);this.left+=pos.x;this.top+=pos.y;}else{if(this.position=="user"){if(this.top==null||this.left==null){throw (this+" needs 'left' and 'top' defined when using user-defined positioning.");}}else{if(this.top==null){this.top=this._defaultTop;}}}},buildRendering:function(){if(this.templatePath||this.templateString){this.inherited(arguments);}this.overlay=this._createOverlay();this.lightbox=this._createLightbox(this.overlay);this.loader=this._createLoader();},postCreate:function(){this.inherited(arguments);dojo.subscribe(this._hideSignal,dojo.hitch(this,this.hide));dojo.subscribe(this._resizeSignal,dojo.hitch(this,this._resizeOverlay));if(this.loadnow){this._loadContent();}},_createOverlay:function(){var body=dojo.body();var _38a=this.overlayId;var _38b=dojo.byId(_38a);if(!_38b){_38b=document.createElement("div");_38b.setAttribute("id",_38a);dojo.addClass(_38b,this.noprintClass);var _38c=this._pageSize();dojo.style(_38b,{display:"none",position:"absolute",top:"0",left:"0",zIndex:this.overlayZindex,width:"100%",height:_38c[1]+"px"});body.insertBefore(_38b,body.firstChild);}try{filter=dojo.style(_38b,"filter");if(filter&&dojo.isIE){if(filter.indexOf(imghost)==-1){filter=filter.replace("/agbeta",imghost+"/agbeta");dojo.style(_38b,"filter",filter);}}}catch(e){}return _38b;},_createLightbox:function(_38d){var body=dojo.body();var _38e=dojo.byId(this.lightboxId);if(!_38e){_38e=document.createElement("div");_38e.setAttribute("id",this.lightboxId);dojo.style(_38e,{display:"none",position:"absolute",zIndex:this.containerZindex});body.insertBefore(_38e,_38d.nextSibling);}_38e.innerHTML="";return _38e;},_createLoader:function(){var body=dojo.body();var _38f=dojo.byId("loadingImage");if(!_38f){if(this.loaderSrc.endswith(".swf")){_38f=this._createLoaderSwf(this.loaderSrc);}else{_38f=this._createLoaderImage(this.loaderSrc);}dojo.style(_38f,{display:"none",visibility:"hidden",position:"absolute",zIndex:this.loaderZindex});body.insertBefore(_38f,body.firstChild);}return _38f;},_createLoaderSwf:function(src){var _390=document.createElement("embed");_390.setAttribute("id",this.loaderId);_390.setAttribute("name","FlashProduct");_390.setAttribute("src",src);_390.setAttribute("swLiveConnect",true);_390.setAttribute("width",this.loaderWidth);_390.setAttribute("height",this.loaderHeight);_390.setAttribute("scale","noborder");_390.setAttribute("quality","high");_390.setAttribute("type","application/x-shockwave-flash");_390.setAttribute("pluginspace","http://www.macromedia.com/go/getflashplayer");_390.setAttribute("wmode","transparent");return _390;},_createLoaderImage:function(src){var _391=document.createElement("img");_391.setAttribute("id",this.loaderId);_391.setAttribute("src",src);_391.setAttribute("width",this.loaderWidth);_391.setAttribute("height",this.loaderHeight);return _391;},_loadContent:function(){if(this.domNode&&!this.node){this.node=this.domNode;}if(this.loader&&this.showloader){var _392=this._pageSize();var _393=this._pageScroll();var _394=_393[1]+((_392[3]-35-this.loader.height)/2);var _395=((_392[0]-20-this.loader.width)/2);dojo.style(this.loader,{display:"block",visibility:"visible",top:_394+"px",left:_395+"px"});}if(this.overlay&&this.showoverlay){dojo.style(this.overlay,{display:"block",visibility:"visible"});}if(this.url){dojo.xhrGet({url:this.url,handleAs:"text",timeout:this.timeout,load:dojo.hitch(this,this._onSuccess),error:dojo.hitch(this,this._onError)});}else{if(this.contents){this.lightbox.innerHTML=agi.requester.stripScripts(this.contents);this._ready=true;this.show();agi.requester.evalScripts(this.contents);this._enableOverlayClick();}else{if(this.node){var node=dojo.byId(this.node);this.lightbox.appendChild(dojo.byId(node));dojo.style(node,"display","block");this._ready=true;this.show();this._enableOverlayClick();}}}},_onSuccess:function(_396,_397){this.lightbox.innerHTML=agi.requester.stripScripts(_396);this._ready=true;this.show();agi.requester.evalScripts(_396);this._enableOverlayClick();return _396;},_onError:function(_398,_399){this.hide();return _398;},show:function(_39a){if(_39a){this._checkPositioning();}this._showPhase0();this._showPhase1();this._showPhase2();this.postShow();},_showPhase0:function(){if(!this._ready){return this._loadContent();}if(this._reset){this._checkPositioning();this._reset=false;}if(this.contents){this.lightbox.innerHTML=this.contents;}dojo.style(this.lightbox,"overflow",this.overflow);if(this.loader){dojo.style(this.loader,{display:"none",visibility:"hidden"});}if(this.overlay&&this.showoverlay){dojo.style(this.overlay,{display:"block",visibility:"visible"});}},_showPhase1:function(){var _39b=this._pageScroll();var _39c=this.top+_39b[1];var _39d={left:"-9999px",top:_39c+"px",visibility:"visible",display:"block"};if(this.height){_39d.height=this.height+"px";}if(this.width){_39d.width=this.width+"px";}dojo.style(this.lightbox,_39d);},_showPhase2:function(){var _39e=this._pageSize();if(this.left==null){this.left=((_39e[0]-this.lightbox.offsetWidth)/2);}var _39f={left:this.left+"px"};dojo.style(this.lightbox,_39f);this._resizeOverlay();this._enableKeypressListener();if(!this._bgIframe){var _3a0=this.lightbox;if(this.overlay&&this.showoverlay){_3a0=this.overlay;}this._bgIframe=new dijit.BackgroundIframe(_3a0);}this._showing=true;},postShow:function(){return;},hide:function(_3a1){if(!this._showing){return;}if(this.overlay){this.overlay.onclick=function(){return false;};dojo.style(this.overlay,{display:"none",visibility:"hidden"});}if(this.loader){dojo.style(this.loader,{display:"none",visibility:"hidden"});}if(this.lightbox){dojo.style(this.lightbox,{display:"none",visibility:"hidden"});if(_3a1){this.reset();}else{this.contents=this.lightbox.innerHTML;}}this._disableKeypressListener();this._showing=false;},reset:function(){if(this.node){dojo.style(this.node,{display:"none"});dojo.place(this.node,dojo.body(),"last");}this.lightbox.innerHTML="";this.contents=null;this.url=null;this.domNode=null;this.top=null;this.left=null;this._ready=false;this._reset=true;},_enableOverlayClick:function(){if(this.overlay&&this.allowclick){this._overlayClick=dojo.connect(this.overlay,"onclick",dojo.hitch(this,this.hide));}},_disableOverlayClick:function(){if(this._overlayClick){dojo.disconnect(this._overlayClick);this._overlayClick=null;}},_enableKeypressListener:function(){if(this.closeKey&&!this._keypressListener){this._keypressListener=dojo.connect(document,"keypress",dojo.hitch(this,this._onKeypress));}},_disableKeypressListener:function(){if(this._keypressListener){dojo.disconnect(this._keypressListener);this._keypressListener=null;}},_onKeypress:function(evt){if(evt.charOrCode==this.closeKey){this.hide();}},_resizeOverlay:function(){if(this.overlay){var _3a2=this._pageSize();dojo.style(this.overlay,"height",_3a2[1]+"px");}},_pageScroll:function(){var _3a3=0;if(self.pageYOffset){_3a3=self.pageYOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){_3a3=document.documentElement.scrollTop;}else{if(document.body){_3a3=document.body.scrollTop;}}}var _3a4=[null,_3a3];return _3a4;},_pageSize:function(){var _3a5,_3a6;if(window.innerHeight&&window.scrollMaxY){_3a5=document.body.scrollWidth;_3a6=window.innerHeight+window.scrollMaxY;}else{if(document.body.scrollHeight>document.body.offsetHeight){_3a5=document.body.scrollWidth;_3a6=document.body.scrollHeight;}else{_3a5=document.body.offsetWidth;_3a6=document.body.offsetHeight;}}var _3a7,_3a8;if(self.innerHeight){_3a7=self.innerWidth;_3a8=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){_3a7=document.documentElement.clientWidth;_3a8=document.documentElement.clientHeight;}else{if(document.body){_3a7=document.body.clientWidth;_3a8=document.body.clientHeight;}}}var _3a9,_3aa;if(_3a6<_3a8){_3aa=_3a8;}else{_3aa=_3a6;}if(_3a5<_3a7){_3a9=_3a7;}else{_3a9=_3a5;}var _3ab=[_3a9,_3aa,_3a7,_3a8];return _3ab;}});}if(!dojo._hasResource["agi.widget.focusform"]){dojo._hasResource["agi.widget.focusform"]=true;dojo.provide("agi.widget.focusform");dojo.declare("agi.widget.focusform.FocusForm",[agi.classes.Identified],{orig_form_values:{},on_cls:"activeinput",off_cls:"lazyinput",form:null,form_id:null,handles:null,constructor:function(_3ac,_3ad,_3ae){this.handles=[];this.form_id=_3ac;this.form=dojo.byId(_3ac);this.on_cls=_3ae||this.on_cls;this.off_cls=_3ad||this.off_cls;this.setup_onfocus();this.setup_onsubmit();dojo.connect(this.form,"onreset",this,this.reset_form);},wake_input:function(ev){var node=ev.target;if(node.className.indexOf(this.off_cls)>-1){node.value="";if(node.name.indexOf("password")>-1){if(dojo.isIE){var _3af=agi.dom.make_node("<input name=\""+node.name+"\" />",{"class":node.className,"name":node.name,"type":"password","id":node.id,"maxlength":"32"});}else{var _3af=agi.dom.make_node("input",{"class":node.className,"name":node.name,"type":"password","id":node.id,"maxlength":"32"});}node=agi.dom.swap_node(node,_3af);this.connect_password_keypress(node);node.focus();node.focus();_3af.focus();}node.className=node.className.replace(/lazyinput/,this.on_cls);}},reset_input:function(node){if(node.className.indexOf(this.on_cls)>-1){node.className=node.className.replace(/activeinput/,this.off_cls);if(node.name.indexOf("password")>-1){if(dojo.isIE){var _3b0=agi.dom.make_node("<input name=\""+node.name+"\" />",{"class":node.className,"name":node.name,"type":"text","id":node.id});}else{var _3b0=agi.dom.make_node("input",{"class":node.className,"name":node.name,"type":"text","id":node.id});}node=agi.dom.swap_node(node,_3b0);}try{node.value=this.orig_form_values[node.name];}catch(e){node.value="Couldn't find original value";}}},reset_form:function(){this.form=dojo.byId(this.form_id);dojo.forEach(this.form.elements,dojo.hitch(this,function(node){this.reset_input(node);}));dojo.forEach(this.handles,function(_3b1){dojo.disconnect(_3b1);});this.handles=[];this.setup_onfocus();},setup_onfocus:function(){dojo.forEach(this.form.elements,dojo.hitch(this,function(node){this.orig_form_values[node.name]=node.value;if(node.type=="textarea"||node.type=="text"||node.type=="select-one"){this.handles.push(dojo.connect(node,"onfocus",dojo.hitch(this,this.wake_input)));}}));},setup_onsubmit:function(){this.handles.push(dojo.connect(this.form,"onsubmit",function(evt){dojo.publish("ag/widget/focusform/submit",[evt]);}));},connect_password_keypress:function(node){dojo.connect(node,"onkeypress",this,this.submit_on_keypress);},submit_on_keypress:function(evt){if(evt.keyCode==dojo.keys.ENTER){dojo.stopEvent(evt);dojo.publish("ag/widget/focusform/submitkey",[evt]);this.form.submit();}}});agi.widget.focusform.connect_password_keypress=function(node,_3b2){dojo.connect(node,"onkeypress",function(e){if(e.keyCode==13){e.preventDefault();agi.widget.focusform.submit_on_keypress(_3b2);}});};agi.widget.focusform.submit_on_keypress=function(_3b3){dojo.byId(_3b3).submit();};}if(!dojo._hasResource["agi.widget.findit"]){dojo._hasResource["agi.widget.findit"]=true;dojo.provide("agi.widget.findit");agi.widget.findit.FinditLightbox=function(_3b4,_3b5){this.hidden_node_id=_3b4;this.bad_form_id="findit_magic";this.form_id=_3b5;this.ff=undefined;this.lightbox=null;this.show=dojo.hitch(this,function(){if(this.lightbox){this.lightbox.show();}else{var _3b6=dojo.byId(this.hidden_node_id);this.lightbox=new agi.widget.Lightbox({node:_3b6,lightboxId:"lightbox",loaderId:"loadingImage",overlayId:"agi-overlay"});if(dojo.byId(this.bad_form_id)){dojo.byId(this.bad_form_id).id=this.form_id;}this.ff=new agi.widget.focusform.FocusForm(this.form_id);}return false;});this.hide=dojo.hitch(this,function(){if(this.ff){this.ff.reset_form();}this.lightbox.hide();return false;});};}if(!dojo._hasResource["ag.widget.findit"]){dojo._hasResource["ag.widget.findit"]=true;dojo.provide("ag.widget.findit");ag.widget.findit=agi.widget.findit;}if(!dojo._hasResource["ag.widget.Lightbox"]){dojo._hasResource["ag.widget.Lightbox"]=true;dojo.provide("ag.widget.Lightbox");ag.widget.Lightbox=agi.widget.Lightbox;}if(!dojo._hasResource["ag.widget.focusform"]){dojo._hasResource["ag.widget.focusform"]=true;dojo.provide("ag.widget.focusform");ag.widget.focusform=agi.widget.focusform;}if(!dojo._hasResource["ag.widget.signin"]){dojo._hasResource["ag.widget.signin"]=true;dojo.provide("ag.widget.signin");dojo.declare("ag.widget.signin.SignInLightbox",[agi.classes.Identified],{hidden_node_id:null,bad_form_id:"signin_magic",form_id:null,ff:null,lightbox:null,constructor:function(_3b7,_3b8){this.hidden_node_id=_3b7;this.form_id=_3b8;},show:function(){if(this.lightbox){this.lightbox.show();if(this.ff){this.ff.reset_form();}}else{var _3b9=dojo.byId(this.hidden_node_id);this.lightbox=new ag.widget.Lightbox({node:_3b9,lightboxId:"lightbox",loaderId:"loadingImage",overlayId:"agi-overlay"});if(dojo.byId(this.bad_form_id)){dojo.byId(this.bad_form_id).id=this.form_id;}this.ff=new ag.widget.focusform.FocusForm(this.form_id);try{agx.currentPage.controller.connectTempStorageSignin();}catch(e){}try{agx.currentPage.controller.connectPersStorageSignin();}catch(e){}}return false;},hide:function(){this.lightbox.hide();return false;}});}if(!dojo._hasResource["ag.widget.register"]){dojo._hasResource["ag.widget.register"]=true;dojo.provide("ag.widget.register");ag.widget.register.RegistrationTrigger=function(url,attr){var loc="/register/lb.pd";var _3ba={"width":440,"hideloading":true};if(url){loc=url;}if(attr){_3ba=attr;}this.lightbox=null;var _3bb=this;this.show=function(app,_3bc){var url=loc;if(app){url+="?app="+escape(app)+"&referer="+escape(_3bc);}if(this.lightbox){this.lightbox.show();}else{this.lightbox=new ag.widget.Lightbox({lightboxId:"lightbox",overlayId:"agi-overlay",url:url,width:440,showloader:false});}omniture.swap_vars_and_ping({"s_pageName":loc});};this.hide=function(){this.lightbox.hide();};};ag.widget.register.showCellInfo=function(btn){dojo.byId("cell_info").style.display="block";};ag.widget.register.hideCellInfo=function(btn){dojo.byId("cell_info").style.display="none";};}if(!dojo._hasResource["agi.widget.search"]){dojo._hasResource["agi.widget.search"]=true;dojo.provide("agi.widget.search");agi.widget.search.submit=function submitSearch(_3bd,_3be,_3bf){if((_3bd==undefined)||(_3bd=="")){_3bd="ag-searchtext";}if(_3be==undefined){_3be="ag-searcharea";}if(_3bf==undefined){_3bf="Enter Search Here";}var s=new agi.widget.search.searcher(_3bd,_3be,_3bf);return s.do_search();};agi.widget.search.searcher=function(_3c0,_3c1,_3c2){var _3c3=this;this.searchbox=dojo.byId(_3c0);this.searchpage=dojo.byId(_3c1).value;this.err_msg=_3c2;this.do_init=function(){this.attach_events();};this.do_onblur=function(){if(_3c3.searchbox.value==""){_3c3.searchbox.value=_3c3.err_msg;}};this.do_onfocus=function(){if(_3c3.searchbox.value==_3c3.err_msg){_3c3.searchbox.value="";}};this.attach_events=function(){this.searchbox.onblur=this.do_onblur;this.searchbox.onfocus=this.do_onfocus;};this.highlight_search_box=function(){this.searchbox.style.border="2px solid #ff0000";this.searchbox.style.background="#FFDDDD";this.searchbox.value=this.err_msg;this.searchbox.blur();};this.send_to_search_page=function(){var _3c4="";var _3c5=this.searchpage+"?strSearch="+escape(this.searchbox.value);if(dojo.byId("lpage")){_3c4=dojo.byId("lpage").value;_3c5=_3c5+"&lpage="+_3c4;}window.document.location.href=_3c5;};this.do_search=function(){try{if((this.searchbox.value.length<=0)||(this.searchbox.value==this.err_msg)){this.highlight_search_box();}else{this.send_to_search_page();}return false;}catch(e){return false;}};this.do_init();};agi.widget.search.submit_msn=function(_3c6){if(_3c6=="ag"){try{return agi.widget.search.submit("q");}catch(e){return false;}}else{if(_3c6=="msn"){try{document.forms["msn-search"].action="http://www.bing.com/results.aspx";document.forms["msn-search"].submit();}catch(e){return false;}}}};}if(!dojo._hasResource["ag.widget.search"]){dojo._hasResource["ag.widget.search"]=true;dojo.provide("ag.widget.search");ag.widget.search=agi.widget.search;}if(!dojo._hasResource["agi.go.photoworks"]){dojo._hasResource["agi.go.photoworks"]=true;dojo.provide("agi.go.photoworks");agi.go.photoworks.go=function(_3c7){this.partial_url=_3c7;this.email=null;this.ahost=null;this.site=null;this.go=function(){this.clean_url();this.init_environ();this.set_email();this.do_redirect();};this.init_environ=function(){this.ahost=window.location.protocol+"//"+window.location.host;this.environ=(this.ahost.indexOf("www")!=-1)?"www":"beta";this.site=(this.ahost.indexOf("msn")!=-1)?"AG_MSN":"AG";};this.set_email=function(){this.email=agi.cookie.AGCookie.getCookieValue("customer","email");if(!this.email){this.email="";}};this.clean_url=function(){var pu=this.partial_url;pu=pu.replace("^http://www.","");pu=pu.replace(/cb=[^&]*&*/,"");pu=pu.replace(/email=[^&]*&*/,"");this.partial_url=pu;};this.do_redirect=function(){var _3c8="http://"+this.environ+"."+this.partial_url;var _3c9="&cb=PW_"+this.site+"&email="+this.email;var _3ca=_3c8+_3c9;window.location.assign(_3ca);};this.go();};}if(!dojo._hasResource["ag.go.photoworks"]){dojo._hasResource["ag.go.photoworks"]=true;dojo.provide("ag.go.photoworks");ag.go.photoworks=agi.go.photoworks;}if(!dojo._hasResource["agi.go.join"]){dojo._hasResource["agi.go.join"]=true;dojo.provide("agi.go.join");agi.go.join.encodePurl=function(purl){if(purl.indexOf("%")==-1){purl=encodeURIComponent(purl);}return purl;};agi.go.join.decodePurl=function(purl){if(purl.indexOf("%")>-1){purl=decodeURIComponent(purl);}purl=purl.replace(/\/popup\/signin\.pd/,"/index.pd");purl=purl.replace(/\/popup\/signout\.pd/,"/index.pd");return purl;};agi.go.join.go=function(url,purl,_3cb,_3cc,_3cd,intX,intY,_3ce){if(!purl){purl=window.location.href;}if(!_3cb){_3cb="300";}if(!_3cc){_3cc="320";}if(!_3cd){_3cd="joinwin";}if(!intX){intX=0;}if(!intY){intY=0;}if(!_3ce){_3ce=false;}pageindex=-1;questionindex=-1;questionindex=url.indexOf("?");if(url.contains("offer.pd")&&!url.contains("isic_offer.pd")){pageindex=url.indexOf("offer.pd");}else{if(url.contains("announce.pd")){pageindex=url.indexOf("announce.pd");}else{if(url.contains("marketingpop.pd")){pageindex=url.indexOf("marketingpop.pd");}}}purl=agi.go.join.encodePurl(purl);var ma=dojo.byId("ma");var _3cf=dojo.byId("wcMusicOn");var mci=dojo.byId("musicChoiceIndex");if(ma&&ma.value!="nomusic"&&!purl.contains("&ma=")){purl+="|ma:"+ma.value.replace(".mp3","");}if(_3cf){purl+="|wcMusicOn:"+_3cf.value;}if(mci){purl+="|musicChoiceIndex:"+mci.value;}if(url.contains("subscribe.pd")){purl=purl.replace(/\%20/g,"perc20");purl=purl.replace(/\%26/g,"and");url+="&purl="+purl;_3ce=true;}else{if(url.contains("ostatus")){if(url.contains("subs.subsag")){purl=purl.replace(/\%20/g,"+");purl=purl.replace(/\%26/g,"and");}url=url.replace(/ostatus/,"purl="+purl+"&ostatus");}else{if(questionindex==-1){url+="?purl="+purl;}else{url+="&purl="+purl;}}}if(pageindex<questionindex&&!_3ce){var _3d0;if(intX||intY){strWinFeatures="resizable=no,screenX="+intX+",screenY="+intY+",left="+intX+",top="+intY+",scrollbars=no,width="+_3cb+",height="+_3cc;_3d0=window.open(url,_3cd,strWinFeatures);}else{strWinFeatures="resizable=no,scrollbars=no,width="+_3cb+",height="+_3cc;_3d0=window.open(url,_3cd,strWinFeatures);}_3d0.focus();}else{window.document.location.href=url;}};agi.go.join.openOfferPop=function(url,_3d1,_3d2){purl=window.location.href;if(!url){var url="/popup/offer.pd?";if(purl.contains("cnp")){url=url+"cnp=1";}}var _3d3=window.screen.availWidth;var _3d4=window.screen.availHeight;var intW=300;var intH=320;var intX=_3d3-intW;var intY=_3d4-intH;if(_3d1){var _3d5=document.cookie;var pos=_3d5.indexOf(_3d1);if(pos==-1){SECONDS_PER_DAY=86400;myMinTimeOut=SECONDS_PER_DAY*_3d2;myDate=new Date();myDate.setTime(myDate.getTime()+(myMinTimeOut*1000));document.cookie=_3d1+"=true; expires="+myDate.toGMTString();agi.go.join.go(url,0,0,0,0,intX,0);}}else{agi.go.join.go(url,0,0,0,0,intX,0);}};}if(!dojo._hasResource["ag.go.join"]){dojo._hasResource["ag.go.join"]=true;dojo.provide("ag.go.join");ag.go.join=agi.go.join;}if(!dojo._hasResource["agi.go.popup"]){dojo._hasResource["agi.go.popup"]=true;dojo.provide("agi.go.popup");var glbStdFeatures="width=400,height=320,resizable=yes,scrollbars=yes,toolbar=no";var glbStdFeaturesExcSize="resizable=yes,scrollbars=yes,toolbar=no";OpenNewWindow=function(url,_3d6,_3d7,bar){var _3d8=window.open(url,"descr","toolbar=no,location=no,directories=no,status=no,menubar=no,resizable=no,copyhistory=no,width="+_3d6+",height="+_3d7+",scrollbars="+bar);};agi.go.popup.open=function(_3d9){var _3da={url:"/",name:"agipopup",toolbar:"no",location:"no",directories:"no",status:"no",menubar:"no",resizable:"no",copyhistory:"no",width:300,height:300,scrollbars:"no"};dojo.mixin(_3da,_3d9);var _3db=window.open(_3da.url,_3da.name,"toolbar="+_3da.toolbar+","+"location="+_3da.location+","+"status="+_3da.status+","+"resizable="+_3da.resizable+","+"copyhistory="+_3da.copyhistory+","+"width="+_3da.width+","+"height="+_3da.height+","+"scrollbars="+_3da.scrollbars);return _3db;};agi.go.popup.closeAndGo=function(url){window.opener.location.href=url;window.close();};openAddressPop=function(){var _3dc=window.open(addURL,"AddressBook",glbStdFeatures);_3dc.focus();};openFavoritesPop=function(){var _3dd=window.open(favLink,"AddFavorite",glbStdFeatures);_3dd.focus();};openScrapbookPop=function(){var _3de=window.open(scrapLink,"SaveScrap",glbStdFeatures);_3de.focus();};openPrintPop=function(_3df){var _3e0=window.open(ahost+"/printpopup.pd?productNumber="+prodNumber,"Print","toolbar=no,scrollbar=no,width=400,height=400,resizable");};openViewPhotoPop=function(_3e1){var _3e2=window.open(ahost+"/viewphoto.pd?"+photoVars,"ViewPhoto","toolbar=no,scrollbar=no,width=400,height=400,resizable");};openInvVcsPop=function(){var _3e3=window.open("addtocalendar.pd?e="+eventNum+"&i="+itemNum+"&m="+memberNum,"Instructions","width=430,height=440,top=25,left=25,resizable=1,scrollbars=1");_3e3.focus();};function openAddressPop(){aWindow=window.open(addURL,"AddressBook",glbStdFeatures);aWindow.focus();};openAddressPop2=function(w,h){if(!w){w=562;}if(!h){h=460;}var _3e4="width="+w+",height="+h+",resizable=yes,scrollbars=yes,toolbar=no";aWindow=window.open(addURL,"AddressBook",_3e4);aWindow.focus();};openMessagePop=function(){aWindow=window.open(ahost+"/share/message.pd?path="+pathNumber,"SuggestedMessages",glbStdFeatures);aWindow.focus();};openMessagePop2=function(){aWindow=window.open(ahost+"/suggest/popup.pd?"+nav,"SuggestedMessages",glbStdFeatures);aWindow.focus();};openMessagePopBMA=function(){aWindow=window.open(ahost+"/share/message.pd?"+nav,"SuggestedMessages",glbStdFeatures);aWindow.focus();};openRecipePop=function(){rWindow=window.open(ahost+"/share/recipe.pd?path="+pathNumber+"&prodnum="+productNumber,"RecipeGreeting",glbStdFeatures);rWindow.focus();};openGiftPop=function(){giftWindow=window.open(partnerUrl,"GiftPickup",config="width=540,height=320,dependent=1,scrollbars=yes,resizable=yes");giftWindow.focus();};addAllFromQuickList=function(){intQLLength=document.orderForm.quicklist.length;for(i=0;i<intQLLength;i++){document.orderForm.quicklist.options[i].selected=true;}};}if(!dojo._hasResource["ag.go.popup"]){dojo._hasResource["ag.go.popup"]=true;dojo.provide("ag.go.popup");ag.go.popup=agi.go.popup;ag.go.popup.open=function(_3e5){var _3e6={url:"/",name:"agpopup",toolbar:"no",location:"no",directories:"no",status:"no",menubar:"no",resizable:"no",copyhistory:"no",width:300,height:300,scrollbars:"no"};dojo.mixin(_3e6,_3e5);var _3e7=window.open(_3e6.url,_3e6.name,"toolbar="+_3e6.toolbar+","+"location="+_3e6.location+","+"status="+_3e6.status+","+"resizable="+_3e6.resizable+","+"copyhistory="+_3e6.copyhistory+","+"width="+_3e6.width+","+"height="+_3e6.height+","+"scrollbars="+_3e6.scrollbars);return _3e7;};ag.go.popup.livechat=function(){dojo.publish("ag/livechat/show",[{"channel":"help"}]);return false;};ag.go.popup.newbrowser=function(_3e8){settings={url:"/",name:"agoutoffacebook",width:"1040",height:"700",scrollbars:"yes",resizable:"yes",fullscreen:"yes"};dojo.mixin(settings,_3e8);ag.go.popup.open(settings);return false;};ag.go.popup.feedback=function(_3e9){settings={url:ahost+"/feedback",name:"agfeedback",width:610,height:580,scrollbars:"yes"};dojo.mixin(settings,_3e9);ag.go.popup.open(settings);return false;};ag.go.popup.closeAndGo=function(url){window.opener.location.href=url;window.close();};}if(!dojo._hasResource["agi.popaway"]){dojo._hasResource["agi.popaway"]=true;dojo.provide("agi.popaway");agi.popaway.context={blnDoPopAway:true,BLN_POPAWAY:true,popURL:"",popH:420,popW:500,popCN:"",popCD:7,popPCT:100,popSCROLL:"yes"};agi.popaway.processOnUnload=function(){setTimeout("agi.popaway.delay()",500);if(agi.popaway.context.blnDoPopAway&&agi.popaway.context.BLN_POPAWAY){agi.popaway.popAway();}};agi.popaway.processOnClick=function(){agi.popaway.setDoPopAway(false);setTimeout("agi.popaway.delay()",500);};agi.popaway.setDoPopAway=function(_3ea){agi.popaway.context.blnDoPopAway=_3ea;};agi.popaway.delay=function(){return true;};agi.popaway.popAway=function(URL,_3eb,_3ec,_3ed,_3ee,_3ef,_3f0){if(URL){agi.popaway.context.popURL=URL;}if(_3eb){agi.popaway.context.popH=_3eb;}if(_3ec){agi.popaway.context.popW=_3ec;}if(_3ed){agi.popaway.context.popCN=_3ed;}if(_3ee!=undefined){agi.popaway.context.popCD=_3ee;}if(_3ef){agi.popaway.context.popPCT=_3ef;}if(_3f0){agi.popaway.context.popSCROLL=_3f0;}var _3f1=Math.round(Math.random()*100);var _3f2="resizeable=yes,scrollbars="+agi.popaway.context.popSCROLL+",width="+agi.popaway.context.popW+",height="+agi.popaway.context.popH;if(_3f1<=agi.popaway.context.popPCT){if(agi.popaway.context.popCN){var _3f3=document.cookie;var pos=_3f3.indexOf(agi.popaway.context.popCN);var _3f4="";if(pos==-1){if(agi.popaway.context.popCD){var _3f5=86400;var _3f6=_3f5*agi.popaway.context.popCD;var _3f7=new Date();_3f7.setTime(_3f7.getTime()+(_3f6*1000));_3f4=" expires="+_3f7.toGMTString()+";";}document.cookie=agi.popaway.context.popCN+"=true;"+_3f4+" path=/;";popAwayWin=window.open(agi.popaway.context.popURL,"popaway",_3f2);}}else{popAwayWin=window.open(agi.popaway.context.popURL,"popaway",_3f2);}}};agi.popaway.addHandlers=function(URL,_3f8,_3f9,_3fa,_3fb,_3fc,_3fd){if(URL){agi.popaway.context.popURL=URL;}if(_3f8){agi.popaway.context.popH=_3f8;}if(_3f9){agi.popaway.context.popW=_3f9;}if(_3fa){agi.popaway.context.popCN=_3fa;}if(_3fb!=undefined){agi.popaway.context.popCD=_3fb;}if(_3fc){agi.popaway.context.popPCT=_3fc;}if(_3fd){agi.popaway.context.popSCROLL=_3fd;}if(dojo.isIE){dojo.connect(document,"onclick",agi.popaway,"processOnClick");dojo.connect(document,"onkeydown",agi.popaway,"processOnClick");window.onunload=agi.popaway.processOnUnload;}else{dojo.connect(window,"onclick",agi.popaway,"processOnClick");dojo.connect(window,"onkeydown",agi.popaway,"processOnClick");dojo.addOnUnload(agi.popaway.processOnUnload);}};agi.popaway.checkReferrer=function(_3fe,URL,_3ff,_400,_401,_402){if(document.referrer.indexOf(_3fe)!=-1){agi.popaway.popAway(URL,_3ff,_400,_401,_402);}};}if(!dojo._hasResource["ag.popaway"]){dojo._hasResource["ag.popaway"]=true;dojo.provide("ag.popaway");ag.popaway=agi.popaway;}if(!dojo._hasResource["ag.widget.quickshop"]){dojo._hasResource["ag.widget.quickshop"]=true;dojo.provide("ag.widget.legacy_quickshop");if(!ag.widget.quickshop){ag.widget.quickshop={};}(function(){var qs=ag.widget.quickshop;var d=dojo;qs.toString=function(){return "AGLegacyQuickshop";};qs.Quickshop=function(id){this.toString=function(){return "[LegacyQuickshop]";};if(agx.currentPage.hasEndeca){return;}var me=this;this.container=d.byId(id);this.headings={"occasion":"I want to send a...","recipient":"To...","sentiment":"And I want it to be..."};this.defaults={};this.check_defaults=true;this.chosen_count=0;this.last_recipient="";this.last_sentiment="";this.do_onload=function(){d.connect(d.byId("qs_occasion"),"onchange",this,"do_onchange");d.connect(d.byId("qs_recipient"),"onchange",this,"do_onchange");d.connect(d.byId("qs_sentiment"),"onchange",this,"do_onchange");this.parse_url();var _403=d.query(".submit",this.container)[0];_403.onclick=function(){me.submit_search();};this.build_quickshop();this.check_defaults=false;};this.update_occasion=function(val){var _404=qs_data.occasions;for(o in _404){occasion=_404[o];if(occasion.name==val){this.occasion=occasion;var _405=occasion.recipients;var _406=occasion.sentiments;this.build_dropdown("sentiment",_406);this.build_dropdown("recipient",_405);this.build_dropdown("occasion",_404,val);return;}}};this.update_recipient=function(val){this.last_recipient=val;if(val==""){this.build_dropdown("sentiment",this.occasion.sentiments,this.last_sentiment);this.chosen_count--;}if(d.byId("qs_recipient").value!=val){d.byId("qs_recipient").value=val;}if(d.byId("qs_sentiment").value!=""&&this.chosen_count<3){this.chosen_count++;return;}for(r in this.occasion.recipients){recipient=this.occasion.recipients[r];if(recipient.name==val){var _407=recipient.sentiments;this.build_dropdown("sentiment",_407);}}this.chosen_count=2;};this.update_sentiment=function(val){this.last_sentiment=val;if(val==""){this.build_dropdown("recipient",this.occasion.recipients,this.last_recipient);this.chosen_count--;}if(d.byId("qs_sentiment").value!=val){d.byId("qs_sentiment").value=val;}if(d.byId("qs_recipient").value!=""&&this.chosen_count<3){this.chosen_count++;return;}for(s in this.occasion.sentiments){sentiment=this.occasion.sentiments[s];if(sentiment.name==val){var _408=sentiment.recipients;this.build_dropdown("recipient",_408);}}this.chosen_count=2;};this.build_quickshop=function(){this.occasions=qs_data.occasions;this.occasion=qs_data.occasions[1];if(this.defaults.occasion!=null){this.update_occasion(this.defaults.occasion);}else{this.update_occasion(qs_data.occasions[0].name);}if(this.defaults.recipient!=null){this.update_recipient(this.defaults.recipient);}if(this.defaults.sentiment!=null){this.update_sentiment(this.defaults.sentiment);}this.chosen_count=1;};this.build_dropdown=function(_409,unit,_40a,_40b){var _40c=d.byId("qs_"+_409);this.add_options(unit,_40c,_409,_40a,_40b,true);};this.add_options=function(unit,_40d,_40e,_40f,_410){this.remove_options(_40d);_410=_410===undefined?true:_410;var _411=0;if(_410&&(_40d.id=="qs_recipient"||_40d.id=="qs_sentiment")){var _412=_40e.charAt(0).toUpperCase()+_40e.substring(1);_412=_412.replace("Sentiment","Style");this._add_option("[Choose "+_412+"]","",_40d,_411);_411+=1;}for(var i=0;i<unit.length;i++){var _413=false;if(_40f!=undefined){_413=unit[i].name==_40f;}this._add_option(unit[i].name,unit[i].name,_40d,i+_411,_413);}};this._add_option=function(text,_414,_415,idx,_416){var _417=document.createElement("option");_417.text=text.toLowerCase();_417.value=_414;if(_415.id=="qs_occasion"){_417.text=_417.text+" ecard";}if(_415.options.add){_415.options.add(_417,idx);}else{_415.appendChild(_417);}if(_416){_415.options.selectedIndex=idx;}};this.remove_options=function(_418){for(var i=_418.options.length-1;i>=0;i--){_418.remove(i);}_418.options.length=0;};this.replace_options=function(){var _419=qs.get_group();var _41a=d.byId("qs_sentiment");qs.remove_options(_41a);var _41b=_419.sentiments;qs.add_options(_41b,_41a,"sentiment");_41a=d.byId("qs_recipient");qs.remove_options(_41a);var _41c=_419.recipients;qs.add_options(_41c,_41a,"recipient");};this.insert_select=function(_41d,_41e){var br=ag.dom.make_node("br",{});d.dom.prependChild(br,this.container);d.dom.prependChild(_41d,this.container);};this.do_onchange=function(e){var val=e.target.value;switch(e.target.id){case "qs_occasion":this.update_occasion(val);this.chosen_count=1;break;case "qs_sentiment":this.update_sentiment(val);break;case "qs_recipient":this.update_recipient(val);break;}};this.parse_url=function(){var _41f=window.location.search.replace("?","").split("&");for(var i=0;i<_41f.length;i++){if(_41f[i].startswith("qs_")){var nvp=_41f[i].split("=");if(nvp.length!=2){continue;}this.defaults[nvp[0].replace("qs_","")]=unescape(nvp[1]);}}};this.submit_search=function(){var ds=this.container.getElementsByTagName("select");var u=ahost+"/ecards/quickshop.pd?lpage=quickshop&";var p="";for(var i=0;i<ds.length;i++){var d=ds[i];var _420=d.options[d.selectedIndex].value;p+=_420?d.id+"="+escape(_420)+"&":"";}if(!p){alert("Please make a selection first.");return;}p=p.replace(/&$/,"");u=u+p;window.location=u;};this.do_onload();};})();}if(!dojo._hasResource["ag.pile.shim"]){dojo._hasResource["ag.pile.shim"]=true;dojo.provide("ag.pile.shim");ag.pile.shim.toString=function(){return "SHIMTASTIC";};email_focus=agi.permissions.email_focus;newsletter_signup=agi.permissions.newsletter_signup;debounce=ag.util.debounce;toggle_block=ag.util.toggle_block;addHiddenInputElement=ag.dom.addHiddenInputElement;turbowipe=ag.widget.wiper.turbowipe;dojo.addOnLoad(ag.widget.myagdrop.init);FinditLightbox=ag.widget.findit.FinditLightbox;SignInLightbox=ag.widget.signin.SignInLightbox;RegistrationTrigger=ag.widget.register.RegistrationTrigger;showCellInfo=ag.widget.register.showCellInfo;hideCellInfo=ag.widget.register.hideCellInfo;submitSearch=function(){if(agx.currentPage.controller){if(agx.currentPage.controller.searchSubmit){return agx.currentPage.controller.searchSubmit(arguments);}}else{return ag.widget.search.submit(arguments);}};submitMSNSearch=function(_421){if(agx.currentPage.controller){if(agx.currentPage.controller.searchSubmitMSN){return agx.currentPage.controller.searchSubmitMSN(_421);}}else{return ag.widget.search.submit_msn(arguments);}};agi_to_pw=ag.go.photoworks.go;openJoin=ag.go.join.go;processOnClick=ag.popaway.processOnClick;quickshop=ag.widget.quickshop.Quickshop;getCustomerAge=agi.cookie.getCustomerAge;getCustomerGender=agi.cookie.getCustomerGender;getCustomerEmail=agi.cookie.getCustomerEmail;getCustomerNumber=agi.cookie.getMemNum;}if(!dojo._hasResource["ag.requester"]){dojo._hasResource["ag.requester"]=true;dojo.provide("ag.requester");ag.requester=agi.requester;}if(!dojo._hasResource["agi.flash.ufo"]){dojo._hasResource["agi.flash.ufo"]=true;dojo.provide("agi.flash.ufo");UFO={req:["movie","width","height","majorversion","build"],opt:["play","loop","menu","quality","scale","salign","wmode","bgcolor","base","flashvars","devicefont","allowscriptaccess","seamlesstabbing"],optAtt:["id","name","align"],optExc:["swliveconnect"],ximovie:"ufo.swf",xiwidth:"215",xiheight:"138",ua:navigator.userAgent.toLowerCase(),pluginType:"",fv:[0,0],foList:[],create:function(FO,id,_422){if(!UFO.uaHas("w3cdom")||UFO.uaHas("ieMac")){return;}UFO.getFlashVersion();UFO.foList[id]=UFO.updateFO(FO);if(typeof _422=="undefined"||_422!="true"){UFO.createCSS("#"+id,"visibility:hidden;");}UFO.domLoad(id,_422);},updateFO:function(FO){if(typeof FO.xi!="undefined"&&FO.xi=="true"){if(typeof FO.ximovie=="undefined"){FO.ximovie=UFO.ximovie;}if(typeof FO.xiwidth=="undefined"){FO.xiwidth=UFO.xiwidth;}if(typeof FO.xiheight=="undefined"){FO.xiheight=UFO.xiheight;}}FO.mainCalled=false;return FO;},domLoad:function(id,_423){if(typeof _423!="undefined"&&_423=="true"){UFO.main(id);}else{var _424=setInterval(function(){if((document.getElementsByTagName("body")[0]!=null||document.body!=null)&&document.getElementById(id)!=null){UFO.main(id);clearInterval(_424);}},250);if(typeof document.addEventListener!="undefined"){document.addEventListener("DOMContentLoaded",function(){UFO.main(id);clearInterval(_424);},null);}}},main:function(id){var _425=UFO.foList[id];if(_425.mainCalled){return;}UFO.foList[id].mainCalled=true;document.getElementById(id).style.visibility="hidden";if(UFO.hasRequired(id)){if(UFO.hasFlashVersion(parseInt(_425.majorversion,10),parseInt(_425.build,10))){if(typeof _425.setcontainercss!="undefined"&&_425.setcontainercss=="true"){UFO.setContainerCSS(id);}UFO.writeSWF(id);}else{if(_425.xi=="true"&&UFO.hasFlashVersion(6,65)){UFO.createDialog(id);}}}document.getElementById(id).style.visibility="visible";},createCSS:function(_426,_427){var _428=document.getElementsByTagName("head")[0];var _429=UFO.createElement("style");if(!UFO.uaHas("ieWin")){_429.appendChild(document.createTextNode(_426+" {"+_427+"}"));}_429.setAttribute("type","text/css");_429.setAttribute("media","screen");_428.appendChild(_429);if(UFO.uaHas("ieWin")&&document.styleSheets&&document.styleSheets.length>0){var _42a=document.styleSheets[document.styleSheets.length-1];if(typeof _42a.addRule=="object"){_42a.addRule(_426,_427);}}},setContainerCSS:function(id){var _42b=UFO.foList[id];var _42c=/%/.test(_42b.width)?"":"px";var _42d=/%/.test(_42b.height)?"":"px";UFO.createCSS("#"+id,"width:"+_42b.width+_42c+"; height:"+_42b.height+_42d+";");if(_42b.width=="100%"){UFO.createCSS("body","margin-left:0; margin-right:0; padding-left:0; padding-right:0;");}if(_42b.height=="100%"){UFO.createCSS("html","height:100%; overflow:hidden;");UFO.createCSS("body","margin-top:0; margin-bottom:0; padding-top:0; padding-bottom:0; height:100%;");}},createElement:function(el){return (UFO.uaHas("xml")&&typeof document.createElementNS!="undefined")?document.createElementNS("http://www.w3.org/1999/xhtml",el):document.createElement(el);},createObjParam:function(el,_42e,_42f){var _430=UFO.createElement("param");_430.setAttribute("name",_42e);_430.setAttribute("value",_42f);el.appendChild(_430);},uaHas:function(ft){var _431=UFO.ua;switch(ft){case "w3cdom":return (typeof document.getElementById!="undefined"&&typeof document.getElementsByTagName!="undefined"&&(typeof document.createElement!="undefined"||typeof document.createElementNS!="undefined"));case "xml":var _432=document.getElementsByTagName("meta");var _433=_432.length;for(var i=0;i<_433;i++){if(/content-type/i.test(_432[i].getAttribute("http-equiv"))&&/xml/i.test(_432[i].getAttribute("content"))){return true;}}return false;case "ieMac":return /msie/.test(_431)&&!/opera/.test(_431)&&/mac/.test(_431);case "ieWin":return /msie/.test(_431)&&!/opera/.test(_431)&&/win/.test(_431);case "gecko":return /gecko/.test(_431)&&!/applewebkit/.test(_431);case "opera":return /opera/.test(_431);case "safari":return /applewebkit/.test(_431);default:return false;}},getFlashVersion:function(){if(UFO.fv[0]!=0){return;}if(navigator.plugins&&typeof navigator.plugins["Shockwave Flash"]=="object"){UFO.pluginType="npapi";var _434=navigator.plugins["Shockwave Flash"].description;if(typeof _434!="undefined"){_434=_434.replace(/^.*\s+(\S+\s+\S+$)/,"$1");var _435=parseInt(_434.replace(/^(.*)\..*$/,"$1"),10);var _436=/r/.test(_434)?parseInt(_434.replace(/^.*r(.*)$/,"$1"),10):0;UFO.fv=[_435,_436];}}else{if(window.ActiveXObject){UFO.pluginType="ax";try{var _437=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var _437=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");UFO.fv=[6,0];_437.AllowScriptAccess="always";}catch(e){if(UFO.fv[0]==6){return;}}try{var _437=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(typeof _437=="object"){var _434=_437.GetVariable("$version");if(typeof _434!="undefined"){_434=_434.replace(/^\S+\s+(.*)$/,"$1").split(",");UFO.fv=[parseInt(_434[0],10),parseInt(_434[2],10)];}}}}},hasRequired:function(id){var _438=UFO.req.length;for(var i=0;i<_438;i++){if(typeof UFO.foList[id][UFO.req[i]]=="undefined"){return false;}}return true;},hasFlashVersion:function(_439,_43a){return (UFO.fv[0]>_439||(UFO.fv[0]==_439&&UFO.fv[1]>=_43a))?true:false;},writeSWF:function(id){var _43b=UFO.foList[id];var _43c=document.getElementById(id);if(UFO.pluginType=="npapi"){if(UFO.uaHas("gecko")||UFO.uaHas("xml")){while(_43c.hasChildNodes()){_43c.removeChild(_43c.firstChild);}var _43d=UFO.createElement("object");_43d.setAttribute("type","application/x-shockwave-flash");_43d.setAttribute("data",_43b.movie);_43d.setAttribute("width",_43b.width);_43d.setAttribute("height",_43b.height);var _43e=UFO.optAtt.length;for(var i=0;i<_43e;i++){if(typeof _43b[UFO.optAtt[i]]!="undefined"){_43d.setAttribute(UFO.optAtt[i],_43b[UFO.optAtt[i]]);}}var _43f=UFO.opt.concat(UFO.optExc);var _43e=_43f.length;for(var i=0;i<_43e;i++){if(typeof _43b[_43f[i]]!="undefined"){UFO.createObjParam(_43d,_43f[i],_43b[_43f[i]]);}}_43c.appendChild(_43d);}else{var _440="";var _43f=UFO.opt.concat(UFO.optAtt).concat(UFO.optExc);var _43e=_43f.length;for(var i=0;i<_43e;i++){if(typeof _43b[_43f[i]]!="undefined"){_440+=" "+_43f[i]+"=\""+_43b[_43f[i]]+"\"";}}_43c.innerHTML="<embed type=\"application/x-shockwave-flash\" src=\""+_43b.movie+"\" width=\""+_43b.width+"\" height=\""+_43b.height+"\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\""+_440+"></embed>";}}else{if(UFO.pluginType=="ax"){var _441="";var _43e=UFO.optAtt.length;for(var i=0;i<_43e;i++){if(typeof _43b[UFO.optAtt[i]]!="undefined"){_441+=" "+UFO.optAtt[i]+"=\""+_43b[UFO.optAtt[i]]+"\"";}}var _442="";var _43e=UFO.opt.length;for(var i=0;i<_43e;i++){if(typeof _43b[UFO.opt[i]]!="undefined"){_442+="<param name=\""+UFO.opt[i]+"\" value=\""+_43b[UFO.opt[i]]+"\" />";}}var _443=window.location.protocol=="https:"?"https:":"http:";_43c.innerHTML="<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\""+_441+" width=\""+_43b.width+"\" height=\""+_43b.height+"\" codebase=\""+_443+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+_43b.majorversion+",0,"+_43b.build+",0\"><param name=\"movie\" value=\""+_43b.movie+"\" />"+_442+"</object>";if(_43b["id"]){window[_43b["id"]]=document.getElementById(_43b["id"]);}}}},createDialog:function(id){var _444=UFO.foList[id];UFO.createCSS("html","height:100%; overflow:hidden;");UFO.createCSS("body","height:100%; overflow:hidden;");UFO.createCSS("#xi-con","position:absolute; left:0; top:0; z-index:1000; width:100%; height:100%; background-color:#fff; filter:alpha(opacity:75); opacity:0.75;");UFO.createCSS("#xi-dia","position:absolute; left:50%; top:50%; margin-left: -"+Math.round(parseInt(_444.xiwidth,10)/2)+"px; margin-top: -"+Math.round(parseInt(_444.xiheight,10)/2)+"px; width:"+_444.xiwidth+"px; height:"+_444.xiheight+"px;");var _445=document.getElementsByTagName("body")[0];var _446=UFO.createElement("div");_446.setAttribute("id","xi-con");var _447=UFO.createElement("div");_447.setAttribute("id","xi-dia");_446.appendChild(_447);_445.appendChild(_446);var _448=window.location;if(UFO.uaHas("xml")&&UFO.uaHas("safari")){var _449=document.getElementsByTagName("title")[0].firstChild.nodeValue=document.getElementsByTagName("title")[0].firstChild.nodeValue.slice(0,47)+" - Flash Player Installation";}else{var _449=document.title=document.title.slice(0,47)+" - Flash Player Installation";}var _44a=UFO.pluginType=="ax"?"ActiveX":"PlugIn";var _44b=typeof _444.xiurlcancel!="undefined"?"&xiUrlCancel="+_444.xiurlcancel:"";var _44c=typeof _444.xiurlfailed!="undefined"?"&xiUrlFailed="+_444.xiurlfailed:"";UFO.foList["xi-dia"]={movie:_444.ximovie,width:_444.xiwidth,height:_444.xiheight,majorversion:"6",build:"65",flashvars:"MMredirectURL="+_448+"&MMplayerType="+_44a+"&MMdoctitle="+_449+_44b+_44c};UFO.writeSWF("xi-dia");},expressInstallCallback:function(){var _44d=document.getElementsByTagName("body")[0];var _44e=document.getElementById("xi-con");_44d.removeChild(_44e);UFO.createCSS("body","height:auto; overflow:auto;");UFO.createCSS("html","height:auto; overflow:auto;");},cleanupIELeaks:function(){var _44f=document.getElementsByTagName("object");var _450=_44f.length;for(var i=0;i<_450;i++){_44f[i].style.display="none";for(var x in _44f[i]){if(typeof _44f[i][x]=="function"){_44f[i][x]=null;}}}}};if(typeof window.attachEvent!="undefined"&&UFO.uaHas("ieWin")){window.attachEvent("onunload",UFO.cleanupIELeaks);}}if(!dojo._hasResource["ag.flash.ufo"]){dojo._hasResource["ag.flash.ufo"]=true;dojo.provide("ag.flash.ufo");ag.flash.ufo=agi.flash.ufo;}if(!dojo._hasResource["agi.ovoid.Konami"]){dojo._hasResource["agi.ovoid.Konami"]=true;dojo.provide("agi.ovoid.Konami");dojo.declare("agi.ovoid.Konami",[agi.classes.Identified],{kkeys:null,code:"38,38,40,40,37,39,37,39,66,65,13",handles:null,callback:null,once:true,constructor:function(_451){dojo.mixin(this,_451);this.kkeys=[];this.handles=[];this.handles.push(dojo.connect(dojo.doc,"onkeydown",dojo.hitch(this,this.keydown)));},keydown:function(evt){this.kkeys.push(evt.keyCode);if(this.kkeys.toString().indexOf(this.code)>=0){if(this.once){dojo.forEach(this.handles,dojo.disconnect);}if(this.callback){this.callback();}}}});}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}return (dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!dojo._hasResource["dojox.fx.text"]){dojo._hasResource["dojox.fx.text"]=true;dojo.provide("dojox.fx.text");dojox.fx.text._split=function(args){var node=args.node=dojo.byId(args.node),s=node.style,cs=dojo.getComputedStyle(node),_452=dojo.coords(node,true);args.duration=args.duration||1000;args.words=args.words||false;var _453=(args.text&&typeof (args.text)=="string")?args.text:node.innerHTML,_454=s.height,_455=s.width,_456=[];dojo.style(node,{height:cs.height,width:cs.width});var _457=/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)/g;var reg=(args.words?/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]+\s*)/g:/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]\s*)/g);var _458=(typeof args.text=="string")?args.text.match(reg):node.innerHTML.match(reg);var html="";var _459=0;var _45a=0;for(var i=0;i<_458.length;i++){var _45b=_458[i];if(!_45b.match(_457)){html+="<span>"+_45b+"</span>";_459++;}else{html+=_45b;}}node.innerHTML=html;function _45c(_45d){var next=_45d.nextSibling;if(_45d.tagName=="SPAN"&&_45d.childNodes.length==1&&_45d.firstChild.nodeType==3){var _45e=dojo.coords(_45d,true);_45a++;dojo.style(_45d,{padding:0,margin:0,top:(args.crop?"0px":_45e.t+"px"),left:(args.crop?"0px":_45e.l+"px"),display:"inline"});var _45f=args.pieceAnimation(_45d,_45e,_452,_45a,_459);if(dojo.isArray(_45f)){_456=_456.concat(_45f);}else{_456[_456.length]=_45f;}}else{if(_45d.firstChild){_45c(_45d.firstChild);}}if(next){_45c(next);}};_45c(node.firstChild);var anim=dojo.fx.combine(_456);dojo.connect(anim,"onEnd",anim,function(){node.innerHTML=_453;dojo.style(node,{height:_454,width:_455});});if(args.onPlay){dojo.connect(anim,"onPlay",anim,args.onPlay);}if(args.onEnd){dojo.connect(anim,"onEnd",anim,args.onEnd);}return anim;};dojox.fx.text.explode=function(args){var node=args.node=dojo.byId(args.node);var s=node.style;args.distance=args.distance||1;args.duration=args.duration||1000;args.random=args.random||0;if(typeof (args.fade)=="undefined"){args.fade=true;}if(typeof (args.sync)=="undefined"){args.sync=true;}args.random=Math.abs(args.random);args.pieceAnimation=function(_460,_461,_462,_463,_464){var _465=_461.h;var _466=_461.w;var _467=args.distance*2;var _468=args.duration;var _469=parseFloat(_460.style.top);var _46a=parseFloat(_460.style.left);var _46b=0;var _46c=0;var _46d=0;if(args.random){var seed=(Math.random()*args.random)+Math.max(1-args.random,0);_467*=seed;_468*=seed;_46b=((args.unhide&&args.sync)||(!args.unhide&&!args.sync))?(args.duration-_468):0;_46c=Math.random()-0.5;_46d=Math.random()-0.5;}var _46e=((_462.h-_465)/2-(_461.y-_462.y));var _46f=((_462.w-_466)/2-(_461.x-_462.x));var _470=Math.sqrt(Math.pow(_46f,2)+Math.pow(_46e,2));var _471=_469-_46e*_467+_470*_46d;var _472=_46a-_46f*_467+_470*_46c;var _473=dojo.animateProperty({node:_460,duration:_468,delay:_46b,easing:(args.easing||(args.unhide?dojo.fx.easing.sinOut:dojo.fx.easing.circOut)),beforeBegin:(args.unhide?function(){if(args.fade){dojo.style(_460,"opacity",0);}_460.style.position=args.crop?"relative":"absolute";_460.style.top=_471+"px";_460.style.left=_472+"px";}:function(){_460.style.position=args.crop?"relative":"absolute";}),properties:{top:(args.unhide?{start:_471,end:_469}:{start:_469,end:_471}),left:(args.unhide?{start:_472,end:_46a}:{start:_46a,end:_472})}});if(args.fade){var _474=dojo.animateProperty({node:_460,duration:_468,delay:_46b,easing:(args.fadeEasing||dojo.fx.easing.quadOut),properties:{opacity:(args.unhide?{start:0,end:1}:{end:0})}});return (args.unhide?[_474,_473]:[_473,_474]);}else{return _473;}};var anim=dojox.fx.text._split(args);return anim;};dojox.fx.text.converge=function(args){args.unhide=true;return dojox.fx.text.explode(args);};dojox.fx.text.disintegrate=function(args){var node=args.node=dojo.byId(args.node);var s=node.style;args.duration=args.duration||1500;args.distance=args.distance||1.5;args.random=args.random||0;if(!args.fade){args.fade=true;}var _475=Math.abs(args.random);args.pieceAnimation=function(_476,_477,_478,_479,_47a){var _47b=_477.h;var _47c=_477.w;var _47d=args.interval||(args.duration/(1.5*_47a));var _47e=(args.duration-_47a*_47d);var _47f=Math.random()*_47a*_47d;var _480=(args.reverseOrder||args.distance<0)?(_479*_47d):((_47a-_479)*_47d);var _481=_47f*_475+Math.max(1-_475,0)*_480;var _482={};if(args.unhide){_482.top={start:(parseFloat(_476.style.top)-_478.h*args.distance),end:parseFloat(_476.style.top)};if(args.fade){_482.opacity={start:0,end:1};}}else{_482.top={end:(parseFloat(_476.style.top)+_478.h*args.distance)};if(args.fade){_482.opacity={end:0};}}var _483=dojo.animateProperty({node:_476,duration:_47e,delay:_481,easing:(args.easing||(args.unhide?dojo.fx.easing.sinIn:dojo.fx.easing.circIn)),properties:_482,beforeBegin:(args.unhide?function(){if(args.fade){dojo.style(_476,"opacity",0);}_476.style.position=args.crop?"relative":"absolute";_476.style.top=_482.top.start+"px";}:function(){_476.style.position=args.crop?"relative":"absolute";})});return _483;};var anim=dojox.fx.text._split(args);return anim;};dojox.fx.text.build=function(args){args.unhide=true;return dojox.fx.text.disintegrate(args);};dojox.fx.text.blockFadeOut=function(args){var node=args.node=dojo.byId(args.node);var s=node.style;args.duration=args.duration||1000;args.random=args.random||0;var _484=Math.abs(args.random);args.pieceAnimation=function(_485,_486,_487,_488,_489){var _48a=args.interval||(args.duration/(1.5*_489));var _48b=(args.duration-_489*_48a);var _48c=Math.random()*_489*_48a;var _48d=(args.reverseOrder)?((_489-_488)*_48a):(_488*_48a);var _48e=_48c*_484+Math.max(1-_484,0)*_48d;var _48f=dojo.animateProperty({node:_485,duration:_48b,delay:_48e,easing:(args.easing||dojo.fx.easing.sinInOut),properties:{opacity:(args.unhide?{start:0,end:1}:{end:0})},beforeBegin:(args.unhide?function(){dojo.style(_485,"opacity",0);}:undefined)});return _48f;};var anim=dojox.fx.text._split(args);return anim;};dojox.fx.text.blockFadeIn=function(args){args.unhide=true;return dojox.fx.text.blockFadeOut(args);};dojox.fx.text.backspace=function(args){var node=args.node=dojo.byId(args.node);var s=node.style;args.words=false;args.duration=args.duration||2000;args.random=args.random||0;var _490=Math.abs(args.random);var _491=10;args.pieceAnimation=function(_492,_493,_494,_495,_496){var _497=args.interval||(args.duration/(1.5*_496)),text=("textContent" in _492)?_492.textContent:_492.innerText,_498=text.match(/\s/g);if(typeof (args.wordDelay)=="undefined"){args.wordDelay=_497*2;}if(!args.unhide){_491=(_496-_495-1)*_497;}var _499,_49a;if(args.fixed){if(args.unhide){var _499=function(){dojo.style(_492,"opacity",0);};}}else{if(args.unhide){var _499=function(){_492.style.display="none";};var _49a=function(){_492.style.display="inline";};}else{var _49a=function(){_492.style.display="none";};}}var _49b=dojo.animateProperty({node:_492,duration:1,delay:_491,easing:(args.easing||dojo.fx.easing.sinInOut),properties:{opacity:(args.unhide?{start:0,end:1}:{end:0})},beforeBegin:_499,onEnd:_49a});if(args.unhide){var _49c=Math.random()*text.length*_497;var _49d=_49c*_490/2+Math.max(1-_490/2,0)*args.wordDelay;_491+=_49c*_490+Math.max(1-_490,0)*_497*text.length+(_49d*(_498&&text.lastIndexOf(_498[_498.length-1])==text.length-1));}return _49b;};var anim=dojox.fx.text._split(args);return anim;};dojox.fx.text.type=function(args){args.unhide=true;return dojox.fx.text.backspace(args);};}if(!dojo._hasResource["agi.ovoid.Credits"]){dojo._hasResource["agi.ovoid.Credits"]=true;dojo.provide("agi.ovoid.Credits");dojo.declare("agi.ovoid.Credits",[agi.classes.Identified],{url:"",templateString:"",overlayId:"",contentClass:"",innerContentId:"",lbWidth:660,lbTop:35,original_opacity:0.3,original_background_color:"black",opacity:0.75,background_color:"white",autostart:false,playing:false,start_timeout:5000,constructor:function(_49e){dojo.mixin(this,_49e);this.data=null;this.lightbox=new agi.widget.Lightbox({lightboxId:"lightbox",overlayId:this.overlayId,loadnow:false,width:this.lbWidth,top:this.lbTop,overflow:"",contents:this.templateString});this.showNow=false;},loadData:function(_49f){this.showNow=_49f;if(!this.url){return;}dojo.xhrGet({url:this.url,handleAs:"json",load:dojo.hitch(this,this.gotData)});},gotData:function(_4a0,_4a1){this.data=_4a0;if(this.showNow){this.show();}},show:function(){if(!this.data){return this.loadData(true);}var _4a2=dojo.byId(this.overlayId);this.original_opacity=dojo.style(_4a2).opacity;this.original_background_color=dojo.style(_4a2).backgroundColor;dojo.style(_4a2,{opacity:this.opacity,backgroundColor:this.background_color});this.lightbox.show();if(this.autostart){this.play();}else{setTimeout(dojo.hitch(this,this.play),this.start_timeout);}},play:function(){if(this.playing){return;}this.showPage(0);this.playing=true;},showPage:function(i){var page=this.data.pages[i];var _4a3=this.data.pages[i+1];var h1=dojo.query("."+this.contentClass+" h1")[0];var h2=dojo.query("."+this.contentClass+" h2")[0];var ul=dojo.query("."+this.contentClass+" ul")[0];var _4a4=dojo.byId(this.innerContentId);var _4a5={node:_4a4,random:0.5,distance:1.5,duration:1500};if(page){if(page.heading!=null){h1.innerHTML=page.heading;}if(page.subhead!=null){h2.innerHTML=page.subhead;}else{h2.innerHTML="";}if(page.items!=null){ul.innerHTML=this.makeLIs(page.items);}else{ul.innerHTML="";}}dojo.style(_4a4,"visibility","visible");var _4a6=page.showFor!=null?page.showFor:5000;if(_4a3!=null){_4a5.onEnd=dojo.hitch(this,function(){dojo.style(_4a4,"visibility","hidden");this.showPage(i+1);});var anim=dojox.fx.text.explode(_4a5);setTimeout(function(){anim.play();},_4a6);}else{setTimeout(dojo.hitch(this,this.hide),_4a6);}},makeLIs:function(_4a7){html="";for(var i=0;i<_4a7.length;i++){html=html+"<li>"+_4a7[i]+"</li>";}return html;},hide:function(){this.lightbox.hide();var _4a8=dojo.byId(this.overlayId);dojo.style(_4a8,{opacity:this.original_opacity,backgroundColor:this.original_background_color});}});}if(!dojo._hasResource["agi.ovoid.Genesis"]){dojo._hasResource["agi.ovoid.Genesis"]=true;dojo.provide("agi.ovoid.Genesis");dojo.declare("agi.ovoid.Genesis",[agi.ovoid.Konami],{code:"66,65,39,39,65,67,38,40,65,13"});}if(!dojo._hasResource["agi.classes.Adopter"]){dojo._hasResource["agi.classes.Adopter"]=true;dojo.provide("agi.classes.Adopter");dojo.declare("agi.classes.Adopter",[agi.classes.Identified],{constructor:function(_4a9){if(dojo.isObject(_4a9)){dojo.mixin(this,_4a9);this.postMixInProperties();}},postMixInProperties:function(){return;}});}if(!dojo._hasResource["agi.ovoid.Release"]){dojo._hasResource["agi.ovoid.Release"]=true;dojo.provide("agi.ovoid.Release");dojo.declare("agi.ovoid.Release",[agi.classes.Identified,agi.widget.Lightbox,agi.classes.Adopter],{__doc__:"Lightbox widget for large image preview on design (double click thumbs).",templateString:"<div>\n\n<div id=\"pw-light-release\" class=\"pw-rc-light\" ><span class=\"pw-x1\"></span><span class=\"pw-x2\"></span><span class=\"pw-x3\"></span>\n\t<div class=\"pw-light-header\">\n        <ul>\n            <li class=\"pw-l-close\">\n                <a href=\"/\" onclick=\"dojo.publish('agi/modals/release/hide'); return false;\"><span></span>Close</a>\n            </li>\n        </ul>\n    </div>\n    \n    <div class=\"pw-light-content\" style=\"text-align: center;\">\n\t\t<h1 style=\"width:100%; color:#c42216; font-size: 28px; line-height: 34px; font-weight: bold; margin-bottom: 15px;\"></h1>\n\t\t<h2 style=\"font-size: 20px; line-height: 26px; color: #c42216; font-weight: bold; margin-bottom: 15px;\"></h2>\n        <div id=\"release-content\">\n        </div>\n    </div>\n</div>\n\n</div>\n",imghost:imghost,title:"PhotoWorks.com",subtitle:"",embed:"",data:null,dataUrl:null,showNow:false,constructor:function(){},postCreate:function(){this.inherited(arguments);dojo.subscribe("agi/modals/release/show",dojo.hitch(this,this.onOpen));dojo.subscribe("agi/modals/release/hide",dojo.hitch(this,this.onClose));dojo.subscribe("agi/modals/hide",dojo.hitch(this,this.onClose));this.handles=[];this.showNow=false;},onOpen:function(){if(!this.data){return this.loadData(true);}this.show();},onClose:function(evt){if(evt){dojo.stopEvent(evt);}this.hide();dojo.forEach(this.handles,dojo.disconnect);this.handles=[];},loadData:function(_4aa){this.showNow=_4aa;if(!this.dataUrl){return;}dojo.xhrGet({url:this.dataUrl,handleAs:"json",load:dojo.hitch(this,this.gotData)});},gotData:function(_4ab,_4ac){if(this.showNow){this.show();}this.data=_4ab;var _4ad=dojo.query("#"+this.lightboxId+" .pw-light-content h1")[0];var _4ae=dojo.query("#"+this.lightboxId+" .pw-light-content h2")[0];var _4af=dojo.query("#"+this.lightboxId+" .pw-light-content div")[0];dojo.html.set(_4ad,this.data.title);dojo.html.set(_4ae,this.data.subtitle);dojo.html.set(_4af,this.data.content);}});}if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");(function(){var _4b0=0,d=dojo;dojo.html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(node,cont){d.empty(node);if(cont){if(typeof cont=="string"){cont=d._toDom(cont,node.ownerDocument);}if(!cont.nodeType&&d.isArrayLike(cont)){for(var _4b1=cont.length,i=0;i<cont.length;i=_4b1==cont.length?i+1:0){d.place(cont[i],node,"last");}}else{d.place(cont,node,"last");}}return node;};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(_4b2,node){dojo.mixin(this,_4b2||{});node=this.node=dojo.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_4b0++].join("_");}},set:function(cont,_4b3){if(undefined!==cont){this.content=cont;}if(_4b3){this._mixin(_4b3);}this.onBegin();this.setContent();this.onEnd();return this.node;},setContent:function(){var node=this.node;if(!node){throw new Error(this.declaredClass+": setContent given no node");}try{node=dojo.html._setNodeContent(node,this.content);}catch(e){var _4b4=this.onContentError(e);try{node.innerHTML=_4b4;}catch(e){}}this.node=node;},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}dojo.html._emptyNode(this.node);},onBegin:function(){var cont=this.content;if(dojo.isString(cont)){if(this.cleanContent){cont=dojo.html._secureForInnerHtml(cont);}if(this.extractContent){var _4b5=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_4b5){cont=_4b5[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.node;delete this.content;},onContentError:function(err){return "Error occured setting content: "+err;},_mixin:function(_4b6){var _4b7={},key;for(key in _4b6){if(key in _4b7){continue;}this[key]=_4b6[key];}},_parse:function(){var _4b8=this.node;try{this.parseResults=dojo.parser.parse({rootNode:_4b8,dir:this.dir,lang:this.lang});}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_4b9){var _4ba=this["on"+type+"Error"].call(this,err);if(_4b9){}else{if(_4ba){dojo.html._setNodeContent(this.node,_4ba,true);}}}});dojo.html.set=function(node,cont,_4bb){if(undefined==cont){cont="";}if(!_4bb){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojo.html._ContentSetter(dojo.mixin(_4bb,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["ag.ovoid.Release"]){dojo._hasResource["ag.ovoid.Release"]=true;dojo.provide("ag.ovoid.Release");dojo.declare("ag.ovoid.Release",[agi.ovoid.Release],{templateString:"<div id=\"agi-lb-release-info\" style=\"background-color: #ffffff; border: 1px solid #B0AD89;\">\n    <div class=\"agi-close\"><span> </span><a href=\"#\" onclick=\"dojo.publish('agi/modals/release/hide');return false;\"><img src=\"{{imghost}}/agbeta/x.gif\" border=\"0\" height=\"11\" width=\"11\"></a><br style=\"clear: both;\"></div>\n\n    <div class=\"agi-lightboxpad\">\n        <div class=\"agi-light-content\" style=\"text-align: center;\">\n            <h1 style=\"text-align: center; text-transform: none; width:100%; color:#c42216; font-size: 28px; line-height: 34px; font-weight: bold; margin-bottom: 15px;\"></h1>\n            <h2 style=\"text-align: center; text-transform: none; font-size: 20px; line-height: 26px; color: #c42216; font-weight: bold; margin-bottom: 15px;\"></h2>\n            <div id=\"release-content\"></div>\n        </div>\n    </div>\n</div>\n",title:"AmericanGreetings.com",subtitle:"",embed:"",data:null,dataUrl:null,showNow:false,constructor:function(){},gotData:function(_4bc,_4bd){if(this.showNow){this.show();}this.data=_4bc;var _4be=dojo.query("#"+this.lightboxId+" .agi-light-content h1")[0];var _4bf=dojo.query("#"+this.lightboxId+" .agi-light-content h2")[0];var _4c0=dojo.query("#"+this.lightboxId+" .agi-light-content div")[0];dojo.html.set(_4be,this.data.title);dojo.html.set(_4bf,this.data.subtitle);dojo.html.set(_4c0,this.data.content);}});}if(!dojo._hasResource["ag.focus"]){dojo._hasResource["ag.focus"]=true;dojo.provide("ag.focus");window.onYouTubePlayerReady=function(_4c1){var _4c2=document.getElementById("pw-ytplayer");_4c2.addEventListener("onStateChange","    .stateChange");};ag.focus.stateChange=function(_4c3){if(_4c3==0){ag.focus.credits.hide();}else{if(_4c3==1){ag.focus.credits.play();}}};if(dojo.isIE){ag.focus.enablejsapi=0;ag.focus.autostart=true;}else{ag.focus.enablejsapi=1;ag.focus.autostart=false;}ag.focus.init=function(){ag.focus.release=new ag.ovoid.Release({dataUrl:"/credits/release",lightboxId:"release_lightbox",loaderId:"loadingImage",overlayId:"agi-overlay",loadnow:false,width:660,top:35,overflow:""});var _4c4=new agi.ovoid.Konami({callback:function(){ag.focus.release.onOpen();}});};dojo.addOnLoad(ag.focus.init);}if(!dojo._hasResource["dojo.io.script"]){dojo._hasResource["dojo.io.script"]=true;dojo.provide("dojo.io.script");(function(){var _4c5=dojo.isIE?"onreadystatechange":"load",_4c6=/complete|loaded/;dojo.io.script={get:function(args){var dfd=this._makeScriptDeferred(args);var _4c7=dfd.ioArgs;dojo._ioAddQueryToUrl(_4c7);dojo._ioNotifyStart(dfd);if(this._canAttach(_4c7)){var node=this.attach(_4c7.id,_4c7.url,args.frameDoc);if(!_4c7.jsonp&&!_4c7.args.checkString){var _4c8=dojo.connect(node,_4c5,function(evt){if(evt.type=="load"||_4c6.test(node.readyState)){dojo.disconnect(_4c8);_4c7.scriptLoaded=evt;}});}}dojo._ioWatch(dfd,this._validCheck,this._ioCheck,this._resHandle);return dfd;},attach:function(id,url,_4c9){var doc=(_4c9||dojo.doc);var _4ca=doc.createElement("script");_4ca.type="text/javascript";_4ca.src=url;_4ca.id=id;_4ca.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_4ca);},remove:function(id,_4cb){dojo.destroy(dojo.byId(id,_4cb));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(args){var dfd=dojo._ioSetArgs(args,this._deferredCancel,this._deferredOk,this._deferredError);var _4cc=dfd.ioArgs;_4cc.id=dojo._scopeName+"IoScript"+(this._counter++);_4cc.canDelete=false;_4cc.jsonp=args.callbackParamName||args.jsonp;if(_4cc.jsonp){_4cc.query=_4cc.query||"";if(_4cc.query.length>0){_4cc.query+="&";}_4cc.query+=_4cc.jsonp+"="+(args.frameDoc?"parent.":"")+dojo._scopeName+".io.script.jsonp_"+_4cc.id+"._jsonpCallback";_4cc.frameDoc=args.frameDoc;_4cc.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_4cc.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){dojo.io.script._addDeadScript(dfd.ioArgs);}},_deferredOk:function(dfd){var _4cd=dfd.ioArgs;if(_4cd.canDelete){dojo.io.script._addDeadScript(_4cd);}return _4cd.json||_4cd.scriptLoaded||_4cd;},_deferredError:function(_4ce,dfd){if(dfd.ioArgs.canDelete){if(_4ce.dojoType=="timeout"){dojo.io.script.remove(dfd.ioArgs.id,dfd.ioArgs.frameDoc);}else{dojo.io.script._addDeadScript(dfd.ioArgs);}}return _4ce;},_deadScripts:[],_counter:1,_addDeadScript:function(_4cf){dojo.io.script._deadScripts.push({id:_4cf.id,frameDoc:_4cf.frameDoc});_4cf.frameDoc=null;},_validCheck:function(dfd){var _4d0=dojo.io.script;var _4d1=_4d0._deadScripts;if(_4d1&&_4d1.length>0){for(var i=0;i<_4d1.length;i++){_4d0.remove(_4d1[i].id,_4d1[i].frameDoc);_4d1[i].frameDoc=null;}dojo.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){var _4d2=dfd.ioArgs;if(_4d2.json||(_4d2.scriptLoaded&&!_4d2.args.checkString)){return true;}var _4d3=_4d2.args.checkString;if(_4d3&&eval("typeof("+_4d3+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(dojo.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(_4d4){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;}};})();}if(!dojo._hasResource["agi.history.ViewHistoryCookie"]){dojo._hasResource["agi.history.ViewHistoryCookie"]=true;dojo.provide("agi.history.ViewHistoryCookie");dojo.declare("agi.history.ViewHistoryCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"cardviewhistory",constructor:function(){},read:function(_4d5){if(!_4d5){_4d5="";}var _4d6=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_4d6==null){_4d6=_4d5;}return _4d6;},set:function(_4d7){_4d7=this.read()+_4d7;agi.cookie.MagicCookie.setCookieValue(this.KEY,_4d7,false);},append:function(_4d8){this.set(this.read()+_4d8);}});}if(!dojo._hasResource["agi.history.LastActionCookie"]){dojo._hasResource["agi.history.LastActionCookie"]=true;dojo.provide("agi.history.LastActionCookie");dojo.declare("agi.history.LastActionCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"lastaction",constructor:function(){},read:function(_4d9){if(!_4d9){_4d9="";}var _4da=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_4da==null){_4da=_4d9;}return _4da;},set:function(_4db){agi.cookie.MagicCookie.setCookieValue(this.KEY,_4db,true);}});}if(!dojo._hasResource["agi.history.LastTriggerCookie"]){dojo._hasResource["agi.history.LastTriggerCookie"]=true;dojo.provide("agi.history.LastTriggerCookie");dojo.declare("agi.history.LastTriggerCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"lasttrigger",constructor:function(){},read:function(_4dc){if(!_4dc){_4dc="";}var _4dd=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_4dd==null){_4dd=_4dc;}return _4dd;},set:function(_4de){agi.cookie.MagicCookie.setCookieValue(this.KEY,_4de,false);}});}if(!dojo._hasResource["agi.segmentation.SegmentCookie"]){dojo._hasResource["agi.segmentation.SegmentCookie"]=true;dojo.provide("agi.segmentation.SegmentCookie");dojo.declare("agi.segmentation.SegmentCookie",[agi.classes.Identified,agi.classes.Adopter],{NON_MEMBER_DEFAULT:101,KEY:"segments",FROZEN_TREATMENTS:[184,185,186,203,204,207,208,217,218,219,235,236,237,238,240,241,242,244,245,246,247,248,249],constructor:function(){},read:function(){var _4df=dojo.fromJson(agi.cookie.MagicCookie.getCookieValue(this.KEY));return _4df;},set:function(_4e0,_4e1){if(!_4e1){_4e1=false;}var _4e2=dojo.fromJson(agi.cookie.MagicCookie.getCookieValue(this.KEY));if(_4e2==null){_4e2={};}for(key in _4e0){if(key.indexOf("cs")==0&&key.indexOf("cs9")!=0){if(_4e0[key]==this.NON_MEMBER_DEFAULT&&_4e2[key]>this.NON_MEMBER_DEFAULT){_4e0[key]=_4e2[key];}}if(!_4e1&&(key=="cs2"&&this.FROZEN_TREATMENTS.indexOf(_4e2[key])!=-1)){_4e0[key]=_4e2[key];}}dojo.mixin(_4e2,_4e0);agi.cookie.MagicCookie.setCookieValue(this.KEY,dojo.toJson(_4e2),false);}});}if(!dojo._hasResource["agi.segmentation.OrderBailCookie"]){dojo._hasResource["agi.segmentation.OrderBailCookie"]=true;dojo.provide("agi.segmentation.OrderBailCookie");dojo.declare("agi.segmentation.OrderBailCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"orderbail",constructor:function(){},read:function(_4e3){if(!_4e3){_4e3="";}var _4e4=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_4e4==null){_4e4=_4e3;}return _4e4;},set:function(_4e5){agi.cookie.MagicCookie.setCookieValue(this.KEY,_4e5,false);}});}if(!dojo._hasResource["agi.segmentation.SegmentTestGroupCookie"]){dojo._hasResource["agi.segmentation.SegmentTestGroupCookie"]=true;dojo.provide("agi.segmentation.SegmentTestGroupCookie");dojo.declare("agi.segmentation.SegmentTestGroupCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"segmenttestgroup",constructor:function(){},read:function(_4e6){if(!_4e6){_4e6="";}var _4e7=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_4e7==null){_4e7=_4e6;}return _4e7;},set:function(_4e8){agi.cookie.MagicCookie.setCookieValue(this.KEY,_4e8,false);}});}if(!dojo._hasResource["agi.segmentation.constants"]){dojo._hasResource["agi.segmentation.constants"]=true;dojo.provide("agi.segmentation.constants");agi.segmentation.constants.MEMBER_DEFAULT=100;agi.segmentation.constants.NON_MEMBER_DEFAULT=101;agi.segmentation.constants.CSHomePage={MEM_DFT:100,NON_DFT:101,EC_3_9_DFT:102,EC_3_9_UPS:103,CP_3_9_DFT:104,CP_3_9_UPS:105,CP_1_2_DFT:106,CP_1_2_CNP:107,BD_1_2_RC1:109,BD_1_2_RC2:110,BD_1_2_RC3:111,BD_1_2_RC4:112,EC_3_9_DFT:113,EC_3_9_RC1:114,EC_3_9_RC2:115,EC_3_9_RC3:116,CP_3_9_DFT:118,CP_3_9_CNP:119,CP_3_9_CPUPS:120,CP_3_9_UPS:121,BD_3_9_DFT:122,BD_3_9_RC1:123,BD_3_9_RC2:124,BD_3_9_RC3:125,MEM_PRE_DFT:126,EC_PRE_REN:127,CP_PRE_REN:128,BD_PRE_REN:129,EC_10_12_DFT:130,EC_10_12_RC1:131,EC_10_12_RC2:132,EC_10_12_RC3:133,CP_10_12_DFT:134,CP_10_12_CNP:135,BD_10_12_DFT:137,BD_10_12_RC1:138,BD_10_12_RC2:139,BD_10_12_RC3:140,EC_1_2_DFT:141,EC_1_2_RC1:142,EC_1_2_RC2:143,EC_1_2_RC3:144,MEM_PROMO:145,NON_PROMO:146,EC_10_2_DFT:147,EC_10_2_RC1:148,EC_10_2_RC2:149,EC_10_2_RC3:150,EC_10_2_RC4:151,CP_10_2_DFT:152,CP_10_2_CNP:153,BD_10_2_DFT:154,BD_10_2_RC1:155,BD_10_2_RC2:156,BD_10_2_RC3:157,BD_10_2_RC4:158,EC_3_9_RC4:159,MEM_DFT_TCRL:164,MEM_DFT_TTST:165,EC_10_2_DFT_TST:166,EC_10_2_RC4_TST:167,CNPBD_ALL_DFT:168,CNPBD_ALL_DFT_TST:169,CNPBD_ALL_RC2:170,CNPBD_ALL_RC2_TST:171,EC_3_9_DFT_TST:172,EC_3_9_RC1_TST:173,EC_3_9_RC3_TST:174,CNPBD_ALL_RC1:175,CNPBD_ALL_RC1_TST:176,NON_FTV_DFT:177,NON_FTV_TST:178,NON_PS_EC_DFT:179,NON_PS_EC_TST:180,NON_OS_EC_DFT:181,NON_OS_EC_TST:182,NON_PS_FEC_DFT:183,NON_PS_FEC_TST:184,NON_OS_FEC_DFT:185,NON_OS_FEC_TST:186,NON_PS_BEC_DFT:187,NON_PS_BEC_TST:188,NON_OS_BEC_DFT:189,NON_OS_BEC_TST:190,NON_PS_FBEC_DFT:191,NON_PS_FBEC_TST:192,NON_OS_FBEC_DFT:193,NON_OS_FBEC_TST:194,NON_PS_CNP_DFT:195,NON_PS_CNP_TST:196,NON_OS_CNP_DFT:197,NON_OS_CNP_TST:198,NON_PS_BRAND_DFT:199,NON_PS_BRAND_TST:200,NON_OS_BRAND_DFT:201,NON_OS_BRAND_TST:202,NON_INT_FEC_DFT:203,NON_INT_FEC_TST:204,NON_INT_BEC_DFT:205,NON_INT_BEC_TST:206,NON_INT_FBEC_DFT:207,NON_INT_FBEC_TST:208,NON_INT_CNP_DFT:209,NON_INT_CNP_TST:210,NON_LA_OPB_DFT:211,NON_LA_OPB_TST:212,NON_LA_ECB_DFT:213,NON_LA_ECB_TST:214,NON_LA_CNPB_DFT:215,NON_LA_CNPB_TST:216,NON_LA_SND_DFT:217,NON_LA_SND_TST:218,NON_LA_SND_TST2:230,NON_LA_PRT_DFT:219,NON_LA_PRT_TST:220,MAC_IE8_USR:229};agi.segmentation.constants.CSViewPage={MEM_DFT:100,NON_DFT:101,NON_NEW_DFT:102,NON_NEW_TST:103,NON_LOW_DFT:104,NON_LOW_TST1:105,NON_LOW_TST2:106,NON_MED_DFT:107,NON_MED_TST1:108,NON_MED_TST2:109,NON_HGH_DFT:110,NON_HGH_TST1:111,BDAY_MEM_DFT:112,BDAY_NON_DFT:113,BDAY_NON_NEW_DFT:114,BDAY_NON_NEW_TST:115,BDAY_NON_LOW_DFT:116,BDAY_NON_LOW_TST1:117,BDAY_NON_LOW_TST2:118,BDAY_NON_MED_DFT:119,BDAY_NON_MED_TST1:120,BDAY_NON_MED_TST2:121,BDAY_NON_HGH_DFT:122,BDAY_NON_HGH_TST1:123};agi.segmentation.constants.CSDisplayPage={MEM_DFT:100,NON_DFT:101,NON_EFF_DEFN1_CMP:102,NON_EFF_DEFN1_TST:103,NON_NOEFF_DEFN1_CMP:104,NON_NOEFF_DEFN1_TST:105,NON_EFF_DEFN2_CMP:106,NON_EFF_DEFN2_TST:107,NON_NOEFF_DEFN2_CMP:108,NON_NOEFF_DEFN2_TST:109,MEM_EFF_DEFN2_CMP:110,MEM_EFF_DEFN2_TST:111,MEM_NON_EFF_DEFN2_CMP:112,MEM_NON_EFF_DEFN2_TST:113,NON_VIEW_CMP:114,NON_VIEW_TST:115,NON_FIND_CMP:116,NON_FIND_TST:117};}if(!dojo._hasResource["agi.segmentation.Listeners"]){dojo._hasResource["agi.segmentation.Listeners"]=true;dojo.provide("agi.segmentation.Listeners");dojo.declare("agi.segmentation.Listeners",[agi.classes.Identified,agi.classes.Adopter],{issue_cfp:false,constructor:function(){this.cardviewhistory=new agi.history.ViewHistoryCookie();this.lastactioncookie=new agi.history.LastActionCookie();this.lasttriggercookie=new agi.history.LastTriggerCookie();this.segmentcookie=new agi.segmentation.SegmentCookie();this.orderbailcookie=new agi.segmentation.OrderBailCookie();this.testgroupcookie=new agi.segmentation.SegmentTestGroupCookie();this.CSHP=agi.segmentation.constants.CSHomePage;this.NON_MEMBER_DEFAULT=agi.segmentation.constants.NON_MEMBER_DEFAULT;},fire:function(){if(typeof cust_seg_events=="undefined"){return;}dojo.forEach(cust_seg_events,dojo.hitch(this,this._execute));if(this.issue_cfp){this._issue_cookies();}},_issue_cookies:function(){dojo.io.script.get({url:ahost+"/share/session.pd",content:{cb:"void"}});},_execute:function(_4e9){if(typeof this[_4e9]=="function"){this[_4e9]();}},_is_test:function(){var test=this.testgroupcookie.read()+"";if(test!="0"&&test!="1"){test=Math.floor(Math.random()*2);this.testgroupcookie.set(test);}return parseInt(test);},_set_segment_cookie:function(_4ea){this.issue_cfp=true;this.segmentcookie.set(_4ea);},send_ecard:function(){this.lastactioncookie.set("send");this.lasttriggercookie.set("send");var site=this.determine_site();if(this._is_test()){this._set_segment_cookie({"cs2":this.CSHP.NON_LA_SND_TST});}else{this._set_segment_cookie({"cs2":this.CSHP.NON_LA_SND_DFT});}},view_ecard_free:function(){this.view_ecard("free");},view_ecard_paid:function(){this.view_ecard("paid");},view_ecard:function(type){if(type=="paid"){this.cardviewhistory.append("P");}else{this.cardviewhistory.append("F");}var _4eb=/.*F.*F.*/i;var _4ec=this.cardviewhistory.read();var site=this.determine_site();if(_4ec.search(_4eb)!=-1){this.lasttriggercookie.set("view2free");value=[235,236][this._is_test()];this._set_segment_cookie({"cs2":value});}},browse_ecard:function(){this.lastactioncookie.set("ecbrowse");this.lasttriggercookie.set("ecbrowse");},browse_printable:function(){this.lastactioncookie.set("cnpbrowse");this.lasttriggercookie.set("cnpbrowse");},order_bail:function(){var _4ed=this.orderbailcookie.read();if(document.location.pathname.indexOf("join")==-1&&_4ed.length>0){this.lastactioncookie.set("opbail");this.lasttriggercookie.set("opbail");this.orderbailcookie.set("");}},internal_search_birthday:function(){var site=this.determine_site();var _4ee=[this.CSHP.NON_INT_FBEC_DFT,this.CSHP.NON_INT_FBEC_TST][this._is_test()];this._set_segment_cookie({"cs2":_4ee});},internal_search_free:function(){var site=this.determine_site();var _4ef=[this.CSHP.NON_INT_FEC_DFT,this.CSHP.NON_INT_FEC_TST][this._is_test()];this._set_segment_cookie({"cs2":_4ef});},determine_site:function(){var bma="bluemountain.";var ag="americangreetings.";var _4f0="beta.";var url=window.location.toString().toLowerCase();if(url.indexOf(_4f0)>-1){return "agbeta";}if(url.indexOf(bma)>-1){return "bma";}if(url.indexOf(ag)>-1){return "ag";}return "ag";}});}if(!dojo._hasResource["agi.segmentation.SegmentProvider"]){dojo._hasResource["agi.segmentation.SegmentProvider"]=true;dojo.provide("agi.segmentation.SegmentProvider");agi.segmentation.SegmentProvider.init=function(){this.listeners=new agi.segmentation.Listeners();this.listeners.fire();};dojo.addOnLoad(agi.segmentation.SegmentProvider.init);}dojo.publish("/ag.layers.core/loaded/");
