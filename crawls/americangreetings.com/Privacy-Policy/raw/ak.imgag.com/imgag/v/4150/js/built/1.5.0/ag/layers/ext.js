/*
	Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

dojo.provide("ag.layers.ext");if(!dojo._hasResource["ag.cookie._base"]){dojo._hasResource["ag.cookie._base"]=true;dojo.provide("ag.cookie._base");ag.cookie=agi.cookie;ag.cookie.AGCookie=ag.cookie.AGICookie;}if(!dojo._hasResource["ag.cookie"]){dojo._hasResource["ag.cookie"]=true;dojo.provide("ag.cookie");}if(!dojo._hasResource["agi.go.flashalbum"]){dojo._hasResource["agi.go.flashalbum"]=true;dojo.provide("agi.go.flashalbum");agi.go.flashalbum.window=null;agi.go.flashalbum.close=function(){try{if(agi.go.flashalbum.window){agi.go.flashalbum.window.close();}}catch(e){}agi.go.flashalbum.window=null;};agi.go.flashalbum.open=function(_1,_2,_3){if(!_2){_2=625;}if(!_3){_3=525;}var _4="location=0,menubar=0,toolbar=0,status=1,scrollbars=1,resizable=1,directories=0";var l=(screen.width-_2)/2;var t=(screen.height-_3)/2;if(l<0){l=0;}if(t<0){t=0;}var w=_2-12;var h=_3-61;var _5="width="+w+",height="+h+",left="+l+",top="+t;agi.go.flashalbum.window=window.open(_1,"fpaPopupWindow",_5+","+_4);};}if(!dojo._hasResource["ag.go.flashalbum"]){dojo._hasResource["ag.go.flashalbum"]=true;dojo.provide("ag.go.flashalbum");ag.go.flashalbum=agi.go.flashalbum;}if(!dojo._hasResource["ag.nav.AppState"]){dojo._hasResource["ag.nav.AppState"]=true;dojo.provide("ag.nav.AppState");dojo.declare("ag.nav.AppState",[ag.classes.Identified],{changeUrl:null,filterText:null,goAlpha:null,pageNumber:null,pageSetter:null,sortOrder:null,viewAll:null,windowSize:null,constructor:function(_6){this.pageSetter=_6.pageSetter;this.filterText=_6.filterText||"";this.goAlpha=_6.goAlpha||"";this.pageNumber=_6.pageNumber||"";this.sortOrder=_6.sortOrder||"";this.viewAll=_6.viewAll||0;this.windowSize=_6.windowSize||"";this.changeUrl=this._makeHash();},setPage:function(){var hf=dojo.byId("hidden-filter");var hp=dojo.byId("hidden-page");var hs=dojo.byId("hidden-sort");var hv=dojo.byId("hidden-viewall");var hw=dojo.byId("hidden-window");if(hf){hf.value=this.filterText||"";}if(hp){hp.value=this.pageNumber||"";}if(hs){hs.value=this.sortOrder||"";}if(hv){hv.value=this.viewAll||0;}if(hw){hw.value=this.windowSize||"";}},back:function(){if(!this.pageSetter){return;}this.setPage();this.pageSetter(this.pageNumber);if(dojo.isIE){location.hash="";}},forward:function(){if(!this.pageSetter){return;}this.setPage();this.pageSetter(this.pageNumber);},_makeHash:function(){args=[this.pageNumber];if(this.viewAll){args.push("al1");}if(this.sortOrder){args.push("so"+this.sortOrder);}return args.join("_");}});}if(!dojo._hasResource["dojo.back"]){dojo._hasResource["dojo.back"]=true;dojo.provide("dojo.back");(function(){var _7=dojo.back;function _8(){var h=window.location.hash;if(h.charAt(0)=="#"){h=h.substring(1);}return dojo.isMozilla?h:decodeURIComponent(h);};function _9(h){if(!h){h="";}window.location.hash=encodeURIComponent(h);_a=history.length;};if(dojo.exists("tests.back-hash")){_7.getHash=_8;_7.setHash=_9;}var _b=(typeof (window)!=="undefined")?window.location.href:"";var _c=(typeof (window)!=="undefined")?_8():"";var _d=null;var _e=null;var _f=null;var _10=null;var _11=[];var _12=[];var _13=false;var _14=false;var _a;function _15(){var _16=_12.pop();if(!_16){return;}var _17=_12[_12.length-1];if(!_17&&_12.length==0){_17=_d;}if(_17){if(_17.kwArgs["back"]){_17.kwArgs["back"]();}else{if(_17.kwArgs["backButton"]){_17.kwArgs["backButton"]();}else{if(_17.kwArgs["handle"]){_17.kwArgs.handle("back");}}}}_11.push(_16);};_7.goBack=_15;function _18(){var _19=_11.pop();if(!_19){return;}if(_19.kwArgs["forward"]){_19.kwArgs.forward();}else{if(_19.kwArgs["forwardButton"]){_19.kwArgs.forwardButton();}else{if(_19.kwArgs["handle"]){_19.kwArgs.handle("forward");}}}_12.push(_19);};_7.goForward=_18;function _1a(url,_1b,_1c){return {"url":url,"kwArgs":_1b,"urlHash":_1c};};function _1d(url){var _1e=url.split("?");if(_1e.length<2){return null;}else{return _1e[1];}};function _1f(){var url=(dojo.config["dojoIframeHistoryUrl"]||dojo.moduleUrl("dojo","resources/iframe_history.html"))+"?"+(new Date()).getTime();_13=true;if(_10){dojo.isWebKit?_10.location=url:window.frames[_10.name].location=url;}else{}return url;};function _20(){if(!_14){var hsl=_12.length;var _21=_8();if((_21===_c||window.location.href==_b)&&(hsl==1)){_15();return;}if(_11.length>0){if(_11[_11.length-1].urlHash===_21){_18();return;}}if((hsl>=2)&&(_12[hsl-2])){if(_12[hsl-2].urlHash===_21){_15();return;}}if(dojo.isSafari&&dojo.isSafari<3){var _22=history.length;if(_22>_a){_18();}else{if(_22<_a){_15();}}_a=_22;}}};_7.init=function(){if(dojo.byId("dj_history")){return;}var src=dojo.config["dojoIframeHistoryUrl"]||dojo.moduleUrl("dojo","resources/iframe_history.html");if(dojo._postLoad){}else{document.write("<iframe style=\"border:0;width:1px;height:1px;position:absolute;visibility:hidden;bottom:0;right:0;\" name=\"dj_history\" id=\"dj_history\" src=\""+src+"\"></iframe>");}};_7.setInitialState=function(_23){_d=_1a(_b,_23,_c);};_7.addToHistory=function(_24){_11=[];var _25=null;var url=null;if(!_10){if(dojo.config["useXDomain"]&&!dojo.config["dojoIframeHistoryUrl"]){}_10=window.frames["dj_history"];}if(!_f){_f=dojo.create("a",{style:{display:"none"}},dojo.body());}if(_24["changeUrl"]){_25=""+((_24["changeUrl"]!==true)?_24["changeUrl"]:(new Date()).getTime());if(_12.length==0&&_d.urlHash==_25){_d=_1a(url,_24,_25);return;}else{if(_12.length>0&&_12[_12.length-1].urlHash==_25){_12[_12.length-1]=_1a(url,_24,_25);return;}}_14=true;setTimeout(function(){_9(_25);_14=false;},1);_f.href=_25;if(dojo.isIE){url=_1f();var _26=_24["back"]||_24["backButton"]||_24["handle"];var tcb=function(_27){if(_8()!=""){setTimeout(function(){_9(_25);},1);}_26.apply(this,[_27]);};if(_24["back"]){_24.back=tcb;}else{if(_24["backButton"]){_24.backButton=tcb;}else{if(_24["handle"]){_24.handle=tcb;}}}var _28=_24["forward"]||_24["forwardButton"]||_24["handle"];var tfw=function(_29){if(_8()!=""){_9(_25);}if(_28){_28.apply(this,[_29]);}};if(_24["forward"]){_24.forward=tfw;}else{if(_24["forwardButton"]){_24.forwardButton=tfw;}else{if(_24["handle"]){_24.handle=tfw;}}}}else{if(!dojo.isIE){if(!_e){_e=setInterval(_20,200);}}}}else{url=_1f();}_12.push(_1a(url,_24,_25));};_7._iframeLoaded=function(evt,_2a){var _2b=_1d(_2a.href);if(_2b==null){if(_12.length==1){_15();}return;}if(_13){_13=false;return;}if(_12.length>=2&&_2b==_1d(_12[_12.length-2].url)){_15();}else{if(_11.length>0&&_2b==_1d(_11[_11.length-1].url)){_18();}}};})();}if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){var _2c=dijit.getEnclosingWidget(this.domNode.parentNode);return _2c&&_2c.isContainer?_2c:null;},_getSibling:function(_2d){var _2e=this.domNode;do{_2e=_2e[_2d+"Sibling"];}while(_2e&&_2e.nodeType!=1);return _2e&&dijit.byNode(_2e);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,postCreate:function(){dojo.addClass(this.domNode,"dijitContainer");this.inherited(arguments);},startup:function(){if(this._started){return;}this.inherited(arguments);var _2f=this.getParent&&this.getParent();if(!(_2f&&_2f.isLayoutContainer)){this.resize();this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this.resize();});}},resize:function(_30,_31){var _32=this.domNode;if(_30){dojo.marginBox(_32,_30);if(_30.t){_32.style.top=_30.t+"px";}if(_30.l){_32.style.left=_30.l+"px";}}var mb=_31||{};dojo.mixin(mb,_30||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(_32),mb);}var cs=dojo.getComputedStyle(_32);var me=dojo._getMarginExtents(_32,cs);var be=dojo._getBorderExtents(_32,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=dojo._getPadExtents(_32,cs);this._contentBox={l:dojo._toPixelValue(_32,cs.paddingLeft),t:dojo._toPixelValue(_32,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_33){dojo.addClass(_33.domNode,this.baseClass+"-child");if(_33.baseClass){dojo.addClass(_33.domNode,this.baseClass+"-"+_33.baseClass);}},addChild:function(_34,_35){this.inherited(arguments);if(this._started){this._setupChild(_34);}},removeChild:function(_36){dojo.removeClass(_36.domNode,this.baseClass+"-child");if(_36.baseClass){dojo.removeClass(_36.domNode,this.baseClass+"-"+_36.baseClass);}this.inherited(arguments);}});dijit.layout.marginBox2contentBox=function(_37,mb){var cs=dojo.getComputedStyle(_37);var me=dojo._getMarginExtents(_37,cs);var pb=dojo._getPadBorderExtents(_37,cs);return {l:dojo._toPixelValue(_37,cs.paddingLeft),t:dojo._toPixelValue(_37,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};(function(){var _38=function(_39){return _39.substring(0,1).toUpperCase()+_39.substring(1);};var _3a=function(_3b,dim){_3b.resize?_3b.resize(dim):dojo.marginBox(_3b.domNode,dim);dojo.mixin(_3b,dojo.marginBox(_3b.domNode));dojo.mixin(_3b,dim);};dijit.layout.layoutChildren=function(_3c,dim,_3d){dim=dojo.mixin({},dim);dojo.addClass(_3c,"dijitLayoutContainer");_3d=dojo.filter(_3d,function(_3e){return _3e.layoutAlign!="client";}).concat(dojo.filter(_3d,function(_3f){return _3f.layoutAlign=="client";}));dojo.forEach(_3d,function(_40){var elm=_40.domNode,pos=_40.layoutAlign;var _41=elm.style;_41.left=dim.l+"px";_41.top=dim.t+"px";_41.bottom=_41.right="auto";dojo.addClass(elm,"dijitAlign"+_38(pos));if(pos=="top"||pos=="bottom"){_3a(_40,{w:dim.w});dim.h-=_40.h;if(pos=="top"){dim.t+=_40.h;}else{_41.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){_3a(_40,{h:dim.h});dim.w-=_40.w;if(pos=="left"){dim.l+=_40.w;}else{_41.left=dim.l+dim.w+"px";}}else{if(pos=="client"){_3a(_40,dim);}}}});};})();}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",doLayout:true,ioArgs:{},isContainer:true,isLayoutContainer:true,onLoadDeferred:null,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[]}),postMixInProperties:function(){this.inherited(arguments);var _42=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,_42);this.errorMessage=dojo.string.substitute(this.errorMessage,_42);if(!this.href&&this.srcNodeRef&&this.srcNodeRef.innerHTML){this.isLoaded=true;}},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},postCreate:function(){this.domNode.title="";if(!dojo.attr(this.domNode,"role")){dijit.setWaiRole(this.domNode,"group");}dojo.addClass(this.domNode,this.baseClass);},startup:function(){if(this._started){return;}var _43=dijit._Contained.prototype.getParent.call(this);this._childOfLayoutWidget=_43&&_43.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;if(this.isLoaded){dojo.forEach(this.getChildren(),function(_44){_44.startup();});}if(this._isShown()||this.preload){this._onShow();}this.inherited(arguments);},_checkIfSingleChild:function(){var _45=dojo.query("> *",this.containerNode).filter(function(_46){return _46.tagName!=="SCRIPT";}),_47=_45.filter(function(_48){return dojo.hasAttr(_48,"dojoType")||dojo.hasAttr(_48,"widgetId");}),_49=dojo.filter(_47.map(dijit.byNode),function(_4a){return _4a&&_4a.domNode&&_4a.resize;});if(_45.length==_47.length&&_49.length==1){this._singleChild=_49[0];}else{delete this._singleChild;}dojo.toggleClass(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},setHref:function(_4b){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",_4b);},_setHrefAttr:function(_4c){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.href=_4c;if(this._created&&(this.preload||this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(_4d){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",_4d);},_setContentAttr:function(_4e){this.href="";this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this._setContent(_4e||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},uninitialize:function(){if(this._beingDestroyed){this.cancel();}this.inherited(arguments);},destroyRecursive:function(_4f){if(this._beingDestroyed){return;}this.inherited(arguments);},resize:function(_50,_51){if(!this._wasShown){this._onShow();}this._resizeCalled=true;if(_50){dojo.marginBox(this.domNode,_50);}var cn=this.containerNode;if(cn===this.domNode){var mb=_51||{};dojo.mixin(mb,_50||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(cn),mb);}this._contentBox=dijit.layout.marginBox2contentBox(cn,mb);}else{this._contentBox=dojo.contentBox(cn);}this._layoutChildren();},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var _52=this.domNode;return (_52.style.display!="none")&&(_52.style.visibility!="hidden")&&!dojo.hasClass(_52,"dijitHidden");}}},_onShow:function(){if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){this.refresh();}}else{if(!this._childOfLayoutWidget&&this._needLayout){this._layoutChildren();}}this.inherited(arguments);this._wasShown=true;},refresh:function(){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var _53=this;var _54={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(_54,this.ioArgs);}var _55=(this._xhrDfd=(this.ioMethod||dojo.xhrGet)(_54));_55.addCallback(function(_56){try{_53._isDownloaded=true;_53._setContent(_56,false);_53.onDownloadEnd();}catch(err){_53._onError("Content",err);}delete _53._xhrDfd;return _56;});_55.addErrback(function(err){if(!_55.canceled){_53._onError("Download",err);}delete _53._xhrDfd;return err;});delete this._hrefChanged;},_onLoadHandler:function(_57){this.isLoaded=true;try{this.onLoadDeferred.callback(_57);this.onLoad(_57);}catch(e){}},_onUnloadHandler:function(){this.isLoaded=false;try{this.onUnload();}catch(e){}},destroyDescendants:function(){if(this.isLoaded){this._onUnloadHandler();}var _58=this._contentSetter;dojo.forEach(this.getChildren(),function(_59){if(_59.destroyRecursive){_59.destroyRecursive();}});if(_58){dojo.forEach(_58.parseResults,function(_5a){if(_5a.destroyRecursive&&_5a.domNode&&_5a.domNode.parentNode==dojo.body()){_5a.destroyRecursive();}});delete _58.parseResults;}dojo.html._emptyNode(this.containerNode);delete this._singleChild;},_setContent:function(_5b,_5c){this.destroyDescendants();var _5d=this._contentSetter;if(!(_5d&&_5d instanceof dojo.html._ContentSetter)){_5d=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var _5e=this.onContentError(e);try{this.containerNode.innerHTML=_5e;}catch(e){}})});}var _5f=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad,dir:this.dir,lang:this.lang},this._contentSetterParams||{});dojo.mixin(_5d,_5f);_5d.set((dojo.isObject(_5b)&&_5b.domNode)?_5b.domNode:_5b);delete this._contentSetterParams;if(!_5c){dojo.forEach(this.getChildren(),function(_60){if(!this.parseOnLoad||_60.getParent){_60.startup();}},this);this._scheduleLayout();this._onLoadHandler(_5b);}},_onError:function(_61,err,_62){this.onLoadDeferred.errback(err);var _63=this["on"+_61+"Error"].call(this,err);if(_62){}else{if(_63){this._setContent(_63,true);}}},_scheduleLayout:function(){if(this._isShown()){this._layoutChildren();}else{this._needLayout=true;}},_layoutChildren:function(){if(this.doLayout){this._checkIfSingleChild();}if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{dojo.forEach(this.getChildren(),function(_64){if(_64.resize){_64.resize();}});}delete this._needLayout;},onLoad:function(_65){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(_66){},onDownloadError:function(_67){return this.errorMessage;},onDownloadEnd:function(){}});}if(!dojo._hasResource["ag.widget.AGContentPane"]){dojo._hasResource["ag.widget.AGContentPane"]=true;dojo.provide("ag.widget.AGContentPane");dojo.declare("ag.widget.AGContentPane",[dijit.layout.ContentPane,ag.classes.Publisher],{buildRendering:function(){this.publishBuildBegin();this.inherited(arguments);},postCreate:function(){this.publishBuildComplete();this.inherited(arguments);},onLoad:function(){var pub="/"+this.id+"/loaded/";dojo.publish(pub);}});}if(!dojo._hasResource["agi.util.selection"]){dojo._hasResource["agi.util.selection"]=true;dojo.provide("agi.util.selection");agi.util.selection={get_cursor_position:function(_68){return this.get_end(_68);},length:function(_69){_69=dojo.byId(_69);_69.focus();if(_69.createTextRange){return document.selection.createRange().text.length;}else{return _69.selectionEnd-_69.selectionStart;}},get_start:function(_6a){_6a=dojo.byId(_6a);_6a.focus();if(_6a.createTextRange){var _6b=document.selection.createRange().text.length;var end=agi.util.selection.get_end(_6a);return end-_6b;}else{return _6a.selectionStart;}},get_end:function(_6c){_6c=dojo.byId(_6c);_6c.focus();if(_6c.createTextRange){var r=document.selection.createRange().duplicate();r.moveStart("character",-_6c.value.length);return r.text.length;}else{return _6c.selectionEnd;}},set:function(_6d,_6e,end){var _6d=dojo.byId(_6d);if(!dojo.isIE){_6d.setSelectionRange(_6e,end);}else{var _6f=_6d.createTextRange();_6f.collapse(true);_6f.moveStart("character",_6e);_6f.moveEnd("character",end-_6e);_6f.select();}}};}if(!dojo._hasResource["agi.widget.AutoComplete"]){dojo._hasResource["agi.widget.AutoComplete"]=true;dojo.provide("agi.widget.AutoComplete");dojo.declare("agi.widget.AutoComplete",[agi.classes.Identified],{node:null,url:null,suggestions:null,input_text:null,search_text:null,cursor:-1,min_len:0,selected_index:-1,open:false,multiple:true,class_name:imgbase+"-auto-complete",class_selected:imgbase+"-auto-complete-selected",popup:null,iframe:null,deferred:null,cursor_position:0,view_limit:10,constructor:function(_70,url,_71){if(typeof _71!="undefined"){this.multiple=_71;}this.node=dojo.byId(_70);dojo.attr(this.node,"autocomplete","off");this.create();this.url=url;this.suggestions=[];this.wire(this.node);},is_open:function(){return this.open;},create:function(){var _72=this.node.id+"-auto-complete-list";this.popup=dojo.create("UL",{id:_72,className:this.class_name},dojo.body());dojo.style(this.popup,{display:"none"});dojo.connect(this.popup,"onmouseover",this,this.list_onmouseover);dojo.connect(this.popup,"onclick",this,this.list_onclick);if(dojo.isIE){this.create_iframe();}},create_iframe:function(){var _73=this.node.id+"-auto-complete-iframe";this.iframe=dojo.create("IFRAME",{id:_73},dojo.body());dojo.style(this.iframe,{display:"none",position:"absolute",border:"none",margin:0,padding:0});dojo.style(this.iframe,{zIndex:dojo.style(this.popup).zIndex-1});},show:function(){this.selected_index=-1;var _74=dojo.coords(this.node,true);dojo.style(this.popup,{visibility:"hidden",display:"block",left:_74.x+"px",top:(_74.y+_74.h)+"px"});this.popup.scrollTop=0;var lis=dojo.query("li",this.popup);if(lis.length>this.view_limit){lineHeight=dojo.coords(lis[0],true).h;divHeight=lineHeight*this.view_limit;dojo.style(this.popup,{height:divHeight+"px",overflow:"auto",overflowX:"hidden"});}else{dojo.style(this.popup,{height:"auto",overflow:"auto"});}this.make_visible();if(dojo.isIE){this.show_iframe();}this.open=true;},show_iframe:function(){var _75=dojo.coords(this.popup,true);dojo.style(this.iframe,{width:_75.w+"px",height:_75.h+"px",top:_75.t,left:_75.l,display:"block",background:"#FFFFFF"});},make_visible:function(){var _76=dojo.coords(this.node,true);var _77=dojo.coords(this.popup,true);var _78=dijit.getViewport();var _79=_77.t+_77.h;var _7a=_78.t+_78.h;if(_79>_7a){dojo.style(this.popup,{top:(_76.y-_77.h)+"px"});}dojo.style(this.popup,{visibility:"visible"});},cancel:function(){if(this.deferred!=null){this.deferred.cancel();}},hide:function(evt){if(typeof evt!="undefined"){var ids=[this.node.id,this.popup.id];var _7b=dojo.query("li",this.popup);_7b.forEach(function(_7c){ids.push(_7c.id);});if(!this.is_open()){this.cancel();}else{if(dojo.indexOf(ids,evt.target.id)>-1){return;}}}this.cancel();this.selected_index=-1;if(dojo.isIE){this.hide_iframe();}dojo.style(this.popup,{display:"none"});this.open=false;},hide_iframe:function(){dojo.style(this.iframe,{display:"none"});},stop_event:function(evt){if(this.is_open()){dojo.stopEvent(evt);}},onkeypress:function(evt){switch(evt.keyCode){case dojo.keys.TAB:case dojo.keys.UP_ARROW:case dojo.keys.DOWN_ARROW:case dojo.keys.ENTER:case dojo.keys.ESC:this.stop_event(evt);default:return true;}},onkeyup:function(evt){this.cursor_position=agi.util.selection.get_end(this.node);switch(evt.keyCode){case dojo.keys.TAB:case dojo.keys.ESC:case dojo.keys.UP_ARROW:case dojo.keys.DOWN_ARROW:this.stop_event(evt);case dojo.keys.SHIFT:return true;default:var _7d="";var _7d=this.get_search_value(this.node);if(_7d!=this.input_text){this.input_text=_7d;if(_7d.length>this.min_len){this.send_search();}else{this.hide();}}}},onkeydown:function(evt){switch(evt.keyCode){case dojo.keys.ENTER:this.use_suggestion();break;case dojo.keys.TAB:if(this.selected_index>-1){this.use_suggestion();}else{this.hide();agi.widget.focus_next_element(this.node);}break;case dojo.keys.ESC:this.stop_event(evt);this.hide();break;case dojo.keys.UP_ARROW:if(this.selected_index>0){this.selected_index--;}this.change_selection(evt.keyCode);this.stop_event(evt);break;case dojo.keys.DOWN_ARROW:if(this.selected_index<(this.suggestions.length-1)){this.selected_index++;}this.change_selection(evt.keyCode);this.stop_event(evt);break;}},wire:function(_7e){this.node=_7e;dojo.connect(_7e,"onkeypress",this,this.onkeypress);dojo.connect(_7e,"onkeydown",this,this.onkeydown);dojo.connect(_7e,"onkeyup",this,this.onkeyup);dojo.connect((dojo.isIE)?document:null,"onmouseup",this,this.hide);dojo.subscribe("agi/widget/autocomplete/hide",dojo.hitch(this,this.hide));},change_selection:function(_7f){if(!_7f){_7f="";}var lis=dojo.query("li",this.popup);if(lis.length==0){return;}var _80=dojo.marginBox(lis[0]).h;var _81=dojo.marginBox(this.popup);var _82=this.popup.scrollTop+_81.h;lis.forEach(dojo.hitch(this,function(_83,_84,_85){if(_84==this.selected_index){dojo.attr(_83,"className",this.class_selected);if(_85.length>this.view_limit&&(_7f==dojo.keys.DOWN_ARROW||_7f==dojo.keys.UP_ARROW)){if(_7f==dojo.keys.DOWN_ARROW){scroll_factor=_84+1;}else{scroll_factor=_84;}var _86=_80*scroll_factor;if(_86>_82){this.popup.scrollTop=this.popup.scrollTop+_80;}else{if(_86<this.popup.scrollTop){this.popup.scrollTop=_86;}}}}else{dojo.attr(_83,"className",this.class_name);}}));},list_onmouseover:function(evt){var _87=evt.target;this.selected_index=_87.id.replace(this.node.id,"").replace(/\D*/,"")*1;this.change_selection();},list_onclick:function(evt){this.use_suggestion();this.hide();dojo.stopEvent(evt);},onsearchsuccess:function(_88){var _89=this.get_search_value(this.node);if(_89!=this.search_text&&_89.length>this.min_len){this.send_search();return;}this.suggestions=_88;this.suggestions.sort();this.create_suggestions(this.search_text);if(this.suggestions.length>0){this.show();}else{this.hide();}},send_search:function(){this.search_text=this.get_search_value(this.node);var _8a={q:encodeURIComponent(this.search_text)};var _8b={url:this.url,handleAs:"json",load:dojo.hitch(this,this.onsearchsuccess),content:_8a,preventCache:true};this.deferred=dojo.xhrGet(_8b);},format_suggestion:function(_8c){return dojo.toJson(_8c);},apply_suggestion:function(_8d){if(this.multiple){var _8e=this.node.value;var _8f=this.cursor_position;var _90=_8f-this.get_search_value(this.node).length;var _91=_8e.substring(0,_90);var _92=_8e.substring(_8f);var _93=(_91.search(/\s+$/g)!=-1||_91.length==0);var _94=(_92.search(/^\s+/g)!=-1);var _95=(_93)?"":" ";var _96=(_94)?",":", ";var _97=_95+_8d+_96;this.node.value=_91+_97+_92;this.cursor=_90+_97.length;}else{this.node.value=_8d;}},get_search_value:function(_98){if(this.multiple){var _99=_98.value;var _9a=this.cursor_position;var _9b=[","," ",";","\n"];var idx=-1;dojo.forEach(_9b,function(_9c){var _9d=_99.lastIndexOf(_9c,_9a);idx=Math.max(idx,_9d);});var _9e=(idx==-1)?0:idx+1;var idx=-1;dojo.forEach(_9b,function(_9f){var _a0=_99.indexOf(_9f,_9a);idx=Math.max(idx,_a0);});var end=(idx==-1)?_99.length-1:idx-1;return _99.substring(_9e,_9a).replace(/^\s*|\s*$/g,"");}else{return this.node.value;}},create_suggestions:function(_a1){dojo.query("li",this.popup).forEach(dojo.destroy);dojo.forEach(this.suggestions,dojo.hitch(this,function(_a2,_a3){var _a4=this.format_suggestion(_a2);var _a5=this.node.id+"-li-"+_a3;var _a6=(this.selected_index==_a3)?this.class_selected:this.class_name;if(_a1){fidx=_a4.toLowerCase().indexOf(_a1);_a4=_a4.substring(0,fidx)+"<b>"+_a4.substring(fidx,fidx+_a1.length)+"</b>"+_a4.substring(fidx+_a1.length);}_a4=_a4.replace(/ /g,"&nbsp;");var li=dojo.create("LI",{id:_a5,className:_a6,innerHTML:_a4},this.popup);}));},use_suggestion:function(){if(this.selected_index>-1){this.apply_suggestion(this.suggestions[this.selected_index]);this.hide();this.selected_index=-1;this.input_text="";this.search_text="";this.node.blur();setTimeout("agi.widget.focus_element('"+this.node.id+"')",10);if(this.cursor!=-1){setTimeout("agi.util.selection.set('"+this.node.id+"',"+this.cursor+","+this.cursor+")",15);}}}});agi.widget.focus_next_element=function(_a7){var idx=-1;for(var i=0;i<_a7.form.elements.length;i++){if(_a7.form.elements[i]==_a7&&i<(_a7.form.elements.length-1)){idx=i;}}if(idx!=-1){_a7.form.elements[idx].focus();}};agi.widget.focus_element=function(_a8){try{dojo.byId(_a8).focus();}catch(e){}};}if(!dojo._hasResource["agi.widget.StorageComplete"]){dojo._hasResource["agi.widget.StorageComplete"]=true;dojo.provide("agi.widget.StorageComplete");dojo.declare("agi.widget.StorageComplete",[agi.widget.AutoComplete],{require_email:true,send_search:function(){if(!agx.currentPage.controller.contacts.loaded){this.inherited(arguments);return;}this.suggestions=[];var _a9=(this.get_search_value(this.node)+"").toLowerCase();if(agx.currentPage.controller.groups.loaded){for(g in agx.currentPage.groups){var _aa=(agx.currentPage.groups[g].label+"").toLowerCase();if(_aa.indexOf(_a9)==0){this.suggestions.push(agx.currentPage.groups[g]);}}}for(i in agx.currentPage.contacts){var _ab=(agx.currentPage.contacts[i].first_name+"").toLowerCase();var _ac=(agx.currentPage.contacts[i].last_name+"").toLowerCase();var _ad=(agx.currentPage.contacts[i].email+"").toLowerCase();var f=(_ab.length>0)?_ab+" ":"";var l=(_ac.length>0)?_ac+" ":"";var _ae=f+l;if(_ad.toLowerCase()==_a9){this.suggestions=[];break;}if(((_ad.indexOf(_a9)==0||_ab.indexOf(_a9)==0||_ac.indexOf(_a9)==0)||_ae.indexOf(_a9)==0)&&(_ad.length>0||!this.require_email)){this.suggestions.push(agx.currentPage.contacts[i]);}}this.suggestions.sort(this.compare_contacts);this.create_suggestions(_a9);if(this.suggestions.length>0){this.show();}else{this.hide();}},assemble_contact:function(_af){if(!_af.label){var _b0=(_af.first_name==null)?"":_af.first_name;var _b1=(_af.last_name==null)?"":_af.last_name;var _b2=(_b1.length>0&&_b0.length>0)?" ":"";var _b3=(_b1.length>0||_b0.length>0)?"\""+_b0+_b2+_b1+"\"":"";var _b4=(_af.email==null||_af.email.length==0)?"":" <"+_af.email+">";return _b3+_b4;}else{return _af.label+" (group)";}},format_suggestion:function(_b5){return this.assemble_contact(_b5).replace("<","&#60;").replace(">","&#62;");},apply_suggestion:function(_b6){var _b7="";if(!_b6.label){_b7=_b6.email;}else{_b7=this.get_group_emails(_b6);}this.inherited(arguments,[_b7]);},get_contact:function(id){for(var c in agx.currentPage.contacts){var _b8=agx.currentPage.contacts[c];_b8.id=_b8.id+"";if(_b8.id==id||_b8.id.startswith(id+"-")){return _b8;}}return {};},get_group_emails:function(_b9){var _ba="";for(i=0;i<_b9.contacts.length;i++){var _bb=_b9.contacts[i];var _bc=this.get_contact(_bb).email;if(typeof _bc!="undefined"&&_bc.length>0){if(_ba.length>0){_ba+=", "+_bc;}else{_ba+=_bc;}}}return _ba;},compare_contacts:function(a,b){if(!a.label){var _bd=a.last_name+a.first_name+a.email;}else{var _bd=a.label;}if(!b.label){var _be=b.last_name+b.first_name+b.email;}else{var _be=b.label;}if(_bd>_be){return 1;}else{return -1;}}});}if(!dojo._hasResource["ag.nav.ProductNavMixin"]){dojo._hasResource["ag.nav.ProductNavMixin"]=true;dojo.provide("ag.nav.ProductNavMixin");dojo.declare("ag.nav.ProductNavMixin",[ag.classes._Mixin],{prodInfoPage:"products.pd",prodNavChangeUrl:"",prodNavContentUrl:"",prodNavCurrentMode:"grid",prodNavCurrentPage:1,prodNavCurrentSort:null,prodNavPageNumber:0,prodNavPaneId:null,prodNavStickyViewAll:false,prodNavSubscribeEvent:null,_prodNavSwitchDiscon:null,_prodNavSorter:null,_prodNavPagePickers:null,_prodNavResultsPane:null,_prodNavGridSwitch:null,_prodNavDetailSwitch:null,_prodNavSwitchDiscon:null,_prodNavWireHandle:null,_prodNavSorterHandle:null,_prodNavAgiLegendCopy:null,_prodNavPagePickerHandles:[],_prodNavReady:false,AppStateClass:ag.nav.AppState,ContentPaneClass:ag.widget.AGContentPane,ADISPLAY:"adisplay",ALL:"all",CLASS_PAGENUMBER:".pagenumber",CURRENT:"current",PRODNAV_NAVCONTROLS_ID:"agi-legend",PRODNAV_PAGINATION_ID:"agi-pagination",PAGINATION_NODE:3,PAGE_PICKER_NODE_TYPE:"li",PRODNAV_PANE_ID:"docpane",PRODNAV_PANE_ID_ENDECA:"agi-products-and-nav",PRODNAV_PANE_LOADED:"/docpane/loaded/",PRODNAV_PANE_LOADED_ENDECA:"/agi-products-and-nav/loaded/",PRODNAV_PANE_PRELOAD:true,PRODNAV_PANE_LOADING_MESSAGE:"<p class=\"loading\">Loading...</p>",PRODNAV_PANE_ERROR_MESSAGE:"<p class=\"error\">Load failed...</p>",GO_ALL:"go_to_all",LIST_STYLE:"list-style",MODE_DETAIL:"detail",MODE_DETAIL_LIST:"detail-list",MODE_GRID:"grid",PAGE:"go_to_page",PRODUCT_LIST:"productlist",QV_PATH:"path",SORT:"sort",SORTER:"sorter",SORTER_NODE_TYPE:"select",SORTER_LABEL_NODE_TYPE:"label",SORTER_CHILD_NODE_TYPE:"option",SORT_ASC:"asc",SORT_DESC:"desc",SORT_NEW:"new",SORT_RATING:"rating",SORT_RELEVANCE:"relevance",SORT_START_DATE:"startdate",SORT_USAGE:"usage",SORT_CTD:"ctd",SWITCHVIEW:"switchview",SWITCHVIEW_SELECTED:"switchview-selected",VIEWALL_COOKIE_KEY:"viewall",VIEWBY_DETAIL:"viewby_detail",VIEWBY_PAGE:"viewby_page",DETAIL_PRODUCT_LIST_QUERY:".productlist.detail-list",PAGE_NUMBER_QUERY:".pagenumber",GRID_PRODUCT_LIST_QUERY:".productlist.grid",VIEWALL_QUERY:".viewall",constructor:function(){if(this._prodNavReady){return arguments;}this.prodNavSubscribeEvent=this.PRODNAV_PANE_LOADED;this.prodNavPaneId=this.PRODNAV_PANE_ID;if(agx.currentPage.hasEndeca){this.prodNavSubscribeEvent=this.PRODNAV_PANE_LOADED_ENDECA;this.prodNavPaneId=this.PRODNAV_PANE_ID_ENDECA;}this.prodNavInitBackButton();this.prodNavGetCurrentMode();this.prodNavGetResultsPane();this.prodNavResultsPaneWire();this._prodNavReady=true;this.prodNavCheckHash();dojo.subscribe(this.prodNavSubscribeEvent,this,this.prodNavResultsPaneWire);},prodNavCheckHash:function(){if(!location.hash){return;}if(isNaN(location.hash.substring(1))){return;}this.prodNavGoToPageNumber(parseInt(location.hash.substring(1)));},prodNavResultsPaneWire:function(){if(agx.currentPage.disableXhrPaging==true){}else{this.prodNavInitStyleSwitchers();this.prodNavToggleStyleSwitchers();this.prodNavInitPageChangers();this.prodNavGetPagePickers();this.prodNavUpdateChangerClasses(this.prodNavCurrentPage);this.prodNavInitSorter();}},prodNavInitBackButton:function(){var _bf={pageNumber:this.prodNavCurrentPage};_bf.pageSetter=dojo.hitch(this,function(n){this.prodNavGoToPageNumber(n);});var _c0=new this.AppStateClass(_bf);dojo.back.setInitialState(_c0);},prodNavGoToPageNumber:function(_c1){var _c2={pageNumber:_c1};_c2.pageSetter=dojo.hitch(this,function(n){this.prodNavGoToPageNumber(n);});var _c3=new this.AppStateClass(_c2);dojo.back.addToHistory(_c3);this.prodNavCurrentPage=_c1;this.prodNavUpdateChangerClasses(_c1);this._prodNavStyleTo(this.prodNavCurrentMode);},prodNavSort:function(){this.prodNavUpdateSort();},prodNavUpdate:function(_c4){_c4=_c4||1;this.prodNavPageNumber=_c4;this.prodNavChangeUrl=_c4;},prodNavSetCurrentMode:function(_c5){this.prodNavCurrentMode=_c5;},prodNavGetCurrentMode:function(){cookie_mode=this.prodNavGetModeCookie();var ret;if(cookie_mode){this.prodNavCurrentMode=cookie_mode;ret=cookie_mode;}else{this.prodNavCurrentMode=this.MODE_GRID;ret=this.MODE_GRID;}return ret;},prodNavSetModeCookie:function(_c6){var key=this.LIST_STYLE;ag.cookie.MagicCookie.setCookieValue(key,_c6,true);},prodNavGetModeCookie:function(_c7){var key=this.LIST_STYLE;return ag.cookie.MagicCookie.getCookieValue(key);},prodNavStyleToDetail:function(){this._prodNavStyleTo(this.MODE_DETAIL);},prodNavStyleToGrid:function(){this._prodNavStyleTo(this.MODE_GRID);},_prodNavStyleTo:function(_c8){this.prodNavCurrentMode=_c8;this.prodNavSetModeCookie(_c8);this.prodNavGetPageFromQs();this.prodNavToggleStyleSwitchers(_c8);this.prodNavGetResultsPane();this.prodNavLoadNewContent();},prodNavLoadNewContent:function(){this.prodNavGetContentUrl();if(this.prodNavContentUrl==this._prodNavResultsPane.href){return;}this._prodNavResultsPane.setHref(this.prodNavContentUrl);},prodNavGetPageFromQs:function(){this.prodNavPageNumber=1;},prodNavToggleStyleSwitchers:function(_c9){if(!this._prodNavGridSwitch||!this._prodNavDetailSwitch){return;}_c9=_c9||this.prodNavCurrentMode;dojo.disconnect(this._prodNavSwitchDiscon);if(_c9==this.MODE_GRID){this._prodNavSwitchDiscon=dojo.connect(this._prodNavDetailSwitch,"onclick",this,this.prodNavStyleToDetail);this._prodNavGridSwitch.className=this.SWITCHVIEW_SELECTED;this._prodNavDetailSwitch.className=this.SWITCHVIEW;}else{if(_c9==this.MODE_DETAIL){this._prodNavSwitchDiscon=dojo.connect(this._prodNavGridSwitch,"onclick",this,this.prodNavStyleToGrid);this._prodNavDetailSwitch.className=this.SWITCHVIEW_SELECTED;this._prodNavGridSwitch.className=this.SWITCHVIEW;}else{return;}}},prodNavInitStyleSwitchers:function(){this._prodNavGridSwitch=dojo.byId(this.VIEWBY_PAGE);this._prodNavDetailSwitch=dojo.byId(this.VIEWBY_DETAIL);},prodNavInitPageChangers:function(){dojo.forEach(this._prodNavPagePickerHandles,function(h){dojo.disconnect(h);});dojo.forEach(dojo.query(this.PAGE_NUMBER_QUERY),dojo.hitch(this,function(_ca){this._prodNavPagePickerHandles.push(dojo.connect(_ca,"onclick",this,this.prodNavGoToPage));}));dojo.forEach(dojo.query(this.VIEWALL_QUERY),dojo.hitch(this,function(_cb){this._prodNavPagePickerHandles.push(dojo.connect(_cb,"onclick",this,this.prodNavGoToAll));}));if(this.prodNavStickyViewAll&&this.prodNavGetViewallCookie()==this.ALL){this.prodNavUpdateChangerClasses(this.ALL);this.prodNavCurrentPage=this.ALL;}},prodNavGetPagePickers:function(){this._prodNavPagePickers=[];dojo.forEach(dojo.query(this.PAGE_NUMBER_QUERY),dojo.hitch(this,function(_cc){this._prodNavPagePickers.push(_cc);}));return this._prodNavPagePickers;},prodNavInitSorter:function(){this._prodNavSorter=dojo.byId(this.SORTER);if(this._prodNavSorter){dojo.disconnect(this._prodNavSorterHandle);this._prodNavSorterHandle=dojo.connect(this._prodNavSorter,"onchange",this,this.prodNavSort);if(this.prodNavCurrentSort){dojo.query(this.SORTER_CHILD_NODE_TYPE,this._prodNavSorter).forEach(dojo.hitch(this,function(n){if(n.value==this.prodNavCurrentSort){n.selected=true;}else{n.selected=false;}}));}else{this.prodNavCurrentSort=this._prodNavSorter.value;}}else{}},prodNavUpdateSort:function(){this._prodNavSorter=dojo.byId(this.SORTER);if(!this._prodNavSorter){return;}var _cd=null;var _ce=this._prodNavSorter.value;dojo.forEach([this.SORT_NEW,this.SORT_USAGE,this.SORT_RATING,this.SORT_ASC,this.SORT_DESC,this.SORT_RELEVANCE,this.SORT_CTD],function(o){if(_ce==o){_cd=o;}});if(_cd){this.prodNavSortBy(_cd);}},prodNavSortBy:function(_cf){this.prodNavUpdateCurrentSort(_cf);this._prodNavStyleTo(this.prodNavCurrentMode);this.prodNavCurrentPage=1;},prodNavGetContentUrl:function(){var _d0=dojo.doc.location.search.substring(1).split("&");var _d1=null;var _d2=null;var _d3=null;var _d4=null;var _d5=function(x,v){return (x.indexOf(v)>-1);};for(i=0;i<_d0.length;i++){var x=_d0[i];if(_d5(x,"strSearch")){_d1=x;}else{if(_d5(x,"qs_occasion")){_d2=x;}else{if(_d5(x,"qs_recipient")){_d3=x;}else{if(_d5(x,"qs_sentiment")){_d4=x;}}}}}var _d6="viewmode=";var _d7="path=";var _d8=this.prodNavGetCurrentMode();var _d9="";if(this.productLine&&this.productLine.length>0){_d9="/"+this.productLine;}var url=this.khost+_d9+"/"+this.prodInfoPage;var _da=null;if(_da){url=[url,"?",_d7,_da,"&",_d6,_d8].join("");}else{var _db=dojo.doc.location.search.substring(1);if(agx.currentPage.pathInfo){path_info="_path_info="+agx.currentPage.pathInfo;if(_db){_db=_db+"&"+path_info;}else{_db=path_info;}}var _dc=ag.util.getFriendlyPath();url=[url,_dc,"?",_d6,_d8].join("");url=[url,_db].join("&");}var _dd=this.prodNavCurrentPage;if(_dd==null||_dd==this.ALL){url+="&va=1";this.prodNavSetViewallCookie(this.ALL);}else{url=url+"&adisplay="+_dd;this.prodNavSetViewallCookie("");}url=url+"&sortby="+this.prodNavCurrentSort;var _de=[];dojo.forEach([_d1,_d2,_d3,_d4],function(v){if(v){_de.push(v);}});url=[url].concat(_de).join("&");this.prodNavContentUrl=url;return url;},prodNavSetPageNumber:function(_df){this.prodNavCurrentPage=_df;},prodNavSetViewallCookie:function(_e0){if(this.prodNavStickyViewAll){var key=this.VIEWALL_COOKIE_KEY;ag.cookie.MagicCookie.setCookieValue(key,_e0,true);}},prodNavGetViewallCookie:function(){return ag.cookie.MagicCookie.getCookieValue(this.VIEWALL_COOKIE_KEY);},prodNavGetResultsPane:function(){if(!this._prodNavResultsPane){var _e1={id:this.prodNavPaneId,widgetId:this.prodNavPaneId,errorMessage:this.PRODNAV_PANE_ERROR_MESSAGE,preload:this.PRODNAV_PANE_PRELOAD,loadingMessage:this.PRODNAV_PANE_LOADING_MESSAGE};var _e2=dojo.byId(this.prodNavPaneId);if(agx.currentPage.hasEndeca){var _e3=dojo.byId(this.PRODNAV_NAVCONTROLS_ID);if(!_e3){return;}this._prodNavAgiLegendCopy=dojo.doc.createElement("div");this._prodNavAgiLegendCopy.innerHTML=_e3.innerHTML;var _e4=function(n){dojo.style(n,"visibility","hidden");};dojo.query(this.PAGE_PICKER_NODE_TYPE,this._prodNavAgiLegendCopy).forEach(_e4);dojo.query(this.SORTER_NODE_TYPE,this._prodNavAgiLegendCopy).forEach(_e4);dojo.query(this.SORTER_LABEL_NODE_TYPE,this._prodNavAgiLegendCopy).forEach(_e4);_e1.loadingMessage="<div><div id=\""+this.PRODNAV_NAVCONTROLS_ID+"\">"+this._prodNavAgiLegendCopy.innerHTML+"</div>"+this.PRODNAV_PANE_LOADING_MESSAGE+"</div>";}this._prodNavResultsPane=new this.ContentPaneClass(_e1,_e2);this._prodNavResultsPane.startup();}else{}return this._prodNavResultsPane;},prodNavCurrentListStyle:function(){var _e5=dojo.query(this.GRID_PRODUCT_LIST_QUERY);if(_e5.length>0){return this.MODE_GRID;}var _e6=dojo.query(this.DETAIL_PRODUCT_LIST_QUERY);if(_e6.length>0){return this.MODE_DETAIL_LIST;}},prodNavUpdateCurrentSort:function(_e7){if(_e7!=this.prodNavCurrentSort){this.prodNavCurrentPage=1;}this.prodNavCurrentSort=_e7;},prodNavUpdateChangerClasses:function(_e8){dojo.forEach(this._prodNavPagePickers,dojo.hitch(this,function(n){if(n.title==(_e8)){dojo.addClass(n,this.CURRENT);}else{dojo.removeClass(n,this.CURRENT);}}));dojo.forEach(dojo.query(this.VIEWALL_QUERY),dojo.hitch(this,function(n){if(_e8==this.ALL){dojo.addClass(n,this.CURRENT);}else{dojo.removeClass(n,this.CURRENT);}}));},prodNavInitRecipientAutoComplete:function(_e9){var _ea=new agi.widget.StorageComplete(_e9,ahost+"/reminders/contactsearch.pd",true);},prodNavGoToPage:function(evt){this.prodNavGoToPageNumber(evt.target.title);},prodNavGoToAll:function(){this.prodNavGoToPageNumber("all");},prodNavSort:function(){this.prodNavUpdateSort();}});}if(!dojo._hasResource["agi.navtype"]){dojo._hasResource["agi.navtype"]=true;dojo.provide("agi.navtype");agi.navtype.toString=function(){return "AGNavtype";};agi.navtype.KEYS={"ecards":"ec","printables":"cnp","downloads":"dl","wallpapers":"wp","screensavers":"sv","invitations":"inv","photocards":"pc"};agi.navtype.to_string=function(_eb){var _ec="";for(value in _eb){if(typeof value=="string"){_ec+=("\""+value+"\""+":"+"\""+_eb[value]+"\""+",");}}return "{"+_ec.slice(0,-1)+"}";};agi.navtype.set_cookie=function(key,_ed){var _ee="navtype";var _ef=agi.cookie.MagicCookie.getCookieValue(_ee);var _f0={};if(_ef){var _f1=dojo.fromJson(_ef);for(x in _f1){_f0[x]=_f1[x];}}else{}if(typeof _f0[key]=="string"&&_f0[key].indexOf("|")>0){_f0[key]=_f0[key].split("|")[0]+"|"+_ed;}else{if(typeof _f0[key]=="string"){_f0[key]=_f0[key]+"|"+_ed;}else{_f0[key]=_ed+"|"+_ed;}}var _f2=agi.navtype.to_string(_f0);agi.cookie.MagicCookie.setCookieValue(_ee,_f2);};agi.navtype.get_key=function(){var _f3=window.location.pathname.split("/")[1];return agi.navtype.KEYS[_f3];};agi.navtype.get_from_cookie=function(){var key="navtype";var _f4=agi.cookie.MagicCookie.getCookieValue(key);if(_f4){try{var _f5=dojo.eval("x = "+_f4+";");return _f5[agi.navtype.get_key()].toLowerCase();}catch(e){return "others";}}else{return "others";}};agi.navtype.remove_from_cookie=function(_f6){var key="navtype";var _f7=agi.cookie.MagicCookie.getCookieValue(key);if(_f7){dojo.eval("var ary_navtype ="+_f7+";");key=agi.navtype.get_key();if(dojo.eval("delete ary_navtype."+key+";")){var _f8=agi.navtype.to_string(ary_navtype);agi.cookie.MagicCookie.setCookieValue(key,_f8);}}};}if(!dojo._hasResource["ag.navtype"]){dojo._hasResource["ag.navtype"]=true;dojo.provide("ag.navtype");ag.navtype=agi.navtype;}if(!dojo._hasResource["ag.sifr._base"]){dojo._hasResource["ag.sifr._base"]=true;dojo.provide("ag.sifr._base");ag.sifr.toString=function(){return "AGsIFR";};ag.sifr.sIFR=new function(){var O=this;var E={ACTIVE:"sIFR-active",UNLOADING:"sIFR-unloading",REPLACED:"sIFR-replaced",IGNORE:"sIFR-ignore",ALTERNATE:"sIFR-alternate",CLASS:"sIFR-class",LAYOUT:"sIFR-layout",FLASH:"sIFR-flash",FIX_FOCUS:"sIFR-fixfocus",DUMMY:"sIFR-dummy"};E.IGNORE_CLASSES=[E.REPLACED,E.IGNORE,E.ALTERNATE];this.MIN_FONT_SIZE=6;this.MAX_FONT_SIZE=126;this.FLASH_PADDING_BOTTOM=5;this.VERSION="395";this.isActive=false;this.isEnabled=true;this.fixHover=true;this.autoInitialize=true;this.setPrefetchCookie=true;this.cookiePath="/";this.domains=[];this.forceWidth=true;this.fitExactly=false;this.forceTextTransform=true;this.useDomLoaded=true;this.useStyleCheck=false;this.hasFlashClassSet=false;this.repaintOnResize=true;this.replacements=[];var L=0;var R=false;function Y(){};function D(b){function c(d){return d.toLocaleUpperCase();};this.normalize=function(d){return d.replace(/\n|\r|\xA0/g,D.SINGLE_WHITESPACE).replace(/\s+/g,D.SINGLE_WHITESPACE);};this.textTransform=function(d,e){switch(d){case "uppercase":return e.toLocaleUpperCase();case "lowercase":return e.toLocaleLowerCase();case "capitalize":return e.replace(/^\w|\s\w/g,c);}return e;};this.toHexString=function(d){if(typeof (d)!="string"||d.charAt(0)!="#"||d.length!=4&&d.length!=7){return d;}d=d.substring(1);return "0x"+(d.length==3?d.replace(/(.)(.)(.)/,"$1$1$2$2$3$3"):d);};this.convertCssArg=function(d){if(!d){return {};}if(typeof (d)=="object"){if(d.constructor==Array){d=d.join("");}else{return d;}}var k={};var l=d.split("}");for(var g=0;g<l.length;g++){var h=l[g].match(/([^\s{]+)\s*\{(.+)\s*;?\s*/);if(!h||h.length!=3){continue;}if(!k[h[1]]){k[h[1]]={};}var f=h[2].split(";");for(var e=0;e<f.length;e++){var m=f[e].match(/\s*([^:\s]+)\s*\:\s*([^;]+)/);if(!m||m.length!=3){continue;}k[h[1]][m[1]]=m[2].replace(/\s+$/,"");}}return k;};this.extractFromCss=function(f,e,h,d){var g=null;if(f&&f[e]&&f[e][h]){g=f[e][h];if(d){delete f[e][h];}}return g;};this.cssToString=function(e){var f=[];for(var d in e){var i=e[d];if(i==Object.prototype[d]){continue;}f.push(d,"{");for(var h in i){if(i[h]==Object.prototype[h]){continue;}var g=i[h];if(D.UNIT_REMOVAL_PROPERTIES[h]){g=parseInt(g,10);}f.push(h,":",g,";");}f.push("}");}return f.join("");};this.escape=function(d){return escape(d).replace(/\+/g,"%2B");};this.encodeVars=function(d){return d.join("&").replace(/%/g,"%25");};this.copyProperties=function(f,e){for(var d in f){if(e[d]===undefined){e[d]=f[d];}}return e;};this.domain=function(){var d="";try{d=document.domain;}catch(f){}return d;};this.domainMatches=function(g,f){if(f=="*"||f==g){return true;}var e=f.lastIndexOf("*");if(e>-1){f=f.substr(e+1);var d=g.lastIndexOf(f);if(d>-1&&(d+f.length)==g.length){return true;}}return false;};this.uriEncode=function(d){return encodeURI(decodeURIComponent(d));};this.delay=function(e,g,f){var d=Array.prototype.slice.call(arguments,3);setTimeout(function(){g.apply(f,d);},e);};};D.UNIT_REMOVAL_PROPERTIES={leading:true,"margin-left":true,"margin-right":true,"text-indent":true};D.SINGLE_WHITESPACE=" ";function T(d){var c=this;function b(f,h,g){var j=c.getStyleAsInt(f,h,d.ua.ie);if(j==0){j=f[g];for(var e=3;e<arguments.length;e++){j-=c.getStyleAsInt(f,arguments[e],true);}}return j;};this.getBody=function(){return document.getElementsByTagName("body")[0]||null;};this.querySelectorAll=function(e){return ag.sifr.parseSelector(e);};this.addClass=function(e,f){if(f){f.className=((f.className||"")==""?"":f.className+" ")+e;}};this.removeClass=function(e,f){if(f){f.className=f.className.replace(new RegExp("(^|\\s)"+e+"(\\s|$)"),"").replace(/^\s+|(\s)\s+/g,"$1");}};this.hasClass=function(e,f){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(f.className);};this.hasOneOfClassses=function(g,f){for(var e=0;e<g.length;e++){if(this.hasClass(g[e],f)){return true;}}return false;};this.ancestorHasClass=function(f,e){f=f.parentNode;while(f&&f.nodeType==1){if(this.hasClass(e,f)){return true;}f=f.parentNode;}return false;};this.create=function(e,f){var g=document.createElementNS?document.createElementNS(T.XHTML_NS,e):document.createElement(e);if(f){g.className=f;}return g;};this.getComputedStyle=function(g,h){var e;if(document.defaultView&&document.defaultView.getComputedStyle){var f=document.defaultView.getComputedStyle(g,null);e=f?f[h]:null;}else{if(g.currentStyle){e=g.currentStyle[h];}}return e||"";};this.getStyleAsInt=function(f,h,e){var g=this.getComputedStyle(f,h);if(e&&!/px$/.test(g)){return 0;}return parseInt(g)||0;};this.getWidthFromStyle=function(e){return b(e,"width","offsetWidth","paddingRight","paddingLeft","borderRightWidth","borderLeftWidth");};this.getHeightFromStyle=function(e){return b(e,"height","offsetHeight","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth");};this.getDimensions=function(h){var g=h.offsetWidth;var e=h.offsetHeight;if(g==0||e==0){for(var f=0;f<h.childNodes.length;f++){var j=h.childNodes[f];if(j.nodeType!=1){continue;}g=Math.max(g,j.offsetWidth);e=Math.max(e,j.offsetHeight);}}return {width:g,height:e};};this.getViewport=function(){return {width:window.innerWidth||document.documentElement.clientWidth||this.getBody().clientWidth,height:window.innerHeight||document.documentElement.clientHeight||this.getBody().clientHeight};};this.blurElement=function(g){try{g.blur();return;}catch(h){}var f=this.create("input");f.style.width="0px";f.style.height="0px";g.parentNode.appendChild(f);f.focus();f.blur();f.parentNode.removeChild(f);};};T.XHTML_NS="http://www.w3.org/1999/xhtml";function H(l){var c=navigator.userAgent.toLowerCase();var k=(navigator.product||"").toLowerCase();var d=navigator.platform.toLowerCase();this.parseVersion=function(e){return e.replace(/(^|\D)(\d)(?=\D|$)/g,"$10000$2");};this.macintosh=/^mac/.test(d);this.windows=/^win/.test(d);this.quicktime=false;this.opera=/opera/.test(c);this.konqueror=/konqueror/.test(k);this.ie=false;this.ieSupported=this.ie&&!/ppc|smartphone|iemobile|msie\s5\.5/.test(c);this.ieWin=this.ie&&this.windows;this.windows=this.windows&&(!this.ie||this.ieWin);this.ieMac=this.ie&&this.macintosh;this.macintosh=this.macintosh&&(!this.ie||this.ieMac);this.safari=/safari/.test(c);this.webkit=!this.konqueror&&/applewebkit/.test(c);this.khtml=this.webkit||this.konqueror;this.gecko=!this.webkit&&k=="gecko";this.ieVersion=this.ie&&/.*msie\s(\d\.\d)/.exec(c)?this.parseVersion(RegExp.$1):"0";this.operaVersion=this.opera&&/.*opera(\s|\/)(\d+\.\d+)/.exec(c)?this.parseVersion(RegExp.$2):"0";this.webkitVersion=this.webkit&&/.*applewebkit\/(\d+).*/.exec(c)?this.parseVersion(RegExp.$1):"0";this.geckoVersion=this.gecko&&/.*rv:\s*([^\)]+)\)\s+gecko/.exec(c)?this.parseVersion(RegExp.$1):"0";this.konquerorVersion=this.konqueror&&/.*konqueror\/([\d\.]+).*/.exec(c)?this.parseVersion(RegExp.$1):"0";this.flashVersion=0;if(this.ieWin){var g;var j=false;try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(h){try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");this.flashVersion=6;g.AllowScriptAccess="always";}catch(h){j=this.flashVersion==6;}if(!j){try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(h){}}}if(!j&&g){this.flashVersion=parseFloat(/([\d,?]+)/.exec(g.GetVariable("$version"))[1].replace(/,/g,"."));}}else{if(navigator.plugins&&navigator.plugins["Shockwave Flash"]){this.flashVersion=parseFloat(/(\d+\.?\d*)/.exec(navigator.plugins["Shockwave Flash"].description)[1]);var f=0;while(this.flashVersion>=H.MIN_FLASH_VERSION&&f<navigator.mimeTypes.length){var b=navigator.mimeTypes[f];if(b.type=="application/x-shockwave-flash"&&b.enabledPlugin.description.toLowerCase().indexOf("quicktime")>-1){this.flashVersion=0;this.quicktime=true;}f++;}}}this.flash=this.flashVersion>=H.MIN_FLASH_VERSION;this.transparencySupport=this.macintosh||this.windows;this.computedStyleSupport=this.ie||!!(document.defaultView&&document.defaultView.getComputedStyle);this.requiresPrefetch=this.ieWin||this.khtml;this.fixFocus=this.gecko&&this.windows;this.nativeDomLoaded=this.gecko||this.webkit&&this.webkitVersion>=this.parseVersion("525")||this.konqueror&&this.konquerorMajor>this.parseVersion("03")||this.opera;this.mustCheckStyle=this.khtml||this.opera;this.forcePageLoad=this.webkit&&this.webkitVersion<this.parseVersion("523");this.properDocument=typeof (document.location)=="object";this.supported=this.flash&&this.properDocument&&(!this.ie||this.ieSupported)&&this.computedStyleSupport&&(!this.opera||this.operaVersion>=this.parseVersion("9.50"))&&(!this.webkit||this.webkitVersion>=this.parseVersion("412"))&&(!this.gecko||this.geckoVersion>=this.parseVersion("1.8.0.12"))&&(!this.konqueror);};H.MIN_FLASH_VERSION=8;function F(b){this.fix=b.ua.ieWin&&window.location.hash!="";var c;this.cache=function(){c=document.title;};function d(){document.title=c;};this.restore=function(){if(this.fix){setTimeout(d,0);}};};function S(e){var i=null;function f(){try{if(e.ua.ie||document.readyState!="loaded"&&document.readyState!="complete"){document.documentElement.doScroll("left");}}catch(j){return setTimeout(f,10);}b();};function b(){if(e.useStyleCheck){d();}else{if(!e.ua.mustCheckStyle){g(null,true);}}};function d(){i=e.dom.create("div",E.DUMMY);e.dom.getBody().appendChild(i);c();};function c(){if(e.dom.getComputedStyle(i,"marginLeft")=="42px"){h();}else{setTimeout(c,10);}};function h(){if(i&&i.parentNode){i.parentNode.removeChild(i);}i=null;g(null,true);};function g(j,k){e.initialize(k);if(j&&j.type=="load"){if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",g,false);}if(window.removeEventListener){window.removeEventListener("load",g,false);}}};this.attach=function(){if(window.addEventListener){window.addEventListener("load",g,false);}else{window.attachEvent("onload",g);}if(!e.useDomLoaded||e.ua.forcePageLoad||e.ua.ie&&window.top!=window){return;}if(e.ua.nativeDomLoaded){document.addEventListener("DOMContentLoaded",b,false);}else{if(e.ua.ie||e.ua.khtml){f();}}};};var Q="sifrFetch";function N(b){var d=false;this.fetchMovies=function(f){if(b.setPrefetchCookie&&new RegExp(";?"+Q+"=true;?").test(document.cookie)){return;}try{d=true;c(f);}catch(g){if(b.debug){throw g;}}if(b.setPrefetchCookie){document.cookie=Q+"=true;path="+b.cookiePath;}};this.clear=function(){if(!d){return;}try{var f=document.getElementsByTagName("script");for(var g=f.length-1;g>=0;g--){var h=f[g];if(h.type=="sifr/prefetch"){h.parentNode.removeChild(h);}}}catch(j){}};function c(e){for(var f=0;f<e.length;f++){document.write("<script defer type=\"sifr/prefetch\" src=\""+e[f].src+"\"></script>");}};};function K(c,f,e,b,d){this.sIFR=c;this.id=f;this.vars=e;this.movie=null;this.__forceWidth=b;this.__events=d;this.__resizing=0;};K.prototype={getFlashElement:function(){return document.getElementById(this.id);},getAlternate:function(){return document.getElementById(this.id+"_alternate");},getAncestor:function(){var b=this.getFlashElement().parentNode;return !this.sIFR.dom.hasClass(E.FIX_FOCUS,b)?b:b.parentNode;},available:function(){var b=this.getFlashElement();return b&&b.parentNode;},call:function(b){if(!this.available()){return false;}var c=this.getFlashElement();try{c[b].apply(c,Array.prototype.slice.call(arguments,1));}catch(d){return false;}return true;},updateVars:function(b,d){for(var c=0;c<this.vars.length;c++){if(this.vars[c].split("=")[0]==b){this.vars[c]=b+"="+d;break;}}var e=this.sIFR.util.encodeVars(this.vars);this.movie.injectVars(this.getFlashElement(),e);this.movie.injectVars(this.movie.html,e);},storeSize:function(b,c){this.movie.setSize(b,c);this.updateVars(b,c);},fireEvent:function(b){if(this.available()&&this.__events[b]){this.sIFR.util.delay(0,this.__events[b],this,this);}},resizeFlashElement:function(b,c,d){if(!this.available()){return;}this.__resizing++;var e=this.getFlashElement();e.setAttribute("height",b);this.updateVars("renderheight",b);this.storeSize("height",b);if(c!==null){e.setAttribute("width",c);this.storeSize("width",c);}if(this.__events.onReplacement){this.sIFR.util.delay(0,this.__events.onReplacement,this,this);delete this.__events.onReplacement;}if(d){this.sIFR.util.delay(0,function(){this.call("scaleMovie");this.__resizing--;},this);}else{this.__resizing--;}},blurFlashElement:function(){if(this.available()){this.sIFR.dom.blurElement(this.getFlashElement());}},resetMovie:function(){this.sIFR.util.delay(0,this.movie.reset,this.movie,this.getFlashElement(),this.getAlternate());},resizeAfterScale:function(c,d){if(this.available()&&this.__resizing==0){this.sIFR.util.delay(0,this.resize,this);}},resize:function(){if(!this.available()){return;}this.__resizing++;var f=this.getFlashElement();var e=f.offsetWidth;if(e==0){return;}var d=f.getAttribute("width");var j=f.getAttribute("height");var k=this.getAncestor();var m=this.sIFR.dom.getHeightFromStyle(k);f.style.width="1px";f.style.height="1px";k.style.minHeight=m+"px";var b=this.getAlternate().childNodes;var l=[];for(var h=0;h<b.length;h++){var g=b[h].cloneNode(true);l.push(g);k.appendChild(g);}var c=this.sIFR.dom.getWidthFromStyle(k);for(var h=0;h<l.length;h++){k.removeChild(l[h]);}f.style.width=f.style.height=k.style.minHeight="";f.setAttribute("width",this.__forceWidth?c:d);f.setAttribute("height",j);if(c!=e){if(this.__forceWidth){this.storeSize("width",c);}this.call("resize",c);}this.__resizing--;},replaceText:function(f,h){var c=this.sIFR.util.escape(f);if(!this.call("replaceText",c)){return false;}this.updateVars("content",c);var d=this.getAlternate();if(h){while(d.firstChild){d.removeChild(d.firstChild);}for(var b=0;b<h.length;b++){d.appendChild(h[b]);}}else{try{d.innerHTML=f;}catch(g){}}return true;},changeCSS:function(b){b=this.sIFR.util.escape(this.sIFR.util.cssToString(this.sIFR.util.convertCssArg(b)));this.updateVars("css",b);return this.call("changeCSS",b);}};var X=new function(){this.create=function(n,i,h,e,d,f,m,k,g,l){var j=n.ua.ie?c:b;return new j(n,i,h,e,d,f,m,["flashvars",k,"wmode",g,"bgcolor",l,"allowScriptAccess","always","quality","best"]);};function b(q,k,g,e,d,f,p,m){var l=q.dom.create("object",E.FLASH);var o=["type","application/x-shockwave-flash","id",e,"name",e,"data",d,"width",f,"height",p];for(var n=0;n<o.length;n+=2){l.setAttribute(o[n],o[n+1]);}var h=l;if(g){h=W.create("div",E.FIX_FOCUS);h.appendChild(l);}for(var n=0;n<m.length;n+=2){if(m[n]=="name"){continue;}var j=W.create("param");j.setAttribute("name",m[n]);j.setAttribute("value",m[n+1]);l.appendChild(j);}while(k.firstChild){k.removeChild(k.firstChild);}k.appendChild(h);this.html=h.cloneNode(true);};b.prototype={reset:function(d,e){d.parentNode.replaceChild(this.html.cloneNode(true),d);},setSize:function(d,e){this.html.setAttribute(d,e);},injectVars:function(d,f){var g=d.getElementsByTagName("param");for(var e=0;e<g.length;e++){if(g[e].getAttribute("name")=="flashvars"){g[e].setAttribute("value",f);break;}}}};function c(n,h,g,e,d,f,m,j){this.dom=n.dom;this.html="<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" id=\""+e+"\" width=\""+f+"\" height=\""+m+"\" class=\""+E.FLASH+"\"><param name=\"movie\" value=\""+d+"\"></param></object>";var l="";for(var k=0;k<j.length;k+=2){l+="<param name=\""+j[k]+"\" value=\""+j[k+1]+"\"></param>";}this.html=this.html.replace(/(<\/object>)/,l+"$1");h.innerHTML=this.html;};c.prototype={reset:function(e,f){var d=e.parentNode;d.innerHTML=this.html;d.appendChild(f);},setSize:function(d,e){this.html=this.html.replace(d=="height"?/(height)="\d+"/:/(width)="\d+"/,"$1=\""+e+"\"");},injectVars:function(d,e){if(d!=this.html){return;}this.html=this.html.replace(/(flashvars(=|\"\svalue=)\")[^\"]+/,"$1"+e);}};};this.errors=new Y(O);var A=this.util=new D(O);var W=this.dom=new T(O);var U=this.ua=new H(O);var G={fragmentIdentifier:new F(O),pageLoad:new S(O),prefetch:new N(O)};var J={kwargs:[],replaceAll:function(c){for(var b=0;b<this.kwargs.length;b++){O.replace(this.kwargs[b]);}if(!c){this.kwargs=[];}}};this.activate=function(){if(!U.supported||!this.isEnabled||this.isActive||!C()||a()){return;}if(U.requiresPrefetch){G.prefetch.fetchMovies(arguments);}this.isActive=true;this.setFlashClass();G.fragmentIdentifier.cache();if(!this.autoInitialize){return;}G.pageLoad.attach();if(U.ie){window.attachEvent("onunload",function(){W.addClass(E.UNLOADING,document.documentElement);});}};this.setFlashClass=function(){if(this.hasFlashClassSet){return;}W.addClass(E.ACTIVE,W.getBody()||document.documentElement);this.hasFlashClassSet=true;};this.removeFlashClass=function(){if(!this.hasFlashClassSet){return;}W.removeClass(E.ACTIVE,W.getBody());W.removeClass(E.ACTIVE,document.documentElement);this.hasFlashClassSet=false;};this.initialize=function(b){if(!this.isActive||!this.isEnabled){return;}if(R){if(!b){J.replaceAll(false);}return;}R=true;J.replaceAll(b);if(O.repaintOnResize){if(window.addEventListener){window.addEventListener("resize",Z,false);}else{window.attachEvent("onresize",Z);}}G.prefetch.clear();};this.replace=function(v,s){if(!U.supported){return;}if(s){v=A.copyProperties(v,s);}if(!R){return J.kwargs.push(v);}if(this.onReplacementStart){this.onReplacementStart(v);}var AK=v.elements||W.querySelectorAll(v.selector);if(AK.length==0){return;}var u=M(v.src);var AP=A.convertCssArg(v.css);var t=B(v.filters);var AL=v.forceSingleLine===true;var AQ=v.preventWrap===true&&!AL;var o=AL||(v.fitExactly==null?this.fitExactly:v.fitExactly)===true;var AB=o||(v.forceWidth==null?this.forceWidth:v.forceWidth)===true;var q=v.ratios||[];var AC=v.pixelFont===true;var p=parseInt(v.tuneHeight)||0;var x=!!v.onRelease||!!v.onRollOver||!!v.onRollOut;if(o){A.extractFromCss(AP,".sIFR-root","text-align",true);}var r=A.extractFromCss(AP,".sIFR-root","font-size",true)||"0";var d=A.extractFromCss(AP,".sIFR-root","background-color",true)||"#FFFFFF";var m=A.extractFromCss(AP,".sIFR-root","kerning",true)||"";var AU=A.extractFromCss(AP,".sIFR-root","opacity",true)||"100";var h=A.extractFromCss(AP,".sIFR-root","cursor",true)||"default";var AN=parseInt(A.extractFromCss(AP,".sIFR-root","leading"))||0;var AH=v.gridFitType||(A.extractFromCss(AP,".sIFR-root","text-align")=="right")?"subpixel":"pixel";var g=this.forceTextTransform===false?"none":A.extractFromCss(AP,".sIFR-root","text-transform",true)||"none";r=/^\d+(px)?$/.test(r)?parseInt(r):0;AU=parseFloat(AU)<1?100*parseFloat(AU):AU;var AA=v.modifyCss?"":A.cssToString(AP);var AE=v.wmode||"";if(!AE){if(v.transparent){AE="transparent";}else{if(v.opaque){AE="opaque";}}}if(AE=="transparent"){if(!U.transparencySupport){AE="opaque";}else{d="transparent";}}for(var AT=0;AT<AK.length;AT++){var AD=AK[AT];if(W.hasOneOfClassses(E.IGNORE_CLASSES,AD)||W.ancestorHasClass(AD,E.ALTERNATE)){continue;}var AM=W.getDimensions(AD);var e=AM.height;var b=AM.width;var y=W.getComputedStyle(AD,"display");if(!e||!b||!y||y=="none"){continue;}b=W.getWidthFromStyle(AD);var k,AF;if(!r){var AJ=I(AD);k=Math.min(this.MAX_FONT_SIZE,Math.max(this.MIN_FONT_SIZE,AJ.fontSize));if(AC){k=Math.max(8,8*Math.round(k/8));}AF=AJ.lines;if(isNaN(AF)||!isFinite(AF)||AF==0){AF=1;}if(AF>1&&AN){e+=Math.round((AF-1)*AN);}}else{k=r;AF=1;}var c=W.create("span",E.ALTERNATE);var AV=AD.cloneNode(true);AD.parentNode.appendChild(AV);for(var AS=0,AR=AV.childNodes.length;AS<AR;AS++){c.appendChild(AV.childNodes[AS].cloneNode(true));}if(v.modifyContent){v.modifyContent(AV,v.selector);}if(v.modifyCss){AA=v.modifyCss(AP,AV,v.selector);}var n=P(AV,g,v.uriEncode);AV.parentNode.removeChild(AV);if(v.modifyContentString){n.text=v.modifyContentString(n.text,v.selector);}if(n.text==""){continue;}e=Math.round(AF*k);var AI=Math.round(AF*V(k,q)*k)+this.FLASH_PADDING_BOTTOM+p;var z=AB?b:"100%";var AG="sIFR_replacement_"+L++;var AO=["id="+AG,"content="+A.escape(n.text),"width="+b,"height="+e,"renderheight="+AI,"link="+A.escape(n.primaryLink.href||""),"target="+A.escape(n.primaryLink.target||""),"size="+k,"css="+A.escape(AA),"cursor="+h,"tunewidth="+(v.tuneWidth||0),"tuneheight="+p,"offsetleft="+(v.offsetLeft||""),"offsettop="+(v.offsetTop||""),"fitexactly="+o,"preventwrap="+AQ,"forcesingleline="+AL,"antialiastype="+(v.antiAliasType||""),"thickness="+(v.thickness||""),"sharpness="+(v.sharpness||""),"kerning="+m,"gridfittype="+AH,"flashfilters="+t,"opacity="+AU,"blendmode="+(v.blendMode||""),"selectable="+(v.selectable==null?"true":v.selectable===true),"fixhover="+(this.fixHover===true),"events="+x,"version="+this.VERSION];var w=A.encodeVars(AO);var f=new K(O,AG,AO,AB,{onReplacement:v.onReplacement,onRollOver:v.onRollOver,onRollOut:v.onRollOut,onRelease:v.onRelease});f.movie=X.create(ag.sifr.sIFR,AD,U.fixFocus&&v.fixFocus,AG,u,z,AI,w,AE,d);this.replacements.push(f);this.replacements[AG]=f;if(v.selector){if(!this.replacements[v.selector]){this.replacements[v.selector]=[f];}else{this.replacements[v.selector].push(f);}}c.setAttribute("id",AG+"_alternate");AD.appendChild(c);W.addClass(E.REPLACED,AD);}G.fragmentIdentifier.restore();};this.getReplacementByFlashElement=function(c){for(var b=0;b<O.replacements.length;b++){if(O.replacements[b].id==c.getAttribute("id")){return O.replacements[b];}}};this.redraw=function(){for(var b=0;b<O.replacements.length;b++){O.replacements[b].resetMovie();}};function C(){if(O.domains.length==0){return true;}var c=A.domain();for(var b=0;b<O.domains.length;b++){if(A.domainMatches(c,O.domains[b])){return true;}}return false;};function a(){if(document.location.protocol=="file:"){if(O.debug){O.errors.fire("isFile");}return true;}return false;};function M(b){if(U.ie&&b.charAt(0)=="/"){b=window.location.toString().replace(/([^:]+)(:\/?\/?)([^\/]+).*/,"$1$2$3")+b;}return b;};function V(c,d){for(var b=0;b<d.length;b+=2){if(c<=d[b]){return d[b+1];}}return d[d.length-1]||1;};function B(f){var d=[];for(var c in f){if(f[c]==Object.prototype[c]){continue;}var b=f[c];c=[c.replace(/filter/i,"")+"Filter"];for(var e in b){if(b[e]==Object.prototype[e]){continue;}c.push(e+":"+A.escape("\""+A.toHexString(b[e])+"\""));}d.push(c.join(","));}return A.escape(d.join(";"));};function Z(c){var d=Z.viewport;var b=W.getViewport();if(d&&b.width==d.width&&b.height==d.height){return;}Z.viewport=b;if(Z.timer){clearTimeout(Z.timer);}Z.timer=setTimeout(function(){delete Z.timer;for(var e=0;e<O.replacements.length;e++){O.replacements[e].resize();}},200);};function I(f){var g,c;if(!U.ie){g=W.getStyleAsInt(f,"lineHeight");c=Math.floor(W.getStyleAsInt(f,"height")/g);}else{if(U.ie){var g=W.getComputedStyle(f,"fontSize");if(g.indexOf("px")>0){g=parseInt(g);}else{var e=f.innerHTML;f.style.visibility="visible";f.style.overflow="visible";f.style.position="static";f.style.zoom="normal";f.style.writingMode="lr-tb";f.style.width=f.style.height="auto";f.style.maxWidth=f.style.maxHeight=f.style.styleFloat="none";var h=f;var b=f.currentStyle.hasLayout;if(b){f.innerHTML="<div class=\""+E.LAYOUT+"\">X<br>X<br>X</div>";h=f.firstChild;}else{f.innerHTML="X<br>X<br>X";}var d=h.getClientRects();g=d[1].bottom-d[1].top;g=Math.ceil(g*0.8);if(b){f.innerHTML="<div class=\""+E.LAYOUT+"\">"+e+"</div>";h=f.firstChild;}else{f.innerHTML=e;}d=h.getClientRects();c=d.length;if(b){f.innerHTML=e;}f.style.visibility=f.style.width=f.style.height=f.style.maxWidth=f.style.maxHeight=f.style.overflow=f.style.styleFloat=f.style.position=f.style.zoom=f.style.writingMode="";}}}return {fontSize:g,lines:c};};function P(b,f,p){p=p||A.uriEncode;var n=[],l=[];var j=null;var d=b.childNodes;var h=0;while(h<d.length){var e=d[h];if(e.nodeType==3){l.push(A.textTransform(f,A.normalize(e.nodeValue)).replace(/</g,"&lt;"));}if(e.nodeType==1){var g=[];var o=e.nodeName.toLowerCase();var m=e.className||"";if(/\s+/.test(m)){if(m.indexOf(E.CLASS)>-1){m=m.match("(\\s|^)"+E.CLASS+"-([^\\s$]*)(\\s|$)")[2];}else{m=m.match(/^([^\s]+)/)[1];}}if(m!=""){g.push("class=\""+m+"\"");}if(o=="a"){var c=p(e.getAttribute("href")||"");var k=e.getAttribute("target")||"";g.push("href=\""+c+"\"","target=\""+k+"\"");if(!j){j={href:c,target:k};}}l.push("<"+o+(g.length>0?" ":"")+g.join(" ")+">");if(e.hasChildNodes()){n.push(h);h=0;d=e.childNodes;continue;}else{if(!/^(br|img)$/i.test(e.nodeName)){l.push("</",e.nodeName.toLowerCase(),">");}}}if(n.length>0&&!e.nextSibling){do{h=n.pop();d=e.parentNode.parentNode.childNodes;e=d[h];if(e){l.push("</",e.nodeName.toLowerCase(),">");}}while(h==d.length-1&&n.length>0);}h++;}return {text:l.join("").replace(/^\s+|\s+$|\s+(<br>)\s+/g,"$1"),primaryLink:j||{}};};};ag.sifr.parseSelector=(function(){var B=/\s*,\s*/;var A=/\s*([\s>+~(),]|^|$)\s*/g;var K=/([\s>+~,]|[^(]\+|^)([#.:@])/g;var E=/^[^\s>+~]/;var J=/[\s#.:>+~()@]|[^\s#.:>+~()@]+/g;function G(P,N){N=N||document.documentElement;var Q=P.split(B),V=[];for(var S=0;S<Q.length;S++){var L=[N],U=F(Q[S]);for(var R=0;R<U.length;){var O=U[R++],M=U[R++],T="";if(U[R]=="("){while(U[R++]!=")"&&R<U.length){T+=U[R];}T=T.slice(0,-1);}L=H(L,O,M,T);}V=V.concat(L);}return V;};function F(L){var M=L.replace(A,"$1").replace(K,"$1*$2");if(E.test(M)){M=" "+M;}return M.match(J)||[];};function H(L,N,O,M){return (G.selectors[N])?G.selectors[N](L,O,M):[];};var D={toArray:function(M){var L=[];for(var N=0;N<M.length;N++){L.push(M[N]);}return L;}};var C={isTag:function(M,L){return (L=="*")||(L.toLowerCase()==M.nodeName.toLowerCase());},previousSiblingElement:function(L){do{L=L.previousSibling;}while(L&&L.nodeType!=1);return L;},nextSiblingElement:function(L){do{L=L.nextSibling;}while(L&&L.nodeType!=1);return L;},hasClass:function(L,M){return (M.className||"").match("(^|\\s)"+L+"(\\s|$)");},getByTag:function(L,M){return M.getElementsByTagName(L);}};var I={"#":function(L,N){for(var M=0;M<L.length;M++){if(L[M].getAttribute("id")==N){return [L[M]];}}return [];}," ":function(M,O){var L=[];for(var N=0;N<M.length;N++){L=L.concat(D.toArray(C.getByTag(O,M[N])));}return L;},">":function(M,P){var L=[];for(var O=0,Q;O<M.length;O++){Q=M[O];for(var N=0,R;N<Q.childNodes.length;N++){R=Q.childNodes[N];if(R.nodeType==1&&C.isTag(R,P)){L.push(R);}}}return L;},".":function(M,O){var L=[];for(var N=0,P;N<M.length;N++){P=M[N];if(C.hasClass([O],P)){L.push(P);}}return L;},":":function(L,N,M){return (G.pseudoClasses[N])?G.pseudoClasses[N](L,M):[];}};G.selectors=I;G.pseudoClasses={};G.util=D;G.dom=C;return G;})();}if(!dojo._hasResource["ag.sifr.config"]){dojo._hasResource["ag.sifr.config"]=true;dojo.provide("ag.sifr.config");ag.sifr.config.helneu={};ag.sifr.config.helneu.src=dojo.moduleUrl("ag","sifr/helveticaneuelt_v3.swf").toString();ag.sifr.sIFR.activate(ag.sifr.config.helneu);ag.sifr.config.go=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"h2.foo",css:{".sIFR-root":{"font-size":"48px","color":"#ff00ff"}},wmode:"transparent"});};ag.sifr.config.banner=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-category-banner h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ffffff","text-transform":"lowercase"}}});};ag.sifr.config.bannerl3=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-category-banner h2",wmode:"transparent",css:{".sIFR-root":{"color":"#ffffff","text-transform":"lowercase"}}});};ag.sifr.config.ecardtitle=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-ecardtitle h1",wmode:"transparent",css:{".sIFR-root":{"color":"#000000","text-align":"center","text-transform":"lowercase"}}});};ag.sifr.config.ecardtitlety=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-ecardtitlety h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-transform":"lowercase"}}});};ag.sifr.config.ecardtitlel=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-ecardtitlel h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-transform":"lowercase"}}});};ag.sifr.config.ecardtitleleft=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-ecardtitleleft h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-transform":"lowercase"}}});};ag.sifr.config.ecardtitleleftsm=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-ecardtitleleftsm h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-transform":"lowercase"}}});};ag.sifr.config.ecardtitleleftsm2=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-ecardtitleleftsm2 h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-transform":"lowercase"}}});};ag.sifr.config.othertitlety=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-othertitlety h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-transform":"lowercase"}}});};ag.sifr.config.printabletitle=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-printabletitle h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-align":"center","text-transform":"lowercase"}}});};ag.sifr.config.invitetitle=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-invitetitle h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-align":"center","text-transform":"lowercase"}}});};ag.sifr.config.invitetitleleft=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-invitetitleleft h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-transform":"lowercase"}}});};ag.sifr.config.invitetitlefl=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-invitetitlefl h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-transform":"lowercase"}}});};ag.sifr.config.invitetitlefls=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-invitetitlefls h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-transform":"lowercase"}}});};ag.sifr.config.dltitle=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-dltitle h1",wmode:"transparent",css:{".sIFR-root":{"color":"#9d0017","text-align":"center","text-transform":"lowercase"}}});};ag.sifr.config.thumbsvlist=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-thumbs-vlist h2",wmode:"transparent",css:{".sIFR-root":{"color":"#b0ad89"}}});};ag.sifr.config.featuredcontent=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-featuredcontent h2",wmode:"transparent",css:{".sIFR-root":{"color":"#c73e30","text-transform":"lowercase"}}});};ag.sifr.config.printable=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-printable h2",wmode:"transparent",css:{".sIFR-root":{"color":"#aeab8d","text-transform":"lowercase"}}});};ag.sifr.config.printableproj=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-printableproj h2",wmode:"transparent",css:{".sIFR-root":{"color":"#aeab8d","text-transform":"lowercase"}}});};ag.sifr.config.myinvmain=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-myinvmain h2",wmode:"transparent",css:{".sIFR-root":{"color":"#aeab8d","text-transform":"lowercase"}}});};ag.sifr.config.instructions=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-instructions h2",wmode:"transparent",css:{".sIFR-root":{"color":"#aeab8d","text-transform":"lowercase"}}});};ag.sifr.config.rcolumn=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-rcolumn h2",wmode:"transparent",css:{".sIFR-root":{"color":"#aeab8d","text-transform":"lowercase"}}});};ag.sifr.config.lcolumn=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-lcolumn h2",wmode:"transparent",css:{".sIFR-root":{"color":"#aeab8d","text-transform":"lowercase"}}});};ag.sifr.config.headtitle=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#headtitle h1",wmode:"transparent",css:{".sIFR-root":{"color":"#98936c","text-align":"left","text-transform":"lowercase"}}});};ag.sifr.config.seohallow=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-seohallow #agi-seohead #headtitle h1",wmode:"transparent",css:{".sIFR-root":{"color":"#e55800","text-align":"left","text-transform":"lowercase"}}});};ag.sifr.config.seobday=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-seobday #agi-seohead #headtitle h1",wmode:"transparent",css:{".sIFR-root":{"color":"#e92e37","text-align":"left","text-transform":"lowercase"}}});};ag.sifr.config.seodisney=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-seodisney #agi-seohead #headtitle h1",wmode:"transparent",css:{".sIFR-root":{"color":"#333399","text-align":"center","text-transform":"lowercase"}}});};ag.sifr.config.seothanks=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-seothanks #agi-seohead #headtitle h1",wmode:"transparent",css:{".sIFR-root":{"color":"#CC6633","text-align":"left","text-transform":"lowercase"}}});};ag.sifr.config.seosweet=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-seosweet #agi-seohead #headtitle h1",wmode:"transparent",css:{".sIFR-root":{"color":"#CC3366","text-align":"left","text-transform":"lowercase"}}});};ag.sifr.config.momcount=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#momcount h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-align":"right","text-transform":"lowercase","font-size":"24px"}}});};ag.sifr.config.agierrors=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-errors h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-align":"left","text-transform":"lowercase","font-size":"24px"}}});};ag.sifr.config.mdtoc=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#mdtoc h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-align":"left","text-transform":"lowercase","font-size":"24px"}}});};ag.sifr.config.mdtoc2=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#mdtoc h2",wmode:"transparent",css:{".sIFR-root":{"color":"#333333","text-transform":"lowercase","font-size":"20px"}}});};ag.sifr.config.mompage=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:".momforward h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-transform":"lowercase","font-size":"20px","text-align":"right"}}});};ag.sifr.config.mompage2=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#momview #agi-content #momtexttop h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-transform":"lowercase"}}});};ag.sifr.config.mompage3=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#momview #agi-content .momtext h2",wmode:"transparent",css:{".sIFR-root":{"color":"#aeab8d","text-transform":"lowercase","font-size":"24px"}}});};ag.sifr.config.choosemomcard=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#mdchoose h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-transform":"lowercase"}}});};ag.sifr.config.choosemomcard2=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#mdchoose h2",wmode:"transparent",css:{".sIFR-root":{"color":"#484848","text-transform":"lowercase"}}});};ag.sifr.config.choosemomcard3=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#mdchoose .momintrot h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-transform":"lowercase"}}});};ag.sifr.config.mompopup=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#agi-flashAlbum-popUp h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-transform":"lowercase"}}});};ag.sifr.config.mompageview=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#momviewpd .momreport h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-transform":"lowercase","text-align":"right"}}});};ag.sifr.config.mompageview2=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#momviewpd .momforward h1",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-transform":"lowercase","text-align":"right"}}});};ag.sifr.config.mompageview3=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#momviewpd .momviewtrib h2",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-transform":"lowercase","text-align":"center"}}});};ag.sifr.config.momstep1=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:"#mdcustom2 h2",wmode:"transparent",css:{".sIFR-root":{"color":"#808080","text-transform":"lowercase","text-align":"left"}}});};ag.sifr.config.mompreview=function(){ag.sifr.sIFR.replace(ag.sifr.config.helneu,{selector:".agi-face-tribmsg",wmode:"transparent",css:{".sIFR-root":{"color":"#ee353d","text-transform":"lowercase","text-align":"left"}}});};}if(!dojo._hasResource["ag.widget._base"]){dojo._hasResource["ag.widget._base"]=true;dojo.provide("ag.widget._base");(function(){var w=ag.widget;dojo.mixin(w,{toString:function(){return "AGWidget";},__culprit__:"$Author: dbuch $"});w.placeOffScreen=function(_f9){var _fa=false;var st=_f9.style;var _fb=st.top||"0px";var _fc=st.left||"0px";try{_fa=(parseInt(_fb.replace(/px|pt|em/g,""),10)<0&&parseInt(_fc.replace(/px|pt|em/g,""),10)<0);}catch(e){}if(_fa){return;}else{var _fd=_f9.id||"<NO ID>";st.left="-9999px";st.top="-9999px";return;}};w.getSize=function(_fe){ret=dojo.marginBox(_fe);ret.w=_fe.offsetWidth;ret.h=_fe.offsetHeight;return ret;};w.placeBeside=function(_ff,_100,_101,_102,_103){_103=_103||true;var c={};var d={};var toPx=ag.util.toPx;var pToS=ag.util.posToString;var _104=dijit.getViewport();_101=_101||0;d.node=dojo.byId(_ff);c.node=dojo.byId(_100);c.pos=ag.util.getPosition(c.node);c.size=this.getSize(c.node);d.size=this.getSize(d.node);var side="right";var _105=(c.pos.x+d.size.w+c.size.w+_102);var _106=(c.pos.x-d.size.w-_102-(_104.l||0));var topY=(c.pos.y+_101);d.bottomEdge=(topY+d.size.h);d.topEdge=topY;if((d.bottomEdge-_104.t)>_104.h){topY=((_104.h-d.size.h)+_104.t);}else{if(d.topEdge<(_104.t||0)){topY=(_104.t||0);}}var best={position:"absolute",top:toPx(topY),left:null};if(_105<_104.w){best.left=toPx(c.pos.x+c.size.w);side="right";}else{if(_106>0){best.left=toPx(c.pos.x-d.size.w);side="left";}else{best.left=toPx((c.pos.x+(c.size.w/2))-(d.size.w/2));side="center";}}if(_103){dojo.style(d.node,best);}return {newPosition:best,side:side};};w.placeInCenter=function(_107){_107=_107||dojo.doc.createElement("div");var toPx=ag.util.toPx;var pToS=ag.util.posToString;var _108=dijit.getViewport();var _109=this.getSize(_107);var newX=_108.l+(_108.w-_109.w)/2;var newY=_108.t+(_108.h-_109.h)/2;var best={left:toPx(newX),top:toPx(newY),position:"absolute"};dojo.style(_107,best);best.x=newX;best.y=newY;return best;};w.getResultsPaneTopCenter=function(){var _10a=dijit.byId("docpane");var _10b=dijit.getViewport();var ret={};if(!_10a){ret.x=((_10b.w/2)-_10b.l);ret.y=((_10b.h/2)-_10b.t);}else{var p={};p.size=this.getSize(_10a.domNode);p.pos=ag.util.getPosition(_10a.domNode);ret.x=((p.size.w/2)-_10b.l)+p.pos.x;ret.y=_10b.t+p.pos.y;}return ret;};w.adjustPosition=function(id,adj,rel,_10c){var node=dojo.byId(id);var pos=rel||ag.util.getPosition(node);var _10d={x:pos.x+adj.x,y:pos.y+adj.y};_10c=_10c||["BR","BL","TR","TL"];dijit.placeOnScreen(node,_10d,_10c,false);return _10d;};})();}if(!dojo._hasResource["ag.widget"]){dojo._hasResource["ag.widget"]=true;dojo.provide("ag.widget");}if(!dojo._hasResource["ag.widget._TemplatedWidget"]){dojo._hasResource["ag.widget._TemplatedWidget"]=true;dojo.provide("ag.widget._TemplatedWidget");ag.widget._TemplatedWidget=agi.widget._TemplatedWidget;}if(!dojo._hasResource["ag.widget._ProtoDetailPane"]){dojo._hasResource["ag.widget._ProtoDetailPane"]=true;dojo.provide("ag.widget._ProtoDetailPane");dojo.declare("ag.widget._ProtoDetailPane",[ag.widget.AGContentPane,ag.widget._TemplatedWidget,ag.classes.Publisher],{templatePath:null,title:null,synopsis:null,product_number:null,display_url:null,connectId:null,big_thumb_url:null,price:null,imghost:null,imgbase:null,ahost:null,khost:null,path_number:null,rating_pct:null,rating_owned:null,fromNode:true,fromAjax:false,qsToggle:null,BUILD_DELAY:null,TITLE_QUERY:null,SYNOPSIS_QUERY:null,DISPLAY_URL_QUERY:null,BIG_THUMB_URL_QUERY:null,FORMAT_QUERY:null,QS_TOGGLE_QUERY:null,QS_TOGGLE_ID_BASE:null,postMixinProperties:function(){this._connectNode=dojo.byId(this.connectId);},buildRendering:function(){if(this.autoPublishBuild&&this.publishBuildBegin){this.publishBuildBegin();}this.inherited(arguments);this.delayBuildTimer=setTimeout(dojo.hitch(this,function(){this.delayedBuild();if(this.autoPublishBuild){this.publishBuildComplete();}}),this.BUILD_DELAY);},delayedBuild:function(){this.isBuilt=true;}});}if(!dojo._hasResource["ag.widget.QuickSendPane"]){dojo._hasResource["ag.widget.QuickSendPane"]=true;dojo.provide("ag.widget.QuickSendPane");dojo.declare("ag.widget.QuickSendPane",[ag.widget._ProtoDetailPane],{templateString:"<div>\n<div class=\"agi-tabless\">\n    <span class=\"card-details clickable\">\n        <img src=\"{{imghost}}/{{imgbase}}/details/gray_card_details.gif\"\n            width=\"112\"\n            height=\"18\"\n            alt=\"card details\"\n            border=\"0\"\n            id=\"card-detail-toggle-{{id}}\"/>\n    </span>\n    <span>\n        <img src=\"{{imghost}}/{{imgbase}}/details/red_quick_send.gif\"\n            width=\"108\"\n            height=\"18\"\n            alt=\"quick send\"\n            border=\"0\"\n            title=\"quick send\"\n            id=\"quick-send-toggle-{{id}}\"/>\n    </span>\n    <br style=\"clear:both;\" />\n</div>\n\n<div class=\"agi-quickpad\">\n<div class=\"agi-formpage\">\n    <form action=\"{{khost}}/ecards/custom.pd\"\n        id=\"input-form-{{id}}\"\n        method=\"POST\">\n        <fieldset>\n        <div class=\"agi-poppertitle\">to</div>\n        <label for=\"toemail-{{id}}\">email</label>\n        <span>\n            <textarea cols=\"60\"\n                rows=\"2\"\n                name=\"toemail\"\n                id=\"toemail-{{id}}\"\n                class=\"to-email\"></textarea>\n        </span>\n        </fieldset>\n        <fieldset>\n        <div class=\"agi-poppertitle\">from</div>\n        <label for=\"{{id}}-fromname\">name</label>\n        <span><input id='{{id}}-fromname' type='text'\n            maxlength=75 name='fromname' value='{{full_name}}'/>\n        </span>\n        <label for=\"{{id}}-fromemail\">email</label>\n        <span><input id='{{id}}-fromemail' type='text'\n            maxlength=75 name='fromemail' class='agi-lazyinput'\n            disabled='disabled'  value='{{email_address}}'/>\n        </span>\n        <label for=\"{{id}}-frommessage\">message</label>\n        <span>\n            <textarea name=\"pn1465\"\n                id=\"{{id}}-frommessage\"\n                class=\"quicksend-message\"></textarea>\n        </span>\n        </fieldset>\n        <div class=\"agi-buttons\">\n            <div class=\"agi-button\">\n                <input type=\"image\"\n                    id=\"send-button-{{id}}\"\n                    class=\"send-button\"\n                    src=\"{{imghost}}/{{imgbase}}/button/sendecard.gif\"\n                    style=\"width:110px;height:20px;\" />\n            </div>\n            <div class=\"agi-button\">\n                <input type=\"image\"\n                    id=\"preview-button-{{id}}\"\n                    class=\"preview-button\"\n                    src=\"{{imghost}}/{{imgbase}}/button/preview.gif\"\n                    style=\"width:80px;height:20px;\" />\n            </div>\n        </div>\n        <input type=\"hidden\" name=\"action\" value=\"\" />\n        <input type=\"hidden\" name=\"prodnum\" value=\"{{product_number}}\" />\n        <input type=\"hidden\" name=\"path\" value=\"{{path_number}}\" />\n        <input type=\"hidden\" name=\"blnquicksend\" value=\"1\"/>\n        <input type=\"hidden\" name=\"navtype\" value=\"qsend\"/>\n        <input type=\"hidden\" name=\"notify_nopickup\" value=\"Y\" />\n        <input type=\"hidden\" name=\"reply_request\" value=\"Y\" />\n        <input type=\"hidden\" name=\"cc_sender\" value=\"Y\" />\n    </form>\n</div>\n</div>\n</div>\n",ahost:"",customer_type:"free",display_url:"",email_address:"",from_email:"",from_name:"",full_name:"",imgbase:"agbeta",imghost:"",khost:"",path_number:"",product_number:"",autoPublishBuild:true,delayBuildTimer:null,inputForm:null,sendButton:null,previewButton:null,detailToggle:null,qsToggle:null,toEmailTextarea:null,fromEmailInput:null,BUILD_BEGIN_EVENT_TMPL:"/quicksend-pane-${id}/build/begin/",BUILD_COMPLETE_EVENT_TMPL:"/quicksend-pane-${id}/build/complete/",LAZY_INPUT_CLASS:"agi-lazyinput",BUILD_DELAY:200,INPUT_FORM_QUERY:null,INPUT_FORM_ID_BASE:"input-form-",DETAIL_TOGGLE_QUERY:null,DETAIL_TOGGLE_ID_BASE:"card-detail-toggle-",FROMEMAIL_INPUT_BASE:"-fromemail",FROMEMAIL_INPUT_QUERY:null,SEND_BUTTON_QUERY:null,SEND_BUTTON_ID_BASE:"send-button-",PREVIEW_BUTTON_QUERY:null,PREVIEW_BUTTON_ID_BASE:"preview-button-",TOEMAIL_TEXTAREA_ID_BASE:"toemail-",TOEMAIL_TEXTAREA_QUERY:null,getAddress:function(){if(!this.toEmailTextarea){return;}try{agx.currentPage.controller.connectAutoComplete(this.toEmailTextarea.id,agx.currentPage.customerIsSignedIn);}catch(e){connectAutoComplete(this.toEmailTextarea.id);}},buildRendering:function(){this.getQueries();this.inherited(arguments);},delayedBuild:function(){this.getFormAndButtons();this.connectButtonEvents();this.inherited(arguments);},getQueries:function(){this.INPUT_FORM_QUERY=this.INPUT_FORM_ID_BASE+this.id;this.DETAIL_TOGGLE_QUERY=this.DETAIL_TOGGLE_ID_BASE+this.id;this.SEND_BUTTON_QUERY=this.SEND_BUTTON_ID_BASE+this.id;this.PREVIEW_BUTTON_QUERY=this.PREVIEW_BUTTON_ID_BASE+this.id;this.TOEMAIL_TEXTAREA_QUERY=this.TOEMAIL_TEXTAREA_ID_BASE+this.id;this.FROMEMAIL_INPUT_QUERY=this.id+this.FROMEMAIL_INPUT_BASE;},getFormAndButtons:function(){this.sendButton=dojo.byId(this.SEND_BUTTON_QUERY);this.previewButton=dojo.byId(this.PREVIEW_BUTTON_QUERY);this.inputForm=dojo.byId(this.INPUT_FORM_QUERY);this.detailToggle=dojo.byId(this.DETAIL_TOGGLE_QUERY);this.toEmailTextarea=dojo.byId(this.TOEMAIL_TEXTAREA_QUERY);this.fromEmailInput=dojo.byId(this.FROMEMAIL_INPUT_QUERY);},connectButtonEvents:function(){if(this.inputForm){this.connect(this.inputForm,"onsubmit",this._OnSubmit);}if(this.sendButton){this.connect(this.sendButton,"onclick",this._sendOnClick);}if(this.previewButton){this.connect(this.previewButton,"onclick",this._previewOnClick);}if(this.toEmailTextarea){this.connect(this.toEmailTextarea,"onfocus",this.getAddress);}if(this.fromEmailInput){if(!dojo.trim(this.fromEmailInput.value)){this.fromEmailInput.disabled=false;dojo.removeClass(this.fromEmailInput,this.LAZY_INPUT_CLASS);}}},_OnSubmit:function(){return ag.util.debounce(this.inputForm,null,20);},_sendOnClick:function(){if(this.inputForm){this.inputForm.action.value="send";this.inputForm.action.name="btnSend";}},_previewOnClick:function(){if(this.inputForm){this.inputForm.action.value="preview";this.inputForm.action.name="btnPreview";}}});}if(!dojo._hasResource["ag.widget.FreeQuickSendPane"]){dojo._hasResource["ag.widget.FreeQuickSendPane"]=true;dojo.provide("ag.widget.FreeQuickSendPane");dojo.declare("ag.widget.FreeQuickSendPane",[ag.widget.QuickSendPane],{templateString:"<div>\n    <div class=\"agi-tabless\">\n        <span class=\"clickable\">\n            <img src=\"{{imghost}}/{{imgbase}}/details/gray_card_details.gif\" \n                width=\"112\" \n                height=\"18\" \n                alt=\"card details\" \n                border=\"0\" \n                id=\"card-detail-toggle-{{id}}\"/>\n        </span>\n        <span>\n            <img src=\"{{imghost}}/{{imgbase}}/details/red_quick_send.gif\" \n                width=\"108\" \n                height=\"18\" \n                alt=\"quick send\" \n                border=\"0\" \n                title=\"quick send\"\n                id=\"quick-send-toggle-{{id}}\"/>\n        </span>\n        <br clear=\"all\" />\n    </div>\n    <div class=\"agi-quickpad\">\n        <p>You must be a paid member to quick send a card. \n            Please sign in or join now to send.</p>\n    </div>\n\t\t<div class=\"agi-buttons\">\n        <div class=\"agi-button\">\n            <a href=\"javascript:agx.currentPage.doJoin()\"><img \n                src=\"{{imghost}}/{{imgbase}}/button/joinnow.gif\" \n                border=\"0\"\n                id=\"join-now-button-{{id}}\"/></a>\n        </div>\n        <div class=\"agi-button\">\n            <a href=\"{{display_url}}\"><img \n                src=\"{{imghost}}/{{imgbase}}/button/viewecard.gif\" \n                border=\"0\" \n                width=\"110\" \n                height=\"20\" \n                alt=\"view ecard\" \n                title=\"view ecard\"\n                id=\"view-card-button-{{id}}\"/></a>\n        </div>\n    </div>\n</div>     \n",BUILD_DELAY:300});}if(!dojo._hasResource["ag.widget.ProductDetailPane"]){dojo._hasResource["ag.widget.ProductDetailPane"]=true;dojo.provide("ag.widget.ProductDetailPane");dojo.declare("ag.widget.ProductDetailPane",[ag.widget._ProtoDetailPane],{templateString:"<div>\n<div class=\"agi-tabless\">\n    <span> \n        <img src=\"{{imghost}}/{{imgbase}}/details/card_details.gif\" \n            width=\"112\" \n            height=\"18\" \n            alt=\"ecard detail\" \n            border=\"0\" \n            title=\"ecard detail\" \n            id=\"card-detail-toggle-{{id}}\"/>\n    </span>\n    <span class=\"quicksend-button clickable\">  \n        <img src=\"{{imghost}}/{{imgbase}}/details/quick_send.gif\" \n            width=\"108\" \n            height=\"18\" \n            alt=\"quick send\" \n            border=\"0\" \n            title=\"quick send\" \n            id=\"quick-send-toggle-{{id}}\"/>\n    </span>\n    <br clear=\"all\" />\n</div>\n<div class=\"detail-panel\" id=\"detail-panel-{{product_number}}\" > \n    <div class=\"agi-largethumb\">\n        <a href=\"{{display_url}}\"><img \n            id=\"largethumb-{{product_number}}\" \n            src=\"{{big_thumb_url}}\" \n            width=\"200\" \n            height=\"108\" \n            alt=\"{{title}}\" \n            border=\"0\" \n            title=\"{{title}}\" /></a>\n    </div>\n</div>\n<div id=\"agi-largethumbdetail\">\n    <h2>{{title}}</h2>\n    <p><strong>ecard message</strong>\n      {{synopsis}} \n    </p>    \n    <div class=\"agi-button\">\n        <a class=\"agi-button-red-dflt\" href=\"{{display_url}}\">\n\t\t\t\t\t<div class=\"agi-button-inner\">\n\t\t\t\t\t\t<div class=\"agi-button-copy\">view ecard</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n    </div>\n</div>\n</div> \n",autoPublishBuild:true,BUILD_BEGIN_EVENT_TMPL:"/detail-pane-${id}/build/begin",BUILD_COMPLETE_EVENT_TMPL:"/detail-pane-${id}/build/complete",BUILD_DELAY:200,TITLE_QUERY:"a.title",SYNOPSIS_QUERY:"dd.synopsis",DISPLAY_URL_QUERY:"a.title",BIG_THUMB_URL_QUERY:"img.big-thumb",FORMAT_QUERY:"dd.format",QS_TOGGLE_ID_BASE:"quick-send-toggle-",delayedBuild:function(){this.getToggleButton();this.inherited(arguments);},getToggleButton:function(){this.QS_TOGGLE_QUERY=this.QS_TOGGLE_ID_BASE+this.id;this.qsToggle=dojo.byId(this.QS_TOGGLE_QUERY);}});}if(!dojo._hasResource["ag.widget._ProtoPopper"]){dojo._hasResource["ag.widget._ProtoPopper"]=true;dojo.provide("ag.widget._ProtoPopper");dojo.declare("ag.widget._ProtoPopper",[ag.widget._TemplatedWidget,ag.classes.Publisher],{templatePath:"",templateString:"",templateCssPath:"",ahost:null,big_thumb_url:null,customer_type:null,customer_status:null,display_url:null,email_address:null,format:null,full_name:null,imgbase:null,imghost:null,khost:null,mature_message:null,path:null,price:null,product_number:null,small_thumb_url:null,synopsis:null,title:null,isLoaded:false,isMature:false,isQuickSend:true,isCentered:false,autoPublishBuild:false,connectEvents:[],dataId:null,connectId:[],_connectHandles:[],_winOnScrollHandle:null,_winOnResizeHandle:null,DetailPaneClass:null,QuickSendPaneClass:null,srcNodeRef:null,fromNode:true,fadeInArgs:null,fadeOutArgs:null,quickSendPaneExtraArgs:null,detailPaneExtraArgs:null,buildRenderingFuncs:[],_bgIframe:null,_quickSendPane:null,_productDetailPane:null,_dataNode:null,_connectNode:null,_connectNodes:[],_fadeIn:null,_fadeOut:null,_fadeInConn:null,_fadeOutConn:null,_showTimer:null,_hideTimer:null,BUILD_BEGIN_EVENT_TMPL:null,BUILD_COMPLETE_EVENT_TMPL:null,DETAIL_PANE_ID_SUFFIX:null,HIDE_DELAY:null,MATURE_MESSAGE:null,OPEN_DOMNODE_MAX_PADDING:null,OPEN_DOMNODE_POSITION:null,OPEN_DOMNODE_VISIBILITY:null,OPEN_DOMNODE_VOFFSET:null,OPEN_DOMNODE_ZINDEX:null,QUICKSEND_PANE_ID_SUFFIX:null,SHOW_DELAY:null,FADE_DELAY:null,BIG_THUMB_URL_QUERY:null,CLOSE_ELEMENT_QUERY:null,CUSTOMER_TYPE_QUERY:null,DISPLAY_URL_QUERY:null,FORMAT_QUERY:null,ISMATURE_QUERY:null,PATH_QUERY:null,PRICE_QUERY:null,QUICKSEND_STATUS_QUERY:null,SMALL_THUMB_URL_QUERY:null,SYNOPSIS_QUERY:null,TITLE_QUERY:null,postMixInProperties:function(){if(dojo.isString(this.connectId)){this.connectId=[this.connectId];}this.parent=null;},buildRendering:function(){this.publishBuildBegin();this._dataNode=dojo.byId(this.dataId);this.getMatureFlag();this.getFormatNode();this.inherited(arguments);this._connectNode=dojo.byId(this.connectId[0]);this._dataNode=dojo.byId(this.dataId);if(this.fromNode){this.getQuickSendStatus();this.getProductNumber();this.getTitle();this.getPrice();this.getSynopsis();this.getDisplayUrl();this.getThumbUrls();this.getCustomerType();this.getPathNode();this.buildFaders();this.connectToFaders();dojo.forEach(this.buildRenderingFuncs,dojo.hitch(this,function(f){this[f]();}));}this.getCustomerStatus();if(this.customer_type!="free"||this.customer_status==5){this.getCustomerInfo();}var _10e;if(this.customer_type=="free"&&parseInt(this.price,10)!==0){_10e=this.FreeQuickSendPaneClass;}else{_10e=this.QuickSendPaneClass;}if(this.fromNode){this.buildQuickSendPane(_10e);this.buildDetailPane();this.connectCloseX();}this.publishBuildComplete();},getCustomerStatus:function(){var _10f=agi.cookie.AGICookie.getCookieName("customer");this.customer_status=agi.cookie.AGICookie.getCookieValue(_10f,"status");},getProductNumber:function(){this.product_number=this._dataNode.id;},getCustomerInfo:function(){this.email_address=agi.cookie.AGICookie.getCookieValue("customer","email");if(this.email_address=="null"){this.email_address="";}var _110=agi.cookie.AGICookie.getCookieValue("customer","name");var _111=agi.cookie.AGICookie.getCookieValue("customer","lname");var _112=function(s){var ret=s;if(!s){ret="";}else{if(s&&dojo.trim(s)=="null"){ret="";}}return ret;};this.full_name=_112(_110)+" "+_112(_111);},getQuickSendStatus:function(){var qs=agi.util.query_one(this.QUICKSEND_STATUS_QUERY,this._dataNode).firstChild.nodeValue;if(qs.indexOf("True")>-1){this.isQuickSend=true;}else{this.isQuickSend=false;}},disableQuickSend:function(){dojo.addClass(this.domNode,"non-quicksend");},getTitle:function(){this.title=agi.util.query_one(this.TITLE_QUERY,this._dataNode).getAttribute("title");},getPrice:function(){this.price=agi.util.query_one(this.PRICE_QUERY,this._dataNode).firstChild.nodeValue;},getSynopsis:function(){var _113="";synopsisNode=agi.util.query_one(this.SYNOPSIS_QUERY,this._dataNode);if(synopsisNode.firstChild!==null){_113=synopsisNode.innerHTML;}this.synopsis=agi.util.truncate(_113,250);},getDisplayUrl:function(){this.display_url=agi.util.query_one(this.DISPLAY_URL_QUERY,this._dataNode).getAttribute("href");},getThumbUrls:function(){this.big_thumb_url=agi.util.query_one(this.BIG_THUMB_URL_QUERY,this._dataNode).firstChild.nodeValue;this.small_thumb_url=agi.util.query_one(this.SMALL_THUMB_URL_QUERY,this._dataNode).getAttribute("src");},getMatureFlag:function(){mature_nodes=dojo.query(this.ISMATURE_QUERY,this._dataNode);if(mature_nodes.length>0){mature=mature_nodes[0].firstChild.nodeValue;if(mature.indexOf("1")>-1){this.isMature=true;}else{this.isMature=false;}if(this.isMature){this.mature_message=this.MATURE_MESSAGE;}else{this.mature_message="";}}else{this.mature_message="";}},getCustomerType:function(){var _114=agi.util.query_one(this.CUSTOMER_TYPE_QUERY,this._dataNode);if(_114.hasChildNodes()){var cust=_114.firstChild.nodeValue;if(cust.indexOf("free")>-1){this.customer_type="free";}else{this.customer_type="pay";}}},getFormatNode:function(){var _115=agi.util.query_one(this.FORMAT_QUERY,this._dataNode);if(_115.hasChildNodes()){this.format=_115.firstChild.nodeValue;}},getPathNode:function(){var _116=agi.util.query_one(this.PATH_QUERY,this._dataNode);if(_116.hasChildNodes()){this.path=_116.firstChild.nodeValue;}},connectToFaders:function(){dojo.disconnect(this._fadeInConn);dojo.disconnect(this._fadeOutConn);this._fadeInConn=dojo.connect(this._fadeIn,"beforeBegin",this,this.preFadeIn);this._fadeOutConn=dojo.connect(this._fadeOut,"onEnd",this,this.postFadeOut);},buildFaders:function(){var a={};if(!this.fadeInArgs){a.node=this.domNode;a.duration=this.FADE_DELAY;this.fadeInArgs=a;}if(!this.fadeOutArgs){a.node=this.domNode;a.duration=this.FADE_DELAY;this.fadeOutArgs=a;}this._fadeIn=dojo.fadeIn(this.fadeInArgs);this._fadeOut=dojo.fadeOut(this.fadeOutArgs);},preFadeIn:function(){dojo.style(this.domNode,{visibility:""});},postFadeOut:function(){ag.widget.placeOffScreen(this.domNode);this.isShowingNow=false;this.showDetailPane();this.postCreate();},destroy:function(_117){this.parent=null;this.inherited(arguments);},prepare:function(node){var s=node.style;s.visibility="hidden";s.position="absolute";s.top="-9999px";if(s.display=="none"){s.display="";}dojo.body().appendChild(node);},_setUpTearDown:function(_118){this._connectNodes=[];var _119=[this.domNode];if(this._connectHandles){dojo.forEach(this._connectHandles,dojo.hitch(this,function(_11a){try{this.disconnect(_11a);}catch(e){}}));this._connectHandles=[];}if(_118=="disconnect"){return;}dojo.forEach(this.connectId,function(id){if(id.indexOf("small-thumb")!=-1){try{this._connectNode=dojo.byId(id);_119.push(this._connectNode);}catch(e){}}},this);dojo.forEach(_119,function(id){var node=dojo.byId(id);try{this._connectNodes.push(node);dojo.forEach(this.connectEvents,dojo.hitch(this,function(evts){var _11b=this[_118](node,evts[0],evts[1]);this._connectHandles.push(_11b);}));if(dojo.isIE){dojo.style(node,{zoom:1});}}catch(e){}},this);this.prepare(this.domNode);},_disconnectFromWindowEvents:function(){this.disconnect(this._winOnScrollHandle);this.disconnect(this._winOnResizeHandle);},_connectToWindowEvents:function(){this._winOnScrollHandle=this.connect(window,"onscroll","layout");this._winOnResizeHandle=this.connect(window,"onresize","layout");},postCreate:function(){this._setUpTearDown("connect");if(!this._bgIframe&&dojo.isIE){this._bgIframe=new dijit.BackgroundIframe(this.domNode);}},uninitialize:function(){this._setUpTearDown("disconnect");this.stopFadeIn();this.stopFadeOut();this.inherited(arguments);},getConnectNode:function(){dojo.forEach(this._connectNodes,dojo.hitch(this,function(node){var _11c=node.id;if(_11c.indexOf("small-thumb")>-1){this._connectNode=node;}}));},open:function(_11d){try{this.stopShowTimer();this.stopHideTimer();this._disconnectFromWindowEvents();this._connectToWindowEvents();this.layout(null,_11d);this._completePop();this.isShowingNow=true;}catch(e){}},layout:function(evt,_11e){dojo.style(this.domNode,{position:this.OPEN_DOMNODE_POSITION,visibility:this.OPEN_DOMNODE_VISIBILITY,zIndex:this.OPEN_DOMNODE_ZINDEX});var pt=_11e||this.point;if(pt){this._popHere(pt);}else{if(this.isCentered){this._popCenter();}else{this._popToSide();}}},startup:function(){if(!this._started){this.aboutToShow();}this.inherited(arguments);},getProductDetailPaneHandle:function(_11f){var ret=dojo.string.substitute(_11f.prototype.BUILD_COMPLETE_EVENT_TMPL,{id:this.id+this.DETAIL_PANE_ID_SUFFIX});return ret;},buildDetailPane:function(){var _120=ag.widget[this.DetailPaneClass];var _121={ahost:this.ahost,big_thumb_url:this.big_thumb_url,connectId:this._connectNode.id,customer_type:this.customer_type,display_url:this.display_url,email_address:this.email_address,fromNode:false,full_name:this.full_name,id:this.id+this.DETAIL_PANE_ID_SUFFIX,imgbase:this.imgbase,imghost:this.imghost,isMature:this.isMature,khost:this.khost,path_number:this.path,price:this.price,product_number:this.product_number,synopsis:this.synopsis,title:this.title};if(this.detailPaneExtraArgs){dojo.mixin(_121,this.detailPaneExtraArgs);}this._productDetailPane=new _120(_121);this.domNode.appendChild(this._productDetailPane.domNode);dojo.subscribe(this.getProductDetailPaneHandle(_120),dojo.hitch(this,function(){if(this._productDetailPane.qsToggle){this.connect(this._productDetailPane.qsToggle,"onclick",this.showQuickSendPane);}}));},getQuickSendPaneHandle:function(_122){var ret=dojo.string.substitute(_122.prototype.BUILD_COMPLETE_EVENT_TMPL,{id:this.id+this.QUICKSEND_PANE_ID_SUFFIX});return ret;},quickDetailToggle:function(){this.connect(this._quickSendPane.detailToggle,"onclick",this.showDetailPane);},buildQuickSendPane:function(_123){if(!this.isQuickSend){this.disableQuickSend();}var _124=ag.widget[_123];if(!_124){_124=ag.widget[this.QuickSendPaneClass];}var _125={ahost:this.ahost,connectId:this._connectNode.id,customer_type:this.customer_type,display_url:this.display_url,email_address:this.email_address,fromNode:false,full_name:this.full_name,id:this.id+this.QUICKSEND_PANE_ID_SUFFIX,imgbase:this.imgbase,imghost:this.imghost,isMature:this.isMature,khost:this.khost,path_number:this.path,product_number:this.product_number};if(this.quickSendPaneExtraArgs){dojo.mixin(_125,this.quickSendPaneExtraArgs);}this._quickSendPane=new _124(_125);this.domNode.appendChild(this._quickSendPane.domNode);dojo.subscribe(this.getQuickSendPaneHandle(_124),dojo.hitch(this,function(){this.connect(this._quickSendPane.detailToggle,"onclick",this.showDetailPane);}));},aboutToShow:function(){dojo._setOpacity(this.domNode,0);agi.util.hide(this._quickSendPane.domNode);agi.util.show(this._productDetailPane.domNode);},close:function(){if(!this.isShowingNow){return;}this.stopListening();if(this._fadeIn&&this._fadeIn.status()=="playing"){this._fadeIn.stop();}this.stopHideTimer();this.stopShowTimer();this._fadeOut.play();},startShowTimer:function(){if(!this.isShowingNow){if(!this._showTimer){this._showTimer=setTimeout(dojo.hitch(this,function(){this.open();}),this.SHOW_DELAY);}}else{}},stopShowTimer:function(){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},stopHideTimer:function(){if(this._hideTimer){clearTimeout(this._hideTimer);delete this._hideTimer;}},setDetailPane:function(pane){this._productDetailPane=pane;},setQuickSendPane:function(pane){this._quickSendPane=pane;},showDetailPane:function(){agi.util.hide(this._quickSendPane.domNode);agi.util.show(this._productDetailPane.domNode);},showQuickSendPane:function(){agi.util.hide(this._productDetailPane.domNode);agi.util.show(this._quickSendPane.domNode);this.uninitialize();dojo.connect(this,"showDetailPane",this,this.postCreate);},connectCloseX:function(){this.connect(agi.util.q1(this.CLOSE_ELEMENT_QUERY,this.domNode),"onclick",this.forceClose);},forceClose:function(){this.close();},_onMouseOver:function(evt){if(this._hideTimer){this.stopHideTimer();return;}this.startShowTimer();},_onMouseOut:function(evt){if(this._showTimer){this.stopShowTimer();return;}else{if(!this.isShowingNow){return;}}if(dojo.isDescendant(evt.relatedTarget,evt.target)){return;}if(this.isShowingNow){this._hideTimer=setTimeout(dojo.hitch(this,function(){dojo.hitch(this,this.close());}),this.HIDE_DELAY);}},_popToSide:function(){var _126=ag.widget.placeBeside(this.domNode,this._connectNode,this.OPEN_DOMNODE_VOFFSET,this.OPEN_DOMNODE_MAX_PADDING,false);this._position(_126);dojo.addClass(this._connectNode,"popped_"+_126.side);},_popHere:function(_127){var _128={left:agi.util.toPx(_127.x),top:agi.util.toPx(_127.y)};this._position(_128);},_popCenter:function(){var toPx=agi.util.toPx;var _129=ag.widget.getSize(this.domNode);var rel=ag.widget.getResultsPaneTopCenter();var _12a={left:toPx(rel.x-(_129.w/2)),top:toPx(rel.y-(_129.h/2))};this._position(_12a);},_position:function(pos){dojo.style(this.domNode,pos);},_completePop:function(){this.stopFadeOut();this._fadeIn.play();},stopFadeOut:function(){if(this._fadeOut&&this._fadeOut.status()=="playing"){this._fadeOut.stop();}},stopFadeIn:function(){if(this._fadeIn&&this._fadeIn.status()=="playing"){this._fadeIn.stop();}},stopListening:function(){this._hover=false;this.uninitialize();this._disconnectFromWindowEvents();}});}if(!dojo._hasResource["ag.widget.Popper"]){dojo._hasResource["ag.widget.Popper"]=true;dojo.provide("ag.widget.Popper");dojo.declare("ag.widget.Popper",[ag.widget._ProtoPopper],{templateString:"<div \n    style=\"display:none;position:absolute;\"\n    id=\"popper-contents\" \n    class=\"agi-detailpopup\">\n\n    <div class=\"agi-close\">\n        <span>{{format}} {{mature_message}}</span>     \n        <img class=\"pop-closer\" src=\"{{imghost}}/{{imgbase}}/x.gif\"/> \n    </div>\n</div>\n",templateCssPath:"",ahost:"",big_thumb_url:"",customer_type:"free",display_url:"",email_address:"",format:"",fromNode:true,full_name:"",imgbase:"agbeta",imghost:"",khost:"",mature_message:"",path:"",price:1,product_number:"",small_thumb_url:"",synopsis:"",title:"",isLoaded:false,isMature:false,isQuickSend:true,publishBuild:true,connectEvents:[["onmouseover","_onMouseOver"],["onmouseout","_onMouseOver"],["onmouseout","_onMouseOut"]],dataId:null,connectId:[],DetailPaneClass:"ProductDetailPane",QuickSendPaneClass:"QuickSendPane",FreeQuickSendPaneClass:"FreeQuickSendPane",fadeInArgs:null,fadeOutArgs:null,BUILD_BEGIN_EVENT_TMPL:"/popper-${id}/build/begin",BUILD_COMPLETE_EVENT_TMPL:"/popper-${id}/build/complete",DETAIL_PANE_ID_SUFFIX:"-product-detail-pane",HIDE_DELAY:200,MATURE_MESSAGE:" (mature)",OPEN_DOMNODE_MAX_PADDING:20,OPEN_DOMNODE_POSITION:"absolute",OPEN_DOMNODE_VISIBILITY:"visible",OPEN_DOMNODE_VOFFSET:-80,OPEN_DOMNODE_ZINDEX:300,QUICKSEND_PANE_ID_SUFFIX:"-quicksend-pane",SHOW_DELAY:800,FADE_DELAY:150,BIG_THUMB_URL_QUERY:"dd.large-preview",CLOSE_ELEMENT_QUERY:"div.agi-close",CUSTOMER_TYPE_QUERY:"dd.customertype",DISPLAY_URL_QUERY:".title",FORMAT_QUERY:"dd.format",ISMATURE_QUERY:"dd.mature",PATH_QUERY:"dd.path",PRICE_QUERY:"dd.price",QUICKSEND_STATUS_QUERY:"dd.isquicksend",SMALL_THUMB_URL_QUERY:"img.small-thumb",SYNOPSIS_QUERY:"dd.synopsis",TITLE_QUERY:".title"});}if(!dojo._hasResource["ag.widget.PopperManagerMixin"]){dojo._hasResource["ag.widget.PopperManagerMixin"]=true;dojo.provide("ag.widget.PopperManagerMixin");dojo.declare("ag.widget.PopperManagerMixin",[ag.classes._Mixin],function(){var self={};var d=dojo;d.mixin(self,{popperProducts:[],popperType:"",popperIds:[],connect_handles:{},PopperClass:undefined,POPPER_PRODUCT_QUERY:"div.product2"});self.constructor=function(){this.popperGetType();};self.popperQueryAttach=function(){this.popperProducts=[];d.query(this.POPPER_PRODUCT_QUERY).forEach(d.hitch(this,function(item){this.popperProducts.push(item.id);this.popperInitOne(item.id);}));};self.popperInitOne=function(_12b){var _12c="small-thumb-"+_12b.toString();var _12d=dojo.byId(_12c);if(_12d){this.connect_handles[_12b]=dojo.connect(_12d,"onmouseover",this,this.popperCreate);}else{}};self.popperInit=function(){if(agx.currentPage.disablePoppers){return;}if(typeof agx.currentPage.popperType!="undefined"){this.popperType=agx.currentPage.popperType;}this.popperQueryAttach();};self.popperGetType=function(){var pop="";try{pop=this.popperType.charAt(0).toUpperCase();pop+=this.popperType.substring(1).toLowerCase();}catch(e){}this.PopperClass=pop+"Popper";};self.popperGetTypeConstructor=function(){if(!ag.widget[this.PopperClass]){throw new Error(this+": you must explicitly require the popper "+"class prior to calling popperInit because of the way"+" d.require works.");}return ag.widget[this.PopperClass];};self.popperCreate=function(_12e){var _12f=_12e.target.id;var _130=_12f.split("-")[2];if(!_130){_130=_12f.split("-")[1];}var _131=ag.util.getProdId(_130);var _132=dijit.byId(_131);var _133;if(!_132){var _134=this.popperGetTypeConstructor();var _135=dojo.doc.createElement("div");_135.style.position="absolute";this.popperGetProductInfo(_130,_131);var widg=new _134(this._popperTmpInfo,_135);dojo.body().appendChild(widg.domNode);this.popperIds.push(_131);widg.startup();dojo.disconnect(this.connect_handles[_130]);widg.startShowTimer();_133=widg;}else{_132.startup();_133=_132;}return _133;};self.popperGetProductInfo=function(_136,_137){this._popperTmpInfo={imghost:this.imghost,ahost:this.ahost,khost:this.khost,imgbase:this.imgbase,connectId:["small-thumb-"+_136],dataId:_136,containerNode:d.doc.createElement("div"),id:_137};};self.popperGetAll=function(){return dijit.registry.byClass("ag.widget."+this.PopperClass.toString());};self.popperDestroyAll=function(){this.popperGetAll().forEach(function(_138){try{_138.parent=null;_138._quickSendPane.destroyRecursive();_138._productDetailPane.destroyRecursive();_138.destroyRecursive();}catch(e){}});};return self;}());}if(!dojo._hasResource["ag.classes._base"]){dojo._hasResource["ag.classes._base"]=true;dojo.provide("ag.classes._base");ag.classes=agi.classes;}if(!dojo._hasResource["ag.classes"]){dojo._hasResource["ag.classes"]=true;dojo.provide("ag.classes");}if(!dojo._hasResource["ag.widget._AGTemplated"]){dojo._hasResource["ag.widget._AGTemplated"]=true;dojo.provide("ag.widget._AGTemplated");dojo.declare("ag.widget._AGTemplated",[dijit._Templated],{__culprit__:"$Author: dbuch $"});}if(!dojo._hasResource["ag.widget._AGWidget"]){dojo._hasResource["ag.widget._AGWidget"]=true;dojo.provide("ag.widget._AGWidget");dojo.declare("ag.widget._AGWidget",[dijit._Widget],{__culprit__:"$Author: dbuch $"});}if(!dojo._hasResource["ag.dom.window"]){dojo._hasResource["ag.dom.window"]=true;dojo.provide("ag.dom.window");ag.dom.window=agi.dom.window;}if(!dojo._hasResource["agi.event"]){dojo._hasResource["agi.event"]=true;dojo.provide("agi.event");agi.event.toString=function(){return "AGEvent";};agi.event._anonCtr=0;agi.event._anon={};agi.event.nameAnonFunc=function(_139,_13a){var jpn="$joinpoint";var nso=(_13a||agi.event._anon);if(dojo.isIE){var cn=_139["__dojoNameCache"];if(cn&&nso[cn]===_139){return _139["__dojoNameCache"];}}var ret="__"+agi.event._anonCtr++;while(typeof nso[ret]!="undefined"){ret="__"+agi.event._anonCtr++;}nso[ret]=_139;return ret;};(function(){agi.event._canTimeout=dojo.isFunction(dojo.global["setTimeout"])||dojo.isAlien(dojo.global["setTimeout"]);function _13b(args,_13c){var ao={srcObj:dojo.global,srcFunc:null,adviceObj:dojo.global,adviceFunc:null,aroundObj:null,aroundFunc:null,adviceType:(args.length>2)?args[0]:"after",precedence:"last",once:false,delay:null,rate:0,adviceMsg:false};switch(args.length){case 0:return;case 1:return;case 2:ao.srcFunc=args[0];ao.adviceFunc=args[1];break;case 3:if((dojo.isObject(args[0]))&&(dojo.isString(args[1]))&&(dojo.isString(args[2]))){ao.adviceType="after";ao.srcObj=args[0];ao.srcFunc=args[1];ao.adviceFunc=args[2];}else{if((dojo.isString(args[1]))&&(dojo.isString(args[2]))){ao.srcFunc=args[1];ao.adviceFunc=args[2];}else{if((dojo.isObject(args[0]))&&(dojo.isString(args[1]))&&(dojo.isFunction(args[2]))){ao.adviceType="after";ao.srcObj=args[0];ao.srcFunc=args[1];var _13d=agi.event.nameAnonFunc(args[2],ao.adviceObj,_13c);ao.adviceFunc=_13d;}else{if((dojo.isFunction(args[0]))&&(dojo.isObject(args[1]))&&(dojo.isString(args[2]))){ao.adviceType="after";ao.srcObj=dojo.global;var _13d=agi.event.nameAnonFunc(args[0],ao.srcObj,_13c);ao.srcFunc=_13d;ao.adviceObj=args[1];ao.adviceFunc=args[2];}}}}break;case 4:if((dojo.isObject(args[0]))&&(dojo.isObject(args[2]))){ao.adviceType="after";ao.srcObj=args[0];ao.srcFunc=args[1];ao.adviceObj=args[2];ao.adviceFunc=args[3];}else{if((dojo.isString(args[0]))&&(dojo.isString(args[1]))&&(dojo.isObject(args[2]))){ao.adviceType=args[0];ao.srcObj=dojo.global;ao.srcFunc=args[1];ao.adviceObj=args[2];ao.adviceFunc=args[3];}else{if((dojo.isString(args[0]))&&(dojo.isFunction(args[1]))&&(dojo.isObject(args[2]))){ao.adviceType=args[0];ao.srcObj=dojo.global;var _13d=agi.event.nameAnonFunc(args[1],dojo.global,_13c);ao.srcFunc=_13d;ao.adviceObj=args[2];ao.adviceFunc=args[3];}else{if((dojo.isString(args[0]))&&(dojo.isObject(args[1]))&&(dojo.isString(args[2]))&&(dojo.isFunction(args[3]))){ao.srcObj=args[1];ao.srcFunc=args[2];var _13d=agi.event.nameAnonFunc(args[3],dojo.global,_13c);ao.adviceObj=dojo.global;ao.adviceFunc=_13d;}else{if(dojo.isObject(args[1])){ao.srcObj=args[1];ao.srcFunc=args[2];ao.adviceObj=dojo.global;ao.adviceFunc=args[3];}else{if(dojo.isObject(args[2])){ao.srcObj=dojo.global;ao.srcFunc=args[1];ao.adviceObj=args[2];ao.adviceFunc=args[3];}else{ao.srcObj=ao.adviceObj=ao.aroundObj=dojo.global;ao.srcFunc=args[1];ao.adviceFunc=args[2];ao.aroundFunc=args[3];}}}}}}break;case 6:ao.srcObj=args[1];ao.srcFunc=args[2];ao.adviceObj=args[3];ao.adviceFunc=args[4];ao.aroundFunc=args[5];ao.aroundObj=dojo.global;break;default:ao.srcObj=args[1];ao.srcFunc=args[2];ao.adviceObj=args[3];ao.adviceFunc=args[4];ao.aroundObj=args[5];ao.aroundFunc=args[6];ao.once=args[7];ao.delay=args[8];ao.rate=args[9];ao.adviceMsg=args[10];break;}if(dojo.isFunction(ao.aroundFunc)){var _13d=agi.event.nameAnonFunc(ao.aroundFunc,ao.aroundObj,_13c);ao.aroundFunc=_13d;}if(dojo.isFunction(ao.srcFunc)){ao.srcFunc=agi.util.getNameInObj(ao.srcObj,ao.srcFunc);}if(dojo.isFunction(ao.adviceFunc)){ao.adviceFunc=agi.util.getNameInObj(ao.adviceObj,ao.adviceFunc);}if((ao.aroundObj)&&(dojo.isFunction(ao.aroundFunc))){ao.aroundFunc=agi.util.getNameInObj(ao.aroundObj,ao.aroundFunc);}if(!ao.srcObj){agi.util.raise("bad srcObj for srcFunc: "+ao.srcFunc);}if(!ao.adviceObj){agi.util.raise("bad adviceObj for adviceFunc: "+ao.adviceFunc);}if(!ao.adviceFunc){}return ao;};agi.event.connect=function(){if(arguments.length==1){var ao=arguments[0];}else{var ao=_13b(arguments,true);}if(dojo.isString(ao.srcFunc)&&(ao.srcFunc.toLowerCase()=="onkey")){if(dojo.isIE){ao.srcFunc="onkeydown";agi.event.connect(ao);}ao.srcFunc="onkeypress";}if(dojo.isArray(ao.srcObj)&&ao.srcObj!=""){var _13e={};for(var x in ao){_13e[x]=ao[x];}var mjps=[];dojo.forEach(ao.srcObj,function(src){if((dojo.isBrowser)&&(dojo.isString(src))){src=dojo.byId(src);}_13e.srcObj=src;mjps.push(agi.event.connect.call(agi.event,_13e));});return mjps;}var mjp=agi.event.MethodJoinPoint.getForMethod(ao.srcObj,ao.srcFunc);if(ao.adviceFunc){var mjp2=agi.event.MethodJoinPoint.getForMethod(ao.adviceObj,ao.adviceFunc);}mjp.kwAddAdvice(ao);return mjp;};agi.event.log=function(a1,a2){var _13f;if((arguments.length==1)&&(typeof a1=="object")){_13f=a1;}else{_13f={srcObj:a1,srcFunc:a2};}_13f.adviceFunc=function(){var _140=[];for(var x=0;x<arguments.length;x++){_140.push(arguments[x]);}};agi.event.kwConnect(_13f);};agi.event.connectBefore=function(){var args=["before"];for(var i=0;i<arguments.length;i++){args.push(arguments[i]);}return agi.event.connect.apply(this,args);};agi.event.connectAround=function(){var args=["around"];for(var i=0;i<arguments.length;i++){args.push(arguments[i]);}return agi.event.connect.apply(this,args);};agi.event.connectOnce=function(){var ao=_13b(arguments,true);ao.once=true;return agi.event.connect(ao);};agi.event._kwConnectImpl=function(_141,_142){var fn=(_142)?"disconnect":"connect";if(typeof _141["srcFunc"]=="function"){_141.srcObj=_141["srcObj"]||dojo.global;var _143=agi.event.nameAnonFunc(_141.srcFunc,_141.srcObj,true);_141.srcFunc=_143;}if(typeof _141["adviceFunc"]=="function"){_141.adviceObj=_141["adviceObj"]||dojo.global;var _143=agi.event.nameAnonFunc(_141.adviceFunc,_141.adviceObj,true);_141.adviceFunc=_143;}_141.srcObj=_141["srcObj"]||dojo.global;_141.adviceObj=_141["adviceObj"]||_141["targetObj"]||dojo.global;_141.adviceFunc=_141["adviceFunc"]||_141["targetFunc"];return agi.event[fn](_141);};agi.event.kwConnect=function(_144){return agi.event._kwConnectImpl(_144,false);};agi.event.disconnect=function(){if(arguments.length==1){var ao=arguments[0];}else{var ao=_13b(arguments,true);}if(!ao.adviceFunc){return;}if(dojo.isString(ao.srcFunc)&&(ao.srcFunc.toLowerCase()=="onkey")){if(dojo.isIE){ao.srcFunc="onkeydown";agi.event.disconnect(ao);}ao.srcFunc="onkeypress";}if(!ao.srcObj[ao.srcFunc]){return null;}var mjp=agi.event.MethodJoinPoint.getForMethod(ao.srcObj,ao.srcFunc,true);mjp.removeAdvice(ao.adviceObj,ao.adviceFunc,ao.adviceType,ao.once);return mjp;};agi.event.kwDisconnect=function(_145){return agi.event._kwConnectImpl(_145,true);};agi.event.MethodInvocation=function(_146,obj,args){this.jp_=_146;this.object=obj;this.args=[];for(var x=0;x<args.length;x++){this.args[x]=args[x];}this.around_index=-1;};agi.event.MethodInvocation.prototype.proceed=function(){this.around_index++;if(this.around_index>=this.jp_.around.length){return this.jp_.object[this.jp_.methodname].apply(this.jp_.object,this.args);}else{var ti=this.jp_.around[this.around_index];var mobj=ti[0]||dojo.global;var meth=ti[1];return mobj[meth].call(mobj,this);}};agi.event.MethodJoinPoint=function(obj,_147){this.object=obj||dojo.global;this.methodname=_147;this.methodfunc=this.object[_147];this.squelch=false;};agi.event.MethodJoinPoint.getForMethod=function(obj,_148){if(!obj){obj=dojo.global;}if(!obj[_148]){obj[_148]=function(){};if(!obj[_148]){agi.util.raise("Cannot set do-nothing method on that object "+_148);}}else{if((!dojo.isFunction(obj[_148]))&&(!dojo.isAlien(obj[_148]))){return null;}}var _149=_148+"$joinpoint";var _14a=_148+"$joinpoint$method";var _14b=obj[_149];if(!_14b){var _14c=false;if(agi.event["browser"]){if((obj["attachEvent"])||(obj["nodeType"])||(obj["addEventListener"])){_14c=true;agi.event.browser.addClobberNodeAttrs(obj,[_149,_14a,_148]);}}var _14d=obj[_148].length;obj[_14a]=obj[_148];_14b=obj[_149]=new agi.event.MethodJoinPoint(obj,_14a);obj[_148]=function(){var args=[];if((_14c)&&(!arguments.length)){var evt=null;try{if(obj.ownerDocument){evt=obj.ownerDocument.parentWindow.event;}else{if(obj.documentElement){evt=obj.documentElement.ownerDocument.parentWindow.event;}else{if(obj.event){evt=obj.event;}else{evt=window.event;}}}}catch(e){evt=window.event;}if(evt){args.push(agi.event.browser.fixEvent(evt,this));}}else{for(var x=0;x<arguments.length;x++){if((x==0)&&(_14c)&&(agi.event.browser.isEvent(arguments[x]))){args.push(agi.event.browser.fixEvent(arguments[x],this));}else{args.push(arguments[x]);}}}return _14b.run.apply(_14b,args);};obj[_148].__preJoinArity=_14d;}return _14b;};dojo.extend(agi.event.MethodJoinPoint,{unintercept:function(){this.object[this.methodname]=this.methodfunc;this.before=[];this.after=[];this.around=[];},disconnect:agi.util.forward("unintercept"),run:function(){var obj=this.object||dojo.global;var args=arguments;var _14e=[];for(var x=0;x<args.length;x++){_14e[x]=args[x];}var _14f=function(marr){if(!marr){return;}var _150=marr[0]||dojo.global;var _151=marr[1];if(!_150[_151]){agi.util.raise("function \""+_151+"\" does not exist on \""+_150+"\"");}var _152=marr[2]||dojo.global;var _153=marr[3];var msg=marr[6];var _154;var to={args:[],jp_:this,object:obj,proceed:function(){return _150[_151].apply(_150,to.args);}};to.args=_14e;var _155=parseInt(marr[4]);var _156=((!isNaN(_155))&&(marr[4]!==null)&&(typeof marr[4]!="undefined"));if(marr[5]){var rate=parseInt(marr[5]);var cur=new Date();var _157=false;if((marr["last"])&&((cur-marr.last)<=rate)){if(agi.event._canTimeout){if(marr["delayTimer"]){clearTimeout(marr.delayTimer);}var tod=parseInt(rate*2);var mcpy=agi.util.shallowCopy(marr);marr.delayTimer=setTimeout(function(){mcpy[5]=0;_14f(mcpy);},tod);}return;}else{marr.last=cur;}}if(_153){_152[_153].call(_152,to);}else{if((_156)&&(dojo.isBrowser)){dojo.global["setTimeout"](function(){if(msg){_150[_151].call(_150,to);}else{_150[_151].apply(_150,args);}},_155);}else{if(msg){_150[_151].call(_150,to);}else{_150[_151].apply(_150,args);}}}};var _158=function(){if(this.squelch){try{return _14f.apply(this,arguments);}catch(e){}}else{return _14f.apply(this,arguments);}};if((this["before"])&&(this.before.length>0)){dojo.forEach(this.before.concat(new Array()),_158);}var _159;try{if((this["around"])&&(this.around.length>0)){var mi=new agi.event.MethodInvocation(this,obj,args);_159=mi.proceed();}else{if(this.methodfunc){_159=this.object[this.methodname].apply(this.object,args);}}}catch(e){if(!this.squelch){agi.util.raise(e);}}if((this["after"])&&(this.after.length>0)){dojo.forEach(this.after.concat(new Array()),_158);}return (this.methodfunc)?_159:null;},getArr:function(kind){var type="after";if((typeof kind=="string")&&(kind.indexOf("before")!=-1)){type="before";}else{if(kind=="around"){type="around";}}if(!this[type]){this[type]=[];}return this[type];},kwAddAdvice:function(args){this.addAdvice(args["adviceObj"],args["adviceFunc"],args["aroundObj"],args["aroundFunc"],args["adviceType"],args["precedence"],args["once"],args["delay"],args["rate"],args["adviceMsg"]);},addAdvice:function(_15a,_15b,_15c,_15d,_15e,_15f,once,_160,rate,_161){var arr=this.getArr(_15e);if(!arr){agi.util.raise("bad this: "+this);}var ao=[_15a,_15b,_15c,_15d,_160,rate,_161];if(once){if(this.hasAdvice(_15a,_15b,_15e,arr)>=0){return;}}if(_15f=="first"){arr.unshift(ao);}else{arr.push(ao);}},hasAdvice:function(_162,_163,_164,arr){if(!arr){arr=this.getArr(_164);}var ind=-1;for(var x=0;x<arr.length;x++){var aao=(typeof _163=="object")?(new String(_163)).toString():_163;var a1o=(typeof arr[x][1]=="object")?(new String(arr[x][1])).toString():arr[x][1];if((arr[x][0]==_162)&&(a1o==aao)){ind=x;}}return ind;},removeAdvice:function(_165,_166,_167,once){var arr=this.getArr(_167);var ind=this.hasAdvice(_165,_166,_167,arr);if(ind==-1){return false;}while(ind!=-1){arr.splice(ind,1);if(once){break;}ind=this.hasAdvice(_165,_166,_167,arr);}return true;}});agi.event._ie_clobber=new function(){this.clobberNodes=[];function _168(node,prop){try{node[prop]=null;}catch(e){}try{delete node[prop];}catch(e){}try{node.removeAttribute(prop);}catch(e){}};this.clobber=function(_169){var na;var tna;if(_169){tna=_169.all||_169.getElementsByTagName("*");na=[_169];for(var x=0;x<tna.length;x++){if(tna[x]["__doClobber__"]){na.push(tna[x]);}}}else{try{window.onload=null;}catch(e){}na=(this.clobberNodes.length)?this.clobberNodes:document.all;}tna=null;var _16a={};for(var i=na.length-1;i>=0;i=i-1){var el=na[i];try{if(el&&el["__clobberAttrs__"]){for(var j=0;j<el.__clobberAttrs__.length;j++){_168(el,el.__clobberAttrs__[j]);}_168(el,"__clobberAttrs__");_168(el,"__doClobber__");}}catch(e){}}na=null;};};if(dojo.isIE){dojo.addOnUnload(function(){agi.event._ie_clobber.clobber();try{if(dijit&&dijit.registry){dijit.registry.forEach(function(_16b){_16b.destroy();});}}catch(e){}if(dijit){for(var name in dijit._Templated._templateCache){var n=dijit._Templated._templateCache[name].node;if(n){n.parentNode.removeChild(n);dijit._Templated._templateCache[name].node=null;delete dijit._Templated._templateCache[name].node;}}}try{window.onload=null;}catch(e){}try{window.onunload=null;}catch(e){}agi.event._ie_clobber.clobberNodes=[];});}agi.event.browser=new function(){var _16c=0;this.normalizedEventName=function(_16d){switch(_16d){case "CheckboxStateChange":case "DOMAttrModified":case "DOMMenuItemActive":case "DOMMenuItemInactive":case "DOMMouseScroll":case "DOMNodeInserted":case "DOMNodeRemoved":case "RadioStateChange":return _16d;break;default:return _16d.toLowerCase();break;}};this.clean=function(node){if(dojo.isIE){agi.event._ie_clobber.clobber(node);}};this.addClobberNode=function(node){if(!dojo.isIE){return;}if(!node["__doClobber__"]){node.__doClobber__=true;agi.event._ie_clobber.clobberNodes.push(node);node.__clobberAttrs__=[];}};this.addClobberNodeAttrs=function(node,_16e){if(!dojo.isIE){return;}this.addClobberNode(node);for(var x=0;x<_16e.length;x++){node.__clobberAttrs__.push(_16e[x]);}};this.removeListener=function(node,_16f,fp,_170){if(!_170){var _170=false;}_16f=agi.event.browser.normalizedEventName(_16f);if((_16f=="onkey")||(_16f=="key")){if(dojo.isIE){this.removeListener(node,"onkeydown",fp,_170);}_16f="onkeypress";}if(_16f.substr(0,2)=="on"){_16f=_16f.substr(2);}if(node.removeEventListener){node.removeEventListener(_16f,fp,_170);}};this.addListener=function(node,_171,fp,_172,_173){if(!node){return;}if(!_172){var _172=false;}_171=agi.event.browser.normalizedEventName(_171);if((_171=="onkey")||(_171=="key")){if(dojo.isIE){this.addListener(node,"onkeydown",fp,_172,_173);}_171="onkeypress";}if(_171.substr(0,2)!="on"){_171="on"+_171;}if(!_173){var _174=function(evt){if(!evt){evt=window.event;}var ret=fp(agi.event.browser.fixEvent(evt,this));if(_172){agi.event.browser.stopEvent(evt);}return ret;};}else{_174=fp;}if(node.addEventListener){node.addEventListener(_171.substr(2),_174,_172);return _174;}else{if(typeof node[_171]=="function"){var _175=node[_171];node[_171]=function(e){_175(e);return _174(e);};}else{node[_171]=_174;}if(dojo.isIE){this.addClobberNodeAttrs(node,[_171]);}return _174;}};this.isEvent=function(obj){return (typeof obj!="undefined")&&(obj)&&(typeof Event!="undefined")&&(obj.eventPhase);};this.currentEvent=null;this.callListener=function(_176,_177){if(typeof _176!="function"){agi.util.raise("listener not a function: "+_176);}agi.event.browser.currentEvent.currentTarget=_177;return _176.call(_177,agi.event.browser.currentEvent);};this._stopPropagation=function(){agi.event.browser.currentEvent.cancelBubble=true;};this._preventDefault=function(){agi.event.browser.currentEvent.returnValue=false;};this.keys={KEY_BACKSPACE:8,KEY_TAB:9,KEY_CLEAR:12,KEY_ENTER:13,KEY_SHIFT:16,KEY_CTRL:17,KEY_ALT:18,KEY_PAUSE:19,KEY_CAPS_LOCK:20,KEY_ESCAPE:27,KEY_SPACE:32,KEY_PAGE_UP:33,KEY_PAGE_DOWN:34,KEY_END:35,KEY_HOME:36,KEY_LEFT_ARROW:37,KEY_UP_ARROW:38,KEY_RIGHT_ARROW:39,KEY_DOWN_ARROW:40,KEY_INSERT:45,KEY_DELETE:46,KEY_HELP:47,KEY_LEFT_WINDOW:91,KEY_RIGHT_WINDOW:92,KEY_SELECT:93,KEY_NUMPAD_0:96,KEY_NUMPAD_1:97,KEY_NUMPAD_2:98,KEY_NUMPAD_3:99,KEY_NUMPAD_4:100,KEY_NUMPAD_5:101,KEY_NUMPAD_6:102,KEY_NUMPAD_7:103,KEY_NUMPAD_8:104,KEY_NUMPAD_9:105,KEY_NUMPAD_MULTIPLY:106,KEY_NUMPAD_PLUS:107,KEY_NUMPAD_ENTER:108,KEY_NUMPAD_MINUS:109,KEY_NUMPAD_PERIOD:110,KEY_NUMPAD_DIVIDE:111,KEY_F1:112,KEY_F2:113,KEY_F3:114,KEY_F4:115,KEY_F5:116,KEY_F6:117,KEY_F7:118,KEY_F8:119,KEY_F9:120,KEY_F10:121,KEY_F11:122,KEY_F12:123,KEY_F13:124,KEY_F14:125,KEY_F15:126,KEY_NUM_LOCK:144,KEY_SCROLL_LOCK:145};this.revKeys=[];for(var key in this.keys){this.revKeys[this.keys[key]]=key;}this.fixEvent=function(evt,_178){if(!evt){if(window["event"]){evt=window.event;}}if((evt["type"])&&(evt["type"].indexOf("key")==0)){evt.keys=this.revKeys;for(var key in this.keys){evt[key]=this.keys[key];}if(evt["type"]=="keydown"&&dojo.render.html.ie){switch(evt.keyCode){case evt.KEY_SHIFT:case evt.KEY_CTRL:case evt.KEY_ALT:case evt.KEY_CAPS_LOCK:case evt.KEY_LEFT_WINDOW:case evt.KEY_RIGHT_WINDOW:case evt.KEY_SELECT:case evt.KEY_NUM_LOCK:case evt.KEY_SCROLL_LOCK:case evt.KEY_NUMPAD_0:case evt.KEY_NUMPAD_1:case evt.KEY_NUMPAD_2:case evt.KEY_NUMPAD_3:case evt.KEY_NUMPAD_4:case evt.KEY_NUMPAD_5:case evt.KEY_NUMPAD_6:case evt.KEY_NUMPAD_7:case evt.KEY_NUMPAD_8:case evt.KEY_NUMPAD_9:case evt.KEY_NUMPAD_PERIOD:break;case evt.KEY_NUMPAD_MULTIPLY:case evt.KEY_NUMPAD_PLUS:case evt.KEY_NUMPAD_ENTER:case evt.KEY_NUMPAD_MINUS:case evt.KEY_NUMPAD_DIVIDE:break;case evt.KEY_PAUSE:case evt.KEY_TAB:case evt.KEY_BACKSPACE:case evt.KEY_ENTER:case evt.KEY_ESCAPE:case evt.KEY_PAGE_UP:case evt.KEY_PAGE_DOWN:case evt.KEY_END:case evt.KEY_HOME:case evt.KEY_LEFT_ARROW:case evt.KEY_UP_ARROW:case evt.KEY_RIGHT_ARROW:case evt.KEY_DOWN_ARROW:case evt.KEY_INSERT:case evt.KEY_DELETE:case evt.KEY_F1:case evt.KEY_F2:case evt.KEY_F3:case evt.KEY_F4:case evt.KEY_F5:case evt.KEY_F6:case evt.KEY_F7:case evt.KEY_F8:case evt.KEY_F9:case evt.KEY_F10:case evt.KEY_F11:case evt.KEY_F12:case evt.KEY_F12:case evt.KEY_F13:case evt.KEY_F14:case evt.KEY_F15:case evt.KEY_CLEAR:case evt.KEY_HELP:evt.key=evt.keyCode;break;default:if(evt.ctrlKey||evt.altKey){var _179=evt.keyCode;if(_179>=65&&_179<=90&&evt.shiftKey==false){_179+=32;}if(_179>=1&&_179<=26&&evt.ctrlKey){_179+=96;}evt.key=String.fromCharCode(_179);}}}else{if(evt["type"]=="keypress"){if(dojo.isOpera){if(evt.which==0){evt.key=evt.keyCode;}else{if(evt.which>0){switch(evt.which){case evt.KEY_SHIFT:case evt.KEY_CTRL:case evt.KEY_ALT:case evt.KEY_CAPS_LOCK:case evt.KEY_NUM_LOCK:case evt.KEY_SCROLL_LOCK:break;case evt.KEY_PAUSE:case evt.KEY_TAB:case evt.KEY_BACKSPACE:case evt.KEY_ENTER:case evt.KEY_ESCAPE:evt.key=evt.which;break;default:var _179=evt.which;if((evt.ctrlKey||evt.altKey||evt.metaKey)&&(evt.which>=65&&evt.which<=90&&evt.shiftKey==false)){_179+=32;}evt.key=String.fromCharCode(_179);}}}}else{if(dojo.isIE){if(!evt.ctrlKey&&!evt.altKey&&evt.keyCode>=evt.KEY_SPACE){evt.key=String.fromCharCode(evt.keyCode);}}else{if(dojo.isSafari){switch(evt.keyCode){case 25:evt.key=evt.KEY_TAB;evt.shift=true;break;case 63232:evt.key=evt.KEY_UP_ARROW;break;case 63233:evt.key=evt.KEY_DOWN_ARROW;break;case 63234:evt.key=evt.KEY_LEFT_ARROW;break;case 63235:evt.key=evt.KEY_RIGHT_ARROW;break;case 63236:evt.key=evt.KEY_F1;break;case 63237:evt.key=evt.KEY_F2;break;case 63238:evt.key=evt.KEY_F3;break;case 63239:evt.key=evt.KEY_F4;break;case 63240:evt.key=evt.KEY_F5;break;case 63241:evt.key=evt.KEY_F6;break;case 63242:evt.key=evt.KEY_F7;break;case 63243:evt.key=evt.KEY_F8;break;case 63244:evt.key=evt.KEY_F9;break;case 63245:evt.key=evt.KEY_F10;break;case 63246:evt.key=evt.KEY_F11;break;case 63247:evt.key=evt.KEY_F12;break;case 63250:evt.key=evt.KEY_PAUSE;break;case 63272:evt.key=evt.KEY_DELETE;break;case 63273:evt.key=evt.KEY_HOME;break;case 63275:evt.key=evt.KEY_END;break;case 63276:evt.key=evt.KEY_PAGE_UP;break;case 63277:evt.key=evt.KEY_PAGE_DOWN;break;case 63302:evt.key=evt.KEY_INSERT;break;case 63248:case 63249:case 63289:break;default:evt.key=evt.charCode>=evt.KEY_SPACE?String.fromCharCode(evt.charCode):evt.keyCode;}}else{evt.key=evt.charCode>0?String.fromCharCode(evt.charCode):evt.keyCode;}}}}}}if(dojo.isIE){if(!evt.target){evt.target=evt.srcElement;}if(!evt.currentTarget){evt.currentTarget=(_178?_178:evt.srcElement);}if(!evt.layerX){evt.layerX=evt.offsetX;}if(!evt.layerY){evt.layerY=evt.offsetY;}var doc=(evt.srcElement&&evt.srcElement.ownerDocument)?evt.srcElement.ownerDocument:document;var _17a=((dojo.isIE==5)||(doc["compatMode"]=="BackCompat"))?doc.body:doc.documentElement;if(!evt.pageX){evt.pageX=evt.clientX+(_17a.scrollLeft||0);}if(!evt.pageY){evt.pageY=evt.clientY+(_17a.scrollTop||0);}if(evt.type=="mouseover"){evt.relatedTarget=evt.fromElement;}if(evt.type=="mouseout"){evt.relatedTarget=evt.toElement;}this.currentEvent=evt;evt.callListener=this.callListener;evt.stopPropagation=this._stopPropagation;evt.preventDefault=this._preventDefault;}return evt;};this.stopEvent=function(evt){if(window.event){evt.cancelBubble=true;evt.returnValue=false;}else{evt.preventDefault();evt.stopPropagation();}};};})();}if(!dojo._hasResource["ag.event"]){dojo._hasResource["ag.event"]=true;dojo.provide("ag.event");ag.event=agi.event;}if(!dojo._hasResource["ag.wombat.storage"]){dojo._hasResource["ag.wombat.storage"]=true;dojo.provide("ag.wombat.storage");ag.wombat.storage.toString=function(){return "AGWombatStorage";};ag.wombat.storage.preloaded=false;ag.wombat.storage.pl_contacts={};ag.wombat.storage.groups_loaded=false;ag.wombat.storage.pl_groups={};ag.wombat.storage.add_html="";ag.wombat.storage._getCurrentTimeStamp=function(){return new Date().getTime();};ag.wombat.storage.init=function(_17b){if(_17b){ag.wombat.storage.Data.force_reload=true;}if(ag.wombat.storage.Data._initialized){if(_17b){ag.wombat.storage.Data.data=new ag.wombat.storage.DataItem(Data.wid);ag.wombat.storage.preloaded=ag.wombat.storage.Data.data.loaded;ag.wombat.storage.pl_contacts=ag.wombat.storage.Data.data.contacts;ag.wombat.storage.Data._initialized=true;ag.wombat.storage.Data.force_reload=false;}ag.wombat.storage.Data.load();}else{ag.event.connectOnce(ag.wombat.storage.Data,"initialize",ag.wombat.storage.Data,"load");}};ag.wombat.storage.DataItem=function(wid){this.wid=wid;this.contacts={};this.loaded=false;this.groups={};this.groups_loaded=false;this.last_updated=ag.wombat.storage._getCurrentTimeStamp();this.toString=function(){return "[AGWombatDataItem]";};};var cache_wid=ag.cookie.AGCookie.getCookieValue("customer","wid");var contacts_loading=false;ag.wombat.storage.Data={wid:(cache_wid>0)?cache_wid:"demo",key:"womcache_"+((cache_wid>0)?cache_wid:"demo"),data:new ag.wombat.storage.DataItem((cache_wid>0)?cache_wid:"demo"),_initialized:false,force_reload:false,toString:function(){return "AGWombatStorageData";},initialize:function(){this.data=dojox.storage.get(this.key);if(!this.data){this.data=new ag.wombat.storage.DataItem(this.wid);}else{if(ag.wombat.storage._getCurrentTimeStamp()>this.data.last_updated+86400000){this.data=new ag.wombat.storage.DataItem(this.wid);}else{if(this.force_reload){this.data=new ag.wombat.storage.DataItem(this.wid);}}}ag.wombat.storage.preloaded=this.data.loaded;ag.wombat.storage.pl_contacts=this.data.contacts;try{ag.wombat.storage.groups_loaded=this.data.groups_loaded;if(!ag.wombat.storage.groups_loaded){ag.wombat.storage.pl_groups={};}else{ag.wombat.storage.pl_groups=this.data.groups;}}catch(e1){ag.wombat.storage.groups_loaded=false;ag.wombat.storage.pl_groups={};}if(ag.wombat.storage.preloaded){try{if(contact_update){ag.wombat.storage.append_addresses(contact_update);}}catch(e2){}try{if(contact_delete){ag.wombat.storage.remove_addresses(contact_delete);}}catch(e3){}}this._initialized=true;this.force_reload=false;},load:function(){if(contacts_loading){return;}var wdl=new ag.wombat.storage.DataLoader();wdl.load_address_data();contacts_loading=true;},store_contacts:function(_17c){this.data.contacts=_17c;this.data.loaded=true;this.last_updated=ag.wombat.storage._getCurrentTimeStamp();try{dojox.storage.put(this.key,this.data,function(_17d,key,_17e){});}catch(exp){}},store_groups:function(_17f){this.data.groups=_17f;this.data.groups_loaded=true;this.last_updated=ag.wombat.storage._getCurrentTimeStamp();try{dojox.storage.put(this.key,this.data,function(_180,key,_181){});}catch(exp){}}};dojo.addOnLoad(function(){if(!dojox.storage.manager.isInitialized()){dojo.connect(dojox.storage.manager,"loaded",ag.wombat.storage.Data,"initialize");}else{dojo.connect(dojo,"loaded",ag.wombat.storage.Data,"initialize");}});ag.wombat.storage.contact_idx=0;ag.wombat.storage.DataLoader=function(_182){var _183=this;this.swindow=100;this.offset=0;this.group_offset=0;this.toString=function(){return "[AGWombatDataLoader]";};this.on_complete=_182;this.load_data=function(){this.load_add_page();};this.load_address_data=function(type){if(typeof type=="undefined"){type="b";}if(!ag.wombat.storage.preloaded&&(type=="c"||type=="b")){var _184=_183.swindow+1;var _185=new ag.requester.Requester(ahost+"/reminders/contactsearch.pd","POST",true,false);var _186={q:"",o:_183.offset,w:_184};_185.sendRequest(_186);_185.onsuccess=_183.load_addresses;_183.offset=_183.offset+_183.swindow;}if(!ag.wombat.storage.groups_loaded&&(type=="g"||type=="b")){var _184=_183.swindow+1;var _187=new ag.requester.Requester(ahost+"/reminders/groupsearch.pd","POST",true,false);var _186={q:"",o:_183.group_offset,w:_184};_187.sendRequest(_186);_187.onsuccess=_183.load_groups;_183.group_offset=_183.group_offset+_183.swindow;}};this.load_addresses=function(data,_188){try{var _189=dojo.fromJson(data);}catch(e){ag.wombat.storage.preloaded=false;ag.wombat.storage.pl_contacts={};return;}for(i=0;i<_189.length&&i<_183.swindow;i++){ag.wombat.storage.contact_idx++;ag.wombat.storage.pl_contacts[ag.wombat.storage.contact_idx]=_189[i];}if(_189.length>_183.swindow){_183.load_address_data("c");}else{ag.wombat.storage.preloaded=true;try{ag.wombat.storage.Data.store_contacts(ag.wombat.storage.pl_contacts);}catch(e){}}};this.load_groups=function(data,_18a){try{var _18b=dojo.fromJson(data);}catch(e){ag.wombat.storage.groups_loaded=false;ag.wombat.storage.pl_groups={};return;}for(i=0;i<_18b.length&&i<_183.swindow;i++){var _18c=_18b[i].id;ag.wombat.storage.pl_groups[_18c]=_18b[i];}if(_18b.length>_183.swindow){_183.load_address_data("g");}else{ag.wombat.storage.groups_loaded=true;try{ag.wombat.storage.Data.store_groups(ag.wombat.storage.pl_groups);}catch(e){}}};this.load_add_page=function(){var _18d=new ag.requester.Requester(ahost+"/reminders/event_add.pd","GET",true,false);_18d.onsuccess=function(data,_18e){ag.wombat.storage.add_html=data;try{_183.on_complete();}catch(e){}};_18d.sendRequest();};};ag.wombat.storage.remove_addresses=function(_18f){for(i in ag.wombat.storage.pl_contacts){if(ag.wombat.storage.pl_contacts[i].id==_18f){delete ag.wombat.storage.pl_contacts[i];}}try{ag.wombat.storage.Data.store_contacts(ag.wombat.storage.pl_contacts);}catch(e){}};ag.wombat.storage.append_addresses=function(_190){var len=ag.wombat.storage.count_contacts();for(i=0;i<_190.length;i++){ag.wombat.storage.pl_contacts[++len]=_190[i];}try{ag.wombat.storage.Data.store_contacts(ag.wombat.storage.pl_contacts);}catch(e){}};ag.wombat.storage.get_contact=function(_191){for(i in ag.wombat.storage.pl_contacts){if(ag.wombat.storage.pl_contacts[i].id==_191){return ag.wombat.storage.pl_contacts[i];}}return {};};ag.wombat.storage.count_contacts=function(){var i=0;for(i in ag.wombat.storage.pl_contacts){i++;}return i;};ag.wombat.storage.compare_contacts=function(a,b){if(!a.label){var _192=a.last_name+a.first_name+a.email;}else{var _192=a.label;}if(!b.label){var _193=b.last_name+b.first_name+b.email;}else{var _193=b.label;}if(_192>_193){return 1;}else{return -1;}};ag.wombat.storage.get_group_emails=function(_194){var _195=[];for(var i=0;i<_194.contacts.length;i++){var _196=_194.contacts[i];var _197=ag.wombat.storage.get_contact(_196).email;if(typeof _197!="undefined"&&_197.length>0){_195.push(_197);}}return _195.join(", ");};}if(!dojo._hasResource["ag.wombat.blobs"]){dojo._hasResource["ag.wombat.blobs"]=true;dojo.provide("ag.wombat.blobs");ag.wombat.blobs.relate_options=[];ag.wombat.blobs.event_options=[];ag.wombat.blobs.times=[];ag.wombat.blobs.times_no_hours=[];ag.wombat.blobs.types=[];ag.wombat.blobs.reminders;}if(!dojo._hasResource["ag.base64"]){dojo._hasResource["ag.base64"]=true;dojo.provide("ag.base64");ag.base64=agi.base64;}if(!dojo._hasResource["ag.wombat.utils"]){dojo._hasResource["ag.wombat.utils"]=true;dojo.provide("ag.wombat.utils");ag.wombat.utils.determine_site=function(){var bma="bluemountain.";var ag="americangreetings.";var _198="beta.";var url=window.location.toString().toLowerCase();if(url.indexOf(_198)>-1){return "agbeta";}if(url.indexOf(bma)>-1){return "bma";}if(url.indexOf(ag)>-1){return "ag";}return "ag";};ag.wombat.utils.is_beta=function(){var _199=dojo.byId("fcookie");if(_199!=null){return true;}else{return false;}};ag.wombat.utils.change_nav_text=function(demo){if(demo==undefined){demo=true;}var _19a=demo?"womprefd":"wompref";var _19b="View Events";var _19c=ag.wombat.utils.get_double_nvp_value(_19a,"wview");if(!_19c){_19c="Calendar";}var _19d=dojo.byId("agi-view-events");try{_19c=_19c.charAt(0).toUpperCase()+_19c.substr(1).toLowerCase();}catch(e){_19c=_19b;}try{_19d.innerHTML="";_19d.appendChild(document.createTextNode("View "+_19c));}catch(e){}};ag.wombat.utils.check_for_message=function(_19e,_19f,_1a0,_1a1){if(!_19f){return;}if(_19f=="demo"){ag.wombat.utils.write_demo_message(_19e,_1a1);return;}ag.validation.write_message(_19e,_19f,_1a0);};ag.wombat.utils.write_demo_message=function(_1a2,_1a3){if(ag.wombat.utils.is_beta()){return ag.wombat.utils.write_notdemo_message(_1a2,_1a3);}var _1a4="";if(ag.wombat.utils.is_beta()){var _1a5=ahost+"/auth/signin.pd";var _1a6=ahost+"/register/register.pd?app=reminders";}else{var _1a5=ahost+"/members/signin.pd";var _1a6=ahost+"/members/register.pd?app=reminders";}var _1a7=ahost+"/reminders/index.pd";if(!_1a3){_1a3="_default";}var _1a8={};_1a8.add="add events to your calendar";_1a8.edit="edit event details on your calendar";_1a8.holiday="add holidays to your calendar";_1a8.option="change your preferences";_1a8.request="request birthdays and other events";_1a8.share="share events with others";_1a8._default="use Reminders";_1a4+="<p><strong>You must be signed in to "+_1a8[_1a3]+".</strong></p>";_1a4+="<p><a href=\""+_1a5+"\">Sign in</a> or ";_1a4+="<a href=\""+_1a6+"\">Register</a> to get started now!</p>";_1a4+="<p><a href=\""+_1a7+"\">Continue tour</a> of example calendar.</p>";ag.validation.write_message(_1a2,_1a4,"agi-message-area agi-message-demo");};ag.wombat.utils.write_demo_saved_message=function(_1a9,_1aa){if(ag.wombat.utils.is_beta()){return ag.wombat.utils.write_notdemo_saved_message(_1a9,_1aa);}var _1ab="";if(ag.wombat.utils.is_beta()){var _1ac=ahost+"/auth/signin.pd";var _1ad=ahost+"/register/register.pd?app=reminders";}else{var _1ac=ahost+"/members/signin.pd";var _1ad=ahost+"/members/register.pd?app=reminders";}if(_1aa){var _1ae="javascript:ag.wombat.event.wevent.reset_form();";}else{var _1ae="javascript:dojo.publish('ag/Lightbox/hide');";}_1ab+="<p><strong>You must be signed in to view the event you just added.</strong></p>";_1ab+="<p><a href=\""+_1ac+"\">Sign in</a> or ";_1ab+="<a href=\""+_1ad+"\">Register</a> to view your event now!</p>";_1ab+="<p><a href=\""+_1ae+"\">Continue tour</a> of example calendar.</p>";ag.validation.write_message(_1a9,_1ab,"agi-message-area agi-message-demo");};ag.wombat.utils.write_notdemo_message=function(_1af,_1b0){var _1b1="";var _1b2=ahost+"/auth/signin.pd";var _1b3=ahost+"/register/register.pd?app=reminders";var _1b4=ahost+"/reminders/index.pd";if(!_1b0){_1b0="_default";}var _1b5={};_1b5.add="To save this event and receive FREE reminders by email or cell phone, ";_1b5.edit="To edit event details and receive FREE reminders by email or cell phone, ";_1b5.holiday="To add holidays to your calendar and receive FREE reminders by email or cell phone, ";_1b5.option="To save your preferences, ";_1b5.request="To request events, ";_1b5.share="To share events, ";_1b5._default="To start receiving your FREE reminders, ";var _1b6={};_1b6.add="";_1b6.edit="";_1b6.holiday="";_1b6.option="";_1b6.request="";_1b6.share="";_1b6._default="";_1b1+="<p class=\"agi-siteerror\">";_1b1+=_1b5[_1b0];_1b1+="<span class=\"agi-reminders-black\"><a href=\""+_1b3+"\">register now</a>. Already registered? <a href=\""+_1b2+"\">Sign in</a>.</span>";_1b1+=_1b6[_1b0];_1b1+="</p>";ag.validation.write_message(_1af,_1b1,"agi-message-area agi-message-demo");};ag.wombat.utils.write_notdemo_saved_message=function(_1b7,_1b8){var _1b9="";var _1ba=ahost+"/auth/signin.pd";var _1bb=ahost+"/register/register.pd?app=reminders";if(_1b8){var _1bc="<a href='javascript:ag.wombat.event.wevent.reset_form();'>continue</a>";}else{var _1bc="<a href='javascript:dojo.publish('ag/Lightbox/hide');'>close window</a>";}_1b9+="<p class=\"agi-siteerror\">To save this event and receive FREE reminders by email or cell phone, <span class=\"agi-reminders-black\"><a href=\""+_1bb+"\">register</a> now. Already registered? <a href=\""+_1ba+"\">Sign in</a>.</span></p>";_1b9+="<p class=\"agi-siteerror\" style=\"margin: 1em 0px 0px 0px; text-align: right; font-size: 11px; font-weight: normal;\">"+_1bc+"</p>";ag.validation.write_message(_1b7,_1b9,"agi-message-area agi-message-demo");};ag.wombat.utils.expire_cookie=function(_1bd){ag.cookie.AGCookie.expireCookie(_1bd);ag.cookie.MagicCookie.delCookieValue(_1bd,true);ag.cookie.MagicCookie.delCookieValue(_1bd,false);};ag.wombat.utils.set_double_nvp_value=function(_1be,key,_1bf,_1c0,_1c1){if(_1c0==undefined){_1c0=true;}if(_1c1==undefined){_1c1=false;}var _1c2;var _1c3=ag.cookie.MagicCookie.getCookieValue(_1be);if(!_1c3){_1c2=key+"="+escape(_1bf);}else{if(_1c0){_1c3=ag.base64.decode(unescape(_1c3));}var _1c4=ag.wombat.utils.get_nvp_value(_1c3,key);if(_1c4){_1c2=_1c3.replace(key+"="+_1c4,key+"="+escape(_1bf));}else{_1c2=_1c3+"&"+key+"="+escape(_1bf);}}if(_1c0){_1c2=ag.base64.encode(_1c2);}ag.cookie.MagicCookie.setCookieValue(_1be,_1c2,_1c1);};ag.wombat.utils.get_double_nvp_value=function(_1c5,key,_1c6){if(_1c6==undefined){_1c6=true;}var _1c7=ag.cookie.MagicCookie.getCookieValue(_1c5);if(!_1c7){return "";}if(_1c6){_1c7=ag.base64.decode(unescape(_1c7));}return ag.wombat.utils.get_nvp_value(_1c7,key);};ag.wombat.utils.get_nvp_value=function(_1c8,key){if(!_1c8||!key){return "";}return ag.cookie.NVP.getValue(_1c8,key,"=","&");};ag.wombat.utils.ThemeChanger=function(id,_1c9,demo){if(demo==undefined){demo=true;}var _1ca=true;var tc=this;this.list=dojo.byId(id);this.c_anchor="";this.which="";this.opening_theme="";this.queue_theme="";this.demo=demo;this.cookie=this.demo?"womprefd":"wompref";this.style_div=_1c9;this.req="";this.do_onload=function(){this.which=ag.wombat.utils.get_double_nvp_value(this.cookie,"wtheme");if(!this.which){this.which="dflt";}this.opening_theme=this.which;this.change_theme();if(!this.list){return;}this.set_theme_listeners();window.onunload=this.set_theme_pref;};this.set_theme_listeners=function(){var _1cb=this.list.getElementsByTagName("a");for(var i=0;i<_1cb.length;i++){try{_1cb[i].onclick=function(){tc.c_anchor=this;tc.change_theme();};var _1cc=function(){this.style.width="15px";this.style.height="15px";this.parentNode.style.width="15px";this.parentNode.style.height="15px";this.parentNode.style.position="relative";this.parentNode.style.top="0px";this.parentNode.style.left="0px";};_1cb[i].getElementsByTagName("IMG")[0].onmouseout=_1cc;_1cb[i].getElementsByTagName("IMG")[0].onclick=_1cc;_1cb[i].getElementsByTagName("IMG")[0].onmouseover=function(){this.style.width="25px";this.style.height="25px";this.parentNode.style.width="25px";this.parentNode.style.height="25px";this.parentNode.style.position="absolute";this.parentNode.style.top="-5px";this.parentNode.style.left="-5px";};}catch(e){}}};this.change_theme=function(){if(this.req){if(this.req.in_process){this.queue_theme=this.c_anchor;return;}}if(this.c_anchor){this.which=this.c_anchor.firstChild.src.split("/theme/")[1].split(".")[0];}var _1cd=ag.wombat.utils.get_double_nvp_value(this.cookie,"wtheme");if(this.c_anchor&&_1cd==this.which){return;}this.set_selected();this.change_stylesheet();this.change_print_image();};this.set_selected=function(){if(!this.list){return;}var _1ce=this.list.getElementsByTagName("span");for(var i=0;i<_1ce.length;i++){try{_1ce[i].removeAttribute("class");_1ce[i].removeAttribute("className");}catch(e){}}var elem=this.get_theme_span();try{if(elem.tagName.toLowerCase()=="span"){elem.setAttribute("class","agi-selectedt");elem.setAttribute("className","agi-selectedt");}}catch(e){}};this.get_theme_span=function(){var elem;if(this.c_anchor){elem=this.c_anchor.parentNode.parentNode;}else{var _1cf=this.list.getElementsByTagName("img");for(var i=0;i<_1cf.length;i++){if(_1cf[i].src.indexOf(this.which)!=-1){elem=_1cf[i].parentNode.parentNode.parentNode;break;}}}return elem;};this.change_stylesheet=function(){if(!this.which){this.which="dflt";}this.set_theme_cookie();this.load_genix();};this.load_stylesheet=function(){if(!this.which){this.which="dflt";}var ss=document.styleSheets;var _1d0=false;for(var i=0;i<ss.length;i++){if(ss[i].title&&ss[i].title==this.which){this.load_genix();ss[i].disabled=false;ss[i].rel="stylesheet";_1d0=true;}else{if(ss[i].title){ss[i].disabled=true;ss[i].rel="alternate stylesheet";}}}return _1d0;};this.load_genix=function(){var _1d1=ahost+"/reminders/getgenix.pd?var=UIBremtheme"+this.which;var _1d2="GET";var _1d3=true;var _1d4=false;var req=new ag.requester.Requester(_1d1,_1d2,_1d3,_1d4,"json");req.onsuccess=this.load_genix_success;req.onerror=this.load_genix_error;req.sendRequest();this.req=req;};this.load_genix_success=function(data,_1d5){var _1d6=data;ag.dom.insert_css_text(_1d6);};this.load_genix_error=function(data,_1d7){};this.set_theme_cookie=function(){ag.wombat.utils.set_double_nvp_value(this.cookie,"wtheme",this.which);if(this.queue_theme){this.c_anchor=this.queue_theme;this.queue_theme="";this.change_theme();}};this.set_theme_pref=function(){if(tc.which==tc.opening_theme){return;}var _1d8=ahost+"/reminders/setprefs.pd?p=THEME&v="+tc.which;var _1d9="GET";var _1da=false;var _1db=false;var req=new ag.requester.Requester(_1d8,_1d9,_1da,_1db);req.onsuccess=tc.set_pref_success;req.onerror=tc.set_pref_error;req.sendRequest();};this.set_pref_success=function(data,_1dc){};this.set_pref_error=function(data,_1dd){};this.change_print_image=function(){try{var _1de=ag.wombat.utils.determine_site();var _1df=dojo.byId("agi-printheader");var _1e0=_1df.getElementsByTagName("img")[1];_1e0.src=imghost+"/"+_1de+"/reminders/theme/"+this.which+"/print_theme.jpg";}catch(e){}};this.do_onload();};ag.wombat.utils.is_leap_year=function(year){return (year%4===0&&((year%100!==0)||(year%400===0)));};ag.wombat.utils.days_in_month=function(year){var days=[];days[0]=31;days[1]=31;days[2]=ag.wombat.utils.is_leap_year(year)?29:28;days[3]=31;days[4]=30;days[5]=31;days[6]=30;days[7]=31;days[8]=31;days[9]=30;days[10]=31;days[11]=30;days[12]=31;return days;};ag.wombat.utils.fix_day=function(date){var days=ag.wombat.utils.days_in_month(date.year);var _1e1=days[date.month];date.day=Math.min(date.day,_1e1);return date;};ag.wombat.utils.make_option=function(_1e2,_1e3){if(!_1e3){_1e3=_1e2;}var _1e4=document.createElement("option");_1e4.setAttribute("value",_1e2);_1e4.appendChild(document.createTextNode(_1e3));return _1e4;};}if(!dojo._hasResource["ag.widget.autocomplete"]){dojo._hasResource["ag.widget.autocomplete"]=true;dojo.provide("ag.widget.autocomplete");ag.widget.autocomplete._complete={};if(!onupfunctions){var onupfunctions=[];}ag.widget.autocomplete.check_complete=function(e){e=(e)?e:((window.event)?window.event:null);if(e!=null){for(id in ag.widget.autocomplete._complete){ag.widget.autocomplete._complete[id].check_click_source(e,id);}}};ag.widget.autocomplete.unregister=function(id){if(ag.widget.autocomplete._complete[id]){delete ag.widget.autocomplete._complete[id];}};dojo.connect((dojo.isIE)?document:null,"onmouseup",ag.widget.autocomplete,"check_complete");ag.widget.autocomplete.AutoComplete=function(_1e5,_1e6){var auto=this;ag.widget.autocomplete._complete[_1e5.id]=this;this.request=new ag.requester.Requester(_1e6,"POST",true,false);this.debug=dojo.byId("debug");this.element=_1e5;this.suggestions=new Array();this.inputText=null;this.search_text=null;this.top=0;this.left=0;this.cursor=-1;this.open=false;this.max_suggestions=15;this.selectedIdx=-1;this.suggest_url=_1e6;this.class_name="agi-auto-complete";this.class_selected="agi-auto-complete-selected";this.min_len=0;this.popup=dojo.byId(_1e5.id+"-auto-complete-div");if(!this.popup){this.popup=ag.widget.autocomplete.createDiv(this.element.id);}this.iframe=dojo.byId(_1e5.id+"-auto-complete-iframe");if(!this.iframe){this.iframe=ag.widget.autocomplete.createIFrame(this.element.id);}var TAB=9;var _1e7=13;var ESC=27;var _1e8=38;var _1e9=40;var _1ea=37;var _1eb=39;var _1ec=16;this.element.setAttribute("autocomplete","off");this.is_open=function(){return ag.widget.autocomplete._complete[_1e5.id].open;};this.check_click_source=function(e,id){var _1ed=ag.widget.autocomplete._complete[_1e5.id];if(!_1ed.is_open()){if(_1ed.request.in_process){_1ed.request.onsuccess=null;}return;}else{var _1ee=new Array(id,id+"-auto-complete-div",id+"-auto-complete-ifram");var _1ef=ag.widget.autocomplete.get_event_source(e);if(dojo.indexOf(_1ee,_1ef.id)==-1){if((_1ef.id.indexOf(id+"-href-")!=0)&&(_1ef.id.indexOf(id+"-li-")!=0)&&(_1ef.id.indexOf(id+"-div-")!=0)){if(_1ed.request.in_process){_1ed.request.onsuccess=null;}_1ed.hidePopup();}}}};this.makeVisible=function(){var _1f0=this.popup.clientHeight+this.top-ag.dom.window.getScrollOffset().pageYOffset;var _1f1=this.top-this.element.offsetHeight-this.popup.clientHeight;var _1f2=ag.dom.window.getSize().height;if(_1f0>_1f2&&_1f1>0){this.popup.style.top=_1f1+"px";this.iframe.style.top=_1f1+"px";}};this.positionPopup=function(){var elem=this.element;this.left=0;this.top=elem.offsetHeight;while(elem.offsetParent&&elem.tagName.toUpperCase()!="BODY"){this.left+=elem.offsetLeft;this.top+=elem.offsetTop;elem=elem.offsetParent;}this.left+=elem.offsetLeft;this.top+=elem.offsetTop;this.popup.style.left=this.left+"px";this.popup.style.top=this.top+"px";};this.showPopup=function(){this.selectedIdx=-1;this.iframe.style.display="block";this.popup.style.display="block";this.popup.scrollTop=0;var _1f3=this.popup.clientWidth+"px";var ul=dojo.byId(_1e5.id+"-ul");var lis=dojo.query("div",ul);for(i=0;i<lis.length;i++){lis[i].style.width=_1f3;}if(lis.length>15){lineHeight=lis[0].scrollHeight;divHeight=lineHeight*15;this.popup.style.height=divHeight+"px";this.iframe.style.height=divHeight+"px";this.popup.style.overflow="auto";this.popup.style.overflowX="hidden";}else{this.popup.style.height="";this.iframe.style.height="";this.popup.style.overflow="";}this.popup.style.zIndex="1000";this.iframe.style.zIndex="499";this.iframe.style.background="#FFFFFF";this.iframe.style.width=this.popup.clientWidth+"px";this.iframe.style.height=this.popup.clientHeight+"px";this.iframe.style.left=this.popup.style.left;this.iframe.style.top=this.popup.style.top;this.open=true;this.makeVisible();};this.hidePopup=function(){this.selectedIdx=-1;this.iframe.style.display="none";this.popup.style.display="none";this.open=false;};this.bind_element=function(_1f4){this.element=_1f4;_1f4.onkeypress=function(e){var _1f5=auto.getKeyCode(e);switch(_1f5){case TAB:case _1e8:case _1e9:case _1ea:case _1eb:case _1e7:case ESC:return (auto.popup.style.display=="none");default:return true;}};_1f4.onkeyup=function(e){var _1f6=auto.getKeyCode(e);switch(_1f6){case TAB:case ESC:case _1e8:case _1e9:case _1ea:case _1eb:return (auto.popup.style.display=="none");case _1ec:return true;default:undefined;var _1f7="";var _1f7=auto.getSearchValue(auto.element);if(_1f7!=auto.inputText){auto.inputText=_1f7;if(_1f7.length>auto.min_len){auto.searchSuggestions();}else{auto.hidePopup();}}}};_1f4.onkeydown=function(e){var _1f8=auto.getKeyCode(e);switch(_1f8){case _1e7:auto.useSuggestion();break;case TAB:if(auto.selectedIdx>-1){auto.useSuggestion();}else{auto.hidePopup();if(auto.request.in_process){auto.request.onsuccess=null;}ag.widget.autocomplete.focus_next_element(auto.element);}break;case ESC:var _1f9=(auto.popup.style.display=="none");auto.hidePopup();return _1f9;break;case _1e8:if(auto.selectedIdx>0){auto.selectedIdx--;}auto.changeSelected(_1f8);return (auto.popup.style.display=="none");break;case _1e9:if(auto.selectedIdx<(auto.suggestions.length-1)){auto.selectedIdx++;}auto.changeSelected(_1f8);return (auto.popup.style.display=="none");break;}};};this.bind_element(this.element);this.getKeyCode=function(e){if(e){return e.keyCode;}if(window.event){return window.event.keyCode;}};this.createSuggestions=function(_1fa){var ul=document.createElement("ul");ul.setAttribute("id",_1e5.id+"-ul");ul.style.listStyleType="none";ul.style.margin="0px";ul.style.padding="0px";ul.style.cursor="pointer";for(i=0;i<this.suggestions.length;i++){var _1fb=this.getDisplaySuggestion(this.suggestions[i]);if(_1fa){fidx=_1fb.toLowerCase().indexOf(_1fa);_1fb=_1fb.substring(0,fidx)+"<b>"+_1fb.substring(fidx,fidx+_1fa.length)+"</b>"+_1fb.substring(fidx+_1fa.length);}_1fb=_1fb.replace(/ /g,"&nbsp;");var li=document.createElement("li");li.setAttribute("id",_1e5.id+"-li-"+i);var d=document.createElement("div");d.setAttribute("id",_1e5.id+"-div-"+i);d.setAttribute("style","cursor: pointer;");var a=document.createElement("a");a.href="javascript:void(null)";a.innerHTML=_1fb;a.setAttribute("class",this.class_name);a.setAttribute("className",this.class_name);a.setAttribute("id",_1e5.id+"-href-"+i);d.appendChild(a);li.appendChild(d);if(auto.selectedIdx==i){li.setAttribute("class",this.class_selected);li.setAttribute("className",this.class_selected);a.className=this.class_selected;}else{li.setAttribute("class",this.class_name);li.setAttribute("className",this.class_name);}ul.appendChild(li);}this.popup.replaceChild(ul,this.popup.childNodes[0]);ul.onmouseover=function(ev){var _1fc=auto.getEventSource(ev);while(_1fc.parentNode&&_1fc.tagName.toUpperCase()!="LI"){_1fc=_1fc.parentNode;}var lis=dojo.query("li",auto.popup);for(i=0;i<lis.length;i++){var li=lis[i];if(li==_1fc){auto.selectedIdx=i;break;}}auto.changeSelected();};ul.onclick=function(ev){auto.useSuggestion();auto.hidePopup();auto.cancelEvent(ev);return false;};this.popup.className=this.class_name;this.popup.style.position="absolute";};this.useSuggestion=function(){if(this.selectedIdx>-1){this.applySuggestion(this.suggestions[this.selectedIdx]);this.hidePopup();this.selectedIdx=-1;this.inputText="";this.search_text="";this.element.blur();setTimeout("ag.widget.autocomplete.focus_element('"+this.element.id+"')",10);if(this.cursor!=-1){setTimeout("ag.widget.autocomplete.set_cursor_position('"+this.element.id+"',"+this.cursor+","+this.cursor+")",15);}}};this.changeSelected=function(_1fd){if(!_1fd){_1fd="";}var lis=dojo.query("li",this.popup);if(lis.length>0){var _1fe=lis[0].scrollHeight;}if(!dojo.isIE){_1fe=_1fe+1;}var _1ff=this.popup.scrollTop+(this.popup.clientHeight*1);for(i=0;i<lis.length;i++){var li=lis[i];if(this.selectedIdx==i){var a=dojo.query("a",li)[0];li.className=this.class_selected;a.className=this.class_selected;if(lis.length>15&&(_1fd==_1e9||_1fd==_1e8)){var _200=_1fe*i;if(_200>_1ff){this.popup.scrollTop=this.popup.scrollTop+_1fe;}else{if(_200<this.popup.scrollTop){this.popup.scrollTop=_200;}}}}else{var a=dojo.query("a",li)[0];li.className=this.class_name;a.className=this.class_name;}}};this.getEventSource=function(ev){if(ev){return ev.target;}if(window.event){return window.event.srcElement;}};this.cancelEvent=function(ev){if(ev){ev.preventDefault();ev.stopPropagation();}if(window.event){window.event.returnValue=false;}};this.searchSuggestions=function(){auto.request.onsuccess=auto.onsuccess;if(!auto.request.in_process){auto.search_text=auto.getSearchValue(auto.element);auto.request.sendRequest("q="+encodeURIComponent(auto.getSearchValue(auto.element)));}};this.onsuccess=function(req){var _201=auto.getSearchValue(auto.element);if(_201!=auto.search_text&&_201.length>auto.min_len){auto.searchSuggestions();return;}try{eval("auto.suggestions = "+req.responseText);}catch(e){auto.hidePopup();return;}auto.suggestions.sort(ag.wombat.storage.compare_contacts);auto.createSuggestions(auto.search_text);auto.positionPopup();if(auto.suggestions.length>0){auto.showPopup();}else{auto.hidePopup();}};this.getDisplaySuggestion=function(_202){return _202;};this.applySuggestion=function(_203){this.element.value=_203;};this.getSearchValue=function(el){return this.element.value;};};ag.widget.autocomplete.createIFrame=function(_204){var _205=document.createElement("IFRAME");_205.setAttribute("src","javascript:void(null)");_205.setAttribute("scrolling","no");_205.setAttribute("frameBorder","0");_205.setAttribute("id",_204+"-auto-complete-iframe");_205.style.width="0px";_205.style.height="0px";_205.style.position="absolute";_205.style.display="none";document.body.appendChild(_205);return _205;};ag.widget.autocomplete.createDiv=function(_206){var div=document.createElement("DIV");div.setAttribute("id",_206+"-auto-complete-div");div.style.display="none";var list=document.createElement("UL");div.appendChild(list);document.body.appendChild(div);return div;};ag.widget.autocomplete.CustomEventComplete=function(elId,_207,_208){var _209=this;var _20a=_207;var _20b=_208;if(ag.widget.autocomplete._complete[elId]){var _20c=ag.widget.autocomplete._complete[elId];_20c.bind_element(dojo.byId(elId));}else{var _20c=new ag.widget.autocomplete.AutoComplete(dojo.byId(elId),ahost+"/reminders/contactsearch.pd");}var _20d=_20c.searchSuggestions;_20c.searchSuggestions=function(){if(!ag.wombat.storage.preloaded){_20d();return;}_20c.suggestions=[];var _20e=(_20c.getSearchValue(_20c.element)+"").toLowerCase();for(i in ag.wombat.storage.pl_contacts){var _20f=(ag.wombat.storage.pl_contacts[i].first_name+"").toLowerCase();var _210=(ag.wombat.storage.pl_contacts[i].last_name+"").toLowerCase();var _211=(ag.wombat.storage.pl_contacts[i].email+"").toLowerCase();if(_211.indexOf(_20e)==0||_20f.indexOf(_20e)==0||_210.indexOf(_20e)==0){_20c.suggestions.push(ag.wombat.storage.pl_contacts[i]);}}_20c.suggestions.sort(ag.wombat.storage.compare_contacts);_20c.createSuggestions(_20e);_20c.positionPopup();if(_20c.suggestions.length>0){_20c.showPopup();}else{_20c.hidePopup();}};_20c.getDisplaySuggestion=function(_212){return _209.assembleContact(_212).replace("<","&#60;").replace(">","&#62;");};this.assembleContact=function(_213){var _214=(_213.first_name==null)?"":_213.first_name;var _215=(_213.last_name==null)?"":_213.last_name;var _216=(_215.length>0&&_214.length>0)?" ":"";var name=(_215.length>0||_214.length>0)?"\""+_214+_216+_215+"\"":"";var _217=(_213.email==null||_213.email.length==0)?"":" <"+_213.email+">";return name+_217;};_20c.applySuggestion=function(_218){var re=/\&\#(\d*)\;/g;if(_20a){if(_218.first_name!=null&&_218.last_name!=""){_20a.value=_218.first_name.replace(re,ag.dom.get_unicode);}}if(_20b){if(_218.email!=null&&_218.email!=""){_20b.value=_218.email;}}};};ag.widget.autocomplete.WombatEventComplete=function(elId,_219){var _21a=this;var _219=_219;if(ag.widget.autocomplete._complete[elId]){var _21b=ag.widget.autocomplete._complete[elId];_21b.bind_element(dojo.byId(elId));}else{var _21b=new ag.widget.autocomplete.AutoComplete(dojo.byId(elId),ahost+"/reminders/contactsearch.pd");}var _21c=_21b.searchSuggestions;_21b.searchSuggestions=function(){if(!ag.wombat.storage.preloaded){_21c();return;}_21b.suggestions=new Array();var _21d=(_21b.getSearchValue(_21b.element)+"").toLowerCase();for(i in ag.wombat.storage.pl_contacts){var _21e=(ag.wombat.storage.pl_contacts[i].first_name+"").toLowerCase();var _21f=(ag.wombat.storage.pl_contacts[i].last_name+"").toLowerCase();var _220=(ag.wombat.storage.pl_contacts[i].email+"").toLowerCase();if(_220.indexOf(_21d)==0||_21e.indexOf(_21d)==0||_21f.indexOf(_21d)==0){_21b.suggestions.push(ag.wombat.storage.pl_contacts[i]);}}_21b.suggestions.sort(ag.wombat.storage.compare_contacts);_21b.createSuggestions(_21d);_21b.positionPopup();if(_21b.suggestions.length>0){_21b.showPopup();}else{_21b.hidePopup();}};_21b.getDisplaySuggestion=function(_221){return _21a.assembleContact(_221).replace("<","&#60;").replace(">","&#62;");};this.assembleContact=function(_222){var _223=(_222.first_name==null)?"":_222.first_name;var _224=(_222.last_name==null)?"":_222.last_name;var _225=(_224.length>0&&_223.length>0)?" ":"";var name=(_224.length>0||_223.length>0)?"\""+_223+_225+_224+"\"":"";var _226=(_222.email==null||_222.email.length==0)?"":" <"+_222.email+">";return name+_226;};_21b.applySuggestion=function(_227){var re=/\&\#(\d*)\;/g;if(_219.lname){if(_227.last_name!=null&&_227.last_name!=""){_219.lname.value=_227.last_name.replace(re,ag.dom.get_unicode);}}if(_219.fname){if(_227.first_name!=null&&_227.last_name!=""){_219.fname.value=_227.first_name.replace(re,ag.dom.get_unicode);}}if(_219.email){if(_227.email!=null&&_227.email!=""){_219.email.value=_227.email;}}if(_219.male&&_227.gender!=null&&_227.gender.toLowerCase()=="m"){_219.male.checked=true;}else{if(_219.female){_219.female.checked=true;}}if(_219.relationship_type&&_227.relate_type!=null){_219.relationship_type.value=_227.relate_type;var _228=ag.wombat.blobs.relate_options[_227.relate_type];for(var j=_219.relationship.options.length-1;j>-1;j--){_219.relationship.remove(j);}_219.relationship.appendChild(ag.wombat.utils.make_option("","Relationship"));for(var i=0;i<_228.length;i++){var _229=ag.wombat.utils.make_option(_228[i].id,_228[i].description);if(_219.relationship&&_227.relationship!=null&&_228[i].id==_227.relationship){_229.setAttribute("selected",true);}_219.relationship.appendChild(_229);}}try{if(_227.first_name!=null&&_227.first_name!=""){_219.fname_display.innerHTML=_219.fname.value+"&nbsp;";}if(_227.last_name!=null&&_227.last_name!=""){_219.lname_display.innerHTML=_219.lname.value+"&nbsp;";}if(_227.email!=null&&_227.email!=""){_219.email_display.innerHTML=_219.email.value+"&nbsp;";}_219.gender_display.innerHTML=(_219.male.checked)?"Male":"Female";_219.relationship_display.innerHTML=_219.relationship.options[_219.relationship.selectedIndex].text+"&nbsp;";}catch(e){}};};ag.widget.autocomplete.TextAreaComplete=function(elId){var _22a=this;if(ag.widget.autocomplete._complete[elId]){var _22b=ag.widget.autocomplete._complete[elId];_22b.bind_element(dojo.byId(elId));}else{var _22b=new ag.widget.autocomplete.AutoComplete(dojo.byId(elId),ahost+"/reminders/contactsearch.pd");}this.baseCompleter=_22b;var _22c=_22b.searchSuggestions;_22b.searchSuggestions=function(){if(!ag.wombat.storage.preloaded){_22c();return;}_22b.suggestions=[];var _22d=(_22b.getSearchValue(_22b.element)+"").toLowerCase();for(g in ag.wombat.storage.pl_groups){var _22e=(ag.wombat.storage.pl_groups[g].label+"").toLowerCase();if(_22e.indexOf(_22d)==0){_22b.suggestions.push(ag.wombat.storage.pl_groups[g]);}}for(i in ag.wombat.storage.pl_contacts){var _22f=(ag.wombat.storage.pl_contacts[i].first_name+"").toLowerCase();var _230=(ag.wombat.storage.pl_contacts[i].last_name+"").toLowerCase();var _231=(ag.wombat.storage.pl_contacts[i].email+"").toLowerCase();var f=(_22f.length>0)?_22f+" ":"";var l=(_230.length>0)?_230+" ":"";var full=f+l;if(_231.toLowerCase()==_22d){_22b.suggestions=[];break;}if(((_231.indexOf(_22d)==0||_22f.indexOf(_22d)==0||_230.indexOf(_22d)==0)||full.indexOf(_22d)==0)&&(_231.length>0)){_22b.suggestions.push(ag.wombat.storage.pl_contacts[i]);}}_22b.suggestions.sort(ag.wombat.storage.compare_contacts);_22b.createSuggestions(_22d);_22b.positionPopup();if(_22b.suggestions.length>0){_22b.showPopup();}else{_22b.hidePopup();}};_22b.getDisplaySuggestion=function(_232){return _22a.assembleContact(_232).replace("<","&#60;").replace(">","&#62;");};_22b.applySuggestion=function(_233){var _234="";if(!_233.label){_234=_233.email;}else{_234=ag.wombat.storage.get_group_emails(_233);}if(this.element.type=="textarea"){var _235=this.element.value;var _236=ag.widget.autocomplete.get_cursor_position(this.element);var _237=_236-_22b.getSearchValue(_22b.element).length;var _238=_235.substring(0,_237);var _239=_235.substring(_236);var _23a=(_238.search(/\s+$/g)!=-1||_238.length==0);var _23b=(_239.search(/^\s+/g)!=-1);var _23c=(_23a)?"":" ";var _23d=(_23b)?",":", ";var _23e=_23c+_234+_23d;this.element.value=_238+_23e+_239;this.cursor=_237+_23e.length;}else{this.element.value=_234;}};_22b.getSearchValue=function(el){var _23f=el.value;var _240=ag.widget.autocomplete.get_cursor_position(el);var idx=_23f.lastIndexOf(",",_240);var _241=(idx==-1)?0:idx+1;idx=_23f.indexOf(",",_240);var end=(idx==-1)?_23f.length-1:idx-1;return _23f.substring(_241,_240).replace(/^\s*|\s*$/g,"");};this.assembleContact=function(_242){if(!_242.label){var _243=(_242.first_name==null)?"":_242.first_name;var _244=(_242.last_name==null)?"":_242.last_name;var _245=(_244.length>0&&_243.length>0)?" ":"";var name=(_244.length>0||_243.length>0)?"\""+_243+_245+_244+"\"":"";var _246=(_242.email==null||_242.email.length==0)?"":" <"+_242.email+">";return name+_246;}else{return _242.label+" (group)";}};};ag.widget.autocomplete.get_cursor_position=function(area){try{area.focus();}catch(e){}if(document.selection&&area.type=="textarea"){var _247=document.selection.createRange();var _248=_247.duplicate();_248.moveToElementText(area);_248.setEndPoint("EndToEnd",_247);area.selectionStart=_248.text.length-_247.text.length;area.selectionEnd=area.selectionStart+_247.text.length;}return area.selectionEnd;};ag.widget.autocomplete.set_cursor_position=function(_249,_24a,end){var area=dojo.byId(_249);if(navigator.appName.indexOf("Microsoft")==-1){area.setSelectionRange(_24a,end);}else{var _24b=area.createTextRange();_24b.collapse(true);_24b.moveStart("character",_24a);_24b.moveEnd("character",end-_24a);_24b.select();}};ag.widget.autocomplete.focus_next_element=function(_24c){var idx=-1;for(var i=0;i<_24c.form.elements.length;i++){if(_24c.form.elements[i]==_24c&&i<(_24c.form.elements.length-1)){idx=i;}}if(idx!=-1){_24c.form.elements[idx].focus();}};ag.widget.autocomplete.focus_element=function(_24d){try{dojo.byId(_24d).focus();}catch(e){}};ag.widget.autocomplete.get_event_source=function(ev){if(ev){if(ev.target){return ev.target;}else{if(ev.srcElement){return ev.srcElement;}}}if(window.event){return window.event.srcElement;}};}dojo.publish("/ag.layers.ext/loaded/");dojo.i18n._preloadLocalizations("ag.layers.nls.ext",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
