/*
	Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

dojo.provide("ag.layers.storage");if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_1){if(this._hash[_1.id]){throw new Error("Tried to register widget with id=="+_1.id+" but that id is already registered");}this._hash[_1.id]=_1;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(_2,_3){_3=_3||dojo.global;var i=0,id;for(id in this._hash){_2.call(_3,this._hash[id],i++,this._hash);}return this;},filter:function(_4,_5){_5=_5||dojo.global;var _6=new dijit.WidgetSet(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_4.call(_5,w,i++,this._hash)){_6.add(w);}}return _6;},byId:function(id){return this._hash[id];},byClass:function(_7){var _8=new dijit.WidgetSet(),id,_9;for(id in this._hash){_9=this._hash[id];if(_9.declaredClass==_7){_8.add(_9);}}return _8;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(_a,_b){return dojo.map(this.toArray(),_a,_b);},every:function(_c,_d){_d=_d||dojo.global;var x=0,i;for(i in this._hash){if(!_c.call(_d,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(_e,_f){_f=_f||dojo.global;var x=0,i;for(i in this._hash){if(_e.call(_f,this._hash[i],x++,this._hash)){return true;}}return false;}});(function(){dijit.registry=new dijit.WidgetSet();var _10=dijit.registry._hash,_11=dojo.attr,_12=dojo.hasAttr,_13=dojo.style;dijit.byId=function(id){return typeof id=="string"?_10[id]:id;};var _14={};dijit.getUniqueId=function(_15){var id;do{id=_15+"_"+(_15 in _14?++_14[_15]:_14[_15]=0);}while(_10[id]);return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id;};dijit.findWidgets=function(_16){var _17=[];function _18(_19){for(var _1a=_19.firstChild;_1a;_1a=_1a.nextSibling){if(_1a.nodeType==1){var _1b=_1a.getAttribute("widgetId");if(_1b){_17.push(_10[_1b]);}else{_18(_1a);}}}};_18(_16);return _17;};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(_1c){if(!_1c._destroyed){if(_1c.destroyRecursive){_1c.destroyRecursive();}else{if(_1c.destroy){_1c.destroy();}}}});};if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit._destroyAll();});}dijit.byNode=function(_1d){return _10[_1d.getAttribute("widgetId")];};dijit.getEnclosingWidget=function(_1e){while(_1e){var id=_1e.getAttribute&&_1e.getAttribute("widgetId");if(id){return _10[id];}_1e=_1e.parentNode;}return null;};var _1f=(dijit._isElementShown=function(_20){var s=_13(_20);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_11(_20,"type")!="hidden");});dijit.hasDefaultTabStop=function(_21){switch(_21.nodeName.toLowerCase()){case "a":return _12(_21,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":if(dojo.isMoz){try{return _21.contentDocument.designMode=="on";}catch(err){return false;}}else{if(dojo.isWebKit){var doc=_21.contentDocument,_22=doc&&doc.body;return _22&&_22.contentEditable=="true";}else{try{doc=_21.contentWindow.document;_22=doc&&doc.body;return _22&&_22.firstChild&&_22.firstChild.contentEditable=="true";}catch(e){return false;}}}default:return _21.contentEditable=="true";}};var _23=(dijit.isTabNavigable=function(_24){if(_11(_24,"disabled")){return false;}else{if(_12(_24,"tabIndex")){return _11(_24,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(_24);}}});dijit._getTabNavigable=function(_25){var _26,_27,_28,_29,_2a,_2b;var _2c=function(_2d){dojo.query("> *",_2d).forEach(function(_2e){if((dojo.isIE&&_2e.scopeName!=="HTML")||!_1f(_2e)){return;}if(_23(_2e)){var _2f=_11(_2e,"tabIndex");if(!_12(_2e,"tabIndex")||_2f==0){if(!_26){_26=_2e;}_27=_2e;}else{if(_2f>0){if(!_28||_2f<_29){_29=_2f;_28=_2e;}if(!_2a||_2f>=_2b){_2b=_2f;_2a=_2e;}}}}if(_2e.nodeName.toUpperCase()!="SELECT"){_2c(_2e);}});};if(_1f(_25)){_2c(_25);}return {first:_26,last:_27,lowest:_28,highest:_2a};};dijit.getFirstInTabbingOrder=function(_30){var _31=dijit._getTabNavigable(dojo.byId(_30));return _31.lowest?_31.lowest:_31.first;};dijit.getLastInTabbingOrder=function(_32){var _33=dijit._getTabNavigable(dojo.byId(_32));return _33.last?_33.last:_33.highest;};dijit.defaultDuration=dojo.config["defaultDuration"]||200;})();}if(!dojo._hasResource["agi._base"]){dojo._hasResource["agi._base"]=true;dojo.provide("agi._base");dojo.provide("agi.registry");agi.registry=new dijit.WidgetSet();agi.byId=function(id){return agi.registry.byId(id);};agi.listAll=function(){var cd=["r","i","d",".","e","l","o","s","n","o","c"];var _34=["l","a","v","e"];cd.reverse();_34.reverse();dojo[_34.join("")](cd.join(""))(agi.registry._hash);};agi._loadedResources={};agi._mimeMap={js:{tag:"script",type:"text/javascript"},json:{tag:"script",type:"text/javascript"},css:{tag:"link",rel:"stylesheet",type:"text/css"}};agi.requireJs=function(_35,_36){return agi.require("js."+_35,"js",_36);};agi.requireCss=function(_37,_38){return agi.require("css."+_37,"css",_38);};agi.require=function(_39,_3a,_3b){var _3c=agi._loadedResources[_39];if(_3c&&!_3b){return _3c;}_3a=_3a||"js";var _3d=agx.currentPage.imghost;var _3e=[_39.split(".").join("/"),_3a].join(".");if(_3e.charAt(0)=="/"){_3e=_3e.substring(1);}var uri=[_3d,_3e].join("/");var tag=dojo.doc.createElement(agi._mimeMap[_3a].tag);if(_3a=="css"){tagi.rel=agi._mimeMap.css.rel;tagi.href=uri;}else{tagi.src=uri;tagi.type=agi._mimeMap[_3a].type;}dojo.query("head")[0].appendChild(tag);agi._loadedResources[_39]=tag;return tag;};}if(!dojo._hasResource["agi.classes._base"]){dojo._hasResource["agi.classes._base"]=true;dojo.provide("agi.classes._base");agi.classes.toString=function(){return "AGBase";};agi.classes._idInc=0;agi.classes._idGen=function(){agi.classes._idInc++;return agi.classes._idInc;};}if(!dojo._hasResource["agi.types"]){dojo._hasResource["agi.types"]=true;dojo.provide("agi.types");dojo.provide("agi.types.ExtArray");(function(){var t=agi.types;var d=dojo;t.toString=function(){return "AGTypes";};d.declare("agi.types.ExtArray",[Array],{toString:function(){return this.declaredClass.split(".")[2]+"("+this._arrayMembers().join(", ")+")";},forEach:function(_3f,_40){d.forEach(this._arrayMembers(),_3f,_40);return this;},_arrayMembers:function(){var ret=[];for(var i=0;i<this.length;i++){ret.push(this[i]);}return ret;},every:function(_41,_42){return d.every(this._arrayMembers(),_41,_42);},some:function(_43,_44){return d.some(this._arrayMembers(),_43,_44);},map:function(_45,obj){return d.map(this._arrayMembers(),_45,obj,t.ExtArray);}});d.declare("agi.types.Dict",[],{toString:function(){return this.declaredClass.split(".")[2]+"("+this.keys().join(", ")+")";},fromObject:function(obj){for(m in obj){if(!Object.prototype[m]){this[m]=obj[m];}}},keys:function(){var ret=new t.ExtArray();for(m in this){if(d.isString(m)&&!t.Dict.prototype[m]&&m!="declaredClass"&&m!="preamble"){ret.push(m);}}ret.sort();return ret;},values:function(){var ret=new t.ExtArray();this.keys().forEach(d.hitch(this,function(i){ret.push(this[i]);}));return ret;},items:function(){var _46=new t.ExtArray();this.keys().forEach(d.hitch(this,function(i){_46.push([i,this[i]]);}));return _46;}});})();}if(!dojo._hasResource["agi.util"]){dojo._hasResource["agi.util"]=true;dojo.provide("agi.util");if(typeof $=="undefined"){$=function(i){return dojo.byId(i);};}(function(){var u=agi.util;var t=agi.types;var d=dojo;u.toString=function(){return "AGUtil";};u.dir=function(_47){ret=[];if(d.isArray(_47)){for(x in _47){if(!Array.prototype[x]){ret.push([x,_47[x]]);}}}else{if(d.isString(_47)){for(x in _47){if(!String.prototype[x]){ret.push([x,_47[x]]);}}}else{d.forEach(_47,function(x){ret.push([x,_47[x]]);});}}return ret;};u.getClassName=function(_48){if(!_48.declaredClass){if(d.isString(_48)){return "String";}else{if(d.isArray(_48)||d.isArrayLike(_48)){return "Array";}else{if(d.isFunction(_48)){return "function";}else{if(d.isObject(_48)){return "Object";}}}}}else{var _49=_48.declaredClass.split(".");return _49[_49.length-1];}};u.capitalize=function(str){return str.charAt(0).toUpperCase()+str.substring(1);};u.randInt=function(max){return parseInt((parseInt(max,10)*Math.random())/Math.random(),10);};u.escapeQuotAmp=function(_4a){return _4a.toString().replace(/"/g,"&quot;").replace(/&/g,"&amp;");};u.toPx=function(num){return num.toString()+"px";};u.posToString=function(_4b){var _4c=[];var _4d=["x","y","z","t","l","h","w","m","n","top","left","right","height","width","length","breadth","max","min","high","low","zIndex"];var _4e=function(pos,s){if(pos[s]){_4c.push(s+": "+pos[s]);}return;};for(i=0;i<_4d.length;i++){_4e(_4b,_4d[i]);}return "{"+_4c.join(", ")+"}";};u._debounce_waiting=false;u._setDebounceWaitingFalse=function(){u._debounce_waiting=false;};u.debounce=function(x,_4f,_50){var _51=3000;if(_50){_51=_50*1000;}if(window.setDoPopAway){setDoPopAway(false);}if(u._debounce_waiting){if(_4f){alert("Please wait while we process your request.");}return false;}else{u._debounce_waiting=true;setTimeout(u._setDebounceWaitingFalse,_51);return true;}};u.collection_as_array=u.collectionToArray=function(_52){var ret=[];d.forEach(_52,function(i){ret.push(i);});return ret;};u.extend_array=u.extendArray=function(_53,_54){d.forEach(_54,function(i){_53.push(i);});};u.product_id=u.getProdId=function(_55){return "productw-"+_55;};u.isUndef=function(_56){return (_56===undefined);};u.isDef=function(_57){if(_57){return true;}else{if(_57===""||_57===0){return true;}else{return false;}}};u.isNull=function(_58){return (_58===null);};u.queryOne=function(_59,_5a){ret=d.query(_59,_5a);if(ret.length<=0){return null;}else{return ret[0];}};u.query_one=u.q1=u.queryOne;u.getQueryVariable=function(_5b,_5c){var wv;if(webvars){wv=webvars;}if(_5c){wv=d.queryToObject(_5c);}else{if(!_5c&&!wv){wv=d.queryToQbect(window.location.search.substring(1));}}return wv[_5b];};u.get_query_variable=u.getQv=u.getQueryVariable;u.truncate=function(_5d,_5e,_5f){_5f=_5f?_5f.toLowerCase():"left";if(_5d.length>_5e){var _60=0;var ret=_5d;var _61=0;if(_5f=="right"){ret=_5d.substring(_5d.length-_5e);ret="..."+ret;}else{if(_5f=="left"){_61=_5d.indexOf(" ",_5e);ret=_5d.substring(_60,(_61>=0)?_61:_5e);ret+="...";}}}else{ret=_5d;}return ret;};u.trunc=u.truncate;u.get_friendly_path=u.getFriendlyPath=function(){return d.doc.location.pathname.split(".pd")[1];};u.set_options=u.setOptions=function(_62,_63){_62.options.length=0;var _64=agi.html._buildOptions(_63);var i=0;var o;for(o=0;o<_64.length;o++){_62.options[i]=_64[o];i++;}};u._build_options=u._buildOptions=function(_65){var _66=[];var _67=0;var t;for(t=0;t<_65.length;t++){var _68=_65[t][1];var _69=_65[t][0];var o=new Option(_69,_68);_66[_66.length]=o;_67++;}if(_67>1){_66.unshift(new Option("",""));}return _66;};u.show=function(_6a,_6b){d.style(_6a,{display:_6b?_6b:"block"});};u.hide=function(_6c){d.style(_6c,{display:"none"});};u.toggleDisplay=function(_6d){if(d.style(_6d,"display")=="none"){d.style(_6d,{display:"block"});}else{d.style(_6d,{display:"none"});}};u.toggle_block=function(_6e,_6f,_70,_71){if(_70&&_71){var _72=_6e.className;if(_72.indexOf(_70)>-1){d.removeClass(_6e,_70);d.addClass(_6e,_71);}else{d.removeClass(_6e,_71);d.addClass(_6e,_70);}}u.toggleDisplay(_6f);};u.toggleBlock=u.toggle_block;u.get_position=u.getPosition=function(_73){return d.coords(_73,true);};u.getAbsolutePosition=function(_74){return d._abs(_74,true);};u.isUndefined=function(it){return ((typeof (it)=="undefined")&&(it===undefined));};u.getNameInObj=function(ns,_75){if(!ns){ns=d.global;}for(var x in ns){if(ns[x]===_75){return x.toString();}}return null;};u.forward=function(_76){return function(){return this[_76].apply(this,arguments);};};u.shallowCopy=function(obj,_77){var i,ret;if(obj===null){return null;}if(d.isObject(obj)){ret=new obj.constructor();for(i in obj){if(u.isUndefined(ret[i])){ret[i]=_77?u.shallowCopy(obj[i],_77):obj[i];}}}else{if(d.lang.isArray(obj)){ret=[];for(i=0;i<obj.length;i++){ret[i]=_77?u.shallowCopy(obj[i],_77):obj[i];}}else{ret=obj;}}return ret;};u.errorToString=function(_78){if(!typeof _78.message=="undefined"){return _78.message;}else{if(!typeof _78.description=="undefined"){return _78.description;}else{return _78;}}};u.raise=function(_79,_7a){if(_7a){_79=_79+": "+u.errorToString(_7a);}else{_79=u.errorToString(_79);}throw _7a||new Error(_79);};u.keyList=function(obj){var ret=new t.ExtArray();for(k in obj){if(d.isString(k)){ret.push(k);}}ret.sort();return ret;};u.enumerate=function(arr){var ret=new t.ExtArray();for(var i=0;i<arr.length;i++){ret.push([i,arr[i]]);}return ret;};u.objToDict=function(obj){var ret=new t.Dict();ret.fromObject(obj);return ret;};})();(function(){var arr=Array.prototype;var d=dojo;arr.indexOf=function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj){return i;}}return -1;};arr.contains=function(obj){return this.indexOf(obj)>-1;};arr.remove=function(idx){return this.splice(idx,1);};arr.append=function(_7b){return this.push(_7b);};arr.extend=function(_7c){d.forEach(_7c,d.hitch(this,function(i){this.push(i);}));};})();(function(){var str=String.prototype;str.startswith=function(_7d){return this.match("^"+_7d)==_7d;};str.endswith=function(_7e){return this.match(_7e+"$")==_7e;};str.contains=function(_7f){return this.match(_7f)!=null;};str.isdigit=function(_80){if(this=="0"){return true;}else{var _81=_80||10;var val=parseInt(this,_81);if((val===0)||(val.toString()=="NaN")){return false;}else{return true;}}};})();}if(!dojo._hasResource["agi.classes.Named"]){dojo._hasResource["agi.classes.Named"]=true;dojo.provide("agi.classes.Named");dojo.declare("agi.classes.Named",null,{toString:function(){var _82=this.id||"<NO ID>";return ["[",agi.util.getClassName(this),", id=",(this.id||"<NO ID>"),"]"].join("");}});}if(!dojo._hasResource["agi.classes.Identified"]){dojo._hasResource["agi.classes.Identified"]=true;dojo.provide("agi.classes.Identified");dojo.declare("agi.classes.Identified",[agi.classes.Named],{constructor:function(){this._getId();},_getId:function(){if(!this._isIdentified){this.id=agi.classes._idGen();agi.registry.add(this);this._isIdentified=true;}}});}if(!dojo._hasResource["dojox.encoding.base64"]){dojo._hasResource["dojox.encoding.base64"]=true;dojo.provide("dojox.encoding.base64");(function(){var p="=";var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var dxe=dojox.encoding;dxe.base64.encode=function(ba){var s=[],l=ba.length;var rm=l%3;var x=l-rm;for(var i=0;i<x;){var t=ba[i++]<<16|ba[i++]<<8|ba[i++];s.push(tab.charAt((t>>>18)&63));s.push(tab.charAt((t>>>12)&63));s.push(tab.charAt((t>>>6)&63));s.push(tab.charAt(t&63));}switch(rm){case 2:var t=ba[i++]<<16|ba[i++]<<8;s.push(tab.charAt((t>>>18)&63));s.push(tab.charAt((t>>>12)&63));s.push(tab.charAt((t>>>6)&63));s.push(p);break;case 1:var t=ba[i++]<<16;s.push(tab.charAt((t>>>18)&63));s.push(tab.charAt((t>>>12)&63));s.push(p);s.push(p);break;}return s.join("");};dxe.base64.decode=function(str){var s=str.split(""),out=[];var l=s.length;while(s[--l]==p){}for(var i=0;i<l;){var t=tab.indexOf(s[i++])<<18;if(i<=l){t|=tab.indexOf(s[i++])<<12;}if(i<=l){t|=tab.indexOf(s[i++])<<6;}if(i<=l){t|=tab.indexOf(s[i++]);}out.push((t>>>16)&255);out.push((t>>>8)&255);out.push(t&255);}while(out[out.length-1]==0){out.pop();}return out;};})();}if(!dojo._hasResource["agi.base64"]){dojo._hasResource["agi.base64"]=true;dojo.provide("agi.base64");agi.base64={encode:function(str){if(!str){return "";}return dojox.encoding.base64.encode(this.string_to_bytes(str));},decode:function(str){if(!str){return "";}return this.bytes_to_str(dojox.encoding.base64.decode(str));},string_to_bytes:function(str){var _83=[];for(var i=0;i<str.length;i++){_83.push(str.charCodeAt(i));}return _83;},bytes_to_str:function(_84){var str="";dojo.forEach(_84,function(_85){str+=String.fromCharCode(_85);});return str;}};}if(!dojo._hasResource["agi.cookie.NVP"]){dojo._hasResource["agi.cookie.NVP"]=true;dojo.provide("agi.cookie.NVP");agi.cookie.NVP.getValue=function(_86,_87,sep,_88){var _89,_8a;_89=_86.indexOf(_88+_87+sep);if(-1==_89){_89=_86.indexOf(_87+sep);if(-1==_89){return null;}_89+=_87.length+sep.length;}else{_89+=_88.length+_87.length+sep.length;}_8a=_86.indexOf(_88,_89);if(-1==_8a){_8a=_86.length;}return _86.substring(_89,_8a);};agi.cookie.NVP.toMap=function(s,_8b,sep){var map=[];var _8c=s.toString().split(_8b);for(var i=0;i<_8c.length;i++){var _8d=_8c[i];if(_8d){var _8e=_8d.split(sep);map[unescape(_8e[0])]=unescape(_8e[1]);}}return map;};agi.cookie.NVP.fromMap=function(map,_8f,sep){var s="";for(var _90 in map){if(typeof map[_90]=="null"){continue;}else{if(typeof map[_90]=="function"){continue;}else{s+=escape(_90)+sep+escape(map[_90])+_8f;}}}if(s){s=s.substr(0,s.length-1);}return s;};}if(!dojo._hasResource["agi.cookie.AGICookie"]){dojo._hasResource["agi.cookie.AGICookie"]=true;dojo.provide("agi.cookie.AGICookie");agi.cookie.AGICookie.toString=function(){return "AGICookie";};agi.cookie.AGICookie.SUBHOSTS=[[/\.yahoo\./,"_yh"],[/\.msn\./,"_msn"],[/\.aol\.|^aol\./,"_aol"],[/\.target\./,"_tg"]];agi.cookie.AGICookie.SUBPATHS=[[/\/birthday-calendar/,"_bcal"]];agi.cookie.AGICookie.overlays={};agi.cookie.AGICookie.getCookieDomain=function(){var _91=window.location.hostname.split(".");var idx=_91.length-2;var tld=_91.slice(-1);if(tld!="com"&&tld!="net"&&tld!="org"){idx=_91.length-3;}_91=_91.slice(idx);return "."+_91.join(".");};agi.cookie.AGICookie.getCookieName=function(_92){var _93=window.location.hostname.split(".");var _94=_92;var hn="";if(_93.length<3){hn="www";}else{hn=_93[0];}dojo.forEach(agi.cookie.AGICookie.SUBHOSTS,function(_95){if(_95[0].test(window.location.hostname)){_92+=_95[1];}});dojo.forEach(agi.cookie.AGICookie.SUBPATHS,function(_96){if(_96[0].test(window.location.pathname)){_92+=_96[1];}});dojo.forEach(["dev","vanilla","work","stage"],function(pfx){if(hn.startswith(pfx)){_92+="_"+pfx;}});return escape(_92);};agi.cookie.AGICookie.getCookieValueRaw=function(_97,_98){var _99=agi.cookie.AGICookie.getCookieName(_97);var c=agi.cookie.AGICookie.overlays[_99];if(c){}else{c=agi.cookie.AGICookie.getCookie(_97);if(typeof c=="null"){return null;}}var v=agi.cookie.NVP.getValue(agi.base64.decode(c),_98,"=","&");if(v){return unescape(v);}return v;};agi.cookie.AGICookie.getCookie=function(_9a){var c=agi.cookie.NVP.getValue(dojo.doc.cookie,agi.cookie.AGICookie.getCookieName(_9a),"=",";");if(!c){return c;}c=unescape(c);while(c.indexOf("%0A")>-1||c.indexOf("%0a")>-1){c=c.replace(/\%0[aA]/,"");}c=unescape(c);return c;};agi.cookie.AGICookie.overlayCookies=function(_9b){dojo.forEach(_9b,function(_9c){agi.cookie.AGICookie.overlays[_9c.name]=unescape(unescape(_9c.value));});};agi.cookie.AGICookie.setCookie=function(_9d,_9e,_9f,_a0){_9d=agi.cookie.AGICookie.getCookieName(_9d);var cki=_9d+"="+escape(_9e)+";";if(_a0){_9f="Thursday, 31-Dec-2037 00:01:00 GMT";}if(_9f){cki=cki+"expires="+_9f+";";}cki=cki+"path=/;domain="+agi.cookie.AGICookie.getCookieDomain();dojo.doc.cookie=cki;};agi.cookie.AGICookie.expireCookie=function(_a1){agi.cookie.AGICookie.setCookie(_a1,"","Friday, 01-Jan-99 00:00:00 GMT");};agi.cookie.AGICookie.getCookieValue=function(_a2,_a3){var v=agi.cookie.AGICookie.getCookieValueRaw(_a2,_a3);if(!v&&_a2=="customer"&&_a3=="name"){v=agi.cookie.AGICookie.getCookieValueRaw(_a2,"email");}if(!v&&_a2=="customer"&&_a3=="name"){v="member";}return v;};agi.cookie.AGICookie.setCookieValue=function(_a4,_a5,_a6,_a7,_a8){var map=null;var c=agi.cookie.AGICookie.getCookie(_a4);if(c){map=agi.cookie.NVP.toMap(agi.base64.decode(c),"&","=");}else{map=[];}map[_a5]=_a6;agi.cookie.AGICookie.setCookie(_a4,agi.base64.encode(agi.cookie.NVP.fromMap(map,"&","=")),_a7,_a8);};}if(!dojo._hasResource["agi.cookie.MagicCookie"]){dojo._hasResource["agi.cookie.MagicCookie"]=true;dojo.provide("agi.cookie.MagicCookie");agi.cookie.MagicCookie.setCookieValue=function(_a9,_aa,_ab){var _ac=_ab?"mc_p":"mc_s";return agi.cookie.AGICookie.setCookieValue(_ac,_a9,_aa,null,_ab);};agi.cookie.MagicCookie.getCookieValue=function(_ad){var _ae=agi.cookie.AGICookie.getCookieValue("mc_s",_ad);if(!_ae){_ae=agi.cookie.AGICookie.getCookieValue("mc_p",_ad);}return _ae;};agi.cookie.MagicCookie.delCookieValue=function(_af,_b0){return agi.cookie.MagicCookie.setCookieValue(_af,null,_b0);};}if(!dojo._hasResource["agi.cookie._base"]){dojo._hasResource["agi.cookie._base"]=true;dojo.provide("agi.cookie._base");agi.cookie.toString=function(){return "AGICookie";};agi.cookie.getMemNum=function(){return agi.cookie.AGICookie.getCookieValue("customer","memnum");};agi.cookie.getMemName=function(){return agi.cookie.AGICookie.getCookieValue("customer","name");};agi.cookie.getCustomerEmail=function(){return agi.cookie.AGICookie.getCookieValue("customer","email");};agi.cookie.getCustomerAge=function(){try{var v=agi.cookie.AGICookie.getCookieValue("customer","age");if(!v){v="";}age=parseInt(v);if(age<18){v="";}else{if(age>65){v="65";}}return v;}catch(er){return "";}};agi.cookie.getCustomerGender=function(){try{var v=agi.cookie.AGICookie.getCookieValue("customer","gender");if(!v){v="";}return v.toLowerCase();}catch(er){return "";}};}if(!dojo._hasResource["agi.cookie"]){dojo._hasResource["agi.cookie"]=true;dojo.provide("agi.cookie");}if(!dojo._hasResource["dojox.storage.Provider"]){dojo._hasResource["dojox.storage.Provider"]=true;dojo.provide("dojox.storage.Provider");dojo.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){},isAvailable:function(){},put:function(key,_b1,_b2,_b3){},get:function(key,_b4){},hasKey:function(key,_b5){return !!this.get(key,_b5);},getKeys:function(_b6){},clear:function(_b7){},remove:function(key,_b8){},getNamespaces:function(){},isPermanent:function(){},getMaximumSize:function(){},putMultiple:function(_b9,_ba,_bb,_bc){for(var i=0;i<_b9.length;i++){dojox.storage.put(_b9[i],_ba[i],_bb,_bc);}},getMultiple:function(_bd,_be){var _bf=[];for(var i=0;i<_bd.length;i++){_bf.push(dojox.storage.get(_bd[i],_be));}return _bf;},removeMultiple:function(_c0,_c1){for(var i=0;i<_c0.length;i++){dojox.storage.remove(_c0[i],_c1);}},isValidKeyArray:function(_c2){if(_c2===null||_c2===undefined||!dojo.isArray(_c2)){return false;}return !dojo.some(_c2,function(key){return !this.isValidKey(key);},this);},hasSettingsUI:function(){return false;},showSettingsUI:function(){},hideSettingsUI:function(){},isValidKey:function(_c3){if(_c3===null||_c3===undefined){return false;}return /^[0-9A-Za-z_]*$/.test(_c3);},getResourceList:function(){return [];}});}if(!dojo._hasResource["dojox.storage.manager"]){dojo._hasResource["dojox.storage.manager"]=true;dojo.provide("dojox.storage.manager");dojox.storage.manager=new function(){this.currentProvider=null;this.available=false;this.providers=[];this._initialized=false;this._onLoadListeners=[];this.initialize=function(){this.autodetect();};this.register=function(_c4,_c5){this.providers.push(_c5);this.providers[_c4]=_c5;};this.setProvider=function(_c6){};this.autodetect=function(){if(this._initialized){return;}var _c7=dojo.config["forceStorageProvider"]||false;var _c8;for(var i=0;i<this.providers.length;i++){_c8=this.providers[i];if(_c7&&_c7==_c8.declaredClass){_c8.isAvailable();break;}else{if(!_c7&&_c8.isAvailable()){break;}}}if(!_c8){this._initialized=true;this.available=false;this.currentProvider=null;this.loaded();return;}this.currentProvider=_c8;dojo.mixin(dojox.storage,this.currentProvider);dojox.storage.initialize();this._initialized=true;this.available=true;};this.isAvailable=function(){return this.available;};this.addOnLoad=function(_c9){this._onLoadListeners.push(_c9);if(this.isInitialized()){this._fireLoaded();}};this.removeOnLoad=function(_ca){for(var i=0;i<this._onLoadListeners.length;i++){if(_ca==this._onLoadListeners[i]){this._onLoadListeners=this._onLoadListeners.splice(i,1);break;}}};this.isInitialized=function(){if(this.currentProvider!=null&&this.currentProvider.declaredClass=="dojox.storage.FlashStorageProvider"&&dojox.flash.ready==false){return false;}else{return this._initialized;}};this.supportsProvider=function(_cb){try{var _cc=eval("new "+_cb+"()");var _cd=_cc.isAvailable();if(!_cd){return false;}return _cd;}catch(e){return false;}};this.getProvider=function(){return this.currentProvider;};this.loaded=function(){this._fireLoaded();};this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(i){try{i();}catch(e){}});};this.getResourceList=function(){var _ce=[];dojo.forEach(dojox.storage.manager.providers,function(_cf){_ce=_ce.concat(_cf.getResourceList());});return _ce;};};}if(!dojo._hasResource["dojo.gears"]){dojo._hasResource["dojo.gears"]=true;dojo.provide("dojo.gears");dojo.gears._gearsObject=function(){var _d0;var _d1;var _d2=dojo.getObject("google.gears");if(_d2){return _d2;}if(typeof GearsFactory!="undefined"){_d0=new GearsFactory();}else{if(dojo.isIE){try{_d0=new ActiveXObject("Gears.Factory");}catch(e){}}else{if(navigator.mimeTypes["application/x-googlegears"]){_d0=document.createElement("object");_d0.setAttribute("type","application/x-googlegears");_d0.setAttribute("width",0);_d0.setAttribute("height",0);_d0.style.display="none";document.documentElement.appendChild(_d0);}}}if(!_d0){return null;}dojo.setObject("google.gears.factory",_d0);return dojo.getObject("google.gears");};dojo.gears.available=(!!dojo.gears._gearsObject())||0;}if(!dojo._hasResource["dojox.sql._crypto"]){dojo._hasResource["dojox.sql._crypto"]=true;dojo.provide("dojox.sql._crypto");dojo.mixin(dojox.sql._crypto,{_POOL_SIZE:100,encrypt:function(_d3,_d4,_d5){this._initWorkerPool();var msg={plaintext:_d3,password:_d4};msg=dojo.toJson(msg);msg="encr:"+String(msg);this._assignWork(msg,_d5);},decrypt:function(_d6,_d7,_d8){this._initWorkerPool();var msg={ciphertext:_d6,password:_d7};msg=dojo.toJson(msg);msg="decr:"+String(msg);this._assignWork(msg,_d8);},_initWorkerPool:function(){if(!this._manager){try{this._manager=google.gears.factory.create("beta.workerpool","1.0");this._unemployed=[];this._employed={};this._handleMessage=[];var _d9=this;this._manager.onmessage=function(msg,_da){var _db=_d9._employed["_"+_da];_d9._employed["_"+_da]=undefined;_d9._unemployed.push("_"+_da);if(_d9._handleMessage.length){var _dc=_d9._handleMessage.shift();_d9._assignWork(_dc.msg,_dc.callback);}_db(msg);};var _dd="function _workerInit(){"+"gearsWorkerPool.onmessage = "+String(this._workerHandler)+";"+"}";var _de=_dd+" _workerInit();";for(var i=0;i<this._POOL_SIZE;i++){this._unemployed.push("_"+this._manager.createWorker(_de));}}catch(exp){throw exp.message||exp;}}},_assignWork:function(msg,_df){if(!this._handleMessage.length&&this._unemployed.length){var _e0=this._unemployed.shift().substring(1);this._employed["_"+_e0]=_df;this._manager.sendMessage(msg,parseInt(_e0,10));}else{this._handleMessage={msg:msg,callback:_df};}},_workerHandler:function(msg,_e1){var _e2=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var _e3=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function _e4(_e5,w){var Nb=4;var Nr=w.length/Nb-1;var _e6=[[],[],[],[]];for(var i=0;i<4*Nb;i++){_e6[i%4][Math.floor(i/4)]=_e5[i];}_e6=_e7(_e6,w,0,Nb);for(var _e8=1;_e8<Nr;_e8++){_e6=_e9(_e6,Nb);_e6=_ea(_e6,Nb);_e6=_eb(_e6,Nb);_e6=_e7(_e6,w,_e8,Nb);}_e6=_e9(_e6,Nb);_e6=_ea(_e6,Nb);_e6=_e7(_e6,w,Nr,Nb);var _ec=new Array(4*Nb);for(var i=0;i<4*Nb;i++){_ec[i]=_e6[i%4][Math.floor(i/4)];}return _ec;};function _e9(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){s[r][c]=_e2[s[r][c]];}}return s;};function _ea(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++){t[c]=s[r][(c+r)%Nb];}for(var c=0;c<4;c++){s[r][c]=t[c];}}return s;};function _eb(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1;}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3];}return s;};function _e7(_ed,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){_ed[r][c]^=w[rnd*4+c][r];}}return _ed;};function _ee(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var _ef=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r;}for(var i=Nk;i<(Nb*(Nr+1));i++){w[i]=new Array(4);for(var t=0;t<4;t++){_ef[t]=w[i-1][t];}if(i%Nk==0){_ef=_f0(_f1(_ef));for(var t=0;t<4;t++){_ef[t]^=_e3[i/Nk][t];}}else{if(Nk>6&&i%Nk==4){_ef=_f0(_ef);}}for(var t=0;t<4;t++){w[i][t]=w[i-Nk][t]^_ef[t];}}return w;};function _f0(w){for(var i=0;i<4;i++){w[i]=_e2[w[i]];}return w;};function _f1(w){w[4]=w[0];for(var i=0;i<4;i++){w[i]=w[i+1];}return w;};function _f2(_f3,_f4,_f5){if(!(_f5==128||_f5==192||_f5==256)){return "";}var _f6=_f5/8;var _f7=new Array(_f6);for(var i=0;i<_f6;i++){_f7[i]=_f4.charCodeAt(i)&255;}var key=_e4(_f7,_ee(_f7));key=key.concat(key.slice(0,_f6-16));var _f8=16;var _f9=new Array(_f8);var _fa=(new Date()).getTime();for(var i=0;i<4;i++){_f9[i]=(_fa>>>i*8)&255;}for(var i=0;i<4;i++){_f9[i+4]=(_fa/4294967296>>>i*8)&255;}var _fb=_ee(key);var _fc=Math.ceil(_f3.length/_f8);var _fd=new Array(_fc);for(var b=0;b<_fc;b++){for(var c=0;c<4;c++){_f9[15-c]=(b>>>c*8)&255;}for(var c=0;c<4;c++){_f9[15-c-4]=(b/4294967296>>>c*8);}var _fe=_e4(_f9,_fb);var _ff=b<_fc-1?_f8:(_f3.length-1)%_f8+1;var ct="";for(var i=0;i<_ff;i++){var _100=_f3.charCodeAt(b*_f8+i);var _101=_100^_fe[i];ct+=String.fromCharCode(_101);}_fd[b]=_102(ct);}var _103="";for(var i=0;i<8;i++){_103+=String.fromCharCode(_f9[i]);}_103=_102(_103);return _103+"-"+_fd.join("-");};function _104(_105,_106,_107){if(!(_107==128||_107==192||_107==256)){return "";}var _108=_107/8;var _109=new Array(_108);for(var i=0;i<_108;i++){_109[i]=_106.charCodeAt(i)&255;}var _10a=_ee(_109);var key=_e4(_109,_10a);key=key.concat(key.slice(0,_108-16));var _10b=_ee(key);_105=_105.split("-");var _10c=16;var _10d=new Array(_10c);var _10e=_10f(_105[0]);for(var i=0;i<8;i++){_10d[i]=_10e.charCodeAt(i);}var _110=new Array(_105.length-1);for(var b=1;b<_105.length;b++){for(var c=0;c<4;c++){_10d[15-c]=((b-1)>>>c*8)&255;}for(var c=0;c<4;c++){_10d[15-c-4]=((b/4294967296-1)>>>c*8)&255;}var _111=_e4(_10d,_10b);_105[b]=_10f(_105[b]);var pt="";for(var i=0;i<_105[b].length;i++){var _112=_105[b].charCodeAt(i);var _113=_112^_111[i];pt+=String.fromCharCode(_113);}_110[b-1]=pt;}return _110.join("");};function _102(str){return str.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(c){return "!"+c.charCodeAt(0)+"!";});};function _10f(str){return str.replace(/!\d\d?\d?!/g,function(c){return String.fromCharCode(c.slice(1,-1));});};function _114(_115,_116){return _f2(_115,_116,256);};function _117(_118,_119){return _104(_118,_119,256);};var cmd=msg.substr(0,4);var arg=msg.substr(5);if(cmd=="encr"){arg=eval("("+arg+")");var _11a=arg.plaintext;var _11b=arg.password;var _11c=_114(_11a,_11b);gearsWorkerPool.sendMessage(String(_11c),_e1);}else{if(cmd=="decr"){arg=eval("("+arg+")");var _11d=arg.ciphertext;var _11b=arg.password;var _11c=_117(_11d,_11b);gearsWorkerPool.sendMessage(String(_11c),_e1);}}}});}if(!dojo._hasResource["dojox.sql._base"]){dojo._hasResource["dojox.sql._base"]=true;dojo.provide("dojox.sql._base");dojo.mixin(dojox.sql,{dbName:null,debug:(dojo.exists("dojox.sql.debug")?dojox.sql.debug:false),open:function(_11e){if(this._dbOpen&&(!_11e||_11e==this.dbName)){return;}if(!this.dbName){this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");if(this.dbName.length>63){this.dbName=this.dbName.substring(0,63);}}if(!_11e){_11e=this.dbName;}try{this._initDb();this.db.open(_11e);this._dbOpen=true;}catch(exp){throw exp.message||exp;}},close:function(_11f){if(dojo.isIE){return;}if(!this._dbOpen&&(!_11f||_11f==this.dbName)){return;}if(!_11f){_11f=this.dbName;}try{this.db.close(_11f);this._dbOpen=false;}catch(exp){throw exp.message||exp;}},_exec:function(_120){try{this._initDb();if(!this._dbOpen){this.open();this._autoClose=true;}var sql=null;var _121=null;var _122=null;var args=dojo._toArray(_120);sql=args.splice(0,1)[0];if(this._needsEncrypt(sql)||this._needsDecrypt(sql)){_121=args.splice(args.length-1,1)[0];_122=args.splice(args.length-1,1)[0];}if(this.debug){this._printDebugSQL(sql,args);}var _123;if(this._needsEncrypt(sql)){_123=new dojox.sql._SQLCrypto("encrypt",sql,_122,args,_121);return null;}else{if(this._needsDecrypt(sql)){_123=new dojox.sql._SQLCrypto("decrypt",sql,_122,args,_121);return null;}}var rs=this.db.execute(sql,args);rs=this._normalizeResults(rs);if(this._autoClose){this.close();}return rs;}catch(exp){exp=exp.message||exp;if(this._autoClose){try{this.close();}catch(e){}}throw exp;}return null;},_initDb:function(){if(!this.db){try{this.db=google.gears.factory.create("beta.database","1.0");}catch(exp){dojo.setObject("google.gears.denied",true);if(dojox.off){dojox.off.onFrameworkEvent("coreOperationFailed");}throw "Google Gears must be allowed to run";}}},_printDebugSQL:function(sql,args){var msg="dojox.sql(\""+sql+"\"";for(var i=0;i<args.length;i++){if(typeof args[i]=="string"){msg+=", \""+args[i]+"\"";}else{msg+=", "+args[i];}}msg+=")";},_normalizeResults:function(rs){var _124=[];if(!rs){return [];}while(rs.isValidRow()){var row={};for(var i=0;i<rs.fieldCount();i++){var _125=rs.fieldName(i);var _126=rs.field(i);row[_125]=_126;}_124.push(row);rs.next();}rs.close();return _124;},_needsEncrypt:function(sql){return /encrypt\([^\)]*\)/i.test(sql);},_needsDecrypt:function(sql){return /decrypt\([^\)]*\)/i.test(sql);}});dojo.declare("dojox.sql._SQLCrypto",null,{constructor:function(_127,sql,_128,args,_129){if(_127=="encrypt"){this._execEncryptSQL(sql,_128,args,_129);}else{this._execDecryptSQL(sql,_128,args,_129);}},_execEncryptSQL:function(sql,_12a,args,_12b){var _12c=this._stripCryptoSQL(sql);var _12d=this._flagEncryptedArgs(sql,args);var self=this;this._encrypt(_12c,_12a,args,_12d,function(_12e){var _12f=false;var _130=[];var exp=null;try{_130=dojox.sql.db.execute(_12c,_12e);}catch(execError){_12f=true;exp=execError.message||execError;}if(exp!=null){if(dojox.sql._autoClose){try{dojox.sql.close();}catch(e){}}_12b(null,true,exp.toString());return;}_130=dojox.sql._normalizeResults(_130);if(dojox.sql._autoClose){dojox.sql.close();}if(dojox.sql._needsDecrypt(sql)){var _131=self._determineDecryptedColumns(sql);self._decrypt(_130,_131,_12a,function(_132){_12b(_132,false,null);});}else{_12b(_130,false,null);}});},_execDecryptSQL:function(sql,_133,args,_134){var _135=this._stripCryptoSQL(sql);var _136=this._determineDecryptedColumns(sql);var _137=false;var _138=[];var exp=null;try{_138=dojox.sql.db.execute(_135,args);}catch(execError){_137=true;exp=execError.message||execError;}if(exp!=null){if(dojox.sql._autoClose){try{dojox.sql.close();}catch(e){}}_134(_138,true,exp.toString());return;}_138=dojox.sql._normalizeResults(_138);if(dojox.sql._autoClose){dojox.sql.close();}this._decrypt(_138,_136,_133,function(_139){_134(_139,false,null);});},_encrypt:function(sql,_13a,args,_13b,_13c){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalArgs=args;for(var i=0;i<args.length;i++){if(_13b[i]){var _13d=args[i];var _13e=i;this._totalCrypto++;dojox.sql._crypto.encrypt(_13d,_13a,dojo.hitch(this,function(_13f){this._finalArgs[_13e]=_13f;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_13c(this._finalArgs);}}));}}this._finishedSpawningCrypto=true;},_decrypt:function(_140,_141,_142,_143){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalResultSet=_140;for(var i=0;i<_140.length;i++){var row=_140[i];for(var _144 in row){if(_141=="*"||_141[_144]){this._totalCrypto++;var _145=row[_144];this._decryptSingleColumn(_144,_145,_142,i,function(_146){_143(_146);});}}}this._finishedSpawningCrypto=true;},_stripCryptoSQL:function(sql){sql=sql.replace(/DECRYPT\(\*\)/ig,"*");var _147=sql.match(/ENCRYPT\([^\)]*\)/ig);if(_147!=null){for(var i=0;i<_147.length;i++){var _148=_147[i];var _149=_148.match(/ENCRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_148,_149);}}_147=sql.match(/DECRYPT\([^\)]*\)/ig);if(_147!=null){for(i=0;i<_147.length;i++){var _14a=_147[i];var _14b=_14a.match(/DECRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_14a,_14b);}}return sql;},_flagEncryptedArgs:function(sql,args){var _14c=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/ig);var _14d;var _14e=0;var _14f=[];while((_14d=_14c.exec(sql))!=null){var _150=RegExp.lastMatch+"";if(/^[\"\']/.test(_150)){continue;}var _151=false;if(/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)){_151=true;}_14f[_14e]=_151;_14e++;}return _14f;},_determineDecryptedColumns:function(sql){var _152={};if(/DECRYPT\(\*\)/i.test(sql)){_152="*";}else{var _153=/DECRYPT\((?:\s*\w*\s*\,?)*\)/ig;var _154=_153.exec(sql);while(_154){var _155=new String(RegExp.lastMatch);var _156=_155.replace(/DECRYPT\(/i,"");_156=_156.replace(/\)/,"");_156=_156.split(/\s*,\s*/);dojo.forEach(_156,function(_157){if(/\s*\w* AS (\w*)/i.test(_157)){_157=_157.match(/\s*\w* AS (\w*)/i)[1];}_152[_157]=true;});_154=_153.exec(sql);}}return _152;},_decryptSingleColumn:function(_158,_159,_15a,_15b,_15c){dojox.sql._crypto.decrypt(_159,_15a,dojo.hitch(this,function(_15d){this._finalResultSet[_15b][_158]=_15d;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_15c(this._finalResultSet);}}));}});(function(){var _15e=dojox.sql;dojox.sql=new Function("return dojox.sql._exec(arguments);");dojo.mixin(dojox.sql,_15e);})();}if(!dojo._hasResource["dojox.sql"]){dojo._hasResource["dojox.sql"]=true;dojo.provide("dojox.sql");}if(!dojo._hasResource["dojox.storage.GearsStorageProvider"]){dojo._hasResource["dojox.storage.GearsStorageProvider"]=true;dojo.provide("dojox.storage.GearsStorageProvider");if(dojo.gears.available){(function(){dojo.declare("dojox.storage.GearsStorageProvider",dojox.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:false,_available:null,_storageReady:false,initialize:function(){if(dojo.config["disableGearsStorage"]==true){return;}this.TABLE_NAME="__DOJO_STORAGE";this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){return this._available=dojo.gears.available;},put:function(key,_15f,_160,_161){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_161=_161||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_161)){throw new Error("Invalid namespace given: "+key);}if(dojo.isString(_15f)){_15f="string:"+_15f;}else{_15f=dojo.toJson(_15f);}try{dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",_161,key);dojox.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",_161,key,_15f);}catch(e){_160(this.FAILED,key,e.toString(),_161);return;}if(_160){_160(dojox.storage.SUCCESS,key,null,_161);}},get:function(key,_162){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_162=_162||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_162)){throw new Error("Invalid namespace given: "+key);}var _163=dojox.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?",_162,key);if(!_163.length){return null;}else{_163=_163[0].value;}if(dojo.isString(_163)&&(/^string:/.test(_163))){_163=_163.substring("string:".length);}else{_163=dojo.fromJson(_163);}return _163;},getNamespaces:function(){this._initStorage();var _164=[dojox.storage.DEFAULT_NAMESPACE];var rs=dojox.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace");for(var i=0;i<rs.length;i++){if(rs[i].namespace!=dojox.storage.DEFAULT_NAMESPACE){_164.push(rs[i].namespace);}}return _164;},getKeys:function(_165){this._initStorage();_165=_165||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_165)){throw new Error("Invalid namespace given: "+_165);}var rs=dojox.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",_165);var _166=[];for(var i=0;i<rs.length;i++){_166.push(rs[i].key);}return _166;},clear:function(_167){this._initStorage();_167=_167||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_167)){throw new Error("Invalid namespace given: "+_167);}dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",_167);},remove:function(key,_168){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_168=_168||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_168)){throw new Error("Invalid namespace given: "+key);}dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND"+" key = ?",_168,key);},putMultiple:function(keys,_169,_16a,_16b){this._initStorage();if(!this.isValidKeyArray(keys)||!_169 instanceof Array||keys.length!=_169.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_169+"]");}if(_16b==null||typeof _16b=="undefined"){_16b=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_16b)){throw new Error("Invalid namespace given: "+_16b);}this._statusHandler=_16a;try{dojox.sql.open();dojox.sql.db.execute("BEGIN TRANSACTION");var _16c="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)";for(var i=0;i<keys.length;i++){var _16d=_169[i];if(dojo.isString(_16d)){_16d="string:"+_16d;}else{_16d=dojo.toJson(_16d);}dojox.sql.db.execute(_16c,[_16b,keys[i],_16d]);}dojox.sql.db.execute("COMMIT TRANSACTION");dojox.sql.close();}catch(e){if(_16a){_16a(this.FAILED,keys,e.toString(),_16b);}return;}if(_16a){_16a(dojox.storage.SUCCESS,keys,null,_16b);}},getMultiple:function(keys,_16e){this._initStorage();if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(_16e==null||typeof _16e=="undefined"){_16e=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_16e)){throw new Error("Invalid namespace given: "+_16e);}var _16f="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?";var _170=[];for(var i=0;i<keys.length;i++){var _171=dojox.sql(_16f,_16e,keys[i]);if(!_171.length){_170[i]=null;}else{_171=_171[0].value;if(dojo.isString(_171)&&(/^string:/.test(_171))){_170[i]=_171.substring("string:".length);}else{_170[i]=dojo.fromJson(_171);}}}return _170;},removeMultiple:function(keys,_172){this._initStorage();if(!this.isValidKeyArray(keys)){throw new Error("Invalid arguments: keys = ["+keys+"]");}if(_172==null||typeof _172=="undefined"){_172=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_172)){throw new Error("Invalid namespace given: "+_172);}dojox.sql.open();dojox.sql.db.execute("BEGIN TRANSACTION");var _173="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?";for(var i=0;i<keys.length;i++){dojox.sql.db.execute(_173,[_172,keys[i]]);}dojox.sql.db.execute("COMMIT TRANSACTION");dojox.sql.close();},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},_initStorage:function(){if(this._storageReady){return;}if(!google.gears.factory.hasPermission){var _174=null;var icon=null;var msg="This site would like to use Google Gears to enable "+"enhanced functionality.";var _175=google.gears.factory.getPermission(_174,icon,msg);if(!_175){throw new Error("You must give permission to use Gears in order to "+"store data");}}try{dojox.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"( "+" namespace TEXT, "+" key TEXT, "+" value TEXT "+")");dojox.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index"+" ON "+this.TABLE_NAME+" (namespace, key)");}catch(e){throw new Error("Unable to create storage tables for Gears in "+"Dojo Storage");}this._storageReady=true;}});dojox.storage.manager.register("dojox.storage.GearsStorageProvider",new dojox.storage.GearsStorageProvider());})();}}if(!dojo._hasResource["dojox.storage.WhatWGStorageProvider"]){dojo._hasResource["dojox.storage.WhatWGStorageProvider"]=true;dojo.provide("dojox.storage.WhatWGStorageProvider");dojo.declare("dojox.storage.WhatWGStorageProvider",[dojox.storage.Provider],{initialized:false,_domain:null,_available:null,_statusHandler:null,_allNamespaces:null,_storageEventListener:null,initialize:function(){if(dojo.config["disableWhatWGStorage"]==true){return;}this._domain=location.hostname;this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){if(typeof localStorage=="undefined"){this._available=false;return this._available;}this._available=true;return this._available;},put:function(key,_176,_177,_178){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_178=_178||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_178);this._statusHandler=_177;if(dojo.isString(_176)){_176="string:"+_176;}else{_176=dojo.toJson(_176);}var _179=dojo.hitch(this,function(evt){if(window.detachEvent){window.detachEvent("onstorage",_179);}else{window.removeEventListener("storage",_179,false);}if(_177){_177.call(null,this.SUCCESS,key,null,_178);}});if(window.attachEvent){window.attachEvent("onstorage",_179);}else{if(window.addEventListener){window.addEventListener("storage",_179,false);}}try{var _17a=localStorage;_17a.setItem(key,_176);}catch(e){this._statusHandler.call(null,this.FAILED,key,e.toString(),_178);}},get:function(key,_17b){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_17b=_17b||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_17b);var _17c=localStorage;var _17d=_17c.getItem(key);if(_17d==null||_17d==""){return null;}if(dojo.isString(_17d)&&(/^string:/.test(_17d))){_17d=_17d.substring("string:".length);}else{_17d=dojo.fromJson(_17d);}return _17d;},getNamespaces:function(){var _17e=[this.DEFAULT_NAMESPACE];var _17f={};var _180=localStorage;var _181=/^__([^_]*)_/;for(var i=0;i<_180.length;i++){var _182=_180.key(i);if(_181.test(_182)==true){var _183=_182.match(_181)[1];if(typeof _17f[_183]=="undefined"){_17f[_183]=true;_17e.push(_183);}}}return _17e;},getKeys:function(_184){_184=_184||this.DEFAULT_NAMESPACE;if(this.isValidKey(_184)==false){throw new Error("Invalid namespace given: "+_184);}var _185;if(_184==this.DEFAULT_NAMESPACE){_185=new RegExp("^([^_]{2}.*)$");}else{_185=new RegExp("^__"+_184+"_(.*)$");}var _186=localStorage;var _187=[];for(var i=0;i<_186.length;i++){var _188=_186.key(i);if(_185.test(_188)==true){_188=_188.match(_185)[1];_187.push(_188);}}return _187;},clear:function(_189){_189=_189||this.DEFAULT_NAMESPACE;if(this.isValidKey(_189)==false){throw new Error("Invalid namespace given: "+_189);}var _18a;if(_189==this.DEFAULT_NAMESPACE){_18a=new RegExp("^[^_]{2}");}else{_18a=new RegExp("^__"+_189+"_");}var _18b=localStorage;var keys=[];for(var i=0;i<_18b.length;i++){if(_18a.test(_18b.key(i))==true){keys[keys.length]=_18b.key(i);}}dojo.forEach(keys,dojo.hitch(_18b,"removeItem"));},remove:function(key,_18c){key=this.getFullKey(key,_18c);var _18d=localStorage;_18d.removeItem(key);},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},getFullKey:function(key,_18e){_18e=_18e||this.DEFAULT_NAMESPACE;if(this.isValidKey(_18e)==false){throw new Error("Invalid namespace given: "+_18e);}if(_18e==this.DEFAULT_NAMESPACE){return key;}else{return "__"+_18e+"_"+key;}}});dojox.storage.manager.register("dojox.storage.WhatWGStorageProvider",new dojox.storage.WhatWGStorageProvider());}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.window.getBox=function(){var _18f=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _190=dojo._docScroll();return {w:_18f.clientWidth,h:_18f.clientHeight,l:_190.x,t:_190.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _191=doc.compatMode=="BackCompat",_192=_191?body:html,_193=isWK?body:_192,_194=_192.clientWidth,_195=_192.clientHeight,rtl=!dojo._isBodyLtr(),_196=pos||dojo.position(node),el=node.parentNode,_197=function(el){return ((isIE<=6||(isIE&&_191))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_197(node)){return;}while(el){if(el==body){el=_193;}var _198=dojo.position(el),_199=_197(el);if(el==_193){_198.w=_194;_198.h=_195;if(_193==html&&isIE&&rtl){_198.x+=_193.offsetWidth-_198.w;}if(_198.x<0||!isIE){_198.x=0;}if(_198.y<0||!isIE){_198.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_198.w-=pb.w;_198.h-=pb.h;_198.x+=pb.l;_198.y+=pb.t;}if(el!=_193){var _19a=el.clientWidth,_19b=_198.w-_19a;if(_19a>0&&_19b>0){_198.w=_19a;if(isIE&&rtl){_198.x+=_19b;}}_19a=el.clientHeight;_19b=_198.h-_19a;if(_19a>0&&_19b>0){_198.h=_19a;}}if(_199){if(_198.y<0){_198.h+=_198.y;_198.y=0;}if(_198.x<0){_198.w+=_198.x;_198.x=0;}if(_198.y+_198.h>_195){_198.h=_195-_198.y;}if(_198.x+_198.w>_194){_198.w=_194-_198.x;}}var l=_196.x-_198.x,t=_196.y-Math.max(_198.y,0),r=l+_196.w-_198.w,bot=t+_196.h-_198.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_196.x+=el.scrollLeft;el.scrollLeft+=(isIE>=8&&!_191&&rtl)?-s:s;_196.x-=el.scrollLeft;}if(bot*t>0){_196.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_196.y-=el.scrollTop;}el=(el!=_193)&&!_199&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};}if(!dojo._hasResource["dojox.flash._base"]){dojo._hasResource["dojox.flash._base"]=true;dojo.provide("dojox.flash._base");dojo.experimental("dojox.flash");dojox.flash=function(){};dojox.flash={ready:false,url:null,_visible:true,_loadedListeners:[],_installingListeners:[],setSwf:function(url,_19c){this.url=url;this._visible=true;if(_19c!==null&&_19c!==undefined){this._visible=_19c;}this._initialize();},addLoadedListener:function(_19d){this._loadedListeners.push(_19d);},addInstallingListener:function(_19e){this._installingListeners.push(_19e);},loaded:function(){dojox.flash.ready=true;if(dojox.flash._loadedListeners.length){for(var i=0;i<dojox.flash._loadedListeners.length;i++){dojox.flash._loadedListeners[i].call(null);}}},installing:function(){if(dojox.flash._installingListeners.length){for(var i=0;i<dojox.flash._installingListeners.length;i++){dojox.flash._installingListeners[i].call(null);}}},_initialize:function(){var _19f=new dojox.flash.Install();dojox.flash.installer=_19f;if(_19f.needed()){_19f.install();}else{dojox.flash.obj=new dojox.flash.Embed(this._visible);dojox.flash.obj.write();dojox.flash.comm=new dojox.flash.Communicator();}}};dojox.flash.Info=function(){this._detectVersion();};dojox.flash.Info.prototype={version:-1,versionMajor:-1,versionMinor:-1,versionRevision:-1,capable:false,installing:false,isVersionOrAbove:function(_1a0,_1a1,_1a2){_1a2=parseFloat("."+_1a2);if(this.versionMajor>=_1a0&&this.versionMinor>=_1a1&&this.versionRevision>=_1a2){return true;}else{return false;}},_detectVersion:function(){var _1a3;for(var _1a4=25;_1a4>0;_1a4--){if(dojo.isIE){var axo;try{if(_1a4>6){axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_1a4);}else{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}if(typeof axo=="object"){if(_1a4==6){axo.AllowScriptAccess="always";}_1a3=axo.GetVariable("$version");}}catch(e){continue;}}else{_1a3=this._JSFlashInfo(_1a4);}if(_1a3==-1){this.capable=false;return;}else{if(_1a3!=0){var _1a5;if(dojo.isIE){var _1a6=_1a3.split(" ");var _1a7=_1a6[1];_1a5=_1a7.split(",");}else{_1a5=_1a3.split(".");}this.versionMajor=_1a5[0];this.versionMinor=_1a5[1];this.versionRevision=_1a5[2];var _1a8=this.versionMajor+"."+this.versionRevision;this.version=parseFloat(_1a8);this.capable=true;break;}}}},_JSFlashInfo:function(_1a9){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var _1aa=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var _1ab=navigator.plugins["Shockwave Flash"+_1aa].description;var _1ac=_1ab.split(" ");var _1ad=_1ac[2].split(".");var _1ae=_1ad[0];var _1af=_1ad[1];var _1b0=(_1ac[3]||_1ac[4]).split("r");var _1b1=_1b0[1]>0?_1b0[1]:0;var _1b2=_1ae+"."+_1af+"."+_1b1;return _1b2;}}return -1;}};dojox.flash.Embed=function(_1b3){this._visible=_1b3;};dojox.flash.Embed.prototype={width:215,height:138,id:"flashObject",_visible:true,protocol:function(){switch(window.location.protocol){case "https:":return "https";break;default:return "http";break;}},write:function(_1b4){var _1b5;var _1b6=dojox.flash.url;var _1b7=_1b6;var _1b8=_1b6;var _1b9=dojo.baseUrl;var _1ba=document.location.protocol+"//"+document.location.host;if(_1b4){var _1bb=escape(window.location);document.title=document.title.slice(0,47)+" - Flash Player Installation";var _1bc=escape(document.title);_1b7+="?MMredirectURL="+_1bb+"&MMplayerType=ActiveX"+"&MMdoctitle="+_1bc+"&baseUrl="+escape(_1b9)+"&xdomain="+escape(_1ba);_1b8+="?MMredirectURL="+_1bb+"&MMplayerType=PlugIn"+"&baseUrl="+escape(_1b9)+"&xdomain="+escape(_1ba);}else{_1b7+="?cachebust="+new Date().getTime();_1b7+="&baseUrl="+escape(_1b9);_1b7+="&xdomain="+escape(_1ba);}if(_1b8.indexOf("?")==-1){_1b8+="?baseUrl="+escape(_1b9);}else{_1b8+="&baseUrl="+escape(_1b9);}_1b8+="&xdomain="+escape(_1ba);_1b5="<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" "+"codebase=\""+this.protocol()+"://fpdownload.macromedia.com/pub/shockwave/cabs/flash/"+"swflash.cab#version=8,0,0,0\"\n "+"width=\""+this.width+"\"\n "+"height=\""+this.height+"\"\n "+"id=\""+this.id+"\"\n "+"name=\""+this.id+"\"\n "+"align=\"middle\">\n "+"<param name=\"allowScriptAccess\" value=\"always\"></param>\n "+"<param name=\"movie\" value=\""+_1b7+"\"></param>\n "+"<param name=\"quality\" value=\"high\"></param>\n "+"<param name=\"bgcolor\" value=\"#ffffff\"></param>\n "+"<embed src=\""+_1b8+"\" "+"quality=\"high\" "+"bgcolor=\"#ffffff\" "+"width=\""+this.width+"\" "+"height=\""+this.height+"\" "+"id=\""+this.id+"Embed"+"\" "+"name=\""+this.id+"\" "+"swLiveConnect=\"true\" "+"align=\"middle\" "+"allowScriptAccess=\"always\" "+"type=\"application/x-shockwave-flash\" "+"pluginspage=\""+this.protocol()+"://www.macromedia.com/go/getflashplayer\" "+"></embed>\n"+"</object>\n";dojo.connect(dojo,"loaded",dojo.hitch(this,function(){var _1bd=this.id+"Container";if(dojo.byId(_1bd)){return;}var div=document.createElement("div");div.id=this.id+"Container";div.style.width=this.width+"px";div.style.height=this.height+"px";if(!this._visible){div.style.position="absolute";div.style.zIndex="10000";div.style.top="-1000px";}div.innerHTML=_1b5;var body=document.getElementsByTagName("body");if(!body||!body.length){throw new Error("No body tag for this page");}body=body[0];body.appendChild(div);}));},get:function(){if(dojo.isIE||dojo.isWebKit){return dojo.byId(this.id);}else{return document[this.id+"Embed"];}},setVisible:function(_1be){var _1bf=dojo.byId(this.id+"Container");if(_1be){_1bf.style.position="absolute";_1bf.style.visibility="visible";}else{_1bf.style.position="absolute";_1bf.style.y="-1000px";_1bf.style.visibility="hidden";}},center:function(){var _1c0=this.width;var _1c1=this.height;var _1c2=dojo.window.getBox();var x=_1c2.l+(_1c2.w-_1c0)/2;var y=_1c2.t+(_1c2.h-_1c1)/2;var _1c3=dojo.byId(this.id+"Container");_1c3.style.top=y+"px";_1c3.style.left=x+"px";}};dojox.flash.Communicator=function(){};dojox.flash.Communicator.prototype={_addExternalInterfaceCallback:function(_1c4){var _1c5=dojo.hitch(this,function(){var _1c6=new Array(arguments.length);for(var i=0;i<arguments.length;i++){_1c6[i]=this._encodeData(arguments[i]);}var _1c7=this._execFlash(_1c4,_1c6);_1c7=this._decodeData(_1c7);return _1c7;});this[_1c4]=_1c5;},_encodeData:function(data){if(!data||typeof data!="string"){return data;}data=data.replace("\\","&custom_backslash;");data=data.replace(/\0/g,"&custom_null;");return data;},_decodeData:function(data){if(data&&data.length&&typeof data!="string"){data=data[0];}if(!data||typeof data!="string"){return data;}data=data.replace(/\&custom_null\;/g,"\x00");data=data.replace(/\&custom_lt\;/g,"<").replace(/\&custom_gt\;/g,">").replace(/\&custom_backslash\;/g,"\\");return data;},_execFlash:function(_1c8,_1c9){var _1ca=dojox.flash.obj.get();_1c9=(_1c9)?_1c9:[];for(var i=0;i<_1c9;i++){if(typeof _1c9[i]=="string"){_1c9[i]=this._encodeData(_1c9[i]);}}var _1cb=function(){return eval(_1ca.CallFunction("<invoke name=\""+_1c8+"\" returntype=\"javascript\">"+__flash__argumentsToXML(_1c9,0)+"</invoke>"));};var _1cc=_1cb.call(_1c9);if(typeof _1cc=="string"){_1cc=this._decodeData(_1cc);}return _1cc;}};dojox.flash.Install=function(){};dojox.flash.Install.prototype={needed:function(){if(!dojox.flash.info.capable){return true;}if(!dojox.flash.info.isVersionOrAbove(8,0,0)){return true;}return false;},install:function(){var _1cd;dojox.flash.info.installing=true;dojox.flash.installing();if(dojox.flash.info.capable==false){_1cd=new dojox.flash.Embed(false);_1cd.write();}else{if(dojox.flash.info.isVersionOrAbove(6,0,65)){_1cd=new dojox.flash.Embed(false);_1cd.write(true);_1cd.setVisible(true);_1cd.center();}else{alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=+dojox.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}}},_onInstallStatus:function(msg){if(msg=="Download.Complete"){dojox.flash._initialize();}else{if(msg=="Download.Cancelled"){alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=dojox.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}else{if(msg=="Download.Failed"){alert("There was an error downloading the Flash Player update. "+"Please try again later, or visit macromedia.com to download "+"the latest version of the Flash plugin.");}}}}};dojox.flash.info=new dojox.flash.Info();}if(!dojo._hasResource["dojox.flash"]){dojo._hasResource["dojox.flash"]=true;dojo.provide("dojox.flash");}if(!dojo._hasResource["dojox.storage.FlashStorageProvider"]){dojo._hasResource["dojox.storage.FlashStorageProvider"]=true;dojo.provide("dojox.storage.FlashStorageProvider");dojo.declare("dojox.storage.FlashStorageProvider",dojox.storage.Provider,{initialized:false,_available:null,_statusHandler:null,_flashReady:false,_pageReady:false,initialize:function(){if(dojo.config["disableFlashStorage"]==true){return;}dojox.flash.addLoadedListener(dojo.hitch(this,function(){this._flashReady=true;if(this._flashReady&&this._pageReady){this._loaded();}}));var _1ce=dojo.moduleUrl("dojox","storage/Storage.swf").toString();dojox.flash.setSwf(_1ce,false);dojo.connect(dojo,"loaded",this,function(){this._pageReady=true;if(this._flashReady&&this._pageReady){this._loaded();}});},setFlushDelay:function(_1cf){if(_1cf===null||typeof _1cf==="undefined"||isNaN(_1cf)){throw new Error("Invalid argunment: "+_1cf);}dojox.flash.comm.setFlushDelay(String(_1cf));},getFlushDelay:function(){return Number(dojox.flash.comm.getFlushDelay());},flush:function(_1d0){if(_1d0==null||typeof _1d0=="undefined"){_1d0=dojox.storage.DEFAULT_NAMESPACE;}dojox.flash.comm.flush(_1d0);},isAvailable:function(){return (this._available=!dojo.config["disableFlashStorage"]);},put:function(key,_1d1,_1d2,_1d3){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_1d3){_1d3=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1d3)){throw new Error("Invalid namespace given: "+_1d3);}this._statusHandler=_1d2;if(dojo.isString(_1d1)){_1d1="string:"+_1d1;}else{_1d1=dojo.toJson(_1d1);}dojox.flash.comm.put(key,_1d1,_1d3);},putMultiple:function(keys,_1d4,_1d5,_1d6){if(!this.isValidKeyArray(keys)||!_1d4 instanceof Array||keys.length!=_1d4.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_1d4+"]");}if(!_1d6){_1d6=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1d6)){throw new Error("Invalid namespace given: "+_1d6);}this._statusHandler=_1d5;var _1d7=keys.join(",");var _1d8=[];for(var i=0;i<_1d4.length;i++){if(dojo.isString(_1d4[i])){_1d4[i]="string:"+_1d4[i];}else{_1d4[i]=dojo.toJson(_1d4[i]);}_1d8[i]=_1d4[i].length;}var _1d9=_1d4.join("");var _1da=_1d8.join(",");dojox.flash.comm.putMultiple(_1d7,_1d9,_1da,_1d6);},get:function(key,_1db){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_1db){_1db=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1db)){throw new Error("Invalid namespace given: "+_1db);}var _1dc=dojox.flash.comm.get(key,_1db);if(_1dc==""){return null;}return this._destringify(_1dc);},getMultiple:function(keys,_1dd){if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(!_1dd){_1dd=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1dd)){throw new Error("Invalid namespace given: "+_1dd);}var _1de=keys.join(",");var _1df=dojox.flash.comm.getMultiple(_1de,_1dd);var _1e0=eval("("+_1df+")");for(var i=0;i<_1e0.length;i++){_1e0[i]=(_1e0[i]=="")?null:this._destringify(_1e0[i]);}return _1e0;},_destringify:function(_1e1){if(dojo.isString(_1e1)&&(/^string:/.test(_1e1))){_1e1=_1e1.substring("string:".length);}else{_1e1=dojo.fromJson(_1e1);}return _1e1;},getKeys:function(_1e2){if(!_1e2){_1e2=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1e2)){throw new Error("Invalid namespace given: "+_1e2);}var _1e3=dojox.flash.comm.getKeys(_1e2);if(_1e3==null||_1e3=="null"){_1e3="";}_1e3=_1e3.split(",");_1e3.sort();return _1e3;},getNamespaces:function(){var _1e4=dojox.flash.comm.getNamespaces();if(_1e4==null||_1e4=="null"){_1e4=dojox.storage.DEFAULT_NAMESPACE;}_1e4=_1e4.split(",");_1e4.sort();return _1e4;},clear:function(_1e5){if(!_1e5){_1e5=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1e5)){throw new Error("Invalid namespace given: "+_1e5);}dojox.flash.comm.clear(_1e5);},remove:function(key,_1e6){if(!_1e6){_1e6=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1e6)){throw new Error("Invalid namespace given: "+_1e6);}dojox.flash.comm.remove(key,_1e6);},removeMultiple:function(keys,_1e7){if(!this.isValidKeyArray(keys)){dojo.raise("Invalid key array given: "+keys);}if(!_1e7){_1e7=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1e7)){throw new Error("Invalid namespace given: "+_1e7);}var _1e8=keys.join(",");dojox.flash.comm.removeMultiple(_1e8,_1e7);},isPermanent:function(){return true;},getMaximumSize:function(){return dojox.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return true;},showSettingsUI:function(){dojox.flash.comm.showSettings();dojox.flash.obj.setVisible(true);dojox.flash.obj.center();},hideSettingsUI:function(){dojox.flash.obj.setVisible(false);if(dojo.isFunction(dojox.storage.onHideSettingsUI)){dojox.storage.onHideSettingsUI.call(null);}},getResourceList:function(){return [];},_loaded:function(){this._allNamespaces=this.getNamespaces();this.initialized=true;dojox.storage.manager.loaded();},_onStatus:function(_1e9,key,_1ea){var ds=dojox.storage;var dfo=dojox.flash.obj;if(_1e9==ds.PENDING){dfo.center();dfo.setVisible(true);}else{dfo.setVisible(false);}if(ds._statusHandler){ds._statusHandler.call(null,_1e9,key,null,_1ea);}}});dojox.storage.manager.register("dojox.storage.FlashStorageProvider",new dojox.storage.FlashStorageProvider());}if(!dojo._hasResource["dojox.storage._common"]){dojo._hasResource["dojox.storage._common"]=true;dojo.provide("dojox.storage._common");dojox.storage.manager.initialize();}if(!dojo._hasResource["dojox.storage"]){dojo._hasResource["dojox.storage"]=true;dojo.provide("dojox.storage");}if(!dojo._hasResource["agi.storage._base"]){dojo._hasResource["agi.storage._base"]=true;dojo.provide("agi.storage._base");dojo.provide("agi.storage.Storage");agi.storage._getCurrentTimeStamp=function(){return new Date().getTime();};dojo.declare("agi.storage.Storage",[agi.classes.Identified],{force_reload:false,initialized:false,data:null,sid:null,constructor:function(_1eb){this.data={};this.force_reload=_1eb;this.sid=this._getSid();if(!dojox.storage.manager.isInitialized()){dojo.connect(dojox.storage.manager,"loaded",this,this.initialize);}else{this.initialize();}},_getSid:function(){return agi.cookie.MagicCookie.getCookieValue("psid");},initialize:function(){this.data=dojox.storage.get(this.sid);if(!this.data||this.force_reload){var _1ec="";for(var i=0;i<2048;i++){_1ec+="0123456789";}this.data={"filler":_1ec};this.save();}this.initialized=true;dojo.publish("agi/storage/initialized");},get:function(key){return this.data[key]||null;},set:function(key,_1ed){this.data["filler"]=null;this.data[key]=_1ed;this.save();},remove:function(key){delete this.data[key];this.save();},save:function(){dojox.storage.put(this.sid,this.data,this.onsuccess);},clear:function(){this.data={};this.save();},onsuccess:function(_1ee,key,_1ef){}});}if(!dojo._hasResource["agi.storage"]){dojo._hasResource["agi.storage"]=true;dojo.provide("agi.storage");}if(!dojo._hasResource["agi.flash.ufo"]){dojo._hasResource["agi.flash.ufo"]=true;dojo.provide("agi.flash.ufo");UFO={req:["movie","width","height","majorversion","build"],opt:["play","loop","menu","quality","scale","salign","wmode","bgcolor","base","flashvars","devicefont","allowscriptaccess","seamlesstabbing"],optAtt:["id","name","align"],optExc:["swliveconnect"],ximovie:"ufo.swf",xiwidth:"215",xiheight:"138",ua:navigator.userAgent.toLowerCase(),pluginType:"",fv:[0,0],foList:[],create:function(FO,id,_1f0){if(!UFO.uaHas("w3cdom")||UFO.uaHas("ieMac")){return;}UFO.getFlashVersion();UFO.foList[id]=UFO.updateFO(FO);if(typeof _1f0=="undefined"||_1f0!="true"){UFO.createCSS("#"+id,"visibility:hidden;");}UFO.domLoad(id,_1f0);},updateFO:function(FO){if(typeof FO.xi!="undefined"&&FO.xi=="true"){if(typeof FO.ximovie=="undefined"){FO.ximovie=UFO.ximovie;}if(typeof FO.xiwidth=="undefined"){FO.xiwidth=UFO.xiwidth;}if(typeof FO.xiheight=="undefined"){FO.xiheight=UFO.xiheight;}}FO.mainCalled=false;return FO;},domLoad:function(id,_1f1){if(typeof _1f1!="undefined"&&_1f1=="true"){UFO.main(id);}else{var _1f2=setInterval(function(){if((document.getElementsByTagName("body")[0]!=null||document.body!=null)&&document.getElementById(id)!=null){UFO.main(id);clearInterval(_1f2);}},250);if(typeof document.addEventListener!="undefined"){document.addEventListener("DOMContentLoaded",function(){UFO.main(id);clearInterval(_1f2);},null);}}},main:function(id){var _1f3=UFO.foList[id];if(_1f3.mainCalled){return;}UFO.foList[id].mainCalled=true;document.getElementById(id).style.visibility="hidden";if(UFO.hasRequired(id)){if(UFO.hasFlashVersion(parseInt(_1f3.majorversion,10),parseInt(_1f3.build,10))){if(typeof _1f3.setcontainercss!="undefined"&&_1f3.setcontainercss=="true"){UFO.setContainerCSS(id);}UFO.writeSWF(id);}else{if(_1f3.xi=="true"&&UFO.hasFlashVersion(6,65)){UFO.createDialog(id);}}}document.getElementById(id).style.visibility="visible";},createCSS:function(_1f4,_1f5){var _1f6=document.getElementsByTagName("head")[0];var _1f7=UFO.createElement("style");if(!UFO.uaHas("ieWin")){_1f7.appendChild(document.createTextNode(_1f4+" {"+_1f5+"}"));}_1f7.setAttribute("type","text/css");_1f7.setAttribute("media","screen");_1f6.appendChild(_1f7);if(UFO.uaHas("ieWin")&&document.styleSheets&&document.styleSheets.length>0){var _1f8=document.styleSheets[document.styleSheets.length-1];if(typeof _1f8.addRule=="object"){_1f8.addRule(_1f4,_1f5);}}},setContainerCSS:function(id){var _1f9=UFO.foList[id];var _1fa=/%/.test(_1f9.width)?"":"px";var _1fb=/%/.test(_1f9.height)?"":"px";UFO.createCSS("#"+id,"width:"+_1f9.width+_1fa+"; height:"+_1f9.height+_1fb+";");if(_1f9.width=="100%"){UFO.createCSS("body","margin-left:0; margin-right:0; padding-left:0; padding-right:0;");}if(_1f9.height=="100%"){UFO.createCSS("html","height:100%; overflow:hidden;");UFO.createCSS("body","margin-top:0; margin-bottom:0; padding-top:0; padding-bottom:0; height:100%;");}},createElement:function(el){return (UFO.uaHas("xml")&&typeof document.createElementNS!="undefined")?document.createElementNS("http://www.w3.org/1999/xhtml",el):document.createElement(el);},createObjParam:function(el,_1fc,_1fd){var _1fe=UFO.createElement("param");_1fe.setAttribute("name",_1fc);_1fe.setAttribute("value",_1fd);el.appendChild(_1fe);},uaHas:function(ft){var _1ff=UFO.ua;switch(ft){case "w3cdom":return (typeof document.getElementById!="undefined"&&typeof document.getElementsByTagName!="undefined"&&(typeof document.createElement!="undefined"||typeof document.createElementNS!="undefined"));case "xml":var _200=document.getElementsByTagName("meta");var _201=_200.length;for(var i=0;i<_201;i++){if(/content-type/i.test(_200[i].getAttribute("http-equiv"))&&/xml/i.test(_200[i].getAttribute("content"))){return true;}}return false;case "ieMac":return /msie/.test(_1ff)&&!/opera/.test(_1ff)&&/mac/.test(_1ff);case "ieWin":return /msie/.test(_1ff)&&!/opera/.test(_1ff)&&/win/.test(_1ff);case "gecko":return /gecko/.test(_1ff)&&!/applewebkit/.test(_1ff);case "opera":return /opera/.test(_1ff);case "safari":return /applewebkit/.test(_1ff);default:return false;}},getFlashVersion:function(){if(UFO.fv[0]!=0){return;}if(navigator.plugins&&typeof navigator.plugins["Shockwave Flash"]=="object"){UFO.pluginType="npapi";var _202=navigator.plugins["Shockwave Flash"].description;if(typeof _202!="undefined"){_202=_202.replace(/^.*\s+(\S+\s+\S+$)/,"$1");var _203=parseInt(_202.replace(/^(.*)\..*$/,"$1"),10);var _204=/r/.test(_202)?parseInt(_202.replace(/^.*r(.*)$/,"$1"),10):0;UFO.fv=[_203,_204];}}else{if(window.ActiveXObject){UFO.pluginType="ax";try{var _205=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var _205=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");UFO.fv=[6,0];_205.AllowScriptAccess="always";}catch(e){if(UFO.fv[0]==6){return;}}try{var _205=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(typeof _205=="object"){var _202=_205.GetVariable("$version");if(typeof _202!="undefined"){_202=_202.replace(/^\S+\s+(.*)$/,"$1").split(",");UFO.fv=[parseInt(_202[0],10),parseInt(_202[2],10)];}}}}},hasRequired:function(id){var _206=UFO.req.length;for(var i=0;i<_206;i++){if(typeof UFO.foList[id][UFO.req[i]]=="undefined"){return false;}}return true;},hasFlashVersion:function(_207,_208){return (UFO.fv[0]>_207||(UFO.fv[0]==_207&&UFO.fv[1]>=_208))?true:false;},writeSWF:function(id){var _209=UFO.foList[id];var _20a=document.getElementById(id);if(UFO.pluginType=="npapi"){if(UFO.uaHas("gecko")||UFO.uaHas("xml")){while(_20a.hasChildNodes()){_20a.removeChild(_20a.firstChild);}var _20b=UFO.createElement("object");_20b.setAttribute("type","application/x-shockwave-flash");_20b.setAttribute("data",_209.movie);_20b.setAttribute("width",_209.width);_20b.setAttribute("height",_209.height);var _20c=UFO.optAtt.length;for(var i=0;i<_20c;i++){if(typeof _209[UFO.optAtt[i]]!="undefined"){_20b.setAttribute(UFO.optAtt[i],_209[UFO.optAtt[i]]);}}var _20d=UFO.opt.concat(UFO.optExc);var _20c=_20d.length;for(var i=0;i<_20c;i++){if(typeof _209[_20d[i]]!="undefined"){UFO.createObjParam(_20b,_20d[i],_209[_20d[i]]);}}_20a.appendChild(_20b);}else{var _20e="";var _20d=UFO.opt.concat(UFO.optAtt).concat(UFO.optExc);var _20c=_20d.length;for(var i=0;i<_20c;i++){if(typeof _209[_20d[i]]!="undefined"){_20e+=" "+_20d[i]+"=\""+_209[_20d[i]]+"\"";}}_20a.innerHTML="<embed type=\"application/x-shockwave-flash\" src=\""+_209.movie+"\" width=\""+_209.width+"\" height=\""+_209.height+"\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\""+_20e+"></embed>";}}else{if(UFO.pluginType=="ax"){var _20f="";var _20c=UFO.optAtt.length;for(var i=0;i<_20c;i++){if(typeof _209[UFO.optAtt[i]]!="undefined"){_20f+=" "+UFO.optAtt[i]+"=\""+_209[UFO.optAtt[i]]+"\"";}}var _210="";var _20c=UFO.opt.length;for(var i=0;i<_20c;i++){if(typeof _209[UFO.opt[i]]!="undefined"){_210+="<param name=\""+UFO.opt[i]+"\" value=\""+_209[UFO.opt[i]]+"\" />";}}var _211=window.location.protocol=="https:"?"https:":"http:";_20a.innerHTML="<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\""+_20f+" width=\""+_209.width+"\" height=\""+_209.height+"\" codebase=\""+_211+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+_209.majorversion+",0,"+_209.build+",0\"><param name=\"movie\" value=\""+_209.movie+"\" />"+_210+"</object>";if(_209["id"]){window[_209["id"]]=document.getElementById(_209["id"]);}}}},createDialog:function(id){var _212=UFO.foList[id];UFO.createCSS("html","height:100%; overflow:hidden;");UFO.createCSS("body","height:100%; overflow:hidden;");UFO.createCSS("#xi-con","position:absolute; left:0; top:0; z-index:1000; width:100%; height:100%; background-color:#fff; filter:alpha(opacity:75); opacity:0.75;");UFO.createCSS("#xi-dia","position:absolute; left:50%; top:50%; margin-left: -"+Math.round(parseInt(_212.xiwidth,10)/2)+"px; margin-top: -"+Math.round(parseInt(_212.xiheight,10)/2)+"px; width:"+_212.xiwidth+"px; height:"+_212.xiheight+"px;");var _213=document.getElementsByTagName("body")[0];var _214=UFO.createElement("div");_214.setAttribute("id","xi-con");var _215=UFO.createElement("div");_215.setAttribute("id","xi-dia");_214.appendChild(_215);_213.appendChild(_214);var _216=window.location;if(UFO.uaHas("xml")&&UFO.uaHas("safari")){var _217=document.getElementsByTagName("title")[0].firstChild.nodeValue=document.getElementsByTagName("title")[0].firstChild.nodeValue.slice(0,47)+" - Flash Player Installation";}else{var _217=document.title=document.title.slice(0,47)+" - Flash Player Installation";}var _218=UFO.pluginType=="ax"?"ActiveX":"PlugIn";var _219=typeof _212.xiurlcancel!="undefined"?"&xiUrlCancel="+_212.xiurlcancel:"";var _21a=typeof _212.xiurlfailed!="undefined"?"&xiUrlFailed="+_212.xiurlfailed:"";UFO.foList["xi-dia"]={movie:_212.ximovie,width:_212.xiwidth,height:_212.xiheight,majorversion:"6",build:"65",flashvars:"MMredirectURL="+_216+"&MMplayerType="+_218+"&MMdoctitle="+_217+_219+_21a};UFO.writeSWF("xi-dia");},expressInstallCallback:function(){var _21b=document.getElementsByTagName("body")[0];var _21c=document.getElementById("xi-con");_21b.removeChild(_21c);UFO.createCSS("body","height:auto; overflow:auto;");UFO.createCSS("html","height:auto; overflow:auto;");},cleanupIELeaks:function(){var _21d=document.getElementsByTagName("object");var _21e=_21d.length;for(var i=0;i<_21e;i++){_21d[i].style.display="none";for(var x in _21d[i]){if(typeof _21d[i][x]=="function"){_21d[i][x]=null;}}}}};if(typeof window.attachEvent!="undefined"&&UFO.uaHas("ieWin")){window.attachEvent("onunload",UFO.cleanupIELeaks);}}if(!dojo._hasResource["agi.livechat"]){dojo._hasResource["agi.livechat"]=true;dojo.provide("agi.livechat");dojo.declare("agi.livechat.KanaLiveChat",[agi.classes.Identified],{gIChannelID:"Default",gServer:"responselive03.kanaondemand.com",gAttachedData:"<Sample Test>",bEnterOnQueuePage:false,prefillValues:{CUSTOMER_NAME:"",CUSTOMER_QUERY:"",CUSTOMFIELD1:""},agentOnlyValues:{PAGE_URL:"Page URL",PAGE_TITLE:"Page Title",CUSTOMER_ID:"Customer"},HBUsePageContents:false,gUseDynamicStartPage:true,gDSPLauncherPageName:"./responseLiveLauncher.html",gChatWindowWidth:400,gChatWindowHeight:500,gChatWindowProperties:"width="+400+",height="+500+",menubar=no,location=no,directories=no,status=no,toolbar=no,scrollbars=auto,resizable=yes,screenX=10,screenY=10,left=10,top=10",gHTTP:"http://",gHTTPS:"https://",constructor:function(_21f){dojo.mixin(this,_21f);if(_21f.prefill){for(var k in _21f.prefill){if(_21f.prefill[k]){this.prefillValues[k]=_21f.prefill[k];}}}if(_21f.agentOnly){for(var k in _21f.agentOnly){if(_21f.agentOnly[k]){this.agentOnlyValues[k]=_21f.agentOnly[k];}}}},startChat:function(){this._startChat(this.gIChannelID,this.gServer,this.gAttachedData,this.prefillValues,this.agentOnlyValues,this.bEnterOnQueuePage);},startChatAndCobrowse:function(){this._startChatAndCobrowse(this.gIChannelID,this.gServer,this.gAttachedData,this.prefillValues,this.agentOnlyValues,this.bEnterOnQueuePage);},startChatWithEscalation:function(){this._startChatWithEscalation(this.gIChannelID,this.gServer,this.gAttachedData,this.prefillValues,this.agentOnlyValues,this.bEnterOnQueuePage);},_startChat:function(_220,_221,_222,_223,_224,_225){var _226="CHAT_ONLY";this.launchChat(_220,_221,_222,_223,_224,_225,_226);},_startChatAndCobrowse:function(_227,_228,_229,_22a,_22b,_22c){var _22d="COBROWSE";this.launchChat(_227,_228,_229,_22a,_22b,_22c,_22d);},_startChatWithEscalation:function(_22e,_22f,_230,_231,_232,_233){var _234="COBROWSE_ESCALATION";this.launchChat(_22e,_22f,_230,_231,_232,_233,_234);},launchChat:function(_235,_236,_237,_238,_239,_23a,_23b){this.openInitialWindow();this.finishLaunchingChat(_235,_236,_237,_238,_239,_23a,_23b);},finishLaunchingChat:function(_23c,_23d,_23e,_23f,_240,_241,_242){var _243=this.getChatWindow();this.saveChatParameters(_243,_23c,_23d,_23e,_23f,_240,_241,_242);if(this.alreadyConavigating()){this.handleRecursiveLaunch(_23c,_23d,_243);return;}if(this.browserDoesNotSupportDOM2()||this.isIEonMac()){this.handleUnsupportedBrowser(_23c,_23d,_243);return;}if(!this.areCookiesEnabled()){this.handleDisabledCookies(_23c,_23d,_243);return;}if(window.location.protocol=="https:"){this.createAndSubmitForm();}else{this.checkSSLEnabledAndSubmit(_23c,_23d);}},createAndSubmitForm:function(){var _244=this.getChatWindow();var _245=this.createForm(_244.serverName,_244);if(typeof (this.gUseDynamicStartPage)!="undefined"&&this.gUseDynamicStartPage){this.addFormField(_245,_244,"DSP_LAUNCHER_PAGE_NAME",this.gDSPLauncherPageName);}this.addFormField(_245,_244,"CHAT_WINDOW_WIDTH",this.gChatWindowWidth);this.addFormField(_245,_244,"CHAT_WINDOW_PROPERTIES",this.gChatWindowProperties);this.addFormField(_245,_244,"ICHANNEL_ID",_244.iChannel);this.addFormField(_245,_244,"ATTACHED_DATA",_244.attachedData);this.addFormField(_245,_244,"ENTER_ON_QUEUE_PAGE",_244.enterOnQueuePage);this.addFormField(_245,_244,"CHAT_LAUNCH_MODE",_244.chatLaunchMode);this.addFormField(_245,_244,"AGENT_VISIBLE_DATA",this.createAgentVisibleDataString(_244.agentOnlyValues));this.addFormField(_245,_244,"REFERRER_URL",window.location.href);var _246=_244.prefillValues;for(prefillItem in _246){this.addFormField(_245,_244,prefillItem,_246[prefillItem]);}_245.submit();},openInitialWindow:function(){var _247=window.open("",this.getChatWindowName(),this.getWinProperties());_247.document.write("<html><body></body></html>");_247.document.close();this.setChatWindow(_247);this.origChatWindow=_247;},createForm:function(_248,win){var _249=win.document.createElement("form");_249.method="post";_249.target="_self";_249.action=this.gHTTPS+_248+"/CONAV/CHAT/ChatPreLaunch";win.document.body.appendChild(_249);return _249;},DATA_SEPARATOR:"_HB_",createAgentVisibleDataString:function(_24a){var _24b="";for(agentItem in _24a){if(this.isNonEmptyString(_24b)){_24b+=this.DATA_SEPARATOR;}_24b+=agentItem+this.DATA_SEPARATOR+_24a[agentItem];}return _24b;},addFormField:function(_24c,win,name,_24d){if(!this.isNonEmptyString(name)||!this.isNonEmptyString(_24d)){return;}var _24e=win.document.createElement("input");_24e.type="hidden";_24e.name=name;_24e.value=_24d;_24c.appendChild(_24e);},alreadyConavigating:function(){return (typeof (isHipboneSharedWindow)!="undefined");},handleRecursiveLaunch:function(_24f,_250,win){win.location.href=this.gHTTPS+_250+"/CONAV/chat/errorpages/recursiveConav.jsp?ICHANNEL_ID="+_24f;},browserDoesNotSupportDOM2:function(){return (null==document.getElementById);},handleUnsupportedBrowser:function(_251,_252,win){win.location.href=this.gHTTPS+_252+"/CONAV/CHAT/ChatPreLaunch?ICHANNEL_ID="+_251;},areCookiesEnabled:function(){var time=(new Date()).getTime();this.setTestCookie(time);if(this.theCookieIsSet(time)){this.removeTestCookie(time);return true;}return false;},setTestCookie:function(_253){document.cookie="hbcookietest="+_253;},theCookieIsSet:function(_254){var _255=document.cookie;return (this.isNonEmptyString(_255)&&_255.indexOf(_254)>-1);},removeTestCookie:function(_256){document.cookie="hbcookietest="+_256+"; expires=Fri, 02-Jan-1970 00:00:00 GMT";},handleDisabledCookies:function(_257,_258,win){win.location.href=this.gHTTP+_258+"/CONAV/chat/errorpages/cookiesDisabled.jsp?ICHANNEL_ID="+_257;},checkSSLEnabledAndSubmit:function(_259,_25a){this.createAndSubmitForm();var _25b=new Image(1,1);_25b.onerror=dojo.hitch(this,function(){this.handleChatNoSSL(_259,_25a);});_25b.src=this.gHTTPS+_25a+"/CONAV/HTD/Default/shared/images/blank.gif?time="+(new Date()).getTime();},handleChatNoSSL:function(_25c,_25d){var link=this.gHTTP+_25d+"/CONAV/chat/errorpages/sslDisabled.jsp?ICHANNEL_ID="+_25c;window.open(link,this.getChatWindowName(),this.getWinProperties());this.getChatWindow().close();},saveChatParameters:function(_25e,_25f,_260,_261,_262,_263,_264,_265){_25e.iChannel=_25f;_25e.serverName=_260;_25e.attachedData=_261;_25e.prefillValues=_262;_25e.agentOnlyValues=_263;_25e.enterOnQueuePage=_264;_25e.chatLaunchMode=_265;},setAOLChatWindow:function(_266){this.setChatWindow(_266);this.finishLaunchingChat(iChannel,serverName,attachedData,prefillValues,agentOnlyValues,enterOnQueuePage,chatLaunchMode);},gChatLaunchWindow:null,setChatWindow:function(_267){window.gChatLaunchWindow=_267;},getChatWindow:function(){return window.gChatLaunchWindow;},getChatWindowName:function(){return "_blank";},getWinProperties:function(){return this.gChatWindowProperties;},isAOL:function(){return (navigator.appVersion.toLowerCase().indexOf("aol")!=-1);},isInternetExplorer:function(){return (navigator.userAgent.toLowerCase().indexOf("msie")!=-1);},isMacKana:function(){return (navigator.userAgent.toLowerCase().indexOf("mac")!=-1);},isIEonMac:function(){return (this.isInternetExplorer()&&this.isMacKana());},isNonEmptyString:function(str){if(null==str||str==""){return false;}return true;},goToAfterLaunchUrl:function(){if(typeof (window.gAfterLaunchURL)=="undefined"){return;}window.location.href=window.gAfterLaunchURL;}});}if(!dojo._hasResource["ag.livechat"]){dojo._hasResource["ag.livechat"]=true;dojo.provide("ag.livechat");ag.livechat.url="chat.imgag.com";ag.livechat.channels={"help":"kkNeDc4793859","cardstore":"ND6Q9m5511343"};ag.livechat.getChannel=function(_268){return ag.livechat.channels[_268];};dojo.declare("ag.livechat.KanaLiveChat",[agi.livechat.KanaLiveChat],{agentOnlyValues:{PAGE_URL:"www.americangreetings.com",PAGE_TITLE:"American Greetings Homepage",CUSTOMER_ID:"American Greetings Customer"}});}if(!dojo._hasResource["ag.controllers.KanaLiveChat"]){dojo._hasResource["ag.controllers.KanaLiveChat"]=true;dojo.provide("ag.controllers.KanaLiveChat");dojo.declare("ag.controllers.KanaLiveChat",[agi.classes.Identified],{constructor:function(){dojo.subscribe("ag/livechat/show",dojo.hitch(this,this.openChat));},openChat:function(data){if(data==null){data={"channel":"help"};}this.startChat(true,data.channel);},startChat:function(_269,_26a){var _26b={};_26b.gIChannelID=ag.livechat.getChannel(_26a);_26b.gServer=ag.livechat.url;var _26c=agi.cookie.AGICookie.getCookieValue("customer","email");var name=agi.cookie.AGICookie.getCookieValue("customer","name");var _26d=agi.cookie.AGICookie.getCookieValue("customer","guest");if(_26c&&!_26d){_26b.prefill={"CUSTOMER_NAME":name,"CUSTOMER_EMAIL":_26c};}_26b.agentOnly={"CUSTOMER_ID":_26c,"PAGE_URL":window.location,"PAGE_TITLE":document.title};this.chat=new ag.livechat.KanaLiveChat(_26b);this.chat.startChatWithEscalation();}});}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(_26e,_26f){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _270=dojo.date.stamp._isoRegExp.exec(_26e),_271=null;if(_270){_270.shift();if(_270[1]){_270[1]--;}if(_270[6]){_270[6]*=1000;}if(_26f){_26f=new Date(_26f);dojo.forEach(dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _26f["get"+prop]();}),function(_272,_273){_270[_273]=_270[_273]||_272;});}_271=new Date(_270[0]||1970,_270[1]||0,_270[2]||1,_270[3]||0,_270[4]||0,_270[5]||0,_270[6]||0);if(_270[0]<100){_271.setFullYear(_270[0]||1970);}var _274=0,_275=_270[7]&&_270[7].charAt(0);if(_275!="Z"){_274=((_270[8]||0)*60)+(Number(_270[9])||0);if(_275!="-"){_274*=-1;}}if(_275){_274-=_271.getTimezoneOffset();}if(_274){_271.setTime(_271.getTime()+_274*60000);}}return _271;};dojo.date.stamp.toISOString=function(_276,_277){var _278=function(n){return (n<10)?"0"+n:n;};_277=_277||{};var _279=[],_27a=_277.zulu?"getUTC":"get",date="";if(_277.selector!="time"){var year=_276[_27a+"FullYear"]();date=["0000".substr((year+"").length)+year,_278(_276[_27a+"Month"]()+1),_278(_276[_27a+"Date"]())].join("-");}_279.push(date);if(_277.selector!="date"){var time=[_278(_276[_27a+"Hours"]()),_278(_276[_27a+"Minutes"]()),_278(_276[_27a+"Seconds"]())].join(":");var _27b=_276[_27a+"Milliseconds"]();if(_277.milliseconds){time+="."+(_27b<100?"0":"")+_278(_27b);}if(_277.zulu){time+="Z";}else{if(_277.selector!="time"){var _27c=_276.getTimezoneOffset();var _27d=Math.abs(_27c);time+=(_27c>0?"-":"+")+_278(Math.floor(_27d/60))+":"+_278(_27d%60);}}_279.push(time);}return _279.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");new Date("X");dojo.parser=new function(){var d=dojo;this._attrName=d._scopeName+"Type";this._query="["+this._attrName+"]";function _27e(_27f){if(d.isString(_27f)){return "string";}if(typeof _27f=="number"){return "number";}if(typeof _27f=="boolean"){return "boolean";}if(d.isFunction(_27f)){return "function";}if(d.isArray(_27f)){return "array";}if(_27f instanceof Date){return "date";}if(_27f instanceof d._Url){return "url";}return "object";};function _280(_281,type){switch(type){case "string":return _281;case "number":return _281.length?Number(_281):NaN;case "boolean":return typeof _281=="boolean"?_281:!(_281.toLowerCase()=="false");case "function":if(d.isFunction(_281)){_281=_281.toString();_281=d.trim(_281.substring(_281.indexOf("{")+1,_281.length-1));}try{if(_281===""||_281.search(/[^\w\.]+/i)!=-1){return new Function(_281);}else{return d.getObject(_281,false)||new Function(_281);}}catch(e){return new Function();}case "array":return _281?_281.split(/\s*,\s*/):[];case "date":switch(_281){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_281);}case "url":return d.baseUrl+_281;default:return d.fromJson(_281);}};var _282={};dojo.connect(dojo,"extend",function(){_282={};});function _283(_284){if(!_282[_284]){var cls=d.getObject(_284);if(!cls){return null;}var _285=cls.prototype;var _286={},_287={};for(var name in _285){if(name.charAt(0)=="_"){continue;}if(name in _287){continue;}var _288=_285[name];_286[name]=_27e(_288);}_282[_284]={cls:cls,params:_286};}return _282[_284];};this._functionFromScript=function(_289){var _28a="";var _28b="";var _28c=_289.getAttribute("args");if(_28c){d.forEach(_28c.split(/\s*,\s*/),function(part,idx){_28a+="var "+part+" = arguments["+idx+"]; ";});}var _28d=_289.getAttribute("with");if(_28d&&_28d.length){d.forEach(_28d.split(/\s*,\s*/),function(part){_28a+="with("+part+"){";_28b+="}";});}return new Function(_28a+_289.innerHTML+_28b);};this.instantiate=function(_28e,_28f,args){var _290=[],dp=dojo.parser;_28f=_28f||{};args=args||{};d.forEach(_28e,function(obj){if(!obj){return;}var node,type,_291,_292,_293;if(obj.node){node=obj.node;type=obj.type;_291=obj.clsInfo||(type&&_283(type));_292=_291&&_291.cls;_293=obj.scripts;}else{node=obj;type=dp._attrName in _28f?_28f[dp._attrName]:node.getAttribute(dp._attrName);_291=type&&_283(type);_292=_291&&_291.cls;_293=(_292&&(_292._noScript||_292.prototype._noScript)?[]:d.query("> script[type^='dojo/']",node));}if(!_291){throw new Error("Could not load class '"+type);}var _294={},_295=node.attributes;if(args.defaults){dojo.mixin(_294,args.defaults);}if(obj.inherited){dojo.mixin(_294,obj.inherited);}for(var name in _291.params){var item=name in _28f?{value:_28f[name],specified:true}:_295.getNamedItem(name);if(!item||(!item.specified&&(!dojo.isIE||name.toLowerCase()!="value"))){continue;}var _296=item.value;switch(name){case "class":_296="className" in _28f?_28f.className:node.className;break;case "style":_296="style" in _28f?_28f.style:(node.style&&node.style.cssText);}var _297=_291.params[name];if(typeof _296=="string"){_294[name]=_280(_296,_297);}else{_294[name]=_296;}}var _298=[],_299=[];d.forEach(_293,function(_29a){node.removeChild(_29a);var _29b=_29a.getAttribute("event"),type=_29a.getAttribute("type"),nf=d.parser._functionFromScript(_29a);if(_29b){if(type=="dojo/connect"){_298.push({event:_29b,func:nf});}else{_294[_29b]=nf;}}else{_299.push(nf);}});var _29c=_292.markupFactory||_292.prototype&&_292.prototype.markupFactory;var _29d=_29c?_29c(_294,node,_292):new _292(_294,node);_290.push(_29d);var _29e=node.getAttribute("jsId");if(_29e){d.setObject(_29e,_29d);}d.forEach(_298,function(_29f){d.connect(_29d,_29f.event,null,_29f.func);});d.forEach(_299,function(func){func.call(_29d);});});if(!_28f._started){d.forEach(_290,function(_2a0){if(!args.noStart&&_2a0&&_2a0.startup&&!_2a0._started&&(!_2a0.getParent||!_2a0.getParent())){_2a0.startup();}});}return _290;};this.parse=function(_2a1,args){var root;if(!args&&_2a1&&_2a1.rootNode){args=_2a1;root=args.rootNode;}else{root=_2a1;}var _2a2=this._attrName;function scan(_2a3,list){var _2a4=dojo.clone(_2a3.inherited);dojo.forEach(["dir","lang"],function(name){var val=_2a3.node.getAttribute(name);if(val){_2a4[name]=val;}});var _2a5=_2a3.scripts;var _2a6=!_2a3.clsInfo||!_2a3.clsInfo.cls.prototype.stopParser;for(var _2a7=_2a3.node.firstChild;_2a7;_2a7=_2a7.nextSibling){if(_2a7.nodeType==1){var type=_2a6&&_2a7.getAttribute(_2a2);if(type){var _2a8={"type":type,clsInfo:_283(type),node:_2a7,scripts:[],inherited:_2a4};list.push(_2a8);scan(_2a8,list);}else{if(_2a5&&_2a7.nodeName.toLowerCase()=="script"){type=_2a7.getAttribute("type");if(type&&/^dojo\//i.test(type)){_2a5.push(_2a7);}}else{if(_2a6){scan({node:_2a7,inherited:_2a4},list);}}}}}};var list=[];scan({node:root?dojo.byId(root):dojo.body(),inherited:(args&&args.inherited)||{dir:dojo._isBodyLtr()?"ltr":"rtl"}},list);return this.instantiate(list,null,args);};}();(function(){var _2a9=function(){if(dojo.config.parseOnLoad){dojo.parser.parse();}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,_2a9);}else{dojo._loaders.unshift(_2a9);}})();}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(str,_2aa){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_2aa&&_2aa.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(arr,re,_2ab){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return dojo.regexp.group(b.join("|"),_2ab);};dojo.regexp.group=function(_2ac,_2ad){return "("+(_2ad?"?:":"")+_2ac+")";};}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.data.util.sorter.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};dojo.data.util.sorter.createSortFunction=function(_2ae,_2af){var _2b0=[];function _2b1(attr,dir,comp,s){return function(_2b2,_2b3){var a=s.getValue(_2b2,attr);var b=s.getValue(_2b3,attr);return dir*comp(a,b);};};var _2b4;var map=_2af.comparatorMap;var bc=dojo.data.util.sorter.basicComparator;for(var i=0;i<_2ae.length;i++){_2b4=_2ae[i];var attr=_2b4.attribute;if(attr){var dir=(_2b4.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_2b0.push(_2b1(attr,dir,comp,_2af));}}return function(rowA,rowB){var i=0;while(i<_2b0.length){var ret=_2b0[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.data.util.simpleFetch.fetch=function(_2b5){_2b5=_2b5||{};if(!_2b5.store){_2b5.store=this;}var self=this;var _2b6=function(_2b7,_2b8){if(_2b8.onError){var _2b9=_2b8.scope||dojo.global;_2b8.onError.call(_2b9,_2b7,_2b8);}};var _2ba=function(_2bb,_2bc){var _2bd=_2bc.abort||null;var _2be=false;var _2bf=_2bc.start?_2bc.start:0;var _2c0=(_2bc.count&&(_2bc.count!==Infinity))?(_2bf+_2bc.count):_2bb.length;_2bc.abort=function(){_2be=true;if(_2bd){_2bd.call(_2bc);}};var _2c1=_2bc.scope||dojo.global;if(!_2bc.store){_2bc.store=self;}if(_2bc.onBegin){_2bc.onBegin.call(_2c1,_2bb.length,_2bc);}if(_2bc.sort){_2bb.sort(dojo.data.util.sorter.createSortFunction(_2bc.sort,self));}if(_2bc.onItem){for(var i=_2bf;(i<_2bb.length)&&(i<_2c0);++i){var item=_2bb[i];if(!_2be){_2bc.onItem.call(_2c1,item,_2bc);}}}if(_2bc.onComplete&&!_2be){var _2c2=null;if(!_2bc.onItem){_2c2=_2bb.slice(_2bf,_2c0);}_2bc.onComplete.call(_2c1,_2c2,_2bc);}};this._fetchItems(_2b5,_2ba,_2b6);return _2b5;};}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(_2c3,_2c4){var rxp="^";var c=null;for(var i=0;i<_2c3.length;i++){c=_2c3.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_2c3.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_2c4){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};}if(!dojo._hasResource["dijit._CssStateMixin"]){dojo._hasResource["dijit._CssStateMixin"]=true;dojo.provide("dijit._CssStateMixin");dojo.declare("dijit._CssStateMixin",[],{cssStateNodes:{},postCreate:function(){this.inherited(arguments);dojo.forEach(["onmouseenter","onmouseleave","onmousedown"],function(e){this.connect(this.domNode,e,"_cssMouseEvent");},this);this.connect(this,"set",function(name,_2c5){if(arguments.length>=2&&{disabled:true,readOnly:true,checked:true,selected:true}[name]){this._setStateClass();}});dojo.forEach(["_onFocus","_onBlur"],function(ap){this.connect(this,ap,"_setStateClass");},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._setStateClass();},_cssMouseEvent:function(_2c6){if(!this.disabled){switch(_2c6.type){case "mouseenter":case "mouseover":this._hovering=true;this._active=this._mouseDown;break;case "mouseleave":case "mouseout":this._hovering=false;this._active=false;break;case "mousedown":this._active=true;this._mouseDown=true;var _2c7=this.connect(dojo.body(),"onmouseup",function(){this._active=false;this._mouseDown=false;this._setStateClass();this.disconnect(_2c7);});break;}this._setStateClass();}},_setStateClass:function(){var _2c8=this.baseClass.split(" ");function _2c9(_2ca){_2c8=_2c8.concat(dojo.map(_2c8,function(c){return c+_2ca;}),"dijit"+_2ca);};if(!this.isLeftToRight()){_2c9("Rtl");}if(this.checked){_2c9("Checked");}if(this.state){_2c9(this.state);}if(this.selected){_2c9("Selected");}if(this.disabled){_2c9("Disabled");}else{if(this.readOnly){_2c9("ReadOnly");}else{if(this._active){_2c9("Active");}else{if(this._hovering){_2c9("Hover");}}}}if(this._focused){_2c9("Focused");}var tn=this.stateNode||this.domNode,_2cb={};dojo.forEach(tn.className.split(" "),function(c){_2cb[c]=true;});if("_stateClasses" in this){dojo.forEach(this._stateClasses,function(c){delete _2cb[c];});}dojo.forEach(_2c8,function(c){_2cb[c]=true;});var _2cc=[];for(var c in _2cb){_2cc.push(c);}tn.className=_2cc.join(" ");this._stateClasses=_2c8;},_trackMouseState:function(node,_2cd){var _2ce=false,_2cf=false,_2d0=false;var self=this,cn=dojo.hitch(this,"connect",node);function _2d1(){var _2d2=("disabled" in self&&self.disabled)||("readonly" in self&&self.readonly);dojo.toggleClass(node,_2cd+"Hover",_2ce&&!_2cf&&!_2d2);dojo.toggleClass(node,_2cd+"Active",_2cf&&!_2d2);dojo.toggleClass(node,_2cd+"Focused",_2d0&&!_2d2);};cn("onmouseenter",function(){_2ce=true;_2d1();});cn("onmouseleave",function(){_2ce=false;_2cf=false;_2d1();});cn("onmousedown",function(){_2cf=true;_2d1();});cn("onmouseup",function(){_2cf=false;_2d1();});cn("onfocus",function(){_2d0=true;_2d1();});cn("onblur",function(){_2d0=false;_2d1();});this.connect(this,"set",function(name,_2d3){if(name=="disabled"||name=="readOnly"){_2d1();}});}});}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{}}return bm;},moveToBookmark:function(_2d4){var _2d5=dojo.doc,mark=_2d4.mark;if(mark){if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{}}else{if(_2d5.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(dojo.isArray(mark)){rg=_2d5.body.createControlRange();dojo.forEach(mark,function(n){rg.addElement(n);});}else{rg=_2d5.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_2d6){var node=!dijit._curFocus||(menu&&dojo.isDescendant(dijit._curFocus,menu.domNode))?dijit._prevFocus:dijit._curFocus;return {node:node,bookmark:(node==dijit._curFocus)&&dojo.withGlobal(_2d6||dojo.global,dijit.getBookmark),openedForWindow:_2d6};},focus:function(_2d7){if(!_2d7){return;}var node="node" in _2d7?_2d7.node:_2d7,_2d8=_2d7.bookmark,_2d9=_2d7.openedForWindow,_2da=_2d8?_2d8.isCollapsed:false;if(node){var _2db=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_2db&&_2db.focus){try{_2db.focus();}catch(e){}}dijit._onFocusNode(node);}if(_2d8&&dojo.withGlobal(_2d9||dojo.global,dijit.isCollapsed)&&!_2da){if(_2d9){_2d9.focus();}try{dojo.withGlobal(_2d9||dojo.global,dijit.moveToBookmark,null,[_2d8]);}catch(e2){}}},_activeStack:[],registerIframe:function(_2dc){return dijit.registerWin(_2dc.contentWindow,_2dc);},unregisterIframe:function(_2dd){dijit.unregisterWin(_2dd);},registerWin:function(_2de,_2df){var _2e0=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);if(dojo.isIE&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}dijit._onTouchNode(_2df||evt.target||evt.srcElement,"mouse");};var doc=dojo.isIE?_2de.document.documentElement:_2de.document;if(doc){if(dojo.isIE){doc.attachEvent("onmousedown",_2e0);var _2e1=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement)){dijit._onFocusNode(_2df||evt.srcElement);}else{dijit._onTouchNode(_2df||evt.srcElement);}};doc.attachEvent("onactivate",_2e1);var _2e2=function(evt){dijit._onBlurNode(_2df||evt.srcElement);};doc.attachEvent("ondeactivate",_2e2);return function(){doc.detachEvent("onmousedown",_2e0);doc.detachEvent("onactivate",_2e1);doc.detachEvent("ondeactivate",_2e2);doc=null;};}else{doc.addEventListener("mousedown",_2e0,true);var _2e3=function(evt){dijit._onFocusNode(_2df||evt.target);};doc.addEventListener("focus",_2e3,true);var _2e4=function(evt){dijit._onBlurNode(_2df||evt.target);};doc.addEventListener("blur",_2e4,true);return function(){doc.removeEventListener("mousedown",_2e0,true);doc.removeEventListener("focus",_2e3,true);doc.removeEventListener("blur",_2e4,true);doc=null;};}}},unregisterWin:function(_2e5){_2e5&&_2e5();},_onBlurNode:function(node){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(node,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _2e6=[];try{while(node){var _2e7=dojo.attr(node,"dijitPopupParent");if(_2e7){node=dijit.byId(_2e7).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===dojo.body()){break;}node=dojo.window.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_2e8=id&&dijit.byId(id);if(_2e8&&!(by=="mouse"&&_2e8.get("disabled"))){_2e6.unshift(id);}node=node.parentNode;}}}}catch(e){}dijit._setStack(_2e6,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}dijit._onTouchNode(node);if(node==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=node;dojo.publish("focusNode",[node]);},_setStack:function(_2e9,by){var _2ea=dijit._activeStack;dijit._activeStack=_2e9;for(var _2eb=0;_2eb<Math.min(_2ea.length,_2e9.length);_2eb++){if(_2ea[_2eb]!=_2e9[_2eb]){break;}}var _2ec;for(var i=_2ea.length-1;i>=_2eb;i--){_2ec=dijit.byId(_2ea[i]);if(_2ec){_2ec._focused=false;_2ec._hasBeenBlurred=true;if(_2ec._onBlur){_2ec._onBlur(by);}dojo.publish("widgetBlur",[_2ec,by]);}}for(i=_2eb;i<_2e9.length;i++){_2ec=dijit.byId(_2e9[i]);if(_2ec){_2ec._focused=true;if(_2ec._onFocus){_2ec._onFocus(by);}dojo.publish("widgetFocus",[_2ec,by]);}}}});dojo.addOnLoad(function(){var _2ed=dijit.registerWin(window);if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit.unregisterWin(_2ed);_2ed=null;});}});}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_2ee){this.pairs=[];this.returnWrappers=_2ee||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_2ef,wrap,_2f0,_2f1){this.pairs[((_2f1)?"unshift":"push")]([name,_2ef,wrap,_2f0]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){return dojo.window.getBox();};dijit.placeOnScreen=function(node,pos,_2f2,_2f3){var _2f4=dojo.map(_2f2,function(_2f5){var c={corner:_2f5,pos:{x:pos.x,y:pos.y}};if(_2f3){c.pos.x+=_2f5.charAt(1)=="L"?_2f3.x:-_2f3.x;c.pos.y+=_2f5.charAt(0)=="T"?_2f3.y:-_2f3.y;}return c;});return dijit._place(node,_2f4);};dijit._place=function(node,_2f6,_2f7){var view=dojo.window.getBox();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}var best=null;dojo.some(_2f6,function(_2f8){var _2f9=_2f8.corner;var pos=_2f8.pos;if(_2f7){_2f7(node,_2f8.aroundCorner,_2f9);}var _2fa=node.style;var _2fb=_2fa.display;var _2fc=_2fa.visibility;_2fa.visibility="hidden";_2fa.display="";var mb=dojo.marginBox(node);_2fa.display=_2fb;_2fa.visibility=_2fc;var _2fd=Math.max(view.l,_2f9.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_2fe=Math.max(view.t,_2f9.charAt(0)=="T"?pos.y:(pos.y-mb.h)),endX=Math.min(view.l+view.w,_2f9.charAt(1)=="L"?(_2fd+mb.w):pos.x),endY=Math.min(view.t+view.h,_2f9.charAt(0)=="T"?(_2fe+mb.h):pos.y),_2ff=endX-_2fd,_300=endY-_2fe,_301=(mb.w-_2ff)+(mb.h-_300);if(best==null||_301<best.overflow){best={corner:_2f9,aroundCorner:_2f8.aroundCorner,x:_2fd,y:_2fe,w:_2ff,h:_300,overflow:_301};}return !_301;});node.style.left=best.x+"px";node.style.top=best.y+"px";if(best.overflow&&_2f7){_2f7(node,best.aroundCorner,best.corner);}return best;};dijit.placeOnScreenAroundNode=function(node,_302,_303,_304){_302=dojo.byId(_302);var _305=_302.style.display;_302.style.display="";var _306=dojo.position(_302,true);_302.style.display=_305;return dijit._placeOnScreenAroundRect(node,_306.x,_306.y,_306.w,_306.h,_303,_304);};dijit.placeOnScreenAroundRectangle=function(node,_307,_308,_309){return dijit._placeOnScreenAroundRect(node,_307.x,_307.y,_307.width,_307.height,_308,_309);};dijit._placeOnScreenAroundRect=function(node,x,y,_30a,_30b,_30c,_30d){var _30e=[];for(var _30f in _30c){_30e.push({aroundCorner:_30f,corner:_30c[_30f],pos:{x:x+(_30f.charAt(1)=="L"?0:_30a),y:y+(_30f.charAt(0)=="T"?0:_30b)}});}return dijit._place(node,_30e,_30d);};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,_310,_311,_312){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAroundAlignment=function(_313,_314){var _315={};dojo.forEach(_313,function(pos){switch(pos){case "after":_315[_314?"BR":"BL"]=_314?"BL":"BR";break;case "before":_315[_314?"BL":"BR"]=_314?"BR":"BL";break;case "below":_315[_314?"BL":"BR"]=_314?"TL":"TR";_315[_314?"BR":"BL"]=_314?"TR":"TL";break;case "above":default:_315[_314?"TL":"TR"]=_314?"BL":"BR";_315[_314?"TR":"TL"]=_314?"BR":"BL";break;}});return _315;};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){return dojo.window.get(doc);};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup={_stack:[],_beginZIndex:1000,_idGen:1,moveOffScreen:function(node){var _316=node.parentNode;if(!_316||!dojo.hasClass(_316,"dijitPopup")){_316=dojo.create("div",{"class":"dijitPopup",style:{visibility:"hidden",top:"-9999px"}},dojo.body());dijit.setWaiRole(_316,"presentation");_316.appendChild(node);}var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";dojo.style(_316,{visibility:"hidden",top:"-9999px"});},getTopPopup:function(){var _317=this._stack;for(var pi=_317.length-1;pi>0&&_317[pi].parent===_317[pi-1].widget;pi--){}return _317[pi];},open:function(args){var _318=this._stack,_319=args.popup,_31a=args.orient||((args.parent?args.parent.isLeftToRight():dojo._isBodyLtr())?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_31b=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);var _31c=_319.domNode.parentNode;if(!_31c||!dojo.hasClass(_31c,"dijitPopup")){this.moveOffScreen(_319.domNode);_31c=_319.domNode.parentNode;}dojo.attr(_31c,{id:id,style:{zIndex:this._beginZIndex+_318.length},"class":"dijitPopup "+(_319.baseClass||_319["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(dojo.isIE||dojo.isMoz){var _31d=_31c.childNodes[1];if(!_31d){_31d=new dijit.BackgroundIframe(_31c);}}var best=_31b?dijit.placeOnScreenAroundElement(_31c,_31b,_31a,_319.orient?dojo.hitch(_319,"orient"):null):dijit.placeOnScreen(_31c,args,_31a=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_31c.style.visibility="visible";_319.domNode.style.visibility="visible";var _31e=[];_31e.push(dojo.connect(_31c,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&args.onCancel){dojo.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _31f=this.getTopPopup();if(_31f&&_31f.onCancel){_31f.onCancel();}}}}));if(_319.onCancel){_31e.push(dojo.connect(_319,"onCancel",args.onCancel));}_31e.push(dojo.connect(_319,_319.onExecute?"onExecute":"onChange",this,function(){var _320=this.getTopPopup();if(_320&&_320.onExecute){_320.onExecute();}}));_318.push({wrapper:_31c,iframe:_31d,widget:_319,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_31e});if(_319.onOpen){_319.onOpen(best);}return best;},close:function(_321){var _322=this._stack;while(dojo.some(_322,function(elem){return elem.widget==_321;})){var top=_322.pop(),_323=top.wrapper,_324=top.iframe,_325=top.widget,_326=top.onClose;if(_325.onClose){_325.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(_325&&_325.domNode){this.moveOffScreen(_325.domNode);}else{dojo.destroy(_323);}if(_326){_326();}}}};dijit._frames=new function(){var _327=[];this.pop=function(){var _328;if(_327.length){_328=_327.pop();_328.style.display="";}else{if(dojo.isIE){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_328=dojo.doc.createElement(html);}else{_328=dojo.create("iframe");_328.src="javascript:\"\"";_328.className="dijitBackgroundIframe";dojo.style(_328,"opacity",0.1);}_328.tabIndex=-1;dijit.setWaiRole(_328,"presentation");}return _328;};this.push=function(_329){_329.style.display="none";_327.push(_329);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE||dojo.isMoz){var _32a=dijit._frames.pop();node.appendChild(_32a);if(dojo.isIE<7){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node);});}else{dojo.style(_32a,{width:"100%",height:"100%"});}this.iframe=_32a;}};dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe&&dojo.isIE<7){dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null;}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){dojo.window.scrollIntoView(node,pos);};}if(!dojo._hasResource["dojo.uacss"]){dojo._hasResource["dojo.uacss"]=true;dojo.provide("dojo.uacss");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_32b=d.isOpera,maj=Math.floor,ff=d.isFF,_32c=d.boxModel.replace(/-/,""),_32d={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_quirks:d.isQuirks,dj_iequirks:ie&&d.isQuirks,dj_opera:_32b,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_32d["dj_"+_32c]=true;var _32e="";for(var clz in _32d){if(_32d[clz]){_32e+=clz+" ";}}html.className=d.trim(html.className+" "+_32e);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var _32f="dj_rtl dijitRtl "+_32e.replace(/ /g,"-rtl ");html.className=d.trim(html.className+" "+_32f);}});})();}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_330,node,_331,obj,_332,_333,_334){if(obj!=this._obj){this.stop();this._initialDelay=_333||500;this._subsequentDelay=_332||0.9;this._minDelay=_334||10;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_330,_331);this._fireEventAndReload();this._evt=dojo.mixin({faux:true},evt);}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_335,_336,_337,_338,_339,_33a){if(_335.keyCode){_335.charOrCode=_335.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_335.charCode){_335.charOrCode=String.fromCharCode(_335.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_335.charOrCode&&(_335.ctrlKey===undefined||_335.ctrlKey==evt.ctrlKey)&&(_335.altKey===undefined||_335.altKey==evt.altKey)&&(_335.metaKey===undefined||_335.metaKey==(evt.metaKey||false))&&(_335.shiftKey===undefined||_335.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_336,node,_337,_335,_338,_339,_33a);}else{if(dijit.typematic._obj==_335){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_335){dijit.typematic.stop();}})];},addMouseListener:function(node,_33b,_33c,_33d,_33e,_33f){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_33b,node,_33c,node,_33d,_33e,_33f);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){evt.preventDefault();}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_33b,node,_33c,node,_33d,_33e,_33f);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_340,_341,_342,_343,_344,_345,_346,_347){return this.addKeyListener(_341,_342,_343,_344,_345,_346,_347).concat(this.addMouseListener(_340,_343,_344,_345,_346,_347));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _348=cs.backgroundImage;var _349=(cs.borderTopColor==cs.borderRightColor)||(_348!=null&&(_348=="none"||_348=="url(invalid-url:)"));dojo[_349?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(elem,role){var _34a=this.getWaiRole(elem);return role?(_34a.indexOf(role)>-1):(_34a.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace(this._XhtmlRoles,"").replace("wairole:",""));},setWaiRole:function(elem,role){var _34b=dojo.attr(elem,"role")||"";if(!this._XhtmlRoles.test(_34b)){dojo.attr(elem,"role",role);}else{if((" "+_34b+" ").indexOf(" "+role+" ")<0){var _34c=dojo.trim(_34b.replace(this._XhtmlRoles,""));var _34d=dojo.trim(_34b.replace(_34c,""));dojo.attr(elem,"role",_34d+(_34d?" ":"")+role);}}},removeWaiRole:function(elem,role){var _34e=dojo.attr(elem,"role");if(!_34e){return;}if(role){var t=dojo.trim((" "+_34e+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_34f){return elem.hasAttribute?elem.hasAttribute("aria-"+_34f):!!elem.getAttribute("aria-"+_34f);},getWaiState:function(elem,_350){return elem.getAttribute("aria-"+_350)||"";},setWaiState:function(elem,_351,_352){elem.setAttribute("aria-"+_351,_352);},removeWaiState:function(elem,_353){elem.removeAttribute("aria-"+_353);}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"_connect",function(_354,_355){if(_354&&dojo.isFunction(_354._onConnect)){_354._onConnect(_355);}});dijit._connectOnUseEventHandler=function(_356){};dijit._lastKeyDownNode=null;if(dojo.isIE){(function(){var _357=function(evt){dijit._lastKeyDownNode=evt.srcElement;};dojo.doc.attachEvent("onkeydown",_357);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",_357);});})();}else{dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target;},true);}(function(){var _358={},_359=function(_35a){var dc=_35a.declaredClass;if(!_358[dc]){var r=[],_35b,_35c=_35a.constructor.prototype;for(var _35d in _35c){if(dojo.isFunction(_35c[_35d])&&(_35b=_35d.match(/^_set([a-zA-Z]*)Attr$/))&&_35b[1]){r.push(_35b[1].charAt(0).toLowerCase()+_35b[1].substr(1));}}_358[dc]=r;}return _358[dc]||[];};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_35e,_35f){this.create(_35e,_35f);},create:function(_360,_361){this.srcNodeRef=dojo.byId(_361);this._connects=[];this._subscribes=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_360){this.params=_360;dojo.mixin(this,_360);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _362=this.srcNodeRef;if(_362&&_362.parentNode){_362.parentNode.replaceChild(this.domNode,_362);}for(attr in this.params){this._onConnect(attr);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _363=function(attr,_364){if((_364.params&&attr in _364.params)||_364[attr]){_364.set(attr,_364[attr]);}};for(var attr in this.attributeMap){_363(attr,this);}dojo.forEach(_359(this),function(a){if(!(a in this.attributeMap)){_363(a,this);}},this);},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.create("div");},postCreate:function(){if(this.baseClass){var _365=this.baseClass.split(" ");if(!this.isLeftToRight()){_365=_365.concat(dojo.map(_365,function(name){return name+"Rtl";}));}dojo.addClass(this.domNode,_365);}},startup:function(){this._started=true;},destroyRecursive:function(_366){this._beingDestroyed=true;this.destroyDescendants(_366);this.destroy(_366);},destroy:function(_367){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_368){dfe(_368,d.disconnect);});dfe(this._subscribes,function(_369){dun(_369);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_367);dijit.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_36a){if(this.bgIframe){this.bgIframe.destroy(_36a);delete this.bgIframe;}if(this.domNode){if(_36a){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_36a){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_36b){dojo.forEach(this.getChildren(),function(_36c){if(_36c.destroyRecursive){_36c.destroyRecursive(_36b);}});},uninitialize:function(){return false;},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},_onConnect:function(_36d){if(_36d in this._deferredConnects){var _36e=this[this._deferredConnects[_36d]||"domNode"];this.connect(_36e,_36d.toLowerCase(),_36d);delete this._deferredConnects[_36d];}},_setClassAttr:function(_36f){var _370=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(_370,this["class"]);this["class"]=_36f;dojo.addClass(_370,_36f);},_setStyleAttr:function(_371){var _372=this[this.attributeMap.style||"domNode"];if(dojo.isObject(_371)){dojo.style(_372,_371);}else{if(_372.style.cssText){_372.style.cssText+="; "+_371;}else{_372.style.cssText=_371;}}this.style=_371;},setAttribute:function(attr,_373){dojo.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_373);},_attrToDom:function(attr,_374){var _375=this.attributeMap[attr];dojo.forEach(dojo.isArray(_375)?_375:[_375],function(_376){var _377=this[_376.node||_376||"domNode"];var type=_376.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(_374)){_374=dojo.hitch(this,_374);}var _378=_376.attribute?_376.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);dojo.attr(_377,_378,_374);break;case "innerText":_377.innerHTML="";_377.appendChild(dojo.doc.createTextNode(_374));break;case "innerHTML":_377.innerHTML=_374;break;case "class":dojo.removeClass(_377,this[attr]);dojo.addClass(_377,_374);break;}},this);this[attr]=_374;},attr:function(name,_379){if(dojo.config.isDebug){var _37a=arguments.callee._ach||(arguments.callee._ach={}),_37b=(arguments.callee.caller||"unknown caller").toString();if(!_37a[_37b]){dojo.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_37b,"","2.0");_37a[_37b]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},get:function(name){var _37c=this._getAttrNames(name);return this[_37c.g]?this[_37c.g]():this[name];},set:function(name,_37d){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _37e=this._getAttrNames(name);if(this[_37e.s]){var _37f=this[_37e.s].apply(this,Array.prototype.slice.call(arguments,1));}else{if(name in this.attributeMap){this._attrToDom(name,_37d);}var _380=this[name];this[name]=_37d;}return _37f||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[];},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[];},nodesWithKeyClick:["input","button"],connect:function(obj,_381,_382){var d=dojo,dc=d._connect,_383=[];if(_381=="ondijitclick"){if(dojo.indexOf(this.nodesWithKeyClick,obj.nodeName.toLowerCase())==-1){var m=d.hitch(this,_382);_383.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;e.preventDefault();}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target===dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e);}}));}_381="onclick";}_383.push(dc(obj,_381,this,_382));this._connects.push(_383);return _383;},disconnect:function(_384){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_384){dojo.forEach(_384,dojo.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_385,_386){var d=dojo,_387=d.subscribe(_385,this,_386);this._subscribes.push(_387);return _387;},unsubscribe:function(_388){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_388){dojo.unsubscribe(_388);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):dojo._isBodyLtr();},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},placeAt:function(_389,_38a){if(_389.declaredClass&&_389.addChild){_389.addChild(this,_38a);}else{dojo.place(this.domNode,_389,_38a);}return this;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});})();}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_38b,map,_38c,_38d){_38d=_38d||dojo.global;_38c=_38c?dojo.hitch(_38d,_38c):function(v){return v;};return _38b.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_38e,key,_38f){var _390=dojo.getObject(key,false,map);if(_38f){_390=dojo.getObject(_38f,false,_38d).call(_38d,_390,key);}return _38c(_390,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");(function(){var _391={};dojo.cache=function(_392,url,_393){if(typeof _392=="string"){var _394=dojo.moduleUrl(_392,url);}else{_394=_392;_393=url;}var key=_394.toString();var val=_393;if(_393!=undefined&&!dojo.isString(_393)){val=("value" in _393?_393.value:undefined);}var _395=_393&&_393.sanitize?true:false;if(typeof val=="string"){val=_391[key]=_395?dojo.cache._sanitize(val):val;}else{if(val===null){delete _391[key];}else{if(!(key in _391)){val=dojo._getText(key);_391[key]=_395?dojo.cache._sanitize(val):val;}val=_391[key];}}return val;};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _396=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_396){val=_396[1];}}else{val="";}return val;};})();}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];},_stringRepl:function(tmpl){var _397=this.declaredClass,_398=this;return dojo.string.substitute(tmpl,this,function(_399,key){if(key.charAt(0)=="!"){_399=dojo.getObject(key.substr(1),false,_398);}if(typeof _399=="undefined"){throw new Error(_397+" template:"+key);}if(_399==null){return "";}return key.charAt(0)=="!"?_399:_399.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _39a=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_39a)){node=dojo._toDom(this._stringRepl(_39a));if(node.nodeType!=1){throw new Error("Invalid template: "+_39a);}}else{node=_39a.cloneNode(true);}this.domNode=node;this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _39b=dojo.parser,qry,attr;if(_39b._query!="[dojoType]"){qry=_39b._query;attr=_39b._attrName;_39b._query="[dojoType]";_39b._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_39b._query=qry;_39b._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_39c){var dest=this.containerNode;if(_39c&&dest){while(_39c.hasChildNodes()){dest.appendChild(_39c.firstChild);}}},_attachTemplateNodes:function(_39d,_39e){_39e=_39e||function(n,p){return n.getAttribute(p);};var _39f=dojo.isArray(_39d)?_39d:(_39d.all||_39d.getElementsByTagName("*"));var x=dojo.isArray(_39d)?0:-1;for(;x<_39f.length;x++){var _3a0=(x==-1)?_39d:_39f[x];if(this.widgetsInTemplate&&_39e(_3a0,"dojoType")){continue;}var _3a1=_39e(_3a0,"dojoAttachPoint");if(_3a1){var _3a2,_3a3=_3a1.split(/\s*,\s*/);while((_3a2=_3a3.shift())){if(dojo.isArray(this[_3a2])){this[_3a2].push(_3a0);}else{this[_3a2]=_3a0;}this._attachPoints.push(_3a2);}}var _3a4=_39e(_3a0,"dojoAttachEvent");if(_3a4){var _3a5,_3a6=_3a4.split(/\s*,\s*/);var trim=dojo.trim;while((_3a5=_3a6.shift())){if(_3a5){var _3a7=null;if(_3a5.indexOf(":")!=-1){var _3a8=_3a5.split(":");_3a5=trim(_3a8[0]);_3a7=trim(_3a8[1]);}else{_3a5=trim(_3a5);}if(!_3a7){_3a7=_3a5;}this.connect(_3a0,_3a5,_3a7);}}}var role=_39e(_3a0,"waiRole");if(role){dijit.setWaiRole(_3a0,role);}var _3a9=_39e(_3a0,"waiState");if(_3a9){dojo.forEach(_3a9.split(/\s*,\s*/),function(_3aa){if(_3aa.indexOf("-")!=-1){var pair=_3aa.split("-");dijit.setWaiState(_3a0,pair[0],pair[1]);}});}}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){dojo.forEach(this._attachPoints,function(_3ab){delete this[_3ab];},this);this._attachPoints=[];this.inherited(arguments);}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_3ac,_3ad,_3ae){var _3af=dijit._Templated._templateCache;var key=_3ad||_3ac;var _3b0=_3af[key];if(_3b0){try{if(!_3b0.ownerDocument||_3b0.ownerDocument==dojo.doc){return _3b0;}}catch(e){}dojo.destroy(_3b0);}if(!_3ad){_3ad=dojo.cache(_3ac,{sanitize:true});}_3ad=dojo.string.trim(_3ad);if(_3ae||_3ad.match(/\$\{([^\}]+)\}/g)){return (_3af[key]=_3ad);}else{var node=dojo._toDom(_3ad);if(node.nodeType!=1){throw new Error("Invalid template: "+_3ad);}return (_3af[key]=node);}};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _3b1=dijit._Templated._templateCache;for(var key in _3b1){var _3b2=_3b1[key];if(typeof _3b2=="object"){dojo.destroy(_3b2);}delete _3b1[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/'/g,"&quot;")+"\""):"";this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousedown","_onMouseDown");},_setDisabledAttr:function(_3b3){this.disabled=_3b3;dojo.attr(this.focusNode,"disabled",_3b3);if(this.valueNode){dojo.attr(this.valueNode,"disabled",_3b3);}dijit.setWaiState(this.focusNode,"disabled",_3b3);if(_3b3){this._hovering=false;this._active=false;var _3b4="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:"focusNode";dojo.forEach(dojo.isArray(_3b4)?_3b4:[_3b4],function(_3b5){var node=this[_3b5];if(dojo.isWebKit||dijit.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{this.focusNode.setAttribute("tabIndex",this.tabIndex);}},setDisabled:function(_3b6){dojo.deprecated("setDisabled("+_3b6+") is deprecated. Use set('disabled',"+_3b6+") instead.","","2.0");this.set("disabled",_3b6);},_onFocus:function(e){if(this.scrollOnFocus){dojo.window.scrollIntoView(this.domNode);}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&!this.readOnly&&this.focusNode&&(dojo.style(this.domNode,"display")!="none");},focus:function(){dijit.focus(this.focusNode);},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(_3b7){},_onChangeActive:false,_handleOnChange:function(_3b8,_3b9){this._lastValue=_3b8;if(this._lastValueReported==undefined&&(_3b9===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_3b8;}if((this.intermediateChanges||_3b9||_3b9===undefined)&&((typeof _3b8!=typeof this._lastValueReported)||this.compare(_3b8,this._lastValueReported)!=0)){this._lastValueReported=_3b8;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_3b8);}),0);}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported);}this.inherited(arguments);},setValue:function(_3ba){dojo.deprecated("dijit.form._FormWidget:setValue("+_3ba+") is deprecated.  Use set('value',"+_3ba+") instead.","","2.0");this.set("value",_3ba);},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_onMouseDown:function(e){if(!e.ctrlKey&&this.isFocusable()){var _3bb=this.connect(dojo.body(),"onmouseup",function(){if(this.isFocusable()){this.focus();}this.disconnect(_3bb);});}}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(_3bc){this.readOnly=_3bc;dojo.attr(this.focusNode,"readOnly",_3bc);dijit.setWaiState(this.focusNode,"readonly",_3bc);},postCreate:function(){this.inherited(arguments);if(dojo.isIE){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._resetValue=this.value;}},_setValueAttr:function(_3bd,_3be){this.value=_3bd;this._handleOnChange(_3bd,_3be);},_getValueAttr:function(){return this._lastValue;},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==dojo.keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){var te;if(dojo.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}}},_layoutHackIE7:function(){if(dojo.isIE==7){var _3bf=this.domNode;var _3c0=_3bf.parentNode;var _3c1=_3bf.firstChild||_3bf;var _3c2=_3c1.style.filter;var _3c3=this;while(_3c0&&_3c0.clientHeight==0){(function ping(){var _3c4=_3c3.connect(_3c0,"onscroll",function(e){_3c3.disconnect(_3c4);_3c1.style.filter=(new Date()).getMilliseconds();setTimeout(function(){_3c1.style.filter=_3c2;},0);});})();_3c0=_3c0.parentNode;}}}});}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(_3c5,_3c6,_3c7){_3c7=dojo.i18n.normalizeLocale(_3c7);var _3c8=_3c7.split("-");var _3c9=[_3c5,"nls",_3c6].join(".");var _3ca=dojo._loadedModules[_3c9];if(_3ca){var _3cb;for(var i=_3c8.length;i>0;i--){var loc=_3c8.slice(0,i).join("_");if(_3ca[loc]){_3cb=_3ca[loc];break;}}if(!_3cb){_3cb=_3ca.ROOT;}if(_3cb){var _3cc=function(){};_3cc.prototype=_3cb;return new _3cc();}}throw new Error("Bundle not found: "+_3c6+" in "+_3c5+" , locale="+_3c7);};dojo.i18n.normalizeLocale=function(_3cd){var _3ce=_3cd?_3cd.toLowerCase():dojo.locale;if(_3ce=="root"){_3ce="ROOT";}return _3ce;};dojo.i18n._requireLocalization=function(_3cf,_3d0,_3d1,_3d2){var _3d3=dojo.i18n.normalizeLocale(_3d1);var _3d4=[_3cf,"nls",_3d0].join(".");var _3d5="";if(_3d2){var _3d6=_3d2.split(",");for(var i=0;i<_3d6.length;i++){if(_3d3["indexOf"](_3d6[i])==0){if(_3d6[i].length>_3d5.length){_3d5=_3d6[i];}}}if(!_3d5){_3d5="ROOT";}}var _3d7=_3d2?_3d5:_3d3;var _3d8=dojo._loadedModules[_3d4];var _3d9=null;if(_3d8){if(dojo.config.localizationComplete&&_3d8._built){return;}var _3da=_3d7.replace(/-/g,"_");var _3db=_3d4+"."+_3da;_3d9=dojo._loadedModules[_3db];}if(!_3d9){_3d8=dojo["provide"](_3d4);var syms=dojo._getModuleSymbols(_3cf);var _3dc=syms.concat("nls").join("/");var _3dd;dojo.i18n._searchLocalePath(_3d7,_3d2,function(loc){var _3de=loc.replace(/-/g,"_");var _3df=_3d4+"."+_3de;var _3e0=false;if(!dojo._loadedModules[_3df]){dojo["provide"](_3df);var _3e1=[_3dc];if(loc!="ROOT"){_3e1.push(loc);}_3e1.push(_3d0);var _3e2=_3e1.join("/")+".js";_3e0=dojo._loadPath(_3e2,null,function(hash){var _3e3=function(){};_3e3.prototype=_3dd;_3d8[_3de]=new _3e3();for(var j in hash){_3d8[_3de][j]=hash[j];}});}else{_3e0=true;}if(_3e0&&_3d8[_3de]){_3dd=_3d8[_3de];}else{_3d8[_3de]=_3dd;}if(_3d2){return true;}});}if(_3d2&&_3d3!=_3d5){_3d8[_3d3.replace(/-/g,"_")]=_3d8[_3d5.replace(/-/g,"_")];}};(function(){var _3e4=dojo.config.extraLocale;if(_3e4){if(!_3e4 instanceof Array){_3e4=[_3e4];}var req=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(m,b,_3e5,_3e6){req(m,b,_3e5,_3e6);if(_3e5){return;}for(var i=0;i<_3e4.length;i++){req(m,b,_3e4[i],_3e6);}};}})();dojo.i18n._searchLocalePath=function(_3e7,down,_3e8){_3e7=dojo.i18n.normalizeLocale(_3e7);var _3e9=_3e7.split("-");var _3ea=[];for(var i=_3e9.length;i>0;i--){_3ea.push(_3e9.slice(0,i).join("-"));}_3ea.push(false);if(down){_3ea.reverse();}for(var j=_3ea.length-1;j>=0;j--){var loc=_3ea[j]||"ROOT";var stop=_3e8(loc);if(stop){break;}}};dojo.i18n._preloadLocalizations=function(_3eb,_3ec){function _3ed(_3ee){_3ee=dojo.i18n.normalizeLocale(_3ee);dojo.i18n._searchLocalePath(_3ee,true,function(loc){for(var i=0;i<_3ec.length;i++){if(_3ec[i]==loc){dojo["require"](_3eb+"_"+loc);return true;}}return false;});};_3ed();var _3ef=dojo.config.extraLocale||[];for(var i=0;i<_3ef.length;i++){_3ed(_3ef[i]);}};}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",templateString:dojo.cache("dijit.form","templates/TextBox.html","<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" waiRole=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" dojoAttachPoint='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"),_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" dojoAttachPoint=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:dojo.isIE?"disabled":"",baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString.toLowerCase()=="input"||((type=="hidden"||type=="file")&&this.templateString==dijit.form.TextBox.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},_setPlaceHolderAttr:function(v){this.placeHolder=v;if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=dojo.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(document.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this._focused&&!this.textbox.value)?"":"none";}},_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_3f0,_3f1,_3f2){var _3f3;if(_3f0!==undefined){_3f3=this.filter(_3f0);if(typeof _3f2!="string"){if(_3f3!==null&&((typeof _3f3!="number")||!isNaN(_3f3))){_3f2=this.filter(this.format(_3f3,this.constraints));}else{_3f2="";}}}if(_3f2!=null&&_3f2!=undefined&&((typeof _3f2)!="number"||!isNaN(_3f2))&&this.textbox.value!=_3f2){this.textbox.value=_3f2;}this._updatePlaceHolder();this.inherited(arguments,[_3f3,_3f1]);},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use set('displayedValue') instead.","","2.0");return this.get("displayedValue");},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},setDisplayedValue:function(_3f4){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_3f4);},_setDisplayedValueAttr:function(_3f5){if(_3f5===null||_3f5===undefined){_3f5="";}else{if(typeof _3f5!="string"){_3f5=String(_3f5);}}this.textbox.value=_3f5;this._setValueAttr(this.get("value"),undefined,_3f5);},format:function(_3f6,_3f7){return ((_3f6==null||_3f6==undefined)?"":(_3f6.toString?_3f6.toString():_3f6));},parse:function(_3f8,_3f9){return _3f8;},_refreshState:function(){},_onInput:function(e){if(e&&e.type&&/key/i.test(e.type)&&e.keyCode){switch(e.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return;}}if(this.intermediateChanges){var _3fa=this;setTimeout(function(){_3fa._handleOnChange(_3fa.get("value"),false);},0);}this._refreshState();},postCreate:function(){if(dojo.isIE){var s=dojo.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _3fb=this.domNode.getElementsByTagName("INPUT");if(_3fb){for(var i=0;i<_3fb.length;i++){_3fb[i].style.fontFamily=ff;}}}}}this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);if(dojo.isMoz||dojo.isOpera){this.connect(this.textbox,"oninput",this._onInput);}else{this.connect(this.textbox,"onkeydown",this._onInput);this.connect(this.textbox,"onkeyup",this._onInput);this.connect(this.textbox,"onpaste",this._onInput);this.connect(this.textbox,"oncut",this._onInput);}},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=dojo.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);}if(this.selectOnClick&&dojo.isMoz){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}this._updatePlaceHolder();},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);var _3fc;if(dojo.isIE){var _3fd=dojo.doc.selection.createRange();var _3fe=_3fd.parentElement();_3fc=_3fe==this.textbox&&_3fd.text.length==0;}else{_3fc=this.textbox.selectionStart==this.textbox.selectionEnd;}if(_3fc){dijit.selectInputText(this.textbox);}});}this._updatePlaceHolder();this._refreshState();this.inherited(arguments);},reset:function(){this.textbox.value="";this.inherited(arguments);}});dijit.selectInputText=function(_3ff,_400,stop){var _401=dojo.global;var _402=dojo.doc;_3ff=dojo.byId(_3ff);if(isNaN(_400)){_400=0;}if(isNaN(stop)){stop=_3ff.value?_3ff.value.length:0;}dijit.focus(_3ff);if(_402["selection"]&&dojo.body()["createTextRange"]){if(_3ff.createTextRange){var _403=_3ff.createTextRange();with(_403){collapse(true);moveStart("character",-99999);moveStart("character",_400);moveEnd("character",stop-_400);select();}}}else{if(_401["getSelection"]){if(_3ff.setSelectionRange){_3ff.setSelectionRange(_400,stop);}}}};}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html","<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\">\n\t<div class=\"dijitTooltipContainer dijitTooltipContents\" dojoAttachPoint=\"containerNode\" waiRole='alert'></div>\n\t<div class=\"dijitTooltipConnector\"></div>\n</div>\n"),postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")});},show:function(_404,_405,_406,rtl){if(this.aroundNode&&this.aroundNode===_405){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_404;var pos=dijit.placeOnScreenAroundElement(this.domNode,_405,dijit.getPopupAroundAlignment((_406&&_406.length)?_406:dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_405;},orient:function(node,_407,_408){node.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_407+"-"+_408];},_onShow:function(){if(dojo.isIE){this.domNode.style.filter="";}},hide:function(_409){if(this._onDeck&&this._onDeck[1]==_409){this._onDeck=null;}else{if(this.aroundNode===_409){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});dijit.showTooltip=function(_40a,_40b,_40c,rtl){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.show(_40a,_40b,_40c,rtl);};dijit.hideTooltip=function(_40d){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.hide(_40d);};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],constructor:function(){this._nodeConnectionsById={};},_setConnectIdAttr:function(_40e){for(var _40f in this._nodeConnectionsById){this.removeTarget(_40f);}dojo.forEach(dojo.isArrayLike(_40e)?_40e:[_40e],this.addTarget,this);},_getConnectIdAttr:function(){var ary=[];for(var id in this._nodeConnectionsById){ary.push(id);}return ary;},addTarget:function(id){var node=dojo.byId(id);if(!node){return;}if(node.id in this._nodeConnectionsById){return;}this._nodeConnectionsById[node.id]=[this.connect(node,"onmouseenter","_onTargetMouseEnter"),this.connect(node,"onmouseleave","_onTargetMouseLeave"),this.connect(node,"onfocus","_onTargetFocus"),this.connect(node,"onblur","_onTargetBlur")];},removeTarget:function(node){var id=node.id||node;if(id in this._nodeConnectionsById){dojo.forEach(this._nodeConnectionsById[id],this.disconnect,this);delete this._nodeConnectionsById[id];}},postCreate:function(){dojo.addClass(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;dojo.forEach(dojo.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onTargetMouseEnter:function(e){this._onHover(e);},_onTargetMouseLeave:function(e){this._onUnHover(e);},_onTargetFocus:function(e){this._focus=true;this._onHover(e);},_onTargetBlur:function(e){this._focus=false;this._onUnHover(e);},_onHover:function(e){if(!this._showTimer){var _410=e.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(_410);}),this.showDelay);}},_onUnHover:function(e){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_411){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}dijit.showTooltip(this.label||this.domNode.innerHTML,_411,this.position,!this.isLeftToRight());this._connectNode=_411;this.onShow(_411,this.position);},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(_412,_413){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});dijit.Tooltip.defaultPosition=["after","before"];}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:dojo.cache("dijit.form","templates/ValidationTextBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\" waiRole=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&Chi; \" type=\"text\" tabIndex=\"-1\" readOnly waiRole=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" dojoAttachPoint='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitValidationTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(_414){return this.regExp;},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused);},validator:function(_415,_416){return (new RegExp("^(?:"+this.regExpGen(_416)+")"+(this.required?"":"?")+"$")).test(_415)&&(!this.required||!this._isEmpty(_415))&&(this._isEmpty(_415)||this.parse(_415,_416)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(_417){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_418){return /^\s*$/.test(_418);},getErrorMessage:function(_419){return (this.required&&this._isEmpty(this.textbox.value))?this.missingMessage:this.invalidMessage;},getPromptMessage:function(_41a){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_41b){var _41c="";var _41d=this.disabled||this.isValid(_41b);if(_41d){this._maskValidSubsetError=true;}var _41e=this._isEmpty(this.textbox.value);var _41f=!_41d&&!_41e&&_41b&&this._isValidSubset();this.state=((_41d||((!this._hasBeenBlurred||_41b)&&_41e)||_41f)&&this._maskValidSubsetError)?"":"Error";if(this.state=="Error"){this._maskValidSubsetError=_41b;}this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",_41d?"false":"true");if(_41b){if(this.state=="Error"){_41c=this.getErrorMessage(true);}else{_41c=this.getPromptMessage(true);}this._maskValidSubsetError=true;}this.displayMessage(_41c);return _41d;},_message:"",displayMessage:function(_420){if(this._message==_420){return;}this._message=_420;dijit.hideTooltip(this.domNode);if(_420){dijit.showTooltip(_420,this.domNode,this.tooltipPosition,!this.isLeftToRight());}},_refreshState:function(){this.validate(this._focused);this.inherited(arguments);},constructor:function(){this.constraints={};},_setConstraintsAttr:function(_421){if(!_421.locale&&this.lang){_421.locale=this.lang;}this.constraints=_421;this._computePartialRE();},_computePartialRE:function(){var p=this.regExpGen(this.constraints);this.regExp=p;var _422="";if(p!=".*"){this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_422+=re;break;case ")":_422+="|$)";break;default:_422+="(?:"+re+"|$)";break;}});}try{"".search(_422);}catch(e){_422=this.regExp;}this._partialre="^(?:"+_422+")$";},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage;}if(!this.invalidMessage){this.invalidMessage=this.promptMessage;}if(this.missingMessage=="$_unset_$"){this.missingMessage=this.messages.missingMessage;}if(!this.missingMessage){this.missingMessage=this.invalidMessage;}this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_423){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_424){this.required=_424;dijit.setWaiState(this.focusNode,"required",_424);this._refreshState();},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},serialize:function(val,_425){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.place("<input type='hidden'"+(this.name?" name='"+this.name+"'":"")+">",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(_426,_427){return ("min" in _427?(this.compare(_426,_427.min)>=0):true)&&("max" in _427?(this.compare(_426,_427.max)<=0):true);},isInRange:function(_428){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");var _429=false;var _42a=false;if("min" in this.constraints){var min=this.constraints.min;min=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min);_429=(typeof min=="number")&&min<0;}if("max" in this.constraints){var max=this.constraints.max;max=this.compare(val,((typeof max!="number")||max>0)?max:0);_42a=(typeof max=="number")&&max>0;}return _429||_42a;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_42b){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_42b));},getErrorMessage:function(_42c){var v=this.get("value");if(v!==null&&v!==""&&v!==undefined&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_42c)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},_setConstraintsAttr:function(_42d){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min);}else{dijit.removeWaiState(this.focusNode,"valuemin");}if(this.constraints.max!==undefined){dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max);}else{dijit.removeWaiState(this.focusNode,"valuemax");}}},_setValueAttr:function(_42e,_42f){dijit.setWaiState(this.focusNode,"valuenow",_42e);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",null,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:dojo.cache("dijit.form","templates/ComboBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\tdojoAttachPoint=\"comboNode\" waiRole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"downArrowNode\" waiRole=\"presentation\"\n\t\tdojoAttachEvent=\"onmousedown:_onArrowMouseDown\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readOnly waiRole=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&Chi; \" type=\"text\" tabIndex=\"-1\" readOnly waiRole=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachEvent=\"onkeypress:_onKeyPress,compositionend\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" waiRole=\"textbox\" waiState=\"haspopup-true,autocomplete-list\"\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"downArrowNode":"dijitDownArrowButton"},_getCaretPos:function(_430){var pos=0;if(typeof (_430.selectionStart)=="number"){pos=_430.selectionStart;}else{if(dojo.isIE){var tr=dojo.doc.selection.createRange().duplicate();var ntr=_430.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_431,_432){_432=parseInt(_432);dijit.selectInputText(_431,_432,_432);},_setDisabledAttr:function(_433){this.inherited(arguments);dijit.setWaiState(this.comboNode,"disabled",_433);},_abortQuery:function(){if(this.searchTimer){clearTimeout(this.searchTimer);this.searchTimer=null;}if(this._fetchHandle){if(this._fetchHandle.abort){this._fetchHandle.abort();}this._fetchHandle=null;}},_onInput:function(evt){if(!this.searchTimer&&(evt.type=="paste"||evt.type=="input")&&this._lastInput!=this.textbox.value){this.searchTimer=setTimeout(dojo.hitch(this,function(){this._onKeyPress({charOrCode:229});}),100);}this.inherited(arguments);},_onKeyPress:function(evt){var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==dojo.keys.SHIFT){return;}var _434=false;var _435="_startSearchFromInput";var pw=this._popupWidget;var dk=dojo.keys;var _436=null;this._prev_key_backspace=false;this._abortQuery();if(this._isShowingNow){pw.handleKey(key);_436=pw.getHighlightedOption();}switch(key){case dk.PAGE_DOWN:case dk.DOWN_ARROW:case dk.PAGE_UP:case dk.UP_ARROW:if(!this._isShowingNow){_434=true;_435="_startSearchAll";}else{this._announceOption(_436);}dojo.stopEvent(evt);break;case dk.ENTER:if(_436){if(_436==pw.nextButton){this._nextSearch(1);dojo.stopEvent(evt);break;}else{if(_436==pw.previousButton){this._nextSearch(-1);dojo.stopEvent(evt);break;}}}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}evt.preventDefault();case dk.TAB:var _437=this.get("displayedValue");if(pw&&(_437==pw._messages["previousMessage"]||_437==pw._messages["nextMessage"])){break;}if(_436){this._selectOption();}if(this._isShowingNow){this._lastQuery=null;this._hideResultList();}break;case " ":if(_436){dojo.stopEvent(evt);this._selectOption();this._hideResultList();}else{_434=true;}break;case dk.ESCAPE:if(this._isShowingNow){dojo.stopEvent(evt);this._hideResultList();}break;case dk.DELETE:case dk.BACKSPACE:this._prev_key_backspace=true;_434=true;break;default:_434=typeof key=="string"||key==229;}if(_434){this.item=undefined;this.searchTimer=setTimeout(dojo.hitch(this,_435),1);}},_autoCompleteText:function(text){var fn=this.focusNode;dijit.selectInputText(fn,fn.value.length);var _438=this.ignoreCase?"toLowerCase":"substr";if(text[_438](0).indexOf(this.focusNode.value[_438](0))==0){var cpos=this._getCaretPos(fn);if((cpos+1)>fn.value.length){fn.value=text;dijit.selectInputText(fn,cpos);}}else{fn.value=text;dijit.selectInputText(fn);}},_openResultList:function(_439,_43a){this._fetchHandle=null;if(this.disabled||this.readOnly||(_43a.query[this.searchAttr]!=this._lastQuery)){return;}this._popupWidget.clearResultList();if(!_439.length&&!this._maxOptions){this._hideResultList();return;}_43a._maxOptions=this._maxOptions;var _43b=this._popupWidget.createOptions(_439,_43a,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(_43a.direction){if(1==_43a.direction){this._popupWidget.highlightFirstOption();}else{if(-1==_43a.direction){this._popupWidget.highlightLastOption();}}this._announceOption(this._popupWidget.getHighlightedOption());}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_43a.query[this.searchAttr])){this._announceOption(_43b[1]);}}},_showResultList:function(){this._hideResultList();this.displayMessage("");dojo.style(this._popupWidget.domNode,{width:"",height:""});var best=this.open();var _43c=dojo.marginBox(this._popupWidget.domNode);this._popupWidget.domNode.style.overflow=((best.h==_43c.h)&&(best.w==_43c.w))?"hidden":"auto";var _43d=best.w;if(best.h<this._popupWidget.domNode.scrollHeight){_43d+=16;}dojo.marginBox(this._popupWidget.domNode,{h:best.h,w:Math.max(_43d,this.domNode.offsetWidth)});if(_43d<this.domNode.offsetWidth){this._popupWidget.domNode.parentNode.style.left=dojo.position(this.domNode,true).x+"px";}dijit.setWaiState(this.comboNode,"expanded","true");},_hideResultList:function(){this._abortQuery();if(this._isShowingNow){dijit.popup.close(this._popupWidget);this._isShowingNow=false;dijit.setWaiState(this.comboNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant");}},_setBlurValue:function(){var _43e=this.get("displayedValue");var pw=this._popupWidget;if(pw&&(_43e==pw._messages["previousMessage"]||_43e==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_43e);}else{if(this.value!=this._lastValueReported){dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);}this._refreshState();}}},_onBlur:function(){this._hideResultList();this.inherited(arguments);},_setItemAttr:function(item,_43f,_440){if(!_440){_440=this.labelFunc(item,this.store);}this.value=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_440;this.item=item;dijit.form.ComboBox.superclass._setValueAttr.call(this,this.value,_43f,_440);},_announceOption:function(node){if(!node){return;}var _441;if(node==this._popupWidget.nextButton||node==this._popupWidget.previousButton){_441=node.innerHTML;this.item=undefined;this.value="";}else{_441=this.labelFunc(node.item,this.store);this.set("item",node.item,false,_441);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(node,"id"));this._autoCompleteText(_441);},_selectOption:function(evt){if(evt){this._announceOption(evt.target);}this._hideResultList();this._setCaretPos(this.focusNode,this.focusNode.value.length);dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);},_onArrowMouseDown:function(evt){if(this.disabled||this.readOnly){return;}dojo.stopEvent(evt);this.focus();if(this._isShowingNow){this._hideResultList();}else{this._startSearchAll();}},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_getQueryString:function(text){return dojo.string.substitute(this.queryExpr,[text]);},_startSearch:function(key){if(!this._popupWidget){var _442=this.id+"_popup";this._popupWidget=new dijit.form._ComboBoxMenu({onChange:dojo.hitch(this,this._selectOption),id:_442,dir:this.dir});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",_442);}var _443=dojo.clone(this.query);this._lastInput=key;this._lastQuery=_443[this.searchAttr]=this._getQueryString(key);this.searchTimer=setTimeout(dojo.hitch(this,function(_444,_445){this.searchTimer=null;var _446={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:_444,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(_447){_445._fetchHandle=null;dojo.hitch(_445,"_hideResultList")();},start:0,count:this.pageSize};dojo.mixin(_446,_445.fetchProperties);this._fetchHandle=_445.store.fetch(_446);var _448=function(_449,_44a){_449.start+=_449.count*_44a;_449.direction=_44a;this._fetchHandle=this.store.fetch(_449);};this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,_448,this._fetchHandle);},_443,this),this.searchDelay);},_setMaxOptions:function(size,_44b){this._maxOptions=size;},_getValueField:function(){return this.searchAttr;},compositionend:function(evt){this._onKeyPress({charOrCode:229});},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var _44c=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(_44c);if(!("value" in this.params)){var item=this.store.fetchSelectedItem();if(item){var _44d=this._getValueField();this.value=_44d!=this.searchAttr?this.store.getValue(item,_44d):this.labelFunc(item,this.store);}}}this.inherited(arguments);},postCreate:function(){if(!this.hasDownArrow){this.downArrowNode.style.display="none";}var _44e=dojo.query("label[for=\""+this.id+"\"]");if(_44e.length){_44e[0].id=(this.id+"_label");var cn=this.comboNode;dijit.setWaiState(cn,"labelledby",_44e[0].id);}this.inherited(arguments);},uninitialize:function(){if(this._popupWidget&&!this._popupWidget._destroyed){this._hideResultList();this._popupWidget.destroy();}this.inherited(arguments);},_getMenuLabelFromItem:function(item){var _44f=this.labelAttr?this.store.getValue(item,this.labelAttr):this.labelFunc(item,this.store);var _450=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_44f=this.doHighlight(_44f,this._escapeHtml(this._lastInput));_450="html";}return {html:_450=="html",label:_44f};},doHighlight:function(_451,find){var _452="i"+(this.highlightMatch=="all"?"g":"");var _453=this._escapeHtml(_451);find=dojo.regexp.escapeString(find);var ret=_453.replace(new RegExp("(^|\\s)("+find+")",_452),"$1<span class=\"dijitComboBoxHighlightMatch\">$2</span>");return ret;},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},open:function(){this._isShowingNow=true;return dijit.popup.open({popup:this._popupWidget,around:this.domNode,parent:this});},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_454){return _454.getValue(item,this.searchAttr).toString();}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' tabIndex='-1' style='overflow: \"auto\"; overflow-x: \"hidden\";'>"+"<li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' waiRole='option'></li>"+"<li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' waiRole='option'></li>"+"</ul>",_messages:null,baseClass:"dijitComboBoxMenu",postMixInProperties:function(){this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);this.inherited(arguments);},_setValueAttr:function(_455){this.value=_455;this.onChange(_455);},onChange:function(_456){},onPage:function(_457){},postCreate:function(){this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];this.inherited(arguments);},onClose:function(){this._blurOptionNode();},_createOption:function(item,_458){var _459=_458(item);var _45a=dojo.doc.createElement("li");dijit.setWaiRole(_45a,"option");if(_459.html){_45a.innerHTML=_459.label;}else{_45a.appendChild(dojo.doc.createTextNode(_459.label));}if(_45a.innerHTML==""){_45a.innerHTML="&nbsp;";}_45a.item=item;return _45a;},createOptions:function(_45b,_45c,_45d){this.previousButton.style.display=(_45c.start==0)?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(_45b,function(item,i){var _45e=this._createOption(item,_45d);_45e.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");dojo.attr(_45e,"id",this.id+i);this.domNode.insertBefore(_45e,this.nextButton);},this);var _45f=false;if(_45c._maxOptions&&_45c._maxOptions!=-1){if((_45c.start+_45c.count)<_45c._maxOptions){_45f=true;}else{if((_45c.start+_45c.count)>_45c._maxOptions&&_45c.count==_45b.length){_45f=true;}}}else{if(_45c.count==_45b.length){_45f=true;}}this.nextButton.style.display=_45f?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next");return this.domNode.childNodes;},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);}},_onMouseDown:function(evt){dojo.stopEvent(evt);},_onMouseUp:function(evt){if(evt.target===this.domNode||!this._highlighted_option){return;}else{if(evt.target==this.previousButton){this.onPage(-1);}else{if(evt.target==this.nextButton){this.onPage(1);}else{var tgt=evt.target;while(!tgt.item){tgt=tgt.parentNode;}this._setValueAttr({target:tgt},true);}}}},_onMouseOver:function(evt){if(evt.target===this.domNode){return;}var tgt=evt.target;if(!(tgt==this.previousButton||tgt==this.nextButton)){while(!tgt.item){tgt=tgt.parentNode;}}this._focusOptionNode(tgt);},_onMouseOut:function(evt){if(evt.target===this.domNode){return;}this._blurOptionNode();},_focusOptionNode:function(node){if(this._highlighted_option!=node){this._blurOptionNode();this._highlighted_option=node;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected");}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null;}},_highlightNextOption:function(){if(!this.getHighlightedOption()){var fc=this.domNode.firstChild;this._focusOptionNode(fc.style.display=="none"?fc.nextSibling:fc);}else{var ns=this._highlighted_option.nextSibling;if(ns&&ns.style.display!="none"){this._focusOptionNode(ns);}else{this.highlightFirstOption();}}dojo.window.scrollIntoView(this._highlighted_option);},highlightFirstOption:function(){var _460=this.domNode.firstChild;var _461=_460.nextSibling;this._focusOptionNode(_461.style.display=="none"?_460:_461);dojo.window.scrollIntoView(this._highlighted_option);},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dojo.window.scrollIntoView(this._highlighted_option);},_highlightPrevOption:function(){if(!this.getHighlightedOption()){var lc=this.domNode.lastChild;this._focusOptionNode(lc.style.display=="none"?lc.previousSibling:lc);}else{var ps=this._highlighted_option.previousSibling;if(ps&&ps.style.display!="none"){this._focusOptionNode(ps);}else{this.highlightLastOption();}}dojo.window.scrollIntoView(this._highlighted_option);},_page:function(up){var _462=0;var _463=this.domNode.scrollTop;var _464=dojo.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption();}while(_462<_464){if(up){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break;}this._highlightPrevOption();}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break;}this._highlightNextOption();}var _465=this.domNode.scrollTop;_462+=(_465-_463)*(up?-1:1);_463=_465;}},pageUp:function(){this._page(true);},pageDown:function(){this._page(false);},getHighlightedOption:function(){var ho=this._highlighted_option;return (ho&&ho.parentNode)?ho:null;},handleKey:function(key){switch(key){case dojo.keys.DOWN_ARROW:this._highlightNextOption();break;case dojo.keys.PAGE_DOWN:this.pageDown();break;case dojo.keys.UP_ARROW:this._highlightPrevOption();break;case dojo.keys.PAGE_UP:this.pageUp();break;}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(_466,_467,_468){this.item=null;if(!_466){_466="";}dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,_466,_467,_468);}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(root){this.root=root;if(root.tagName!="SELECT"&&root.firstChild){root=dojo.query("select",root);if(root.length>0){root=root[0];}else{this.root.innerHTML="<SELECT>"+this.root.innerHTML+"</SELECT>";root=this.root.firstChild;}this.root=root;}dojo.query("> option",root).forEach(function(node){node.innerHTML=dojo.trim(node.innerHTML);});},getValue:function(item,_469,_46a){return (_469=="value")?item.value:(item.innerText||item.textContent||"");},isItemLoaded:function(_46b){return true;},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true};},_fetchItems:function(args,_46c,_46d){if(!args.query){args.query={};}if(!args.query.name){args.query.name="";}if(!args.queryOptions){args.queryOptions={};}var _46e=dojo.data.util.filter.patternToRegExp(args.query.name,args.queryOptions.ignoreCase),_46f=dojo.query("> option",this.root).filter(function(_470){return (_470.innerText||_470.textContent||"").match(_46e);});if(args.sort){_46f.sort(dojo.data.util.sorter.createSortFunction(args.sort,this));}_46c(_46f,args);},close:function(_471){return;},getLabel:function(item){return item.innerHTML;},getIdentity:function(item){return dojo.attr(item,"value");},fetchItemByIdentity:function(args){var item=dojo.query("> option[value='"+args.identity+"']",this.root)[0];args.onItem(item);},fetchSelectedItem:function(){var root=this.root,si=root.selectedIndex;return typeof si=="number"?dojo.query("> option:nth-child("+(si!=-1?si+1:1)+")",root)[0]:null;}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(_472){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_472.url;this._ccUrl=_472.url;this.url=_472.url;this._jsonData=_472.data;this.data=null;this._datatypeMap=_472.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_473){return dojo.date.stamp.fromISOString(_473);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_472.urlPreventCache!==undefined){this.urlPreventCache=_472.urlPreventCache?true:false;}if(_472.hierarchical!==undefined){this.hierarchical=_472.hierarchical?true:false;}if(_472.clearOnClose){this.clearOnClose=true;}if("failOk" in _472){this.failOk=_472.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");}},_assertIsAttribute:function(_474){if(typeof _474!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");}},getValue:function(item,_475,_476){var _477=this.getValues(item,_475);return (_477.length>0)?_477[0]:_476;},getValues:function(item,_478){this._assertIsItem(item);this._assertIsAttribute(_478);return (item[_478]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _479=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_479.push(key);}}return _479;},hasAttribute:function(item,_47a){this._assertIsItem(item);this._assertIsAttribute(_47a);return (_47a in item);},containsValue:function(item,_47b,_47c){var _47d=undefined;if(typeof _47c==="string"){_47d=dojo.data.util.filter.patternToRegExp(_47c,false);}return this._containsValue(item,_47b,_47c,_47d);},_containsValue:function(item,_47e,_47f,_480){return dojo.some(this.getValues(item,_47e),function(_481){if(_481!==null&&!dojo.isObject(_481)&&_480){if(_481.toString().match(_480)){return true;}}else{if(_47f===_481){return true;}}});},isItem:function(_482){if(_482&&_482[this._storeRefPropName]===this){if(this._arrayOfAllItems[_482[this._itemNumPropName]]===_482){return true;}}return false;},isItemLoaded:function(_483){return this.isItem(_483);},loadItem:function(_484){this._assertIsItem(_484.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_fetchItems:function(_485,_486,_487){var self=this,_488=function(_489,_48a){var _48b=[],i,key;if(_489.query){var _48c,_48d=_489.queryOptions?_489.queryOptions.ignoreCase:false;var _48e={};for(key in _489.query){_48c=_489.query[key];if(typeof _48c==="string"){_48e[key]=dojo.data.util.filter.patternToRegExp(_48c,_48d);}else{if(_48c instanceof RegExp){_48e[key]=_48c;}}}for(i=0;i<_48a.length;++i){var _48f=true;var _490=_48a[i];if(_490===null){_48f=false;}else{for(key in _489.query){_48c=_489.query[key];if(!self._containsValue(_490,key,_48c,_48e[key])){_48f=false;}}}if(_48f){_48b.push(_490);}}_486(_48b,_489);}else{for(i=0;i<_48a.length;++i){var item=_48a[i];if(item!==null){_48b.push(item);}}_486(_48b,_489);}};if(this._loadFinished){_488(_485,this._getItemsArray(_485.queryOptions));}else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_485,filter:_488});}else{this._loadInProgress=true;var _491={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _492=dojo.xhrGet(_491);_492.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_488(_485,self._getItemsArray(_485.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_487(e,_485);}});_492.addErrback(function(_493){self._loadInProgress=false;_487(_493,_485);});var _494=null;if(_485.abort){_494=_485.abort;}_485.abort=function(){var df=_492;if(df&&df.fired===-1){df.cancel();df=null;}if(_494){_494.call(_485);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_488(_485,this._getItemsArray(_485.queryOptions));}catch(e){_487(e,_485);}}else{_487(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_485);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _495=this._queuedFetches[i],_496=_495.args,_497=_495.filter;if(_497){_497(_496,this._getItemsArray(_496.queryOptions));}else{this.fetchItemByIdentity(_496);}}this._queuedFetches=[];}},_getItemsArray:function(_498){if(_498&&_498.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_499){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_49a){var _49b=false,self=this;function _49c(_49d){var _49e=((_49d!==null)&&(typeof _49d==="object")&&(!dojo.isArray(_49d)||_49b)&&(!dojo.isFunction(_49d))&&(_49d.constructor==Object||dojo.isArray(_49d))&&(typeof _49d._reference==="undefined")&&(typeof _49d._type==="undefined")&&(typeof _49d._value==="undefined")&&self.hierarchical);return _49e;};function _49f(_4a0){self._arrayOfAllItems.push(_4a0);for(var _4a1 in _4a0){var _4a2=_4a0[_4a1];if(_4a2){if(dojo.isArray(_4a2)){var _4a3=_4a2;for(var k=0;k<_4a3.length;++k){var _4a4=_4a3[k];if(_49c(_4a4)){_49f(_4a4);}}}else{if(_49c(_4a2)){_49f(_4a2);}}}}};this._labelAttr=_49a.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_49a.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(dojo.isArray(item)){_49b=true;}_49f(item);item[this._rootItemPropName]=true;}var _4a5={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _4a6=item[key];if(_4a6!==null){if(!dojo.isArray(_4a6)){item[key]=[_4a6];}}else{item[key]=[null];}}_4a5[key]=key;}}while(_4a5[this._storeRefPropName]){this._storeRefPropName+="_";}while(_4a5[this._itemNumPropName]){this._itemNumPropName+="_";}while(_4a5[this._reverseRefMap]){this._reverseRefMap+="_";}var _4a7;var _4a8=_49a.identifier;if(_4a8){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_4a8;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_4a7=item[_4a8];var _4a9=_4a7[0];if(!this._itemsByIdentity[_4a9]){this._itemsByIdentity[_4a9]=item;}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_4a8+"].  Value collided: ["+_4a9+"]");}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_4a8+"].  Value collided: ["+_4a9+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_4a7=item[key];for(var j=0;j<_4a7.length;++j){_4a6=_4a7[j];if(_4a6!==null&&typeof _4a6=="object"){if(("_type" in _4a6)&&("_value" in _4a6)){var type=_4a6._type;var _4aa=this._datatypeMap[type];if(!_4aa){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(dojo.isFunction(_4aa)){_4a7[j]=new _4aa(_4a6._value);}else{if(dojo.isFunction(_4aa.deserialize)){_4a7[j]=_4aa.deserialize(_4a6._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_4a6._reference){var _4ab=_4a6._reference;if(!dojo.isObject(_4ab)){_4a7[j]=this._getItemByIdentity(_4ab);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _4ac=this._arrayOfAllItems[k],_4ad=true;for(var _4ae in _4ab){if(_4ac[_4ae]!=_4ab[_4ae]){_4ad=false;}}if(_4ad){_4a7[j]=_4ac;}}}if(this.referenceIntegrity){var _4af=_4a7[j];if(this.isItem(_4af)){this._addReferenceToMap(_4af,item,key);}}}else{if(this.isItem(_4a6)){if(this.referenceIntegrity){this._addReferenceToMap(_4a6,item,key);}}}}}}}},_addReferenceToMap:function(_4b0,_4b1,_4b2){},getIdentity:function(item){var _4b3=this._features["dojo.data.api.Identity"];if(_4b3===Number){return item[this._itemNumPropName];}else{var _4b4=item[_4b3];if(_4b4){return _4b4[0];}}return null;},fetchItemByIdentity:function(_4b5){var item,_4b6;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_4b5});}else{this._loadInProgress=true;var _4b7={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _4b8=dojo.xhrGet(_4b7);_4b8.addCallback(function(data){var _4b9=_4b5.scope?_4b5.scope:dojo.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_4b5.identity);if(_4b5.onItem){_4b5.onItem.call(_4b9,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_4b5.onError){_4b5.onError.call(_4b9,error);}}});_4b8.addErrback(function(_4ba){self._loadInProgress=false;if(_4b5.onError){var _4bb=_4b5.scope?_4b5.scope:dojo.global;_4b5.onError.call(_4bb,_4ba);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_4b5.identity);if(_4b5.onItem){_4b6=_4b5.scope?_4b5.scope:dojo.global;_4b5.onItem.call(_4b6,item);}}}}else{item=this._getItemByIdentity(_4b5.identity);if(_4b5.onItem){_4b6=_4b5.scope?_4b5.scope:dojo.global;_4b5.onItem.call(_4b6,item);}}},_getItemByIdentity:function(_4bc){var item=null;if(this._itemsByIdentity){item=this._itemsByIdentity[_4bc];}else{item=this._arrayOfAllItems[_4bc];}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _4bd=this._features["dojo.data.api.Identity"];if(_4bd===Number){return null;}else{return [_4bd];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _4be={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _4bf=dojo.xhrGet(_4be);_4bf.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_4bf.addErrback(function(_4c0){throw _4c0;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["agi.classes.Adopter"]){dojo._hasResource["agi.classes.Adopter"]=true;dojo.provide("agi.classes.Adopter");dojo.declare("agi.classes.Adopter",[agi.classes.Identified],{constructor:function(_4c1){if(dojo.isObject(_4c1)){dojo.mixin(this,_4c1);this.postMixInProperties();}},postMixInProperties:function(){return;}});}if(!dojo._hasResource["ag.classes.Adopter"]){dojo._hasResource["ag.classes.Adopter"]=true;dojo.provide("ag.classes.Adopter");ag.classes.Adopter=agi.classes.Adopter;}if(!dojo._hasResource["ag.widget.SearchBox"]){dojo._hasResource["ag.widget.SearchBox"]=true;dojo.provide("ag.widget.SearchBox");dojo.declare("ag.widget.SearchBox",[ag.classes.Adopter],function(){var self={};var d=dojo;d.mixin(self,{searchInput:null,searchNode:null,dataUrl:null,dataStore:null,searchFormId:null,searchFormNode:null,searchInputId:"ag-searchtext",searchWidgetId:null,searchInputName:"strSearch",hasDownArrow:false,isStarted:false,StoreClass:d.data.ItemFileReadStore,ComboBoxClass:dijit.form.ComboBox,SEARCH_ATTR:"d",SEARCH_DELAY:100,SEARCH_AUTOCOMPLETE:false});self.constructor=function(){};self.startup=function(){if(dijit.byId(this.searchWidgetId)||this.isStarted){return;}this.getDataStore();if(!this.dataStore){return;}this.getSearchNodes();this.connectEvents();this.isStarted=true;};self.getDataStore=function(){this.dataStore=new this.StoreClass({url:this.dataUrl});};self.getSearchNodes=function(){var _4c2={id:this.searchWidgetId,name:this.searchInputName,searchAttr:this.SEARCH_ATTR,hasDownArrow:this.hasDownArrow,searchDelay:this.SEARCH_DELAY,autoComplete:this.SEARCH_AUTOCOMPLETE,store:this.dataStore};this.searchNode=dojo.byId(this.searchInputId);if(this.searchNode){this.searchInput=new this.ComboBoxClass(_4c2,this.searchNode);this.dataStore._forceLoad();this.dataStore.fetch({onError:d.hitch(this,this.dataLoadFailHandler)});}else{}this.searchButton=dojo.byId(this.searchButtonId);this.searchFormNode=dojo.byId(this.searchFormId);};self.dataLoadFailHandler=function(_4c3,_4c4){var _4c5=function(){return;};this.searchInput.disabled=true;for(attr in this.searchInput){if(d.isString(attr)){if(attr.startswith("on")||attr.startswith("_on")){this.searchInput[attr]=_4c5;}}}this.dataStore=null;d.disconnect(this.onKeypressHandle);};self.handleOnKeypress=function(evt){if(evt.altKey||evt.ctrlKey&&evt.charCode!=118){return;}else{if(this.searchInput._isShowingNow){return;}else{if(evt.keyCode==d.keys.ENTER){this.searchSubmitCallback();}}}};self.connectEvents=function(){this.onKeypressHandle=d.connect(this.searchInput,"_onKeyPress",this,this.handleOnKeypress);};return self;}());}if(!dojo._hasResource["ag.search.Searcher"]){dojo._hasResource["ag.search.Searcher"]=true;dojo.provide("ag.search.Searcher");dojo.declare("ag.search.Searcher",[ag.classes.Adopter],{searchBox:null,searchPage:null,errMsg:null,widgId:null,locId:null,searchButtonId:null,isStarted:false,_onBlurHandle:null,_onFocusHandle:null,SEARCHBOX_STYLE:{border:"2px solid #ff0000",background:"#FFDDDD"},DEFAULT_SEARCH_PAGE:"/ecards/search.pd",startup:function(){this.searchBox=dojo.byId(this.widgId);this.searchButton=dojo.byId(this.searchButtonId);var _4c6=dojo.byId(this.locId);if(_4c6){this.searchPage=_4c6.value;}else{this.searchPage=this.DEFAULT_SEARCH_PAGE;}this.attachEvents();},onBlur:function(){if(this.searchBox&&(this.searchBox.value==="")){this.searchBox.value=this.errMsg;}},onFocus:function(){if(this.searchBox&&(this.searchBox.value==this.errMsg)){this.searchBox.value="";}},attachEvents:function(){if(this.searchButton){this._doSearchHandle=dojo.connect(this.searchButton,"onclick",this,this.doSearch);}if(this.searchBox){this._onBlurHandle=dojo.connect(this.searchBox,"onblur",this,this.onBlur);this._onFocusHandle=dojo.connect(this.searchBox,"onfocus",this,this.onFocus);}},highlightSearchBox:function(){if(this.searchBox){dojo.style(this.searchBox,this.SEARCHBOX_STYLE);this.searchBox.value=this.errMsg;this.searchBox.blur();}},sendToThisPage:function(){if(!this.searchBox){return;}var _4c7=this.searchPage+"?strSearch="+escape(this.searchBox.value);if(dojo.byId("lpage")){_4c7=_4c7+"&lpage="+escape(dojo.byId("lpage").value);}window.document.location.href=_4c7;},doSearch:function(evt){try{if(!this.searchBox){return;}if((!this.searchBox.value.length)||(this.searchBox.value==this.errMsg)){this.highlightSearchBox();}else{this.sendToThisPage();}return false;}catch(e){return false;}}});}if(!dojo._hasResource["agi.classes.Controller"]){dojo._hasResource["agi.classes.Controller"]=true;dojo.provide("agi.classes.Controller");dojo.declare("agi.classes.Controller",[agi.classes.Adopter],function(){var self={};dojo.mixin(self,{__culprit__:"$Author: dbuch $"});return self;}());}if(!dojo._hasResource["agi.classes._Mixin"]){dojo._hasResource["agi.classes._Mixin"]=true;dojo.provide("agi.classes._Mixin");dojo.declare("agi.classes._Mixin",[agi.classes.Controller],{__culprit__:"$Author: dbuch $"});}if(!dojo._hasResource["ag.classes._Mixin"]){dojo._hasResource["ag.classes._Mixin"]=true;dojo.provide("ag.classes._Mixin");ag.classes._Mixin=agi.classes._Mixin;}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_4c8,_4c9){var _4ca=this.containerNode;if(_4c9&&typeof _4c9=="number"){var _4cb=this.getChildren();if(_4cb&&_4cb.length>=_4c9){_4ca=_4cb[_4c9-1].domNode;_4c9="after";}}dojo.place(_4c8.domNode,_4ca,_4c9);if(this._started&&!_4c8._started){_4c8.startup();}},removeChild:function(_4cc){if(typeof _4cc=="number"&&_4cc>0){_4cc=this.getChildren()[_4cc];}if(_4cc){var node=_4cc.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},destroyDescendants:function(_4cd){dojo.forEach(this.getChildren(),function(_4ce){_4ce.destroyRecursive(_4cd);});},_getSiblingOfChild:function(_4cf,dir){var node=_4cf.domNode,_4d0=(dir>0?"nextSibling":"previousSibling");do{node=node[_4d0];}while(node&&(node.nodeType!=1||!dijit.byNode(node)));return node&&dijit.byNode(node);},getIndexOfChild:function(_4d1){return dojo.indexOf(this.getChildren(),_4d1);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_4d2){_4d2.startup();});this.inherited(arguments);}});}if(!dojo._hasResource["dijit._HasDropDown"]){dojo._hasResource["dijit._HasDropDown"]=true;dojo.provide("dijit._HasDropDown");dojo.declare("dijit._HasDropDown",null,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}this._docHandler=this.connect(dojo.doc,"onmouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _4d3=this.dropDown,_4d4=false;if(e&&this._opened){var c=dojo.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_4d4){if(dojo.hasClass(t,"dijitPopup")){_4d4=true;}else{t=t.parentNode;}}if(_4d4){t=e.target;if(_4d3.onItemClick){var _4d5;while(t&&!(_4d5=dijit.byNode(t))){t=t.parentNode;}if(_4d5&&_4d5.onClick&&_4d5.getParent){_4d5.getParent().onItemClick(_4d5,e);}}return;}}}if(this._opened&&_4d3.focus){window.setTimeout(dojo.hitch(_4d3,"focus"),1);}},_onDropDownClick:function(e){if(this._stopClickEvents){dojo.stopEvent(e);}},_setupDropdown:function(){this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;this._aroundNode=this._aroundNode||this.domNode;this.connect(this._buttonNode,"onmousedown","_onDropDownMouseDown");this.connect(this._buttonNode,"onclick","_onDropDownClick");this.connect(this._buttonNode,"onkeydown","_onDropDownKeydown");this.connect(this._buttonNode,"onkeyup","_onKey");if(this._setStateClass){this.connect(this,"openDropDown","_setStateClass");this.connect(this,"closeDropDown","_setStateClass");}var _4d6={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";dojo.addClass(this._arrowWrapperNode||this._buttonNode,"dijit"+_4d6+"ArrowButton");},postCreate:function(){this._setupDropdown();this.inherited(arguments);},destroyDescendants:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onDropDownKeydown:function(e){if(e.keyCode==dojo.keys.DOWN_ARROW||e.keyCode==dojo.keys.ENTER||e.keyCode==dojo.keys.SPACE){e.preventDefault();}},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){return;}}if(d&&this._opened&&e.keyCode==dojo.keys.ESCAPE){this.toggleDropDown();}else{if(d&&!this._opened&&(e.keyCode==dojo.keys.DOWN_ARROW||e.keyCode==dojo.keys.ENTER||e.keyCode==dojo.keys.SPACE)){this.toggleDropDown();if(d.focus){setTimeout(dojo.hitch(d,"focus"),1);}}}},_onBlur:function(){this.closeDropDown();this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_4d7){_4d7();},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}this.focus();var _4d8=this.dropDown;if(!_4d8){return;}if(!this._opened){if(!this.isLoaded()){this.loadDropDown(dojo.hitch(this,"openDropDown"));return;}else{this.openDropDown();}}else{this.closeDropDown();}},openDropDown:function(){var _4d9=this.dropDown;var _4da=_4d9.domNode;var self=this;if(!this._preparedNode){dijit.popup.moveOffScreen(_4da);this._preparedNode=true;if(_4da.style.width){this._explicitDDWidth=true;}if(_4da.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _4db={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_4db.width="";}if(!this._explicitDDHeight){_4db.height="";}dojo.style(_4da,_4db);var mb=dojo.marginBox(_4da);var _4dc=(this.maxHeight&&mb.h>this.maxHeight);dojo.style(_4da,{overflowX:"hidden",overflowY:_4dc?"auto":"hidden"});if(_4dc){mb.h=this.maxHeight;if("w" in mb){mb.w+=16;}}else{delete mb.h;}delete mb.t;delete mb.l;if(this.forceWidth){mb.w=this.domNode.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,this.domNode.offsetWidth);}else{delete mb.w;}}if(dojo.isFunction(_4d9.resize)){_4d9.resize(mb);}else{dojo.marginBox(_4da,mb);}}var _4dd=dijit.popup.open({parent:this,popup:_4d9,around:this._aroundNode,orient:dijit.getPopupAroundAlignment((this.dropDownPosition&&this.dropDownPosition.length)?this.dropDownPosition:["below"],this.isLeftToRight()),onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){dojo.attr(self._popupStateNode,"popupActive",false);dojo.removeClass(self._popupStateNode,"dijitHasDropDownOpen");self._opened=false;self.state="";}});dojo.attr(this._popupStateNode,"popupActive","true");dojo.addClass(self._popupStateNode,"dijitHasDropDownOpen");this._opened=true;this.state="Opened";return _4dd;},closeDropDown:function(_4de){if(this._opened){if(_4de){this.focus();}dijit.popup.close(this.dropDown);this._opened=false;this.state="";}}});}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:dojo.cache("dijit.form","templates/Button.html","<span class=\"dijit dijitReset dijitInline\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdojoAttachEvent=\"ondijitclick:_onButtonClick\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"titleNode,focusNode\"\n\t\t\twaiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" dojoAttachPoint=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdojoAttachPoint=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\tdojoAttachPoint=\"valueNode\"\n/></span>\n"),attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"valueNode",iconClass:{node:"iconNode",type:"class"}}),_onClick:function(e){if(this.disabled){return false;}this._clicked();return this.onClick(e);},_onButtonClick:function(e){if(this._onClick(e)===false){e.preventDefault();}else{if(this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _4df=dijit.byNode(node);if(_4df&&typeof _4df._onSubmit=="function"){_4df._onSubmit(e);break;}}}else{if(this.valueNode){this.valueNode.click();e.preventDefault();}}}},_fillContent:function(_4e0){if(_4e0&&(!this.params||!("label" in this.params))){this.set("label",_4e0.innerHTML);}},postCreate:function(){dojo.setSelectable(this.focusNode,false);this.inherited(arguments);},_setShowLabelAttr:function(val){if(this.containerNode){dojo.toggleClass(this.containerNode,"dijitDisplayNone",!val);}this.showLabel=val;},onClick:function(e){return true;},_clicked:function(e){},setLabel:function(_4e1){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_4e1);},_setLabelAttr:function(_4e2){this.containerNode.innerHTML=this.label=_4e2;if(this.showLabel==false&&!this.params.title){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container,dijit._HasDropDown],{baseClass:"dijitDropDownButton",templateString:dojo.cache("dijit.form","templates/DropDownButton.html","<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdojoAttachEvent=\"ondijitclick:_onButtonClick\" dojoAttachPoint=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\twaiRole=\"button\" waiState=\"haspopup-true,labelledby-${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdojoAttachPoint=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdojoAttachPoint=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\tdojoAttachPoint=\"valueNode\"\n/></span>\n"),_fillContent:function(){if(this.srcNodeRef){var _4e3=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,_4e3[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown){var _4e4=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(_4e4);delete this.dropDownContainer;}dijit.popup.moveOffScreen(this.dropDown.domNode);this.inherited(arguments);},isLoaded:function(){var _4e5=this.dropDown;return (!_4e5.href||_4e5.isLoaded);},loadDropDown:function(){var _4e6=this.dropDown;if(!_4e6){return;}if(!this.isLoaded()){var _4e7=dojo.connect(_4e6,"onLoad",this,function(){dojo.disconnect(_4e7);this.openDropDown();});_4e6.refresh();}else{this.openDropDown();}},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:dojo.cache("dijit.form","templates/ComboButton.html","<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' waiRole=\"presentation\"\n\t><tbody waiRole=\"presentation\"><tr waiRole=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" dojoAttachPoint=\"buttonNode\" dojoAttachEvent=\"ondijitclick:_onButtonClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"titleNode\"\n\t\t\twaiRole=\"button\" waiState=\"labelledby-${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" dojoAttachPoint=\"iconNode\" waiRole=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" dojoAttachPoint=\"containerNode\" waiRole=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdojoAttachPoint=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdojoAttachEvent=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\twaiRole=\"button\" waiState=\"haspopup-true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" waiRole=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" waiRole=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" dojoAttachPoint=\"valueNode\"\n\t\t/></td></tr></tbody\n></table>\n"),attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"],title:"titleNode"}),optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){dijit.focus(this._popupStateNode);dojo.stopEvent(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){dijit.focus(this.titleNode);dojo.stopEvent(evt);}},focus:function(_4e8){dijit.focus(_4e8=="start"?this.titleNode:this._popupStateNode);}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(evt){this.set("checked",!this.checked);},_setCheckedAttr:function(_4e9,_4ea){this.checked=_4e9;dojo.attr(this.focusNode||this.domNode,"checked",_4e9);dijit.setWaiState(this.focusNode||this.domNode,"pressed",_4e9);this._handleOnChange(_4e9,_4ea);},setChecked:function(_4eb){dojo.deprecated("setChecked("+_4eb+") is deprecated. Use set('checked',"+_4eb+") instead.","","2.0");this.set("checked",_4eb);},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton");}if(!dojo._hasResource["dijit.form.CheckBox"]){dojo._hasResource["dijit.form.CheckBox"]=true;dojo.provide("dijit.form.CheckBox");dojo.declare("dijit.form.CheckBox",dijit.form.ToggleButton,{templateString:dojo.cache("dijit.form","templates/CheckBox.html","<div class=\"dijit dijitReset dijitInline\" waiRole=\"presentation\"\n\t><input\n\t \t${!nameAttrSetting} type=\"${type}\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdojoAttachPoint=\"focusNode\"\n\t \tdojoAttachEvent=\"onclick:_onClick\"\n/></div>\n"),baseClass:"dijitCheckBox",type:"checkbox",value:"on",readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{readOnly:"focusNode"}),_setReadOnlyAttr:function(_4ec){this.readOnly=_4ec;dojo.attr(this.focusNode,"readOnly",_4ec);dijit.setWaiState(this.focusNode,"readonly",_4ec);},_setValueAttr:function(_4ed,_4ee){if(typeof _4ed=="string"){this.value=_4ed;dojo.attr(this.focusNode,"value",_4ed);_4ed=true;}if(this._created){this.set("checked",_4ed,_4ee);}},_getValueAttr:function(){return (this.checked?this.value:false);},_setLabelAttr:undefined,postMixInProperties:function(){if(this.value==""){this.value="on";}this.checkedAttrSetting=this.checked?"checked":"";this.inherited(arguments);},_fillContent:function(_4ef){},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);this.value=this.params.value||"on";dojo.attr(this.focusNode,"value",this.value);},_onFocus:function(){if(this.id){dojo.query("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}this.inherited(arguments);},_onBlur:function(){if(this.id){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}this.inherited(arguments);},_onClick:function(e){if(this.readOnly){return false;}return this.inherited(arguments);}});dojo.declare("dijit.form.RadioButton",dijit.form.CheckBox,{type:"radio",baseClass:"dijitRadio",_setCheckedAttr:function(_4f0){this.inherited(arguments);if(!this._created){return;}if(_4f0){var _4f1=this;dojo.query("INPUT[type=radio]",this.focusNode.form||dojo.doc).forEach(function(_4f2){if(_4f2.name==_4f1.name&&_4f2!=_4f1.focusNode&&_4f2.form==_4f1.focusNode.form){var _4f3=dijit.getEnclosingWidget(_4f2);if(_4f3&&_4f3.checked){_4f3.set("checked",false);}}});}},_clicked:function(e){if(!this.checked){this.set("checked",true);}}});}if(!dojo._hasResource["ag.search.SearchMixin"]){dojo._hasResource["ag.search.SearchMixin"]=true;dojo.provide("ag.search.SearchMixin");dojo.declare("ag.search.SearchMixin",[ag.classes._Mixin],function(){var self={};var d=dojo;d.mixin(self,{khost:null,searchInputs:{},searchInputIds:[],searchFormIds:[],searchProductLines:[],searchIsAutocomplete:true,_searchOnSubmitHandles:[],SearchBoxClass:ag.widget.SearchBox,SearcherClass:ag.search.Searcher,SearchDataStoreClass:d.data.ItemFileReadStore,SEARCH_DIMS_FILE:"dims.txt",SEARCH_BOX_ID:"ag-searchtext",SEARCH_BOX_PREFIX:"ag-searchtext-",SEARCH_BUTTON_PREFIX:"ag-search-submit-",SEARCH_SUBMIT_SUFFIX:"-actual",SEARCH_INPUT_NAME:"strSearch",SEARCH_LOC_PREFIX:"ag-searcharea-",SEARCH_LOC_ID:"ag-searcharea",SEARCH_FORM_PREFIX:"search-",SEARCH_ERROR:"Enter Search Here",SEARCH_MSN_ACTION:"http://search.msn.com/results.aspx",SEARCH_MSN_FORM:"msn-search",SEARCH_MSN_AG_BUTTON:"msn-agsearch",SEARCH_MSN_SEARCH_INPUT:"q",SEARCH_CLASS_HIDDEN:"hidden"});self.constructor=function(){var p=agx.currentPage;this.khost=p.khost;if(!this.khost){var loc=window.location;this.khost=[loc.protocol,loc.host].join("//");}this._searchLastDitchTimeouts={};this.searchIsAutocomplete=p.searchIsAutocomplete;this.searchProductLines=p.searchProductLines;if(!this.searchProductLines){this.searchProductLines=["ecards-nav"];}else{if(dojo.indexOf(this.searchProductLines,"ecards-nav")==-1){this.searchProductLines.push("ecards-nav");}}if(!this.searchProductLines){this.searchProductLines=["printables-nav"];}else{if(dojo.indexOf(this.searchProductLines,"printables-nav")==-1){this.searchProductLines.push("printables-nav");}}this.searchGetSearchInputs();};self.searchGetSearchInputs=function(){dojo.forEach(this.searchProductLines,function(p){var _4f4=this.searchInputs[p]={};_4f4.canActivate=false;var _4f5=this.SEARCH_FORM_PREFIX+p;var _4f6=this.SEARCH_BUTTON_PREFIX+p;var _4f7=_4f6+this.SEARCH_SUBMIT_SUFFIX;this.searchSwapSubmitButton(_4f4,_4f6,_4f7);if(!_4f4.canActivate){return;}var _4f8=this.SEARCH_BOX_PREFIX+p;var _4f9=this.SEARCH_LOC_PREFIX+p;var _4fa="widget-"+_4f8;var _4fb=dojo.hitch(this,function(){this.searchSubmit(p);});var _4fc={dataUrl:"/"+[p.replace("-nav",""),this.SEARCH_DIMS_FILE].join("/"),searchInputId:_4f8,searchWidgetId:_4fa,searchInputName:this.SEARCH_INPUT_NAME,searchFormId:_4f5,searchButtonId:_4f6,searchSubmitCallback:_4fb,productLine:p};if(this.searchIsAutocomplete){_4fc.SEARCH_AUTOCOMPLETE=true;}var _4fd=new this.SearchBoxClass(_4fc);_4fd.startup();var _4fe={widgId:_4fa,locId:_4f9,buttonId:_4f6};var _4ff=this.searchGetSearcher(_4fe);dojo.mixin(this.searchInputs[p],{input:_4fd,searcher:_4ff});this.searchInputIds.push(_4f8);this.searchFormIds.push(_4f5);_4ff.startup();},this);return true;};self.searchSwapSubmitButton=function(_500,_501,_502){_500.canActivate=true;};self.searchGetSearcher=function(_503){var _504={widgId:_503.widgId||this.SEARCH_BOX_ID,locId:_503.locId||this.SEARCH_LOC_ID,searchButtonId:_503.buttonId,errMsg:_503.errMsg||this.SEARCH_ERROR};var _505=new this.SearcherClass(_504);_505.startup();return _505;};self.searchFocus=function(){var node=dojo.byId(this.searchInputIds[0]);if(node){node.focus();}};self.searchSubmit=function(_506){var _507={};return this.searchInputs[_506].searcher.doSearch(_507);};self.searchSubmitMSN=function(_508){if(_508=="ag"){try{search_params={buttonId:this.SEARCH_MSN_AG_BUTTON};if(this.searchProductLines){search_params["locId"]=this.SEARCH_LOC_PREFIX+this.searchProductLines[0];}var _509=this.searchGetSearcher(search_params);_509.searchBox=dojo.byId(this.SEARCH_MSN_SEARCH_INPUT);_509.doSearch({});}catch(e){return false;}}else{if(_508=="msn"){try{var form=dojo.doc.forms[this.SEARCH_MSN_FORM];form.action=this.SEARCH_MSN_ACTION;form.submit();}catch(er){return false;}}}};self.searchMSNSubmit=self.searchSubmitMSN;return self;}());}if(!dojo._hasResource["ag.util"]){dojo._hasResource["ag.util"]=true;dojo.provide("ag.util");ag.util=agi.util;}if(!dojo._hasResource["ag._base"]){dojo._hasResource["ag._base"]=true;dojo.provide("ag._base");dojo.provide("ag.registry");ag.registry=agi.registry;ag.byId=agi.byId;ag.listAll=agi.listAll;ag._loadedResources=ag._loadedResources;ag._mimeMap=agi._mimeMap;ag.requireJs=agi.requireJs;ag.requireCss=agi.requireCss;ag.require=agi.require;}if(!dojo._hasResource["agi.classes.Publisher"]){dojo._hasResource["agi.classes.Publisher"]=true;dojo.provide("agi.classes.Publisher");dojo.declare("agi.classes.Publisher",[agi.classes.Identified],{isBuilt:false,buildBeginEvent:null,_buildBeginTimer:null,buildCompleteEvent:null,_buildCompleteTimer:null,_publishHasEvents:false,BUILD_BEGIN_EVENT_TMPL:"/${id}/build/begin/",BUILD_COMPLETE_EVENT_TMPL:"/${id}/build/complete/",postMixInProperties:function(){this.buildEventTopics();},buildEventTopics:function(){this.buildBeginEvent=this.BUILD_BEGIN_EVENT_TMPL.toString().replace("${id}",this.id);this.buildCompleteEvent=this.BUILD_COMPLETE_EVENT_TMPL.toString().replace("${id}",this.id);},publishBuildBegin:function(){this._buildBeginTimer=new Date().getTime();dojo.publish(this.buildBeginEvent,[{message:this+" build started",time:this._buildBeginTimer,handle:this.buildBeginEvent}]);},publishBuildComplete:function(){this._buildCompleteTimer=new Date().getTime();dojo.publish(this.buildCompleteEvent,[{message:this+" build complete",time:this._buildCompleteTimer,total:(this._buildCompleteTimer-this._buildBeginTimer),handle:this.buildCompleteHandle}]);}});}if(!dojo._hasResource["ag.classes.Publisher"]){dojo._hasResource["ag.classes.Publisher"]=true;dojo.provide("ag.classes.Publisher");ag.classes.Publisher=agi.classes.Publisher;}if(!dojo._hasResource["ag.widget.Quickshop"]){dojo._hasResource["ag.widget.Quickshop"]=true;dojo.provide("ag.widget.Quickshop");dojo.declare("ag.widget.Quickshop",[ag.classes.Publisher],function(){var self={};dojo.mixin(self,{dataUrl:"/$productLine/quickshop.pd",_optionCache:{},_eventCache:{},XHR_TIMEOUT:30*1000,DUMMY_OPTION:"[Choose $label]",CLASS_HIDDEN:"hidden",OCCASION:"occasion",RECIPIENT:"recipient",SENTIMENT:"sentiment",OCCASION_ID:"qs-occasion-select-",RECIPIENT_ID:"qs-recipient-select-",SENTIMENT_ID:"qs-sentiment-select-",SUBMIT_BUTTON_ID:"qs-submit-button-"});self.constructor=function(args){if(dojo.isObject(args)){dojo.mixin(this,args);}this._optionCache={};this._eventCache={};this.data={};this.dataUrl=this.dataUrl.replace("$productLine",this.productLine);this.occasionSelect=dojo.byId(this.OCCASION_ID+this.productLine);this.recipientSelect=dojo.byId(this.RECIPIENT_ID+this.productLine);this.sentimentSelect=dojo.byId(this.SENTIMENT_ID+this.productLine);this.submitButton=dojo.byId(this.SUBMIT_BUTTON_ID+this.productLine);hasNecessaryNodes=dojo.every([this.occasionSelect,this.recipientSelect,this.sentimentSelect,this.submitButton],ag.util.isDef);if(!hasNecessaryNodes){return;}this.setupForm();};self.setupForm=function(){this._connectChange("occasion",this.occasionSelect);this._connectChange("recipient",this.recipientSelect);this._connectChange("sentiment",this.sentimentSelect);this.lockForm();this._xhrUpdate({},[this.RECIPIENT,this.SENTIMENT]);};self._connectChange=function(name,node){name+="Change";this._eventCache[name]=dojo.connect(node,"onchange",this,this.onChange);};self._xhrUpdate=function(_50a,_50b){var _50c={url:this.dataUrl,handleAs:"json",updateTargets:_50b,load:dojo.hitch(this,this._xhrHandleLoad),error:dojo.hitch(this,this._xhrHandleError),timeout:this.XHR_TIMEOUT,content:_50a?_50a:{}};dojo.xhrGet(_50c);};self._xhrHandleLoad=function(data,_50d){this.data=data;this.unlockForm();var _50e=_50d.args.updateTargets;var _50f=_50d.args.content;dojo.forEach(_50e,function(_510){var args={"caller":_510};dojo.mixin(args,_50f);this.buildDropDown(args);},this);if(this.data){this._unhideNode(this.recipientSelect.parentNode);this._unhideNode(this.sentimentSelect.parentNode);}};self._xhrHandleError=function(_511,_512){this.unlockForm();this._revertToStaticForm();};self._revertToStaticForm=function(){this._hideNode(this.recipientSelect.parentNode);this._hideNode(this.sentimentSelect.parentNode);dojo.forEach([this._eventCache.occasionChange,this._eventCache.recipientChange,this._eventCache.sentimentChange],dojo.disconnect);};self.onChange=function(evt){var _513={};var _514=[];this.lockForm();var _515=function(node){if(node.value&&node.value!="NULL"){_513[node.name]=node.value;}};var eid=evt.target.id;switch(eid){case this.OCCASION_ID+this.productLine:_514=[this.SENTIMENT,this.RECIPIENT];_515(this.occasionSelect);break;case this.RECIPIENT_ID+this.productLine:_514=[this.SENTIMENT];_515(this.occasionSelect);_515(this.recipientSelect);break;case this.SENTIMENT_ID+this.productLine:_514=[];_515(this.occasionSelect);_515(this.sentimentSelect);_515(this.recipientSelect);break;}this._xhrUpdate(_513,_514);};self.buildDropDown=function(args){var _516=args.caller+"Select";var _517=this[_516];if(!_517){return;}var _518={curValue:_517.value,opts:this.data[args.caller],selectNode:_517,isEmpty:true};dojo.mixin(_518,args);if(_518.opts){has_length=(_518.opts.length<=0);_518.isEmpty=has_length?true:false;}this._removeAllFromSelect(_517);this.addOptions(_518);};self._removeAllFromSelect=function(_519){if(!_519.options){return;}node_count=_519.options.length-1;for(var i=node_count;i>=0;i--){_519.remove(i);}};self.addOptions=function(args){args.isEmpty=args.isEmpty?args.isEmpty:true;var _51a=self._verifyDefaultNodes(args);if(!args.opts){return;}dojo.forEach(args.opts,function(pair,_51b){var key=pair[0];var _51c=pair[1];var _51d=[_51c,args.caller,args.selectNode.id].join("_");var _51e={text:key,"value":_51c,selectNode:args.selectNode,index:_51b+_51a,isSelected:(args.curValue&&_51c==args.curValue),"key":_51d};this._addOption(_51e);},this);};self._verifyDefaultNodes=function(args){var _51f=0;have_recipient=(args.selectNode.id==this.RECIPIENT_ID);have_sentiment=(args.selectNode.id==this.SENTIMENT_ID);if(args.isEmpty&&(have_recipient||have_sentiment)){var _520=ag.util.capitalize(args.caller);if(args.caller=="sentiment"){_520=ag.util.capitalize("tone");}var text=this.DUMMY_OPTION.replace("$label",_520);var _521={"text":text,value:"NULL",selectNode:args.selectNode,key:text,index:0};this._addOption(_521);_51f+=1;}return _51f;};self._addOption=function(args){if(!args.key){return;}var _522=this._createorGetOption(args);var _523=args.selectNode.options;if(_523&&_523.add){_523.add(_522,args.index);}else{args.selectNode.appendChild(_522);}if(_523&&args.isSelected){_523.selectedIndex=args.index;}};self._createorGetOption=function(args){var _524=null;if(!_524){_524=dojo.doc.createElement("option");_524.text=args.text.toLowerCase().replace("_"," ");_524.value=args.value;}return _524;};self.lockForm=function(){dojo.removeClass(this.submitButton,"submit");this.submitButton.disabled=true;dojo.forEach([this.occasionSelect,this.recipientSelect,this.sentimentSelect],this._hideNode);};self.unlockForm=function(){dojo.addClass(this.submitButton,"submit");this.submitButton.disabled=false;dojo.forEach([this.occasionSelect,this.recipientSelect,this.sentimentSelect],this._unhideNode);};self._hideNode=function(node){dojo.addClass(node,this.CLASS_HIDDEN);};self._unhideNode=function(node){dojo.removeClass(node,this.CLASS_HIDDEN);};return self;}());}if(!dojo._hasResource["ag.widget.QuickshopMultiMixin"]){dojo._hasResource["ag.widget.QuickshopMultiMixin"]=true;dojo.provide("ag.widget.QuickshopMultiMixin");dojo.declare("ag.widget.QuickshopMultiMixin",[ag.classes._Mixin],function(){var self={__culprit__:"$Author: mprugh $"};self.QuickshopWidgetClass=ag.widget.Quickshop;self.constructor=function(){var p=agx.currentPage;this.searchProductLines=p.searchProductLines;if(!this.searchProductLines){this.searchProductLines=["ecards-nav"];}else{if(dojo.indexOf(this.searchProductLines,"ecards-nav")==-1){this.searchProductLines.push("ecards-nav");}}if(!this.searchProductLines){this.searchProductLines=["printables-nav"];}else{if(dojo.indexOf(this.searchProductLines,"printables-nav")==-1){this.searchProductLines.push("printables-nav");}}this.quickshops={};dojo.forEach(this.searchProductLines,function(p){var args={productLine:p.replace("-nav",""),ahost:agx.currentPage.ahost,khost:agx.currentPage.khost};this.quickshops[p]=new this.QuickshopWidgetClass(args);},this);};return self;}());}if(!dojo._hasResource["ag.widget.NavigationSearch"]){dojo._hasResource["ag.widget.NavigationSearch"]=true;dojo.provide("ag.widget.NavigationSearch");dojo.declare("ag.widget.NavigationSearch",[agi.classes.Adopter],{constructor:function(){this.showSearchInNav();this.helperForDynamicMenusContainingForms();},helperForDynamicMenusContainingForms:function(){dojo.query("#agi-tabs > LI").connect("onmouseover",this,this.isRealMouseOver);dojo.query("#agi-tabs > LI").connect("onmouseout",this,this.isRealMouseOut);},isRealMouseOver:function(evt){if(this.isReal(evt.relatedTarget,evt.currentTarget)){dojo.addClass(evt.currentTarget,"gsfhover");}},isRealMouseOut:function(evt){if(this.isReal(evt.relatedTarget,evt.currentTarget)){dojo.removeClass(evt.currentTarget,"gsfhover");dojo.query("#widget-ag-searchtext-ecards-nav_popup").style("display","none");dojo.query("#widget-ag-searchtext-printables-nav_popup").style("display","none");}},isReal:function(_525,tab){if(!_525||!tab){return false;}if(dojo.isDescendant(_525,tab)){return false;}if(dojo.isDescendant(_525,dojo.byId("widget-ag-searchtext-ecards-nav_popup"))){return false;}if(dojo.isDescendant(_525,dojo.byId("widget-ag-searchtext-printables-nav_popup"))){return false;}return true;},showSearchInNav:function(){this.ecardsForm=dojo.byId("search-ecards-nav");this.printablesForm=dojo.byId("search-printables-nav");this.ecardsQuickShopForm=dojo.byId("quickshop-form-ecards");this.printablesQuickShopForm=dojo.byId("quickshop-form-printables");dojo.query("input.searchRadio-ecards-nav").connect("onclick",this,this.searchClicked);dojo.query("input.searchRadio-printables-nav").connect("onclick",this,this.searchClicked);dojo.query("input.quickShopRadio-ecards-nav").connect("onclick",this,this.quickShopClicked);dojo.query("input.quickShopRadio-printables-nav").connect("onclick",this,this.quickShopClicked);var _526=window.location.href;if(_526.contains("printables")&&this.printablesForm){this.showPrintables();this.showQuickShopPrintables();}else{if(this.ecardsForm){this.showEcards();this.showQuickShopEcards();}}},searchClicked:function(evt){if(evt.target.id=="radioEcards"){this.showEcards();}else{if(evt.target.id=="radioPrintables"){this.showPrintables();}}},quickShopClicked:function(evt){if(evt.target.id=="radioEcards"){this.showQuickShopEcards();}else{if(evt.target.id=="radioPrintables"){this.showQuickShopPrintables();}}},showEcards:function(){dojo.style(this.ecardsForm,{display:"inline"});dojo.style(this.printablesForm,{display:"none"});this.checkRadio("input.searchRadio-ecards-nav","radioEcards");},showPrintables:function(){dojo.style(this.printablesForm,{display:"inline"});dojo.style(this.ecardsForm,{display:"none"});this.checkRadio("input.searchRadio-printables-nav","radioPrintables");},showQuickShopEcards:function(){dojo.style(this.ecardsQuickShopForm,{display:"inline"});dojo.style(this.printablesQuickShopForm,{display:"none"});this.checkRadio("input.quickShopRadio-ecards-nav","radioEcards");},showQuickShopPrintables:function(){dojo.style(this.printablesQuickShopForm,{display:"inline"});dojo.style(this.ecardsQuickShopForm,{display:"none"});this.checkRadio("input.quickShopRadio-printables-nav","radioPrintables");},checkRadio:function(_527,id){dojo.query(_527).forEach(function(node){if(node.id==id){dojo.attr(node,"checked",true);}});}});}if(!dojo._hasResource["ag.classes.Identified"]){dojo._hasResource["ag.classes.Identified"]=true;dojo.provide("ag.classes.Identified");ag.classes.Identified=agi.classes.Identified;}if(!dojo._hasResource["dojox.string.Builder"]){dojo._hasResource["dojox.string.Builder"]=true;dojo.provide("dojox.string.Builder");dojox.string.Builder=function(str){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var tmp="",l=arguments.length;switch(l){case 9:tmp=""+arguments[8]+tmp;case 8:tmp=""+arguments[7]+tmp;case 7:tmp=""+arguments[6]+tmp;case 6:tmp=""+arguments[5]+tmp;case 5:tmp=""+arguments[4]+tmp;case 4:tmp=""+arguments[3]+tmp;case 3:tmp=""+arguments[2]+tmp;case 2:b+=""+arguments[0]+arguments[1]+tmp;break;default:var i=0;while(i<arguments.length){tmp+=arguments[i++];}b+=tmp;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_528){return this.append.apply(this,_528);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_529,_52a){b=b.replace(_529,_52a);this.length=b.length;return this;};this.remove=function(_52b,len){if(len===undefined){len=b.length;}if(len==0){return this;}b=b.substr(0,_52b)+b.substr(_52b+len);this.length=b.length;return this;};this.insert=function(_52c,str){if(_52c==0){b=str+b;}else{b=b.slice(0,_52c)+str+b.slice(_52c);}this.length=b.length;return this;};this.toString=function(){return b;};if(str){this.append(str);}};}if(!dojo._hasResource["dojox.string.tokenize"]){dojo._hasResource["dojox.string.tokenize"]=true;dojo.provide("dojox.string.tokenize");dojox.string.tokenize=function(str,re,_52d,_52e){var _52f=[];var _530,_531,_532=0;while(_530=re.exec(str)){_531=str.slice(_532,re.lastIndex-_530[0].length);if(_531.length){_52f.push(_531);}if(_52d){if(dojo.isOpera){var copy=_530.slice(0);while(copy.length<_530.length){copy.push(null);}_530=copy;}var _533=_52d.apply(_52e,_530.slice(1).concat(_52f.length));if(typeof _533!="undefined"){_52f.push(_533);}}_532=re.lastIndex;}_531=str.slice(_532);if(_531.length){_52f.push(_531);}return _52f;};}if(!dojo._hasResource["dojox.dtl._base"]){dojo._hasResource["dojox.dtl._base"]=true;dojo.provide("dojox.dtl._base");dojo.experimental("dojox.dtl");(function(){var dd=dojox.dtl;dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=dojo.extend(function(dict){if(dict){dojo._mixin(this,dict);if(dict.get){this._getter=dict.get;delete this.get;}}},{push:function(){var last=this;var _534=dojo.delegate(this);_534.pop=function(){return last;};return _534;},pop:function(){throw new Error("pop() called on empty Context");},get:function(key,_535){var n=this._normalize;if(this._getter){var got=this._getter(key);if(typeof got!="undefined"){return n(got);}}if(typeof this[key]!="undefined"){return n(this[key]);}return _535;},_normalize:function(_536){if(_536 instanceof Date){_536.year=_536.getFullYear();_536.month=_536.getMonth()+1;_536.day=_536.getDate();_536.date=_536.year+"-"+("0"+_536.month).slice(-2)+"-"+("0"+_536.day).slice(-2);_536.hour=_536.getHours();_536.minute=_536.getMinutes();_536.second=_536.getSeconds();_536.microsecond=_536.getMilliseconds();}return _536;},update:function(dict){var _537=this.push();if(dict){dojo._mixin(this,dict);}return _537;}});var _538=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _539=/\s+/g;var _53a=function(_53b,_53c){_53b=_53b||_539;if(!(_53b instanceof RegExp)){_53b=new RegExp(_53b,"g");}if(!_53b.global){throw new Error("You must use a globally flagged RegExp with split "+_53b);}_53b.exec("");var part,_53d=[],_53e=0,i=0;while(part=_53b.exec(this)){_53d.push(this.slice(_53e,_53b.lastIndex-part[0].length));_53e=_53b.lastIndex;if(_53c&&(++i>_53c-1)){break;}}_53d.push(this.slice(_53e));return _53d;};dd.Token=function(_53f,_540){this.token_type=_53f;this.contents=new String(dojo.trim(_540));this.contents.split=_53a;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(_541){var bit,bits=[],i=0;_541=_541||999;while(i++<_541&&(bit=_538.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){bits.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){bits.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{bits.push(bit);}}}return bits;};var ddt=dd.text={_get:function(_542,name,_543){var _544=dd.register.get(_542,name.toLowerCase(),_543);if(!_544){if(!_543){throw new Error("No tag found for "+name);}return null;}var fn=_544[1];var _545=_544[2];var _546;if(fn.indexOf(":")!=-1){_546=fn.split(":");fn=_546.pop();}dojo["require"](_545);var _547=dojo.getObject(_545);return _547[fn||name]||_547[name+"_"]||_547[fn+"_"];},getTag:function(name,_548){return ddt._get("tag",name,_548);},getFilter:function(name,_549){return ddt._get("filter",name,_549);},getTemplate:function(file){return new dd.Template(ddt.getTemplateString(file));},getTemplateString:function(file){return dojo._getText(file.toString())||"";},_resolveLazy:function(_54a,sync,json){if(sync){if(json){return dojo.fromJson(dojo._getText(_54a))||{};}else{return dd.text.getTemplateString(_54a);}}else{return dojo.xhrGet({handleAs:(json)?"json":"text",url:_54a});}},_resolveTemplateArg:function(arg,sync){if(ddt._isTemplate(arg)){if(!sync){var d=new dojo.Deferred();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync);},_isTemplate:function(arg){return (typeof arg=="undefined")||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,sync){if(arg.constructor==Object){if(!sync){var d=new dojo.Deferred;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return dojox.string.tokenize(str,ddt._re,ddt._parseDelims);},_parseDelims:function(varr,load,tag){if(varr){return [dd.TOKEN_VAR,varr];}else{if(load){var _54b=dojo.trim(tag).split(/\s+/g);for(var i=0,part;part=_54b[i];i++){dojo["require"](part);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=dojo.extend(function(_54c,_54d){var str=_54d?_54c:ddt._resolveTemplateArg(_54c,true)||"";var _54e=ddt.tokenize(str);var _54f=new dd._Parser(_54e);this.nodelist=_54f.parse();},{update:function(node,_550){return ddt._resolveContextArg(_550).addCallback(this,function(_551){var _552=this.render(new dd._Context(_551));if(node.forEach){node.forEach(function(item){item.innerHTML=_552;});}else{dojo.byId(node).innerHTML=_552;}return this;});},render:function(_553,_554){_554=_554||this.getBuffer();_553=_553||new dd._Context({});return this.nodelist.render(_553,_554)+"";},getBuffer:function(){return new dojox.string.Builder();}});var qfRe=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(dojox.string.tokenize(str,qfRe,function(_555){return new dd._Filter(_555);}));}};dd._QuickNodeList=dojo.extend(function(_556){this.contents=_556;},{render:function(_557,_558){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_558=_558.concat(this.contents[i].resolve(_557));}else{_558=_558.concat(this.contents[i]);}}return _558;},dummyRender:function(_559){return this.render(_559,dd.Template.prototype.getBuffer()).toString();},clone:function(_55a){return this;}});dd._Filter=dojo.extend(function(_55b){if(!_55b){throw new Error("Filter must be called with variable name");}this.contents=_55b;var _55c=this._cache[_55b];if(_55c){this.key=_55c[0];this.filters=_55c[1];}else{this.filters=[];dojox.string.tokenize(_55b,this._re,this._tokenize,this);this._cache[_55b]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(typeof arguments[i]!="undefined"&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var _55d=arguments[pos];if(this._args[pos]=="'"){_55d=_55d.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){_55d=_55d.replace(/\\"/g,"\"");}}arg=[!this._args[pos],_55d];break;}}var fn=ddt.getFilter(arguments[3]);if(!dojo.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_55e){if(typeof this.key=="undefined"){return "";}var str=this.resolvePath(this.key,_55e);for(var i=0,_55f;_55f=this.filters[i];i++){if(_55f[1]){if(_55f[1][0]){str=_55f[0](str,this.resolvePath(_55f[1][1],_55e));}else{str=_55f[0](str,_55f[1][1]);}}else{str=_55f[0](str);}}return str;},resolvePath:function(path,_560){var _561,_562;var _563=path.charAt(0);var last=path.slice(-1);if(!isNaN(parseInt(_563))){_561=(path.indexOf(".")==-1)?parseInt(path):parseFloat(path);}else{if(_563=="\""&&_563==last){_561=path.slice(1,-1);}else{if(path=="true"){return true;}if(path=="false"){return false;}if(path=="null"||path=="None"){return null;}_562=path.split(".");_561=_560.get(_562[0]);if(dojo.isFunction(_561)){var self=_560.getThis&&_560.getThis();if(_561.alters_data){_561="";}else{if(self){_561=_561.call(self);}else{_561="";}}}for(var i=1;i<_562.length;i++){var part=_562[i];if(_561){var base=_561;if(dojo.isObject(_561)&&part=="items"&&typeof _561[part]=="undefined"){var _564=[];for(var key in _561){_564.push([key,_561[key]]);}_561=_564;continue;}if(_561.get&&dojo.isFunction(_561.get)&&_561.get.safe){_561=_561.get(part);}else{if(typeof _561[part]=="undefined"){_561=_561[part];break;}else{_561=_561[part];}}if(dojo.isFunction(_561)){if(_561.alters_data){_561="";}else{_561=_561.call(base);}}else{if(_561 instanceof Date){_561=dd._Context.prototype._normalize(_561);}}}else{return "";}}}}return _561;}});dd._TextNode=dd._Node=dojo.extend(function(obj){this.contents=obj;},{set:function(data){this.contents=data;return this;},render:function(_565,_566){return _566.concat(this.contents);},isEmpty:function(){return !dojo.trim(this.contents);},clone:function(){return this;}});dd._NodeList=dojo.extend(function(_567){this.contents=_567||[];this.last="";},{push:function(node){this.contents.push(node);return this;},concat:function(_568){this.contents=this.contents.concat(_568);return this;},render:function(_569,_56a){for(var i=0;i<this.contents.length;i++){_56a=this.contents[i].render(_569,_56a);if(!_56a){throw new Error("Template must return buffer");}}return _56a;},dummyRender:function(_56b){return this.render(_56b,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=dojo.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_56c,_56d){var str=this.contents.resolve(_56c);if(!str){str="";}else{if(!str.safe){str=dd._base.escape(""+str);}}return _56d.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=dojo.extend(function(_56e){this.contents=_56e;},{i:0,parse:function(_56f){var _570={},_571;_56f=_56f||[];for(var i=0;i<_56f.length;i++){_570[_56f[i]]=true;}var _572=new dd._NodeList();while(this.i<this.contents.length){_571=this.contents[this.i++];if(typeof _571=="string"){_572.push(new dd._TextNode(_571));}else{var type=_571[0];var text=_571[1];if(type==dd.TOKEN_VAR){_572.push(new dd._VarNode(text));}else{if(type==dd.TOKEN_BLOCK){if(_570[text]){--this.i;return _572;}var cmd=text.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_572.push(fn(this,new dd.Token(type,text)));}}}}}}if(_56f.length){throw new Error("Could not find closing tag(s): "+_56f.toString());}this.contents.length=0;return _572;},next_token:function(){var _573=this.contents[this.i++];return new dd.Token(_573[0],_573[1]);},delete_first_token:function(){this.i++;},skip_past:function(_574){while(this.i<this.contents.length){var _575=this.contents[this.i++];if(_575[0]==dd.TOKEN_BLOCK&&_575[1]==_574){return;}}throw new Error("Unclosed tag found when looking for "+_574);},create_variable_node:function(expr){return new dd._VarNode(expr);},create_text_node:function(expr){return new dd._TextNode(expr||"");},getTemplate:function(file){return new dd.Template(file);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_576,name){var _577=dd.register._registry[_576+"s"];for(var i=0,_578;_578=_577[i];i++){if(typeof _578[0]=="string"){if(_578[0]==name){return _578;}}else{if(name.match(_578[0])){return _578;}}}},getAttributeTags:function(){var tags=[];var _579=dd.register._registry.attributes;for(var i=0,_57a;_57a=_579[i];i++){if(_57a.length==3){tags.push(_57a);}else{var fn=dojo.getObject(_57a[1]);if(fn&&dojo.isFunction(fn)){_57a.push(fn);tags.push(_57a);}}}return tags;},_any:function(type,base,_57b){for(var path in _57b){for(var i=0,fn;fn=_57b[path][i];i++){var key=fn;if(dojo.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var attr=fn;if(attr.substr(0,5)=="attr:"){attr=attr.slice(5);}dd.register._registry.attributes.push([attr.toLowerCase(),base+"."+path+"."+attr]);}key=key.toLowerCase();}dd.register._registry[type].push([key,fn,base+"."+path]);}}},tags:function(base,_57c){dd.register._any("tags",base,_57c);},filters:function(base,_57d){dd.register._any("filters",base,_57d);}};var _57e=/&/g;var _57f=/</g;var _580=/>/g;var _581=/'/g;var _582=/"/g;dd._base.escape=function(_583){return dd.mark_safe(_583.replace(_57e,"&amp;").replace(_57f,"&lt;").replace(_580,"&gt;").replace(_582,"&quot;").replace(_581,"&#39;"));};dd._base.safe=function(_584){if(typeof _584=="string"){_584=new String(_584);}if(typeof _584=="object"){_584.safe=true;}return _584;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});})();}if(!dojo._hasResource["dojox.dtl"]){dojo._hasResource["dojox.dtl"]=true;dojo.provide("dojox.dtl");}if(!dojo._hasResource["dojox.dtl.tag.logic"]){dojo._hasResource["dojox.dtl.tag.logic"]=true;dojo.provide("dojox.dtl.tag.logic");(function(){var dd=dojox.dtl;var ddt=dd.text;var ddtl=dd.tag.logic;ddtl.IfNode=dojo.extend(function(_585,_586,_587,type){this.bools=_585;this.trues=_586;this.falses=_587;this.type=type;},{render:function(_588,_589){var i,bool,_58a,_58b,_58c;if(this.type=="or"){for(i=0;bool=this.bools[i];i++){_58a=bool[0];_58b=bool[1];_58c=_58b.resolve(_588);if((_58c&&!_58a)||(_58a&&!_58c)){if(this.falses){_589=this.falses.unrender(_588,_589);}return (this.trues)?this.trues.render(_588,_589,this):_589;}}if(this.trues){_589=this.trues.unrender(_588,_589);}return (this.falses)?this.falses.render(_588,_589,this):_589;}else{for(i=0;bool=this.bools[i];i++){_58a=bool[0];_58b=bool[1];_58c=_58b.resolve(_588);if(_58c==_58a){if(this.trues){_589=this.trues.unrender(_588,_589);}return (this.falses)?this.falses.render(_588,_589,this):_589;}}if(this.falses){_589=this.falses.unrender(_588,_589);}return (this.trues)?this.trues.render(_588,_589,this):_589;}return _589;},unrender:function(_58d,_58e){_58e=(this.trues)?this.trues.unrender(_58d,_58e):_58e;_58e=(this.falses)?this.falses.unrender(_58d,_58e):_58e;return _58e;},clone:function(_58f){var _590=(this.trues)?this.trues.clone(_58f):null;var _591=(this.falses)?this.falses.clone(_58f):null;return new this.constructor(this.bools,_590,_591,this.type);}});ddtl.IfEqualNode=dojo.extend(function(var1,var2,_592,_593,_594){this.var1=new dd._Filter(var1);this.var2=new dd._Filter(var2);this.trues=_592;this.falses=_593;this.negate=_594;},{render:function(_595,_596){var var1=this.var1.resolve(_595);var var2=this.var2.resolve(_595);var1=(typeof var1!="undefined")?var1:"";var2=(typeof var1!="undefined")?var2:"";if((this.negate&&var1!=var2)||(!this.negate&&var1==var2)){if(this.falses){_596=this.falses.unrender(_595,_596,this);}return (this.trues)?this.trues.render(_595,_596,this):_596;}if(this.trues){_596=this.trues.unrender(_595,_596,this);}return (this.falses)?this.falses.render(_595,_596,this):_596;},unrender:function(_597,_598){return ddtl.IfNode.prototype.unrender.call(this,_597,_598);},clone:function(_599){var _59a=this.trues?this.trues.clone(_599):null;var _59b=this.falses?this.falses.clone(_599):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_59a,_59b,this.negate);}});ddtl.ForNode=dojo.extend(function(_59c,loop,_59d,_59e){this.assign=_59c;this.loop=new dd._Filter(loop);this.reversed=_59d;this.nodelist=_59e;this.pool=[];},{render:function(_59f,_5a0){var i,j,k;var _5a1=false;var _5a2=this.assign;for(k=0;k<_5a2.length;k++){if(typeof _59f[_5a2[k]]!="undefined"){_5a1=true;_59f=_59f.push();break;}}if(!_5a1&&_59f.forloop){_5a1=true;_59f=_59f.push();}var _5a3=this.loop.resolve(_59f)||[];for(i=_5a3.length;i<this.pool.length;i++){this.pool[i].unrender(_59f,_5a0,this);}if(this.reversed){_5a3=_5a3.slice(0).reverse();}var _5a4=dojo.isObject(_5a3)&&!dojo.isArrayLike(_5a3);var _5a5=[];if(_5a4){for(var key in _5a3){_5a5.push(_5a3[key]);}}else{_5a5=_5a3;}var _5a6=_59f.forloop={parentloop:_59f.get("forloop",{})};var j=0;for(i=0;i<_5a5.length;i++){var item=_5a5[i];_5a6.counter0=j;_5a6.counter=j+1;_5a6.revcounter0=_5a5.length-j-1;_5a6.revcounter=_5a5.length-j;_5a6.first=!j;_5a6.last=(j==_5a5.length-1);if(_5a2.length>1&&dojo.isArrayLike(item)){if(!_5a1){_5a1=true;_59f=_59f.push();}var _5a7={};for(k=0;k<item.length&&k<_5a2.length;k++){_5a7[_5a2[k]]=item[k];}dojo.mixin(_59f,_5a7);}else{_59f[_5a2[0]]=item;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_5a0));}_5a0=this.pool[j++].render(_59f,_5a0,this);}delete _59f.forloop;if(_5a1){_59f=_59f.pop();}else{for(k=0;k<_5a2.length;k++){delete _59f[_5a2[k]];}}return _5a0;},unrender:function(_5a8,_5a9){for(var i=0,pool;pool=this.pool[i];i++){_5a9=pool.unrender(_5a8,_5a9);}return _5a9;},clone:function(_5aa){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_5aa));}});dojo.mixin(ddtl,{if_:function(_5ab,_5ac){var i,part,type,_5ad=[],_5ae=_5ac.contents.split();_5ae.shift();_5ac=_5ae.join(" ");_5ae=_5ac.split(" and ");if(_5ae.length==1){type="or";_5ae=_5ac.split(" or ");}else{type="and";for(i=0;i<_5ae.length;i++){if(_5ae[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;part=_5ae[i];i++){var not=false;if(part.indexOf("not ")==0){part=part.slice(4);not=true;}_5ad.push([not,new dd._Filter(part)]);}var _5af=_5ab.parse(["else","endif"]);var _5b0=false;var _5ac=_5ab.next_token();if(_5ac.contents=="else"){_5b0=_5ab.parse(["endif"]);_5ab.next_token();}return new ddtl.IfNode(_5ad,_5af,_5b0,type);},_ifequal:function(_5b1,_5b2,_5b3){var _5b4=_5b2.split_contents();if(_5b4.length!=3){throw new Error(_5b4[0]+" takes two arguments");}var end="end"+_5b4[0];var _5b5=_5b1.parse(["else",end]);var _5b6=false;var _5b2=_5b1.next_token();if(_5b2.contents=="else"){_5b6=_5b1.parse([end]);_5b1.next_token();}return new ddtl.IfEqualNode(_5b4[1],_5b4[2],_5b5,_5b6,_5b3);},ifequal:function(_5b7,_5b8){return ddtl._ifequal(_5b7,_5b8);},ifnotequal:function(_5b9,_5ba){return ddtl._ifequal(_5b9,_5ba,true);},for_:function(_5bb,_5bc){var _5bd=_5bc.contents.split();if(_5bd.length<4){throw new Error("'for' statements should have at least four words: "+_5bc.contents);}var _5be=_5bd[_5bd.length-1]=="reversed";var _5bf=(_5be)?-3:-2;if(_5bd[_5bd.length+_5bf]!="in"){throw new Error("'for' tag received an invalid argument: "+_5bc.contents);}var _5c0=_5bd.slice(1,_5bf).join(" ").split(/ *, */);for(var i=0;i<_5c0.length;i++){if(!_5c0[i]||_5c0[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_5bc.contents);}}var _5c1=_5bb.parse(["endfor"]);_5bb.next_token();return new ddtl.ForNode(_5c0,_5bd[_5bd.length+_5bf+1],_5be,_5c1);}});})();}if(!dojo._hasResource["dojox.dtl.tag.loop"]){dojo._hasResource["dojox.dtl.tag.loop"]=true;dojo.provide("dojox.dtl.tag.loop");(function(){var dd=dojox.dtl;var ddtl=dd.tag.loop;ddtl.CycleNode=dojo.extend(function(_5c2,name,text,_5c3){this.cyclevars=_5c2;this.name=name;this.contents=text;this.shared=_5c3||{counter:-1,map:{}};},{render:function(_5c4,_5c5){if(_5c4.forloop&&!_5c4.forloop.counter0){this.shared.counter=-1;}++this.shared.counter;var _5c6=this.cyclevars[this.shared.counter%this.cyclevars.length];var map=this.shared.map;if(!map[_5c6]){map[_5c6]=new dd._Filter(_5c6);}_5c6=map[_5c6].resolve(_5c4,_5c5);if(this.name){_5c4[this.name]=_5c6;}this.contents.set(_5c6);return this.contents.render(_5c4,_5c5);},unrender:function(_5c7,_5c8){return this.contents.unrender(_5c7,_5c8);},clone:function(_5c9){return new this.constructor(this.cyclevars,this.name,this.contents.clone(_5c9),this.shared);}});ddtl.IfChangedNode=dojo.extend(function(_5ca,vars,_5cb){this.nodes=_5ca;this._vars=vars;this.shared=_5cb||{last:null,counter:0};this.vars=dojo.map(vars,function(item){return new dojox.dtl._Filter(item);});},{render:function(_5cc,_5cd){if(_5cc.forloop){if(_5cc.forloop.counter<=this.shared.counter){this.shared.last=null;}this.shared.counter=_5cc.forloop.counter;}var _5ce;if(this.vars.length){_5ce=dojo.toJson(dojo.map(this.vars,function(item){return item.resolve(_5cc);}));}else{_5ce=this.nodes.dummyRender(_5cc,_5cd);}if(_5ce!=this.shared.last){var _5cf=(this.shared.last===null);this.shared.last=_5ce;_5cc=_5cc.push();_5cc.ifchanged={firstloop:_5cf};_5cd=this.nodes.render(_5cc,_5cd);_5cc=_5cc.pop();}else{_5cd=this.nodes.unrender(_5cc,_5cd);}return _5cd;},unrender:function(_5d0,_5d1){return this.nodes.unrender(_5d0,_5d1);},clone:function(_5d2){return new this.constructor(this.nodes.clone(_5d2),this._vars,this.shared);}});ddtl.RegroupNode=dojo.extend(function(_5d3,key,_5d4){this._expression=_5d3;this.expression=new dd._Filter(_5d3);this.key=key;this.alias=_5d4;},{_push:function(_5d5,_5d6,_5d7){if(_5d7.length){_5d5.push({grouper:_5d6,list:_5d7});}},render:function(_5d8,_5d9){_5d8[this.alias]=[];var list=this.expression.resolve(_5d8);if(list){var last=null;var _5da=[];for(var i=0;i<list.length;i++){var id=list[i][this.key];if(last!==id){this._push(_5d8[this.alias],last,_5da);last=id;_5da=[list[i]];}else{_5da.push(list[i]);}}this._push(_5d8[this.alias],last,_5da);}return _5d9;},unrender:function(_5db,_5dc){return _5dc;},clone:function(_5dd,_5de){return this;}});dojo.mixin(ddtl,{cycle:function(_5df,_5e0){var args=_5e0.split_contents();if(args.length<2){throw new Error("'cycle' tag requires at least two arguments");}if(args[1].indexOf(",")!=-1){var vars=args[1].split(",");args=[args[0]];for(var i=0;i<vars.length;i++){args.push("\""+vars[i]+"\"");}}if(args.length==2){var name=args[args.length-1];if(!_5df._namedCycleNodes){throw new Error("No named cycles in template: '"+name+"' is not defined");}if(!_5df._namedCycleNodes[name]){throw new Error("Named cycle '"+name+"' does not exist");}return _5df._namedCycleNodes[name];}if(args.length>4&&args[args.length-2]=="as"){var name=args[args.length-1];var node=new ddtl.CycleNode(args.slice(1,args.length-2),name,_5df.create_text_node());if(!_5df._namedCycleNodes){_5df._namedCycleNodes={};}_5df._namedCycleNodes[name]=node;}else{node=new ddtl.CycleNode(args.slice(1),null,_5df.create_text_node());}return node;},ifchanged:function(_5e1,_5e2){var _5e3=_5e2.contents.split();var _5e4=_5e1.parse(["endifchanged"]);_5e1.delete_first_token();return new ddtl.IfChangedNode(_5e4,_5e3.slice(1));},regroup:function(_5e5,_5e6){var _5e7=dojox.string.tokenize(_5e6.contents,/(\s+)/g,function(_5e8){return _5e8;});if(_5e7.length<11||_5e7[_5e7.length-3]!="as"||_5e7[_5e7.length-7]!="by"){throw new Error("Expected the format: regroup list by key as newList");}var _5e9=_5e7.slice(2,-8).join("");var key=_5e7[_5e7.length-5];var _5ea=_5e7[_5e7.length-1];return new ddtl.RegroupNode(_5e9,key,_5ea);}});})();}if(!dojo._hasResource["dojox.dtl.filter.misc"]){dojo._hasResource["dojox.dtl.filter.misc"]=true;dojo.provide("dojox.dtl.filter.misc");dojo.mixin(dojox.dtl.filter.misc,{filesizeformat:function(_5eb){_5eb=parseFloat(_5eb);if(_5eb<1024){return (_5eb==1)?_5eb+" byte":_5eb+" bytes";}else{if(_5eb<1024*1024){return (_5eb/1024).toFixed(1)+" KB";}else{if(_5eb<1024*1024*1024){return (_5eb/1024/1024).toFixed(1)+" MB";}}}return (_5eb/1024/1024/1024).toFixed(1)+" GB";},pluralize:function(_5ec,arg){arg=arg||"s";if(arg.indexOf(",")==-1){arg=","+arg;}var _5ed=arg.split(",");if(_5ed.length>2){return "";}var _5ee=_5ed[0];var _5ef=_5ed[1];if(parseInt(_5ec,10)!=1){return _5ef;}return _5ee;},_phone2numeric:{a:2,b:2,c:2,d:3,e:3,f:3,g:4,h:4,i:4,j:5,k:5,l:5,m:6,n:6,o:6,p:7,r:7,s:7,t:8,u:8,v:8,w:9,x:9,y:9},phone2numeric:function(_5f0){var dm=dojox.dtl.filter.misc;_5f0=_5f0+"";var _5f1="";for(var i=0;i<_5f0.length;i++){var chr=_5f0.charAt(i).toLowerCase();(dm._phone2numeric[chr])?_5f1+=dm._phone2numeric[chr]:_5f1+=_5f0.charAt(i);}return _5f1;},pprint:function(_5f2){return dojo.toJson(_5f2);}});}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(_5f3){var _5f4=_5f3.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_5f4==1&&dojo.date.isLeapYear(_5f3)){return 29;}return days[_5f4];};dojo.date.isLeapYear=function(_5f5){var year=_5f5.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_5f6){var str=_5f6.toString();var tz="";var _5f7;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_5f7=str.match(pat))){tz=_5f7[1];}else{str=_5f6.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_5f7=str.match(pat))){tz=_5f7[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_5f8,_5f9,_5fa){_5f8=new Date(+_5f8);_5f9=new Date(+(_5f9||new Date()));if(_5fa=="date"){_5f8.setHours(0,0,0,0);_5f9.setHours(0,0,0,0);}else{if(_5fa=="time"){_5f8.setFullYear(0,0,0);_5f9.setFullYear(0,0,0);}}if(_5f8>_5f9){return 1;}if(_5f8<_5f9){return -1;}return 0;};dojo.date.add=function(date,_5fb,_5fc){var sum=new Date(+date);var _5fd=false;var _5fe="Date";switch(_5fb){case "day":break;case "weekday":var days,_5ff;var mod=_5fc%5;if(!mod){days=(_5fc>0)?5:-5;_5ff=(_5fc>0)?((_5fc-5)/5):((_5fc+5)/5);}else{days=mod;_5ff=parseInt(_5fc/5);}var strt=date.getDay();var adj=0;if(strt==6&&_5fc>0){adj=1;}else{if(strt==0&&_5fc<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_5fc>0)?2:-2;}_5fc=(7*_5ff)+days+adj;break;case "year":_5fe="FullYear";_5fd=true;break;case "week":_5fc*=7;break;case "quarter":_5fc*=3;case "month":_5fd=true;_5fe="Month";break;default:_5fe="UTC"+_5fb.charAt(0).toUpperCase()+_5fb.substring(1)+"s";}if(_5fe){sum["set"+_5fe](sum["get"+_5fe]()+_5fc);}if(_5fd&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_600,_601,_602){_601=_601||new Date();_602=_602||"day";var _603=_601.getFullYear()-_600.getFullYear();var _604=1;switch(_602){case "quarter":var m1=_600.getMonth();var m2=_601.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_603*4);_604=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(_600,_601,"day"));var _605=parseInt(dojo.date.difference(_600,_601,"week"));var mod=days%7;if(mod==0){days=_605*5;}else{var adj=0;var aDay=_600.getDay();var bDay=_601.getDay();_605=parseInt(days/7);mod=days%7;var _606=new Date(_600);_606.setDate(_606.getDate()+(_605*7));var _607=_606.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_607+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_607+mod)<0:adj=2;}}}days+=adj;days-=(_605*2);}_604=days;break;case "year":_604=_603;break;case "month":_604=(_601.getMonth()-_600.getMonth())+(_603*12);break;case "week":_604=parseInt(dojo.date.difference(_600,_601,"day")/7);break;case "day":_604/=24;case "hour":_604/=60;case "minute":_604/=60;case "second":_604/=1000;case "millisecond":_604*=_601.getTime()-_600.getTime();}return Math.round(_604);};}if(!dojo._hasResource["dojox.date.php"]){dojo._hasResource["dojox.date.php"]=true;dojo.provide("dojox.date.php");dojox.date.php.format=function(date,_608){var df=new dojox.date.php.DateFormat(_608);return df.format(date);};dojox.date.php.DateFormat=function(_609){if(!this.regex){var keys=[];for(var key in this.constructor.prototype){if(dojo.isString(key)&&key.length==1&&dojo.isFunction(this[key])){keys.push(key);}}this.regex=new RegExp("(?:(\\\\.)|(["+keys.join("")+"]))","g");}var _60a=[];this.tokens=dojox.string.tokenize(_609,this.regex,function(_60b,_60c,i){if(_60c){_60a.push([i,_60c]);return _60c;}if(_60b){return _60b.charAt(1);}});this.replacements=_60a;};dojo.extend(dojox.date.php.DateFormat,{weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_3:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_3:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthdays:[31,28,31,30,31,30,31,31,30,31,30,31],format:function(date){this.date=date;for(var i=0,_60d;_60d=this.replacements[i];i++){this.tokens[_60d[0]]=this[_60d[1]]();}return this.tokens.join("");},d:function(){var j=this.j();return (j.length==1)?"0"+j:j;},D:function(){return this.weekdays_3[this.date.getDay()];},j:function(){return this.date.getDate()+"";},l:function(){return this.weekdays[this.date.getDay()];},N:function(){var w=this.w();return (!w)?7:w;},S:function(){switch(this.date.getDate()){case 11:case 12:case 13:return "th";case 1:case 21:case 31:return "st";case 2:case 22:return "nd";case 3:case 23:return "rd";default:return "th";}},w:function(){return this.date.getDay()+"";},z:function(){var _60e=this.date.getTime()-new Date(this.date.getFullYear(),0,1).getTime();return Math.floor(_60e/86400000)+"";},W:function(){var week;var _60f=new Date(this.date.getFullYear(),0,1).getDay()+1;var w=this.date.getDay()+1;var z=parseInt(this.z());if(z<=(8-_60f)&&_60f>4){var _610=new Date(this.date.getFullYear()-1,this.date.getMonth(),this.date.getDate());if(_60f==5||(_60f==6&&dojo.date.isLeapYear(_610))){week=53;}else{week=52;}}else{var i;if(Boolean(this.L())){i=366;}else{i=365;}if((i-z)<(4-w)){week=1;}else{var j=z+(7-w)+(_60f-1);week=Math.ceil(j/7);if(_60f>4){--week;}}}return week;},F:function(){return this.months[this.date.getMonth()];},m:function(){var n=this.n();return (n.length==1)?"0"+n:n;},M:function(){return this.months_3[this.date.getMonth()];},n:function(){return this.date.getMonth()+1+"";},t:function(){return (Boolean(this.L())&&this.date.getMonth()==1)?29:this.monthdays[this.getMonth()];},L:function(){return (dojo.date.isLeapYear(this.date))?"1":"0";},o:function(){},Y:function(){return this.date.getFullYear()+"";},y:function(){return this.Y().slice(-2);},a:function(){return this.date.getHours()>=12?"pm":"am";},b:function(){return this.a().toUpperCase();},B:function(){var off=this.date.getTimezoneOffset()+60;var secs=(this.date.getHours()*3600)+(this.date.getMinutes()*60)+this.getSeconds()+(off*60);var beat=Math.abs(Math.floor(secs/86.4)%1000)+"";while(beat.length<2){beat="0"+beat;}return beat;},g:function(){return (this.date.getHours()>12)?this.date.getHours()-12+"":this.date.getHours()+"";},G:function(){return this.date.getHours()+"";},h:function(){var g=this.g();return (g.length==1)?"0"+g:g;},H:function(){var G=this.G();return (G.length==1)?"0"+G:G;},i:function(){var mins=this.date.getMinutes()+"";return (mins.length==1)?"0"+mins:mins;},s:function(){var secs=this.date.getSeconds()+"";return (secs.length==1)?"0"+secs:secs;},e:function(){return dojo.date.getTimezoneName(this.date);},I:function(){},O:function(){var off=Math.abs(this.date.getTimezoneOffset());var _611=Math.floor(off/60)+"";var mins=(off%60)+"";if(_611.length==1){_611="0"+_611;}if(mins.length==1){_611="0"+mins;}return ((this.date.getTimezoneOffset()<0)?"+":"-")+_611+mins;},P:function(){var O=this.O();return O.substring(0,2)+":"+O.substring(2,4);},T:function(){return this.e().substring(0,3);},Z:function(){return this.date.getTimezoneOffset()*-60;},c:function(){return this.Y()+"-"+this.m()+"-"+this.d()+"T"+this.h()+":"+this.i()+":"+this.s()+this.P();},r:function(){return this.D()+", "+this.d()+" "+this.M()+" "+this.Y()+" "+this.H()+":"+this.i()+":"+this.s()+" "+this.O();},U:function(){return Math.floor(this.date.getTime()/1000);}});}if(!dojo._hasResource["dojox.dtl.utils.date"]){dojo._hasResource["dojox.dtl.utils.date"]=true;dojo.provide("dojox.dtl.utils.date");dojox.dtl.utils.date.DateFormat=function(_612){dojox.date.php.DateFormat.call(this,_612);};dojo.extend(dojox.dtl.utils.date.DateFormat,dojox.date.php.DateFormat.prototype,{f:function(){return (!this.date.getMinutes())?this.g():this.g()+":"+this.i();},N:function(){return dojox.dtl.utils.date._months_ap[this.date.getMonth()];},P:function(){if(!this.date.getMinutes()&&!this.date.getHours()){return "midnight";}if(!this.date.getMinutes()&&this.date.getHours()==12){return "noon";}return this.f()+" "+this.a();}});dojo.mixin(dojox.dtl.utils.date,{format:function(date,_613){var df=new dojox.dtl.utils.date.DateFormat(_613);return df.format(date);},timesince:function(d,now){if(!(d instanceof Date)){d=new Date(d.year,d.month,d.day);}if(!now){now=new Date();}var _614=Math.abs(now.getTime()-d.getTime());for(var i=0,_615;_615=dojox.dtl.utils.date._chunks[i];i++){var _616=Math.floor(_614/_615[0]);if(_616){break;}}return _616+" "+_615[1](_616);},_chunks:[[60*60*24*365*1000,function(n){return (n==1)?"year":"years";}],[60*60*24*30*1000,function(n){return (n==1)?"month":"months";}],[60*60*24*7*1000,function(n){return (n==1)?"week":"weeks";}],[60*60*24*1000,function(n){return (n==1)?"day":"days";}],[60*60*1000,function(n){return (n==1)?"hour":"hours";}],[60*1000,function(n){return (n==1)?"minute":"minutes";}]],_months_ap:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."]});}if(!dojo._hasResource["dojox.dtl.filter.dates"]){dojo._hasResource["dojox.dtl.filter.dates"]=true;dojo.provide("dojox.dtl.filter.dates");(function(){var ddfd=dojox.dtl.filter.dates;dojo.mixin(ddfd,{_toDate:function(_617){if(_617 instanceof Date){return _617;}_617=new Date(_617);if(_617.getTime()==new Date(0).getTime()){return "";}return _617;},date:function(_618,arg){_618=ddfd._toDate(_618);if(!_618){return "";}arg=arg||"N j, Y";return dojox.dtl.utils.date.format(_618,arg);},time:function(_619,arg){_619=ddfd._toDate(_619);if(!_619){return "";}arg=arg||"P";return dojox.dtl.utils.date.format(_619,arg);},timesince:function(_61a,arg){_61a=ddfd._toDate(_61a);if(!_61a){return "";}var _61b=dojox.dtl.utils.date.timesince;if(arg){return _61b(arg,_61a);}return _61b(_61a);},timeuntil:function(_61c,arg){_61c=ddfd._toDate(_61c);if(!_61c){return "";}var _61d=dojox.dtl.utils.date.timesince;if(arg){return _61d(arg,_61c);}return _61d(new Date(),_61c);}});})();}if(!dojo._hasResource["dojox.dtl.filter.integers"]){dojo._hasResource["dojox.dtl.filter.integers"]=true;dojo.provide("dojox.dtl.filter.integers");dojo.mixin(dojox.dtl.filter.integers,{add:function(_61e,arg){_61e=parseInt(_61e,10);arg=parseInt(arg,10);return isNaN(arg)?_61e:_61e+arg;},get_digit:function(_61f,arg){_61f=parseInt(_61f,10);arg=parseInt(arg,10)-1;if(arg>=0){_61f+="";if(arg<_61f.length){_61f=parseInt(_61f.charAt(arg),10);}else{_61f=0;}}return (isNaN(_61f)?0:_61f);}});}if(!dojo._hasResource["dojox.dtl._Templated"]){dojo._hasResource["dojox.dtl._Templated"]=true;dojo.provide("dojox.dtl._Templated");dojo.declare("dojox.dtl._Templated",dijit._Templated,{_dijitTemplateCompat:false,buildRendering:function(){var node;if(this.domNode&&!this._template){return;}if(!this._template){var t=this.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);if(t instanceof dojox.dtl.Template){this._template=t;}else{node=t;}}if(!node){var _620=new dojox.dtl._Context(this);if(!this._created){delete _620._getter;}var _621=dojo._toDom(this._template.render(_620));if(_621.nodeType!==1&&_621.nodeType!==3){for(var i=0,l=_621.childNodes.length;i<l;++i){node=_621.childNodes[i];if(node.nodeType==1){break;}}}else{node=_621;}}this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _622=dojo.parser,qry,attr;if(_622._query!="[dojoType]"){qry=_622._query;attr=_622._attrName;_622._query="[dojoType]";_622._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_622._query=qry;_622._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}if(this.domNode){dojo.place(node,this.domNode,"before");this.destroyDescendants();dojo.destroy(this.domNode);}this.domNode=node;this._fillContent(this.srcNodeRef);},_templateCache:{},getCachedTemplate:function(_623,_624,_625){var _626=this._templateCache;var key=_624||_623;if(_626[key]){return _626[key];}_624=dojo.string.trim(_624||dojo.cache(_623,{sanitize:true}));if(this._dijitTemplateCompat&&(_625||_624.match(/\$\{([^\}]+)\}/g))){_624=this._stringRepl(_624);}if(_625||!_624.match(/\{[{%]([^\}]+)[%}]\}/g)){return _626[key]=dojo._toDom(_624);}else{return _626[key]=new dojox.dtl.Template(_624);}},render:function(){this.buildRendering();},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});}if(!dojo._hasResource["agi.widget._TemplatedWidget"]){dojo._hasResource["agi.widget._TemplatedWidget"]=true;dojo.provide("agi.widget._TemplatedWidget");dojo.declare("agi.widget._TemplatedWidget",[dijit._Widget,dojox.dtl._Templated],{});}if(!dojo._hasResource["agi.requester"]){dojo._hasResource["agi.requester"]=true;dojo.provide("agi.requester");agi.requester.Requester=function(url,_627,_628,_629,_62a){var _62b=this;var req=null;this.async=_628;this.method=_627;this.url=url;this.showbusy=_629;this.in_process=false;this.handleas=_62a?_62a:"text";this.get_millisecond_query=function(){var _62c=new Date();var ms=_62c.getTime();return "&ajax_requester_ms="+ms;};this.sendRequest=function(_62d){var _62e={url:this.url,sync:!this.async,content:_62d?_62d:{},preventCache:_62d?true:false,handleAs:this.handleas,load:_62b.processLoad,error:_62b.processError};if(this.showbusy){document.body.style.cursor="wait";}this.in_process=true;if(this.method.toUpperCase()=="POST"){dojo.xhrPost(_62e);}else{dojo.xhrGet(_62e);}};this.processLoad=function(_62f,_630){_62f=_62b.processAlways(_62f,_630);if(_630.xhr.getResponseHeader("Kaboom")){if(_630.xhrgetResponseHeader("Kaboom").toLowerCase()=="true"){if(_62b.onerror){_62b.onerror(_62f,_630);}}}else{if(_62b.onsuccess){_62b.onsuccess(_62f,_630);}}return _62f;};this.processError=function(_631,_632){_631=_62b.processAlways(_631,_632);if(_62b.onerror){_62b.onerror(_631,_632);}return _631;};this.processAlways=function(_633,_634){_62b.in_process=false;if(_62b.showbusy){document.body.style.cursor="auto";}if(!_633){_633="";}try{_633=_633.replace("<!--this page was compressed by your friendly neighborhood pydriver-->","");}catch(e){}return _633;};this.formToQuery=function(_635){var _636=dojo.formToObject(_635);return _636;};};var script_fragment="<script[^>]*>([\\s\\S]*?)</script>";agi.requester.stripScripts=function(_637){return _637.replace(new RegExp(script_fragment,"img"),"");};agi.requester.extractScripts=function(_638){var _639=new RegExp(script_fragment,"img");var _63a=new RegExp(script_fragment,"im");var _63b=_638.match(_639);var _63c=[];if(_63b){for(var i=0;i<_63b.length;i++){if(_63b[i].indexOf("agi-lb-exec")!=-1){_63c.push(_63b[i].match(_63a)[1]);}}}return _63c;};agi.requester.evalScripts=function(_63d){var _63e=agi.requester.extractScripts(_63d);for(i=0;i<_63e.length;i++){try{eval(_63e[i]);}catch(e){}}};agi.requester.checkAll=function(_63f,_640){form=dojo.byId(_63f);for(i=0;i<form.elements.length;i++){if(form.elements[i].type=="checkbox"){form.elements[i].checked=_640;}}};agi.requester.countChecked=function(_641){var form=dojo.byId(_641);var _642=0;for(i=0;i<form.elements.length;i++){if(form.elements[i].type=="checkbox"&form.elements[i].checked){_642++;}}return _642;};agi.requester.selectAll=function(_643,_644){if(_644==undefined){var _645=true;}else{var _645=_644;}var list=dojo.byId(_643);var _646=document.getElementsByName("event_id");for(i=0;i<list.childNodes.length;i++){if(list.childNodes[i].nodeName=="LI"){for(j=0;j<list.childNodes[i].childNodes.length;j++){if(list.childNodes[i].childNodes[j].type=="checkbox"){list.childNodes[i].childNodes[j].checked=_645;len=_646.length;for(n=0;n<len;n++){if((_646[n].value)==(list.childNodes[i].childNodes[j].value)){_646[n].checked=_645;}}}}}}};agi.requester.selectEqual=function(_647){var _648=document.getElementsByName(_647.name);for(i=0;i<_648.length;i++){if(_647.form.elements[i].value==_647.value){_647.form.elements[i].checked=_647.checked;}}};agi.requester.fixurl=function(url){if(url.indexOf("http")!=0){var sep="";url.indexOf("/")==0?sep="":sep="/";url=agi.requester.ajaxhost()+sep+url;}return url;};agi.requester.ajaxhost=function(){return document.location.protocol+"//"+document.location.hostname;};}if(!dojo._hasResource["agi.widget.Lightbox"]){dojo._hasResource["agi.widget.Lightbox"]=true;dojo.provide("agi.widget.Lightbox");dojo.declare("agi.widget.Lightbox",[agi.classes.Identified,agi.widget._TemplatedWidget],{url:null,contents:null,node:null,templatePath:null,left:null,top:null,height:null,width:null,position:"absolute",relativeTo:null,showloader:true,loaderSrc:imghost+"/ag/reminders/loader.swf",loaderId:"agi-lightboxloader",loaderHeight:120,loaderWidth:120,overlayId:"agi-overlay",showoverlay:true,lightboxId:"agi-lightbox",noprintClass:"agi-noprint",timeout:60000,loadnow:true,allowclick:false,closeKey:null,overflow:"auto",overlayZindex:"999",containerZindex:"1000",loaderZindex:"250",_defaultTop:20,_ready:false,_reset:false,_showing:false,_bgIframe:null,_keypressListener:null,_hideSignal:"ag/Lightbox/hide",_resizeSignal:"ag/Lightbox/resize",constructor:function(_649){_649=_649||{};dojo.mixin(this,_649);this._checkPositioning();},uninitialize:function(){dojo._destroyElement(this.loader);dojo._destroyElement(this.lightbox);if(this.overlay){dojo._destroyElement(this.overlay);}if(this._bgIframe){this._bgIframe.destroy();this._bgIframe=null;}},_checkPositioning:function(){if(this.position=="relative"){if(!this.relativeTo){throw (this+" needs a relativeTo when positioning relatively");}if(this.left==null){this.left=0;}if(this.top==null){this.top=0;}var pos=dojo.coords(this.relativeTo);this.left+=pos.x;this.top+=pos.y;}else{if(this.position=="user"){if(this.top==null||this.left==null){throw (this+" needs 'left' and 'top' defined when using user-defined positioning.");}}else{if(this.top==null){this.top=this._defaultTop;}}}},buildRendering:function(){if(this.templatePath||this.templateString){this.inherited(arguments);}this.overlay=this._createOverlay();this.lightbox=this._createLightbox(this.overlay);this.loader=this._createLoader();},postCreate:function(){this.inherited(arguments);dojo.subscribe(this._hideSignal,dojo.hitch(this,this.hide));dojo.subscribe(this._resizeSignal,dojo.hitch(this,this._resizeOverlay));if(this.loadnow){this._loadContent();}},_createOverlay:function(){var body=dojo.body();var _64a=this.overlayId;var _64b=dojo.byId(_64a);if(!_64b){_64b=document.createElement("div");_64b.setAttribute("id",_64a);dojo.addClass(_64b,this.noprintClass);var _64c=this._pageSize();dojo.style(_64b,{display:"none",position:"absolute",top:"0",left:"0",zIndex:this.overlayZindex,width:"100%",height:_64c[1]+"px"});body.insertBefore(_64b,body.firstChild);}try{filter=dojo.style(_64b,"filter");if(filter&&dojo.isIE){if(filter.indexOf(imghost)==-1){filter=filter.replace("/agbeta",imghost+"/agbeta");dojo.style(_64b,"filter",filter);}}}catch(e){}return _64b;},_createLightbox:function(_64d){var body=dojo.body();var _64e=dojo.byId(this.lightboxId);if(!_64e){_64e=document.createElement("div");_64e.setAttribute("id",this.lightboxId);dojo.style(_64e,{display:"none",position:"absolute",zIndex:this.containerZindex});body.insertBefore(_64e,_64d.nextSibling);}_64e.innerHTML="";return _64e;},_createLoader:function(){var body=dojo.body();var _64f=dojo.byId("loadingImage");if(!_64f){if(this.loaderSrc.endswith(".swf")){_64f=this._createLoaderSwf(this.loaderSrc);}else{_64f=this._createLoaderImage(this.loaderSrc);}dojo.style(_64f,{display:"none",visibility:"hidden",position:"absolute",zIndex:this.loaderZindex});body.insertBefore(_64f,body.firstChild);}return _64f;},_createLoaderSwf:function(src){var _650=document.createElement("embed");_650.setAttribute("id",this.loaderId);_650.setAttribute("name","FlashProduct");_650.setAttribute("src",src);_650.setAttribute("swLiveConnect",true);_650.setAttribute("width",this.loaderWidth);_650.setAttribute("height",this.loaderHeight);_650.setAttribute("scale","noborder");_650.setAttribute("quality","high");_650.setAttribute("type","application/x-shockwave-flash");_650.setAttribute("pluginspace","http://www.macromedia.com/go/getflashplayer");_650.setAttribute("wmode","transparent");return _650;},_createLoaderImage:function(src){var _651=document.createElement("img");_651.setAttribute("id",this.loaderId);_651.setAttribute("src",src);_651.setAttribute("width",this.loaderWidth);_651.setAttribute("height",this.loaderHeight);return _651;},_loadContent:function(){if(this.domNode&&!this.node){this.node=this.domNode;}if(this.loader&&this.showloader){var _652=this._pageSize();var _653=this._pageScroll();var _654=_653[1]+((_652[3]-35-this.loader.height)/2);var _655=((_652[0]-20-this.loader.width)/2);dojo.style(this.loader,{display:"block",visibility:"visible",top:_654+"px",left:_655+"px"});}if(this.overlay&&this.showoverlay){dojo.style(this.overlay,{display:"block",visibility:"visible"});}if(this.url){dojo.xhrGet({url:this.url,handleAs:"text",timeout:this.timeout,load:dojo.hitch(this,this._onSuccess),error:dojo.hitch(this,this._onError)});}else{if(this.contents){this.lightbox.innerHTML=agi.requester.stripScripts(this.contents);this._ready=true;this.show();agi.requester.evalScripts(this.contents);this._enableOverlayClick();}else{if(this.node){var node=dojo.byId(this.node);this.lightbox.appendChild(dojo.byId(node));dojo.style(node,"display","block");this._ready=true;this.show();this._enableOverlayClick();}}}},_onSuccess:function(_656,_657){this.lightbox.innerHTML=agi.requester.stripScripts(_656);this._ready=true;this.show();agi.requester.evalScripts(_656);this._enableOverlayClick();return _656;},_onError:function(_658,_659){this.hide();return _658;},show:function(_65a){if(_65a){this._checkPositioning();}this._showPhase0();this._showPhase1();this._showPhase2();this.postShow();},_showPhase0:function(){if(!this._ready){return this._loadContent();}if(this._reset){this._checkPositioning();this._reset=false;}if(this.contents){this.lightbox.innerHTML=this.contents;}dojo.style(this.lightbox,"overflow",this.overflow);if(this.loader){dojo.style(this.loader,{display:"none",visibility:"hidden"});}if(this.overlay&&this.showoverlay){dojo.style(this.overlay,{display:"block",visibility:"visible"});}},_showPhase1:function(){var _65b=this._pageScroll();var _65c=this.top+_65b[1];var _65d={left:"-9999px",top:_65c+"px",visibility:"visible",display:"block"};if(this.height){_65d.height=this.height+"px";}if(this.width){_65d.width=this.width+"px";}dojo.style(this.lightbox,_65d);},_showPhase2:function(){var _65e=this._pageSize();if(this.left==null){this.left=((_65e[0]-this.lightbox.offsetWidth)/2);}var _65f={left:this.left+"px"};dojo.style(this.lightbox,_65f);this._resizeOverlay();this._enableKeypressListener();if(!this._bgIframe){var _660=this.lightbox;if(this.overlay&&this.showoverlay){_660=this.overlay;}this._bgIframe=new dijit.BackgroundIframe(_660);}this._showing=true;},postShow:function(){return;},hide:function(_661){if(!this._showing){return;}if(this.overlay){this.overlay.onclick=function(){return false;};dojo.style(this.overlay,{display:"none",visibility:"hidden"});}if(this.loader){dojo.style(this.loader,{display:"none",visibility:"hidden"});}if(this.lightbox){dojo.style(this.lightbox,{display:"none",visibility:"hidden"});if(_661){this.reset();}else{this.contents=this.lightbox.innerHTML;}}this._disableKeypressListener();this._showing=false;},reset:function(){if(this.node){dojo.style(this.node,{display:"none"});dojo.place(this.node,dojo.body(),"last");}this.lightbox.innerHTML="";this.contents=null;this.url=null;this.domNode=null;this.top=null;this.left=null;this._ready=false;this._reset=true;},_enableOverlayClick:function(){if(this.overlay&&this.allowclick){this._overlayClick=dojo.connect(this.overlay,"onclick",dojo.hitch(this,this.hide));}},_disableOverlayClick:function(){if(this._overlayClick){dojo.disconnect(this._overlayClick);this._overlayClick=null;}},_enableKeypressListener:function(){if(this.closeKey&&!this._keypressListener){this._keypressListener=dojo.connect(document,"keypress",dojo.hitch(this,this._onKeypress));}},_disableKeypressListener:function(){if(this._keypressListener){dojo.disconnect(this._keypressListener);this._keypressListener=null;}},_onKeypress:function(evt){if(evt.charOrCode==this.closeKey){this.hide();}},_resizeOverlay:function(){if(this.overlay){var _662=this._pageSize();dojo.style(this.overlay,"height",_662[1]+"px");}},_pageScroll:function(){var _663=0;if(self.pageYOffset){_663=self.pageYOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){_663=document.documentElement.scrollTop;}else{if(document.body){_663=document.body.scrollTop;}}}var _664=[null,_663];return _664;},_pageSize:function(){var _665,_666;if(window.innerHeight&&window.scrollMaxY){_665=document.body.scrollWidth;_666=window.innerHeight+window.scrollMaxY;}else{if(document.body.scrollHeight>document.body.offsetHeight){_665=document.body.scrollWidth;_666=document.body.scrollHeight;}else{_665=document.body.offsetWidth;_666=document.body.offsetHeight;}}var _667,_668;if(self.innerHeight){_667=self.innerWidth;_668=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){_667=document.documentElement.clientWidth;_668=document.documentElement.clientHeight;}else{if(document.body){_667=document.body.clientWidth;_668=document.body.clientHeight;}}}var _669,_66a;if(_666<_668){_66a=_668;}else{_66a=_666;}if(_665<_667){_669=_667;}else{_669=_665;}var _66b=[_669,_66a,_667,_668];return _66b;}});}if(!dojo._hasResource["ag.widget.Lightbox"]){dojo._hasResource["ag.widget.Lightbox"]=true;dojo.provide("ag.widget.Lightbox");ag.widget.Lightbox=agi.widget.Lightbox;}if(!dojo._hasResource["dojo.NodeList-traverse"]){dojo._hasResource["dojo.NodeList-traverse"]=true;dojo.provide("dojo.NodeList-traverse");dojo.extend(dojo.NodeList,{_buildArrayFromCallback:function(_66c){var ary=[];for(var i=0;i<this.length;i++){var _66d=_66c.call(this[i],this[i],ary);if(_66d){ary=ary.concat(_66d);}}return ary;},_filterQueryResult:function(_66e,_66f){var _670=dojo.filter(_66e,function(node){return dojo.query(_66f,node.parentNode).indexOf(node)!=-1;});var _671=this._wrap(_670);return _671;},_getUniqueAsNodeList:function(_672){var ary=[];for(var i=0,node;node=_672[i];i++){if(node.nodeType==1&&dojo.indexOf(ary,node)==-1){ary.push(node);}}return this._wrap(ary,null,this._NodeListCtor);},_getUniqueNodeListWithParent:function(_673,_674){var ary=this._getUniqueAsNodeList(_673);ary=(_674?this._filterQueryResult(ary,_674):ary);return ary._stash(this);},_getRelatedUniqueNodes:function(_675,_676){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_676),_675);},children:function(_677){return this._getRelatedUniqueNodes(_677,function(node,ary){return dojo._toArray(node.childNodes);});},closest:function(_678){var self=this;return this._getRelatedUniqueNodes(_678,function(node,ary){do{if(self._filterQueryResult([node],_678).length){return node;}}while((node=node.parentNode)&&node.nodeType==1);return null;});},parent:function(_679){return this._getRelatedUniqueNodes(_679,function(node,ary){return node.parentNode;});},parents:function(_67a){return this._getRelatedUniqueNodes(_67a,function(node,ary){var pary=[];while(node.parentNode){node=node.parentNode;pary.push(node);}return pary;});},siblings:function(_67b){return this._getRelatedUniqueNodes(_67b,function(node,ary){var pary=[];var _67c=(node.parentNode&&node.parentNode.childNodes);for(var i=0;i<_67c.length;i++){if(_67c[i]!=node){pary.push(_67c[i]);}}return pary;});},next:function(_67d){return this._getRelatedUniqueNodes(_67d,function(node,ary){var next=node.nextSibling;while(next&&next.nodeType!=1){next=next.nextSibling;}return next;});},nextAll:function(_67e){return this._getRelatedUniqueNodes(_67e,function(node,ary){var pary=[];var next=node;while((next=next.nextSibling)){if(next.nodeType==1){pary.push(next);}}return pary;});},prev:function(_67f){return this._getRelatedUniqueNodes(_67f,function(node,ary){var prev=node.previousSibling;while(prev&&prev.nodeType!=1){prev=prev.previousSibling;}return prev;});},prevAll:function(_680){return this._getRelatedUniqueNodes(_680,function(node,ary){var pary=[];var prev=node;while((prev=prev.previousSibling)){if(prev.nodeType==1){pary.push(prev);}}return pary;});},andSelf:function(){return this.concat(this._parent);},first:function(){return this._wrap(((this[0]&&[this[0]])||[]),this);},last:function(){return this._wrap((this.length?[this[this.length-1]]:[]),this);},even:function(){return this.filter(function(item,i){return i%2!=0;});},odd:function(){return this.filter(function(item,i){return i%2==0;});}});}if(!dojo._hasResource["ag.widget.CardPickerWidget"]){dojo._hasResource["ag.widget.CardPickerWidget"]=true;dojo.provide("ag.widget.CardPickerWidget");dojo.declare("ag.widget.CardPickerWidget",[ag.classes.Identified],{card_picker_lightbox:null,tones:"",categories:"",constructor:function(){var _681=dojo.queryToObject(location.search.substr(1));if(_681.cardpicker){this.display_widget_container(null);}this.attach_open_button();},attach_open_button:function(){dojo.query("#picker_open_button").connect("onclick",this,this.display_widget_container);},display_widget_container:function(_682){if(_682){dojo.stopEvent(_682);}var url=ahost+"/cardpicker/";if(this.card_picker_lightbox==null){this.card_picker_lightbox=new ag.widget.Lightbox({url:url,lightboxId:"card_picker_lightbox",overlayId:"agi-overlay",node:"cardpickertab",showloader:false,loadnow:true,allowclick:true,width:968});}else{this.card_picker_lightbox.show();this.init_widget();}},init_widget:function(){this.tones=dojo.query(".click",dojo.byId("agi-product-tone"));this.categories=dojo.query(".click",dojo.byId("agi-product-category"));dojo.query(".click",dojo.byId("agi-product-tone")).connect("onclick",this,this.tone_click);dojo.query(".click",dojo.byId("agi-product-category")).connect("onclick",this,this.category_click);dojo.query("#hide").connect("onclick",this,this.hide_lightbox);dojo.query(".click",dojo.byId("agi-cardpicker")).removeClass("selected");dojo.query(".click",dojo.byId("agi-product-tone")).first().addClass("selected");dojo.query(".click",dojo.byId("agi-product-category")).first().addClass("selected");this.check_combo();},check_combo:function(){var _683=dojo.query(".selected",dojo.byId("agi-product-tone")).parent().attr("id");var _684=dojo.query(".selected",dojo.byId("agi-product-category")).parent().attr("id");var _685=_683+" "+_684;dojo.forEach(combos,function(_686,i){if(_685==_686){dojo.attr("card-wrapper","innerHTML",product_wrappers[i]);}});},tone_click:function(e){this.tones.removeClass("selected");dojo.query(e.target).addClass("selected");this.check_combo();},category_click:function(e){this.categories.removeClass("selected");dojo.query(e.target).addClass("selected");this.check_combo();},hide_lightbox:function(){this.card_picker_lightbox.hide();}});}if(!dojo._hasResource["ag.controllers.StandardPage"]){dojo._hasResource["ag.controllers.StandardPage"]=true;dojo.provide("ag.controllers.StandardPage");dojo.declare("ag.controllers.StandardPage",[ag.controllers.KanaLiveChat,ag.search.SearchMixin,ag.widget.QuickshopMultiMixin],{constructor:function(){this.navigation_search=new ag.widget.NavigationSearch();this.card_picker_widget=new ag.widget.CardPickerWidget();if(this.is_from_yahoo()&&!(this.is_registered_from_yahoo())){this.display_yahoo_lightbox();}},display_yahoo_lightbox:function(){if(typeof ag_lightbox==="undefined"){ag_lightbox=this.create_yahoo_lightbox();dojo.subscribe("hide_yahoo_lightbox",this,function(){ag_lightbox.hide();});}ag_lightbox.show();},create_yahoo_lightbox:function(){var host=ahost;if(window.location.protocol=="https:"){host=shost;}var node=dojo.create("iframe",{className:"yahoo-iframe",src:host+"/yahoo"});return new ag.widget.Lightbox({lightboxId:"ag-yahoo-lightbox",overlayId:"agi-overlay",node:node,showloader:false,loadnow:false,allowclick:false,width:1000});},is_from_yahoo:function(){return this.get_url_vars()["from_yh"]=="0";},is_registered_from_yahoo:function(){return (MagicCookie.getCookieValue("from_yh")=="1");},get_url_vars:function(){var vars={};var _687=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,_688){vars[key]=_688;});return vars;}});}if(!dojo._hasResource["ag.controllers.StoragePage"]){dojo._hasResource["ag.controllers.StoragePage"]=true;dojo.provide("ag.controllers.StoragePage");dojo.declare("ag.controllers.StoragePage",[ag.controllers.StandardPage],{storage:null,constructor:function(){this.storage=new agi.storage.Storage();}});}dojo.publish("/ag.layers.storage/loaded/");dojo.i18n._preloadLocalizations("ag.layers.nls.storage",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
