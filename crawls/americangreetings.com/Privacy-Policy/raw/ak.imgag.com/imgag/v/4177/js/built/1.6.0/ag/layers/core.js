/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

dojo.provide("ag.layers.core");if(!dojo._hasResource["dojox.encoding.base64"]){dojo._hasResource["dojox.encoding.base64"]=true;dojo.provide("dojox.encoding.base64");dojo.getObject("encoding.base64",true,dojox);(function(){var p="=";var _1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var _2=dojox.encoding;_2.base64.encode=function(ba){var s=[],l=ba.length;var rm=l%3;var x=l-rm;for(var i=0;i<x;){var t=ba[i++]<<16|ba[i++]<<8|ba[i++];s.push(_1.charAt((t>>>18)&63));s.push(_1.charAt((t>>>12)&63));s.push(_1.charAt((t>>>6)&63));s.push(_1.charAt(t&63));}switch(rm){case 2:var t=ba[i++]<<16|ba[i++]<<8;s.push(_1.charAt((t>>>18)&63));s.push(_1.charAt((t>>>12)&63));s.push(_1.charAt((t>>>6)&63));s.push(p);break;case 1:var t=ba[i++]<<16;s.push(_1.charAt((t>>>18)&63));s.push(_1.charAt((t>>>12)&63));s.push(p);s.push(p);break;}return s.join("");};_2.base64.decode=function(_3){var s=_3.split(""),_4=[];var l=s.length;while(s[--l]==p){}for(var i=0;i<l;){var t=_1.indexOf(s[i++])<<18;if(i<=l){t|=_1.indexOf(s[i++])<<12;}if(i<=l){t|=_1.indexOf(s[i++])<<6;}if(i<=l){t|=_1.indexOf(s[i++]);}_4.push((t>>>16)&255);_4.push((t>>>8)&255);_4.push(t&255);}while(_4[_4.length-1]==0){_4.pop();}return _4;};})();}if(!dojo._hasResource["agi.base64"]){dojo._hasResource["agi.base64"]=true;dojo.provide("agi.base64");agi.base64={encode:function(_5){if(!_5){return "";}return dojox.encoding.base64.encode(this.string_to_bytes(_5));},decode:function(_6){if(!_6){return "";}return this.bytes_to_str(dojox.encoding.base64.decode(_6));},string_to_bytes:function(_7){var _8=[];for(var i=0;i<_7.length;i++){_8.push(_7.charCodeAt(i));}return _8;},bytes_to_str:function(_9){var _a="";dojo.forEach(_9,function(_b){_a+=String.fromCharCode(_b);});return _a;}};}if(!dojo._hasResource["agi.cookie.NVP"]){dojo._hasResource["agi.cookie.NVP"]=true;dojo.provide("agi.cookie.NVP");agi.cookie.NVP.getValue=function(_c,_d,_e,_f){var _10,_11;_10=_c.indexOf(_f+_d+_e);if(-1==_10){_10=_c.indexOf(_d+_e);if(-1==_10){return null;}_10+=_d.length+_e.length;}else{_10+=_f.length+_d.length+_e.length;}_11=_c.indexOf(_f,_10);if(-1==_11){_11=_c.length;}return _c.substring(_10,_11);};agi.cookie.NVP.toMap=function(s,_12,sep){var map=[];var _13=s.toString().split(_12);for(var i=0;i<_13.length;i++){var _14=_13[i];if(_14){var _15=_14.split(sep);map[unescape(_15[0])]=unescape(_15[1]);}}return map;};agi.cookie.NVP.fromMap=function(map,_16,sep){var s="";for(var _17 in map){if(typeof map[_17]=="null"){continue;}else{if(typeof map[_17]=="function"){continue;}else{s+=escape(_17)+sep+escape(map[_17])+_16;}}}if(s){s=s.substr(0,s.length-1);}return s;};}if(!dojo._hasResource["agi.cookie.AGICookie"]){dojo._hasResource["agi.cookie.AGICookie"]=true;dojo.provide("agi.cookie.AGICookie");agi.cookie.AGICookie.toString=function(){return "AGICookie";};agi.cookie.AGICookie.SUBHOSTS=[[/\.yahoo\./,"_yh"],[/\.msn\./,"_msn"],[/\.aol\.|^aol\./,"_aol"],[/\.target\./,"_tg"]];agi.cookie.AGICookie.SUBPATHS=[[/\/birthday-calendar/,"_bcal"]];agi.cookie.AGICookie.overlays={};agi.cookie.AGICookie.getCookieDomain=function(){var _18=window.location.hostname.split(".");var idx=_18.length-2;var tld=_18.slice(-1);if(tld!="com"&&tld!="net"&&tld!="org"){idx=_18.length-3;}_18=_18.slice(idx);return "."+_18.join(".");};agi.cookie.AGICookie.getCookieName=function(_19){var _1a=window.location.hostname.split(".");var _1b=_19;var hn="";if(_1a.length<3){hn="www";}else{hn=_1a[0];}dojo.forEach(agi.cookie.AGICookie.SUBHOSTS,function(_1c){if(_1c[0].test(window.location.hostname)){_19+=_1c[1];}});dojo.forEach(agi.cookie.AGICookie.SUBPATHS,function(_1d){if(_1d[0].test(window.location.pathname)){_19+=_1d[1];}});dojo.forEach(["dev","vanilla","work","stage"],function(pfx){if(hn.startswith(pfx)){_19+="_"+pfx;}});return escape(_19);};agi.cookie.AGICookie.getCookieValueRaw=function(_1e,_1f){var _20=agi.cookie.AGICookie.getCookieName(_1e);var c=agi.cookie.AGICookie.overlays[_20];if(c){}else{c=agi.cookie.AGICookie.getCookie(_1e);if(typeof c=="null"){return null;}}var v=agi.cookie.NVP.getValue(agi.base64.decode(c),_1f,"=","&");if(v){return unescape(v);}return v;};agi.cookie.AGICookie.getCookie=function(_21){var c=agi.cookie.NVP.getValue(dojo.doc.cookie,agi.cookie.AGICookie.getCookieName(_21),"=",";");if(!c){return c;}c=unescape(c);while(c.indexOf("%0A")>-1||c.indexOf("%0a")>-1){c=c.replace(/\%0[aA]/,"");}c=unescape(c);return c;};agi.cookie.AGICookie.overlayCookies=function(_22){dojo.forEach(_22,function(_23){agi.cookie.AGICookie.overlays[_23.name]=unescape(unescape(_23.value));});};agi.cookie.AGICookie.setCookie=function(_24,_25,_26,_27){_24=agi.cookie.AGICookie.getCookieName(_24);var cki=_24+"="+escape(_25)+";";if(_27){_26="Thursday, 31-Dec-2037 00:01:00 GMT";}if(_26){cki=cki+"expires="+_26+";";}cki=cki+"path=/;domain="+agi.cookie.AGICookie.getCookieDomain();dojo.doc.cookie=cki;};agi.cookie.AGICookie.expireCookie=function(_28){agi.cookie.AGICookie.setCookie(_28,"","Friday, 01-Jan-99 00:00:00 GMT");};agi.cookie.AGICookie.getCookieValue=function(_29,_2a){var v=agi.cookie.AGICookie.getCookieValueRaw(_29,_2a);if(!v&&_29=="customer"&&_2a=="name"){v=agi.cookie.AGICookie.getCookieValueRaw(_29,"email");}if(!v&&_29=="customer"&&_2a=="name"){v="member";}return v;};agi.cookie.AGICookie.setCookieValue=function(_2b,_2c,_2d,_2e,_2f){var map=null;var c=agi.cookie.AGICookie.getCookie(_2b);if(c){map=agi.cookie.NVP.toMap(agi.base64.decode(c),"&","=");}else{map=[];}map[_2c]=_2d;agi.cookie.AGICookie.setCookie(_2b,agi.base64.encode(agi.cookie.NVP.fromMap(map,"&","=")),_2e,_2f);};}if(!dojo._hasResource["agi.cookie.MagicCookie"]){dojo._hasResource["agi.cookie.MagicCookie"]=true;dojo.provide("agi.cookie.MagicCookie");agi.cookie.MagicCookie.setCookieValue=function(_30,_31,_32){var _33=_32?"mc_p":"mc_s";return agi.cookie.AGICookie.setCookieValue(_33,_30,_31,null,_32);};agi.cookie.MagicCookie.getCookieValue=function(_34){var _35=agi.cookie.AGICookie.getCookieValue("mc_s",_34);if(!_35){_35=agi.cookie.AGICookie.getCookieValue("mc_p",_34);}return _35;};agi.cookie.MagicCookie.delCookieValue=function(_36,_37){return agi.cookie.MagicCookie.setCookieValue(_36,null,_37);};}if(!dojo._hasResource["agi.cookie._base"]){dojo._hasResource["agi.cookie._base"]=true;dojo.provide("agi.cookie._base");agi.cookie.toString=function(){return "AGICookie";};agi.cookie.getMemNum=function(){return agi.cookie.AGICookie.getCookieValue("customer","memnum");};agi.cookie.getMemName=function(){return agi.cookie.AGICookie.getCookieValue("customer","name");};agi.cookie.getCustomerEmail=function(){return agi.cookie.AGICookie.getCookieValue("customer","email");};agi.cookie.getCustomerAge=function(){try{var v=agi.cookie.AGICookie.getCookieValue("customer","age");if(!v){v="";}age=parseInt(v);if(age<18){v="";}else{if(age>65){v="65";}}return v;}catch(er){return "";}};agi.cookie.getCustomerGender=function(){try{var v=agi.cookie.AGICookie.getCookieValue("customer","gender");if(!v){v="";}return v.toLowerCase();}catch(er){return "";}};}if(!dojo._hasResource["agi.cookie"]){dojo._hasResource["agi.cookie"]=true;dojo.provide("agi.cookie");}if(!dojo._hasResource["agi.types"]){dojo._hasResource["agi.types"]=true;dojo.provide("agi.types");dojo.provide("agi.types.ExtArray");(function(){var t=agi.types;var d=dojo;t.toString=function(){return "AGTypes";};d.declare("agi.types.ExtArray",[Array],{toString:function(){return this.declaredClass.split(".")[2]+"("+this._arrayMembers().join(", ")+")";},forEach:function(_38,_39){d.forEach(this._arrayMembers(),_38,_39);return this;},_arrayMembers:function(){var ret=[];for(var i=0;i<this.length;i++){ret.push(this[i]);}return ret;},every:function(_3a,_3b){return d.every(this._arrayMembers(),_3a,_3b);},some:function(_3c,_3d){return d.some(this._arrayMembers(),_3c,_3d);},map:function(_3e,obj){return d.map(this._arrayMembers(),_3e,obj,t.ExtArray);}});d.declare("agi.types.Dict",[],{toString:function(){return this.declaredClass.split(".")[2]+"("+this.keys().join(", ")+")";},fromObject:function(obj){for(m in obj){if(!Object.prototype[m]){this[m]=obj[m];}}},keys:function(){var ret=new t.ExtArray();for(m in this){if(d.isString(m)&&!t.Dict.prototype[m]&&m!="declaredClass"&&m!="preamble"){ret.push(m);}}ret.sort();return ret;},values:function(){var ret=new t.ExtArray();this.keys().forEach(d.hitch(this,function(i){ret.push(this[i]);}));return ret;},items:function(){var _3f=new t.ExtArray();this.keys().forEach(d.hitch(this,function(i){_3f.push([i,this[i]]);}));return _3f;}});})();}if(!dojo._hasResource["agi.util"]){dojo._hasResource["agi.util"]=true;dojo.provide("agi.util");if(typeof $=="undefined"){$=function(i){return dojo.byId(i);};}(function(){var u=agi.util;var t=agi.types;var d=dojo;u.toString=function(){return "AGUtil";};u.dir=function(_40){ret=[];if(d.isArray(_40)){for(x in _40){if(!Array.prototype[x]){ret.push([x,_40[x]]);}}}else{if(d.isString(_40)){for(x in _40){if(!String.prototype[x]){ret.push([x,_40[x]]);}}}else{d.forEach(_40,function(x){ret.push([x,_40[x]]);});}}return ret;};u.getClassName=function(_41){if(!_41.declaredClass){if(d.isString(_41)){return "String";}else{if(d.isArray(_41)||d.isArrayLike(_41)){return "Array";}else{if(d.isFunction(_41)){return "function";}else{if(d.isObject(_41)){return "Object";}}}}}else{var _42=_41.declaredClass.split(".");return _42[_42.length-1];}};u.capitalize=function(str){return str.charAt(0).toUpperCase()+str.substring(1);};u.randInt=function(max){return parseInt((parseInt(max,10)*Math.random())/Math.random(),10);};u.escapeQuotAmp=function(_43){return _43.toString().replace(/"/g,"&quot;").replace(/&/g,"&amp;");};u.toPx=function(num){return num.toString()+"px";};u.posToString=function(_44){var _45=[];var _46=["x","y","z","t","l","h","w","m","n","top","left","right","height","width","length","breadth","max","min","high","low","zIndex"];var _47=function(pos,s){if(pos[s]){_45.push(s+": "+pos[s]);}return;};for(i=0;i<_46.length;i++){_47(_44,_46[i]);}return "{"+_45.join(", ")+"}";};u._debounce_waiting=false;u._setDebounceWaitingFalse=function(){u._debounce_waiting=false;};u.debounce=function(x,_48,_49){var _4a=3000;if(_49){_4a=_49*1000;}if(window.setDoPopAway){setDoPopAway(false);}if(u._debounce_waiting){if(_48){alert("Please wait while we process your request.");}return false;}else{u._debounce_waiting=true;setTimeout(u._setDebounceWaitingFalse,_4a);return true;}};u.collection_as_array=u.collectionToArray=function(_4b){var ret=[];d.forEach(_4b,function(i){ret.push(i);});return ret;};u.extend_array=u.extendArray=function(_4c,_4d){d.forEach(_4d,function(i){_4c.push(i);});};u.product_id=u.getProdId=function(_4e){return "productw-"+_4e;};u.isUndef=function(_4f){return (_4f===undefined);};u.isDef=function(_50){if(_50){return true;}else{if(_50===""||_50===0){return true;}else{return false;}}};u.isNull=function(_51){return (_51===null);};u.queryOne=function(_52,_53){ret=d.query(_52,_53);if(ret.length<=0){return null;}else{return ret[0];}};u.query_one=u.q1=u.queryOne;u.getQueryVariable=function(_54,_55){var wv;if(webvars){wv=webvars;}if(_55){wv=d.queryToObject(_55);}else{if(!_55&&!wv){wv=d.queryToQbect(window.location.search.substring(1));}}return wv[_54];};u.get_query_variable=u.getQv=u.getQueryVariable;u.truncate=function(_56,_57,_58){_58=_58?_58.toLowerCase():"left";if(_56.length>_57){var _59=0;var ret=_56;var _5a=0;if(_58=="right"){ret=_56.substring(_56.length-_57);ret="..."+ret;}else{if(_58=="left"){_5a=_56.indexOf(" ",_57);ret=_56.substring(_59,(_5a>=0)?_5a:_57);ret+="...";}}}else{ret=_56;}return ret;};u.trunc=u.truncate;u.get_friendly_path=u.getFriendlyPath=function(){return d.doc.location.pathname.split(".pd")[1];};u.set_options=u.setOptions=function(_5b,_5c){_5b.options.length=0;var _5d=agi.html._buildOptions(_5c);var i=0;var o;for(o=0;o<_5d.length;o++){_5b.options[i]=_5d[o];i++;}};u._build_options=u._buildOptions=function(_5e){var _5f=[];var _60=0;var t;for(t=0;t<_5e.length;t++){var _61=_5e[t][1];var _62=_5e[t][0];var o=new Option(_62,_61);_5f[_5f.length]=o;_60++;}if(_60>1){_5f.unshift(new Option("",""));}return _5f;};u.show=function(_63,_64){d.style(_63,{display:_64?_64:"block"});};u.hide=function(_65){d.style(_65,{display:"none"});};u.toggleDisplay=function(_66){if(d.style(_66,"display")=="none"){d.style(_66,{display:"block"});}else{d.style(_66,{display:"none"});}};u.toggle_block=function(_67,_68,_69,_6a){if(_69&&_6a){var _6b=_67.className;if(_6b.indexOf(_69)>-1){d.removeClass(_67,_69);d.addClass(_67,_6a);}else{d.removeClass(_67,_6a);d.addClass(_67,_69);}}u.toggleDisplay(_68);};u.toggleBlock=u.toggle_block;u.get_position=u.getPosition=function(_6c){return d.coords(_6c,true);};u.getAbsolutePosition=function(_6d){return d._abs(_6d,true);};u.isUndefined=function(it){return ((typeof (it)=="undefined")&&(it===undefined));};u.getNameInObj=function(ns,_6e){if(!ns){ns=d.global;}for(var x in ns){if(ns[x]===_6e){return x.toString();}}return null;};u.forward=function(_6f){return function(){return this[_6f].apply(this,arguments);};};u.shallowCopy=function(obj,_70){var i,ret;if(obj===null){return null;}if(d.isObject(obj)){ret=new obj.constructor();for(i in obj){if(u.isUndefined(ret[i])){ret[i]=_70?u.shallowCopy(obj[i],_70):obj[i];}}}else{if(d.lang.isArray(obj)){ret=[];for(i=0;i<obj.length;i++){ret[i]=_70?u.shallowCopy(obj[i],_70):obj[i];}}else{ret=obj;}}return ret;};u.errorToString=function(_71){if(!typeof _71.message=="undefined"){return _71.message;}else{if(!typeof _71.description=="undefined"){return _71.description;}else{return _71;}}};u.raise=function(_72,_73){if(_73){_72=_72+": "+u.errorToString(_73);}else{_72=u.errorToString(_72);}throw _73||new Error(_72);};u.keyList=function(obj){var ret=new t.ExtArray();for(k in obj){if(d.isString(k)){ret.push(k);}}ret.sort();return ret;};u.enumerate=function(arr){var ret=new t.ExtArray();for(var i=0;i<arr.length;i++){ret.push([i,arr[i]]);}return ret;};u.objToDict=function(obj){var ret=new t.Dict();ret.fromObject(obj);return ret;};})();(function(){var arr=Array.prototype;var d=dojo;arr.indexOf=function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj){return i;}}return -1;};arr.contains=function(obj){return this.indexOf(obj)>-1;};arr.remove=function(idx){return this.splice(idx,1);};arr.append=function(_74){return this.push(_74);};arr.extend=function(_75){d.forEach(_75,d.hitch(this,function(i){this.push(i);}));};})();(function(){var str=String.prototype;str.startswith=function(_76){return this.match("^"+_76)==_76;};str.endswith=function(_77){return this.match(_77+"$")==_77;};str.contains=function(_78){return this.match(_78)!=null;};str.isdigit=function(_79){if(this=="0"){return true;}else{var _7a=_79||10;var val=parseInt(this,_7a);if((val===0)||(val.toString()=="NaN")){return false;}else{return true;}}};})();}if(!dojo._hasResource["agi.dom.window"]){dojo._hasResource["agi.dom.window"]=true;dojo.provide("agi.dom.window");agi.dom.window._scrollInterval=null;agi.dom.window.scroll_into_view=function(_7b){try{clearInterval(agi.dom.window._scrollInterval);}catch(e){}var _7c=dojo.byId(_7b);var _7d=dojo.coords(_7c,true);var top=_7d.y;var _7e=_7d.y+_7d.h;var _7f=dijit.getViewport();var _80=_7f.t;var _81=_7f.l;var _82=Math.floor((agi.dom.window.getSize().height-_7c.clientHeight)/2);var _83=agi.dom.window.getLightboxTop();if(_80<top&&_7e<agi.dom.window.getSize().height){return;}if((_7e-_83)<agi.dom.window.getSize().height){agi.dom.window.scrollTo(_83);}else{if(_82>0){agi.dom.window.scrollTo(top-_82);}else{if(_80>top){agi.dom.window.scrollTo(top);}}}};agi.dom.window.scrollTo=function(y){if(y>agi.dom.window.getMaxScroll()){y=agi.dom.window.getMaxScroll();}step=Math.abs(dijit.getViewport().t-y)/25;agi.dom.window._scrollInterval=setInterval("agi.dom.window.smoothScroll("+step+","+y+")",5);};agi.dom.window.smoothScroll=function(_84,_85){var _86=dijit.getViewport().t;var _87;if(_86>_85){_87=Math.max(_86-_84,_85);}else{_87=Math.min(_86+_84,_85);}window.scroll(0,_87);if(_87==_85){clearInterval(agi.dom.window._scrollInterval);}};agi.dom.window.getSize=function(){var _88={};_88.width=0;_88.height=0;if(typeof (window.innerWidth)=="number"){_88.width=window.innerWidth;_88.height=window.innerHeight;}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){_88.width=document.documentElement.clientWidth;_88.height=document.documentElement.clientHeight;}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){_88.width=document.body.clientWidth;_88.height=document.body.clientHeight;}}}return _88;};agi.dom.window.getScrollOffset=function(){var _89={};_89.pageYOffset=dijit.getViewport().t;_89.pageXOffset=dijit.getViewport().l;return _89;};agi.dom.window.getElementScrollOffset=function(_8a){var _8b=dojo.byId(_8a);var _8c={};if(typeof (_8b.pageYOffset)=="number"){_8c.pageYOffset=_8b.pageYOffset;_8c.pageXOffset=_8b.pageXOffset;}else{_8c.pageYOffset=_8b.scrollTop;_8c.pageXOffset=_8b.scrollLeft;}return _8c;};agi.dom.window.getMaxScroll=function(){var _8d=document.body.clientHeight;if(typeof (window.innerHeight)=="number"){var _8e=window.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){var _8e=document.documentElement.clientHeight;}}if(_8d>_8e){return _8d-_8e;}else{return 0;}};agi.dom.window.getLightboxTop=function(){try{var tmp=dojo.byId("lightbox");var top=0;if(tmp.style.display=="none"){return 0;}while(tmp.offsetParent&&tmp.tagName.toUpperCase()!="BODY"){top+=tmp.offsetTop;tmp=tmp.offsetParent;}top+=tmp.offsetTop;if(top>10){return top-10;}else{return top;}}catch(e){return 0;}};agi.dom.window.getStyle=function(el,_8f){return dojo.style(el,_8f);};}if(!dojo._hasResource["agi.validation"]){dojo._hasResource["agi.validation"]=true;dojo.provide("agi.validation");agi.validation.PASS=true;agi.validation.FAIL=false;agi.validation.EMAIL_FAIL="EMAIL_FAIL";agi.validation.IS_EMPTY="IS_EMPTY";agi.validation.TOO_LONG="TOO_LONG";agi.validation.ONE_EMAIL="ONE_EMAIL";agi.validation.defaultErrorMessages=[];agi.validation.defaultErrorMessages[agi.validation.EMAIL_FAIL]=" is not a valid email address.";agi.validation.defaultErrorMessages[agi.validation.TOO_LONG]=" is too long to fit in our database; please choose an alternative email address.";agi.validation.defaultErrorMessages[agi.validation.IS_EMPTY]="Please specify at least one recipient's email for your card.";agi.validation.defaultErrorMessages[agi.validation.ONE_EMAIL]="Please enter one email address at a time.";agi.validation.isEmpty=function(val){if(agi.validation.trim(val)==""){return true;}return false;};agi.validation.ltrim=function(val){return val.replace(/^\s*/g,"");};agi.validation.rtrim=function(val){return val.replace(/\s*$/g,"");};agi.validation.trim=function(val){return val.replace(/^\s*|\s*$/g,"");};agi.validation.write_message=function(_90,_91,_92){var _93=dojo.byId(_90);var _94=_93.className;if(_91){if(_92){_93.setAttribute("class",_92);_93.setAttribute("className",_92);}_93.style.display="block";_93.innerHTML=_91;agi.dom.window.scroll_into_view(_90);}else{_93.style.display="none";}};agi.validation.reformat_emails=function(_95,_96){var _97="";for(var i=0;i<_95.length;i++){if(!agi.validation.isEmpty(_95[i])){_97+=agi.validation.trim(_95[i]);if(i<_95.length-1){_97+=", ";}}}if(_96){_96.value=_97;}return _97;};agi.validation.validate_email=function(_98,_99,_9a){var _9b=agi.validation.trim(_98);var _9c;var _9d;var _9e=[];var _9f;if(!_99){_99=75;}if(!_9a){_9a;}if(_9b==""&&!_9a){throw (agi.validation.IS_EMPTY);}else{if(_9b==""){return;}}if(_9b.length>_99){throw (agi.validation.TOO_LONG);}if(_9b.match(/.*@$|.*@.*@.|^@.*|^[^@]*$/)){throw (agi.validation.EMAIL_FAIL);}_9c=_9b.split("@")[0];_9d=_9b.split("@")[1];if(_9c==""||_9d==""){throw (agi.validation.EMAIL_FAIL);}if(_9c.match(/.*[*()<>;:,\[\]\\'" ].*/)){throw (agi.validation.EMAIL_FAIL);}if(_9d.indexOf("..")!=-1){throw (agi.validation.EMAIL_FAIL);}_9e=_9d.split(".");_9f=_9e.length;if(_9f==1){throw (agi.validation.EMAIL_FAIL);}if(_9e[_9f-1].length<2||_9e[_9f-1].length>6){throw (agi.validation.EMAIL_FAIL);}return agi.validation.PASS;};agi.validation.validate_emails=function(_a0,_a1,_a2){var _a3=true;var _a4=_a0.value.replace(/;/g,",");var _a5={"error_message":"","error_codes":[],"pass_validation":agi.validation.FAIL,"emails":""};if(!_a1){_a1=true;}if(!_a2){_a2=agi.validation.defaultErrorMessages;}if(_a1){_a4=_a4.replace(/\n/g,", ");_a4=_a4.replace(/\r/g,", ");}if(agi.validation.isEmpty(_a4)||agi.validation.isEmpty(_a4.replace(/,/g,""))){_a3=agi.validation.FAIL;_a5.error_message+="<p>"+_a2[agi.validation.IS_EMPTY]+"</p>";}_a4=_a4.split(",");for(i=0;i<_a4.length;i++){try{agi.validation.validate_email(_a4[i],"",true);}catch(e_code){_a5.error_message+="<p>"+_a4[i]+" "+_a2[e_code]+"</p>";_a3=agi.validation.FAIL;_a5.error_codes[_a5.error_codes.length]=e_code+"|"+_a4[i];}}if(_a1){agi.validation.reformat_emails(_a4,_a0);}_a5.emails=_a4;_a5.pass_validation=_a3;return _a5;};agi.validation.validate_checkboxes=function(_a6){var _a7=document.getElementsByName(_a6);var _a8=false;for(var i=0;i<_a7.length;i++){if(_a7[i].checked){_a8=true;break;}}if(!_a8){return agi.validation.FAIL;}return agi.validation.PASS;};agi.validation.Error=function(_a9,_aa,_ab){var _ac=this;this.message=_aa;this.field=_a9;this.type=_ab;};agi.validation.Errors=function(_ad){var _ae=this;this.errors=[];this.display_div=dojo.byId(_ad);this.error_html="<p>%s</p>";this.error_color="#FF0000";this.ERROR="agi-message-area agi-error";this.MESSAGE="agi-message-area agi-message-demo";this.SUCCESS="agi-message-area agi-message-success";this.count=function(){return this.errors.length;};this.is_error=function(){return (this.errors.length>0);};this.display=function(_af){if(_af){agi.validation.write_message(this.display_div.id,this.to_html(),"agi-message-area agi-error");this.mark_fields();}else{agi.validation.write_message(this.display_div.id,null,"agi-message-area agi-error");this.clear_fields();}};this.set_class=function(_b0){var _b1=this.display_div.className;if(_b0&&(_b1.indexOf(_b0)==-1)){message_class=(this.display_div.className)?this.display_div.className+" "+_b0:_b0;this.display_div.setAttribute("class",message_class);this.display_div.setAttribute("className",message_class);}};this.write_message=function(_b2,_b3){if(_b2){this.display_div.style.display="block";this.display_div.innerHTML=_b2;}else{this.display_div.style.display="none";}};this.mark_fields=function(){for(i=0;i<this.errors.length;i++){try{dojo.byId(this.errors[i].field+"-error").className="agi-mesage-area agi-error";}catch(e){}}};this.clear_fields=function(){for(i=0;i<this.errors.length;i++){try{dojo.byId(this.errors[i].field+"-error").className="";}catch(e){}}};this.to_html=function(){var _b4="";for(i=0;i<this.errors.length;i++){_b4+=this.error_html.replace("%s",this.errors[i].message);}return _b4;};this.show=function(){this.display(true);};this.hide=function(){this.display(false);};this.reset=function(){this.hide();this.errors=[];};this.add=function(_b5){this.errors.push(_b5);};this.add_error=function(_b6,_b7,_b8){if(!_b8){_b8=this.ERROR;}this.add(new Error(_b6,_b7,_b8));};};}if(!dojo._hasResource["agi.permissions"]){dojo._hasResource["agi.permissions"]=true;dojo.provide("agi.permissions");agi.permissions.newsletter=1;agi.permissions.yakety_yaks=false;agi.permissions.has_perm=function(_b9,_ba){var _bb=_ba.split("|");for(var i=0;i<_bb.length;i++){var _bc=_bb[i].split("^");if((_b9==_bc[0])&&(_bc[1]=="C")){return true;}}return false;};agi.permissions.hide_signup=function(_bd){var _be;var _bf=dojo.byId("agi-signup-cont");if(_bf){var _c0=agi.cookie.MagicCookie.getCookieValue("vanperms");if((_c0!==null)&&(_c0!==_be)&&(_c0!=="")){if(agi.permissions.has_perm(1,_c0)){dojo.style(_bf,"display","none");}}}};agi.permissions.newsletter_signup=function(_c1,_c2){if(!_c1){_c1="";}if(_c2=="yakety-yaks"){agi.permissions.yakety_yaks=true;}agi.permissions.write_newsletter_message("");var _c3=dojo.byId("agi-newsletter-email");_c3.value=agi.validation.trim(_c3.value);if(agi.permissions.validate_email(_c3.value)){var _c4={url:"/newsletter/signup.pd",handleAs:"json",content:{email:_c3.value,"page":_c1,"referer_page":_c2},load:agi.permissions.newsletter_success,error:agi.permissions.newsletter_error};dojo.xhrPost(_c4);}else{agi.permissions.write_newsletter_message("Please enter a valid email address.");}};agi.permissions.newsletter_success=function(_c5,_c6){msg_area=dojo.byId("agi-newsletter-message-area");agi.permissions.write_newsletter_message(_c5.message);if(_c5.status>-1){dojo.byId("agi-newsletter-email").value="your email address";dojo.byId("agi-newsletter-email").blur();}if(agi.permissions.yakety_yaks){agx.currentPage.controller.redirect_to_coupon();}};agi.permissions.newsletter_clear=function(){agi.permissions.write_newsletter_message("");dojo.byId("agi-newsletter-email").value="your email address";dojo.byId("agi-newsletter-email").blur();};agi.permissions.newsletter_error=function(_c7,_c8){agi.permissions.write_newsletter_message("We were unable to process your request.  Please try again in a few minutes.");};agi.permissions.write_newsletter_message=function(_c9){msg_area=dojo.byId("agi-newsletter-message-area");msg_area.innerHTML=_c9;if(!_c9){agi.util.hide(msg_area);}else{agi.util.show(msg_area);}};agi.permissions.email_focus=function(_ca,_cb){if(_ca.value=="your email address"&&_cb){_ca.value="";}if(_ca.value==""&&!_cb){_ca.value="your email address";}};agi.permissions.validate_email=function(_cc){if(!_cc){return false;}else{try{agi.validation.validate_email(_cc);return true;}catch(e){return false;}}};}if(!dojo._hasResource["ag.util"]){dojo._hasResource["ag.util"]=true;dojo.provide("ag.util");ag.util=agi.util;}if(!dojo._hasResource["agi.dom._base"]){dojo._hasResource["agi.dom._base"]=true;dojo.provide("agi.dom._base");agi.dom.make_text=function(_cd){var re=/\&\#(\d*)\;/g;_cd=_cd.replace(re,agi.dom.get_unicode);var _ce=document.createTextNode(_cd);return _ce;};agi.dom.get_unicode=function(str,_cf,_d0,s){_cf=parseInt(_cf);return String.fromCharCode(_cf);};agi.dom.make_node=function(_d1,_d2,_d3){var _d4=document.createElement(_d1);if(_d2!=undefined){for(var _d5 in _d2){if(_d5.toLowerCase()=="class"||_d5.toLowerCase()=="classname"){_d4.className=_d2[_d5];}else{_d4.setAttribute(_d5,_d2[_d5]);}}}if(_d3!=undefined){if(!_d3.push||!_d3.join){_d3=[_d3];}for(var x=0;x<_d3.length;x++){try{_d4.appendChild(_d3[x]);}catch(e){}}}return _d4;};agi.dom.swap_node=function(_d6,_d7){_d6.parentNode.replaceChild(_d7,_d6);return _d7;};agi.dom.remove_children=function(_d8){var _d9=dojo.byId(_d8);var _da=_d9.childNodes;for(var i=_da.length-1;i>=0;i--){_d9.removeChild(_da[i]);}};agi.dom.addHiddenInputElement=function(_db,_dc,_dd){formElement=dojo.byId(_db);var _de=agi.dom.make_node("input",{"type":"hidden","name":_dc,"id":_dc,"value":_dd});if(dojo.byId(_dc)){var _df=dojo.byId(_dc);agi.dom.swap_node(_df,_de);return;}formElement.appendChild(_de);};agi.dom.insert_css_text=function(_e0,doc,URI){if(!_e0){return;}if(!doc){doc=document;}var _e1=doc.createElement("style");_e1.setAttribute("type","text/css");var _e2=dojo.query("head")[0];if(!_e2){return;}else{_e2.appendChild(_e1);}if(_e1.styleSheet){var _e3=function(){try{_e1.styleSheet.cssText=_e0;}catch(e){}};if(_e1.styleSheet.disabled){setTimeout(_e3,10);}else{_e3();}}else{var _e4=doc.createTextNode(_e0);_e1.appendChild(_e4);}return _e1;};agi.dom.find_parent=function(el,_e5){if(el==null){return null;}else{if(!_e5){return el.parentNode;}else{if(el.nodeType==1&&el.tagName.toLowerCase()==_e5.toLowerCase()){return el;}else{return agi.dom.find_parent(el.parentNode,_e5);}}}};agi.dom.selectedValue=function(el){return el[el.selectedIndex].value;};}if(!dojo._hasResource["ag.dom._base"]){dojo._hasResource["ag.dom._base"]=true;dojo.provide("ag.dom._base");ag.dom=agi.dom;}if(!dojo._hasResource["ag.dom"]){dojo._hasResource["ag.dom"]=true;dojo.provide("ag.dom");}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(_e6){var _e7=this;dojo.mixin(_e7,_e6);_e7.node=_e6.node;_e7._showArgs=dojo.mixin({},_e6);_e7._showArgs.node=_e7.node;_e7._showArgs.duration=_e7.showDuration;_e7.showAnim=_e7.showFunc(_e7._showArgs);_e7._hideArgs=dojo.mixin({},_e6);_e7._hideArgs.node=_e7.node;_e7._hideArgs.duration=_e7.hideDuration;_e7.hideAnim=_e7.hideFunc(_e7._hideArgs);dojo.connect(_e7.showAnim,"beforeBegin",dojo.hitch(_e7.hideAnim,"stop",true));dojo.connect(_e7.hideAnim,"beforeBegin",dojo.hitch(_e7.showAnim,"stop",true));},show:function(_e8){return this.showAnim.play(_e8||0);},hide:function(_e9){return this.hideAnim.play(_e9||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_ea={_fire:function(evt,_eb){if(this[evt]){this[evt].apply(this,_eb||[]);}return this;}};var _ec=function(_ed){this._index=-1;this._animations=_ed||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_ec,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_ee,_ef){if(!this._current){this._current=this._animations[this._index=0];}if(!_ef&&this._current.status()=="playing"){return this;}var _f0=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_f1=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_f2=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_f0);d.disconnect(_f1);d.disconnect(_f2);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_f3,_f4){this.pause();var _f5=this.duration*_f3;this._current=null;d.some(this._animations,function(a){if(a.duration<=_f5){this._current=a;return true;}_f5-=a.duration;return false;});if(this._current){this._current.gotoPercent(_f5/this._current.duration,_f4);}return this;},stop:function(_f6){if(this._current){if(_f6){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_ec,_ea);dojo.fx.chain=function(_f7){return new _ec(_f7);};var _f8=function(_f9){this._animations=_f9||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_f9,function(a){var _fa=a.duration;if(a.delay){_fa+=a.delay;}if(this.duration<_fa){this.duration=_fa;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var _fb=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){_fb._connects.push(d.connect(_fb._pseudoAnimation,evt,function(){_fb._fire(evt,arguments);}));});};d.extend(_f8,{_doAction:function(_fc,_fd){d.forEach(this._animations,function(a){a[_fc].apply(a,_fd);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_fe,_ff){var t=this._pseudoAnimation;t[_fe].apply(t,_ff);},play:function(_100,_101){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_102,_103){var ms=this.duration*_102;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_103);});this._call("gotoPercent",arguments);return this;},stop:function(_104){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_f8,_ea);dojo.fx.combine=function(_105){return new _f8(_105);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _106=d.style(node,"height");return Math.max(_106,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["agi.dom"]){dojo._hasResource["agi.dom"]=true;dojo.provide("agi.dom");}if(!dojo._hasResource["agi.widget.wiper"]){dojo._hasResource["agi.widget.wiper"]=true;dojo.provide("agi.widget.wiper");agi.widget.wiper.get_image_prefix=function(){if(ahost.indexOf("yahoo")>-1){return "yh07";}else{return "agbeta";}};agi.widget.wiper.set_navcookie=function(_107,val){var id=_107;var _108=agi.cookie.MagicCookie;var lnav=_108.getCookieValue("lnav");lnav=lnav?agi.base64.decode(lnav):"";if(!lnav){lnav=id+"="+val;}else{if(lnav.indexOf(id)<0){lnav+="&"+id+"="+val;}else{var rval=(val==0)?"1":"0";lnav=lnav.replace(id+"="+rval,id+"="+val);}}_108.setCookieValue("lnav",agi.base64.encode(lnav));};agi.widget.wiper.wipers=[];agi.widget.wiper.find_wipers=function(){var w=dojo.query(".wipe");for(var i=0;i<w.length;i++){new agi.widget.wiper.Wiper(w[i]);}};dojo.addOnLoad(agi.widget.wiper.find_wipers);agi.widget.wiper.Wiper=function(node){var dw=this;this._container=node;this._anim="";this._height="";this._direction="";this._time=800;this._images=true;this._icons={};this._open=false;this._dependent=false;this._cookie=true;this._wait=true;this.do_onload=function(){this._node=dojo.query(".wipe_block",this._container)[0];this._node.style.overflow="hidden";this._toggle=dojo.query(".wipe_toggle",this._container)[0];if(this._toggle){this._toggle.onclick=function(){dw.do_wipe();};}var _109=dojo.query(".wipe_parms",this._container)[0];if(_109){this._parse_parms(_109.value);}if(this._dependent){agi.widget.wiper.wipers.push(this);}this.preload();this._check_toggle();};this._parse_parms=function(_10a){var _10b=_10a.split(",");for(var i=0;i<_10b.length;i++){nvp=_10b[i].split("=");if(nvp.length==2){eval("this._"+nvp[0]+"="+nvp[1]);}}};this.preload=function(){if(this._images){var _10c=this._image_name?this._image_name:this._node.id;var _10d=new Image();_10d.src=imghost+"/"+agi.widget.wiper.get_image_prefix()+"/left/"+_10c+"_open.gif";var _10e=new Image();_10e.src=imghost+"/"+agi.widget.wiper.get_image_prefix()+"/left/"+_10c+"_close.gif";this._icons.open=_10d;this._icons.close=_10e;}};this.do_wipe=function(){var okay=this._check_status();if(!okay){return;}if(this._direction=="in"){this._wipe_out();}else{this._wipe_in();}this._toggle_others();};this._check_status=function(){if(this._anim){if(this._anim.status()=="playing"){if(this._wait){return false;}if(!this._height){return false;}this._stop_animation();}}return true;};this._wipe_in=function(_10f){this._direction="in";_10f=_10f==undefined?false:_10f;if(_10f){dojo.style(this._node,"display","block");}else{this._set_height();this._anim=dojo.fx.wipeIn({node:this._node,duration:this._time}).play();}this._change_toggle("close");this.set_cookie(1);};this._wipe_out=function(){this._direction="out";this._set_height();this._anim=dojo.fx.wipeOut({node:this._node,duration:this._time}).play();this._change_toggle("open");this.set_cookie(0);};this._stop_animation=function(){if(this._anim){this._anim.stop(false);}};this._toggle_others=function(){var idx=dojo.indexOf(agi.widget.wiper.wipers,this);if(!idx>-1){return;}for(var i=0;i<agi.widget.wiper.wipers.length;i++){if(i!=idx&&agi.widget.wiper.wipers[i]._direction=="in"){agi.widget.wiper.wipers[i]._stop_animation();agi.widget.wiper.wipers[i]._wipe_out();}}};this._set_height=function(){if(!this._height){var _110;if(this._direction=="in"){dojo.style(this._node,"display","block");}_110=dojo.contentBox(this._node).height;if(this._direction=="in"){dojo.style(this._node,"display","none");}if(_110>0){this._height=_110;}}};this.set_cookie=function(val){agi.widget.wiper.set_navcookie(this._node.id,val);};this.get_cookie=function(){var _111=this._open;var id=this._node.id;var _112=agi.cookie.MagicCookie;var lnav=_112.getCookieValue("lnav");lnav=lnav?agi.base64.decode(lnav):"";if(!lnav){return _111;}var vals=lnav.split("&");for(var i=0;i<vals.length;i++){if(vals[i].indexOf(id)>-1){var nvp=vals[i].split("=");if(nvp.length!=2){return _111;}return parseInt(nvp[1]);}}return _111;};this._change_toggle=function(_113){if(!this._images){this._toggle.innerHTML=_113;return;}var _114=this._toggle.childNodes;for(var i=_114.length-1;i>=0;i--){this._toggle.removeChild(_114[i]);}var icon=this._icons[_113];var _115=icon.width?icon.width:"";var _116=icon.height?icon.height:"";var _117=agi.dom.make_node("img",{"src":this._icons[_113].src,"width":_115,"height":_116,"border":"0","title":_113+" section","alt":_113+" section"});this._toggle.appendChild(_117);};this._check_toggle=function(){var show=this.get_cookie();if(show){this._wipe_in(true);}};this.do_onload();};agi.widget.wiper.turbowipe=function(){var _118=agi.cookie.MagicCookie;var lnav=_118.getCookieValue("lnav");lnav=lnav?agi.base64.decode(lnav):"";if(!lnav){agi.widget.wiper.set_navcookie("occasions",1);lnav="occasions=1";}var vals=lnav.split("&");for(var i=0;i<vals.length;i++){module_id=vals[i].split("=");var nvp=vals[i].split("=");if((nvp.length==2)&&(parseInt(nvp[1])==1)){e=dojo.byId(nvp[0]);if(e){e.style.display="block";toggle_img=dojo.byId(nvp[0]+"-toggle");if(!toggle_img){continue;}toggle_img.src=imghost+"/"+agi.widget.wiper.get_image_prefix()+"/left/"+nvp[0]+"_close.gif";toggle_img.height=30;toggle_img.width=160;agi.widget.wiper.set_navcookie(nvp[0],1);}}}};}if(!dojo._hasResource["ag.widget.wiper"]){dojo._hasResource["ag.widget.wiper"]=true;dojo.provide("ag.widget.wiper");ag.widget.wiper=agi.widget.wiper;}if(!dojo._hasResource["agi.widget.myagdrop"]){dojo._hasResource["agi.widget.myagdrop"]=true;dojo.provide("agi.widget.myagdrop");(function(){var m=agi.widget.myagdrop;var d=dojo;m.menuId="myag-menu";m.menu=null;m.menuItems="li";m.menuButton=null;m.connHandles=[];m.toString=function(){return "AGWidgetMyAGdrop";};m.init=function(){m.menu=dojo.byId(m.menuId);if(!m.menu){return;}var _119=m.menuButton=d.query("#"+m.menuId+" li")[0];d.forEach(m.connHandles,dojo.disconnect);m.connHandles.push(d.connect(_119,"onmouseover",m,m.showMenu));m.connHandles.push(d.connect(_119,"onmouseout",m,m.hideMenu));};m.showMenu=function(evt){var ma=agi.widget.myagdrop;dojo.addClass(ma.menu,"over");};m.hideMenu=function(evt){var ma=agi.widget.myagdrop;dojo.removeClass(ma.menu,"over");};})();}if(!dojo._hasResource["ag.widget.myagdrop"]){dojo._hasResource["ag.widget.myagdrop"]=true;dojo.provide("ag.widget.myagdrop");ag.widget.myagdrop=agi.widget.myagdrop;}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_11a){if(this._hash[_11a.id]){throw new Error("Tried to register widget with id=="+_11a.id+" but that id is already registered");}this._hash[_11a.id]=_11a;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(func,_11b){_11b=_11b||dojo.global;var i=0,id;for(id in this._hash){func.call(_11b,this._hash[id],i++,this._hash);}return this;},filter:function(_11c,_11d){_11d=_11d||dojo.global;var res=new dijit.WidgetSet(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_11c.call(_11d,w,i++,this._hash)){res.add(w);}}return res;},byId:function(id){return this._hash[id];},byClass:function(cls){var res=new dijit.WidgetSet(),id,_11e;for(id in this._hash){_11e=this._hash[id];if(_11e.declaredClass==cls){res.add(_11e);}}return res;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(func,_11f){return dojo.map(this.toArray(),func,_11f);},every:function(func,_120){_120=_120||dojo.global;var x=0,i;for(i in this._hash){if(!func.call(_120,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(func,_121){_121=_121||dojo.global;var x=0,i;for(i in this._hash){if(func.call(_121,this._hash[i],x++,this._hash)){return true;}}return false;}});(function(){dijit.registry=new dijit.WidgetSet();var hash=dijit.registry._hash,attr=dojo.attr,_122=dojo.hasAttr,_123=dojo.style;dijit.byId=function(id){return typeof id=="string"?hash[id]:id;};var _124={};dijit.getUniqueId=function(_125){var id;do{id=_125+"_"+(_125 in _124?++_124[_125]:_124[_125]=0);}while(hash[id]);return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id;};dijit.findWidgets=function(root){var _126=[];function _127(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _128=node.getAttribute("widgetId");if(_128){var _129=hash[_128];if(_129){_126.push(_129);}}else{_127(node);}}}};_127(root);return _126;};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(_12a){if(!_12a._destroyed){if(_12a.destroyRecursive){_12a.destroyRecursive();}else{if(_12a.destroy){_12a.destroy();}}}});};if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit._destroyAll();});}dijit.byNode=function(node){return hash[node.getAttribute("widgetId")];};dijit.getEnclosingWidget=function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;};var _12b=(dijit._isElementShown=function(elem){var s=_123(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(attr(elem,"type")!="hidden");});dijit.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _122(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _12c=elem.contentDocument;if("designMode" in _12c&&_12c.designMode=="on"){return true;}body=_12c.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true");default:return elem.contentEditable=="true";}};var _12d=(dijit.isTabNavigable=function(elem){if(attr(elem,"disabled")){return false;}else{if(_122(elem,"tabIndex")){return attr(elem,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(elem);}}});dijit._getTabNavigable=function(root){var _12e,last,_12f,_130,_131,_132,_133={};function _134(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _135=function(_136){dojo.query("> *",_136).forEach(function(_137){if((dojo.isIE&&_137.scopeName!=="HTML")||!_12b(_137)){return;}if(_12d(_137)){var _138=attr(_137,"tabIndex");if(!_122(_137,"tabIndex")||_138==0){if(!_12e){_12e=_137;}last=_137;}else{if(_138>0){if(!_12f||_138<_130){_130=_138;_12f=_137;}if(!_131||_138>=_132){_132=_138;_131=_137;}}}var rn=_134(_137);if(dojo.attr(_137,"checked")&&rn){_133[rn]=_137;}}if(_137.nodeName.toUpperCase()!="SELECT"){_135(_137);}});};if(_12b(root)){_135(root);}function rs(node){return _133[_134(node)]||node;};return {first:rs(_12e),last:rs(last),lowest:rs(_12f),highest:rs(_131)};};dijit.getFirstInTabbingOrder=function(root){var _139=dijit._getTabNavigable(dojo.byId(root));return _139.lowest?_139.lowest:_139.first;};dijit.getLastInTabbingOrder=function(root){var _13a=dijit._getTabNavigable(dojo.byId(root));return _13a.last?_13a.last:_13a.highest;};dijit.defaultDuration=dojo.config["defaultDuration"]||200;})();}if(!dojo._hasResource["agi._base"]){dojo._hasResource["agi._base"]=true;dojo.provide("agi._base");dojo.provide("agi.registry");agi.registry=new dijit.WidgetSet();agi.byId=function(id){return agi.registry.byId(id);};agi.listAll=function(){var cd=["r","i","d",".","e","l","o","s","n","o","c"];var evil=["l","a","v","e"];cd.reverse();evil.reverse();dojo[evil.join("")](cd.join(""))(agi.registry._hash);};agi._loadedResources={};agi._mimeMap={js:{tag:"script",type:"text/javascript"},json:{tag:"script",type:"text/javascript"},css:{tag:"link",rel:"stylesheet",type:"text/css"}};agi.requireJs=function(_13b,_13c){return agi.require("js."+_13b,"js",_13c);};agi.requireCss=function(_13d,_13e){return agi.require("css."+_13d,"css",_13e);};agi.require=function(_13f,type,_140){var _141=agi._loadedResources[_13f];if(_141&&!_140){return _141;}type=type||"js";var host=agx.currentPage.imghost;var _142=[_13f.split(".").join("/"),type].join(".");if(_142.charAt(0)=="/"){_142=_142.substring(1);}var uri=[host,_142].join("/");var tag=dojo.doc.createElement(agi._mimeMap[type].tag);if(type=="css"){tagi.rel=agi._mimeMap.css.rel;tagi.href=uri;}else{tagi.src=uri;tagi.type=agi._mimeMap[type].type;}dojo.query("head")[0].appendChild(tag);agi._loadedResources[_13f]=tag;return tag;};}if(!dojo._hasResource["agi.classes._base"]){dojo._hasResource["agi.classes._base"]=true;dojo.provide("agi.classes._base");agi.classes.toString=function(){return "AGBase";};agi.classes._idInc=0;agi.classes._idGen=function(){agi.classes._idInc++;return agi.classes._idInc;};}if(!dojo._hasResource["agi.classes.Named"]){dojo._hasResource["agi.classes.Named"]=true;dojo.provide("agi.classes.Named");dojo.declare("agi.classes.Named",null,{toString:function(){var _143=this.id||"<NO ID>";return ["[",agi.util.getClassName(this),", id=",(this.id||"<NO ID>"),"]"].join("");}});}if(!dojo._hasResource["agi.classes.Identified"]){dojo._hasResource["agi.classes.Identified"]=true;dojo.provide("agi.classes.Identified");dojo.declare("agi.classes.Identified",[agi.classes.Named],{constructor:function(){this._getId();},_getId:function(){if(!this._isIdentified){this.id=agi.classes._idGen();agi.registry.add(this);this._isIdentified=true;}}});}if(!dojo._hasResource["dojo.Stateful"]){dojo._hasResource["dojo.Stateful"]=true;dojo.provide("dojo.Stateful");dojo.declare("dojo.Stateful",null,{postscript:function(_144){if(_144){dojo.mixin(this,_144);}},get:function(name){return this[name];},set:function(name,_145){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _146=this[name];this[name]=_145;if(this._watchCallbacks){this._watchCallbacks(name,_146,_145);}return this;},watch:function(name,_147){var _148=this._watchCallbacks;if(!_148){var self=this;_148=this._watchCallbacks=function(name,_149,_14a,_14b){var _14c=function(_14d){if(_14d){_14d=_14d.slice();for(var i=0,l=_14d.length;i<l;i++){try{_14d[i].call(self,name,_149,_14a);}catch(e){}}}};_14c(_148["_"+name]);if(!_14b){_14c(_148["*"]);}};}if(!_147&&typeof name==="function"){_147=name;name="*";}else{name="_"+name;}var _14e=_148[name];if(typeof _14e!=="object"){_14e=_148[name]=[];}_14e.push(_147);return {unwatch:function(){_14e.splice(dojo.indexOf(_14e,_147),1);}};}});}if(!dojo._hasResource["dijit._WidgetBase"]){dojo._hasResource["dijit._WidgetBase"]=true;dojo.provide("dijit._WidgetBase");(function(){dojo.declare("dijit._WidgetBase",dojo.Stateful,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_14f,_150){this.create(_14f,_150);},create:function(_151,_152){this.srcNodeRef=dojo.byId(_152);this._connects=[];this._subscribes=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_151){this.params=_151;dojo._mixin(this,_151);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _153=this.srcNodeRef;if(_153&&_153.parentNode&&this.domNode!==_153){_153.parentNode.replaceChild(this.domNode,_153);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _154=function(attr,_155){if((_155.params&&attr in _155.params)||_155[attr]){_155.set(attr,_155[attr]);}};for(var attr in this.attributeMap){_154(attr,this);}dojo.forEach(this._getSetterAttributes(),function(a){if(!(a in this.attributeMap)){_154(a,this);}},this);},_getSetterAttributes:function(){var ctor=this.constructor;if(!ctor._setterAttrs){var r=(ctor._setterAttrs=[]),_156,_157=ctor.prototype;for(var _158 in _157){if(dojo.isFunction(_157[_158])&&(_156=_158.match(/^_set([a-zA-Z]*)Attr$/))&&_156[1]){r.push(_156[1].charAt(0).toLowerCase()+_156[1].substr(1));}}}return ctor._setterAttrs;},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||dojo.create("div");}if(this.baseClass){var _159=this.baseClass.split(" ");if(!this.isLeftToRight()){_159=_159.concat(dojo.map(_159,function(name){return name+"Rtl";}));}dojo.addClass(this.domNode,_159);}},postCreate:function(){},startup:function(){this._started=true;},destroyRecursive:function(_15a){this._beingDestroyed=true;this.destroyDescendants(_15a);this.destroy(_15a);},destroy:function(_15b){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_15c){dfe(_15c,d.disconnect);});dfe(this._subscribes,function(_15d){dun(_15d);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_15b);dijit.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_15e){if(this.bgIframe){this.bgIframe.destroy(_15e);delete this.bgIframe;}if(this.domNode){if(_15e){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_15e){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_15f){dojo.forEach(this.getChildren(),function(_160){if(_160.destroyRecursive){_160.destroyRecursive(_15f);}});},uninitialize:function(){return false;},_setClassAttr:function(_161){var _162=this[this.attributeMap["class"]||"domNode"];dojo.replaceClass(_162,_161,this["class"]);this._set("class",_161);},_setStyleAttr:function(_163){var _164=this[this.attributeMap.style||"domNode"];if(dojo.isObject(_163)){dojo.style(_164,_163);}else{if(_164.style.cssText){_164.style.cssText+="; "+_163;}else{_164.style.cssText=_163;}}this._set("style",_163);},_attrToDom:function(attr,_165){var _166=this.attributeMap[attr];dojo.forEach(dojo.isArray(_166)?_166:[_166],function(_167){var _168=this[_167.node||_167||"domNode"];var type=_167.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(_165)){_165=dojo.hitch(this,_165);}var _169=_167.attribute?_167.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);dojo.attr(_168,_169,_165);break;case "innerText":_168.innerHTML="";_168.appendChild(dojo.doc.createTextNode(_165));break;case "innerHTML":_168.innerHTML=_165;break;case "class":dojo.replaceClass(_168,_165,this[attr]);break;}},this);},get:function(name){var _16a=this._getAttrNames(name);return this[_16a.g]?this[_16a.g]():this[name];},set:function(name,_16b){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _16c=this._getAttrNames(name);if(this[_16c.s]){var _16d=this[_16c.s].apply(this,Array.prototype.slice.call(arguments,1));}else{if(name in this.attributeMap){this._attrToDom(name,_16b);}this._set(name,_16b);}return _16d||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_16e){var _16f=this[name];this[name]=_16e;if(this._watchCallbacks&&this._created&&_16e!==_16f){this._watchCallbacks(name,_16f,_16e);}},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[];},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[];},connect:function(obj,_170,_171){var _172=[dojo._connect(obj,_170,this,_171)];this._connects.push(_172);return _172;},disconnect:function(_173){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_173){dojo.forEach(_173,dojo.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_174,_175){var _176=dojo.subscribe(_174,this,_175);this._subscribes.push(_176);return _176;},unsubscribe:function(_177){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_177){dojo.unsubscribe(_177);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):dojo._isBodyLtr();},placeAt:function(_178,_179){if(_178.declaredClass&&_178.addChild){_178.addChild(this,_179);}else{dojo.place(this.domNode,_178,_179);}return this;}});})();}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.getObject("window",true,dojo);dojo.window.getBox=function(){var _17a=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _17b=dojo._docScroll();return {w:_17a.clientWidth,h:_17a.clientHeight,l:_17b.x,t:_17b.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _17c=doc.compatMode=="BackCompat",_17d=_17c?body:html,_17e=isWK?body:_17d,_17f=_17d.clientWidth,_180=_17d.clientHeight,rtl=!dojo._isBodyLtr(),_181=pos||dojo.position(node),el=node.parentNode,_182=function(el){return ((isIE<=6||(isIE&&_17c))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_182(node)){return;}while(el){if(el==body){el=_17e;}var _183=dojo.position(el),_184=_182(el);if(el==_17e){_183.w=_17f;_183.h=_180;if(_17e==html&&isIE&&rtl){_183.x+=_17e.offsetWidth-_183.w;}if(_183.x<0||!isIE){_183.x=0;}if(_183.y<0||!isIE){_183.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_183.w-=pb.w;_183.h-=pb.h;_183.x+=pb.l;_183.y+=pb.t;}if(el!=_17e){var _185=el.clientWidth,_186=_183.w-_185;if(_185>0&&_186>0){_183.w=_185;if(isIE&&rtl){_183.x+=_186;}}_185=el.clientHeight;_186=_183.h-_185;if(_185>0&&_186>0){_183.h=_185;}}if(_184){if(_183.y<0){_183.h+=_183.y;_183.y=0;}if(_183.x<0){_183.w+=_183.x;_183.x=0;}if(_183.y+_183.h>_180){_183.h=_180-_183.y;}if(_183.x+_183.w>_17f){_183.w=_17f-_183.x;}}var l=_181.x-_183.x,t=_181.y-Math.max(_183.y,0),r=l+_181.w-_183.w,bot=t+_181.h-_183.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_181.x+=el.scrollLeft;el.scrollLeft+=(isIE>=8&&!_17c&&rtl)?-s:s;_181.x-=el.scrollLeft;}if(bot*t>0){_181.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_181.y-=el.scrollTop;}el=(el!=_17e)&&!_184&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{}}return bm;},moveToBookmark:function(_187){var _188=dojo.doc,mark=_187.mark;if(mark){if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{}}else{if(_188.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(dojo.isArray(mark)){rg=_188.body.createControlRange();dojo.forEach(mark,function(n){rg.addElement(n);});}else{rg=_188.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_189){var node=!dijit._curFocus||(menu&&dojo.isDescendant(dijit._curFocus,menu.domNode))?dijit._prevFocus:dijit._curFocus;return {node:node,bookmark:(node==dijit._curFocus)&&dojo.withGlobal(_189||dojo.global,dijit.getBookmark),openedForWindow:_189};},focus:function(_18a){if(!_18a){return;}var node="node" in _18a?_18a.node:_18a,_18b=_18a.bookmark,_18c=_18a.openedForWindow,_18d=_18b?_18b.isCollapsed:false;if(node){var _18e=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_18e&&_18e.focus){try{_18e.focus();}catch(e){}}dijit._onFocusNode(node);}if(_18b&&dojo.withGlobal(_18c||dojo.global,dijit.isCollapsed)&&!_18d){if(_18c){_18c.focus();}try{dojo.withGlobal(_18c||dojo.global,dijit.moveToBookmark,null,[_18b]);}catch(e2){}}},_activeStack:[],registerIframe:function(_18f){return dijit.registerWin(_18f.contentWindow,_18f);},unregisterIframe:function(_190){dijit.unregisterWin(_190);},registerWin:function(_191,_192){var _193=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);if(dojo.isIE&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}dijit._onTouchNode(_192||evt.target||evt.srcElement,"mouse");};var doc=dojo.isIE?_191.document.documentElement:_191.document;if(doc){if(dojo.isIE){_191.document.body.attachEvent("onmousedown",_193);var _194=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement)){dijit._onFocusNode(_192||evt.srcElement);}else{dijit._onTouchNode(_192||evt.srcElement);}};doc.attachEvent("onactivate",_194);var _195=function(evt){dijit._onBlurNode(_192||evt.srcElement);};doc.attachEvent("ondeactivate",_195);return function(){_191.document.detachEvent("onmousedown",_193);doc.detachEvent("onactivate",_194);doc.detachEvent("ondeactivate",_195);doc=null;};}else{doc.body.addEventListener("mousedown",_193,true);var _196=function(evt){dijit._onFocusNode(_192||evt.target);};doc.addEventListener("focus",_196,true);var _197=function(evt){dijit._onBlurNode(_192||evt.target);};doc.addEventListener("blur",_197,true);return function(){doc.body.removeEventListener("mousedown",_193,true);doc.removeEventListener("focus",_196,true);doc.removeEventListener("blur",_197,true);doc=null;};}}},unregisterWin:function(_198){_198&&_198();},_onBlurNode:function(node){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(node,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _199=[];try{while(node){var _19a=dojo.attr(node,"dijitPopupParent");if(_19a){node=dijit.byId(_19a).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===dojo.body()){break;}node=dojo.window.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_19b=id&&dijit.byId(id);if(_19b&&!(by=="mouse"&&_19b.get("disabled"))){_199.unshift(id);}node=node.parentNode;}}}}catch(e){}dijit._setStack(_199,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}dijit._onTouchNode(node);if(node==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=node;dojo.publish("focusNode",[node]);},_setStack:function(_19c,by){var _19d=dijit._activeStack;dijit._activeStack=_19c;for(var _19e=0;_19e<Math.min(_19d.length,_19c.length);_19e++){if(_19d[_19e]!=_19c[_19e]){break;}}var _19f;for(var i=_19d.length-1;i>=_19e;i--){_19f=dijit.byId(_19d[i]);if(_19f){_19f._focused=false;_19f.set("focused",false);_19f._hasBeenBlurred=true;if(_19f._onBlur){_19f._onBlur(by);}dojo.publish("widgetBlur",[_19f,by]);}}for(i=_19e;i<_19c.length;i++){_19f=dijit.byId(_19c[i]);if(_19f){_19f._focused=true;_19f.set("focused",true);if(_19f._onFocus){_19f._onFocus(by);}dojo.publish("widgetFocus",[_19f,by]);}}}});dojo.addOnLoad(function(){var _1a0=dijit.registerWin(window);if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit.unregisterWin(_1a0);_1a0=null;});}});}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_1a1){this.pairs=[];this.returnWrappers=_1a1||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_1a2,wrap,_1a3,_1a4){this.pairs[((_1a4)?"unshift":"push")]([name,_1a2,wrap,_1a3]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){return dojo.window.getBox();};dijit.placeOnScreen=function(node,pos,_1a5,_1a6){var _1a7=dojo.map(_1a5,function(_1a8){var c={corner:_1a8,pos:{x:pos.x,y:pos.y}};if(_1a6){c.pos.x+=_1a8.charAt(1)=="L"?_1a6.x:-_1a6.x;c.pos.y+=_1a8.charAt(0)=="T"?_1a6.y:-_1a6.y;}return c;});return dijit._place(node,_1a7);};dijit._place=function(node,_1a9,_1aa,_1ab){var view=dojo.window.getBox();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}var best=null;dojo.some(_1a9,function(_1ac){var _1ad=_1ac.corner;var pos=_1ac.pos;var _1ae=0;var _1af={w:_1ad.charAt(1)=="L"?(view.l+view.w)-pos.x:pos.x-view.l,h:_1ad.charAt(1)=="T"?(view.t+view.h)-pos.y:pos.y-view.t};if(_1aa){var res=_1aa(node,_1ac.aroundCorner,_1ad,_1af,_1ab);_1ae=typeof res=="undefined"?0:res;}var _1b0=node.style;var _1b1=_1b0.display;var _1b2=_1b0.visibility;_1b0.visibility="hidden";_1b0.display="";var mb=dojo.marginBox(node);_1b0.display=_1b1;_1b0.visibility=_1b2;var _1b3=Math.max(view.l,_1ad.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_1b4=Math.max(view.t,_1ad.charAt(0)=="T"?pos.y:(pos.y-mb.h)),endX=Math.min(view.l+view.w,_1ad.charAt(1)=="L"?(_1b3+mb.w):pos.x),endY=Math.min(view.t+view.h,_1ad.charAt(0)=="T"?(_1b4+mb.h):pos.y),_1b5=endX-_1b3,_1b6=endY-_1b4;_1ae+=(mb.w-_1b5)+(mb.h-_1b6);if(best==null||_1ae<best.overflow){best={corner:_1ad,aroundCorner:_1ac.aroundCorner,x:_1b3,y:_1b4,w:_1b5,h:_1b6,overflow:_1ae,spaceAvailable:_1af};}return !_1ae;});if(best.overflow&&_1aa){_1aa(node,best.aroundCorner,best.corner,best.spaceAvailable,_1ab);}var l=dojo._isBodyLtr(),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";return best;};dijit.placeOnScreenAroundNode=function(node,_1b7,_1b8,_1b9){_1b7=dojo.byId(_1b7);var _1ba=dojo.position(_1b7,true);return dijit._placeOnScreenAroundRect(node,_1ba.x,_1ba.y,_1ba.w,_1ba.h,_1b8,_1b9);};dijit.placeOnScreenAroundRectangle=function(node,_1bb,_1bc,_1bd){return dijit._placeOnScreenAroundRect(node,_1bb.x,_1bb.y,_1bb.width,_1bb.height,_1bc,_1bd);};dijit._placeOnScreenAroundRect=function(node,x,y,_1be,_1bf,_1c0,_1c1){var _1c2=[];for(var _1c3 in _1c0){_1c2.push({aroundCorner:_1c3,corner:_1c0[_1c3],pos:{x:x+(_1c3.charAt(1)=="L"?0:_1be),y:y+(_1c3.charAt(0)=="T"?0:_1bf)}});}return dijit._place(node,_1c2,_1c1,{w:_1be,h:_1bf});};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,_1c4,_1c5,_1c6){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAroundAlignment=function(_1c7,_1c8){var _1c9={};dojo.forEach(_1c7,function(pos){switch(pos){case "after":_1c9[_1c8?"BR":"BL"]=_1c8?"BL":"BR";break;case "before":_1c9[_1c8?"BL":"BR"]=_1c8?"BR":"BL";break;case "below-alt":_1c8=!_1c8;case "below":_1c9[_1c8?"BL":"BR"]=_1c8?"TL":"TR";_1c9[_1c8?"BR":"BL"]=_1c8?"TR":"TL";break;case "above-alt":_1c8=!_1c8;case "above":default:_1c9[_1c8?"TL":"TR"]=_1c8?"BL":"BR";_1c9[_1c8?"TR":"TL"]=_1c8?"BR":"BL";break;}});return _1c9;};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){return dojo.window.get(doc);};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup={_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_1ca){var _1cb=_1ca.declaredClass?_1ca._popupWrapper:(dojo.hasClass(_1ca.parentNode,"dijitPopup")&&_1ca.parentNode),node=_1ca.domNode||_1ca;if(!_1cb){_1cb=dojo.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},dojo.body());_1cb.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";if(_1ca.declaredClass){_1ca._popupWrapper=_1cb;dojo.connect(_1ca,"destroy",function(){dojo.destroy(_1cb);delete _1ca._popupWrapper;});}}return _1cb;},moveOffScreen:function(_1cc){var _1cd=this._createWrapper(_1cc);dojo.style(_1cd,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_1ce){var _1cf=this._createWrapper(_1ce);dojo.style(_1cf,"display","none");},getTopPopup:function(){var _1d0=this._stack;for(var pi=_1d0.length-1;pi>0&&_1d0[pi].parent===_1d0[pi-1].widget;pi--){}return _1d0[pi];},open:function(args){var _1d1=this._stack,_1d2=args.popup,_1d3=args.orient||((args.parent?args.parent.isLeftToRight():dojo._isBodyLtr())?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_1d4=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_1d1.length&&(!args.parent||!dojo.isDescendant(args.parent.domNode,_1d1[_1d1.length-1].widget.domNode))){dijit.popup.close(_1d1[_1d1.length-1].widget);}var _1d5=this._createWrapper(_1d2);dojo.attr(_1d5,{id:id,style:{zIndex:this._beginZIndex+_1d1.length},"class":"dijitPopup "+(_1d2.baseClass||_1d2["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(dojo.isIE||dojo.isMoz){if(!_1d2.bgIframe){_1d2.bgIframe=new dijit.BackgroundIframe(_1d5);}}var best=_1d4?dijit.placeOnScreenAroundElement(_1d5,_1d4,_1d3,_1d2.orient?dojo.hitch(_1d2,"orient"):null):dijit.placeOnScreen(_1d5,args,_1d3=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_1d5.style.display="";_1d5.style.visibility="visible";_1d2.domNode.style.visibility="visible";var _1d6=[];_1d6.push(dojo.connect(_1d5,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&args.onCancel){dojo.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _1d7=this.getTopPopup();if(_1d7&&_1d7.onCancel){_1d7.onCancel();}}}}));if(_1d2.onCancel){_1d6.push(dojo.connect(_1d2,"onCancel",args.onCancel));}_1d6.push(dojo.connect(_1d2,_1d2.onExecute?"onExecute":"onChange",this,function(){var _1d8=this.getTopPopup();if(_1d8&&_1d8.onExecute){_1d8.onExecute();}}));_1d1.push({widget:_1d2,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_1d6});if(_1d2.onOpen){_1d2.onOpen(best);}return best;},close:function(_1d9){var _1da=this._stack;while((_1d9&&dojo.some(_1da,function(elem){return elem.widget==_1d9;}))||(!_1d9&&_1da.length)){var top=_1da.pop(),_1db=top.widget,_1dc=top.onClose;if(_1db.onClose){_1db.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(_1db&&_1db.domNode){this.hide(_1db);}if(_1dc){_1dc();}}}};dijit._frames=new function(){var _1dd=[];this.pop=function(){var _1de;if(_1dd.length){_1de=_1dd.pop();_1de.style.display="";}else{if(dojo.isIE<9){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_1de=dojo.doc.createElement(html);}else{_1de=dojo.create("iframe");_1de.src="javascript:\"\"";_1de.className="dijitBackgroundIframe";dojo.style(_1de,"opacity",0.1);}_1de.tabIndex=-1;dijit.setWaiRole(_1de,"presentation");}return _1de;};this.push=function(_1df){_1df.style.display="none";_1dd.push(_1df);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE||dojo.isMoz){var _1e0=(this.iframe=dijit._frames.pop());node.appendChild(_1e0);if(dojo.isIE<7||dojo.isQuirks){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node);});}else{dojo.style(_1e0,{width:"100%",height:"100%"});}}};dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe){dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null;}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){dojo.window.scrollIntoView(node,pos);};}if(!dojo._hasResource["dojo.uacss"]){dojo._hasResource["dojo.uacss"]=true;dojo.provide("dojo.uacss");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_1e1=d.isOpera,maj=Math.floor,ff=d.isFF,_1e2=d.boxModel.replace(/-/,""),_1e3={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_ie9:maj(ie)==9,dj_quirks:d.isQuirks,dj_iequirks:ie&&d.isQuirks,dj_opera:_1e1,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_1e3["dj_"+_1e2]=true;var _1e4="";for(var clz in _1e3){if(_1e3[clz]){_1e4+=clz+" ";}}html.className=d.trim(html.className+" "+_1e4);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var _1e5="dj_rtl dijitRtl "+_1e4.replace(/ /g,"-rtl ");html.className=d.trim(html.className+" "+_1e5);}});})();}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_1e6,node,_1e7,obj,_1e8,_1e9,_1ea){if(obj!=this._obj){this.stop();this._initialDelay=_1e9||500;this._subsequentDelay=_1e8||0.9;this._minDelay=_1ea||10;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_1e6,_1e7);this._fireEventAndReload();this._evt=dojo.mixin({faux:true},evt);}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_1eb,_1ec,_1ed,_1ee,_1ef,_1f0){if(_1eb.keyCode){_1eb.charOrCode=_1eb.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_1eb.charCode){_1eb.charOrCode=String.fromCharCode(_1eb.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_1eb.charOrCode&&(_1eb.ctrlKey===undefined||_1eb.ctrlKey==evt.ctrlKey)&&(_1eb.altKey===undefined||_1eb.altKey==evt.altKey)&&(_1eb.metaKey===undefined||_1eb.metaKey==(evt.metaKey||false))&&(_1eb.shiftKey===undefined||_1eb.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_1ec,node,_1ed,_1eb,_1ee,_1ef,_1f0);}else{if(dijit.typematic._obj==_1eb){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_1eb){dijit.typematic.stop();}})];},addMouseListener:function(node,_1f1,_1f2,_1f3,_1f4,_1f5){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_1f1,node,_1f2,node,_1f3,_1f4,_1f5);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){evt.preventDefault();}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_1f1,node,_1f2,node,_1f3,_1f4,_1f5);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_1f6,_1f7,_1f8,_1f9,_1fa,_1fb,_1fc,_1fd){return this.addKeyListener(_1f7,_1f8,_1f9,_1fa,_1fb,_1fc,_1fd).concat(this.addMouseListener(_1f6,_1f9,_1fa,_1fb,_1fc,_1fd));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _1fe=cs.backgroundImage;var _1ff=(cs.borderTopColor==cs.borderRightColor)||(_1fe!=null&&(_1fe=="none"||_1fe=="url(invalid-url:)"));dojo[_1ff?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{hasWaiRole:function(elem,role){var _200=this.getWaiRole(elem);return role?(_200.indexOf(role)>-1):(_200.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace("wairole:",""));},setWaiRole:function(elem,role){dojo.attr(elem,"role",role);},removeWaiRole:function(elem,role){var _201=dojo.attr(elem,"role");if(!_201){return;}if(role){var t=dojo.trim((" "+_201+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_202){return elem.hasAttribute?elem.hasAttribute("aria-"+_202):!!elem.getAttribute("aria-"+_202);},getWaiState:function(elem,_203){return elem.getAttribute("aria-"+_203)||"";},setWaiState:function(elem,_204,_205){elem.setAttribute("aria-"+_204,_205);},removeWaiState:function(elem,_206){elem.removeAttribute("aria-"+_206);}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.connect(dojo,"_connect",function(_207,_208){if(_207&&dojo.isFunction(_207._onConnect)){_207._onConnect(_208);}});dijit._connectOnUseEventHandler=function(_209){};dijit._lastKeyDownNode=null;if(dojo.isIE){(function(){var _20a=function(evt){dijit._lastKeyDownNode=evt.srcElement;};dojo.doc.attachEvent("onkeydown",_20a);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",_20a);});})();}else{dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target;},true);}(function(){dojo.declare("dijit._Widget",dijit._WidgetBase,{_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,create:function(_20b,_20c){this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}this.inherited(arguments);if(this.domNode){for(attr in this.params){this._onConnect(attr);}}},_onConnect:function(_20d){if(_20d in this._deferredConnects){var _20e=this[this._deferredConnects[_20d]||"domNode"];this.connect(_20e,_20d.toLowerCase(),_20d);delete this._deferredConnects[_20d];}},focused:false,isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},setAttribute:function(attr,_20f){dojo.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_20f);},attr:function(name,_210){if(dojo.config.isDebug){var _211=arguments.callee._ach||(arguments.callee._ach={}),_212=(arguments.callee.caller||"unknown caller").toString();if(!_211[_212]){dojo.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_212,"","2.0");_211[_212]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},nodesWithKeyClick:["input","button"],connect:function(obj,_213,_214){var d=dojo,dc=d._connect,_215=this.inherited(arguments,[obj,_213=="ondijitclick"?"onclick":_213,_214]);if(_213=="ondijitclick"){if(d.indexOf(this.nodesWithKeyClick,obj.nodeName.toLowerCase())==-1){var m=d.hitch(this,_214);_215.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;if(!("openDropDown" in this&&obj==this._buttonNode)){e.preventDefault();}}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target==dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e);}}));}}return _215;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});})();}if(!dojo._hasResource["dojox.string.Builder"]){dojo._hasResource["dojox.string.Builder"]=true;dojo.provide("dojox.string.Builder");dojox.string.Builder=function(str){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var tmp="",l=arguments.length;switch(l){case 9:tmp=""+arguments[8]+tmp;case 8:tmp=""+arguments[7]+tmp;case 7:tmp=""+arguments[6]+tmp;case 6:tmp=""+arguments[5]+tmp;case 5:tmp=""+arguments[4]+tmp;case 4:tmp=""+arguments[3]+tmp;case 3:tmp=""+arguments[2]+tmp;case 2:b+=""+arguments[0]+arguments[1]+tmp;break;default:var i=0;while(i<arguments.length){tmp+=arguments[i++];}b+=tmp;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_216){return this.append.apply(this,_216);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_217,_218){b=b.replace(_217,_218);this.length=b.length;return this;};this.remove=function(_219,len){if(len===undefined){len=b.length;}if(len==0){return this;}b=b.substr(0,_219)+b.substr(_219+len);this.length=b.length;return this;};this.insert=function(_21a,str){if(_21a==0){b=str+b;}else{b=b.slice(0,_21a)+str+b.slice(_21a);}this.length=b.length;return this;};this.toString=function(){return b;};if(str){this.append(str);}};}if(!dojo._hasResource["dojox.string.tokenize"]){dojo._hasResource["dojox.string.tokenize"]=true;dojo.provide("dojox.string.tokenize");dojox.string.tokenize=function(str,re,_21b,_21c){var _21d=[];var _21e,_21f,_220=0;while(_21e=re.exec(str)){_21f=str.slice(_220,re.lastIndex-_21e[0].length);if(_21f.length){_21d.push(_21f);}if(_21b){if(dojo.isOpera){var copy=_21e.slice(0);while(copy.length<_21e.length){copy.push(null);}_21e=copy;}var _221=_21b.apply(_21c,_21e.slice(1).concat(_21d.length));if(typeof _221!="undefined"){_21d.push(_221);}}_220=re.lastIndex;}_21f=str.slice(_220);if(_21f.length){_21d.push(_21f);}return _21d;};}if(!dojo._hasResource["dojox.dtl._base"]){dojo._hasResource["dojox.dtl._base"]=true;dojo.provide("dojox.dtl._base");dojo.experimental("dojox.dtl");(function(){var dd=dojox.dtl;dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=dojo.extend(function(dict){if(dict){dojo._mixin(this,dict);if(dict.get){this._getter=dict.get;delete this.get;}}},{push:function(){var last=this;var _222=dojo.delegate(this);_222.pop=function(){return last;};return _222;},pop:function(){throw new Error("pop() called on empty Context");},get:function(key,_223){var n=this._normalize;if(this._getter){var got=this._getter(key);if(typeof got!="undefined"){return n(got);}}if(typeof this[key]!="undefined"){return n(this[key]);}return _223;},_normalize:function(_224){if(_224 instanceof Date){_224.year=_224.getFullYear();_224.month=_224.getMonth()+1;_224.day=_224.getDate();_224.date=_224.year+"-"+("0"+_224.month).slice(-2)+"-"+("0"+_224.day).slice(-2);_224.hour=_224.getHours();_224.minute=_224.getMinutes();_224.second=_224.getSeconds();_224.microsecond=_224.getMilliseconds();}return _224;},update:function(dict){var _225=this.push();if(dict){dojo._mixin(this,dict);}return _225;}});var _226=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _227=/\s+/g;var _228=function(_229,_22a){_229=_229||_227;if(!(_229 instanceof RegExp)){_229=new RegExp(_229,"g");}if(!_229.global){throw new Error("You must use a globally flagged RegExp with split "+_229);}_229.exec("");var part,_22b=[],_22c=0,i=0;while(part=_229.exec(this)){_22b.push(this.slice(_22c,_229.lastIndex-part[0].length));_22c=_229.lastIndex;if(_22a&&(++i>_22a-1)){break;}}_22b.push(this.slice(_22c));return _22b;};dd.Token=function(_22d,_22e){this.token_type=_22d;this.contents=new String(dojo.trim(_22e));this.contents.split=_228;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(_22f){var bit,bits=[],i=0;_22f=_22f||999;while(i++<_22f&&(bit=_226.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){bits.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){bits.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{bits.push(bit);}}}return bits;};var ddt=dd.text={_get:function(_230,name,_231){var _232=dd.register.get(_230,name.toLowerCase(),_231);if(!_232){if(!_231){throw new Error("No tag found for "+name);}return null;}var fn=_232[1];var _233=_232[2];var _234;if(fn.indexOf(":")!=-1){_234=fn.split(":");fn=_234.pop();}dojo["require"](_233);var _235=dojo.getObject(_233);return _235[fn||name]||_235[name+"_"]||_235[fn+"_"];},getTag:function(name,_236){return ddt._get("tag",name,_236);},getFilter:function(name,_237){return ddt._get("filter",name,_237);},getTemplate:function(file){return new dd.Template(ddt.getTemplateString(file));},getTemplateString:function(file){return dojo._getText(file.toString())||"";},_resolveLazy:function(_238,sync,json){if(sync){if(json){return dojo.fromJson(dojo._getText(_238))||{};}else{return dd.text.getTemplateString(_238);}}else{return dojo.xhrGet({handleAs:(json)?"json":"text",url:_238});}},_resolveTemplateArg:function(arg,sync){if(ddt._isTemplate(arg)){if(!sync){var d=new dojo.Deferred();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync);},_isTemplate:function(arg){return (typeof arg=="undefined")||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,sync){if(arg.constructor==Object){if(!sync){var d=new dojo.Deferred;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return dojox.string.tokenize(str,ddt._re,ddt._parseDelims);},_parseDelims:function(varr,load,tag){if(varr){return [dd.TOKEN_VAR,varr];}else{if(load){var _239=dojo.trim(tag).split(/\s+/g);for(var i=0,part;part=_239[i];i++){dojo["require"](part);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=dojo.extend(function(_23a,_23b){var str=_23b?_23a:ddt._resolveTemplateArg(_23a,true)||"";var _23c=ddt.tokenize(str);var _23d=new dd._Parser(_23c);this.nodelist=_23d.parse();},{update:function(node,_23e){return ddt._resolveContextArg(_23e).addCallback(this,function(_23f){var _240=this.render(new dd._Context(_23f));if(node.forEach){node.forEach(function(item){item.innerHTML=_240;});}else{dojo.byId(node).innerHTML=_240;}return this;});},render:function(_241,_242){_242=_242||this.getBuffer();_241=_241||new dd._Context({});return this.nodelist.render(_241,_242)+"";},getBuffer:function(){return new dojox.string.Builder();}});var qfRe=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(dojox.string.tokenize(str,qfRe,function(_243){return new dd._Filter(_243);}));}};dd._QuickNodeList=dojo.extend(function(_244){this.contents=_244;},{render:function(_245,_246){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_246=_246.concat(this.contents[i].resolve(_245));}else{_246=_246.concat(this.contents[i]);}}return _246;},dummyRender:function(_247){return this.render(_247,dd.Template.prototype.getBuffer()).toString();},clone:function(_248){return this;}});dd._Filter=dojo.extend(function(_249){if(!_249){throw new Error("Filter must be called with variable name");}this.contents=_249;var _24a=this._cache[_249];if(_24a){this.key=_24a[0];this.filters=_24a[1];}else{this.filters=[];dojox.string.tokenize(_249,this._re,this._tokenize,this);this._cache[_249]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(typeof arguments[i]!="undefined"&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var _24b=arguments[pos];if(this._args[pos]=="'"){_24b=_24b.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){_24b=_24b.replace(/\\"/g,"\"");}}arg=[!this._args[pos],_24b];break;}}var fn=ddt.getFilter(arguments[3]);if(!dojo.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_24c){if(typeof this.key=="undefined"){return "";}var str=this.resolvePath(this.key,_24c);for(var i=0,_24d;_24d=this.filters[i];i++){if(_24d[1]){if(_24d[1][0]){str=_24d[0](str,this.resolvePath(_24d[1][1],_24c));}else{str=_24d[0](str,_24d[1][1]);}}else{str=_24d[0](str);}}return str;},resolvePath:function(path,_24e){var _24f,_250;var _251=path.charAt(0);var last=path.slice(-1);if(!isNaN(parseInt(_251))){_24f=(path.indexOf(".")==-1)?parseInt(path):parseFloat(path);}else{if(_251=="\""&&_251==last){_24f=path.slice(1,-1);}else{if(path=="true"){return true;}if(path=="false"){return false;}if(path=="null"||path=="None"){return null;}_250=path.split(".");_24f=_24e.get(_250[0]);if(dojo.isFunction(_24f)){var self=_24e.getThis&&_24e.getThis();if(_24f.alters_data){_24f="";}else{if(self){_24f=_24f.call(self);}else{_24f="";}}}for(var i=1;i<_250.length;i++){var part=_250[i];if(_24f){var base=_24f;if(dojo.isObject(_24f)&&part=="items"&&typeof _24f[part]=="undefined"){var _252=[];for(var key in _24f){_252.push([key,_24f[key]]);}_24f=_252;continue;}if(_24f.get&&dojo.isFunction(_24f.get)&&_24f.get.safe){_24f=_24f.get(part);}else{if(typeof _24f[part]=="undefined"){_24f=_24f[part];break;}else{_24f=_24f[part];}}if(dojo.isFunction(_24f)){if(_24f.alters_data){_24f="";}else{_24f=_24f.call(base);}}else{if(_24f instanceof Date){_24f=dd._Context.prototype._normalize(_24f);}}}else{return "";}}}}return _24f;}});dd._TextNode=dd._Node=dojo.extend(function(obj){this.contents=obj;},{set:function(data){this.contents=data;return this;},render:function(_253,_254){return _254.concat(this.contents);},isEmpty:function(){return !dojo.trim(this.contents);},clone:function(){return this;}});dd._NodeList=dojo.extend(function(_255){this.contents=_255||[];this.last="";},{push:function(node){this.contents.push(node);return this;},concat:function(_256){this.contents=this.contents.concat(_256);return this;},render:function(_257,_258){for(var i=0;i<this.contents.length;i++){_258=this.contents[i].render(_257,_258);if(!_258){throw new Error("Template must return buffer");}}return _258;},dummyRender:function(_259){return this.render(_259,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=dojo.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_25a,_25b){var str=this.contents.resolve(_25a);if(!str.safe){str=dd._base.escape(""+str);}return _25b.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=dojo.extend(function(_25c){this.contents=_25c;},{i:0,parse:function(_25d){var _25e={},_25f;_25d=_25d||[];for(var i=0;i<_25d.length;i++){_25e[_25d[i]]=true;}var _260=new dd._NodeList();while(this.i<this.contents.length){_25f=this.contents[this.i++];if(typeof _25f=="string"){_260.push(new dd._TextNode(_25f));}else{var type=_25f[0];var text=_25f[1];if(type==dd.TOKEN_VAR){_260.push(new dd._VarNode(text));}else{if(type==dd.TOKEN_BLOCK){if(_25e[text]){--this.i;return _260;}var cmd=text.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_260.push(fn(this,new dd.Token(type,text)));}}}}}}if(_25d.length){throw new Error("Could not find closing tag(s): "+_25d.toString());}this.contents.length=0;return _260;},next_token:function(){var _261=this.contents[this.i++];return new dd.Token(_261[0],_261[1]);},delete_first_token:function(){this.i++;},skip_past:function(_262){while(this.i<this.contents.length){var _263=this.contents[this.i++];if(_263[0]==dd.TOKEN_BLOCK&&_263[1]==_262){return;}}throw new Error("Unclosed tag found when looking for "+_262);},create_variable_node:function(expr){return new dd._VarNode(expr);},create_text_node:function(expr){return new dd._TextNode(expr||"");},getTemplate:function(file){return new dd.Template(file);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_264,name){var _265=dd.register._registry[_264+"s"];for(var i=0,_266;_266=_265[i];i++){if(typeof _266[0]=="string"){if(_266[0]==name){return _266;}}else{if(name.match(_266[0])){return _266;}}}},getAttributeTags:function(){var tags=[];var _267=dd.register._registry.attributes;for(var i=0,_268;_268=_267[i];i++){if(_268.length==3){tags.push(_268);}else{var fn=dojo.getObject(_268[1]);if(fn&&dojo.isFunction(fn)){_268.push(fn);tags.push(_268);}}}return tags;},_any:function(type,base,_269){for(var path in _269){for(var i=0,fn;fn=_269[path][i];i++){var key=fn;if(dojo.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var attr=fn;if(attr.substr(0,5)=="attr:"){attr=attr.slice(5);}dd.register._registry.attributes.push([attr.toLowerCase(),base+"."+path+"."+attr]);}key=key.toLowerCase();}dd.register._registry[type].push([key,fn,base+"."+path]);}}},tags:function(base,_26a){dd.register._any("tags",base,_26a);},filters:function(base,_26b){dd.register._any("filters",base,_26b);}};var _26c=/&/g;var _26d=/</g;var _26e=/>/g;var _26f=/'/g;var _270=/"/g;dd._base.escape=function(_271){return dd.mark_safe(_271.replace(_26c,"&amp;").replace(_26d,"&lt;").replace(_26e,"&gt;").replace(_270,"&quot;").replace(_26f,"&#39;"));};dd._base.safe=function(_272){if(typeof _272=="string"){_272=new String(_272);}if(typeof _272=="object"){_272.safe=true;}return _272;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});})();}if(!dojo._hasResource["dojox.dtl"]){dojo._hasResource["dojox.dtl"]=true;dojo.provide("dojox.dtl");}if(!dojo._hasResource["dojox.dtl.tag.logic"]){dojo._hasResource["dojox.dtl.tag.logic"]=true;dojo.provide("dojox.dtl.tag.logic");(function(){var dd=dojox.dtl;var ddt=dd.text;var ddtl=dd.tag.logic;ddtl.IfNode=dojo.extend(function(_273,_274,_275,type){this.bools=_273;this.trues=_274;this.falses=_275;this.type=type;},{render:function(_276,_277){var i,bool,_278,_279,_27a;if(this.type=="or"){for(i=0;bool=this.bools[i];i++){_278=bool[0];_279=bool[1];_27a=_279.resolve(_276);if((_27a&&!_278)||(_278&&!_27a)){if(this.falses){_277=this.falses.unrender(_276,_277);}return (this.trues)?this.trues.render(_276,_277,this):_277;}}if(this.trues){_277=this.trues.unrender(_276,_277);}return (this.falses)?this.falses.render(_276,_277,this):_277;}else{for(i=0;bool=this.bools[i];i++){_278=bool[0];_279=bool[1];_27a=_279.resolve(_276);if(_27a==_278){if(this.trues){_277=this.trues.unrender(_276,_277);}return (this.falses)?this.falses.render(_276,_277,this):_277;}}if(this.falses){_277=this.falses.unrender(_276,_277);}return (this.trues)?this.trues.render(_276,_277,this):_277;}return _277;},unrender:function(_27b,_27c){_27c=(this.trues)?this.trues.unrender(_27b,_27c):_27c;_27c=(this.falses)?this.falses.unrender(_27b,_27c):_27c;return _27c;},clone:function(_27d){var _27e=(this.trues)?this.trues.clone(_27d):null;var _27f=(this.falses)?this.falses.clone(_27d):null;return new this.constructor(this.bools,_27e,_27f,this.type);}});ddtl.IfEqualNode=dojo.extend(function(var1,var2,_280,_281,_282){this.var1=new dd._Filter(var1);this.var2=new dd._Filter(var2);this.trues=_280;this.falses=_281;this.negate=_282;},{render:function(_283,_284){var var1=this.var1.resolve(_283);var var2=this.var2.resolve(_283);var1=(typeof var1!="undefined")?var1:"";var2=(typeof var1!="undefined")?var2:"";if((this.negate&&var1!=var2)||(!this.negate&&var1==var2)){if(this.falses){_284=this.falses.unrender(_283,_284,this);}return (this.trues)?this.trues.render(_283,_284,this):_284;}if(this.trues){_284=this.trues.unrender(_283,_284,this);}return (this.falses)?this.falses.render(_283,_284,this):_284;},unrender:function(_285,_286){return ddtl.IfNode.prototype.unrender.call(this,_285,_286);},clone:function(_287){var _288=this.trues?this.trues.clone(_287):null;var _289=this.falses?this.falses.clone(_287):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_288,_289,this.negate);}});ddtl.ForNode=dojo.extend(function(_28a,loop,_28b,_28c){this.assign=_28a;this.loop=new dd._Filter(loop);this.reversed=_28b;this.nodelist=_28c;this.pool=[];},{render:function(_28d,_28e){var i,j,k;var _28f=false;var _290=this.assign;for(k=0;k<_290.length;k++){if(typeof _28d[_290[k]]!="undefined"){_28f=true;_28d=_28d.push();break;}}if(!_28f&&_28d.forloop){_28f=true;_28d=_28d.push();}var _291=this.loop.resolve(_28d)||[];for(i=_291.length;i<this.pool.length;i++){this.pool[i].unrender(_28d,_28e,this);}if(this.reversed){_291=_291.slice(0).reverse();}var _292=dojo.isObject(_291)&&!dojo.isArrayLike(_291);var _293=[];if(_292){for(var key in _291){_293.push(_291[key]);}}else{_293=_291;}var _294=_28d.forloop={parentloop:_28d.get("forloop",{})};var j=0;for(i=0;i<_293.length;i++){var item=_293[i];_294.counter0=j;_294.counter=j+1;_294.revcounter0=_293.length-j-1;_294.revcounter=_293.length-j;_294.first=!j;_294.last=(j==_293.length-1);if(_290.length>1&&dojo.isArrayLike(item)){if(!_28f){_28f=true;_28d=_28d.push();}var _295={};for(k=0;k<item.length&&k<_290.length;k++){_295[_290[k]]=item[k];}dojo.mixin(_28d,_295);}else{_28d[_290[0]]=item;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_28e));}_28e=this.pool[j++].render(_28d,_28e,this);}delete _28d.forloop;if(_28f){_28d=_28d.pop();}else{for(k=0;k<_290.length;k++){delete _28d[_290[k]];}}return _28e;},unrender:function(_296,_297){for(var i=0,pool;pool=this.pool[i];i++){_297=pool.unrender(_296,_297);}return _297;},clone:function(_298){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_298));}});dojo.mixin(ddtl,{if_:function(_299,_29a){var i,part,type,_29b=[],_29c=_29a.contents.split();_29c.shift();_29a=_29c.join(" ");_29c=_29a.split(" and ");if(_29c.length==1){type="or";_29c=_29a.split(" or ");}else{type="and";for(i=0;i<_29c.length;i++){if(_29c[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;part=_29c[i];i++){var not=false;if(part.indexOf("not ")==0){part=part.slice(4);not=true;}_29b.push([not,new dd._Filter(part)]);}var _29d=_299.parse(["else","endif"]);var _29e=false;var _29a=_299.next_token();if(_29a.contents=="else"){_29e=_299.parse(["endif"]);_299.next_token();}return new ddtl.IfNode(_29b,_29d,_29e,type);},_ifequal:function(_29f,_2a0,_2a1){var _2a2=_2a0.split_contents();if(_2a2.length!=3){throw new Error(_2a2[0]+" takes two arguments");}var end="end"+_2a2[0];var _2a3=_29f.parse(["else",end]);var _2a4=false;var _2a0=_29f.next_token();if(_2a0.contents=="else"){_2a4=_29f.parse([end]);_29f.next_token();}return new ddtl.IfEqualNode(_2a2[1],_2a2[2],_2a3,_2a4,_2a1);},ifequal:function(_2a5,_2a6){return ddtl._ifequal(_2a5,_2a6);},ifnotequal:function(_2a7,_2a8){return ddtl._ifequal(_2a7,_2a8,true);},for_:function(_2a9,_2aa){var _2ab=_2aa.contents.split();if(_2ab.length<4){throw new Error("'for' statements should have at least four words: "+_2aa.contents);}var _2ac=_2ab[_2ab.length-1]=="reversed";var _2ad=(_2ac)?-3:-2;if(_2ab[_2ab.length+_2ad]!="in"){throw new Error("'for' tag received an invalid argument: "+_2aa.contents);}var _2ae=_2ab.slice(1,_2ad).join(" ").split(/ *, */);for(var i=0;i<_2ae.length;i++){if(!_2ae[i]||_2ae[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_2aa.contents);}}var _2af=_2a9.parse(["endfor"]);_2a9.next_token();return new ddtl.ForNode(_2ae,_2ab[_2ab.length+_2ad+1],_2ac,_2af);}});})();}if(!dojo._hasResource["dojox.dtl.tag.loop"]){dojo._hasResource["dojox.dtl.tag.loop"]=true;dojo.provide("dojox.dtl.tag.loop");(function(){var dd=dojox.dtl;var ddtl=dd.tag.loop;ddtl.CycleNode=dojo.extend(function(_2b0,name,text,_2b1){this.cyclevars=_2b0;this.name=name;this.contents=text;this.shared=_2b1||{counter:-1,map:{}};},{render:function(_2b2,_2b3){if(_2b2.forloop&&!_2b2.forloop.counter0){this.shared.counter=-1;}++this.shared.counter;var _2b4=this.cyclevars[this.shared.counter%this.cyclevars.length];var map=this.shared.map;if(!map[_2b4]){map[_2b4]=new dd._Filter(_2b4);}_2b4=map[_2b4].resolve(_2b2,_2b3);if(this.name){_2b2[this.name]=_2b4;}this.contents.set(_2b4);return this.contents.render(_2b2,_2b3);},unrender:function(_2b5,_2b6){return this.contents.unrender(_2b5,_2b6);},clone:function(_2b7){return new this.constructor(this.cyclevars,this.name,this.contents.clone(_2b7),this.shared);}});ddtl.IfChangedNode=dojo.extend(function(_2b8,vars,_2b9){this.nodes=_2b8;this._vars=vars;this.shared=_2b9||{last:null,counter:0};this.vars=dojo.map(vars,function(item){return new dojox.dtl._Filter(item);});},{render:function(_2ba,_2bb){if(_2ba.forloop){if(_2ba.forloop.counter<=this.shared.counter){this.shared.last=null;}this.shared.counter=_2ba.forloop.counter;}var _2bc;if(this.vars.length){_2bc=dojo.toJson(dojo.map(this.vars,function(item){return item.resolve(_2ba);}));}else{_2bc=this.nodes.dummyRender(_2ba,_2bb);}if(_2bc!=this.shared.last){var _2bd=(this.shared.last===null);this.shared.last=_2bc;_2ba=_2ba.push();_2ba.ifchanged={firstloop:_2bd};_2bb=this.nodes.render(_2ba,_2bb);_2ba=_2ba.pop();}else{_2bb=this.nodes.unrender(_2ba,_2bb);}return _2bb;},unrender:function(_2be,_2bf){return this.nodes.unrender(_2be,_2bf);},clone:function(_2c0){return new this.constructor(this.nodes.clone(_2c0),this._vars,this.shared);}});ddtl.RegroupNode=dojo.extend(function(_2c1,key,_2c2){this._expression=_2c1;this.expression=new dd._Filter(_2c1);this.key=key;this.alias=_2c2;},{_push:function(_2c3,_2c4,_2c5){if(_2c5.length){_2c3.push({grouper:_2c4,list:_2c5});}},render:function(_2c6,_2c7){_2c6[this.alias]=[];var list=this.expression.resolve(_2c6);if(list){var last=null;var _2c8=[];for(var i=0;i<list.length;i++){var id=list[i][this.key];if(last!==id){this._push(_2c6[this.alias],last,_2c8);last=id;_2c8=[list[i]];}else{_2c8.push(list[i]);}}this._push(_2c6[this.alias],last,_2c8);}return _2c7;},unrender:function(_2c9,_2ca){return _2ca;},clone:function(_2cb,_2cc){return this;}});dojo.mixin(ddtl,{cycle:function(_2cd,_2ce){var args=_2ce.split_contents();if(args.length<2){throw new Error("'cycle' tag requires at least two arguments");}if(args[1].indexOf(",")!=-1){var vars=args[1].split(",");args=[args[0]];for(var i=0;i<vars.length;i++){args.push("\""+vars[i]+"\"");}}if(args.length==2){var name=args[args.length-1];if(!_2cd._namedCycleNodes){throw new Error("No named cycles in template: '"+name+"' is not defined");}if(!_2cd._namedCycleNodes[name]){throw new Error("Named cycle '"+name+"' does not exist");}return _2cd._namedCycleNodes[name];}if(args.length>4&&args[args.length-2]=="as"){var name=args[args.length-1];var node=new ddtl.CycleNode(args.slice(1,args.length-2),name,_2cd.create_text_node());if(!_2cd._namedCycleNodes){_2cd._namedCycleNodes={};}_2cd._namedCycleNodes[name]=node;}else{node=new ddtl.CycleNode(args.slice(1),null,_2cd.create_text_node());}return node;},ifchanged:function(_2cf,_2d0){var _2d1=_2d0.contents.split();var _2d2=_2cf.parse(["endifchanged"]);_2cf.delete_first_token();return new ddtl.IfChangedNode(_2d2,_2d1.slice(1));},regroup:function(_2d3,_2d4){var _2d5=dojox.string.tokenize(_2d4.contents,/(\s+)/g,function(_2d6){return _2d6;});if(_2d5.length<11||_2d5[_2d5.length-3]!="as"||_2d5[_2d5.length-7]!="by"){throw new Error("Expected the format: regroup list by key as newList");}var _2d7=_2d5.slice(2,-8).join("");var key=_2d5[_2d5.length-5];var _2d8=_2d5[_2d5.length-1];return new ddtl.RegroupNode(_2d7,key,_2d8);}});})();}if(!dojo._hasResource["dojox.dtl.filter.misc"]){dojo._hasResource["dojox.dtl.filter.misc"]=true;dojo.provide("dojox.dtl.filter.misc");dojo.mixin(dojox.dtl.filter.misc,{filesizeformat:function(_2d9){_2d9=parseFloat(_2d9);if(_2d9<1024){return (_2d9==1)?_2d9+" byte":_2d9+" bytes";}else{if(_2d9<1024*1024){return (_2d9/1024).toFixed(1)+" KB";}else{if(_2d9<1024*1024*1024){return (_2d9/1024/1024).toFixed(1)+" MB";}}}return (_2d9/1024/1024/1024).toFixed(1)+" GB";},pluralize:function(_2da,arg){arg=arg||"s";if(arg.indexOf(",")==-1){arg=","+arg;}var _2db=arg.split(",");if(_2db.length>2){return "";}var _2dc=_2db[0];var _2dd=_2db[1];if(parseInt(_2da,10)!=1){return _2dd;}return _2dc;},_phone2numeric:{a:2,b:2,c:2,d:3,e:3,f:3,g:4,h:4,i:4,j:5,k:5,l:5,m:6,n:6,o:6,p:7,r:7,s:7,t:8,u:8,v:8,w:9,x:9,y:9},phone2numeric:function(_2de){var dm=dojox.dtl.filter.misc;_2de=_2de+"";var _2df="";for(var i=0;i<_2de.length;i++){var chr=_2de.charAt(i).toLowerCase();(dm._phone2numeric[chr])?_2df+=dm._phone2numeric[chr]:_2df+=_2de.charAt(i);}return _2df;},pprint:function(_2e0){return dojo.toJson(_2e0);}});}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.getObject("date",true,dojo);dojo.date.getDaysInMonth=function(_2e1){var _2e2=_2e1.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_2e2==1&&dojo.date.isLeapYear(_2e1)){return 29;}return days[_2e2];};dojo.date.isLeapYear=function(_2e3){var year=_2e3.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_2e4){var str=_2e4.toString();var tz="";var _2e5;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_2e5=str.match(pat))){tz=_2e5[1];}else{str=_2e4.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_2e5=str.match(pat))){tz=_2e5[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_2e6,_2e7,_2e8){_2e6=new Date(+_2e6);_2e7=new Date(+(_2e7||new Date()));if(_2e8=="date"){_2e6.setHours(0,0,0,0);_2e7.setHours(0,0,0,0);}else{if(_2e8=="time"){_2e6.setFullYear(0,0,0);_2e7.setFullYear(0,0,0);}}if(_2e6>_2e7){return 1;}if(_2e6<_2e7){return -1;}return 0;};dojo.date.add=function(date,_2e9,_2ea){var sum=new Date(+date);var _2eb=false;var _2ec="Date";switch(_2e9){case "day":break;case "weekday":var days,_2ed;var mod=_2ea%5;if(!mod){days=(_2ea>0)?5:-5;_2ed=(_2ea>0)?((_2ea-5)/5):((_2ea+5)/5);}else{days=mod;_2ed=parseInt(_2ea/5);}var strt=date.getDay();var adj=0;if(strt==6&&_2ea>0){adj=1;}else{if(strt==0&&_2ea<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_2ea>0)?2:-2;}_2ea=(7*_2ed)+days+adj;break;case "year":_2ec="FullYear";_2eb=true;break;case "week":_2ea*=7;break;case "quarter":_2ea*=3;case "month":_2eb=true;_2ec="Month";break;default:_2ec="UTC"+_2e9.charAt(0).toUpperCase()+_2e9.substring(1)+"s";}if(_2ec){sum["set"+_2ec](sum["get"+_2ec]()+_2ea);}if(_2eb&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_2ee,_2ef,_2f0){_2ef=_2ef||new Date();_2f0=_2f0||"day";var _2f1=_2ef.getFullYear()-_2ee.getFullYear();var _2f2=1;switch(_2f0){case "quarter":var m1=_2ee.getMonth();var m2=_2ef.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_2f1*4);_2f2=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(_2ee,_2ef,"day"));var _2f3=parseInt(dojo.date.difference(_2ee,_2ef,"week"));var mod=days%7;if(mod==0){days=_2f3*5;}else{var adj=0;var aDay=_2ee.getDay();var bDay=_2ef.getDay();_2f3=parseInt(days/7);mod=days%7;var _2f4=new Date(_2ee);_2f4.setDate(_2f4.getDate()+(_2f3*7));var _2f5=_2f4.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_2f5+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_2f5+mod)<0:adj=2;}}}days+=adj;days-=(_2f3*2);}_2f2=days;break;case "year":_2f2=_2f1;break;case "month":_2f2=(_2ef.getMonth()-_2ee.getMonth())+(_2f1*12);break;case "week":_2f2=parseInt(dojo.date.difference(_2ee,_2ef,"day")/7);break;case "day":_2f2/=24;case "hour":_2f2/=60;case "minute":_2f2/=60;case "second":_2f2/=1000;case "millisecond":_2f2*=_2ef.getTime()-_2ee.getTime();}return Math.round(_2f2);};}if(!dojo._hasResource["dojox.date.php"]){dojo._hasResource["dojox.date.php"]=true;dojo.provide("dojox.date.php");dojox.date.php.format=function(date,_2f6){var df=new dojox.date.php.DateFormat(_2f6);return df.format(date);};dojox.date.php.DateFormat=function(_2f7){if(!this.regex){var keys=[];for(var key in this.constructor.prototype){if(dojo.isString(key)&&key.length==1&&dojo.isFunction(this[key])){keys.push(key);}}this.constructor.prototype.regex=new RegExp("(?:(\\\\.)|(["+keys.join("")+"]))","g");}var _2f8=[];this.tokens=dojox.string.tokenize(_2f7,this.regex,function(_2f9,_2fa,i){if(_2fa){_2f8.push([i,_2fa]);return _2fa;}if(_2f9){return _2f9.charAt(1);}});this.replacements=_2f8;};dojo.extend(dojox.date.php.DateFormat,{weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_3:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_3:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthdays:[31,28,31,30,31,30,31,31,30,31,30,31],format:function(date){this.date=date;for(var i=0,_2fb;_2fb=this.replacements[i];i++){this.tokens[_2fb[0]]=this[_2fb[1]]();}return this.tokens.join("");},d:function(){var j=this.j();return (j.length==1)?"0"+j:j;},D:function(){return this.weekdays_3[this.date.getDay()];},j:function(){return this.date.getDate()+"";},l:function(){return this.weekdays[this.date.getDay()];},N:function(){var w=this.w();return (!w)?7:w;},S:function(){switch(this.date.getDate()){case 11:case 12:case 13:return "th";case 1:case 21:case 31:return "st";case 2:case 22:return "nd";case 3:case 23:return "rd";default:return "th";}},w:function(){return this.date.getDay()+"";},z:function(){var _2fc=this.date.getTime()-new Date(this.date.getFullYear(),0,1).getTime();return Math.floor(_2fc/86400000)+"";},W:function(){var week;var _2fd=new Date(this.date.getFullYear(),0,1).getDay()+1;var w=this.date.getDay()+1;var z=parseInt(this.z());if(z<=(8-_2fd)&&_2fd>4){var _2fe=new Date(this.date.getFullYear()-1,this.date.getMonth(),this.date.getDate());if(_2fd==5||(_2fd==6&&dojo.date.isLeapYear(_2fe))){week=53;}else{week=52;}}else{var i;if(Boolean(this.L())){i=366;}else{i=365;}if((i-z)<(4-w)){week=1;}else{var j=z+(7-w)+(_2fd-1);week=Math.ceil(j/7);if(_2fd>4){--week;}}}return week;},F:function(){return this.months[this.date.getMonth()];},m:function(){var n=this.n();return (n.length==1)?"0"+n:n;},M:function(){return this.months_3[this.date.getMonth()];},n:function(){return this.date.getMonth()+1+"";},t:function(){return (Boolean(this.L())&&this.date.getMonth()==1)?29:this.monthdays[this.getMonth()];},L:function(){return (dojo.date.isLeapYear(this.date))?"1":"0";},o:function(){},Y:function(){return this.date.getFullYear()+"";},y:function(){return this.Y().slice(-2);},a:function(){return this.date.getHours()>=12?"pm":"am";},b:function(){return this.a().toUpperCase();},B:function(){var off=this.date.getTimezoneOffset()+60;var secs=(this.date.getHours()*3600)+(this.date.getMinutes()*60)+this.getSeconds()+(off*60);var beat=Math.abs(Math.floor(secs/86.4)%1000)+"";while(beat.length<2){beat="0"+beat;}return beat;},g:function(){return (this.date.getHours()>12)?this.date.getHours()-12+"":this.date.getHours()+"";},G:function(){return this.date.getHours()+"";},h:function(){var g=this.g();return (g.length==1)?"0"+g:g;},H:function(){var G=this.G();return (G.length==1)?"0"+G:G;},i:function(){var mins=this.date.getMinutes()+"";return (mins.length==1)?"0"+mins:mins;},s:function(){var secs=this.date.getSeconds()+"";return (secs.length==1)?"0"+secs:secs;},e:function(){return dojo.date.getTimezoneName(this.date);},I:function(){},O:function(){var off=Math.abs(this.date.getTimezoneOffset());var _2ff=Math.floor(off/60)+"";var mins=(off%60)+"";if(_2ff.length==1){_2ff="0"+_2ff;}if(mins.length==1){_2ff="0"+mins;}return ((this.date.getTimezoneOffset()<0)?"+":"-")+_2ff+mins;},P:function(){var O=this.O();return O.substring(0,2)+":"+O.substring(2,4);},T:function(){return this.e().substring(0,3);},Z:function(){return this.date.getTimezoneOffset()*-60;},c:function(){return this.Y()+"-"+this.m()+"-"+this.d()+"T"+this.h()+":"+this.i()+":"+this.s()+this.P();},r:function(){return this.D()+", "+this.d()+" "+this.M()+" "+this.Y()+" "+this.H()+":"+this.i()+":"+this.s()+" "+this.O();},U:function(){return Math.floor(this.date.getTime()/1000);}});}if(!dojo._hasResource["dojox.dtl.utils.date"]){dojo._hasResource["dojox.dtl.utils.date"]=true;dojo.provide("dojox.dtl.utils.date");dojox.dtl.utils.date.DateFormat=function(_300){dojox.date.php.DateFormat.call(this,_300);};dojo.extend(dojox.dtl.utils.date.DateFormat,dojox.date.php.DateFormat.prototype,{f:function(){return (!this.date.getMinutes())?this.g():this.g()+":"+this.i();},N:function(){return dojox.dtl.utils.date._months_ap[this.date.getMonth()];},P:function(){if(!this.date.getMinutes()&&!this.date.getHours()){return "midnight";}if(!this.date.getMinutes()&&this.date.getHours()==12){return "noon";}return this.f()+" "+this.a();}});dojo.mixin(dojox.dtl.utils.date,{format:function(date,_301){var df=new dojox.dtl.utils.date.DateFormat(_301);return df.format(date);},timesince:function(d,now){if(!(d instanceof Date)){d=new Date(d.year,d.month,d.day);}if(!now){now=new Date();}var _302=Math.abs(now.getTime()-d.getTime());for(var i=0,_303;_303=dojox.dtl.utils.date._chunks[i];i++){var _304=Math.floor(_302/_303[0]);if(_304){break;}}return _304+" "+_303[1](_304);},_chunks:[[60*60*24*365*1000,function(n){return (n==1)?"year":"years";}],[60*60*24*30*1000,function(n){return (n==1)?"month":"months";}],[60*60*24*7*1000,function(n){return (n==1)?"week":"weeks";}],[60*60*24*1000,function(n){return (n==1)?"day":"days";}],[60*60*1000,function(n){return (n==1)?"hour":"hours";}],[60*1000,function(n){return (n==1)?"minute":"minutes";}]],_months_ap:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."]});}if(!dojo._hasResource["dojox.dtl.filter.dates"]){dojo._hasResource["dojox.dtl.filter.dates"]=true;dojo.provide("dojox.dtl.filter.dates");(function(){var ddfd=dojox.dtl.filter.dates;dojo.mixin(ddfd,{_toDate:function(_305){if(_305 instanceof Date){return _305;}_305=new Date(_305);if(_305.getTime()==new Date(0).getTime()){return "";}return _305;},date:function(_306,arg){_306=ddfd._toDate(_306);if(!_306){return "";}arg=arg||"N j, Y";return dojox.dtl.utils.date.format(_306,arg);},time:function(_307,arg){_307=ddfd._toDate(_307);if(!_307){return "";}arg=arg||"P";return dojox.dtl.utils.date.format(_307,arg);},timesince:function(_308,arg){_308=ddfd._toDate(_308);if(!_308){return "";}var _309=dojox.dtl.utils.date.timesince;if(arg){return _309(arg,_308);}return _309(_308);},timeuntil:function(_30a,arg){_30a=ddfd._toDate(_30a);if(!_30a){return "";}var _30b=dojox.dtl.utils.date.timesince;if(arg){return _30b(arg,_30a);}return _30b(new Date(),_30a);}});})();}if(!dojo._hasResource["dojox.dtl.filter.integers"]){dojo._hasResource["dojox.dtl.filter.integers"]=true;dojo.provide("dojox.dtl.filter.integers");dojo.mixin(dojox.dtl.filter.integers,{add:function(_30c,arg){_30c=parseInt(_30c,10);arg=parseInt(arg,10);return isNaN(arg)?_30c:_30c+arg;},get_digit:function(_30d,arg){_30d=parseInt(_30d,10);arg=parseInt(arg,10)-1;if(arg>=0){_30d+="";if(arg<_30d.length){_30d=parseInt(_30d.charAt(arg),10);}else{_30d=0;}}return (isNaN(_30d)?0:_30d);}});}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.getObject("string",true,dojo);dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_30e,map,_30f,_310){_310=_310||dojo.global;_30f=_30f?dojo.hitch(_310,_30f):function(v){return v;};return _30e.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_311,key,_312){var _313=dojo.getObject(key,false,map);if(_312){_313=dojo.getObject(_312,false,_310).call(_310,_313,key);}return _30f(_313,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.getObject("date.stamp",true,dojo);dojo.date.stamp.fromISOString=function(_314,_315){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _316=dojo.date.stamp._isoRegExp.exec(_314),_317=null;if(_316){_316.shift();if(_316[1]){_316[1]--;}if(_316[6]){_316[6]*=1000;}if(_315){_315=new Date(_315);dojo.forEach(dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _315["get"+prop]();}),function(_318,_319){_316[_319]=_316[_319]||_318;});}_317=new Date(_316[0]||1970,_316[1]||0,_316[2]||1,_316[3]||0,_316[4]||0,_316[5]||0,_316[6]||0);if(_316[0]<100){_317.setFullYear(_316[0]||1970);}var _31a=0,_31b=_316[7]&&_316[7].charAt(0);if(_31b!="Z"){_31a=((_316[8]||0)*60)+(Number(_316[9])||0);if(_31b!="-"){_31a*=-1;}}if(_31b){_31a-=_317.getTimezoneOffset();}if(_31a){_317.setTime(_317.getTime()+_31a*60000);}}return _317;};dojo.date.stamp.toISOString=function(_31c,_31d){var _31e=function(n){return (n<10)?"0"+n:n;};_31d=_31d||{};var _31f=[],_320=_31d.zulu?"getUTC":"get",date="";if(_31d.selector!="time"){var year=_31c[_320+"FullYear"]();date=["0000".substr((year+"").length)+year,_31e(_31c[_320+"Month"]()+1),_31e(_31c[_320+"Date"]())].join("-");}_31f.push(date);if(_31d.selector!="date"){var time=[_31e(_31c[_320+"Hours"]()),_31e(_31c[_320+"Minutes"]()),_31e(_31c[_320+"Seconds"]())].join(":");var _321=_31c[_320+"Milliseconds"]();if(_31d.milliseconds){time+="."+(_321<100?"0":"")+_31e(_321);}if(_31d.zulu){time+="Z";}else{if(_31d.selector!="time"){var _322=_31c.getTimezoneOffset();var _323=Math.abs(_322);time+=(_322>0?"-":"+")+_31e(Math.floor(_323/60))+":"+_31e(_323%60);}}_31f.push(time);}return _31f.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");new Date("X");dojo.parser=new function(){var d=dojo;function _324(_325){if(d.isString(_325)){return "string";}if(typeof _325=="number"){return "number";}if(typeof _325=="boolean"){return "boolean";}if(d.isFunction(_325)){return "function";}if(d.isArray(_325)){return "array";}if(_325 instanceof Date){return "date";}if(_325 instanceof d._Url){return "url";}return "object";};function _326(_327,type){switch(type){case "string":return _327;case "number":return _327.length?Number(_327):NaN;case "boolean":return typeof _327=="boolean"?_327:!(_327.toLowerCase()=="false");case "function":if(d.isFunction(_327)){_327=_327.toString();_327=d.trim(_327.substring(_327.indexOf("{")+1,_327.length-1));}try{if(_327===""||_327.search(/[^\w\.]+/i)!=-1){return new Function(_327);}else{return d.getObject(_327,false)||new Function(_327);}}catch(e){return new Function();}case "array":return _327?_327.split(/\s*,\s*/):[];case "date":switch(_327){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_327);}case "url":return d.baseUrl+_327;default:return d.fromJson(_327);}};var _328={},_329={};d.connect(d,"extend",function(){_329={};});function _32a(cls,_32b){for(var name in cls){if(name.charAt(0)=="_"){continue;}if(name in _328){continue;}_32b[name]=_324(cls[name]);}return _32b;};function _32c(_32d,_32e){var c=_329[_32d];if(!c){var cls=d.getObject(_32d),_32f=null;if(!cls){return null;}if(!_32e){_32f=_32a(cls.prototype,{});}c={cls:cls,params:_32f};}else{if(!_32e&&!c.params){c.params=_32a(c.cls.prototype,{});}}return c;};this._functionFromScript=function(_330,_331){var _332="";var _333="";var _334=(_330.getAttribute(_331+"args")||_330.getAttribute("args"));if(_334){d.forEach(_334.split(/\s*,\s*/),function(part,idx){_332+="var "+part+" = arguments["+idx+"]; ";});}var _335=_330.getAttribute("with");if(_335&&_335.length){d.forEach(_335.split(/\s*,\s*/),function(part){_332+="with("+part+"){";_333+="}";});}return new Function(_332+_330.innerHTML+_333);};this.instantiate=function(_336,_337,args){var _338=[],_337=_337||{};args=args||{};var _339=(args.scope||d._scopeName)+"Type",_33a="data-"+(args.scope||d._scopeName)+"-";d.forEach(_336,function(obj){if(!obj){return;}var node,type,_33b,_33c,_33d,_33e;if(obj.node){node=obj.node;type=obj.type;_33e=obj.fastpath;_33b=obj.clsInfo||(type&&_32c(type,_33e));_33c=_33b&&_33b.cls;_33d=obj.scripts;}else{node=obj;type=_339 in _337?_337[_339]:node.getAttribute(_339);_33b=type&&_32c(type);_33c=_33b&&_33b.cls;_33d=(_33c&&(_33c._noScript||_33c.prototype._noScript)?[]:d.query("> script[type^='dojo/']",node));}if(!_33b){throw new Error("Could not load class '"+type);}var _33f={};if(args.defaults){d._mixin(_33f,args.defaults);}if(obj.inherited){d._mixin(_33f,obj.inherited);}if(_33e){var _340=node.getAttribute(_33a+"props");if(_340&&_340.length){try{_340=d.fromJson.call(args.propsThis,"{"+_340+"}");d._mixin(_33f,_340);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_340+"'");}}var _341=node.getAttribute(_33a+"attach-point");if(_341){_33f.dojoAttachPoint=_341;}var _342=node.getAttribute(_33a+"attach-event");if(_342){_33f.dojoAttachEvent=_342;}dojo.mixin(_33f,_337);}else{var _343=node.attributes;for(var name in _33b.params){var item=name in _337?{value:_337[name],specified:true}:_343.getNamedItem(name);if(!item||(!item.specified&&(!dojo.isIE||name.toLowerCase()!="value"))){continue;}var _344=item.value;switch(name){case "class":_344="className" in _337?_337.className:node.className;break;case "style":_344="style" in _337?_337.style:(node.style&&node.style.cssText);}var _345=_33b.params[name];if(typeof _344=="string"){_33f[name]=_326(_344,_345);}else{_33f[name]=_344;}}}var _346=[],_347=[];d.forEach(_33d,function(_348){node.removeChild(_348);var _349=(_348.getAttribute(_33a+"event")||_348.getAttribute("event")),type=_348.getAttribute("type"),nf=d.parser._functionFromScript(_348,_33a);if(_349){if(type=="dojo/connect"){_346.push({event:_349,func:nf});}else{_33f[_349]=nf;}}else{_347.push(nf);}});var _34a=_33c.markupFactory||_33c.prototype&&_33c.prototype.markupFactory;var _34b=_34a?_34a(_33f,node,_33c):new _33c(_33f,node);_338.push(_34b);var _34c=(node.getAttribute(_33a+"id")||node.getAttribute("jsId"));if(_34c){d.setObject(_34c,_34b);}d.forEach(_346,function(_34d){d.connect(_34b,_34d.event,null,_34d.func);});d.forEach(_347,function(func){func.call(_34b);});});if(!_337._started){d.forEach(_338,function(_34e){if(!args.noStart&&_34e&&dojo.isFunction(_34e.startup)&&!_34e._started&&(!_34e.getParent||!_34e.getParent())){_34e.startup();}});}return _338;};this.parse=function(_34f,args){var root;if(!args&&_34f&&_34f.rootNode){args=_34f;root=args.rootNode;}else{root=_34f;}args=args||{};var _350=(args.scope||d._scopeName)+"Type",_351="data-"+(args.scope||d._scopeName)+"-";function scan(_352,list){var _353=dojo.clone(_352.inherited);dojo.forEach(["dir","lang"],function(name){var val=_352.node.getAttribute(name);if(val){_353[name]=val;}});var _354=_352.clsInfo&&!_352.clsInfo.cls.prototype._noScript?_352.scripts:null;var _355=(!_352.clsInfo||!_352.clsInfo.cls.prototype.stopParser)||(args&&args.template);for(var _356=_352.node.firstChild;_356;_356=_356.nextSibling){if(_356.nodeType==1){var type,_357=_355&&_356.getAttribute(_351+"type");if(_357){type=_357;}else{type=_355&&_356.getAttribute(_350);}var _358=_357==type;if(type){var _359={"type":type,fastpath:_358,clsInfo:_32c(type,_358),node:_356,scripts:[],inherited:_353};list.push(_359);scan(_359,list);}else{if(_354&&_356.nodeName.toLowerCase()=="script"){type=_356.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_354.push(_356);}}else{if(_355){scan({node:_356,inherited:_353},list);}}}}}};var list=[];scan({node:root?dojo.byId(root):dojo.body(),inherited:(args&&args.inherited)||{dir:dojo._isBodyLtr()?"ltr":"rtl"}},list);var _35a=args&&args.template?{template:true}:null;return this.instantiate(list,_35a,args);};}();(function(){var _35b=function(){if(dojo.config.parseOnLoad){dojo.parser.parse();}};if(dojo.getObject("dijit.wai.onload")===dojo._loaders[0]){dojo._loaders.splice(1,0,_35b);}else{dojo._loaders.unshift(_35b);}})();}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");var cache={};dojo.cache=function(_35c,url,_35d){if(typeof _35c=="string"){var _35e=dojo.moduleUrl(_35c,url);}else{_35e=_35c;_35d=url;}var key=_35e.toString();var val=_35d;if(_35d!=undefined&&!dojo.isString(_35d)){val=("value" in _35d?_35d.value:undefined);}var _35f=_35d&&_35d.sanitize?true:false;if(typeof val=="string"){val=cache[key]=_35f?dojo.cache._sanitize(val):val;}else{if(val===null){delete cache[key];}else{if(!(key in cache)){val=dojo._getText(key);cache[key]=_35f?dojo.cache._sanitize(val):val;}val=cache[key];}}return val;};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _360=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_360){val=_360[1];}}else{val="";}return val;};}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _361=this.declaredClass,_362=this;return dojo.string.substitute(tmpl,this,function(_363,key){if(key.charAt(0)=="!"){_363=dojo.getObject(key.substr(1),false,_362);}if(typeof _363=="undefined"){throw new Error(_361+" template:"+key);}if(_363==null){return "";}return key.charAt(0)=="!"?_363:_363.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _364=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_364)){node=dojo._toDom(this._stringRepl(_364));if(node.nodeType!=1){throw new Error("Invalid template: "+_364);}}else{node=_364.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node);if(this.widgetsInTemplate){var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"}));this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_365){var dest=this.containerNode;if(_365&&dest){while(_365.hasChildNodes()){dest.appendChild(_365.firstChild);}}},_attachTemplateNodes:function(_366,_367){_367=_367||function(n,p){return n.getAttribute(p);};var _368=dojo.isArray(_366)?_366:(_366.all||_366.getElementsByTagName("*"));var x=dojo.isArray(_366)?0:-1;for(;x<_368.length;x++){var _369=(x==-1)?_366:_368[x];if(this.widgetsInTemplate&&(_367(_369,"dojoType")||_367(_369,"data-dojo-type"))){continue;}var _36a=_367(_369,"dojoAttachPoint")||_367(_369,"data-dojo-attach-point");if(_36a){var _36b,_36c=_36a.split(/\s*,\s*/);while((_36b=_36c.shift())){if(dojo.isArray(this[_36b])){this[_36b].push(_369);}else{this[_36b]=_369;}this._attachPoints.push(_36b);}}var _36d=_367(_369,"dojoAttachEvent")||_367(_369,"data-dojo-attach-event");if(_36d){var _36e,_36f=_36d.split(/\s*,\s*/);var trim=dojo.trim;while((_36e=_36f.shift())){if(_36e){var _370=null;if(_36e.indexOf(":")!=-1){var _371=_36e.split(":");_36e=trim(_371[0]);_370=trim(_371[1]);}else{_36e=trim(_36e);}if(!_370){_370=_36e;}this._attachEvents.push(this.connect(_369,_36e,_370));}}}var role=_367(_369,"waiRole");if(role){dijit.setWaiRole(_369,role);}var _372=_367(_369,"waiState");if(_372){dojo.forEach(_372.split(/\s*,\s*/),function(_373){if(_373.indexOf("-")!=-1){var pair=_373.split("-");dijit.setWaiState(_369,pair[0],pair[1]);}});}}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){dojo.forEach(this._attachPoints,function(_374){delete this[_374];},this);this._attachPoints=[];dojo.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_375,_376,_377){var _378=dijit._Templated._templateCache;var key=_376||_375;var _379=_378[key];if(_379){try{if(!_379.ownerDocument||_379.ownerDocument==dojo.doc){return _379;}}catch(e){}dojo.destroy(_379);}if(!_376){_376=dojo.cache(_375,{sanitize:true});}_376=dojo.string.trim(_376);if(_377||_376.match(/\$\{([^\}]+)\}/g)){return (_378[key]=_376);}else{var node=dojo._toDom(_376);if(node.nodeType!=1){throw new Error("Invalid template: "+_376);}return (_378[key]=node);}};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _37a=dijit._Templated._templateCache;for(var key in _37a){var _37b=_37a[key];if(typeof _37b=="object"){dojo.destroy(_37b);}delete _37a[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["dojox.dtl._Templated"]){dojo._hasResource["dojox.dtl._Templated"]=true;dojo.provide("dojox.dtl._Templated");dojo.declare("dojox.dtl._Templated",dijit._Templated,{_dijitTemplateCompat:false,buildRendering:function(){var node;if(this.domNode&&!this._template){return;}if(!this._template){var t=this.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);if(t instanceof dojox.dtl.Template){this._template=t;}else{node=t;}}if(!node){var _37c=new dojox.dtl._Context(this);if(!this._created){delete _37c._getter;}var _37d=dojo._toDom(this._template.render(_37c));if(_37d.nodeType!==1&&_37d.nodeType!==3){for(var i=0,l=_37d.childNodes.length;i<l;++i){node=_37d.childNodes[i];if(node.nodeType==1){break;}}}else{node=_37d;}}this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _37e=dojo.parser,qry,attr;if(_37e._query!="[dojoType]"){qry=_37e._query;attr=_37e._attrName;_37e._query="[dojoType]";_37e._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_37e._query=qry;_37e._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}if(this.domNode){dojo.place(node,this.domNode,"before");this.destroyDescendants();dojo.destroy(this.domNode);}this.domNode=node;this._fillContent(this.srcNodeRef);},_templateCache:{},getCachedTemplate:function(_37f,_380,_381){var _382=this._templateCache;var key=_380||_37f;if(_382[key]){return _382[key];}_380=dojo.string.trim(_380||dojo.cache(_37f,{sanitize:true}));if(this._dijitTemplateCompat&&(_381||_380.match(/\$\{([^\}]+)\}/g))){_380=this._stringRepl(_380);}if(_381||!_380.match(/\{[{%]([^\}]+)[%}]\}/g)){return _382[key]=dojo._toDom(_380);}else{return _382[key]=new dojox.dtl.Template(_380);}},render:function(){this.buildRendering();},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});}if(!dojo._hasResource["agi.widget._TemplatedWidget"]){dojo._hasResource["agi.widget._TemplatedWidget"]=true;dojo.provide("agi.widget._TemplatedWidget");dojo.declare("agi.widget._TemplatedWidget",[dijit._Widget,dojox.dtl._Templated],{});}if(!dojo._hasResource["agi.requester"]){dojo._hasResource["agi.requester"]=true;dojo.provide("agi.requester");agi.requester.Requester=function(url,_383,_384,_385,_386){var _387=this;var req=null;this.async=_384;this.method=_383;this.url=url;this.showbusy=_385;this.in_process=false;this.handleas=_386?_386:"text";this.get_millisecond_query=function(){var _388=new Date();var ms=_388.getTime();return "&ajax_requester_ms="+ms;};this.sendRequest=function(_389){var _38a={url:this.url,sync:!this.async,content:_389?_389:{},preventCache:_389?true:false,handleAs:this.handleas,load:_387.processLoad,error:_387.processError};if(this.showbusy){document.body.style.cursor="wait";}this.in_process=true;if(this.method.toUpperCase()=="POST"){dojo.xhrPost(_38a);}else{dojo.xhrGet(_38a);}};this.processLoad=function(_38b,_38c){_38b=_387.processAlways(_38b,_38c);if(_38c.xhr.getResponseHeader("Kaboom")){if(_38c.xhrgetResponseHeader("Kaboom").toLowerCase()=="true"){if(_387.onerror){_387.onerror(_38b,_38c);}}}else{if(_387.onsuccess){_387.onsuccess(_38b,_38c);}}return _38b;};this.processError=function(_38d,_38e){_38d=_387.processAlways(_38d,_38e);if(_387.onerror){_387.onerror(_38d,_38e);}return _38d;};this.processAlways=function(_38f,_390){_387.in_process=false;if(_387.showbusy){document.body.style.cursor="auto";}if(!_38f){_38f="";}try{_38f=_38f.replace("<!--this page was compressed by your friendly neighborhood pydriver-->","");}catch(e){}return _38f;};this.formToQuery=function(_391){var _392=dojo.formToObject(_391);return _392;};};var script_fragment="<script[^>]*>([\\s\\S]*?)</script>";agi.requester.stripScripts=function(_393){return _393.replace(new RegExp(script_fragment,"img"),"");};agi.requester.extractScripts=function(_394){var _395=new RegExp(script_fragment,"img");var _396=new RegExp(script_fragment,"im");var _397=_394.match(_395);var _398=[];if(_397){for(var i=0;i<_397.length;i++){if(_397[i].indexOf("agi-lb-exec")!=-1){_398.push(_397[i].match(_396)[1]);}}}return _398;};agi.requester.evalScripts=function(_399){var _39a=agi.requester.extractScripts(_399);for(i=0;i<_39a.length;i++){try{eval(_39a[i]);}catch(e){}}};agi.requester.checkAll=function(_39b,_39c){form=dojo.byId(_39b);for(i=0;i<form.elements.length;i++){if(form.elements[i].type=="checkbox"){form.elements[i].checked=_39c;}}};agi.requester.countChecked=function(_39d){var form=dojo.byId(_39d);var _39e=0;for(i=0;i<form.elements.length;i++){if(form.elements[i].type=="checkbox"&form.elements[i].checked){_39e++;}}return _39e;};agi.requester.selectAll=function(_39f,_3a0){if(_3a0==undefined){var _3a1=true;}else{var _3a1=_3a0;}var list=dojo.byId(_39f);var _3a2=document.getElementsByName("event_id");for(i=0;i<list.childNodes.length;i++){if(list.childNodes[i].nodeName=="LI"){for(j=0;j<list.childNodes[i].childNodes.length;j++){if(list.childNodes[i].childNodes[j].type=="checkbox"){list.childNodes[i].childNodes[j].checked=_3a1;len=_3a2.length;for(n=0;n<len;n++){if((_3a2[n].value)==(list.childNodes[i].childNodes[j].value)){_3a2[n].checked=_3a1;}}}}}}};agi.requester.selectEqual=function(_3a3){var _3a4=document.getElementsByName(_3a3.name);for(i=0;i<_3a4.length;i++){if(_3a3.form.elements[i].value==_3a3.value){_3a3.form.elements[i].checked=_3a3.checked;}}};agi.requester.fixurl=function(url){if(url.indexOf("http")!=0){var sep="";url.indexOf("/")==0?sep="":sep="/";url=agi.requester.ajaxhost()+sep+url;}return url;};agi.requester.ajaxhost=function(){return document.location.protocol+"//"+document.location.hostname;};}if(!dojo._hasResource["agi.widget.Lightbox"]){dojo._hasResource["agi.widget.Lightbox"]=true;dojo.provide("agi.widget.Lightbox");dojo.declare("agi.widget.Lightbox",[agi.classes.Identified,agi.widget._TemplatedWidget],{url:null,contents:null,node:null,templatePath:null,left:null,top:null,height:null,width:null,position:"absolute",relativeTo:null,showloader:true,loaderSrc:imghost+"/ag/reminders/loader.swf",loaderId:"agi-lightboxloader",loaderHeight:120,loaderWidth:120,overlayId:"agi-overlay",showoverlay:true,lightboxId:"agi-lightbox",noprintClass:"agi-noprint",timeout:60000,loadnow:true,allowclick:false,closeKey:null,overflow:"auto",overlayZindex:"999",containerZindex:"1000",loaderZindex:"250",_defaultTop:20,_ready:false,_reset:false,_showing:false,_bgIframe:null,_keypressListener:null,_hideSignal:"ag/Lightbox/hide",_resizeSignal:"ag/Lightbox/resize",constructor:function(_3a5){_3a5=_3a5||{};dojo.mixin(this,_3a5);this._checkPositioning();},uninitialize:function(){dojo._destroyElement(this.loader);dojo._destroyElement(this.lightbox);if(this.overlay){dojo._destroyElement(this.overlay);}if(this._bgIframe){this._bgIframe.destroy();this._bgIframe=null;}},_checkPositioning:function(){if(this.position=="relative"){if(!this.relativeTo){throw (this+" needs a relativeTo when positioning relatively");}if(this.left==null){this.left=0;}if(this.top==null){this.top=0;}var pos=dojo.coords(this.relativeTo);this.left+=pos.x;this.top+=pos.y;}else{if(this.position=="user"){if(this.top==null||this.left==null){throw (this+" needs 'left' and 'top' defined when using user-defined positioning.");}}else{if(this.top==null){this.top=this._defaultTop;}}}},buildRendering:function(){if(this.templatePath||this.templateString){this.inherited(arguments);}this.overlay=this._createOverlay();this.lightbox=this._createLightbox(this.overlay);this.loader=this._createLoader();},postCreate:function(){this.inherited(arguments);dojo.subscribe(this._hideSignal,dojo.hitch(this,this.hide));dojo.subscribe(this._resizeSignal,dojo.hitch(this,this._resizeOverlay));if(this.loadnow){this._loadContent();}},_createOverlay:function(){var body=dojo.body();var _3a6=this.overlayId;var _3a7=dojo.byId(_3a6);if(!_3a7){_3a7=document.createElement("div");_3a7.setAttribute("id",_3a6);dojo.addClass(_3a7,this.noprintClass);var _3a8=this._pageSize();dojo.style(_3a7,{display:"none",position:"absolute",top:"0",left:"0",zIndex:this.overlayZindex,width:"100%",height:_3a8[1]+"px"});body.insertBefore(_3a7,body.firstChild);}try{filter=dojo.style(_3a7,"filter");if(filter&&dojo.isIE){if(filter.indexOf(imghost)==-1){filter=filter.replace("/agbeta",imghost+"/agbeta");dojo.style(_3a7,"filter",filter);}}}catch(e){}return _3a7;},_createLightbox:function(_3a9){var body=dojo.body();var _3aa=dojo.byId(this.lightboxId);if(!_3aa){_3aa=document.createElement("div");_3aa.setAttribute("id",this.lightboxId);dojo.style(_3aa,{display:"none",position:"absolute",zIndex:this.containerZindex});body.insertBefore(_3aa,_3a9.nextSibling);}_3aa.innerHTML="";return _3aa;},_createLoader:function(){var body=dojo.body();var _3ab=dojo.byId("loadingImage");if(!_3ab){if(this.loaderSrc.endswith(".swf")){_3ab=this._createLoaderSwf(this.loaderSrc);}else{_3ab=this._createLoaderImage(this.loaderSrc);}dojo.style(_3ab,{display:"none",visibility:"hidden",position:"absolute",zIndex:this.loaderZindex});body.insertBefore(_3ab,body.firstChild);}return _3ab;},_createLoaderSwf:function(src){var _3ac=document.createElement("embed");_3ac.setAttribute("id",this.loaderId);_3ac.setAttribute("name","FlashProduct");_3ac.setAttribute("src",src);_3ac.setAttribute("swLiveConnect",true);_3ac.setAttribute("width",this.loaderWidth);_3ac.setAttribute("height",this.loaderHeight);_3ac.setAttribute("scale","noborder");_3ac.setAttribute("quality","high");_3ac.setAttribute("type","application/x-shockwave-flash");_3ac.setAttribute("pluginspace","http://www.macromedia.com/go/getflashplayer");_3ac.setAttribute("wmode","transparent");return _3ac;},_createLoaderImage:function(src){var _3ad=document.createElement("img");_3ad.setAttribute("id",this.loaderId);_3ad.setAttribute("src",src);_3ad.setAttribute("width",this.loaderWidth);_3ad.setAttribute("height",this.loaderHeight);return _3ad;},_loadContent:function(){if(this.domNode&&!this.node){this.node=this.domNode;}if(this.loader&&this.showloader){var _3ae=this._pageSize();var _3af=this._pageScroll();var _3b0=_3af[1]+((_3ae[3]-35-this.loader.height)/2);var _3b1=((_3ae[0]-20-this.loader.width)/2);dojo.style(this.loader,{display:"block",visibility:"visible",top:_3b0+"px",left:_3b1+"px"});}if(this.overlay&&this.showoverlay){dojo.style(this.overlay,{display:"block",visibility:"visible"});}if(this.url){dojo.xhrGet({url:this.url,handleAs:"text",timeout:this.timeout,load:dojo.hitch(this,this._onSuccess),error:dojo.hitch(this,this._onError)});}else{if(this.contents){this.lightbox.innerHTML=agi.requester.stripScripts(this.contents);this._ready=true;this.show();agi.requester.evalScripts(this.contents);this._enableOverlayClick();}else{if(this.node){var node=dojo.byId(this.node);this.lightbox.appendChild(dojo.byId(node));dojo.style(node,"display","block");this._ready=true;this.show();this._enableOverlayClick();}}}},_onSuccess:function(_3b2,_3b3){this.lightbox.innerHTML=agi.requester.stripScripts(_3b2);this._ready=true;this.show();agi.requester.evalScripts(_3b2);this._enableOverlayClick();return _3b2;},_onError:function(_3b4,_3b5){this.hide();return _3b4;},show:function(_3b6){if(_3b6){this._checkPositioning();}this._showPhase0();this._showPhase1();this._showPhase2();this.postShow();},_showPhase0:function(){if(!this._ready){return this._loadContent();}if(this._reset){this._checkPositioning();this._reset=false;}if(this.contents){this.lightbox.innerHTML=this.contents;}dojo.style(this.lightbox,"overflow",this.overflow);if(this.loader){dojo.style(this.loader,{display:"none",visibility:"hidden"});}if(this.overlay&&this.showoverlay){dojo.style(this.overlay,{display:"block",visibility:"visible"});}},_showPhase1:function(){var _3b7=this._pageScroll();var _3b8=this.top+_3b7[1];var _3b9={left:"-9999px",top:_3b8+"px",visibility:"visible",display:"block"};if(this.height){_3b9.height=this.height+"px";}if(this.width){_3b9.width=this.width+"px";}dojo.style(this.lightbox,_3b9);},_showPhase2:function(){var _3ba=this._pageSize();if(this.left==null){this.left=((_3ba[0]-this.lightbox.offsetWidth)/2);}var _3bb={left:this.left+"px"};dojo.style(this.lightbox,_3bb);this._resizeOverlay();this._enableKeypressListener();if(!this._bgIframe){var _3bc=this.lightbox;if(this.overlay&&this.showoverlay){_3bc=this.overlay;}this._bgIframe=new dijit.BackgroundIframe(_3bc);}this._showing=true;},postShow:function(){return;},hide:function(_3bd){if(!this._showing){return;}if(this.overlay){this.overlay.onclick=function(){return false;};dojo.style(this.overlay,{display:"none",visibility:"hidden"});}if(this.loader){dojo.style(this.loader,{display:"none",visibility:"hidden"});}if(this.lightbox){dojo.style(this.lightbox,{display:"none",visibility:"hidden"});if(_3bd){this.reset();}else{this.contents=this.lightbox.innerHTML;}}this._disableKeypressListener();this._showing=false;},reset:function(){if(this.node){dojo.style(this.node,{display:"none"});dojo.place(this.node,dojo.body(),"last");}this.lightbox.innerHTML="";this.contents=null;this.url=null;this.domNode=null;this.top=null;this.left=null;this._ready=false;this._reset=true;},_enableOverlayClick:function(){if(this.overlay&&this.allowclick){this._overlayClick=dojo.connect(this.overlay,"onclick",dojo.hitch(this,this.hide));}},_disableOverlayClick:function(){if(this._overlayClick){dojo.disconnect(this._overlayClick);this._overlayClick=null;}},_enableKeypressListener:function(){if(this.closeKey&&!this._keypressListener){this._keypressListener=dojo.connect(document,"keypress",dojo.hitch(this,this._onKeypress));}},_disableKeypressListener:function(){if(this._keypressListener){dojo.disconnect(this._keypressListener);this._keypressListener=null;}},_onKeypress:function(evt){if(evt.charOrCode==this.closeKey){this.hide();}},_resizeOverlay:function(){if(this.overlay){var _3be=this._pageSize();dojo.style(this.overlay,"height",_3be[1]+"px");}},_pageScroll:function(){var _3bf=0;if(self.pageYOffset){_3bf=self.pageYOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){_3bf=document.documentElement.scrollTop;}else{if(document.body){_3bf=document.body.scrollTop;}}}var _3c0=[null,_3bf];return _3c0;},_pageSize:function(){var _3c1,_3c2;if(window.innerHeight&&window.scrollMaxY){_3c1=document.body.scrollWidth;_3c2=window.innerHeight+window.scrollMaxY;}else{if(document.body.scrollHeight>document.body.offsetHeight){_3c1=document.body.scrollWidth;_3c2=document.body.scrollHeight;}else{_3c1=document.body.offsetWidth;_3c2=document.body.offsetHeight;}}var _3c3,_3c4;if(self.innerHeight){_3c3=self.innerWidth;_3c4=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){_3c3=document.documentElement.clientWidth;_3c4=document.documentElement.clientHeight;}else{if(document.body){_3c3=document.body.clientWidth;_3c4=document.body.clientHeight;}}}var _3c5,_3c6;if(_3c2<_3c4){_3c6=_3c4;}else{_3c6=_3c2;}if(_3c1<_3c3){_3c5=_3c3;}else{_3c5=_3c1;}var _3c7=[_3c5,_3c6,_3c3,_3c4];return _3c7;}});}if(!dojo._hasResource["agi.widget.focusform"]){dojo._hasResource["agi.widget.focusform"]=true;dojo.provide("agi.widget.focusform");dojo.declare("agi.widget.focusform.FocusForm",[agi.classes.Identified],{orig_form_values:{},on_cls:"activeinput",off_cls:"lazyinput",form:null,form_id:null,handles:null,constructor:function(_3c8,_3c9,_3ca){this.handles=[];this.form_id=_3c8;this.form=dojo.byId(_3c8);this.on_cls=_3ca||this.on_cls;this.off_cls=_3c9||this.off_cls;this.setup_onfocus();this.setup_onsubmit();dojo.connect(this.form,"onreset",this,this.reset_form);},wake_input:function(ev){var node=ev.target;if(node.className.indexOf(this.off_cls)>-1){node.value="";if(node.name.indexOf("password")>-1){if(dojo.isIE){var _3cb=agi.dom.make_node("<input name=\""+node.name+"\" />",{"class":node.className,"name":node.name,"type":"password","id":node.id,"maxlength":"32"});}else{var _3cb=agi.dom.make_node("input",{"class":node.className,"name":node.name,"type":"password","id":node.id,"maxlength":"32"});}node=agi.dom.swap_node(node,_3cb);this.connect_password_keypress(node);node.focus();node.focus();_3cb.focus();}node.className=node.className.replace(/lazyinput/,this.on_cls);}},reset_input:function(node){if(node.className.indexOf(this.on_cls)>-1){node.className=node.className.replace(/activeinput/,this.off_cls);if(node.name.indexOf("password")>-1){if(dojo.isIE){var _3cc=agi.dom.make_node("<input name=\""+node.name+"\" />",{"class":node.className,"name":node.name,"type":"text","id":node.id});}else{var _3cc=agi.dom.make_node("input",{"class":node.className,"name":node.name,"type":"text","id":node.id});}node=agi.dom.swap_node(node,_3cc);}try{node.value=this.orig_form_values[node.name];}catch(e){node.value="Couldn't find original value";}}},reset_form:function(){this.form=dojo.byId(this.form_id);dojo.forEach(this.form.elements,dojo.hitch(this,function(node){this.reset_input(node);}));dojo.forEach(this.handles,function(_3cd){dojo.disconnect(_3cd);});this.handles=[];this.setup_onfocus();},setup_onfocus:function(){dojo.forEach(this.form.elements,dojo.hitch(this,function(node){this.orig_form_values[node.name]=node.value;if(node.type=="textarea"||node.type=="text"||node.type=="select-one"){this.handles.push(dojo.connect(node,"onfocus",dojo.hitch(this,this.wake_input)));}}));},setup_onsubmit:function(){this.handles.push(dojo.connect(this.form,"onsubmit",function(evt){dojo.publish("ag/widget/focusform/submit",[evt]);}));},connect_password_keypress:function(node){dojo.connect(node,"onkeypress",this,this.submit_on_keypress);},submit_on_keypress:function(evt){if(evt.keyCode==dojo.keys.ENTER){dojo.stopEvent(evt);dojo.publish("ag/widget/focusform/submitkey",[evt]);this.form.submit();}}});agi.widget.focusform.connect_password_keypress=function(node,_3ce){dojo.connect(node,"onkeypress",function(e){if(e.keyCode==13){e.preventDefault();agi.widget.focusform.submit_on_keypress(_3ce);}});};agi.widget.focusform.submit_on_keypress=function(_3cf){dojo.byId(_3cf).submit();};}if(!dojo._hasResource["agi.widget.findit"]){dojo._hasResource["agi.widget.findit"]=true;dojo.provide("agi.widget.findit");agi.widget.findit.FinditLightbox=function(_3d0,_3d1){this.hidden_node_id=_3d0;this.bad_form_id="findit_magic";this.form_id=_3d1;this.ff=undefined;this.lightbox=null;this.show=dojo.hitch(this,function(){if(this.lightbox){this.lightbox.show();}else{var _3d2=dojo.byId(this.hidden_node_id);this.lightbox=new agi.widget.Lightbox({node:_3d2,lightboxId:"lightbox",loaderId:"loadingImage",overlayId:"agi-overlay"});if(dojo.byId(this.bad_form_id)){dojo.byId(this.bad_form_id).id=this.form_id;}this.ff=new agi.widget.focusform.FocusForm(this.form_id);}return false;});this.hide=dojo.hitch(this,function(){if(this.ff){this.ff.reset_form();}this.lightbox.hide();return false;});};}if(!dojo._hasResource["ag.widget.findit"]){dojo._hasResource["ag.widget.findit"]=true;dojo.provide("ag.widget.findit");ag.widget.findit=agi.widget.findit;}if(!dojo._hasResource["ag.widget.Lightbox"]){dojo._hasResource["ag.widget.Lightbox"]=true;dojo.provide("ag.widget.Lightbox");ag.widget.Lightbox=agi.widget.Lightbox;}if(!dojo._hasResource["ag.widget.focusform"]){dojo._hasResource["ag.widget.focusform"]=true;dojo.provide("ag.widget.focusform");ag.widget.focusform=agi.widget.focusform;}if(!dojo._hasResource["ag.widget.signin"]){dojo._hasResource["ag.widget.signin"]=true;dojo.provide("ag.widget.signin");dojo.declare("ag.widget.signin.SignInLightbox",[agi.classes.Identified],{hidden_node_id:null,bad_form_id:"signin_magic",form_id:null,ff:null,lightbox:null,constructor:function(_3d3,_3d4){this.hidden_node_id=_3d3;this.form_id=_3d4;},show:function(){if(this.lightbox){this.lightbox.show();if(this.ff){this.ff.reset_form();}}else{var _3d5=dojo.byId(this.hidden_node_id);this.lightbox=new ag.widget.Lightbox({node:_3d5,lightboxId:"lightbox",loaderId:"loadingImage",overlayId:"agi-overlay"});if(dojo.byId(this.bad_form_id)){dojo.byId(this.bad_form_id).id=this.form_id;}this.ff=new ag.widget.focusform.FocusForm(this.form_id);try{agx.currentPage.controller.connectTempStorageSignin();}catch(e){}try{agx.currentPage.controller.connectPersStorageSignin();}catch(e){}}return false;},hide:function(){this.lightbox.hide();return false;}});}if(!dojo._hasResource["ag.widget.register"]){dojo._hasResource["ag.widget.register"]=true;dojo.provide("ag.widget.register");ag.widget.register.RegistrationTrigger=function(url,attr){var loc="/register/lb.pd";var _3d6={"width":440,"hideloading":true};if(url){loc=url;}if(attr){_3d6=attr;}this.lightbox=null;var _3d7=this;this.show=function(app,_3d8){var url=loc;if(app){url+="?app="+escape(app)+"&referer="+escape(_3d8);}if(this.lightbox){this.lightbox.show();}else{this.lightbox=new ag.widget.Lightbox({lightboxId:"lightbox",overlayId:"agi-overlay",url:url,width:440,showloader:false});}omniture.swap_vars_and_ping({"s_pageName":loc});};this.hide=function(){this.lightbox.hide();};};ag.widget.register.showCellInfo=function(btn){dojo.byId("cell_info").style.display="block";};ag.widget.register.hideCellInfo=function(btn){dojo.byId("cell_info").style.display="none";};}if(!dojo._hasResource["agi.widget.search"]){dojo._hasResource["agi.widget.search"]=true;dojo.provide("agi.widget.search");agi.widget.search.submit=function submitSearch(_3d9,_3da,_3db){if((_3d9==undefined)||(_3d9=="")){_3d9="ag-searchtext";}if(_3da==undefined){_3da="ag-searcharea";}if(_3db==undefined){_3db="Enter Search Here";}var s=new agi.widget.search.searcher(_3d9,_3da,_3db);return s.do_search();};agi.widget.search.searcher=function(_3dc,_3dd,_3de){var _3df=this;this.searchbox=dojo.byId(_3dc);this.searchpage=dojo.byId(_3dd).value;this.err_msg=_3de;this.do_init=function(){this.attach_events();};this.do_onblur=function(){if(_3df.searchbox.value==""){_3df.searchbox.value=_3df.err_msg;}};this.do_onfocus=function(){if(_3df.searchbox.value==_3df.err_msg){_3df.searchbox.value="";}};this.attach_events=function(){this.searchbox.onblur=this.do_onblur;this.searchbox.onfocus=this.do_onfocus;};this.highlight_search_box=function(){this.searchbox.style.border="2px solid #ff0000";this.searchbox.style.background="#FFDDDD";this.searchbox.value=this.err_msg;this.searchbox.blur();};this.send_to_search_page=function(){var _3e0="";var _3e1=this.searchpage+"?strSearch="+escape(this.searchbox.value);if(dojo.byId("lpage")){_3e0=dojo.byId("lpage").value;_3e1=_3e1+"&lpage="+_3e0;}window.document.location.href=_3e1;};this.do_search=function(){try{if((this.searchbox.value.length<=0)||(this.searchbox.value==this.err_msg)){this.highlight_search_box();}else{this.send_to_search_page();}return false;}catch(e){return false;}};this.do_init();};agi.widget.search.submit_msn=function(_3e2){if(_3e2=="ag"){try{return agi.widget.search.submit("q");}catch(e){return false;}}else{if(_3e2=="msn"){try{document.forms["msn-search"].action="http://www.bing.com/results.aspx";document.forms["msn-search"].submit();}catch(e){return false;}}}};}if(!dojo._hasResource["ag.widget.search"]){dojo._hasResource["ag.widget.search"]=true;dojo.provide("ag.widget.search");ag.widget.search=agi.widget.search;}if(!dojo._hasResource["agi.go.photoworks"]){dojo._hasResource["agi.go.photoworks"]=true;dojo.provide("agi.go.photoworks");agi.go.photoworks.go=function(_3e3){this.partial_url=_3e3;this.email=null;this.ahost=null;this.site=null;this.go=function(){this.clean_url();this.init_environ();this.set_email();this.do_redirect();};this.init_environ=function(){this.ahost=window.location.protocol+"//"+window.location.host;this.environ=(this.ahost.indexOf("www")!=-1)?"www":"beta";this.site=(this.ahost.indexOf("msn")!=-1)?"AG_MSN":"AG";};this.set_email=function(){this.email=agi.cookie.AGCookie.getCookieValue("customer","email");if(!this.email){this.email="";}};this.clean_url=function(){var pu=this.partial_url;pu=pu.replace("^http://www.","");pu=pu.replace(/cb=[^&]*&*/,"");pu=pu.replace(/email=[^&]*&*/,"");this.partial_url=pu;};this.do_redirect=function(){var _3e4="http://"+this.environ+"."+this.partial_url;var _3e5="&cb=PW_"+this.site+"&email="+this.email;var _3e6=_3e4+_3e5;window.location.assign(_3e6);};this.go();};}if(!dojo._hasResource["ag.go.photoworks"]){dojo._hasResource["ag.go.photoworks"]=true;dojo.provide("ag.go.photoworks");ag.go.photoworks=agi.go.photoworks;}if(!dojo._hasResource["agi.go.join"]){dojo._hasResource["agi.go.join"]=true;dojo.provide("agi.go.join");agi.go.join.encodePurl=function(purl){if(purl.indexOf("%")==-1){purl=encodeURIComponent(purl);}return purl;};agi.go.join.decodePurl=function(purl){if(purl.indexOf("%")>-1){purl=decodeURIComponent(purl);}purl=purl.replace(/\/popup\/signin\.pd/,"/index.pd");purl=purl.replace(/\/popup\/signout\.pd/,"/index.pd");return purl;};agi.go.join.go=function(url,purl,_3e7,_3e8,_3e9,intX,intY,_3ea){if(!purl){purl=window.location.href;}if(!_3e7){_3e7="300";}if(!_3e8){_3e8="320";}if(!_3e9){_3e9="joinwin";}if(!intX){intX=0;}if(!intY){intY=0;}if(!_3ea){_3ea=false;}pageindex=-1;questionindex=-1;questionindex=url.indexOf("?");if(url.contains("offer.pd")&&!url.contains("isic_offer.pd")){pageindex=url.indexOf("offer.pd");}else{if(url.contains("announce.pd")){pageindex=url.indexOf("announce.pd");}else{if(url.contains("marketingpop.pd")){pageindex=url.indexOf("marketingpop.pd");}}}purl=agi.go.join.encodePurl(purl);var ma=dojo.byId("ma");var _3eb=dojo.byId("wcMusicOn");var mci=dojo.byId("musicChoiceIndex");if(ma&&ma.value!="nomusic"&&!purl.contains("&ma=")){purl+="|ma:"+ma.value.replace(".mp3","");}if(_3eb){purl+="|wcMusicOn:"+_3eb.value;}if(mci){purl+="|musicChoiceIndex:"+mci.value;}if(url.contains("subscribe.pd")){purl=purl.replace(/\%20/g,"perc20");purl=purl.replace(/\%26/g,"and");url+="&purl="+purl;_3ea=true;}else{if(url.contains("ostatus")){if(url.contains("subs.subsag")){purl=purl.replace(/\%20/g,"+");purl=purl.replace(/\%26/g,"and");}url=url.replace(/ostatus/,"purl="+purl+"&ostatus");}else{if(questionindex==-1){url+="?purl="+purl;}else{url+="&purl="+purl;}}}if(pageindex<questionindex&&!_3ea){var _3ec;if(intX||intY){strWinFeatures="resizable=no,screenX="+intX+",screenY="+intY+",left="+intX+",top="+intY+",scrollbars=no,width="+_3e7+",height="+_3e8;_3ec=window.open(url,_3e9,strWinFeatures);}else{strWinFeatures="resizable=no,scrollbars=no,width="+_3e7+",height="+_3e8;_3ec=window.open(url,_3e9,strWinFeatures);}_3ec.focus();}else{window.document.location.href=url;}};agi.go.join.openOfferPop=function(url,_3ed,_3ee){purl=window.location.href;if(!url){var url="/popup/offer.pd?";if(purl.contains("cnp")){url=url+"cnp=1";}}var _3ef=window.screen.availWidth;var _3f0=window.screen.availHeight;var intW=300;var intH=320;var intX=_3ef-intW;var intY=_3f0-intH;if(_3ed){var _3f1=document.cookie;var pos=_3f1.indexOf(_3ed);if(pos==-1){SECONDS_PER_DAY=86400;myMinTimeOut=SECONDS_PER_DAY*_3ee;myDate=new Date();myDate.setTime(myDate.getTime()+(myMinTimeOut*1000));document.cookie=_3ed+"=true; expires="+myDate.toGMTString();agi.go.join.go(url,0,0,0,0,intX,0);}}else{agi.go.join.go(url,0,0,0,0,intX,0);}};}if(!dojo._hasResource["ag.go.join"]){dojo._hasResource["ag.go.join"]=true;dojo.provide("ag.go.join");ag.go.join=agi.go.join;}if(!dojo._hasResource["agi.go.popup"]){dojo._hasResource["agi.go.popup"]=true;dojo.provide("agi.go.popup");var glbStdFeatures="width=400,height=320,resizable=yes,scrollbars=yes,toolbar=no";var glbStdFeaturesExcSize="resizable=yes,scrollbars=yes,toolbar=no";OpenNewWindow=function(url,_3f2,_3f3,bar){var _3f4=window.open(url,"descr","toolbar=no,location=no,directories=no,status=no,menubar=no,resizable=no,copyhistory=no,width="+_3f2+",height="+_3f3+",scrollbars="+bar);};agi.go.popup.open=function(_3f5){var _3f6={url:"/",name:"agipopup",toolbar:"no",location:"no",directories:"no",status:"no",menubar:"no",resizable:"no",copyhistory:"no",width:300,height:300,scrollbars:"no"};dojo.mixin(_3f6,_3f5);var _3f7=window.open(_3f6.url,_3f6.name,"toolbar="+_3f6.toolbar+","+"location="+_3f6.location+","+"status="+_3f6.status+","+"resizable="+_3f6.resizable+","+"copyhistory="+_3f6.copyhistory+","+"width="+_3f6.width+","+"height="+_3f6.height+","+"scrollbars="+_3f6.scrollbars);return _3f7;};agi.go.popup.closeAndGo=function(url){window.opener.location.href=url;window.close();};openAddressPop=function(){var _3f8=window.open(addURL,"AddressBook",glbStdFeatures);_3f8.focus();};openFavoritesPop=function(){var _3f9=window.open(favLink,"AddFavorite",glbStdFeatures);_3f9.focus();};openScrapbookPop=function(){var _3fa=window.open(scrapLink,"SaveScrap",glbStdFeatures);_3fa.focus();};openPrintPop=function(_3fb){var _3fc=window.open(ahost+"/printpopup.pd?productNumber="+prodNumber,"Print","toolbar=no,scrollbar=no,width=400,height=400,resizable");};openViewPhotoPop=function(_3fd){var _3fe=window.open(ahost+"/viewphoto.pd?"+photoVars,"ViewPhoto","toolbar=no,scrollbar=no,width=400,height=400,resizable");};openInvVcsPop=function(){var _3ff=window.open("addtocalendar.pd?e="+eventNum+"&i="+itemNum+"&m="+memberNum,"Instructions","width=430,height=440,top=25,left=25,resizable=1,scrollbars=1");_3ff.focus();};function openAddressPop(){aWindow=window.open(addURL,"AddressBook",glbStdFeatures);aWindow.focus();};openAddressPop2=function(w,h){if(!w){w=562;}if(!h){h=460;}var _400="width="+w+",height="+h+",resizable=yes,scrollbars=yes,toolbar=no";aWindow=window.open(addURL,"AddressBook",_400);aWindow.focus();};openMessagePop=function(){aWindow=window.open(ahost+"/share/message.pd?path="+pathNumber,"SuggestedMessages",glbStdFeatures);aWindow.focus();};openMessagePop2=function(){aWindow=window.open(ahost+"/suggest/popup.pd?"+nav,"SuggestedMessages",glbStdFeatures);aWindow.focus();};openMessagePopBMA=function(){aWindow=window.open(ahost+"/share/message.pd?"+nav,"SuggestedMessages",glbStdFeatures);aWindow.focus();};openRecipePop=function(){rWindow=window.open(ahost+"/share/recipe.pd?path="+pathNumber+"&prodnum="+productNumber,"RecipeGreeting",glbStdFeatures);rWindow.focus();};openGiftPop=function(){giftWindow=window.open(partnerUrl,"GiftPickup",config="width=540,height=320,dependent=1,scrollbars=yes,resizable=yes");giftWindow.focus();};addAllFromQuickList=function(){intQLLength=document.orderForm.quicklist.length;for(i=0;i<intQLLength;i++){document.orderForm.quicklist.options[i].selected=true;}};}if(!dojo._hasResource["ag.go.popup"]){dojo._hasResource["ag.go.popup"]=true;dojo.provide("ag.go.popup");ag.go.popup=agi.go.popup;ag.go.popup.open=function(_401){var _402={url:"/",name:"agpopup",toolbar:"no",location:"no",directories:"no",status:"no",menubar:"no",resizable:"no",copyhistory:"no",width:300,height:300,scrollbars:"no"};dojo.mixin(_402,_401);var _403=window.open(_402.url,_402.name,"toolbar="+_402.toolbar+","+"location="+_402.location+","+"status="+_402.status+","+"resizable="+_402.resizable+","+"copyhistory="+_402.copyhistory+","+"width="+_402.width+","+"height="+_402.height+","+"scrollbars="+_402.scrollbars);return _403;};ag.go.popup.livechat=function(){dojo.publish("ag/livechat/show",[{"channel":"help"}]);return false;};ag.go.popup.newbrowser=function(_404){settings={url:"/",name:"agoutoffacebook",width:"1040",height:"700",scrollbars:"yes",resizable:"yes",fullscreen:"yes"};dojo.mixin(settings,_404);ag.go.popup.open(settings);return false;};ag.go.popup.feedback=function(_405){settings={url:ahost+"/feedback",name:"agfeedback",width:610,height:580,scrollbars:"yes"};dojo.mixin(settings,_405);ag.go.popup.open(settings);return false;};ag.go.popup.closeAndGo=function(url){window.opener.location.href=url;window.close();};}if(!dojo._hasResource["agi.popaway"]){dojo._hasResource["agi.popaway"]=true;dojo.provide("agi.popaway");agi.popaway.context={blnDoPopAway:true,BLN_POPAWAY:true,popURL:"",popH:420,popW:500,popCN:"",popCD:7,popPCT:100,popSCROLL:"yes"};agi.popaway.processOnUnload=function(){setTimeout("agi.popaway.delay()",500);if(agi.popaway.context.blnDoPopAway&&agi.popaway.context.BLN_POPAWAY){agi.popaway.popAway();}};agi.popaway.processOnClick=function(){agi.popaway.setDoPopAway(false);setTimeout("agi.popaway.delay()",500);};agi.popaway.setDoPopAway=function(_406){agi.popaway.context.blnDoPopAway=_406;};agi.popaway.delay=function(){return true;};agi.popaway.popAway=function(URL,_407,_408,_409,_40a,_40b,_40c){if(URL){agi.popaway.context.popURL=URL;}if(_407){agi.popaway.context.popH=_407;}if(_408){agi.popaway.context.popW=_408;}if(_409){agi.popaway.context.popCN=_409;}if(_40a!=undefined){agi.popaway.context.popCD=_40a;}if(_40b){agi.popaway.context.popPCT=_40b;}if(_40c){agi.popaway.context.popSCROLL=_40c;}var _40d=Math.round(Math.random()*100);var _40e="resizeable=yes,scrollbars="+agi.popaway.context.popSCROLL+",width="+agi.popaway.context.popW+",height="+agi.popaway.context.popH;if(_40d<=agi.popaway.context.popPCT){if(agi.popaway.context.popCN){var _40f=document.cookie;var pos=_40f.indexOf(agi.popaway.context.popCN);var _410="";if(pos==-1){if(agi.popaway.context.popCD){var _411=86400;var _412=_411*agi.popaway.context.popCD;var _413=new Date();_413.setTime(_413.getTime()+(_412*1000));_410=" expires="+_413.toGMTString()+";";}document.cookie=agi.popaway.context.popCN+"=true;"+_410+" path=/;";popAwayWin=window.open(agi.popaway.context.popURL,"popaway",_40e);}}else{popAwayWin=window.open(agi.popaway.context.popURL,"popaway",_40e);}}};agi.popaway.addHandlers=function(URL,_414,_415,_416,_417,_418,_419){if(URL){agi.popaway.context.popURL=URL;}if(_414){agi.popaway.context.popH=_414;}if(_415){agi.popaway.context.popW=_415;}if(_416){agi.popaway.context.popCN=_416;}if(_417!=undefined){agi.popaway.context.popCD=_417;}if(_418){agi.popaway.context.popPCT=_418;}if(_419){agi.popaway.context.popSCROLL=_419;}if(dojo.isIE){dojo.connect(document,"onclick",agi.popaway,"processOnClick");dojo.connect(document,"onkeydown",agi.popaway,"processOnClick");window.onunload=agi.popaway.processOnUnload;}else{dojo.connect(window,"onclick",agi.popaway,"processOnClick");dojo.connect(window,"onkeydown",agi.popaway,"processOnClick");dojo.addOnUnload(agi.popaway.processOnUnload);}};agi.popaway.checkReferrer=function(_41a,URL,_41b,_41c,_41d,_41e){if(document.referrer.indexOf(_41a)!=-1){agi.popaway.popAway(URL,_41b,_41c,_41d,_41e);}};}if(!dojo._hasResource["ag.popaway"]){dojo._hasResource["ag.popaway"]=true;dojo.provide("ag.popaway");ag.popaway=agi.popaway;}if(!dojo._hasResource["ag.widget.quickshop"]){dojo._hasResource["ag.widget.quickshop"]=true;dojo.provide("ag.widget.legacy_quickshop");if(!ag.widget.quickshop){ag.widget.quickshop={};}(function(){var qs=ag.widget.quickshop;var d=dojo;qs.toString=function(){return "AGLegacyQuickshop";};qs.Quickshop=function(id){this.toString=function(){return "[LegacyQuickshop]";};if(agx.currentPage.hasEndeca){return;}var me=this;this.container=d.byId(id);this.headings={"occasion":"I want to send a...","recipient":"To...","sentiment":"And I want it to be..."};this.defaults={};this.check_defaults=true;this.chosen_count=0;this.last_recipient="";this.last_sentiment="";this.do_onload=function(){d.connect(d.byId("qs_occasion"),"onchange",this,"do_onchange");d.connect(d.byId("qs_recipient"),"onchange",this,"do_onchange");d.connect(d.byId("qs_sentiment"),"onchange",this,"do_onchange");this.parse_url();var _41f=d.query(".submit",this.container)[0];_41f.onclick=function(){me.submit_search();};this.build_quickshop();this.check_defaults=false;};this.update_occasion=function(val){var _420=qs_data.occasions;for(o in _420){occasion=_420[o];if(occasion.name==val){this.occasion=occasion;var _421=occasion.recipients;var _422=occasion.sentiments;this.build_dropdown("sentiment",_422);this.build_dropdown("recipient",_421);this.build_dropdown("occasion",_420,val);return;}}};this.update_recipient=function(val){this.last_recipient=val;if(val==""){this.build_dropdown("sentiment",this.occasion.sentiments,this.last_sentiment);this.chosen_count--;}if(d.byId("qs_recipient").value!=val){d.byId("qs_recipient").value=val;}if(d.byId("qs_sentiment").value!=""&&this.chosen_count<3){this.chosen_count++;return;}for(r in this.occasion.recipients){recipient=this.occasion.recipients[r];if(recipient.name==val){var _423=recipient.sentiments;this.build_dropdown("sentiment",_423);}}this.chosen_count=2;};this.update_sentiment=function(val){this.last_sentiment=val;if(val==""){this.build_dropdown("recipient",this.occasion.recipients,this.last_recipient);this.chosen_count--;}if(d.byId("qs_sentiment").value!=val){d.byId("qs_sentiment").value=val;}if(d.byId("qs_recipient").value!=""&&this.chosen_count<3){this.chosen_count++;return;}for(s in this.occasion.sentiments){sentiment=this.occasion.sentiments[s];if(sentiment.name==val){var _424=sentiment.recipients;this.build_dropdown("recipient",_424);}}this.chosen_count=2;};this.build_quickshop=function(){this.occasions=qs_data.occasions;this.occasion=qs_data.occasions[1];if(this.defaults.occasion!=null){this.update_occasion(this.defaults.occasion);}else{this.update_occasion(qs_data.occasions[0].name);}if(this.defaults.recipient!=null){this.update_recipient(this.defaults.recipient);}if(this.defaults.sentiment!=null){this.update_sentiment(this.defaults.sentiment);}this.chosen_count=1;};this.build_dropdown=function(_425,unit,_426,_427){var _428=d.byId("qs_"+_425);this.add_options(unit,_428,_425,_426,_427,true);};this.add_options=function(unit,_429,_42a,_42b,_42c){this.remove_options(_429);_42c=_42c===undefined?true:_42c;var _42d=0;if(_42c&&(_429.id=="qs_recipient"||_429.id=="qs_sentiment")){var _42e=_42a.charAt(0).toUpperCase()+_42a.substring(1);_42e=_42e.replace("Sentiment","Style");this._add_option("[Choose "+_42e+"]","",_429,_42d);_42d+=1;}for(var i=0;i<unit.length;i++){var _42f=false;if(_42b!=undefined){_42f=unit[i].name==_42b;}this._add_option(unit[i].name,unit[i].name,_429,i+_42d,_42f);}};this._add_option=function(text,_430,_431,idx,_432){var _433=document.createElement("option");_433.text=text.toLowerCase();_433.value=_430;if(_431.id=="qs_occasion"){_433.text=_433.text+" ecard";}if(_431.options.add){_431.options.add(_433,idx);}else{_431.appendChild(_433);}if(_432){_431.options.selectedIndex=idx;}};this.remove_options=function(_434){for(var i=_434.options.length-1;i>=0;i--){_434.remove(i);}_434.options.length=0;};this.replace_options=function(){var _435=qs.get_group();var _436=d.byId("qs_sentiment");qs.remove_options(_436);var _437=_435.sentiments;qs.add_options(_437,_436,"sentiment");_436=d.byId("qs_recipient");qs.remove_options(_436);var _438=_435.recipients;qs.add_options(_438,_436,"recipient");};this.insert_select=function(_439,_43a){var br=ag.dom.make_node("br",{});d.dom.prependChild(br,this.container);d.dom.prependChild(_439,this.container);};this.do_onchange=function(e){var val=e.target.value;switch(e.target.id){case "qs_occasion":this.update_occasion(val);this.chosen_count=1;break;case "qs_sentiment":this.update_sentiment(val);break;case "qs_recipient":this.update_recipient(val);break;}};this.parse_url=function(){var _43b=window.location.search.replace("?","").split("&");for(var i=0;i<_43b.length;i++){if(_43b[i].startswith("qs_")){var nvp=_43b[i].split("=");if(nvp.length!=2){continue;}this.defaults[nvp[0].replace("qs_","")]=unescape(nvp[1]);}}};this.submit_search=function(){var ds=this.container.getElementsByTagName("select");var u=ahost+"/ecards/quickshop.pd?lpage=quickshop&";var p="";for(var i=0;i<ds.length;i++){var d=ds[i];var _43c=d.options[d.selectedIndex].value;p+=_43c?d.id+"="+escape(_43c)+"&":"";}if(!p){alert("Please make a selection first.");return;}p=p.replace(/&$/,"");u=u+p;window.location=u;};this.do_onload();};})();}if(!dojo._hasResource["ag.pile.shim"]){dojo._hasResource["ag.pile.shim"]=true;dojo.provide("ag.pile.shim");ag.pile.shim.toString=function(){return "SHIMTASTIC";};email_focus=agi.permissions.email_focus;newsletter_signup=agi.permissions.newsletter_signup;debounce=ag.util.debounce;toggle_block=ag.util.toggle_block;addHiddenInputElement=ag.dom.addHiddenInputElement;turbowipe=ag.widget.wiper.turbowipe;dojo.addOnLoad(ag.widget.myagdrop.init);FinditLightbox=ag.widget.findit.FinditLightbox;SignInLightbox=ag.widget.signin.SignInLightbox;RegistrationTrigger=ag.widget.register.RegistrationTrigger;showCellInfo=ag.widget.register.showCellInfo;hideCellInfo=ag.widget.register.hideCellInfo;submitSearch=function(){if(agx.currentPage.controller){if(agx.currentPage.controller.searchSubmit){return agx.currentPage.controller.searchSubmit(arguments);}}else{return ag.widget.search.submit(arguments);}};submitMSNSearch=function(_43d){if(agx.currentPage.controller){if(agx.currentPage.controller.searchSubmitMSN){return agx.currentPage.controller.searchSubmitMSN(_43d);}}else{return ag.widget.search.submit_msn(arguments);}};agi_to_pw=ag.go.photoworks.go;openJoin=ag.go.join.go;processOnClick=ag.popaway.processOnClick;quickshop=ag.widget.quickshop.Quickshop;getCustomerAge=agi.cookie.getCustomerAge;getCustomerGender=agi.cookie.getCustomerGender;getCustomerEmail=agi.cookie.getCustomerEmail;getCustomerNumber=agi.cookie.getMemNum;}if(!dojo._hasResource["ag.requester"]){dojo._hasResource["ag.requester"]=true;dojo.provide("ag.requester");ag.requester=agi.requester;}if(!dojo._hasResource["agi.flash.ufo"]){dojo._hasResource["agi.flash.ufo"]=true;dojo.provide("agi.flash.ufo");UFO={req:["movie","width","height","majorversion","build"],opt:["play","loop","menu","quality","scale","salign","wmode","bgcolor","base","flashvars","devicefont","allowscriptaccess","seamlesstabbing"],optAtt:["id","name","align"],optExc:["swliveconnect"],ximovie:"ufo.swf",xiwidth:"215",xiheight:"138",ua:navigator.userAgent.toLowerCase(),pluginType:"",fv:[0,0],foList:[],create:function(FO,id,_43e){if(!UFO.uaHas("w3cdom")||UFO.uaHas("ieMac")){return;}UFO.getFlashVersion();UFO.foList[id]=UFO.updateFO(FO);if(typeof _43e=="undefined"||_43e!="true"){UFO.createCSS("#"+id,"visibility:hidden;");}UFO.domLoad(id,_43e);},updateFO:function(FO){if(typeof FO.xi!="undefined"&&FO.xi=="true"){if(typeof FO.ximovie=="undefined"){FO.ximovie=UFO.ximovie;}if(typeof FO.xiwidth=="undefined"){FO.xiwidth=UFO.xiwidth;}if(typeof FO.xiheight=="undefined"){FO.xiheight=UFO.xiheight;}}FO.mainCalled=false;return FO;},domLoad:function(id,_43f){if(typeof _43f!="undefined"&&_43f=="true"){UFO.main(id);}else{var _440=setInterval(function(){if((document.getElementsByTagName("body")[0]!=null||document.body!=null)&&document.getElementById(id)!=null){UFO.main(id);clearInterval(_440);}},250);if(typeof document.addEventListener!="undefined"){document.addEventListener("DOMContentLoaded",function(){UFO.main(id);clearInterval(_440);},null);}}},main:function(id){var _441=UFO.foList[id];if(_441.mainCalled){return;}UFO.foList[id].mainCalled=true;document.getElementById(id).style.visibility="hidden";if(UFO.hasRequired(id)){if(UFO.hasFlashVersion(parseInt(_441.majorversion,10),parseInt(_441.build,10))){if(typeof _441.setcontainercss!="undefined"&&_441.setcontainercss=="true"){UFO.setContainerCSS(id);}UFO.writeSWF(id);}else{if(_441.xi=="true"&&UFO.hasFlashVersion(6,65)){UFO.createDialog(id);}}}document.getElementById(id).style.visibility="visible";},createCSS:function(_442,_443){var _444=document.getElementsByTagName("head")[0];var _445=UFO.createElement("style");if(!UFO.uaHas("ieWin")){_445.appendChild(document.createTextNode(_442+" {"+_443+"}"));}_445.setAttribute("type","text/css");_445.setAttribute("media","screen");_444.appendChild(_445);if(UFO.uaHas("ieWin")&&document.styleSheets&&document.styleSheets.length>0){var _446=document.styleSheets[document.styleSheets.length-1];if(typeof _446.addRule=="object"){_446.addRule(_442,_443);}}},setContainerCSS:function(id){var _447=UFO.foList[id];var _448=/%/.test(_447.width)?"":"px";var _449=/%/.test(_447.height)?"":"px";UFO.createCSS("#"+id,"width:"+_447.width+_448+"; height:"+_447.height+_449+";");if(_447.width=="100%"){UFO.createCSS("body","margin-left:0; margin-right:0; padding-left:0; padding-right:0;");}if(_447.height=="100%"){UFO.createCSS("html","height:100%; overflow:hidden;");UFO.createCSS("body","margin-top:0; margin-bottom:0; padding-top:0; padding-bottom:0; height:100%;");}},createElement:function(el){return (UFO.uaHas("xml")&&typeof document.createElementNS!="undefined")?document.createElementNS("http://www.w3.org/1999/xhtml",el):document.createElement(el);},createObjParam:function(el,_44a,_44b){var _44c=UFO.createElement("param");_44c.setAttribute("name",_44a);_44c.setAttribute("value",_44b);el.appendChild(_44c);},uaHas:function(ft){var _44d=UFO.ua;switch(ft){case "w3cdom":return (typeof document.getElementById!="undefined"&&typeof document.getElementsByTagName!="undefined"&&(typeof document.createElement!="undefined"||typeof document.createElementNS!="undefined"));case "xml":var _44e=document.getElementsByTagName("meta");var _44f=_44e.length;for(var i=0;i<_44f;i++){if(/content-type/i.test(_44e[i].getAttribute("http-equiv"))&&/xml/i.test(_44e[i].getAttribute("content"))){return true;}}return false;case "ieMac":return /msie/.test(_44d)&&!/opera/.test(_44d)&&/mac/.test(_44d);case "ieWin":return /msie/.test(_44d)&&!/opera/.test(_44d)&&/win/.test(_44d);case "gecko":return /gecko/.test(_44d)&&!/applewebkit/.test(_44d);case "opera":return /opera/.test(_44d);case "safari":return /applewebkit/.test(_44d);default:return false;}},getFlashVersion:function(){if(UFO.fv[0]!=0){return;}if(navigator.plugins&&typeof navigator.plugins["Shockwave Flash"]=="object"){UFO.pluginType="npapi";var _450=navigator.plugins["Shockwave Flash"].description;if(typeof _450!="undefined"){_450=_450.replace(/^.*\s+(\S+\s+\S+$)/,"$1");var _451=parseInt(_450.replace(/^(.*)\..*$/,"$1"),10);var _452=/r/.test(_450)?parseInt(_450.replace(/^.*r(.*)$/,"$1"),10):0;UFO.fv=[_451,_452];}}else{if(window.ActiveXObject){UFO.pluginType="ax";try{var _453=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var _453=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");UFO.fv=[6,0];_453.AllowScriptAccess="always";}catch(e){if(UFO.fv[0]==6){return;}}try{var _453=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(typeof _453=="object"){var _450=_453.GetVariable("$version");if(typeof _450!="undefined"){_450=_450.replace(/^\S+\s+(.*)$/,"$1").split(",");UFO.fv=[parseInt(_450[0],10),parseInt(_450[2],10)];}}}}},hasRequired:function(id){var _454=UFO.req.length;for(var i=0;i<_454;i++){if(typeof UFO.foList[id][UFO.req[i]]=="undefined"){return false;}}return true;},hasFlashVersion:function(_455,_456){return (UFO.fv[0]>_455||(UFO.fv[0]==_455&&UFO.fv[1]>=_456))?true:false;},writeSWF:function(id){var _457=UFO.foList[id];var _458=document.getElementById(id);if(UFO.pluginType=="npapi"){if(UFO.uaHas("gecko")||UFO.uaHas("xml")){while(_458.hasChildNodes()){_458.removeChild(_458.firstChild);}var _459=UFO.createElement("object");_459.setAttribute("type","application/x-shockwave-flash");_459.setAttribute("data",_457.movie);_459.setAttribute("width",_457.width);_459.setAttribute("height",_457.height);var _45a=UFO.optAtt.length;for(var i=0;i<_45a;i++){if(typeof _457[UFO.optAtt[i]]!="undefined"){_459.setAttribute(UFO.optAtt[i],_457[UFO.optAtt[i]]);}}var _45b=UFO.opt.concat(UFO.optExc);var _45a=_45b.length;for(var i=0;i<_45a;i++){if(typeof _457[_45b[i]]!="undefined"){UFO.createObjParam(_459,_45b[i],_457[_45b[i]]);}}_458.appendChild(_459);}else{var _45c="";var _45b=UFO.opt.concat(UFO.optAtt).concat(UFO.optExc);var _45a=_45b.length;for(var i=0;i<_45a;i++){if(typeof _457[_45b[i]]!="undefined"){_45c+=" "+_45b[i]+"=\""+_457[_45b[i]]+"\"";}}_458.innerHTML="<embed type=\"application/x-shockwave-flash\" src=\""+_457.movie+"\" width=\""+_457.width+"\" height=\""+_457.height+"\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\""+_45c+"></embed>";}}else{if(UFO.pluginType=="ax"){var _45d="";var _45a=UFO.optAtt.length;for(var i=0;i<_45a;i++){if(typeof _457[UFO.optAtt[i]]!="undefined"){_45d+=" "+UFO.optAtt[i]+"=\""+_457[UFO.optAtt[i]]+"\"";}}var _45e="";var _45a=UFO.opt.length;for(var i=0;i<_45a;i++){if(typeof _457[UFO.opt[i]]!="undefined"){_45e+="<param name=\""+UFO.opt[i]+"\" value=\""+_457[UFO.opt[i]]+"\" />";}}var _45f=window.location.protocol=="https:"?"https:":"http:";_458.innerHTML="<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\""+_45d+" width=\""+_457.width+"\" height=\""+_457.height+"\" codebase=\""+_45f+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+_457.majorversion+",0,"+_457.build+",0\"><param name=\"movie\" value=\""+_457.movie+"\" />"+_45e+"</object>";if(_457["id"]){window[_457["id"]]=document.getElementById(_457["id"]);}}}},createDialog:function(id){var _460=UFO.foList[id];UFO.createCSS("html","height:100%; overflow:hidden;");UFO.createCSS("body","height:100%; overflow:hidden;");UFO.createCSS("#xi-con","position:absolute; left:0; top:0; z-index:1000; width:100%; height:100%; background-color:#fff; filter:alpha(opacity:75); opacity:0.75;");UFO.createCSS("#xi-dia","position:absolute; left:50%; top:50%; margin-left: -"+Math.round(parseInt(_460.xiwidth,10)/2)+"px; margin-top: -"+Math.round(parseInt(_460.xiheight,10)/2)+"px; width:"+_460.xiwidth+"px; height:"+_460.xiheight+"px;");var _461=document.getElementsByTagName("body")[0];var _462=UFO.createElement("div");_462.setAttribute("id","xi-con");var _463=UFO.createElement("div");_463.setAttribute("id","xi-dia");_462.appendChild(_463);_461.appendChild(_462);var _464=window.location;if(UFO.uaHas("xml")&&UFO.uaHas("safari")){var _465=document.getElementsByTagName("title")[0].firstChild.nodeValue=document.getElementsByTagName("title")[0].firstChild.nodeValue.slice(0,47)+" - Flash Player Installation";}else{var _465=document.title=document.title.slice(0,47)+" - Flash Player Installation";}var _466=UFO.pluginType=="ax"?"ActiveX":"PlugIn";var _467=typeof _460.xiurlcancel!="undefined"?"&xiUrlCancel="+_460.xiurlcancel:"";var _468=typeof _460.xiurlfailed!="undefined"?"&xiUrlFailed="+_460.xiurlfailed:"";UFO.foList["xi-dia"]={movie:_460.ximovie,width:_460.xiwidth,height:_460.xiheight,majorversion:"6",build:"65",flashvars:"MMredirectURL="+_464+"&MMplayerType="+_466+"&MMdoctitle="+_465+_467+_468};UFO.writeSWF("xi-dia");},expressInstallCallback:function(){var _469=document.getElementsByTagName("body")[0];var _46a=document.getElementById("xi-con");_469.removeChild(_46a);UFO.createCSS("body","height:auto; overflow:auto;");UFO.createCSS("html","height:auto; overflow:auto;");},cleanupIELeaks:function(){var _46b=document.getElementsByTagName("object");var _46c=_46b.length;for(var i=0;i<_46c;i++){_46b[i].style.display="none";for(var x in _46b[i]){if(typeof _46b[i][x]=="function"){_46b[i][x]=null;}}}}};if(typeof window.attachEvent!="undefined"&&UFO.uaHas("ieWin")){window.attachEvent("onunload",UFO.cleanupIELeaks);}}if(!dojo._hasResource["ag.flash.ufo"]){dojo._hasResource["ag.flash.ufo"]=true;dojo.provide("ag.flash.ufo");ag.flash.ufo=agi.flash.ufo;}if(!dojo._hasResource["dojo.io.script"]){dojo._hasResource["dojo.io.script"]=true;dojo.provide("dojo.io.script");dojo.getObject("io",true,dojo);(function(){var _46d=dojo.isIE?"onreadystatechange":"load",_46e=/complete|loaded/;dojo.io.script={get:function(args){var dfd=this._makeScriptDeferred(args);var _46f=dfd.ioArgs;dojo._ioAddQueryToUrl(_46f);dojo._ioNotifyStart(dfd);if(this._canAttach(_46f)){var node=this.attach(_46f.id,_46f.url,args.frameDoc);if(!_46f.jsonp&&!_46f.args.checkString){var _470=dojo.connect(node,_46d,function(evt){if(evt.type=="load"||_46e.test(node.readyState)){dojo.disconnect(_470);_46f.scriptLoaded=evt;}});}}dojo._ioWatch(dfd,this._validCheck,this._ioCheck,this._resHandle);return dfd;},attach:function(id,url,_471){var doc=(_471||dojo.doc);var _472=doc.createElement("script");_472.type="text/javascript";_472.src=url;_472.id=id;_472.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_472);},remove:function(id,_473){dojo.destroy(dojo.byId(id,_473));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(args){var dfd=dojo._ioSetArgs(args,this._deferredCancel,this._deferredOk,this._deferredError);var _474=dfd.ioArgs;_474.id=dojo._scopeName+"IoScript"+(this._counter++);_474.canDelete=false;_474.jsonp=args.callbackParamName||args.jsonp;if(_474.jsonp){_474.query=_474.query||"";if(_474.query.length>0){_474.query+="&";}_474.query+=_474.jsonp+"="+(args.frameDoc?"parent.":"")+dojo._scopeName+".io.script.jsonp_"+_474.id+"._jsonpCallback";_474.frameDoc=args.frameDoc;_474.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_474.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){dojo.io.script._addDeadScript(dfd.ioArgs);}},_deferredOk:function(dfd){var _475=dfd.ioArgs;if(_475.canDelete){dojo.io.script._addDeadScript(_475);}return _475.json||_475.scriptLoaded||_475;},_deferredError:function(_476,dfd){if(dfd.ioArgs.canDelete){if(_476.dojoType=="timeout"){dojo.io.script.remove(dfd.ioArgs.id,dfd.ioArgs.frameDoc);}else{dojo.io.script._addDeadScript(dfd.ioArgs);}}return _476;},_deadScripts:[],_counter:1,_addDeadScript:function(_477){dojo.io.script._deadScripts.push({id:_477.id,frameDoc:_477.frameDoc});_477.frameDoc=null;},_validCheck:function(dfd){var _478=dojo.io.script;var _479=_478._deadScripts;if(_479&&_479.length>0){for(var i=0;i<_479.length;i++){_478.remove(_479[i].id,_479[i].frameDoc);_479[i].frameDoc=null;}dojo.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){var _47a=dfd.ioArgs;if(_47a.json||(_47a.scriptLoaded&&!_47a.args.checkString)){return true;}var _47b=_47a.args.checkString;if(_47b&&eval("typeof("+_47b+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(dojo.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(_47c){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;}};})();}if(!dojo._hasResource["agi.classes.Adopter"]){dojo._hasResource["agi.classes.Adopter"]=true;dojo.provide("agi.classes.Adopter");dojo.declare("agi.classes.Adopter",[agi.classes.Identified],{constructor:function(_47d){if(dojo.isObject(_47d)){dojo.mixin(this,_47d);this.postMixInProperties();}},postMixInProperties:function(){return;}});}if(!dojo._hasResource["agi.history.ViewHistoryCookie"]){dojo._hasResource["agi.history.ViewHistoryCookie"]=true;dojo.provide("agi.history.ViewHistoryCookie");dojo.declare("agi.history.ViewHistoryCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"cardviewhistory",constructor:function(){},read:function(_47e){if(!_47e){_47e="";}var _47f=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_47f==null){_47f=_47e;}return _47f;},set:function(_480){_480=this.read()+_480;agi.cookie.MagicCookie.setCookieValue(this.KEY,_480,false);},append:function(_481){this.set(this.read()+_481);}});}if(!dojo._hasResource["agi.history.LastActionCookie"]){dojo._hasResource["agi.history.LastActionCookie"]=true;dojo.provide("agi.history.LastActionCookie");dojo.declare("agi.history.LastActionCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"lastaction",constructor:function(){},read:function(_482){if(!_482){_482="";}var _483=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_483==null){_483=_482;}return _483;},set:function(_484){agi.cookie.MagicCookie.setCookieValue(this.KEY,_484,true);}});}if(!dojo._hasResource["agi.history.LastTriggerCookie"]){dojo._hasResource["agi.history.LastTriggerCookie"]=true;dojo.provide("agi.history.LastTriggerCookie");dojo.declare("agi.history.LastTriggerCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"lasttrigger",constructor:function(){},read:function(_485){if(!_485){_485="";}var _486=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_486==null){_486=_485;}return _486;},set:function(_487){agi.cookie.MagicCookie.setCookieValue(this.KEY,_487,false);}});}if(!dojo._hasResource["agi.segmentation.SegmentCookie"]){dojo._hasResource["agi.segmentation.SegmentCookie"]=true;dojo.provide("agi.segmentation.SegmentCookie");dojo.declare("agi.segmentation.SegmentCookie",[agi.classes.Identified,agi.classes.Adopter],{NON_MEMBER_DEFAULT:101,KEY:"segments",FROZEN_TREATMENTS:[184,185,186,203,204,207,208,217,218,219,235,236,237,238,240,241,242,244,245,246,247,248,249],constructor:function(){},read:function(){var _488=dojo.fromJson(agi.cookie.MagicCookie.getCookieValue(this.KEY));return _488;},set:function(_489,_48a){if(!_48a){_48a=false;}var _48b=dojo.fromJson(agi.cookie.MagicCookie.getCookieValue(this.KEY));if(_48b==null){_48b={};}for(key in _489){if(key.indexOf("cs")==0&&key.indexOf("cs9")!=0){if(_489[key]==this.NON_MEMBER_DEFAULT&&_48b[key]>this.NON_MEMBER_DEFAULT){_489[key]=_48b[key];}}if(!_48a&&(key=="cs2"&&this.FROZEN_TREATMENTS.indexOf(_48b[key])!=-1)){_489[key]=_48b[key];}}dojo.mixin(_48b,_489);agi.cookie.MagicCookie.setCookieValue(this.KEY,dojo.toJson(_48b),false);}});}if(!dojo._hasResource["agi.segmentation.OrderBailCookie"]){dojo._hasResource["agi.segmentation.OrderBailCookie"]=true;dojo.provide("agi.segmentation.OrderBailCookie");dojo.declare("agi.segmentation.OrderBailCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"orderbail",constructor:function(){},read:function(_48c){if(!_48c){_48c="";}var _48d=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_48d==null){_48d=_48c;}return _48d;},set:function(_48e){agi.cookie.MagicCookie.setCookieValue(this.KEY,_48e,false);}});}if(!dojo._hasResource["agi.segmentation.SegmentTestGroupCookie"]){dojo._hasResource["agi.segmentation.SegmentTestGroupCookie"]=true;dojo.provide("agi.segmentation.SegmentTestGroupCookie");dojo.declare("agi.segmentation.SegmentTestGroupCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"segmenttestgroup",constructor:function(){},read:function(_48f){if(!_48f){_48f="";}var _490=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_490==null){_490=_48f;}return _490;},set:function(_491){agi.cookie.MagicCookie.setCookieValue(this.KEY,_491,false);}});}if(!dojo._hasResource["agi.segmentation.constants"]){dojo._hasResource["agi.segmentation.constants"]=true;dojo.provide("agi.segmentation.constants");agi.segmentation.constants.MEMBER_DEFAULT=100;agi.segmentation.constants.NON_MEMBER_DEFAULT=101;agi.segmentation.constants.CSHomePage={MEM_DFT:100,NON_DFT:101,EC_3_9_DFT:102,EC_3_9_UPS:103,CP_3_9_DFT:104,CP_3_9_UPS:105,CP_1_2_DFT:106,CP_1_2_CNP:107,BD_1_2_RC1:109,BD_1_2_RC2:110,BD_1_2_RC3:111,BD_1_2_RC4:112,EC_3_9_DFT:113,EC_3_9_RC1:114,EC_3_9_RC2:115,EC_3_9_RC3:116,CP_3_9_DFT:118,CP_3_9_CNP:119,CP_3_9_CPUPS:120,CP_3_9_UPS:121,BD_3_9_DFT:122,BD_3_9_RC1:123,BD_3_9_RC2:124,BD_3_9_RC3:125,MEM_PRE_DFT:126,EC_PRE_REN:127,CP_PRE_REN:128,BD_PRE_REN:129,EC_10_12_DFT:130,EC_10_12_RC1:131,EC_10_12_RC2:132,EC_10_12_RC3:133,CP_10_12_DFT:134,CP_10_12_CNP:135,BD_10_12_DFT:137,BD_10_12_RC1:138,BD_10_12_RC2:139,BD_10_12_RC3:140,EC_1_2_DFT:141,EC_1_2_RC1:142,EC_1_2_RC2:143,EC_1_2_RC3:144,MEM_PROMO:145,NON_PROMO:146,EC_10_2_DFT:147,EC_10_2_RC1:148,EC_10_2_RC2:149,EC_10_2_RC3:150,EC_10_2_RC4:151,CP_10_2_DFT:152,CP_10_2_CNP:153,BD_10_2_DFT:154,BD_10_2_RC1:155,BD_10_2_RC2:156,BD_10_2_RC3:157,BD_10_2_RC4:158,EC_3_9_RC4:159,MEM_DFT_TCRL:164,MEM_DFT_TTST:165,EC_10_2_DFT_TST:166,EC_10_2_RC4_TST:167,CNPBD_ALL_DFT:168,CNPBD_ALL_DFT_TST:169,CNPBD_ALL_RC2:170,CNPBD_ALL_RC2_TST:171,EC_3_9_DFT_TST:172,EC_3_9_RC1_TST:173,EC_3_9_RC3_TST:174,CNPBD_ALL_RC1:175,CNPBD_ALL_RC1_TST:176,NON_FTV_DFT:177,NON_FTV_TST:178,NON_PS_EC_DFT:179,NON_PS_EC_TST:180,NON_OS_EC_DFT:181,NON_OS_EC_TST:182,NON_PS_FEC_DFT:183,NON_PS_FEC_TST:184,NON_OS_FEC_DFT:185,NON_OS_FEC_TST:186,NON_PS_BEC_DFT:187,NON_PS_BEC_TST:188,NON_OS_BEC_DFT:189,NON_OS_BEC_TST:190,NON_PS_FBEC_DFT:191,NON_PS_FBEC_TST:192,NON_OS_FBEC_DFT:193,NON_OS_FBEC_TST:194,NON_PS_CNP_DFT:195,NON_PS_CNP_TST:196,NON_OS_CNP_DFT:197,NON_OS_CNP_TST:198,NON_PS_BRAND_DFT:199,NON_PS_BRAND_TST:200,NON_OS_BRAND_DFT:201,NON_OS_BRAND_TST:202,NON_INT_FEC_DFT:203,NON_INT_FEC_TST:204,NON_INT_BEC_DFT:205,NON_INT_BEC_TST:206,NON_INT_FBEC_DFT:207,NON_INT_FBEC_TST:208,NON_INT_CNP_DFT:209,NON_INT_CNP_TST:210,NON_LA_OPB_DFT:211,NON_LA_OPB_TST:212,NON_LA_ECB_DFT:213,NON_LA_ECB_TST:214,NON_LA_CNPB_DFT:215,NON_LA_CNPB_TST:216,NON_LA_SND_DFT:217,NON_LA_SND_TST:218,NON_LA_SND_TST2:230,NON_LA_PRT_DFT:219,NON_LA_PRT_TST:220,MAC_IE8_USR:229};agi.segmentation.constants.CSViewPage={MEM_DFT:100,NON_DFT:101,NON_NEW_DFT:102,NON_NEW_TST:103,NON_LOW_DFT:104,NON_LOW_TST1:105,NON_LOW_TST2:106,NON_MED_DFT:107,NON_MED_TST1:108,NON_MED_TST2:109,NON_HGH_DFT:110,NON_HGH_TST1:111,BDAY_MEM_DFT:112,BDAY_NON_DFT:113,BDAY_NON_NEW_DFT:114,BDAY_NON_NEW_TST:115,BDAY_NON_LOW_DFT:116,BDAY_NON_LOW_TST1:117,BDAY_NON_LOW_TST2:118,BDAY_NON_MED_DFT:119,BDAY_NON_MED_TST1:120,BDAY_NON_MED_TST2:121,BDAY_NON_HGH_DFT:122,BDAY_NON_HGH_TST1:123};agi.segmentation.constants.CSDisplayPage={MEM_DFT:100,NON_DFT:101,NON_EFF_DEFN1_CMP:102,NON_EFF_DEFN1_TST:103,NON_NOEFF_DEFN1_CMP:104,NON_NOEFF_DEFN1_TST:105,NON_EFF_DEFN2_CMP:106,NON_EFF_DEFN2_TST:107,NON_NOEFF_DEFN2_CMP:108,NON_NOEFF_DEFN2_TST:109,MEM_EFF_DEFN2_CMP:110,MEM_EFF_DEFN2_TST:111,MEM_NON_EFF_DEFN2_CMP:112,MEM_NON_EFF_DEFN2_TST:113,NON_VIEW_CMP:114,NON_VIEW_TST:115,NON_FIND_CMP:116,NON_FIND_TST:117};}if(!dojo._hasResource["agi.segmentation.Listeners"]){dojo._hasResource["agi.segmentation.Listeners"]=true;dojo.provide("agi.segmentation.Listeners");dojo.declare("agi.segmentation.Listeners",[agi.classes.Identified,agi.classes.Adopter],{issue_cfp:false,constructor:function(){this.cardviewhistory=new agi.history.ViewHistoryCookie();this.lastactioncookie=new agi.history.LastActionCookie();this.lasttriggercookie=new agi.history.LastTriggerCookie();this.segmentcookie=new agi.segmentation.SegmentCookie();this.orderbailcookie=new agi.segmentation.OrderBailCookie();this.testgroupcookie=new agi.segmentation.SegmentTestGroupCookie();this.CSHP=agi.segmentation.constants.CSHomePage;this.NON_MEMBER_DEFAULT=agi.segmentation.constants.NON_MEMBER_DEFAULT;},fire:function(){if(typeof cust_seg_events=="undefined"){return;}dojo.forEach(cust_seg_events,dojo.hitch(this,this._execute));if(this.issue_cfp){this._issue_cookies();}},_issue_cookies:function(){dojo.io.script.get({url:ahost+"/share/session.pd",content:{cb:"void"}});},_execute:function(_492){if(typeof this[_492]=="function"){this[_492]();}},_is_test:function(){var test=this.testgroupcookie.read()+"";if(test!="0"&&test!="1"){test=Math.floor(Math.random()*2);this.testgroupcookie.set(test);}return parseInt(test);},_set_segment_cookie:function(_493){this.issue_cfp=true;this.segmentcookie.set(_493);},send_ecard:function(){this.lastactioncookie.set("send");this.lasttriggercookie.set("send");var site=this.determine_site();if(this._is_test()){this._set_segment_cookie({"cs2":this.CSHP.NON_LA_SND_TST});}else{this._set_segment_cookie({"cs2":this.CSHP.NON_LA_SND_DFT});}},view_ecard_free:function(){this.view_ecard("free");},view_ecard_paid:function(){this.view_ecard("paid");},view_ecard:function(type){if(type=="paid"){this.cardviewhistory.append("P");}else{this.cardviewhistory.append("F");}var _494=/.*F.*F.*/i;var _495=this.cardviewhistory.read();var site=this.determine_site();if(_495.search(_494)!=-1){this.lasttriggercookie.set("view2free");value=[235,236][this._is_test()];this._set_segment_cookie({"cs2":value});}},browse_ecard:function(){this.lastactioncookie.set("ecbrowse");this.lasttriggercookie.set("ecbrowse");},browse_printable:function(){this.lastactioncookie.set("cnpbrowse");this.lasttriggercookie.set("cnpbrowse");},order_bail:function(){var _496=this.orderbailcookie.read();if(document.location.pathname.indexOf("join")==-1&&_496.length>0){this.lastactioncookie.set("opbail");this.lasttriggercookie.set("opbail");this.orderbailcookie.set("");}},internal_search_birthday:function(){var site=this.determine_site();var _497=[this.CSHP.NON_INT_FBEC_DFT,this.CSHP.NON_INT_FBEC_TST][this._is_test()];this._set_segment_cookie({"cs2":_497});},internal_search_free:function(){var site=this.determine_site();var _498=[this.CSHP.NON_INT_FEC_DFT,this.CSHP.NON_INT_FEC_TST][this._is_test()];this._set_segment_cookie({"cs2":_498});},determine_site:function(){var bma="bluemountain.";var ag="americangreetings.";var _499="beta.";var url=window.location.toString().toLowerCase();if(url.indexOf(_499)>-1){return "agbeta";}if(url.indexOf(bma)>-1){return "bma";}if(url.indexOf(ag)>-1){return "ag";}return "ag";}});}if(!dojo._hasResource["agi.segmentation.SegmentProvider"]){dojo._hasResource["agi.segmentation.SegmentProvider"]=true;dojo.provide("agi.segmentation.SegmentProvider");agi.segmentation.SegmentProvider.init=function(){this.listeners=new agi.segmentation.Listeners();this.listeners.fire();};dojo.addOnLoad(agi.segmentation.SegmentProvider.init);}dojo.publish("/ag.layers.core/loaded/");
