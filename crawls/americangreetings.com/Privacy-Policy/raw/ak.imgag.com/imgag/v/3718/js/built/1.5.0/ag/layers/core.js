/*
	Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

dojo.provide("ag.layers.core");if(!dojo._hasResource["dojox.encoding.base64"]){dojo._hasResource["dojox.encoding.base64"]=true;dojo.provide("dojox.encoding.base64");(function(){var p="=";var _1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var _2=dojox.encoding;_2.base64.encode=function(ba){var s=[],l=ba.length;var rm=l%3;var x=l-rm;for(var i=0;i<x;){var t=ba[i++]<<16|ba[i++]<<8|ba[i++];s.push(_1.charAt((t>>>18)&63));s.push(_1.charAt((t>>>12)&63));s.push(_1.charAt((t>>>6)&63));s.push(_1.charAt(t&63));}switch(rm){case 2:var t=ba[i++]<<16|ba[i++]<<8;s.push(_1.charAt((t>>>18)&63));s.push(_1.charAt((t>>>12)&63));s.push(_1.charAt((t>>>6)&63));s.push(p);break;case 1:var t=ba[i++]<<16;s.push(_1.charAt((t>>>18)&63));s.push(_1.charAt((t>>>12)&63));s.push(p);s.push(p);break;}return s.join("");};_2.base64.decode=function(_3){var s=_3.split(""),_4=[];var l=s.length;while(s[--l]==p){}for(var i=0;i<l;){var t=_1.indexOf(s[i++])<<18;if(i<=l){t|=_1.indexOf(s[i++])<<12;}if(i<=l){t|=_1.indexOf(s[i++])<<6;}if(i<=l){t|=_1.indexOf(s[i++]);}_4.push((t>>>16)&255);_4.push((t>>>8)&255);_4.push(t&255);}while(_4[_4.length-1]==0){_4.pop();}return _4;};})();}if(!dojo._hasResource["agi.base64"]){dojo._hasResource["agi.base64"]=true;dojo.provide("agi.base64");agi.base64={encode:function(_5){if(!_5){return "";}return dojox.encoding.base64.encode(this.string_to_bytes(_5));},decode:function(_6){if(!_6){return "";}return this.bytes_to_str(dojox.encoding.base64.decode(_6));},string_to_bytes:function(_7){var _8=[];for(var i=0;i<_7.length;i++){_8.push(_7.charCodeAt(i));}return _8;},bytes_to_str:function(_9){var _a="";dojo.forEach(_9,function(_b){_a+=String.fromCharCode(_b);});return _a;}};}if(!dojo._hasResource["agi.cookie.NVP"]){dojo._hasResource["agi.cookie.NVP"]=true;dojo.provide("agi.cookie.NVP");agi.cookie.NVP.getValue=function(_c,_d,_e,_f){var _10,_11;_10=_c.indexOf(_f+_d+_e);if(-1==_10){_10=_c.indexOf(_d+_e);if(-1==_10){return null;}_10+=_d.length+_e.length;}else{_10+=_f.length+_d.length+_e.length;}_11=_c.indexOf(_f,_10);if(-1==_11){_11=_c.length;}return _c.substring(_10,_11);};agi.cookie.NVP.toMap=function(s,_12,sep){var map=[];var _13=s.toString().split(_12);for(var i=0;i<_13.length;i++){var _14=_13[i];if(_14){var _15=_14.split(sep);map[unescape(_15[0])]=unescape(_15[1]);}}return map;};agi.cookie.NVP.fromMap=function(map,_16,sep){var s="";for(var _17 in map){if(typeof map[_17]=="null"){continue;}else{if(typeof map[_17]=="function"){continue;}else{s+=escape(_17)+sep+escape(map[_17])+_16;}}}if(s){s=s.substr(0,s.length-1);}return s;};}if(!dojo._hasResource["agi.cookie.AGICookie"]){dojo._hasResource["agi.cookie.AGICookie"]=true;dojo.provide("agi.cookie.AGICookie");agi.cookie.AGICookie.toString=function(){return "AGICookie";};agi.cookie.AGICookie.SUBHOSTS=[[/\.yahoo\./,"_yh"],[/\.msn\./,"_msn"],[/\.aol\.|^aol\./,"_aol"],[/\.target\./,"_tg"]];agi.cookie.AGICookie.SUBPATHS=[[/\/birthday-calendar/,"_bcal"]];agi.cookie.AGICookie.getCookieDomain=function(){var _18=window.location.hostname.split(".");var idx=_18.length-2;var tld=_18.slice(-1);if(tld!="com"&&tld!="net"&&tld!="org"){idx=_18.length-3;}_18=_18.slice(idx);return "."+_18.join(".");};agi.cookie.AGICookie.getCookieName=function(_19){var _1a=window.location.hostname.split(".");var _1b=_19;var hn="";if(_1a.length<3){hn="www";}else{hn=_1a[0];}dojo.forEach(agi.cookie.AGICookie.SUBHOSTS,function(_1c){if(_1c[0].test(window.location.hostname)){_19+=_1c[1];}});dojo.forEach(agi.cookie.AGICookie.SUBPATHS,function(_1d){if(_1d[0].test(window.location.pathname)){_19+=_1d[1];}});dojo.forEach(["dev","vanilla","work","stage"],function(pfx){if(hn.startswith(pfx)){_19+="_"+pfx;}});return escape(_19);};agi.cookie.AGICookie.getCookieValueRaw=function(_1e,_1f){var c=agi.cookie.AGICookie.getCookie(_1e);if(typeof c=="null"){return null;}var v=agi.cookie.NVP.getValue(agi.base64.decode(c),_1f,"=","&");if(v){return unescape(v);}return v;};agi.cookie.AGICookie.getCookie=function(_20){var c=agi.cookie.NVP.getValue(dojo.doc.cookie,agi.cookie.AGICookie.getCookieName(_20),"=",";");if(!c){return c;}c=unescape(c);while(c.indexOf("%0A")>-1||c.indexOf("%0a")>-1){c=c.replace(/\%0[aA]/,"");}c=unescape(c);return c;};agi.cookie.AGICookie.setCookie=function(_21,_22,_23,_24){_21=agi.cookie.AGICookie.getCookieName(_21);var cki=_21+"="+escape(_22)+";";if(_24){_23="Thursday, 31-Dec-2037 00:01:00 GMT";}if(_23){cki=cki+"expires="+_23+";";}cki=cki+"path=/;domain="+agi.cookie.AGICookie.getCookieDomain();dojo.doc.cookie=cki;};agi.cookie.AGICookie.expireCookie=function(_25){agi.cookie.AGICookie.setCookie(_25,"","Friday, 01-Jan-99 00:00:00 GMT");};agi.cookie.AGICookie.getCookieValue=function(_26,_27){var v=agi.cookie.AGICookie.getCookieValueRaw(_26,_27);if(!v&&_26=="customer"&&_27=="name"){v=agi.cookie.AGICookie.getCookieValueRaw(_26,"email");}if(!v&&_26=="customer"&&_27=="name"){v="member";}return v;};agi.cookie.AGICookie.setCookieValue=function(_28,_29,_2a,_2b,_2c){var map=null;var c=agi.cookie.AGICookie.getCookie(_28);if(c){map=agi.cookie.NVP.toMap(agi.base64.decode(c),"&","=");}else{map=[];}map[_29]=_2a;agi.cookie.AGICookie.setCookie(_28,agi.base64.encode(agi.cookie.NVP.fromMap(map,"&","=")),_2b,_2c);};}if(!dojo._hasResource["agi.cookie.MagicCookie"]){dojo._hasResource["agi.cookie.MagicCookie"]=true;dojo.provide("agi.cookie.MagicCookie");agi.cookie.MagicCookie.setCookieValue=function(_2d,_2e,_2f){var _30=_2f?"mc_p":"mc_s";return agi.cookie.AGICookie.setCookieValue(_30,_2d,_2e,null,_2f);};agi.cookie.MagicCookie.getCookieValue=function(_31){var _32=agi.cookie.AGICookie.getCookieValue("mc_s",_31);if(!_32){_32=agi.cookie.AGICookie.getCookieValue("mc_p",_31);}return _32;};agi.cookie.MagicCookie.delCookieValue=function(_33,_34){return agi.cookie.MagicCookie.setCookieValue(_33,null,_34);};}if(!dojo._hasResource["agi.cookie._base"]){dojo._hasResource["agi.cookie._base"]=true;dojo.provide("agi.cookie._base");agi.cookie.toString=function(){return "AGICookie";};agi.cookie.getMemNum=function(){return agi.cookie.AGICookie.getCookieValue("customer","memnum");};agi.cookie.getMemName=function(){return agi.cookie.AGICookie.getCookieValue("customer","name");};agi.cookie.getCustomerEmail=function(){return agi.cookie.AGICookie.getCookieValue("customer","email");};agi.cookie.getCustomerAge=function(){try{var v=agi.cookie.AGICookie.getCookieValue("customer","age");if(!v){v="";}age=parseInt(v);if(age<18){v="";}else{if(age>65){v="65";}}return v;}catch(er){return "";}};agi.cookie.getCustomerGender=function(){try{var v=agi.cookie.AGICookie.getCookieValue("customer","gender");if(!v){v="";}return v.toLowerCase();}catch(er){return "";}};}if(!dojo._hasResource["agi.cookie"]){dojo._hasResource["agi.cookie"]=true;dojo.provide("agi.cookie");}if(!dojo._hasResource["agi.types"]){dojo._hasResource["agi.types"]=true;dojo.provide("agi.types");dojo.provide("agi.types.ExtArray");(function(){var t=agi.types;var d=dojo;t.toString=function(){return "AGTypes";};d.declare("agi.types.ExtArray",[Array],{toString:function(){return this.declaredClass.split(".")[2]+"("+this._arrayMembers().join(", ")+")";},forEach:function(_35,_36){d.forEach(this._arrayMembers(),_35,_36);return this;},_arrayMembers:function(){var ret=[];for(var i=0;i<this.length;i++){ret.push(this[i]);}return ret;},every:function(_37,_38){return d.every(this._arrayMembers(),_37,_38);},some:function(_39,_3a){return d.some(this._arrayMembers(),_39,_3a);},map:function(_3b,obj){return d.map(this._arrayMembers(),_3b,obj,t.ExtArray);}});d.declare("agi.types.Dict",[],{toString:function(){return this.declaredClass.split(".")[2]+"("+this.keys().join(", ")+")";},fromObject:function(obj){for(m in obj){if(!Object.prototype[m]){this[m]=obj[m];}}},keys:function(){var ret=new t.ExtArray();for(m in this){if(d.isString(m)&&!t.Dict.prototype[m]&&m!="declaredClass"&&m!="preamble"){ret.push(m);}}ret.sort();return ret;},values:function(){var ret=new t.ExtArray();this.keys().forEach(d.hitch(this,function(i){ret.push(this[i]);}));return ret;},items:function(){var _3c=new t.ExtArray();this.keys().forEach(d.hitch(this,function(i){_3c.push([i,this[i]]);}));return _3c;}});})();}if(!dojo._hasResource["agi.util"]){dojo._hasResource["agi.util"]=true;dojo.provide("agi.util");if(typeof $=="undefined"){$=function(i){return dojo.byId(i);};}(function(){var u=agi.util;var t=agi.types;var d=dojo;u.toString=function(){return "AGUtil";};u.dir=function(_3d){ret=[];if(d.isArray(_3d)){for(x in _3d){if(!Array.prototype[x]){ret.push([x,_3d[x]]);}}}else{if(d.isString(_3d)){for(x in _3d){if(!String.prototype[x]){ret.push([x,_3d[x]]);}}}else{d.forEach(_3d,function(x){ret.push([x,_3d[x]]);});}}return ret;};u.getClassName=function(_3e){if(!_3e.declaredClass){if(d.isString(_3e)){return "String";}else{if(d.isArray(_3e)||d.isArrayLike(_3e)){return "Array";}else{if(d.isFunction(_3e)){return "function";}else{if(d.isObject(_3e)){return "Object";}}}}}else{var _3f=_3e.declaredClass.split(".");return _3f[_3f.length-1];}};u.capitalize=function(str){return str.charAt(0).toUpperCase()+str.substring(1);};u.randInt=function(max){return parseInt((parseInt(max,10)*Math.random())/Math.random(),10);};u.escapeQuotAmp=function(_40){return _40.toString().replace(/"/g,"&quot;").replace(/&/g,"&amp;");};u.toPx=function(num){return num.toString()+"px";};u.posToString=function(_41){var _42=[];var _43=["x","y","z","t","l","h","w","m","n","top","left","right","height","width","length","breadth","max","min","high","low","zIndex"];var _44=function(pos,s){if(pos[s]){_42.push(s+": "+pos[s]);}return;};for(i=0;i<_43.length;i++){_44(_41,_43[i]);}return "{"+_42.join(", ")+"}";};u._debounce_waiting=false;u._setDebounceWaitingFalse=function(){u._debounce_waiting=false;};u.debounce=function(x,_45,_46){var _47=3000;if(_46){_47=_46*1000;}if(window.setDoPopAway){setDoPopAway(false);}if(u._debounce_waiting){if(_45){alert("Please wait while we process your request.");}return false;}else{u._debounce_waiting=true;setTimeout(u._setDebounceWaitingFalse,_47);return true;}};u.collection_as_array=u.collectionToArray=function(_48){var ret=[];d.forEach(_48,function(i){ret.push(i);});return ret;};u.extend_array=u.extendArray=function(_49,_4a){d.forEach(_4a,function(i){_49.push(i);});};u.product_id=u.getProdId=function(_4b){return "productw-"+_4b;};u.isUndef=function(_4c){return (_4c===undefined);};u.isDef=function(_4d){if(_4d){return true;}else{if(_4d===""||_4d===0){return true;}else{return false;}}};u.isNull=function(_4e){return (_4e===null);};u.queryOne=function(_4f,_50){ret=d.query(_4f,_50);if(ret.length<=0){return null;}else{return ret[0];}};u.query_one=u.q1=u.queryOne;u.getQueryVariable=function(_51,_52){var wv;if(webvars){wv=webvars;}if(_52){wv=d.queryToObject(_52);}else{if(!_52&&!wv){wv=d.queryToQbect(window.location.search.substring(1));}}return wv[_51];};u.get_query_variable=u.getQv=u.getQueryVariable;u.truncate=function(_53,_54,_55){_55=_55?_55.toLowerCase():"left";if(_53.length>_54){var _56=0;var ret=_53;var _57=0;if(_55=="right"){ret=_53.substring(_53.length-_54);ret="..."+ret;}else{if(_55=="left"){_57=_53.indexOf(" ",_54);ret=_53.substring(_56,(_57>=0)?_57:_54);ret+="...";}}}else{ret=_53;}return ret;};u.trunc=u.truncate;u.get_friendly_path=u.getFriendlyPath=function(){return d.doc.location.pathname.split(".pd")[1];};u.set_options=u.setOptions=function(_58,_59){_58.options.length=0;var _5a=agi.html._buildOptions(_59);var i=0;var o;for(o=0;o<_5a.length;o++){_58.options[i]=_5a[o];i++;}};u._build_options=u._buildOptions=function(_5b){var _5c=[];var _5d=0;var t;for(t=0;t<_5b.length;t++){var _5e=_5b[t][1];var _5f=_5b[t][0];var o=new Option(_5f,_5e);_5c[_5c.length]=o;_5d++;}if(_5d>1){_5c.unshift(new Option("",""));}return _5c;};u.show=function(_60,_61){d.style(_60,{display:_61?_61:"block"});};u.hide=function(_62){d.style(_62,{display:"none"});};u.toggleDisplay=function(_63){if(d.style(_63,"display")=="none"){d.style(_63,{display:"block"});}else{d.style(_63,{display:"none"});}};u.toggle_block=function(_64,_65,_66,_67){if(_66&&_67){var _68=_64.className;if(_68.indexOf(_66)>-1){d.removeClass(_64,_66);d.addClass(_64,_67);}else{d.removeClass(_64,_67);d.addClass(_64,_66);}}u.toggleDisplay(_65);};u.toggleBlock=u.toggle_block;u.get_position=u.getPosition=function(_69){return d.coords(_69,true);};u.getAbsolutePosition=function(_6a){return d._abs(_6a,true);};u.isUndefined=function(it){return ((typeof (it)=="undefined")&&(it===undefined));};u.getNameInObj=function(ns,_6b){if(!ns){ns=d.global;}for(var x in ns){if(ns[x]===_6b){return x.toString();}}return null;};u.forward=function(_6c){return function(){return this[_6c].apply(this,arguments);};};u.shallowCopy=function(obj,_6d){var i,ret;if(obj===null){return null;}if(d.isObject(obj)){ret=new obj.constructor();for(i in obj){if(u.isUndefined(ret[i])){ret[i]=_6d?u.shallowCopy(obj[i],_6d):obj[i];}}}else{if(d.lang.isArray(obj)){ret=[];for(i=0;i<obj.length;i++){ret[i]=_6d?u.shallowCopy(obj[i],_6d):obj[i];}}else{ret=obj;}}return ret;};u.errorToString=function(_6e){if(!typeof _6e.message=="undefined"){return _6e.message;}else{if(!typeof _6e.description=="undefined"){return _6e.description;}else{return _6e;}}};u.raise=function(_6f,_70){if(_70){_6f=_6f+": "+u.errorToString(_70);}else{_6f=u.errorToString(_6f);}throw _70||new Error(_6f);};u.keyList=function(obj){var ret=new t.ExtArray();for(k in obj){if(d.isString(k)){ret.push(k);}}ret.sort();return ret;};u.enumerate=function(arr){var ret=new t.ExtArray();for(var i=0;i<arr.length;i++){ret.push([i,arr[i]]);}return ret;};u.objToDict=function(obj){var ret=new t.Dict();ret.fromObject(obj);return ret;};})();(function(){var arr=Array.prototype;var d=dojo;arr.indexOf=function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj){return i;}}return -1;};arr.contains=function(obj){return this.indexOf(obj)>-1;};arr.remove=function(idx){return this.splice(idx,1);};arr.append=function(_71){return this.push(_71);};arr.extend=function(_72){d.forEach(_72,d.hitch(this,function(i){this.push(i);}));};})();(function(){var str=String.prototype;str.startswith=function(_73){return this.match("^"+_73)==_73;};str.endswith=function(_74){return this.match(_74+"$")==_74;};str.contains=function(_75){return this.match(_75)!=null;};str.isdigit=function(_76){if(this=="0"){return true;}else{var _77=_76||10;var val=parseInt(this,_77);if((val===0)||(val.toString()=="NaN")){return false;}else{return true;}}};})();}if(!dojo._hasResource["agi.dom.window"]){dojo._hasResource["agi.dom.window"]=true;dojo.provide("agi.dom.window");agi.dom.window._scrollInterval=null;agi.dom.window.scroll_into_view=function(_78){try{clearInterval(agi.dom.window._scrollInterval);}catch(e){}var _79=dojo.byId(_78);var _7a=dojo.coords(_79,true);var top=_7a.y;var _7b=_7a.y+_7a.h;var _7c=dijit.getViewport();var _7d=_7c.t;var _7e=_7c.l;var _7f=Math.floor((agi.dom.window.getSize().height-_79.clientHeight)/2);var _80=agi.dom.window.getLightboxTop();if(_7d<top&&_7b<agi.dom.window.getSize().height){return;}if((_7b-_80)<agi.dom.window.getSize().height){agi.dom.window.scrollTo(_80);}else{if(_7f>0){agi.dom.window.scrollTo(top-_7f);}else{if(_7d>top){agi.dom.window.scrollTo(top);}}}};agi.dom.window.scrollTo=function(y){if(y>agi.dom.window.getMaxScroll()){y=agi.dom.window.getMaxScroll();}step=Math.abs(dijit.getViewport().t-y)/25;agi.dom.window._scrollInterval=setInterval("agi.dom.window.smoothScroll("+step+","+y+")",5);};agi.dom.window.smoothScroll=function(_81,_82){var _83=dijit.getViewport().t;var _84;if(_83>_82){_84=Math.max(_83-_81,_82);}else{_84=Math.min(_83+_81,_82);}window.scroll(0,_84);if(_84==_82){clearInterval(agi.dom.window._scrollInterval);}};agi.dom.window.getSize=function(){var _85={};_85.width=0;_85.height=0;if(typeof (window.innerWidth)=="number"){_85.width=window.innerWidth;_85.height=window.innerHeight;}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){_85.width=document.documentElement.clientWidth;_85.height=document.documentElement.clientHeight;}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){_85.width=document.body.clientWidth;_85.height=document.body.clientHeight;}}}return _85;};agi.dom.window.getScrollOffset=function(){var _86={};_86.pageYOffset=dijit.getViewport().t;_86.pageXOffset=dijit.getViewport().l;return _86;};agi.dom.window.getElementScrollOffset=function(_87){var _88=dojo.byId(_87);var _89={};if(typeof (_88.pageYOffset)=="number"){_89.pageYOffset=_88.pageYOffset;_89.pageXOffset=_88.pageXOffset;}else{_89.pageYOffset=_88.scrollTop;_89.pageXOffset=_88.scrollLeft;}return _89;};agi.dom.window.getMaxScroll=function(){var _8a=document.body.clientHeight;if(typeof (window.innerHeight)=="number"){var _8b=window.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){var _8b=document.documentElement.clientHeight;}}if(_8a>_8b){return _8a-_8b;}else{return 0;}};agi.dom.window.getLightboxTop=function(){try{var tmp=dojo.byId("lightbox");var top=0;if(tmp.style.display=="none"){return 0;}while(tmp.offsetParent&&tmp.tagName.toUpperCase()!="BODY"){top+=tmp.offsetTop;tmp=tmp.offsetParent;}top+=tmp.offsetTop;if(top>10){return top-10;}else{return top;}}catch(e){return 0;}};agi.dom.window.getStyle=function(el,_8c){return dojo.style(el,_8c);};}if(!dojo._hasResource["agi.validation"]){dojo._hasResource["agi.validation"]=true;dojo.provide("agi.validation");agi.validation.PASS=true;agi.validation.FAIL=false;agi.validation.EMAIL_FAIL="EMAIL_FAIL";agi.validation.IS_EMPTY="IS_EMPTY";agi.validation.TOO_LONG="TOO_LONG";agi.validation.ONE_EMAIL="ONE_EMAIL";agi.validation.defaultErrorMessages=[];agi.validation.defaultErrorMessages[agi.validation.EMAIL_FAIL]=" is not a valid email address.";agi.validation.defaultErrorMessages[agi.validation.TOO_LONG]=" is too long to fit in our database; please choose an alternative email address.";agi.validation.defaultErrorMessages[agi.validation.IS_EMPTY]="Please specify at least one recipient's email for your card.";agi.validation.defaultErrorMessages[agi.validation.ONE_EMAIL]="Please enter one email address at a time.";agi.validation.isEmpty=function(val){if(agi.validation.trim(val)==""){return true;}return false;};agi.validation.ltrim=function(val){return val.replace(/^\s*/g,"");};agi.validation.rtrim=function(val){return val.replace(/\s*$/g,"");};agi.validation.trim=function(val){return val.replace(/^\s*|\s*$/g,"");};agi.validation.write_message=function(_8d,_8e,_8f){var _90=dojo.byId(_8d);var _91=_90.className;if(_8e){if(_8f){_90.setAttribute("class",_8f);_90.setAttribute("className",_8f);}_90.style.display="block";_90.innerHTML=_8e;agi.dom.window.scroll_into_view(_8d);}else{_90.style.display="none";}};agi.validation.reformat_emails=function(_92,_93){var _94="";for(var i=0;i<_92.length;i++){if(!agi.validation.isEmpty(_92[i])){_94+=agi.validation.trim(_92[i]);if(i<_92.length-1){_94+=", ";}}}if(_93){_93.value=_94;}return _94;};agi.validation.validate_email=function(_95,_96,_97){var _98=agi.validation.trim(_95);var _99;var _9a;var _9b=[];var _9c;if(!_96){_96=75;}if(!_97){_97;}if(_98==""&&!_97){throw (agi.validation.IS_EMPTY);}else{if(_98==""){return;}}if(_98.length>_96){throw (agi.validation.TOO_LONG);}if(_98.match(/.*@$|.*@.*@.|^@.*|^[^@]*$/)){throw (agi.validation.EMAIL_FAIL);}_99=_98.split("@")[0];_9a=_98.split("@")[1];if(_99==""||_9a==""){throw (agi.validation.EMAIL_FAIL);}if(_99.match(/.*[*()<>;:,\[\]\\'" ].*/)){throw (agi.validation.EMAIL_FAIL);}if(_9a.indexOf("..")!=-1){throw (agi.validation.EMAIL_FAIL);}_9b=_9a.split(".");_9c=_9b.length;if(_9c==1){throw (agi.validation.EMAIL_FAIL);}if(_9b[_9c-1].length<2||_9b[_9c-1].length>6){throw (agi.validation.EMAIL_FAIL);}return agi.validation.PASS;};agi.validation.validate_emails=function(_9d,_9e,_9f){var _a0=true;var _a1=_9d.value.replace(/;/g,",");var _a2={"error_message":"","error_codes":[],"pass_validation":agi.validation.FAIL,"emails":""};if(!_9e){_9e=true;}if(!_9f){_9f=agi.validation.defaultErrorMessages;}if(_9e){_a1=_a1.replace(/\n/g,", ");_a1=_a1.replace(/\r/g,", ");}if(agi.validation.isEmpty(_a1)||agi.validation.isEmpty(_a1.replace(/,/g,""))){_a0=agi.validation.FAIL;_a2.error_message+="<p>"+_9f[agi.validation.IS_EMPTY]+"</p>";}_a1=_a1.split(",");for(i=0;i<_a1.length;i++){try{agi.validation.validate_email(_a1[i],"",true);}catch(e_code){_a2.error_message+="<p>"+_a1[i]+" "+_9f[e_code]+"</p>";_a0=agi.validation.FAIL;_a2.error_codes[_a2.error_codes.length]=e_code+"|"+_a1[i];}}if(_9e){agi.validation.reformat_emails(_a1,_9d);}_a2.emails=_a1;_a2.pass_validation=_a0;return _a2;};agi.validation.validate_checkboxes=function(_a3){var _a4=document.getElementsByName(_a3);var _a5=false;for(var i=0;i<_a4.length;i++){if(_a4[i].checked){_a5=true;break;}}if(!_a5){return agi.validation.FAIL;}return agi.validation.PASS;};agi.validation.Error=function(_a6,_a7,_a8){var _a9=this;this.message=_a7;this.field=_a6;this.type=_a8;};agi.validation.Errors=function(_aa){var _ab=this;this.errors=[];this.display_div=dojo.byId(_aa);this.error_html="<p>%s</p>";this.error_color="#FF0000";this.ERROR="agi-message-area agi-error";this.MESSAGE="agi-message-area agi-message-demo";this.SUCCESS="agi-message-area agi-message-success";this.count=function(){return this.errors.length;};this.is_error=function(){return (this.errors.length>0);};this.display=function(_ac){if(_ac){agi.validation.write_message(this.display_div.id,this.to_html(),"agi-message-area agi-error");this.mark_fields();}else{agi.validation.write_message(this.display_div.id,null,"agi-message-area agi-error");this.clear_fields();}};this.set_class=function(_ad){var _ae=this.display_div.className;if(_ad&&(_ae.indexOf(_ad)==-1)){message_class=(this.display_div.className)?this.display_div.className+" "+_ad:_ad;this.display_div.setAttribute("class",message_class);this.display_div.setAttribute("className",message_class);}};this.write_message=function(_af,_b0){if(_af){this.display_div.style.display="block";this.display_div.innerHTML=_af;}else{this.display_div.style.display="none";}};this.mark_fields=function(){for(i=0;i<this.errors.length;i++){try{dojo.byId(this.errors[i].field+"-error").className="agi-mesage-area agi-error";}catch(e){}}};this.clear_fields=function(){for(i=0;i<this.errors.length;i++){try{dojo.byId(this.errors[i].field+"-error").className="";}catch(e){}}};this.to_html=function(){var _b1="";for(i=0;i<this.errors.length;i++){_b1+=this.error_html.replace("%s",this.errors[i].message);}return _b1;};this.show=function(){this.display(true);};this.hide=function(){this.display(false);};this.reset=function(){this.hide();this.errors=[];};this.add=function(_b2){this.errors.push(_b2);};this.add_error=function(_b3,_b4,_b5){if(!_b5){_b5=this.ERROR;}this.add(new Error(_b3,_b4,_b5));};};}if(!dojo._hasResource["agi.permissions"]){dojo._hasResource["agi.permissions"]=true;dojo.provide("agi.permissions");agi.permissions.newsletter=1;agi.permissions.yakety_yaks=false;agi.permissions.has_perm=function(_b6,_b7){var _b8=_b7.split("|");for(var i=0;i<_b8.length;i++){var _b9=_b8[i].split("^");if((_b6==_b9[0])&&(_b9[1]=="C")){return true;}}return false;};agi.permissions.hide_signup=function(_ba){var _bb;var _bc=dojo.byId("agi-signup-cont");if(_bc){var _bd=agi.cookie.MagicCookie.getCookieValue("vanperms");if((_bd!==null)&&(_bd!==_bb)&&(_bd!=="")){if(agi.permissions.has_perm(1,_bd)){dojo.style(_bc,"display","none");}}}};agi.permissions.newsletter_signup=function(_be,_bf){if(!_be){_be="";}if(_bf=="yakety-yaks"){agi.permissions.yakety_yaks=true;}agi.permissions.write_newsletter_message("");var _c0=dojo.byId("agi-newsletter-email");_c0.value=agi.validation.trim(_c0.value);if(agi.permissions.validate_email(_c0.value)){var _c1={url:"/newsletter/signup.pd",handleAs:"json",content:{email:_c0.value,"page":_be,"referer_page":_bf},load:agi.permissions.newsletter_success,error:agi.permissions.newsletter_error};dojo.xhrPost(_c1);}else{agi.permissions.write_newsletter_message("Please enter a valid email address.");}};agi.permissions.newsletter_success=function(_c2,_c3){msg_area=dojo.byId("agi-newsletter-message-area");agi.permissions.write_newsletter_message(_c2.message);if(_c2.status>-1){dojo.byId("agi-newsletter-email").value="your email address";dojo.byId("agi-newsletter-email").blur();}if(agi.permissions.yakety_yaks){agx.currentPage.controller.redirect_to_coupon();}};agi.permissions.newsletter_clear=function(){agi.permissions.write_newsletter_message("");dojo.byId("agi-newsletter-email").value="your email address";dojo.byId("agi-newsletter-email").blur();};agi.permissions.newsletter_error=function(_c4,_c5){agi.permissions.write_newsletter_message("We were unable to process your request.  Please try again in a few minutes.");};agi.permissions.write_newsletter_message=function(_c6){msg_area=dojo.byId("agi-newsletter-message-area");msg_area.innerHTML=_c6;if(!_c6){agi.util.hide(msg_area);}else{agi.util.show(msg_area);}};agi.permissions.email_focus=function(_c7,_c8){if(_c7.value=="your email address"&&_c8){_c7.value="";}if(_c7.value==""&&!_c8){_c7.value="your email address";}};agi.permissions.validate_email=function(_c9){if(!_c9){return false;}else{try{agi.validation.validate_email(_c9);return true;}catch(e){return false;}}};}if(!dojo._hasResource["ag.util"]){dojo._hasResource["ag.util"]=true;dojo.provide("ag.util");ag.util=agi.util;}if(!dojo._hasResource["agi.dom._base"]){dojo._hasResource["agi.dom._base"]=true;dojo.provide("agi.dom._base");agi.dom.make_text=function(_ca){var re=/\&\#(\d*)\;/g;_ca=_ca.replace(re,agi.dom.get_unicode);var _cb=document.createTextNode(_ca);return _cb;};agi.dom.get_unicode=function(str,_cc,_cd,s){_cc=parseInt(_cc);return String.fromCharCode(_cc);};agi.dom.make_node=function(_ce,_cf,_d0){var _d1=document.createElement(_ce);if(_cf!=undefined){for(var _d2 in _cf){if(_d2.toLowerCase()=="class"||_d2.toLowerCase()=="classname"){_d1.className=_cf[_d2];}else{_d1.setAttribute(_d2,_cf[_d2]);}}}if(_d0!=undefined){if(!_d0.push||!_d0.join){_d0=[_d0];}for(var x=0;x<_d0.length;x++){try{_d1.appendChild(_d0[x]);}catch(e){}}}return _d1;};agi.dom.swap_node=function(_d3,_d4){_d3.parentNode.replaceChild(_d4,_d3);return _d4;};agi.dom.remove_children=function(_d5){var _d6=dojo.byId(_d5);var _d7=_d6.childNodes;for(var i=_d7.length-1;i>=0;i--){_d6.removeChild(_d7[i]);}};agi.dom.addHiddenInputElement=function(_d8,_d9,_da){formElement=dojo.byId(_d8);var _db=agi.dom.make_node("input",{"type":"hidden","name":_d9,"id":_d9,"value":_da});if(dojo.byId(_d9)){var _dc=dojo.byId(_d9);agi.dom.swap_node(_dc,_db);return;}formElement.appendChild(_db);};agi.dom.insert_css_text=function(_dd,doc,URI){if(!_dd){return;}if(!doc){doc=document;}var _de=doc.createElement("style");_de.setAttribute("type","text/css");var _df=dojo.query("head")[0];if(!_df){return;}else{_df.appendChild(_de);}if(_de.styleSheet){var _e0=function(){try{_de.styleSheet.cssText=_dd;}catch(e){}};if(_de.styleSheet.disabled){setTimeout(_e0,10);}else{_e0();}}else{var _e1=doc.createTextNode(_dd);_de.appendChild(_e1);}return _de;};agi.dom.find_parent=function(el,_e2){if(el==null){return null;}else{if(!_e2){return el.parentNode;}else{if(el.nodeType==1&&el.tagName.toLowerCase()==_e2.toLowerCase()){return el;}else{return agi.dom.find_parent(el.parentNode,_e2);}}}};agi.dom.selectedValue=function(el){return el[el.selectedIndex].value;};}if(!dojo._hasResource["ag.dom._base"]){dojo._hasResource["ag.dom._base"]=true;dojo.provide("ag.dom._base");ag.dom=agi.dom;}if(!dojo._hasResource["ag.dom"]){dojo._hasResource["ag.dom"]=true;dojo.provide("ag.dom");}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(_e3){var _e4=this;dojo.mixin(_e4,_e3);_e4.node=_e3.node;_e4._showArgs=dojo.mixin({},_e3);_e4._showArgs.node=_e4.node;_e4._showArgs.duration=_e4.showDuration;_e4.showAnim=_e4.showFunc(_e4._showArgs);_e4._hideArgs=dojo.mixin({},_e3);_e4._hideArgs.node=_e4.node;_e4._hideArgs.duration=_e4.hideDuration;_e4.hideAnim=_e4.hideFunc(_e4._hideArgs);dojo.connect(_e4.showAnim,"beforeBegin",dojo.hitch(_e4.hideAnim,"stop",true));dojo.connect(_e4.hideAnim,"beforeBegin",dojo.hitch(_e4.showAnim,"stop",true));},show:function(_e5){return this.showAnim.play(_e5||0);},hide:function(_e6){return this.hideAnim.play(_e6||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_e7={_fire:function(evt,_e8){if(this[evt]){this[evt].apply(this,_e8||[]);}return this;}};var _e9=function(_ea){this._index=-1;this._animations=_ea||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_e9,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_eb,_ec){if(!this._current){this._current=this._animations[this._index=0];}if(!_ec&&this._current.status()=="playing"){return this;}var _ed=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_ee=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_ef=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_ed);d.disconnect(_ee);d.disconnect(_ef);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_f0,_f1){this.pause();var _f2=this.duration*_f0;this._current=null;d.some(this._animations,function(a){if(a.duration<=_f2){this._current=a;return true;}_f2-=a.duration;return false;});if(this._current){this._current.gotoPercent(_f2/this._current.duration,_f1);}return this;},stop:function(_f3){if(this._current){if(_f3){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_e9,_e7);dojo.fx.chain=function(_f4){return new _e9(_f4);};var _f5=function(_f6){this._animations=_f6||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_f6,function(a){var _f7=a.duration;if(a.delay){_f7+=a.delay;}if(this.duration<_f7){this.duration=_f7;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var _f8=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){_f8._connects.push(d.connect(_f8._pseudoAnimation,evt,function(){_f8._fire(evt,arguments);}));});};d.extend(_f5,{_doAction:function(_f9,_fa){d.forEach(this._animations,function(a){a[_f9].apply(a,_fa);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_fb,_fc){var t=this._pseudoAnimation;t[_fb].apply(t,_fc);},play:function(_fd,_fe){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_ff,_100){var ms=this.duration*_ff;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_100);});this._call("gotoPercent",arguments);return this;},stop:function(_101){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_f5,_e7);dojo.fx.combine=function(_102){return new _f5(_102);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _103=d.style(node,"height");return Math.max(_103,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["agi.dom"]){dojo._hasResource["agi.dom"]=true;dojo.provide("agi.dom");}if(!dojo._hasResource["agi.widget.wiper"]){dojo._hasResource["agi.widget.wiper"]=true;dojo.provide("agi.widget.wiper");agi.widget.wiper.get_image_prefix=function(){if(ahost.indexOf("yahoo")>-1){return "yh07";}else{return "agbeta";}};agi.widget.wiper.set_navcookie=function(_104,val){var id=_104;var _105=agi.cookie.MagicCookie;var lnav=_105.getCookieValue("lnav");lnav=lnav?agi.base64.decode(lnav):"";if(!lnav){lnav=id+"="+val;}else{if(lnav.indexOf(id)<0){lnav+="&"+id+"="+val;}else{var rval=(val==0)?"1":"0";lnav=lnav.replace(id+"="+rval,id+"="+val);}}_105.setCookieValue("lnav",agi.base64.encode(lnav));};agi.widget.wiper.wipers=[];agi.widget.wiper.find_wipers=function(){var w=dojo.query(".wipe");for(var i=0;i<w.length;i++){new agi.widget.wiper.Wiper(w[i]);}};dojo.addOnLoad(agi.widget.wiper.find_wipers);agi.widget.wiper.Wiper=function(node){var dw=this;this._container=node;this._anim="";this._height="";this._direction="";this._time=800;this._images=true;this._icons={};this._open=false;this._dependent=false;this._cookie=true;this._wait=true;this.do_onload=function(){this._node=dojo.query(".wipe_block",this._container)[0];this._node.style.overflow="hidden";this._toggle=dojo.query(".wipe_toggle",this._container)[0];if(this._toggle){this._toggle.onclick=function(){dw.do_wipe();};}var _106=dojo.query(".wipe_parms",this._container)[0];if(_106){this._parse_parms(_106.value);}if(this._dependent){agi.widget.wiper.wipers.push(this);}this.preload();this._check_toggle();};this._parse_parms=function(_107){var _108=_107.split(",");for(var i=0;i<_108.length;i++){nvp=_108[i].split("=");if(nvp.length==2){eval("this._"+nvp[0]+"="+nvp[1]);}}};this.preload=function(){if(this._images){var _109=this._image_name?this._image_name:this._node.id;var _10a=new Image();_10a.src=imghost+"/"+agi.widget.wiper.get_image_prefix()+"/left/"+_109+"_open.gif";var _10b=new Image();_10b.src=imghost+"/"+agi.widget.wiper.get_image_prefix()+"/left/"+_109+"_close.gif";this._icons.open=_10a;this._icons.close=_10b;}};this.do_wipe=function(){var okay=this._check_status();if(!okay){return;}if(this._direction=="in"){this._wipe_out();}else{this._wipe_in();}this._toggle_others();};this._check_status=function(){if(this._anim){if(this._anim.status()=="playing"){if(this._wait){return false;}if(!this._height){return false;}this._stop_animation();}}return true;};this._wipe_in=function(_10c){this._direction="in";_10c=_10c==undefined?false:_10c;if(_10c){dojo.style(this._node,"display","block");}else{this._set_height();this._anim=dojo.fx.wipeIn({node:this._node,duration:this._time}).play();}this._change_toggle("close");this.set_cookie(1);};this._wipe_out=function(){this._direction="out";this._set_height();this._anim=dojo.fx.wipeOut({node:this._node,duration:this._time}).play();this._change_toggle("open");this.set_cookie(0);};this._stop_animation=function(){if(this._anim){this._anim.stop(false);}};this._toggle_others=function(){var idx=dojo.indexOf(agi.widget.wiper.wipers,this);if(!idx>-1){return;}for(var i=0;i<agi.widget.wiper.wipers.length;i++){if(i!=idx&&agi.widget.wiper.wipers[i]._direction=="in"){agi.widget.wiper.wipers[i]._stop_animation();agi.widget.wiper.wipers[i]._wipe_out();}}};this._set_height=function(){if(!this._height){var _10d;if(this._direction=="in"){dojo.style(this._node,"display","block");}_10d=dojo.contentBox(this._node).height;if(this._direction=="in"){dojo.style(this._node,"display","none");}if(_10d>0){this._height=_10d;}}};this.set_cookie=function(val){agi.widget.wiper.set_navcookie(this._node.id,val);};this.get_cookie=function(){var _10e=this._open;var id=this._node.id;var _10f=agi.cookie.MagicCookie;var lnav=_10f.getCookieValue("lnav");lnav=lnav?agi.base64.decode(lnav):"";if(!lnav){return _10e;}var vals=lnav.split("&");for(var i=0;i<vals.length;i++){if(vals[i].indexOf(id)>-1){var nvp=vals[i].split("=");if(nvp.length!=2){return _10e;}return parseInt(nvp[1]);}}return _10e;};this._change_toggle=function(_110){if(!this._images){this._toggle.innerHTML=_110;return;}var _111=this._toggle.childNodes;for(var i=_111.length-1;i>=0;i--){this._toggle.removeChild(_111[i]);}var icon=this._icons[_110];var _112=icon.width?icon.width:"";var _113=icon.height?icon.height:"";var _114=agi.dom.make_node("img",{"src":this._icons[_110].src,"width":_112,"height":_113,"border":"0","title":_110+" section","alt":_110+" section"});this._toggle.appendChild(_114);};this._check_toggle=function(){var show=this.get_cookie();if(show){this._wipe_in(true);}};this.do_onload();};agi.widget.wiper.turbowipe=function(){var _115=agi.cookie.MagicCookie;var lnav=_115.getCookieValue("lnav");lnav=lnav?agi.base64.decode(lnav):"";if(!lnav){agi.widget.wiper.set_navcookie("occasions",1);lnav="occasions=1";}var vals=lnav.split("&");for(var i=0;i<vals.length;i++){module_id=vals[i].split("=");var nvp=vals[i].split("=");if((nvp.length==2)&&(parseInt(nvp[1])==1)){e=dojo.byId(nvp[0]);if(e){e.style.display="block";toggle_img=dojo.byId(nvp[0]+"-toggle");if(!toggle_img){continue;}toggle_img.src=imghost+"/"+agi.widget.wiper.get_image_prefix()+"/left/"+nvp[0]+"_close.gif";toggle_img.height=30;toggle_img.width=160;agi.widget.wiper.set_navcookie(nvp[0],1);}}}};}if(!dojo._hasResource["ag.widget.wiper"]){dojo._hasResource["ag.widget.wiper"]=true;dojo.provide("ag.widget.wiper");ag.widget.wiper=agi.widget.wiper;}if(!dojo._hasResource["agi.widget.myagdrop"]){dojo._hasResource["agi.widget.myagdrop"]=true;dojo.provide("agi.widget.myagdrop");(function(){var m=agi.widget.myagdrop;var d=dojo;m.menuId="myag-menu";m.menu=null;m.menuItems="li";m.menuButton=null;m.connHandles=[];m.toString=function(){return "AGWidgetMyAGdrop";};m.init=function(){m.menu=dojo.byId(m.menuId);if(!m.menu){return;}var _116=m.menuButton=d.query("#"+m.menuId+" li")[0];d.forEach(m.connHandles,dojo.disconnect);m.connHandles.push(d.connect(_116,"onmouseover",m,m.showMenu));m.connHandles.push(d.connect(_116,"onmouseout",m,m.hideMenu));};m.showMenu=function(evt){var ma=agi.widget.myagdrop;dojo.addClass(ma.menu,"over");};m.hideMenu=function(evt){var ma=agi.widget.myagdrop;dojo.removeClass(ma.menu,"over");};})();}if(!dojo._hasResource["ag.widget.myagdrop"]){dojo._hasResource["ag.widget.myagdrop"]=true;dojo.provide("ag.widget.myagdrop");ag.widget.myagdrop=agi.widget.myagdrop;}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_117){if(this._hash[_117.id]){throw new Error("Tried to register widget with id=="+_117.id+" but that id is already registered");}this._hash[_117.id]=_117;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(func,_118){_118=_118||dojo.global;var i=0,id;for(id in this._hash){func.call(_118,this._hash[id],i++,this._hash);}return this;},filter:function(_119,_11a){_11a=_11a||dojo.global;var res=new dijit.WidgetSet(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_119.call(_11a,w,i++,this._hash)){res.add(w);}}return res;},byId:function(id){return this._hash[id];},byClass:function(cls){var res=new dijit.WidgetSet(),id,_11b;for(id in this._hash){_11b=this._hash[id];if(_11b.declaredClass==cls){res.add(_11b);}}return res;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(func,_11c){return dojo.map(this.toArray(),func,_11c);},every:function(func,_11d){_11d=_11d||dojo.global;var x=0,i;for(i in this._hash){if(!func.call(_11d,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(func,_11e){_11e=_11e||dojo.global;var x=0,i;for(i in this._hash){if(func.call(_11e,this._hash[i],x++,this._hash)){return true;}}return false;}});(function(){dijit.registry=new dijit.WidgetSet();var hash=dijit.registry._hash,attr=dojo.attr,_11f=dojo.hasAttr,_120=dojo.style;dijit.byId=function(id){return typeof id=="string"?hash[id]:id;};var _121={};dijit.getUniqueId=function(_122){var id;do{id=_122+"_"+(_122 in _121?++_121[_122]:_121[_122]=0);}while(hash[id]);return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id;};dijit.findWidgets=function(root){var _123=[];function _124(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _125=node.getAttribute("widgetId");if(_125){_123.push(hash[_125]);}else{_124(node);}}}};_124(root);return _123;};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(_126){if(!_126._destroyed){if(_126.destroyRecursive){_126.destroyRecursive();}else{if(_126.destroy){_126.destroy();}}}});};if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit._destroyAll();});}dijit.byNode=function(node){return hash[node.getAttribute("widgetId")];};dijit.getEnclosingWidget=function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;};var _127=(dijit._isElementShown=function(elem){var s=_120(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(attr(elem,"type")!="hidden");});dijit.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _11f(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":if(dojo.isMoz){try{return elem.contentDocument.designMode=="on";}catch(err){return false;}}else{if(dojo.isWebKit){var doc=elem.contentDocument,body=doc&&doc.body;return body&&body.contentEditable=="true";}else{try{doc=elem.contentWindow.document;body=doc&&doc.body;return body&&body.firstChild&&body.firstChild.contentEditable=="true";}catch(e){return false;}}}default:return elem.contentEditable=="true";}};var _128=(dijit.isTabNavigable=function(elem){if(attr(elem,"disabled")){return false;}else{if(_11f(elem,"tabIndex")){return attr(elem,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(elem);}}});dijit._getTabNavigable=function(root){var _129,last,_12a,_12b,_12c,_12d;var _12e=function(_12f){dojo.query("> *",_12f).forEach(function(_130){if((dojo.isIE&&_130.scopeName!=="HTML")||!_127(_130)){return;}if(_128(_130)){var _131=attr(_130,"tabIndex");if(!_11f(_130,"tabIndex")||_131==0){if(!_129){_129=_130;}last=_130;}else{if(_131>0){if(!_12a||_131<_12b){_12b=_131;_12a=_130;}if(!_12c||_131>=_12d){_12d=_131;_12c=_130;}}}}if(_130.nodeName.toUpperCase()!="SELECT"){_12e(_130);}});};if(_127(root)){_12e(root);}return {first:_129,last:last,lowest:_12a,highest:_12c};};dijit.getFirstInTabbingOrder=function(root){var _132=dijit._getTabNavigable(dojo.byId(root));return _132.lowest?_132.lowest:_132.first;};dijit.getLastInTabbingOrder=function(root){var _133=dijit._getTabNavigable(dojo.byId(root));return _133.last?_133.last:_133.highest;};dijit.defaultDuration=dojo.config["defaultDuration"]||200;})();}if(!dojo._hasResource["agi._base"]){dojo._hasResource["agi._base"]=true;dojo.provide("agi._base");dojo.provide("agi.registry");agi.registry=new dijit.WidgetSet();agi.byId=function(id){return agi.registry.byId(id);};agi.listAll=function(){var cd=["r","i","d",".","e","l","o","s","n","o","c"];var evil=["l","a","v","e"];cd.reverse();evil.reverse();dojo[evil.join("")](cd.join(""))(agi.registry._hash);};agi._loadedResources={};agi._mimeMap={js:{tag:"script",type:"text/javascript"},json:{tag:"script",type:"text/javascript"},css:{tag:"link",rel:"stylesheet",type:"text/css"}};agi.requireJs=function(_134,_135){return agi.require("js."+_134,"js",_135);};agi.requireCss=function(_136,_137){return agi.require("css."+_136,"css",_137);};agi.require=function(_138,type,_139){var _13a=agi._loadedResources[_138];if(_13a&&!_139){return _13a;}type=type||"js";var host=agx.currentPage.imghost;var _13b=[_138.split(".").join("/"),type].join(".");if(_13b.charAt(0)=="/"){_13b=_13b.substring(1);}var uri=[host,_13b].join("/");var tag=dojo.doc.createElement(agi._mimeMap[type].tag);if(type=="css"){tagi.rel=agi._mimeMap.css.rel;tagi.href=uri;}else{tagi.src=uri;tagi.type=agi._mimeMap[type].type;}dojo.query("head")[0].appendChild(tag);agi._loadedResources[_138]=tag;return tag;};}if(!dojo._hasResource["agi.classes._base"]){dojo._hasResource["agi.classes._base"]=true;dojo.provide("agi.classes._base");agi.classes.toString=function(){return "AGBase";};agi.classes._idInc=0;agi.classes._idGen=function(){agi.classes._idInc++;return agi.classes._idInc;};}if(!dojo._hasResource["agi.classes.Named"]){dojo._hasResource["agi.classes.Named"]=true;dojo.provide("agi.classes.Named");dojo.declare("agi.classes.Named",null,{toString:function(){var _13c=this.id||"<NO ID>";return ["[",agi.util.getClassName(this),", id=",(this.id||"<NO ID>"),"]"].join("");}});}if(!dojo._hasResource["agi.classes.Identified"]){dojo._hasResource["agi.classes.Identified"]=true;dojo.provide("agi.classes.Identified");dojo.declare("agi.classes.Identified",[agi.classes.Named],{constructor:function(){this._getId();},_getId:function(){if(!this._isIdentified){this.id=agi.classes._idGen();agi.registry.add(this);this._isIdentified=true;}}});}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.window.getBox=function(){var _13d=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _13e=dojo._docScroll();return {w:_13d.clientWidth,h:_13d.clientHeight,l:_13e.x,t:_13e.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _13f=doc.compatMode=="BackCompat",_140=_13f?body:html,_141=isWK?body:_140,_142=_140.clientWidth,_143=_140.clientHeight,rtl=!dojo._isBodyLtr(),_144=pos||dojo.position(node),el=node.parentNode,_145=function(el){return ((isIE<=6||(isIE&&_13f))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_145(node)){return;}while(el){if(el==body){el=_141;}var _146=dojo.position(el),_147=_145(el);if(el==_141){_146.w=_142;_146.h=_143;if(_141==html&&isIE&&rtl){_146.x+=_141.offsetWidth-_146.w;}if(_146.x<0||!isIE){_146.x=0;}if(_146.y<0||!isIE){_146.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_146.w-=pb.w;_146.h-=pb.h;_146.x+=pb.l;_146.y+=pb.t;}if(el!=_141){var _148=el.clientWidth,_149=_146.w-_148;if(_148>0&&_149>0){_146.w=_148;if(isIE&&rtl){_146.x+=_149;}}_148=el.clientHeight;_149=_146.h-_148;if(_148>0&&_149>0){_146.h=_148;}}if(_147){if(_146.y<0){_146.h+=_146.y;_146.y=0;}if(_146.x<0){_146.w+=_146.x;_146.x=0;}if(_146.y+_146.h>_143){_146.h=_143-_146.y;}if(_146.x+_146.w>_142){_146.w=_142-_146.x;}}var l=_144.x-_146.x,t=_144.y-Math.max(_146.y,0),r=l+_144.w-_146.w,bot=t+_144.h-_146.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_144.x+=el.scrollLeft;el.scrollLeft+=(isIE>=8&&!_13f&&rtl)?-s:s;_144.x-=el.scrollLeft;}if(bot*t>0){_144.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_144.y-=el.scrollTop;}el=(el!=_141)&&!_147&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{}}return bm;},moveToBookmark:function(_14a){var _14b=dojo.doc,mark=_14a.mark;if(mark){if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var r=mark;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{}}else{if(_14b.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(dojo.isArray(mark)){rg=_14b.body.createControlRange();dojo.forEach(mark,function(n){rg.addElement(n);});}else{rg=_14b.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_14c){var node=!dijit._curFocus||(menu&&dojo.isDescendant(dijit._curFocus,menu.domNode))?dijit._prevFocus:dijit._curFocus;return {node:node,bookmark:(node==dijit._curFocus)&&dojo.withGlobal(_14c||dojo.global,dijit.getBookmark),openedForWindow:_14c};},focus:function(_14d){if(!_14d){return;}var node="node" in _14d?_14d.node:_14d,_14e=_14d.bookmark,_14f=_14d.openedForWindow,_150=_14e?_14e.isCollapsed:false;if(node){var _151=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_151&&_151.focus){try{_151.focus();}catch(e){}}dijit._onFocusNode(node);}if(_14e&&dojo.withGlobal(_14f||dojo.global,dijit.isCollapsed)&&!_150){if(_14f){_14f.focus();}try{dojo.withGlobal(_14f||dojo.global,dijit.moveToBookmark,null,[_14e]);}catch(e2){}}},_activeStack:[],registerIframe:function(_152){return dijit.registerWin(_152.contentWindow,_152);},unregisterIframe:function(_153){dijit.unregisterWin(_153);},registerWin:function(_154,_155){var _156=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);if(dojo.isIE&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}dijit._onTouchNode(_155||evt.target||evt.srcElement,"mouse");};var doc=dojo.isIE?_154.document.documentElement:_154.document;if(doc){if(dojo.isIE){doc.attachEvent("onmousedown",_156);var _157=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement)){dijit._onFocusNode(_155||evt.srcElement);}else{dijit._onTouchNode(_155||evt.srcElement);}};doc.attachEvent("onactivate",_157);var _158=function(evt){dijit._onBlurNode(_155||evt.srcElement);};doc.attachEvent("ondeactivate",_158);return function(){doc.detachEvent("onmousedown",_156);doc.detachEvent("onactivate",_157);doc.detachEvent("ondeactivate",_158);doc=null;};}else{doc.addEventListener("mousedown",_156,true);var _159=function(evt){dijit._onFocusNode(_155||evt.target);};doc.addEventListener("focus",_159,true);var _15a=function(evt){dijit._onBlurNode(_155||evt.target);};doc.addEventListener("blur",_15a,true);return function(){doc.removeEventListener("mousedown",_156,true);doc.removeEventListener("focus",_159,true);doc.removeEventListener("blur",_15a,true);doc=null;};}}},unregisterWin:function(_15b){_15b&&_15b();},_onBlurNode:function(node){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(node,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _15c=[];try{while(node){var _15d=dojo.attr(node,"dijitPopupParent");if(_15d){node=dijit.byId(_15d).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===dojo.body()){break;}node=dojo.window.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_15e=id&&dijit.byId(id);if(_15e&&!(by=="mouse"&&_15e.get("disabled"))){_15c.unshift(id);}node=node.parentNode;}}}}catch(e){}dijit._setStack(_15c,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}dijit._onTouchNode(node);if(node==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=node;dojo.publish("focusNode",[node]);},_setStack:function(_15f,by){var _160=dijit._activeStack;dijit._activeStack=_15f;for(var _161=0;_161<Math.min(_160.length,_15f.length);_161++){if(_160[_161]!=_15f[_161]){break;}}var _162;for(var i=_160.length-1;i>=_161;i--){_162=dijit.byId(_160[i]);if(_162){_162._focused=false;_162._hasBeenBlurred=true;if(_162._onBlur){_162._onBlur(by);}dojo.publish("widgetBlur",[_162,by]);}}for(i=_161;i<_15f.length;i++){_162=dijit.byId(_15f[i]);if(_162){_162._focused=true;if(_162._onFocus){_162._onFocus(by);}dojo.publish("widgetFocus",[_162,by]);}}}});dojo.addOnLoad(function(){var _163=dijit.registerWin(window);if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit.unregisterWin(_163);_163=null;});}});}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_164){this.pairs=[];this.returnWrappers=_164||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_165,wrap,_166,_167){this.pairs[((_167)?"unshift":"push")]([name,_165,wrap,_166]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){return dojo.window.getBox();};dijit.placeOnScreen=function(node,pos,_168,_169){var _16a=dojo.map(_168,function(_16b){var c={corner:_16b,pos:{x:pos.x,y:pos.y}};if(_169){c.pos.x+=_16b.charAt(1)=="L"?_169.x:-_169.x;c.pos.y+=_16b.charAt(0)=="T"?_169.y:-_169.y;}return c;});return dijit._place(node,_16a);};dijit._place=function(node,_16c,_16d){var view=dojo.window.getBox();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}var best=null;dojo.some(_16c,function(_16e){var _16f=_16e.corner;var pos=_16e.pos;if(_16d){_16d(node,_16e.aroundCorner,_16f);}var _170=node.style;var _171=_170.display;var _172=_170.visibility;_170.visibility="hidden";_170.display="";var mb=dojo.marginBox(node);_170.display=_171;_170.visibility=_172;var _173=Math.max(view.l,_16f.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_174=Math.max(view.t,_16f.charAt(0)=="T"?pos.y:(pos.y-mb.h)),endX=Math.min(view.l+view.w,_16f.charAt(1)=="L"?(_173+mb.w):pos.x),endY=Math.min(view.t+view.h,_16f.charAt(0)=="T"?(_174+mb.h):pos.y),_175=endX-_173,_176=endY-_174,_177=(mb.w-_175)+(mb.h-_176);if(best==null||_177<best.overflow){best={corner:_16f,aroundCorner:_16e.aroundCorner,x:_173,y:_174,w:_175,h:_176,overflow:_177};}return !_177;});node.style.left=best.x+"px";node.style.top=best.y+"px";if(best.overflow&&_16d){_16d(node,best.aroundCorner,best.corner);}return best;};dijit.placeOnScreenAroundNode=function(node,_178,_179,_17a){_178=dojo.byId(_178);var _17b=_178.style.display;_178.style.display="";var _17c=dojo.position(_178,true);_178.style.display=_17b;return dijit._placeOnScreenAroundRect(node,_17c.x,_17c.y,_17c.w,_17c.h,_179,_17a);};dijit.placeOnScreenAroundRectangle=function(node,_17d,_17e,_17f){return dijit._placeOnScreenAroundRect(node,_17d.x,_17d.y,_17d.width,_17d.height,_17e,_17f);};dijit._placeOnScreenAroundRect=function(node,x,y,_180,_181,_182,_183){var _184=[];for(var _185 in _182){_184.push({aroundCorner:_185,corner:_182[_185],pos:{x:x+(_185.charAt(1)=="L"?0:_180),y:y+(_185.charAt(0)=="T"?0:_181)}});}return dijit._place(node,_184,_183);};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,_186,_187,_188){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAroundAlignment=function(_189,_18a){var _18b={};dojo.forEach(_189,function(pos){switch(pos){case "after":_18b[_18a?"BR":"BL"]=_18a?"BL":"BR";break;case "before":_18b[_18a?"BL":"BR"]=_18a?"BR":"BL";break;case "below":_18b[_18a?"BL":"BR"]=_18a?"TL":"TR";_18b[_18a?"BR":"BL"]=_18a?"TR":"TL";break;case "above":default:_18b[_18a?"TL":"TR"]=_18a?"BL":"BR";_18b[_18a?"TR":"TL"]=_18a?"BR":"BL";break;}});return _18b;};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){return dojo.window.get(doc);};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup={_stack:[],_beginZIndex:1000,_idGen:1,moveOffScreen:function(node){var _18c=node.parentNode;if(!_18c||!dojo.hasClass(_18c,"dijitPopup")){_18c=dojo.create("div",{"class":"dijitPopup",style:{visibility:"hidden",top:"-9999px"}},dojo.body());dijit.setWaiRole(_18c,"presentation");_18c.appendChild(node);}var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";dojo.style(_18c,{visibility:"hidden",top:"-9999px"});},getTopPopup:function(){var _18d=this._stack;for(var pi=_18d.length-1;pi>0&&_18d[pi].parent===_18d[pi-1].widget;pi--){}return _18d[pi];},open:function(args){var _18e=this._stack,_18f=args.popup,_190=args.orient||((args.parent?args.parent.isLeftToRight():dojo._isBodyLtr())?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_191=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);var _192=_18f.domNode.parentNode;if(!_192||!dojo.hasClass(_192,"dijitPopup")){this.moveOffScreen(_18f.domNode);_192=_18f.domNode.parentNode;}dojo.attr(_192,{id:id,style:{zIndex:this._beginZIndex+_18e.length},"class":"dijitPopup "+(_18f.baseClass||_18f["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(dojo.isIE||dojo.isMoz){var _193=_192.childNodes[1];if(!_193){_193=new dijit.BackgroundIframe(_192);}}var best=_191?dijit.placeOnScreenAroundElement(_192,_191,_190,_18f.orient?dojo.hitch(_18f,"orient"):null):dijit.placeOnScreen(_192,args,_190=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_192.style.visibility="visible";_18f.domNode.style.visibility="visible";var _194=[];_194.push(dojo.connect(_192,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&args.onCancel){dojo.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _195=this.getTopPopup();if(_195&&_195.onCancel){_195.onCancel();}}}}));if(_18f.onCancel){_194.push(dojo.connect(_18f,"onCancel",args.onCancel));}_194.push(dojo.connect(_18f,_18f.onExecute?"onExecute":"onChange",this,function(){var _196=this.getTopPopup();if(_196&&_196.onExecute){_196.onExecute();}}));_18e.push({wrapper:_192,iframe:_193,widget:_18f,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_194});if(_18f.onOpen){_18f.onOpen(best);}return best;},close:function(_197){var _198=this._stack;while(dojo.some(_198,function(elem){return elem.widget==_197;})){var top=_198.pop(),_199=top.wrapper,_19a=top.iframe,_19b=top.widget,_19c=top.onClose;if(_19b.onClose){_19b.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(_19b&&_19b.domNode){this.moveOffScreen(_19b.domNode);}else{dojo.destroy(_199);}if(_19c){_19c();}}}};dijit._frames=new function(){var _19d=[];this.pop=function(){var _19e;if(_19d.length){_19e=_19d.pop();_19e.style.display="";}else{if(dojo.isIE){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_19e=dojo.doc.createElement(html);}else{_19e=dojo.create("iframe");_19e.src="javascript:\"\"";_19e.className="dijitBackgroundIframe";dojo.style(_19e,"opacity",0.1);}_19e.tabIndex=-1;dijit.setWaiRole(_19e,"presentation");}return _19e;};this.push=function(_19f){_19f.style.display="none";_19d.push(_19f);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE||dojo.isMoz){var _1a0=dijit._frames.pop();node.appendChild(_1a0);if(dojo.isIE<7){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node);});}else{dojo.style(_1a0,{width:"100%",height:"100%"});}this.iframe=_1a0;}};dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe&&dojo.isIE<7){dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null;}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){dojo.window.scrollIntoView(node,pos);};}if(!dojo._hasResource["dojo.uacss"]){dojo._hasResource["dojo.uacss"]=true;dojo.provide("dojo.uacss");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_1a1=d.isOpera,maj=Math.floor,ff=d.isFF,_1a2=d.boxModel.replace(/-/,""),_1a3={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_quirks:d.isQuirks,dj_iequirks:ie&&d.isQuirks,dj_opera:_1a1,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_1a3["dj_"+_1a2]=true;var _1a4="";for(var clz in _1a3){if(_1a3[clz]){_1a4+=clz+" ";}}html.className=d.trim(html.className+" "+_1a4);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var _1a5="dj_rtl dijitRtl "+_1a4.replace(/ /g,"-rtl ");html.className=d.trim(html.className+" "+_1a5);}});})();}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_1a6,node,_1a7,obj,_1a8,_1a9,_1aa){if(obj!=this._obj){this.stop();this._initialDelay=_1a9||500;this._subsequentDelay=_1a8||0.9;this._minDelay=_1aa||10;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_1a6,_1a7);this._fireEventAndReload();this._evt=dojo.mixin({faux:true},evt);}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_1ab,_1ac,_1ad,_1ae,_1af,_1b0){if(_1ab.keyCode){_1ab.charOrCode=_1ab.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_1ab.charCode){_1ab.charOrCode=String.fromCharCode(_1ab.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_1ab.charOrCode&&(_1ab.ctrlKey===undefined||_1ab.ctrlKey==evt.ctrlKey)&&(_1ab.altKey===undefined||_1ab.altKey==evt.altKey)&&(_1ab.metaKey===undefined||_1ab.metaKey==(evt.metaKey||false))&&(_1ab.shiftKey===undefined||_1ab.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_1ac,node,_1ad,_1ab,_1ae,_1af,_1b0);}else{if(dijit.typematic._obj==_1ab){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_1ab){dijit.typematic.stop();}})];},addMouseListener:function(node,_1b1,_1b2,_1b3,_1b4,_1b5){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_1b1,node,_1b2,node,_1b3,_1b4,_1b5);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){evt.preventDefault();}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_1b1,node,_1b2,node,_1b3,_1b4,_1b5);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_1b6,_1b7,_1b8,_1b9,_1ba,_1bb,_1bc,_1bd){return this.addKeyListener(_1b7,_1b8,_1b9,_1ba,_1bb,_1bc,_1bd).concat(this.addMouseListener(_1b6,_1b9,_1ba,_1bb,_1bc,_1bd));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _1be=cs.backgroundImage;var _1bf=(cs.borderTopColor==cs.borderRightColor)||(_1be!=null&&(_1be=="none"||_1be=="url(invalid-url:)"));dojo[_1bf?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(elem,role){var _1c0=this.getWaiRole(elem);return role?(_1c0.indexOf(role)>-1):(_1c0.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace(this._XhtmlRoles,"").replace("wairole:",""));},setWaiRole:function(elem,role){var _1c1=dojo.attr(elem,"role")||"";if(!this._XhtmlRoles.test(_1c1)){dojo.attr(elem,"role",role);}else{if((" "+_1c1+" ").indexOf(" "+role+" ")<0){var _1c2=dojo.trim(_1c1.replace(this._XhtmlRoles,""));var _1c3=dojo.trim(_1c1.replace(_1c2,""));dojo.attr(elem,"role",_1c3+(_1c3?" ":"")+role);}}},removeWaiRole:function(elem,role){var _1c4=dojo.attr(elem,"role");if(!_1c4){return;}if(role){var t=dojo.trim((" "+_1c4+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_1c5){return elem.hasAttribute?elem.hasAttribute("aria-"+_1c5):!!elem.getAttribute("aria-"+_1c5);},getWaiState:function(elem,_1c6){return elem.getAttribute("aria-"+_1c6)||"";},setWaiState:function(elem,_1c7,_1c8){elem.setAttribute("aria-"+_1c7,_1c8);},removeWaiState:function(elem,_1c9){elem.removeAttribute("aria-"+_1c9);}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"_connect",function(_1ca,_1cb){if(_1ca&&dojo.isFunction(_1ca._onConnect)){_1ca._onConnect(_1cb);}});dijit._connectOnUseEventHandler=function(_1cc){};dijit._lastKeyDownNode=null;if(dojo.isIE){(function(){var _1cd=function(evt){dijit._lastKeyDownNode=evt.srcElement;};dojo.doc.attachEvent("onkeydown",_1cd);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",_1cd);});})();}else{dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target;},true);}(function(){var _1ce={},_1cf=function(_1d0){var dc=_1d0.declaredClass;if(!_1ce[dc]){var r=[],_1d1,_1d2=_1d0.constructor.prototype;for(var _1d3 in _1d2){if(dojo.isFunction(_1d2[_1d3])&&(_1d1=_1d3.match(/^_set([a-zA-Z]*)Attr$/))&&_1d1[1]){r.push(_1d1[1].charAt(0).toLowerCase()+_1d1[1].substr(1));}}_1ce[dc]=r;}return _1ce[dc]||[];};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_1d4,_1d5){this.create(_1d4,_1d5);},create:function(_1d6,_1d7){this.srcNodeRef=dojo.byId(_1d7);this._connects=[];this._subscribes=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_1d6){this.params=_1d6;dojo.mixin(this,_1d6);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _1d8=this.srcNodeRef;if(_1d8&&_1d8.parentNode){_1d8.parentNode.replaceChild(this.domNode,_1d8);}for(attr in this.params){this._onConnect(attr);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _1d9=function(attr,_1da){if((_1da.params&&attr in _1da.params)||_1da[attr]){_1da.set(attr,_1da[attr]);}};for(var attr in this.attributeMap){_1d9(attr,this);}dojo.forEach(_1cf(this),function(a){if(!(a in this.attributeMap)){_1d9(a,this);}},this);},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.create("div");},postCreate:function(){if(this.baseClass){var _1db=this.baseClass.split(" ");if(!this.isLeftToRight()){_1db=_1db.concat(dojo.map(_1db,function(name){return name+"Rtl";}));}dojo.addClass(this.domNode,_1db);}},startup:function(){this._started=true;},destroyRecursive:function(_1dc){this._beingDestroyed=true;this.destroyDescendants(_1dc);this.destroy(_1dc);},destroy:function(_1dd){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_1de){dfe(_1de,d.disconnect);});dfe(this._subscribes,function(_1df){dun(_1df);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_1dd);dijit.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_1e0){if(this.bgIframe){this.bgIframe.destroy(_1e0);delete this.bgIframe;}if(this.domNode){if(_1e0){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_1e0){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_1e1){dojo.forEach(this.getChildren(),function(_1e2){if(_1e2.destroyRecursive){_1e2.destroyRecursive(_1e1);}});},uninitialize:function(){return false;},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},_onConnect:function(_1e3){if(_1e3 in this._deferredConnects){var _1e4=this[this._deferredConnects[_1e3]||"domNode"];this.connect(_1e4,_1e3.toLowerCase(),_1e3);delete this._deferredConnects[_1e3];}},_setClassAttr:function(_1e5){var _1e6=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(_1e6,this["class"]);this["class"]=_1e5;dojo.addClass(_1e6,_1e5);},_setStyleAttr:function(_1e7){var _1e8=this[this.attributeMap.style||"domNode"];if(dojo.isObject(_1e7)){dojo.style(_1e8,_1e7);}else{if(_1e8.style.cssText){_1e8.style.cssText+="; "+_1e7;}else{_1e8.style.cssText=_1e7;}}this.style=_1e7;},setAttribute:function(attr,_1e9){dojo.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_1e9);},_attrToDom:function(attr,_1ea){var _1eb=this.attributeMap[attr];dojo.forEach(dojo.isArray(_1eb)?_1eb:[_1eb],function(_1ec){var _1ed=this[_1ec.node||_1ec||"domNode"];var type=_1ec.type||"attribute";switch(type){case "attribute":if(dojo.isFunction(_1ea)){_1ea=dojo.hitch(this,_1ea);}var _1ee=_1ec.attribute?_1ec.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);dojo.attr(_1ed,_1ee,_1ea);break;case "innerText":_1ed.innerHTML="";_1ed.appendChild(dojo.doc.createTextNode(_1ea));break;case "innerHTML":_1ed.innerHTML=_1ea;break;case "class":dojo.removeClass(_1ed,this[attr]);dojo.addClass(_1ed,_1ea);break;}},this);this[attr]=_1ea;},attr:function(name,_1ef){if(dojo.config.isDebug){var _1f0=arguments.callee._ach||(arguments.callee._ach={}),_1f1=(arguments.callee.caller||"unknown caller").toString();if(!_1f0[_1f1]){dojo.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_1f1,"","2.0");_1f0[_1f1]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},get:function(name){var _1f2=this._getAttrNames(name);return this[_1f2.g]?this[_1f2.g]():this[name];},set:function(name,_1f3){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _1f4=this._getAttrNames(name);if(this[_1f4.s]){var _1f5=this[_1f4.s].apply(this,Array.prototype.slice.call(arguments,1));}else{if(name in this.attributeMap){this._attrToDom(name,_1f3);}var _1f6=this[name];this[name]=_1f3;}return _1f5||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[];},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[];},nodesWithKeyClick:["input","button"],connect:function(obj,_1f7,_1f8){var d=dojo,dc=d._connect,_1f9=[];if(_1f7=="ondijitclick"){if(dojo.indexOf(this.nodesWithKeyClick,obj.nodeName.toLowerCase())==-1){var m=d.hitch(this,_1f8);_1f9.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;e.preventDefault();}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target===dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e);}}));}_1f7="onclick";}_1f9.push(dc(obj,_1f7,this,_1f8));this._connects.push(_1f9);return _1f9;},disconnect:function(_1fa){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_1fa){dojo.forEach(_1fa,dojo.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_1fb,_1fc){var d=dojo,_1fd=d.subscribe(_1fb,this,_1fc);this._subscribes.push(_1fd);return _1fd;},unsubscribe:function(_1fe){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_1fe){dojo.unsubscribe(_1fe);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):dojo._isBodyLtr();},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},placeAt:function(_1ff,_200){if(_1ff.declaredClass&&_1ff.addChild){_1ff.addChild(this,_200);}else{dojo.place(this.domNode,_1ff,_200);}return this;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});})();}if(!dojo._hasResource["dojox.string.Builder"]){dojo._hasResource["dojox.string.Builder"]=true;dojo.provide("dojox.string.Builder");dojox.string.Builder=function(str){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var tmp="",l=arguments.length;switch(l){case 9:tmp=""+arguments[8]+tmp;case 8:tmp=""+arguments[7]+tmp;case 7:tmp=""+arguments[6]+tmp;case 6:tmp=""+arguments[5]+tmp;case 5:tmp=""+arguments[4]+tmp;case 4:tmp=""+arguments[3]+tmp;case 3:tmp=""+arguments[2]+tmp;case 2:b+=""+arguments[0]+arguments[1]+tmp;break;default:var i=0;while(i<arguments.length){tmp+=arguments[i++];}b+=tmp;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_201){return this.append.apply(this,_201);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_202,_203){b=b.replace(_202,_203);this.length=b.length;return this;};this.remove=function(_204,len){if(len===undefined){len=b.length;}if(len==0){return this;}b=b.substr(0,_204)+b.substr(_204+len);this.length=b.length;return this;};this.insert=function(_205,str){if(_205==0){b=str+b;}else{b=b.slice(0,_205)+str+b.slice(_205);}this.length=b.length;return this;};this.toString=function(){return b;};if(str){this.append(str);}};}if(!dojo._hasResource["dojox.string.tokenize"]){dojo._hasResource["dojox.string.tokenize"]=true;dojo.provide("dojox.string.tokenize");dojox.string.tokenize=function(str,re,_206,_207){var _208=[];var _209,_20a,_20b=0;while(_209=re.exec(str)){_20a=str.slice(_20b,re.lastIndex-_209[0].length);if(_20a.length){_208.push(_20a);}if(_206){if(dojo.isOpera){var copy=_209.slice(0);while(copy.length<_209.length){copy.push(null);}_209=copy;}var _20c=_206.apply(_207,_209.slice(1).concat(_208.length));if(typeof _20c!="undefined"){_208.push(_20c);}}_20b=re.lastIndex;}_20a=str.slice(_20b);if(_20a.length){_208.push(_20a);}return _208;};}if(!dojo._hasResource["dojox.dtl._base"]){dojo._hasResource["dojox.dtl._base"]=true;dojo.provide("dojox.dtl._base");dojo.experimental("dojox.dtl");(function(){var dd=dojox.dtl;dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=dojo.extend(function(dict){if(dict){dojo._mixin(this,dict);if(dict.get){this._getter=dict.get;delete this.get;}}},{push:function(){var last=this;var _20d=dojo.delegate(this);_20d.pop=function(){return last;};return _20d;},pop:function(){throw new Error("pop() called on empty Context");},get:function(key,_20e){var n=this._normalize;if(this._getter){var got=this._getter(key);if(typeof got!="undefined"){return n(got);}}if(typeof this[key]!="undefined"){return n(this[key]);}return _20e;},_normalize:function(_20f){if(_20f instanceof Date){_20f.year=_20f.getFullYear();_20f.month=_20f.getMonth()+1;_20f.day=_20f.getDate();_20f.date=_20f.year+"-"+("0"+_20f.month).slice(-2)+"-"+("0"+_20f.day).slice(-2);_20f.hour=_20f.getHours();_20f.minute=_20f.getMinutes();_20f.second=_20f.getSeconds();_20f.microsecond=_20f.getMilliseconds();}return _20f;},update:function(dict){var _210=this.push();if(dict){dojo._mixin(this,dict);}return _210;}});var _211=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _212=/\s+/g;var _213=function(_214,_215){_214=_214||_212;if(!(_214 instanceof RegExp)){_214=new RegExp(_214,"g");}if(!_214.global){throw new Error("You must use a globally flagged RegExp with split "+_214);}_214.exec("");var part,_216=[],_217=0,i=0;while(part=_214.exec(this)){_216.push(this.slice(_217,_214.lastIndex-part[0].length));_217=_214.lastIndex;if(_215&&(++i>_215-1)){break;}}_216.push(this.slice(_217));return _216;};dd.Token=function(_218,_219){this.token_type=_218;this.contents=new String(dojo.trim(_219));this.contents.split=_213;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(_21a){var bit,bits=[],i=0;_21a=_21a||999;while(i++<_21a&&(bit=_211.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){bits.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){bits.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{bits.push(bit);}}}return bits;};var ddt=dd.text={_get:function(_21b,name,_21c){var _21d=dd.register.get(_21b,name.toLowerCase(),_21c);if(!_21d){if(!_21c){throw new Error("No tag found for "+name);}return null;}var fn=_21d[1];var _21e=_21d[2];var _21f;if(fn.indexOf(":")!=-1){_21f=fn.split(":");fn=_21f.pop();}dojo["require"](_21e);var _220=dojo.getObject(_21e);return _220[fn||name]||_220[name+"_"]||_220[fn+"_"];},getTag:function(name,_221){return ddt._get("tag",name,_221);},getFilter:function(name,_222){return ddt._get("filter",name,_222);},getTemplate:function(file){return new dd.Template(ddt.getTemplateString(file));},getTemplateString:function(file){return dojo._getText(file.toString())||"";},_resolveLazy:function(_223,sync,json){if(sync){if(json){return dojo.fromJson(dojo._getText(_223))||{};}else{return dd.text.getTemplateString(_223);}}else{return dojo.xhrGet({handleAs:(json)?"json":"text",url:_223});}},_resolveTemplateArg:function(arg,sync){if(ddt._isTemplate(arg)){if(!sync){var d=new dojo.Deferred();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync);},_isTemplate:function(arg){return (typeof arg=="undefined")||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,sync){if(arg.constructor==Object){if(!sync){var d=new dojo.Deferred;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return dojox.string.tokenize(str,ddt._re,ddt._parseDelims);},_parseDelims:function(varr,load,tag){if(varr){return [dd.TOKEN_VAR,varr];}else{if(load){var _224=dojo.trim(tag).split(/\s+/g);for(var i=0,part;part=_224[i];i++){dojo["require"](part);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=dojo.extend(function(_225,_226){var str=_226?_225:ddt._resolveTemplateArg(_225,true)||"";var _227=ddt.tokenize(str);var _228=new dd._Parser(_227);this.nodelist=_228.parse();},{update:function(node,_229){return ddt._resolveContextArg(_229).addCallback(this,function(_22a){var _22b=this.render(new dd._Context(_22a));if(node.forEach){node.forEach(function(item){item.innerHTML=_22b;});}else{dojo.byId(node).innerHTML=_22b;}return this;});},render:function(_22c,_22d){_22d=_22d||this.getBuffer();_22c=_22c||new dd._Context({});return this.nodelist.render(_22c,_22d)+"";},getBuffer:function(){return new dojox.string.Builder();}});var qfRe=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(dojox.string.tokenize(str,qfRe,function(_22e){return new dd._Filter(_22e);}));}};dd._QuickNodeList=dojo.extend(function(_22f){this.contents=_22f;},{render:function(_230,_231){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_231=_231.concat(this.contents[i].resolve(_230));}else{_231=_231.concat(this.contents[i]);}}return _231;},dummyRender:function(_232){return this.render(_232,dd.Template.prototype.getBuffer()).toString();},clone:function(_233){return this;}});dd._Filter=dojo.extend(function(_234){if(!_234){throw new Error("Filter must be called with variable name");}this.contents=_234;var _235=this._cache[_234];if(_235){this.key=_235[0];this.filters=_235[1];}else{this.filters=[];dojox.string.tokenize(_234,this._re,this._tokenize,this);this._cache[_234]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(typeof arguments[i]!="undefined"&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var _236=arguments[pos];if(this._args[pos]=="'"){_236=_236.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){_236=_236.replace(/\\"/g,"\"");}}arg=[!this._args[pos],_236];break;}}var fn=ddt.getFilter(arguments[3]);if(!dojo.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_237){if(typeof this.key=="undefined"){return "";}var str=this.resolvePath(this.key,_237);for(var i=0,_238;_238=this.filters[i];i++){if(_238[1]){if(_238[1][0]){str=_238[0](str,this.resolvePath(_238[1][1],_237));}else{str=_238[0](str,_238[1][1]);}}else{str=_238[0](str);}}return str;},resolvePath:function(path,_239){var _23a,_23b;var _23c=path.charAt(0);var last=path.slice(-1);if(!isNaN(parseInt(_23c))){_23a=(path.indexOf(".")==-1)?parseInt(path):parseFloat(path);}else{if(_23c=="\""&&_23c==last){_23a=path.slice(1,-1);}else{if(path=="true"){return true;}if(path=="false"){return false;}if(path=="null"||path=="None"){return null;}_23b=path.split(".");_23a=_239.get(_23b[0]);if(dojo.isFunction(_23a)){var self=_239.getThis&&_239.getThis();if(_23a.alters_data){_23a="";}else{if(self){_23a=_23a.call(self);}else{_23a="";}}}for(var i=1;i<_23b.length;i++){var part=_23b[i];if(_23a){var base=_23a;if(dojo.isObject(_23a)&&part=="items"&&typeof _23a[part]=="undefined"){var _23d=[];for(var key in _23a){_23d.push([key,_23a[key]]);}_23a=_23d;continue;}if(_23a.get&&dojo.isFunction(_23a.get)&&_23a.get.safe){_23a=_23a.get(part);}else{if(typeof _23a[part]=="undefined"){_23a=_23a[part];break;}else{_23a=_23a[part];}}if(dojo.isFunction(_23a)){if(_23a.alters_data){_23a="";}else{_23a=_23a.call(base);}}else{if(_23a instanceof Date){_23a=dd._Context.prototype._normalize(_23a);}}}else{return "";}}}}return _23a;}});dd._TextNode=dd._Node=dojo.extend(function(obj){this.contents=obj;},{set:function(data){this.contents=data;return this;},render:function(_23e,_23f){return _23f.concat(this.contents);},isEmpty:function(){return !dojo.trim(this.contents);},clone:function(){return this;}});dd._NodeList=dojo.extend(function(_240){this.contents=_240||[];this.last="";},{push:function(node){this.contents.push(node);return this;},concat:function(_241){this.contents=this.contents.concat(_241);return this;},render:function(_242,_243){for(var i=0;i<this.contents.length;i++){_243=this.contents[i].render(_242,_243);if(!_243){throw new Error("Template must return buffer");}}return _243;},dummyRender:function(_244){return this.render(_244,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=dojo.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_245,_246){var str=this.contents.resolve(_245);if(!str){str="";}else{if(!str.safe){str=dd._base.escape(""+str);}}return _246.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=dojo.extend(function(_247){this.contents=_247;},{i:0,parse:function(_248){var _249={},_24a;_248=_248||[];for(var i=0;i<_248.length;i++){_249[_248[i]]=true;}var _24b=new dd._NodeList();while(this.i<this.contents.length){_24a=this.contents[this.i++];if(typeof _24a=="string"){_24b.push(new dd._TextNode(_24a));}else{var type=_24a[0];var text=_24a[1];if(type==dd.TOKEN_VAR){_24b.push(new dd._VarNode(text));}else{if(type==dd.TOKEN_BLOCK){if(_249[text]){--this.i;return _24b;}var cmd=text.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_24b.push(fn(this,new dd.Token(type,text)));}}}}}}if(_248.length){throw new Error("Could not find closing tag(s): "+_248.toString());}this.contents.length=0;return _24b;},next_token:function(){var _24c=this.contents[this.i++];return new dd.Token(_24c[0],_24c[1]);},delete_first_token:function(){this.i++;},skip_past:function(_24d){while(this.i<this.contents.length){var _24e=this.contents[this.i++];if(_24e[0]==dd.TOKEN_BLOCK&&_24e[1]==_24d){return;}}throw new Error("Unclosed tag found when looking for "+_24d);},create_variable_node:function(expr){return new dd._VarNode(expr);},create_text_node:function(expr){return new dd._TextNode(expr||"");},getTemplate:function(file){return new dd.Template(file);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_24f,name){var _250=dd.register._registry[_24f+"s"];for(var i=0,_251;_251=_250[i];i++){if(typeof _251[0]=="string"){if(_251[0]==name){return _251;}}else{if(name.match(_251[0])){return _251;}}}},getAttributeTags:function(){var tags=[];var _252=dd.register._registry.attributes;for(var i=0,_253;_253=_252[i];i++){if(_253.length==3){tags.push(_253);}else{var fn=dojo.getObject(_253[1]);if(fn&&dojo.isFunction(fn)){_253.push(fn);tags.push(_253);}}}return tags;},_any:function(type,base,_254){for(var path in _254){for(var i=0,fn;fn=_254[path][i];i++){var key=fn;if(dojo.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var attr=fn;if(attr.substr(0,5)=="attr:"){attr=attr.slice(5);}dd.register._registry.attributes.push([attr.toLowerCase(),base+"."+path+"."+attr]);}key=key.toLowerCase();}dd.register._registry[type].push([key,fn,base+"."+path]);}}},tags:function(base,_255){dd.register._any("tags",base,_255);},filters:function(base,_256){dd.register._any("filters",base,_256);}};var _257=/&/g;var _258=/</g;var _259=/>/g;var _25a=/'/g;var _25b=/"/g;dd._base.escape=function(_25c){return dd.mark_safe(_25c.replace(_257,"&amp;").replace(_258,"&lt;").replace(_259,"&gt;").replace(_25b,"&quot;").replace(_25a,"&#39;"));};dd._base.safe=function(_25d){if(typeof _25d=="string"){_25d=new String(_25d);}if(typeof _25d=="object"){_25d.safe=true;}return _25d;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});})();}if(!dojo._hasResource["dojox.dtl"]){dojo._hasResource["dojox.dtl"]=true;dojo.provide("dojox.dtl");}if(!dojo._hasResource["dojox.dtl.tag.logic"]){dojo._hasResource["dojox.dtl.tag.logic"]=true;dojo.provide("dojox.dtl.tag.logic");(function(){var dd=dojox.dtl;var ddt=dd.text;var ddtl=dd.tag.logic;ddtl.IfNode=dojo.extend(function(_25e,_25f,_260,type){this.bools=_25e;this.trues=_25f;this.falses=_260;this.type=type;},{render:function(_261,_262){var i,bool,_263,_264,_265;if(this.type=="or"){for(i=0;bool=this.bools[i];i++){_263=bool[0];_264=bool[1];_265=_264.resolve(_261);if((_265&&!_263)||(_263&&!_265)){if(this.falses){_262=this.falses.unrender(_261,_262);}return (this.trues)?this.trues.render(_261,_262,this):_262;}}if(this.trues){_262=this.trues.unrender(_261,_262);}return (this.falses)?this.falses.render(_261,_262,this):_262;}else{for(i=0;bool=this.bools[i];i++){_263=bool[0];_264=bool[1];_265=_264.resolve(_261);if(_265==_263){if(this.trues){_262=this.trues.unrender(_261,_262);}return (this.falses)?this.falses.render(_261,_262,this):_262;}}if(this.falses){_262=this.falses.unrender(_261,_262);}return (this.trues)?this.trues.render(_261,_262,this):_262;}return _262;},unrender:function(_266,_267){_267=(this.trues)?this.trues.unrender(_266,_267):_267;_267=(this.falses)?this.falses.unrender(_266,_267):_267;return _267;},clone:function(_268){var _269=(this.trues)?this.trues.clone(_268):null;var _26a=(this.falses)?this.falses.clone(_268):null;return new this.constructor(this.bools,_269,_26a,this.type);}});ddtl.IfEqualNode=dojo.extend(function(var1,var2,_26b,_26c,_26d){this.var1=new dd._Filter(var1);this.var2=new dd._Filter(var2);this.trues=_26b;this.falses=_26c;this.negate=_26d;},{render:function(_26e,_26f){var var1=this.var1.resolve(_26e);var var2=this.var2.resolve(_26e);var1=(typeof var1!="undefined")?var1:"";var2=(typeof var1!="undefined")?var2:"";if((this.negate&&var1!=var2)||(!this.negate&&var1==var2)){if(this.falses){_26f=this.falses.unrender(_26e,_26f,this);}return (this.trues)?this.trues.render(_26e,_26f,this):_26f;}if(this.trues){_26f=this.trues.unrender(_26e,_26f,this);}return (this.falses)?this.falses.render(_26e,_26f,this):_26f;},unrender:function(_270,_271){return ddtl.IfNode.prototype.unrender.call(this,_270,_271);},clone:function(_272){var _273=this.trues?this.trues.clone(_272):null;var _274=this.falses?this.falses.clone(_272):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_273,_274,this.negate);}});ddtl.ForNode=dojo.extend(function(_275,loop,_276,_277){this.assign=_275;this.loop=new dd._Filter(loop);this.reversed=_276;this.nodelist=_277;this.pool=[];},{render:function(_278,_279){var i,j,k;var _27a=false;var _27b=this.assign;for(k=0;k<_27b.length;k++){if(typeof _278[_27b[k]]!="undefined"){_27a=true;_278=_278.push();break;}}if(!_27a&&_278.forloop){_27a=true;_278=_278.push();}var _27c=this.loop.resolve(_278)||[];for(i=_27c.length;i<this.pool.length;i++){this.pool[i].unrender(_278,_279,this);}if(this.reversed){_27c=_27c.slice(0).reverse();}var _27d=dojo.isObject(_27c)&&!dojo.isArrayLike(_27c);var _27e=[];if(_27d){for(var key in _27c){_27e.push(_27c[key]);}}else{_27e=_27c;}var _27f=_278.forloop={parentloop:_278.get("forloop",{})};var j=0;for(i=0;i<_27e.length;i++){var item=_27e[i];_27f.counter0=j;_27f.counter=j+1;_27f.revcounter0=_27e.length-j-1;_27f.revcounter=_27e.length-j;_27f.first=!j;_27f.last=(j==_27e.length-1);if(_27b.length>1&&dojo.isArrayLike(item)){if(!_27a){_27a=true;_278=_278.push();}var _280={};for(k=0;k<item.length&&k<_27b.length;k++){_280[_27b[k]]=item[k];}dojo.mixin(_278,_280);}else{_278[_27b[0]]=item;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_279));}_279=this.pool[j++].render(_278,_279,this);}delete _278.forloop;if(_27a){_278=_278.pop();}else{for(k=0;k<_27b.length;k++){delete _278[_27b[k]];}}return _279;},unrender:function(_281,_282){for(var i=0,pool;pool=this.pool[i];i++){_282=pool.unrender(_281,_282);}return _282;},clone:function(_283){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_283));}});dojo.mixin(ddtl,{if_:function(_284,_285){var i,part,type,_286=[],_287=_285.contents.split();_287.shift();_285=_287.join(" ");_287=_285.split(" and ");if(_287.length==1){type="or";_287=_285.split(" or ");}else{type="and";for(i=0;i<_287.length;i++){if(_287[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;part=_287[i];i++){var not=false;if(part.indexOf("not ")==0){part=part.slice(4);not=true;}_286.push([not,new dd._Filter(part)]);}var _288=_284.parse(["else","endif"]);var _289=false;var _285=_284.next_token();if(_285.contents=="else"){_289=_284.parse(["endif"]);_284.next_token();}return new ddtl.IfNode(_286,_288,_289,type);},_ifequal:function(_28a,_28b,_28c){var _28d=_28b.split_contents();if(_28d.length!=3){throw new Error(_28d[0]+" takes two arguments");}var end="end"+_28d[0];var _28e=_28a.parse(["else",end]);var _28f=false;var _28b=_28a.next_token();if(_28b.contents=="else"){_28f=_28a.parse([end]);_28a.next_token();}return new ddtl.IfEqualNode(_28d[1],_28d[2],_28e,_28f,_28c);},ifequal:function(_290,_291){return ddtl._ifequal(_290,_291);},ifnotequal:function(_292,_293){return ddtl._ifequal(_292,_293,true);},for_:function(_294,_295){var _296=_295.contents.split();if(_296.length<4){throw new Error("'for' statements should have at least four words: "+_295.contents);}var _297=_296[_296.length-1]=="reversed";var _298=(_297)?-3:-2;if(_296[_296.length+_298]!="in"){throw new Error("'for' tag received an invalid argument: "+_295.contents);}var _299=_296.slice(1,_298).join(" ").split(/ *, */);for(var i=0;i<_299.length;i++){if(!_299[i]||_299[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_295.contents);}}var _29a=_294.parse(["endfor"]);_294.next_token();return new ddtl.ForNode(_299,_296[_296.length+_298+1],_297,_29a);}});})();}if(!dojo._hasResource["dojox.dtl.tag.loop"]){dojo._hasResource["dojox.dtl.tag.loop"]=true;dojo.provide("dojox.dtl.tag.loop");(function(){var dd=dojox.dtl;var ddtl=dd.tag.loop;ddtl.CycleNode=dojo.extend(function(_29b,name,text,_29c){this.cyclevars=_29b;this.name=name;this.contents=text;this.shared=_29c||{counter:-1,map:{}};},{render:function(_29d,_29e){if(_29d.forloop&&!_29d.forloop.counter0){this.shared.counter=-1;}++this.shared.counter;var _29f=this.cyclevars[this.shared.counter%this.cyclevars.length];var map=this.shared.map;if(!map[_29f]){map[_29f]=new dd._Filter(_29f);}_29f=map[_29f].resolve(_29d,_29e);if(this.name){_29d[this.name]=_29f;}this.contents.set(_29f);return this.contents.render(_29d,_29e);},unrender:function(_2a0,_2a1){return this.contents.unrender(_2a0,_2a1);},clone:function(_2a2){return new this.constructor(this.cyclevars,this.name,this.contents.clone(_2a2),this.shared);}});ddtl.IfChangedNode=dojo.extend(function(_2a3,vars,_2a4){this.nodes=_2a3;this._vars=vars;this.shared=_2a4||{last:null,counter:0};this.vars=dojo.map(vars,function(item){return new dojox.dtl._Filter(item);});},{render:function(_2a5,_2a6){if(_2a5.forloop){if(_2a5.forloop.counter<=this.shared.counter){this.shared.last=null;}this.shared.counter=_2a5.forloop.counter;}var _2a7;if(this.vars.length){_2a7=dojo.toJson(dojo.map(this.vars,function(item){return item.resolve(_2a5);}));}else{_2a7=this.nodes.dummyRender(_2a5,_2a6);}if(_2a7!=this.shared.last){var _2a8=(this.shared.last===null);this.shared.last=_2a7;_2a5=_2a5.push();_2a5.ifchanged={firstloop:_2a8};_2a6=this.nodes.render(_2a5,_2a6);_2a5=_2a5.pop();}else{_2a6=this.nodes.unrender(_2a5,_2a6);}return _2a6;},unrender:function(_2a9,_2aa){return this.nodes.unrender(_2a9,_2aa);},clone:function(_2ab){return new this.constructor(this.nodes.clone(_2ab),this._vars,this.shared);}});ddtl.RegroupNode=dojo.extend(function(_2ac,key,_2ad){this._expression=_2ac;this.expression=new dd._Filter(_2ac);this.key=key;this.alias=_2ad;},{_push:function(_2ae,_2af,_2b0){if(_2b0.length){_2ae.push({grouper:_2af,list:_2b0});}},render:function(_2b1,_2b2){_2b1[this.alias]=[];var list=this.expression.resolve(_2b1);if(list){var last=null;var _2b3=[];for(var i=0;i<list.length;i++){var id=list[i][this.key];if(last!==id){this._push(_2b1[this.alias],last,_2b3);last=id;_2b3=[list[i]];}else{_2b3.push(list[i]);}}this._push(_2b1[this.alias],last,_2b3);}return _2b2;},unrender:function(_2b4,_2b5){return _2b5;},clone:function(_2b6,_2b7){return this;}});dojo.mixin(ddtl,{cycle:function(_2b8,_2b9){var args=_2b9.split_contents();if(args.length<2){throw new Error("'cycle' tag requires at least two arguments");}if(args[1].indexOf(",")!=-1){var vars=args[1].split(",");args=[args[0]];for(var i=0;i<vars.length;i++){args.push("\""+vars[i]+"\"");}}if(args.length==2){var name=args[args.length-1];if(!_2b8._namedCycleNodes){throw new Error("No named cycles in template: '"+name+"' is not defined");}if(!_2b8._namedCycleNodes[name]){throw new Error("Named cycle '"+name+"' does not exist");}return _2b8._namedCycleNodes[name];}if(args.length>4&&args[args.length-2]=="as"){var name=args[args.length-1];var node=new ddtl.CycleNode(args.slice(1,args.length-2),name,_2b8.create_text_node());if(!_2b8._namedCycleNodes){_2b8._namedCycleNodes={};}_2b8._namedCycleNodes[name]=node;}else{node=new ddtl.CycleNode(args.slice(1),null,_2b8.create_text_node());}return node;},ifchanged:function(_2ba,_2bb){var _2bc=_2bb.contents.split();var _2bd=_2ba.parse(["endifchanged"]);_2ba.delete_first_token();return new ddtl.IfChangedNode(_2bd,_2bc.slice(1));},regroup:function(_2be,_2bf){var _2c0=dojox.string.tokenize(_2bf.contents,/(\s+)/g,function(_2c1){return _2c1;});if(_2c0.length<11||_2c0[_2c0.length-3]!="as"||_2c0[_2c0.length-7]!="by"){throw new Error("Expected the format: regroup list by key as newList");}var _2c2=_2c0.slice(2,-8).join("");var key=_2c0[_2c0.length-5];var _2c3=_2c0[_2c0.length-1];return new ddtl.RegroupNode(_2c2,key,_2c3);}});})();}if(!dojo._hasResource["dojox.dtl.filter.misc"]){dojo._hasResource["dojox.dtl.filter.misc"]=true;dojo.provide("dojox.dtl.filter.misc");dojo.mixin(dojox.dtl.filter.misc,{filesizeformat:function(_2c4){_2c4=parseFloat(_2c4);if(_2c4<1024){return (_2c4==1)?_2c4+" byte":_2c4+" bytes";}else{if(_2c4<1024*1024){return (_2c4/1024).toFixed(1)+" KB";}else{if(_2c4<1024*1024*1024){return (_2c4/1024/1024).toFixed(1)+" MB";}}}return (_2c4/1024/1024/1024).toFixed(1)+" GB";},pluralize:function(_2c5,arg){arg=arg||"s";if(arg.indexOf(",")==-1){arg=","+arg;}var _2c6=arg.split(",");if(_2c6.length>2){return "";}var _2c7=_2c6[0];var _2c8=_2c6[1];if(parseInt(_2c5,10)!=1){return _2c8;}return _2c7;},_phone2numeric:{a:2,b:2,c:2,d:3,e:3,f:3,g:4,h:4,i:4,j:5,k:5,l:5,m:6,n:6,o:6,p:7,r:7,s:7,t:8,u:8,v:8,w:9,x:9,y:9},phone2numeric:function(_2c9){var dm=dojox.dtl.filter.misc;_2c9=_2c9+"";var _2ca="";for(var i=0;i<_2c9.length;i++){var chr=_2c9.charAt(i).toLowerCase();(dm._phone2numeric[chr])?_2ca+=dm._phone2numeric[chr]:_2ca+=_2c9.charAt(i);}return _2ca;},pprint:function(_2cb){return dojo.toJson(_2cb);}});}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(_2cc){var _2cd=_2cc.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_2cd==1&&dojo.date.isLeapYear(_2cc)){return 29;}return days[_2cd];};dojo.date.isLeapYear=function(_2ce){var year=_2ce.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_2cf){var str=_2cf.toString();var tz="";var _2d0;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_2d0=str.match(pat))){tz=_2d0[1];}else{str=_2cf.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_2d0=str.match(pat))){tz=_2d0[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_2d1,_2d2,_2d3){_2d1=new Date(+_2d1);_2d2=new Date(+(_2d2||new Date()));if(_2d3=="date"){_2d1.setHours(0,0,0,0);_2d2.setHours(0,0,0,0);}else{if(_2d3=="time"){_2d1.setFullYear(0,0,0);_2d2.setFullYear(0,0,0);}}if(_2d1>_2d2){return 1;}if(_2d1<_2d2){return -1;}return 0;};dojo.date.add=function(date,_2d4,_2d5){var sum=new Date(+date);var _2d6=false;var _2d7="Date";switch(_2d4){case "day":break;case "weekday":var days,_2d8;var mod=_2d5%5;if(!mod){days=(_2d5>0)?5:-5;_2d8=(_2d5>0)?((_2d5-5)/5):((_2d5+5)/5);}else{days=mod;_2d8=parseInt(_2d5/5);}var strt=date.getDay();var adj=0;if(strt==6&&_2d5>0){adj=1;}else{if(strt==0&&_2d5<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_2d5>0)?2:-2;}_2d5=(7*_2d8)+days+adj;break;case "year":_2d7="FullYear";_2d6=true;break;case "week":_2d5*=7;break;case "quarter":_2d5*=3;case "month":_2d6=true;_2d7="Month";break;default:_2d7="UTC"+_2d4.charAt(0).toUpperCase()+_2d4.substring(1)+"s";}if(_2d7){sum["set"+_2d7](sum["get"+_2d7]()+_2d5);}if(_2d6&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_2d9,_2da,_2db){_2da=_2da||new Date();_2db=_2db||"day";var _2dc=_2da.getFullYear()-_2d9.getFullYear();var _2dd=1;switch(_2db){case "quarter":var m1=_2d9.getMonth();var m2=_2da.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_2dc*4);_2dd=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(_2d9,_2da,"day"));var _2de=parseInt(dojo.date.difference(_2d9,_2da,"week"));var mod=days%7;if(mod==0){days=_2de*5;}else{var adj=0;var aDay=_2d9.getDay();var bDay=_2da.getDay();_2de=parseInt(days/7);mod=days%7;var _2df=new Date(_2d9);_2df.setDate(_2df.getDate()+(_2de*7));var _2e0=_2df.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_2e0+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_2e0+mod)<0:adj=2;}}}days+=adj;days-=(_2de*2);}_2dd=days;break;case "year":_2dd=_2dc;break;case "month":_2dd=(_2da.getMonth()-_2d9.getMonth())+(_2dc*12);break;case "week":_2dd=parseInt(dojo.date.difference(_2d9,_2da,"day")/7);break;case "day":_2dd/=24;case "hour":_2dd/=60;case "minute":_2dd/=60;case "second":_2dd/=1000;case "millisecond":_2dd*=_2da.getTime()-_2d9.getTime();}return Math.round(_2dd);};}if(!dojo._hasResource["dojox.date.php"]){dojo._hasResource["dojox.date.php"]=true;dojo.provide("dojox.date.php");dojox.date.php.format=function(date,_2e1){var df=new dojox.date.php.DateFormat(_2e1);return df.format(date);};dojox.date.php.DateFormat=function(_2e2){if(!this.regex){var keys=[];for(var key in this.constructor.prototype){if(dojo.isString(key)&&key.length==1&&dojo.isFunction(this[key])){keys.push(key);}}this.regex=new RegExp("(?:(\\\\.)|(["+keys.join("")+"]))","g");}var _2e3=[];this.tokens=dojox.string.tokenize(_2e2,this.regex,function(_2e4,_2e5,i){if(_2e5){_2e3.push([i,_2e5]);return _2e5;}if(_2e4){return _2e4.charAt(1);}});this.replacements=_2e3;};dojo.extend(dojox.date.php.DateFormat,{weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_3:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_3:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthdays:[31,28,31,30,31,30,31,31,30,31,30,31],format:function(date){this.date=date;for(var i=0,_2e6;_2e6=this.replacements[i];i++){this.tokens[_2e6[0]]=this[_2e6[1]]();}return this.tokens.join("");},d:function(){var j=this.j();return (j.length==1)?"0"+j:j;},D:function(){return this.weekdays_3[this.date.getDay()];},j:function(){return this.date.getDate()+"";},l:function(){return this.weekdays[this.date.getDay()];},N:function(){var w=this.w();return (!w)?7:w;},S:function(){switch(this.date.getDate()){case 11:case 12:case 13:return "th";case 1:case 21:case 31:return "st";case 2:case 22:return "nd";case 3:case 23:return "rd";default:return "th";}},w:function(){return this.date.getDay()+"";},z:function(){var _2e7=this.date.getTime()-new Date(this.date.getFullYear(),0,1).getTime();return Math.floor(_2e7/86400000)+"";},W:function(){var week;var _2e8=new Date(this.date.getFullYear(),0,1).getDay()+1;var w=this.date.getDay()+1;var z=parseInt(this.z());if(z<=(8-_2e8)&&_2e8>4){var _2e9=new Date(this.date.getFullYear()-1,this.date.getMonth(),this.date.getDate());if(_2e8==5||(_2e8==6&&dojo.date.isLeapYear(_2e9))){week=53;}else{week=52;}}else{var i;if(Boolean(this.L())){i=366;}else{i=365;}if((i-z)<(4-w)){week=1;}else{var j=z+(7-w)+(_2e8-1);week=Math.ceil(j/7);if(_2e8>4){--week;}}}return week;},F:function(){return this.months[this.date.getMonth()];},m:function(){var n=this.n();return (n.length==1)?"0"+n:n;},M:function(){return this.months_3[this.date.getMonth()];},n:function(){return this.date.getMonth()+1+"";},t:function(){return (Boolean(this.L())&&this.date.getMonth()==1)?29:this.monthdays[this.getMonth()];},L:function(){return (dojo.date.isLeapYear(this.date))?"1":"0";},o:function(){},Y:function(){return this.date.getFullYear()+"";},y:function(){return this.Y().slice(-2);},a:function(){return this.date.getHours()>=12?"pm":"am";},b:function(){return this.a().toUpperCase();},B:function(){var off=this.date.getTimezoneOffset()+60;var secs=(this.date.getHours()*3600)+(this.date.getMinutes()*60)+this.getSeconds()+(off*60);var beat=Math.abs(Math.floor(secs/86.4)%1000)+"";while(beat.length<2){beat="0"+beat;}return beat;},g:function(){return (this.date.getHours()>12)?this.date.getHours()-12+"":this.date.getHours()+"";},G:function(){return this.date.getHours()+"";},h:function(){var g=this.g();return (g.length==1)?"0"+g:g;},H:function(){var G=this.G();return (G.length==1)?"0"+G:G;},i:function(){var mins=this.date.getMinutes()+"";return (mins.length==1)?"0"+mins:mins;},s:function(){var secs=this.date.getSeconds()+"";return (secs.length==1)?"0"+secs:secs;},e:function(){return dojo.date.getTimezoneName(this.date);},I:function(){},O:function(){var off=Math.abs(this.date.getTimezoneOffset());var _2ea=Math.floor(off/60)+"";var mins=(off%60)+"";if(_2ea.length==1){_2ea="0"+_2ea;}if(mins.length==1){_2ea="0"+mins;}return ((this.date.getTimezoneOffset()<0)?"+":"-")+_2ea+mins;},P:function(){var O=this.O();return O.substring(0,2)+":"+O.substring(2,4);},T:function(){return this.e().substring(0,3);},Z:function(){return this.date.getTimezoneOffset()*-60;},c:function(){return this.Y()+"-"+this.m()+"-"+this.d()+"T"+this.h()+":"+this.i()+":"+this.s()+this.P();},r:function(){return this.D()+", "+this.d()+" "+this.M()+" "+this.Y()+" "+this.H()+":"+this.i()+":"+this.s()+" "+this.O();},U:function(){return Math.floor(this.date.getTime()/1000);}});}if(!dojo._hasResource["dojox.dtl.utils.date"]){dojo._hasResource["dojox.dtl.utils.date"]=true;dojo.provide("dojox.dtl.utils.date");dojox.dtl.utils.date.DateFormat=function(_2eb){dojox.date.php.DateFormat.call(this,_2eb);};dojo.extend(dojox.dtl.utils.date.DateFormat,dojox.date.php.DateFormat.prototype,{f:function(){return (!this.date.getMinutes())?this.g():this.g()+":"+this.i();},N:function(){return dojox.dtl.utils.date._months_ap[this.date.getMonth()];},P:function(){if(!this.date.getMinutes()&&!this.date.getHours()){return "midnight";}if(!this.date.getMinutes()&&this.date.getHours()==12){return "noon";}return this.f()+" "+this.a();}});dojo.mixin(dojox.dtl.utils.date,{format:function(date,_2ec){var df=new dojox.dtl.utils.date.DateFormat(_2ec);return df.format(date);},timesince:function(d,now){if(!(d instanceof Date)){d=new Date(d.year,d.month,d.day);}if(!now){now=new Date();}var _2ed=Math.abs(now.getTime()-d.getTime());for(var i=0,_2ee;_2ee=dojox.dtl.utils.date._chunks[i];i++){var _2ef=Math.floor(_2ed/_2ee[0]);if(_2ef){break;}}return _2ef+" "+_2ee[1](_2ef);},_chunks:[[60*60*24*365*1000,function(n){return (n==1)?"year":"years";}],[60*60*24*30*1000,function(n){return (n==1)?"month":"months";}],[60*60*24*7*1000,function(n){return (n==1)?"week":"weeks";}],[60*60*24*1000,function(n){return (n==1)?"day":"days";}],[60*60*1000,function(n){return (n==1)?"hour":"hours";}],[60*1000,function(n){return (n==1)?"minute":"minutes";}]],_months_ap:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."]});}if(!dojo._hasResource["dojox.dtl.filter.dates"]){dojo._hasResource["dojox.dtl.filter.dates"]=true;dojo.provide("dojox.dtl.filter.dates");(function(){var ddfd=dojox.dtl.filter.dates;dojo.mixin(ddfd,{_toDate:function(_2f0){if(_2f0 instanceof Date){return _2f0;}_2f0=new Date(_2f0);if(_2f0.getTime()==new Date(0).getTime()){return "";}return _2f0;},date:function(_2f1,arg){_2f1=ddfd._toDate(_2f1);if(!_2f1){return "";}arg=arg||"N j, Y";return dojox.dtl.utils.date.format(_2f1,arg);},time:function(_2f2,arg){_2f2=ddfd._toDate(_2f2);if(!_2f2){return "";}arg=arg||"P";return dojox.dtl.utils.date.format(_2f2,arg);},timesince:function(_2f3,arg){_2f3=ddfd._toDate(_2f3);if(!_2f3){return "";}var _2f4=dojox.dtl.utils.date.timesince;if(arg){return _2f4(arg,_2f3);}return _2f4(_2f3);},timeuntil:function(_2f5,arg){_2f5=ddfd._toDate(_2f5);if(!_2f5){return "";}var _2f6=dojox.dtl.utils.date.timesince;if(arg){return _2f6(arg,_2f5);}return _2f6(new Date(),_2f5);}});})();}if(!dojo._hasResource["dojox.dtl.filter.integers"]){dojo._hasResource["dojox.dtl.filter.integers"]=true;dojo.provide("dojox.dtl.filter.integers");dojo.mixin(dojox.dtl.filter.integers,{add:function(_2f7,arg){_2f7=parseInt(_2f7,10);arg=parseInt(arg,10);return isNaN(arg)?_2f7:_2f7+arg;},get_digit:function(_2f8,arg){_2f8=parseInt(_2f8,10);arg=parseInt(arg,10)-1;if(arg>=0){_2f8+="";if(arg<_2f8.length){_2f8=parseInt(_2f8.charAt(arg),10);}else{_2f8=0;}}return (isNaN(_2f8)?0:_2f8);}});}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_2f9,map,_2fa,_2fb){_2fb=_2fb||dojo.global;_2fa=_2fa?dojo.hitch(_2fb,_2fa):function(v){return v;};return _2f9.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_2fc,key,_2fd){var _2fe=dojo.getObject(key,false,map);if(_2fd){_2fe=dojo.getObject(_2fd,false,_2fb).call(_2fb,_2fe,key);}return _2fa(_2fe,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(_2ff,_300){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _301=dojo.date.stamp._isoRegExp.exec(_2ff),_302=null;if(_301){_301.shift();if(_301[1]){_301[1]--;}if(_301[6]){_301[6]*=1000;}if(_300){_300=new Date(_300);dojo.forEach(dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _300["get"+prop]();}),function(_303,_304){_301[_304]=_301[_304]||_303;});}_302=new Date(_301[0]||1970,_301[1]||0,_301[2]||1,_301[3]||0,_301[4]||0,_301[5]||0,_301[6]||0);if(_301[0]<100){_302.setFullYear(_301[0]||1970);}var _305=0,_306=_301[7]&&_301[7].charAt(0);if(_306!="Z"){_305=((_301[8]||0)*60)+(Number(_301[9])||0);if(_306!="-"){_305*=-1;}}if(_306){_305-=_302.getTimezoneOffset();}if(_305){_302.setTime(_302.getTime()+_305*60000);}}return _302;};dojo.date.stamp.toISOString=function(_307,_308){var _309=function(n){return (n<10)?"0"+n:n;};_308=_308||{};var _30a=[],_30b=_308.zulu?"getUTC":"get",date="";if(_308.selector!="time"){var year=_307[_30b+"FullYear"]();date=["0000".substr((year+"").length)+year,_309(_307[_30b+"Month"]()+1),_309(_307[_30b+"Date"]())].join("-");}_30a.push(date);if(_308.selector!="date"){var time=[_309(_307[_30b+"Hours"]()),_309(_307[_30b+"Minutes"]()),_309(_307[_30b+"Seconds"]())].join(":");var _30c=_307[_30b+"Milliseconds"]();if(_308.milliseconds){time+="."+(_30c<100?"0":"")+_309(_30c);}if(_308.zulu){time+="Z";}else{if(_308.selector!="time"){var _30d=_307.getTimezoneOffset();var _30e=Math.abs(_30d);time+=(_30d>0?"-":"+")+_309(Math.floor(_30e/60))+":"+_309(_30e%60);}}_30a.push(time);}return _30a.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");new Date("X");dojo.parser=new function(){var d=dojo;this._attrName=d._scopeName+"Type";this._query="["+this._attrName+"]";function _30f(_310){if(d.isString(_310)){return "string";}if(typeof _310=="number"){return "number";}if(typeof _310=="boolean"){return "boolean";}if(d.isFunction(_310)){return "function";}if(d.isArray(_310)){return "array";}if(_310 instanceof Date){return "date";}if(_310 instanceof d._Url){return "url";}return "object";};function _311(_312,type){switch(type){case "string":return _312;case "number":return _312.length?Number(_312):NaN;case "boolean":return typeof _312=="boolean"?_312:!(_312.toLowerCase()=="false");case "function":if(d.isFunction(_312)){_312=_312.toString();_312=d.trim(_312.substring(_312.indexOf("{")+1,_312.length-1));}try{if(_312===""||_312.search(/[^\w\.]+/i)!=-1){return new Function(_312);}else{return d.getObject(_312,false)||new Function(_312);}}catch(e){return new Function();}case "array":return _312?_312.split(/\s*,\s*/):[];case "date":switch(_312){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_312);}case "url":return d.baseUrl+_312;default:return d.fromJson(_312);}};var _313={};dojo.connect(dojo,"extend",function(){_313={};});function _314(_315){if(!_313[_315]){var cls=d.getObject(_315);if(!cls){return null;}var _316=cls.prototype;var _317={},_318={};for(var name in _316){if(name.charAt(0)=="_"){continue;}if(name in _318){continue;}var _319=_316[name];_317[name]=_30f(_319);}_313[_315]={cls:cls,params:_317};}return _313[_315];};this._functionFromScript=function(_31a){var _31b="";var _31c="";var _31d=_31a.getAttribute("args");if(_31d){d.forEach(_31d.split(/\s*,\s*/),function(part,idx){_31b+="var "+part+" = arguments["+idx+"]; ";});}var _31e=_31a.getAttribute("with");if(_31e&&_31e.length){d.forEach(_31e.split(/\s*,\s*/),function(part){_31b+="with("+part+"){";_31c+="}";});}return new Function(_31b+_31a.innerHTML+_31c);};this.instantiate=function(_31f,_320,args){var _321=[],dp=dojo.parser;_320=_320||{};args=args||{};d.forEach(_31f,function(obj){if(!obj){return;}var node,type,_322,_323,_324;if(obj.node){node=obj.node;type=obj.type;_322=obj.clsInfo||(type&&_314(type));_323=_322&&_322.cls;_324=obj.scripts;}else{node=obj;type=dp._attrName in _320?_320[dp._attrName]:node.getAttribute(dp._attrName);_322=type&&_314(type);_323=_322&&_322.cls;_324=(_323&&(_323._noScript||_323.prototype._noScript)?[]:d.query("> script[type^='dojo/']",node));}if(!_322){throw new Error("Could not load class '"+type);}var _325={},_326=node.attributes;if(args.defaults){dojo.mixin(_325,args.defaults);}if(obj.inherited){dojo.mixin(_325,obj.inherited);}for(var name in _322.params){var item=name in _320?{value:_320[name],specified:true}:_326.getNamedItem(name);if(!item||(!item.specified&&(!dojo.isIE||name.toLowerCase()!="value"))){continue;}var _327=item.value;switch(name){case "class":_327="className" in _320?_320.className:node.className;break;case "style":_327="style" in _320?_320.style:(node.style&&node.style.cssText);}var _328=_322.params[name];if(typeof _327=="string"){_325[name]=_311(_327,_328);}else{_325[name]=_327;}}var _329=[],_32a=[];d.forEach(_324,function(_32b){node.removeChild(_32b);var _32c=_32b.getAttribute("event"),type=_32b.getAttribute("type"),nf=d.parser._functionFromScript(_32b);if(_32c){if(type=="dojo/connect"){_329.push({event:_32c,func:nf});}else{_325[_32c]=nf;}}else{_32a.push(nf);}});var _32d=_323.markupFactory||_323.prototype&&_323.prototype.markupFactory;var _32e=_32d?_32d(_325,node,_323):new _323(_325,node);_321.push(_32e);var _32f=node.getAttribute("jsId");if(_32f){d.setObject(_32f,_32e);}d.forEach(_329,function(_330){d.connect(_32e,_330.event,null,_330.func);});d.forEach(_32a,function(func){func.call(_32e);});});if(!_320._started){d.forEach(_321,function(_331){if(!args.noStart&&_331&&_331.startup&&!_331._started&&(!_331.getParent||!_331.getParent())){_331.startup();}});}return _321;};this.parse=function(_332,args){var root;if(!args&&_332&&_332.rootNode){args=_332;root=args.rootNode;}else{root=_332;}var _333=this._attrName;function scan(_334,list){var _335=dojo.clone(_334.inherited);dojo.forEach(["dir","lang"],function(name){var val=_334.node.getAttribute(name);if(val){_335[name]=val;}});var _336=_334.scripts;var _337=!_334.clsInfo||!_334.clsInfo.cls.prototype.stopParser;for(var _338=_334.node.firstChild;_338;_338=_338.nextSibling){if(_338.nodeType==1){var type=_337&&_338.getAttribute(_333);if(type){var _339={"type":type,clsInfo:_314(type),node:_338,scripts:[],inherited:_335};list.push(_339);scan(_339,list);}else{if(_336&&_338.nodeName.toLowerCase()=="script"){type=_338.getAttribute("type");if(type&&/^dojo\//i.test(type)){_336.push(_338);}}else{if(_337){scan({node:_338,inherited:_335},list);}}}}}};var list=[];scan({node:root?dojo.byId(root):dojo.body(),inherited:(args&&args.inherited)||{dir:dojo._isBodyLtr()?"ltr":"rtl"}},list);return this.instantiate(list,null,args);};}();(function(){var _33a=function(){if(dojo.config.parseOnLoad){dojo.parser.parse();}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,_33a);}else{dojo._loaders.unshift(_33a);}})();}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");(function(){var _33b={};dojo.cache=function(_33c,url,_33d){if(typeof _33c=="string"){var _33e=dojo.moduleUrl(_33c,url);}else{_33e=_33c;_33d=url;}var key=_33e.toString();var val=_33d;if(_33d!=undefined&&!dojo.isString(_33d)){val=("value" in _33d?_33d.value:undefined);}var _33f=_33d&&_33d.sanitize?true:false;if(typeof val=="string"){val=_33b[key]=_33f?dojo.cache._sanitize(val):val;}else{if(val===null){delete _33b[key];}else{if(!(key in _33b)){val=dojo._getText(key);_33b[key]=_33f?dojo.cache._sanitize(val):val;}val=_33b[key];}}return val;};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _340=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_340){val=_340[1];}}else{val="";}return val;};})();}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];},_stringRepl:function(tmpl){var _341=this.declaredClass,_342=this;return dojo.string.substitute(tmpl,this,function(_343,key){if(key.charAt(0)=="!"){_343=dojo.getObject(key.substr(1),false,_342);}if(typeof _343=="undefined"){throw new Error(_341+" template:"+key);}if(_343==null){return "";}return key.charAt(0)=="!"?_343:_343.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _344=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_344)){node=dojo._toDom(this._stringRepl(_344));if(node.nodeType!=1){throw new Error("Invalid template: "+_344);}}else{node=_344.cloneNode(true);}this.domNode=node;this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _345=dojo.parser,qry,attr;if(_345._query!="[dojoType]"){qry=_345._query;attr=_345._attrName;_345._query="[dojoType]";_345._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_345._query=qry;_345._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_346){var dest=this.containerNode;if(_346&&dest){while(_346.hasChildNodes()){dest.appendChild(_346.firstChild);}}},_attachTemplateNodes:function(_347,_348){_348=_348||function(n,p){return n.getAttribute(p);};var _349=dojo.isArray(_347)?_347:(_347.all||_347.getElementsByTagName("*"));var x=dojo.isArray(_347)?0:-1;for(;x<_349.length;x++){var _34a=(x==-1)?_347:_349[x];if(this.widgetsInTemplate&&_348(_34a,"dojoType")){continue;}var _34b=_348(_34a,"dojoAttachPoint");if(_34b){var _34c,_34d=_34b.split(/\s*,\s*/);while((_34c=_34d.shift())){if(dojo.isArray(this[_34c])){this[_34c].push(_34a);}else{this[_34c]=_34a;}this._attachPoints.push(_34c);}}var _34e=_348(_34a,"dojoAttachEvent");if(_34e){var _34f,_350=_34e.split(/\s*,\s*/);var trim=dojo.trim;while((_34f=_350.shift())){if(_34f){var _351=null;if(_34f.indexOf(":")!=-1){var _352=_34f.split(":");_34f=trim(_352[0]);_351=trim(_352[1]);}else{_34f=trim(_34f);}if(!_351){_351=_34f;}this.connect(_34a,_34f,_351);}}}var role=_348(_34a,"waiRole");if(role){dijit.setWaiRole(_34a,role);}var _353=_348(_34a,"waiState");if(_353){dojo.forEach(_353.split(/\s*,\s*/),function(_354){if(_354.indexOf("-")!=-1){var pair=_354.split("-");dijit.setWaiState(_34a,pair[0],pair[1]);}});}}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){dojo.forEach(this._attachPoints,function(_355){delete this[_355];},this);this._attachPoints=[];this.inherited(arguments);}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_356,_357,_358){var _359=dijit._Templated._templateCache;var key=_357||_356;var _35a=_359[key];if(_35a){try{if(!_35a.ownerDocument||_35a.ownerDocument==dojo.doc){return _35a;}}catch(e){}dojo.destroy(_35a);}if(!_357){_357=dojo.cache(_356,{sanitize:true});}_357=dojo.string.trim(_357);if(_358||_357.match(/\$\{([^\}]+)\}/g)){return (_359[key]=_357);}else{var node=dojo._toDom(_357);if(node.nodeType!=1){throw new Error("Invalid template: "+_357);}return (_359[key]=node);}};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _35b=dijit._Templated._templateCache;for(var key in _35b){var _35c=_35b[key];if(typeof _35c=="object"){dojo.destroy(_35c);}delete _35b[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["dojox.dtl._Templated"]){dojo._hasResource["dojox.dtl._Templated"]=true;dojo.provide("dojox.dtl._Templated");dojo.declare("dojox.dtl._Templated",dijit._Templated,{_dijitTemplateCompat:false,buildRendering:function(){var node;if(this.domNode&&!this._template){return;}if(!this._template){var t=this.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);if(t instanceof dojox.dtl.Template){this._template=t;}else{node=t;}}if(!node){var _35d=new dojox.dtl._Context(this);if(!this._created){delete _35d._getter;}var _35e=dojo._toDom(this._template.render(_35d));if(_35e.nodeType!==1&&_35e.nodeType!==3){for(var i=0,l=_35e.childNodes.length;i<l;++i){node=_35e.childNodes[i];if(node.nodeType==1){break;}}}else{node=_35e;}}this._attachTemplateNodes(node);if(this.widgetsInTemplate){var _35f=dojo.parser,qry,attr;if(_35f._query!="[dojoType]"){qry=_35f._query;attr=_35f._attrName;_35f._query="[dojoType]";_35f._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_35f._query=qry;_35f._attrName=attr;}this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}if(this.domNode){dojo.place(node,this.domNode,"before");this.destroyDescendants();dojo.destroy(this.domNode);}this.domNode=node;this._fillContent(this.srcNodeRef);},_templateCache:{},getCachedTemplate:function(_360,_361,_362){var _363=this._templateCache;var key=_361||_360;if(_363[key]){return _363[key];}_361=dojo.string.trim(_361||dojo.cache(_360,{sanitize:true}));if(this._dijitTemplateCompat&&(_362||_361.match(/\$\{([^\}]+)\}/g))){_361=this._stringRepl(_361);}if(_362||!_361.match(/\{[{%]([^\}]+)[%}]\}/g)){return _363[key]=dojo._toDom(_361);}else{return _363[key]=new dojox.dtl.Template(_361);}},render:function(){this.buildRendering();},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});}if(!dojo._hasResource["agi.widget._TemplatedWidget"]){dojo._hasResource["agi.widget._TemplatedWidget"]=true;dojo.provide("agi.widget._TemplatedWidget");dojo.declare("agi.widget._TemplatedWidget",[dijit._Widget,dojox.dtl._Templated],{});}if(!dojo._hasResource["agi.requester"]){dojo._hasResource["agi.requester"]=true;dojo.provide("agi.requester");agi.requester.Requester=function(url,_364,_365,_366,_367){var _368=this;var req=null;this.async=_365;this.method=_364;this.url=url;this.showbusy=_366;this.in_process=false;this.handleas=_367?_367:"text";this.get_millisecond_query=function(){var _369=new Date();var ms=_369.getTime();return "&ajax_requester_ms="+ms;};this.sendRequest=function(_36a){var _36b={url:this.url,sync:!this.async,content:_36a?_36a:{},preventCache:_36a?true:false,handleAs:this.handleas,load:_368.processLoad,error:_368.processError};if(this.showbusy){document.body.style.cursor="wait";}this.in_process=true;if(this.method.toUpperCase()=="POST"){dojo.xhrPost(_36b);}else{dojo.xhrGet(_36b);}};this.processLoad=function(_36c,_36d){_36c=_368.processAlways(_36c,_36d);if(_36d.xhr.getResponseHeader("Kaboom")){if(_36d.xhrgetResponseHeader("Kaboom").toLowerCase()=="true"){if(_368.onerror){_368.onerror(_36c,_36d);}}}else{if(_368.onsuccess){_368.onsuccess(_36c,_36d);}}return _36c;};this.processError=function(_36e,_36f){_36e=_368.processAlways(_36e,_36f);if(_368.onerror){_368.onerror(_36e,_36f);}return _36e;};this.processAlways=function(_370,_371){_368.in_process=false;if(_368.showbusy){document.body.style.cursor="auto";}if(!_370){_370="";}try{_370=_370.replace("<!--this page was compressed by your friendly neighborhood pydriver-->","");}catch(e){}return _370;};this.formToQuery=function(_372){var _373=dojo.formToObject(_372);return _373;};};var script_fragment="<script[^>]*>([\\s\\S]*?)</script>";agi.requester.stripScripts=function(_374){return _374.replace(new RegExp(script_fragment,"img"),"");};agi.requester.extractScripts=function(_375){var _376=new RegExp(script_fragment,"img");var _377=new RegExp(script_fragment,"im");var _378=_375.match(_376);var _379=[];if(_378){for(var i=0;i<_378.length;i++){if(_378[i].indexOf("agi-lb-exec")!=-1){_379.push(_378[i].match(_377)[1]);}}}return _379;};agi.requester.evalScripts=function(_37a){var _37b=agi.requester.extractScripts(_37a);for(i=0;i<_37b.length;i++){try{eval(_37b[i]);}catch(e){}}};agi.requester.checkAll=function(_37c,_37d){form=dojo.byId(_37c);for(i=0;i<form.elements.length;i++){if(form.elements[i].type=="checkbox"){form.elements[i].checked=_37d;}}};agi.requester.countChecked=function(_37e){var form=dojo.byId(_37e);var _37f=0;for(i=0;i<form.elements.length;i++){if(form.elements[i].type=="checkbox"&form.elements[i].checked){_37f++;}}return _37f;};agi.requester.selectAll=function(_380,_381){if(_381==undefined){var _382=true;}else{var _382=_381;}var list=dojo.byId(_380);var _383=document.getElementsByName("event_id");for(i=0;i<list.childNodes.length;i++){if(list.childNodes[i].nodeName=="LI"){for(j=0;j<list.childNodes[i].childNodes.length;j++){if(list.childNodes[i].childNodes[j].type=="checkbox"){list.childNodes[i].childNodes[j].checked=_382;len=_383.length;for(n=0;n<len;n++){if((_383[n].value)==(list.childNodes[i].childNodes[j].value)){_383[n].checked=_382;}}}}}}};agi.requester.selectEqual=function(_384){var _385=document.getElementsByName(_384.name);for(i=0;i<_385.length;i++){if(_384.form.elements[i].value==_384.value){_384.form.elements[i].checked=_384.checked;}}};agi.requester.fixurl=function(url){if(url.indexOf("http")!=0){var sep="";url.indexOf("/")==0?sep="":sep="/";url=agi.requester.ajaxhost()+sep+url;}return url;};agi.requester.ajaxhost=function(){return document.location.protocol+"//"+document.location.hostname;};}if(!dojo._hasResource["agi.widget.Lightbox"]){dojo._hasResource["agi.widget.Lightbox"]=true;dojo.provide("agi.widget.Lightbox");dojo.declare("agi.widget.Lightbox",[agi.classes.Identified,agi.widget._TemplatedWidget],{url:null,contents:null,node:null,templatePath:null,left:null,top:null,height:null,width:null,position:"absolute",relativeTo:null,showloader:true,loaderSrc:imghost+"/ag/reminders/loader.swf",loaderId:"agi-lightboxloader",loaderHeight:120,loaderWidth:120,overlayId:"agi-overlay",showoverlay:true,lightboxId:"agi-lightbox",noprintClass:"agi-noprint",timeout:60000,loadnow:true,allowclick:false,closeKey:null,overflow:"auto",overlayZindex:"999",containerZindex:"1000",loaderZindex:"250",_defaultTop:20,_ready:false,_reset:false,_showing:false,_bgIframe:null,_keypressListener:null,_hideSignal:"ag/Lightbox/hide",_resizeSignal:"ag/Lightbox/resize",constructor:function(_386){_386=_386||{};dojo.mixin(this,_386);this._checkPositioning();},uninitialize:function(){dojo._destroyElement(this.loader);dojo._destroyElement(this.lightbox);if(this.overlay){dojo._destroyElement(this.overlay);}if(this._bgIframe){this._bgIframe.destroy();this._bgIframe=null;}},_checkPositioning:function(){if(this.position=="relative"){if(!this.relativeTo){throw (this+" needs a relativeTo when positioning relatively");}if(this.left==null){this.left=0;}if(this.top==null){this.top=0;}var pos=dojo.coords(this.relativeTo);this.left+=pos.x;this.top+=pos.y;}else{if(this.position=="user"){if(this.top==null||this.left==null){throw (this+" needs 'left' and 'top' defined when using user-defined positioning.");}}else{if(this.top==null){this.top=this._defaultTop;}}}},buildRendering:function(){if(this.templatePath||this.templateString){this.inherited(arguments);}this.overlay=this._createOverlay();this.lightbox=this._createLightbox(this.overlay);this.loader=this._createLoader();},postCreate:function(){this.inherited(arguments);dojo.subscribe(this._hideSignal,dojo.hitch(this,this.hide));dojo.subscribe(this._resizeSignal,dojo.hitch(this,this._resizeOverlay));if(this.loadnow){this._loadContent();}},_createOverlay:function(){var body=dojo.body();var _387=this.overlayId;var _388=dojo.byId(_387);if(!_388){_388=document.createElement("div");_388.setAttribute("id",_387);dojo.addClass(_388,this.noprintClass);var _389=this._pageSize();dojo.style(_388,{display:"none",position:"absolute",top:"0",left:"0",zIndex:this.overlayZindex,width:"100%",height:_389[1]+"px"});body.insertBefore(_388,body.firstChild);}try{filter=dojo.style(_388,"filter");if(filter&&dojo.isIE){if(filter.indexOf(imghost)==-1){filter=filter.replace("/agbeta",imghost+"/agbeta");dojo.style(_388,"filter",filter);}}}catch(e){}return _388;},_createLightbox:function(_38a){var body=dojo.body();var _38b=dojo.byId(this.lightboxId);if(!_38b){_38b=document.createElement("div");_38b.setAttribute("id",this.lightboxId);dojo.style(_38b,{display:"none",position:"absolute",zIndex:this.containerZindex});body.insertBefore(_38b,_38a.nextSibling);}_38b.innerHTML="";return _38b;},_createLoader:function(){var body=dojo.body();var _38c=dojo.byId("loadingImage");if(!_38c){if(this.loaderSrc.endswith(".swf")){_38c=this._createLoaderSwf(this.loaderSrc);}else{_38c=this._createLoaderImage(this.loaderSrc);}dojo.style(_38c,{display:"none",visibility:"hidden",position:"absolute",zIndex:this.loaderZindex});body.insertBefore(_38c,body.firstChild);}return _38c;},_createLoaderSwf:function(src){var _38d=document.createElement("embed");_38d.setAttribute("id",this.loaderId);_38d.setAttribute("name","FlashProduct");_38d.setAttribute("src",src);_38d.setAttribute("swLiveConnect",true);_38d.setAttribute("width",this.loaderWidth);_38d.setAttribute("height",this.loaderHeight);_38d.setAttribute("scale","noborder");_38d.setAttribute("quality","high");_38d.setAttribute("type","application/x-shockwave-flash");_38d.setAttribute("pluginspace","http://www.macromedia.com/go/getflashplayer");_38d.setAttribute("wmode","transparent");return _38d;},_createLoaderImage:function(src){var _38e=document.createElement("img");_38e.setAttribute("id",this.loaderId);_38e.setAttribute("src",src);_38e.setAttribute("width",this.loaderWidth);_38e.setAttribute("height",this.loaderHeight);return _38e;},_loadContent:function(){if(this.domNode&&!this.node){this.node=this.domNode;}if(this.loader&&this.showloader){var _38f=this._pageSize();var _390=this._pageScroll();var _391=_390[1]+((_38f[3]-35-this.loader.height)/2);var _392=((_38f[0]-20-this.loader.width)/2);dojo.style(this.loader,{display:"block",visibility:"visible",top:_391+"px",left:_392+"px"});}if(this.overlay&&this.showoverlay){dojo.style(this.overlay,{display:"block",visibility:"visible"});}if(this.url){dojo.xhrGet({url:this.url,handleAs:"text",timeout:this.timeout,load:dojo.hitch(this,this._onSuccess),error:dojo.hitch(this,this._onError)});}else{if(this.contents){this.lightbox.innerHTML=agi.requester.stripScripts(this.contents);this._ready=true;this.show();agi.requester.evalScripts(this.contents);this._enableOverlayClick();}else{if(this.node){var node=dojo.byId(this.node);this.lightbox.appendChild(dojo.byId(node));dojo.style(node,"display","block");this._ready=true;this.show();this._enableOverlayClick();}}}},_onSuccess:function(_393,_394){this.lightbox.innerHTML=agi.requester.stripScripts(_393);this._ready=true;this.show();agi.requester.evalScripts(_393);this._enableOverlayClick();return _393;},_onError:function(_395,_396){this.hide();return _395;},show:function(_397){if(_397){this._checkPositioning();}this._showPhase0();this._showPhase1();this._showPhase2();this.postShow();},_showPhase0:function(){if(!this._ready){return this._loadContent();}if(this._reset){this._checkPositioning();this._reset=false;}if(this.contents){this.lightbox.innerHTML=this.contents;}dojo.style(this.lightbox,"overflow",this.overflow);if(this.loader){dojo.style(this.loader,{display:"none",visibility:"hidden"});}if(this.overlay&&this.showoverlay){dojo.style(this.overlay,{display:"block",visibility:"visible"});}},_showPhase1:function(){var _398=this._pageScroll();var _399=this.top+_398[1];var _39a={left:"-9999px",top:_399+"px",visibility:"visible",display:"block"};if(this.height){_39a.height=this.height+"px";}if(this.width){_39a.width=this.width+"px";}dojo.style(this.lightbox,_39a);},_showPhase2:function(){var _39b=this._pageSize();if(this.left==null){this.left=((_39b[0]-this.lightbox.offsetWidth)/2);}var _39c={left:this.left+"px"};dojo.style(this.lightbox,_39c);this._resizeOverlay();this._enableKeypressListener();if(!this._bgIframe){var _39d=this.lightbox;if(this.overlay&&this.showoverlay){_39d=this.overlay;}this._bgIframe=new dijit.BackgroundIframe(_39d);}this._showing=true;},postShow:function(){return;},hide:function(_39e){if(!this._showing){return;}if(this.overlay){this.overlay.onclick=function(){return false;};dojo.style(this.overlay,{display:"none",visibility:"hidden"});}if(this.loader){dojo.style(this.loader,{display:"none",visibility:"hidden"});}if(this.lightbox){dojo.style(this.lightbox,{display:"none",visibility:"hidden"});if(_39e){this.reset();}else{this.contents=this.lightbox.innerHTML;}}this._disableKeypressListener();this._showing=false;},reset:function(){if(this.node){dojo.style(this.node,{display:"none"});dojo.place(this.node,dojo.body(),"last");}this.lightbox.innerHTML="";this.contents=null;this.url=null;this.domNode=null;this.top=null;this.left=null;this._ready=false;this._reset=true;},_enableOverlayClick:function(){if(this.overlay&&this.allowclick){this._overlayClick=dojo.connect(this.overlay,"onclick",dojo.hitch(this,this.hide));}},_disableOverlayClick:function(){if(this._overlayClick){dojo.disconnect(this._overlayClick);this._overlayClick=null;}},_enableKeypressListener:function(){if(this.closeKey&&!this._keypressListener){this._keypressListener=dojo.connect(document,"keypress",dojo.hitch(this,this._onKeypress));}},_disableKeypressListener:function(){if(this._keypressListener){dojo.disconnect(this._keypressListener);this._keypressListener=null;}},_onKeypress:function(evt){if(evt.charOrCode==this.closeKey){this.hide();}},_resizeOverlay:function(){if(this.overlay){var _39f=this._pageSize();dojo.style(this.overlay,"height",_39f[1]+"px");}},_pageScroll:function(){var _3a0=0;if(self.pageYOffset){_3a0=self.pageYOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){_3a0=document.documentElement.scrollTop;}else{if(document.body){_3a0=document.body.scrollTop;}}}var _3a1=[null,_3a0];return _3a1;},_pageSize:function(){var _3a2,_3a3;if(window.innerHeight&&window.scrollMaxY){_3a2=document.body.scrollWidth;_3a3=window.innerHeight+window.scrollMaxY;}else{if(document.body.scrollHeight>document.body.offsetHeight){_3a2=document.body.scrollWidth;_3a3=document.body.scrollHeight;}else{_3a2=document.body.offsetWidth;_3a3=document.body.offsetHeight;}}var _3a4,_3a5;if(self.innerHeight){_3a4=self.innerWidth;_3a5=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){_3a4=document.documentElement.clientWidth;_3a5=document.documentElement.clientHeight;}else{if(document.body){_3a4=document.body.clientWidth;_3a5=document.body.clientHeight;}}}var _3a6,_3a7;if(_3a3<_3a5){_3a7=_3a5;}else{_3a7=_3a3;}if(_3a2<_3a4){_3a6=_3a4;}else{_3a6=_3a2;}var _3a8=[_3a6,_3a7,_3a4,_3a5];return _3a8;}});}if(!dojo._hasResource["agi.widget.focusform"]){dojo._hasResource["agi.widget.focusform"]=true;dojo.provide("agi.widget.focusform");dojo.declare("agi.widget.focusform.FocusForm",[agi.classes.Identified],{orig_form_values:{},on_cls:"activeinput",off_cls:"lazyinput",form:null,form_id:null,handles:null,constructor:function(_3a9,_3aa,_3ab){this.handles=[];this.form_id=_3a9;this.form=dojo.byId(_3a9);this.on_cls=_3ab||this.on_cls;this.off_cls=_3aa||this.off_cls;this.setup_onfocus();this.setup_onsubmit();dojo.connect(this.form,"onreset",this,this.reset_form);},wake_input:function(ev){var node=ev.target;if(node.className.indexOf(this.off_cls)>-1){node.value="";if(node.name.indexOf("password")>-1){if(dojo.isIE){var _3ac=agi.dom.make_node("<input name=\""+node.name+"\" />",{"class":node.className,"name":node.name,"type":"password","id":node.id,"maxlength":"32"});}else{var _3ac=agi.dom.make_node("input",{"class":node.className,"name":node.name,"type":"password","id":node.id,"maxlength":"32"});}node=agi.dom.swap_node(node,_3ac);this.connect_password_keypress(node);node.focus();node.focus();_3ac.focus();}node.className=node.className.replace(/lazyinput/,this.on_cls);}},reset_input:function(node){if(node.className.indexOf(this.on_cls)>-1){node.className=node.className.replace(/activeinput/,this.off_cls);if(node.name.indexOf("password")>-1){if(dojo.isIE){var _3ad=agi.dom.make_node("<input name=\""+node.name+"\" />",{"class":node.className,"name":node.name,"type":"text","id":node.id});}else{var _3ad=agi.dom.make_node("input",{"class":node.className,"name":node.name,"type":"text","id":node.id});}node=agi.dom.swap_node(node,_3ad);}try{node.value=this.orig_form_values[node.name];}catch(e){node.value="Couldn't find original value";}}},reset_form:function(){this.form=dojo.byId(this.form_id);dojo.forEach(this.form.elements,dojo.hitch(this,function(node){this.reset_input(node);}));dojo.forEach(this.handles,function(_3ae){dojo.disconnect(_3ae);});this.handles=[];this.setup_onfocus();},setup_onfocus:function(){dojo.forEach(this.form.elements,dojo.hitch(this,function(node){this.orig_form_values[node.name]=node.value;if(node.type=="textarea"||node.type=="text"||node.type=="select-one"){this.handles.push(dojo.connect(node,"onfocus",dojo.hitch(this,this.wake_input)));}}));},setup_onsubmit:function(){this.handles.push(dojo.connect(this.form,"onsubmit",function(evt){dojo.publish("ag/widget/focusform/submit",[evt]);}));},connect_password_keypress:function(node){dojo.connect(node,"onkeypress",this,this.submit_on_keypress);},submit_on_keypress:function(evt){if(evt.keyCode==dojo.keys.ENTER){dojo.stopEvent(evt);dojo.publish("ag/widget/focusform/submitkey",[evt]);this.form.submit();}}});agi.widget.focusform.connect_password_keypress=function(node,_3af){dojo.connect(node,"onkeypress",function(e){if(e.keyCode==13){e.preventDefault();agi.widget.focusform.submit_on_keypress(_3af);}});};agi.widget.focusform.submit_on_keypress=function(_3b0){dojo.byId(_3b0).submit();};}if(!dojo._hasResource["agi.widget.findit"]){dojo._hasResource["agi.widget.findit"]=true;dojo.provide("agi.widget.findit");agi.widget.findit.FinditLightbox=function(_3b1,_3b2){this.hidden_node_id=_3b1;this.bad_form_id="findit_magic";this.form_id=_3b2;this.ff=undefined;this.lightbox=null;this.show=dojo.hitch(this,function(){if(this.lightbox){this.lightbox.show();}else{var _3b3=dojo.byId(this.hidden_node_id);this.lightbox=new agi.widget.Lightbox({node:_3b3,lightboxId:"lightbox",loaderId:"loadingImage",overlayId:"agi-overlay"});if(dojo.byId(this.bad_form_id)){dojo.byId(this.bad_form_id).id=this.form_id;}this.ff=new agi.widget.focusform.FocusForm(this.form_id);}return false;});this.hide=dojo.hitch(this,function(){if(this.ff){this.ff.reset_form();}this.lightbox.hide();return false;});};}if(!dojo._hasResource["ag.widget.findit"]){dojo._hasResource["ag.widget.findit"]=true;dojo.provide("ag.widget.findit");ag.widget.findit=agi.widget.findit;}if(!dojo._hasResource["ag.widget.Lightbox"]){dojo._hasResource["ag.widget.Lightbox"]=true;dojo.provide("ag.widget.Lightbox");ag.widget.Lightbox=agi.widget.Lightbox;}if(!dojo._hasResource["ag.widget.focusform"]){dojo._hasResource["ag.widget.focusform"]=true;dojo.provide("ag.widget.focusform");ag.widget.focusform=agi.widget.focusform;}if(!dojo._hasResource["ag.widget.signin"]){dojo._hasResource["ag.widget.signin"]=true;dojo.provide("ag.widget.signin");dojo.declare("ag.widget.signin.SignInLightbox",[agi.classes.Identified],{hidden_node_id:null,bad_form_id:"signin_magic",form_id:null,ff:null,lightbox:null,constructor:function(_3b4,_3b5){this.hidden_node_id=_3b4;this.form_id=_3b5;},show:function(){if(this.lightbox){this.lightbox.show();if(this.ff){this.ff.reset_form();}}else{var _3b6=dojo.byId(this.hidden_node_id);this.lightbox=new ag.widget.Lightbox({node:_3b6,lightboxId:"lightbox",loaderId:"loadingImage",overlayId:"agi-overlay"});if(dojo.byId(this.bad_form_id)){dojo.byId(this.bad_form_id).id=this.form_id;}this.ff=new ag.widget.focusform.FocusForm(this.form_id);try{agx.currentPage.controller.connectTempStorageSignin();}catch(e){}try{agx.currentPage.controller.connectPersStorageSignin();}catch(e){}}return false;},hide:function(){this.lightbox.hide();return false;}});}if(!dojo._hasResource["ag.widget.register"]){dojo._hasResource["ag.widget.register"]=true;dojo.provide("ag.widget.register");ag.widget.register.RegistrationTrigger=function(url,attr){var loc="/register/lb.pd";var _3b7={"width":440,"hideloading":true};if(url){loc=url;}if(attr){_3b7=attr;}this.lightbox=null;var _3b8=this;this.show=function(app,_3b9){var url=loc;if(app){url+="?app="+escape(app)+"&referer="+escape(_3b9);}if(this.lightbox){this.lightbox.show();}else{this.lightbox=new ag.widget.Lightbox({lightboxId:"lightbox",overlayId:"agi-overlay",url:url,width:440,showloader:false});}omniture.swap_vars_and_ping({"s_pageName":loc});};this.hide=function(){this.lightbox.hide();};};ag.widget.register.showCellInfo=function(btn){dojo.byId("cell_info").style.display="block";};ag.widget.register.hideCellInfo=function(btn){dojo.byId("cell_info").style.display="none";};}if(!dojo._hasResource["agi.widget.search"]){dojo._hasResource["agi.widget.search"]=true;dojo.provide("agi.widget.search");agi.widget.search.submit=function submitSearch(_3ba,_3bb,_3bc){if((_3ba==undefined)||(_3ba=="")){_3ba="ag-searchtext";}if(_3bb==undefined){_3bb="ag-searcharea";}if(_3bc==undefined){_3bc="Enter Search Here";}var s=new agi.widget.search.searcher(_3ba,_3bb,_3bc);return s.do_search();};agi.widget.search.searcher=function(_3bd,_3be,_3bf){var _3c0=this;this.searchbox=dojo.byId(_3bd);this.searchpage=dojo.byId(_3be).value;this.err_msg=_3bf;this.do_init=function(){this.attach_events();};this.do_onblur=function(){if(_3c0.searchbox.value==""){_3c0.searchbox.value=_3c0.err_msg;}};this.do_onfocus=function(){if(_3c0.searchbox.value==_3c0.err_msg){_3c0.searchbox.value="";}};this.attach_events=function(){this.searchbox.onblur=this.do_onblur;this.searchbox.onfocus=this.do_onfocus;};this.highlight_search_box=function(){this.searchbox.style.border="2px solid #ff0000";this.searchbox.style.background="#FFDDDD";this.searchbox.value=this.err_msg;this.searchbox.blur();};this.send_to_search_page=function(){var _3c1="";var _3c2=this.searchpage+"?strSearch="+escape(this.searchbox.value);if(dojo.byId("lpage")){_3c1=dojo.byId("lpage").value;_3c2=_3c2+"&lpage="+_3c1;}window.document.location.href=_3c2;};this.do_search=function(){try{if((this.searchbox.value.length<=0)||(this.searchbox.value==this.err_msg)){this.highlight_search_box();}else{this.send_to_search_page();}return false;}catch(e){return false;}};this.do_init();};agi.widget.search.submit_msn=function(_3c3){if(_3c3=="ag"){try{return agi.widget.search.submit("q");}catch(e){return false;}}else{if(_3c3=="msn"){try{document.forms["msn-search"].action="http://www.bing.com/results.aspx";document.forms["msn-search"].submit();}catch(e){return false;}}}};}if(!dojo._hasResource["ag.widget.search"]){dojo._hasResource["ag.widget.search"]=true;dojo.provide("ag.widget.search");ag.widget.search=agi.widget.search;}if(!dojo._hasResource["agi.go.photoworks"]){dojo._hasResource["agi.go.photoworks"]=true;dojo.provide("agi.go.photoworks");agi.go.photoworks.go=function(_3c4){this.partial_url=_3c4;this.email=null;this.ahost=null;this.site=null;this.go=function(){this.clean_url();this.init_environ();this.set_email();this.do_redirect();};this.init_environ=function(){this.ahost=window.location.protocol+"//"+window.location.host;this.environ=(this.ahost.indexOf("www")!=-1)?"www":"beta";this.site=(this.ahost.indexOf("msn")!=-1)?"AG_MSN":"AG";};this.set_email=function(){this.email=agi.cookie.AGCookie.getCookieValue("customer","email");if(!this.email){this.email="";}};this.clean_url=function(){var pu=this.partial_url;pu=pu.replace("^http://www.","");pu=pu.replace(/cb=[^&]*&*/,"");pu=pu.replace(/email=[^&]*&*/,"");this.partial_url=pu;};this.do_redirect=function(){var _3c5="http://"+this.environ+"."+this.partial_url;var _3c6="&cb=PW_"+this.site+"&email="+this.email;var _3c7=_3c5+_3c6;window.location.assign(_3c7);};this.go();};}if(!dojo._hasResource["ag.go.photoworks"]){dojo._hasResource["ag.go.photoworks"]=true;dojo.provide("ag.go.photoworks");ag.go.photoworks=agi.go.photoworks;}if(!dojo._hasResource["agi.go.join"]){dojo._hasResource["agi.go.join"]=true;dojo.provide("agi.go.join");agi.go.join.encodePurl=function(purl){if(purl.indexOf("%")==-1){purl=encodeURIComponent(purl);}return purl;};agi.go.join.decodePurl=function(purl){if(purl.indexOf("%")>-1){purl=decodeURIComponent(purl);}purl=purl.replace(/\/popup\/signin\.pd/,"/index.pd");purl=purl.replace(/\/popup\/signout\.pd/,"/index.pd");return purl;};agi.go.join.go=function(url,purl,_3c8,_3c9,_3ca,intX,intY,_3cb){if(!purl){purl=window.location.href;}if(!_3c8){_3c8="300";}if(!_3c9){_3c9="320";}if(!_3ca){_3ca="joinwin";}if(!intX){intX=0;}if(!intY){intY=0;}if(!_3cb){_3cb=false;}pageindex=-1;questionindex=-1;questionindex=url.indexOf("?");if(url.contains("offer.pd")&&!url.contains("isic_offer.pd")){pageindex=url.indexOf("offer.pd");}else{if(url.contains("announce.pd")){pageindex=url.indexOf("announce.pd");}else{if(url.contains("marketingpop.pd")){pageindex=url.indexOf("marketingpop.pd");}}}purl=agi.go.join.encodePurl(purl);var ma=dojo.byId("ma");var _3cc=dojo.byId("wcMusicOn");var mci=dojo.byId("musicChoiceIndex");if(ma&&ma.value!="nomusic"&&!purl.contains("&ma=")){purl+="|ma:"+ma.value.replace(".mp3","");}if(_3cc){purl+="|wcMusicOn:"+_3cc.value;}if(mci){purl+="|musicChoiceIndex:"+mci.value;}if(url.contains("subscribe.pd")){purl=purl.replace(/\%20/g,"perc20");purl=purl.replace(/\%26/g,"and");url+="&purl="+purl;_3cb=true;}else{if(url.contains("ostatus")){if(url.contains("subs.subsag")){purl=purl.replace(/\%20/g,"+");purl=purl.replace(/\%26/g,"and");}url=url.replace(/ostatus/,"purl="+purl+"&ostatus");}else{if(questionindex==-1){url+="?purl="+purl;}else{url+="&purl="+purl;}}}if(pageindex<questionindex&&!_3cb){var _3cd;if(intX||intY){strWinFeatures="resizable=no,screenX="+intX+",screenY="+intY+",left="+intX+",top="+intY+",scrollbars=no,width="+_3c8+",height="+_3c9;_3cd=window.open(url,_3ca,strWinFeatures);}else{strWinFeatures="resizable=no,scrollbars=no,width="+_3c8+",height="+_3c9;_3cd=window.open(url,_3ca,strWinFeatures);}_3cd.focus();}else{window.document.location.href=url;}};agi.go.join.openOfferPop=function(url,_3ce,_3cf){purl=window.location.href;if(!url){var url="/popup/offer.pd?";if(purl.contains("cnp")){url=url+"cnp=1";}}var _3d0=window.screen.availWidth;var _3d1=window.screen.availHeight;var intW=300;var intH=320;var intX=_3d0-intW;var intY=_3d1-intH;if(_3ce){var _3d2=document.cookie;var pos=_3d2.indexOf(_3ce);if(pos==-1){SECONDS_PER_DAY=86400;myMinTimeOut=SECONDS_PER_DAY*_3cf;myDate=new Date();myDate.setTime(myDate.getTime()+(myMinTimeOut*1000));document.cookie=_3ce+"=true; expires="+myDate.toGMTString();agi.go.join.go(url,0,0,0,0,intX,0);}}else{agi.go.join.go(url,0,0,0,0,intX,0);}};}if(!dojo._hasResource["ag.go.join"]){dojo._hasResource["ag.go.join"]=true;dojo.provide("ag.go.join");ag.go.join=agi.go.join;}if(!dojo._hasResource["agi.go.popup"]){dojo._hasResource["agi.go.popup"]=true;dojo.provide("agi.go.popup");var glbStdFeatures="width=400,height=320,resizable=yes,scrollbars=yes,toolbar=no";var glbStdFeaturesExcSize="resizable=yes,scrollbars=yes,toolbar=no";OpenNewWindow=function(url,_3d3,_3d4,bar){var _3d5=window.open(url,"descr","toolbar=no,location=no,directories=no,status=no,menubar=no,resizable=no,copyhistory=no,width="+_3d3+",height="+_3d4+",scrollbars="+bar);};agi.go.popup.open=function(_3d6){var _3d7={url:"/",name:"agipopup",toolbar:"no",location:"no",directories:"no",status:"no",menubar:"no",resizable:"no",copyhistory:"no",width:300,height:300,scrollbars:"no"};dojo.mixin(_3d7,_3d6);var _3d8=window.open(_3d7.url,_3d7.name,"toolbar="+_3d7.toolbar+","+"location="+_3d7.location+","+"status="+_3d7.status+","+"resizable="+_3d7.resizable+","+"copyhistory="+_3d7.copyhistory+","+"width="+_3d7.width+","+"height="+_3d7.height+","+"scrollbars="+_3d7.scrollbars);return _3d8;};agi.go.popup.closeAndGo=function(url){window.opener.location.href=url;window.close();};openAddressPop=function(){var _3d9=window.open(addURL,"AddressBook",glbStdFeatures);_3d9.focus();};openFavoritesPop=function(){var _3da=window.open(favLink,"AddFavorite",glbStdFeatures);_3da.focus();};openScrapbookPop=function(){var _3db=window.open(scrapLink,"SaveScrap",glbStdFeatures);_3db.focus();};openPrintPop=function(_3dc){var _3dd=window.open(ahost+"/printpopup.pd?productNumber="+prodNumber,"Print","toolbar=no,scrollbar=no,width=400,height=400,resizable");};openViewPhotoPop=function(_3de){var _3df=window.open(ahost+"/viewphoto.pd?"+photoVars,"ViewPhoto","toolbar=no,scrollbar=no,width=400,height=400,resizable");};openInvVcsPop=function(){var _3e0=window.open("addtocalendar.pd?e="+eventNum+"&i="+itemNum+"&m="+memberNum,"Instructions","width=430,height=440,top=25,left=25,resizable=1,scrollbars=1");_3e0.focus();};function openAddressPop(){aWindow=window.open(addURL,"AddressBook",glbStdFeatures);aWindow.focus();};openAddressPop2=function(w,h){if(!w){w=562;}if(!h){h=460;}var _3e1="width="+w+",height="+h+",resizable=yes,scrollbars=yes,toolbar=no";aWindow=window.open(addURL,"AddressBook",_3e1);aWindow.focus();};openMessagePop=function(){aWindow=window.open(ahost+"/share/message.pd?path="+pathNumber,"SuggestedMessages",glbStdFeatures);aWindow.focus();};openMessagePop2=function(){aWindow=window.open(ahost+"/suggest/popup.pd?"+nav,"SuggestedMessages",glbStdFeatures);aWindow.focus();};openRecipePop=function(){rWindow=window.open(ahost+"/share/recipe.pd?path="+pathNumber+"&prodnum="+productNumber,"RecipeGreeting",glbStdFeatures);rWindow.focus();};openGiftPop=function(){giftWindow=window.open(partnerUrl,"GiftPickup",config="width=540,height=320,dependent=1,scrollbars=yes,resizable=yes");giftWindow.focus();};addAllFromQuickList=function(){intQLLength=document.orderForm.quicklist.length;for(i=0;i<intQLLength;i++){document.orderForm.quicklist.options[i].selected=true;}};}if(!dojo._hasResource["ag.go.popup"]){dojo._hasResource["ag.go.popup"]=true;dojo.provide("ag.go.popup");ag.go.popup=agi.go.popup;ag.go.popup.open=function(_3e2){var _3e3={url:"/",name:"agpopup",toolbar:"no",location:"no",directories:"no",status:"no",menubar:"no",resizable:"no",copyhistory:"no",width:300,height:300,scrollbars:"no"};dojo.mixin(_3e3,_3e2);var _3e4=window.open(_3e3.url,_3e3.name,"toolbar="+_3e3.toolbar+","+"location="+_3e3.location+","+"status="+_3e3.status+","+"resizable="+_3e3.resizable+","+"copyhistory="+_3e3.copyhistory+","+"width="+_3e3.width+","+"height="+_3e3.height+","+"scrollbars="+_3e3.scrollbars);return _3e4;};ag.go.popup.livechat=function(){dojo.publish("ag/livechat/show",[{"channel":"help"}]);return false;};ag.go.popup.newbrowser=function(_3e5){settings={url:"/",name:"agoutoffacebook",width:"1040",height:"700",scrollbars:"yes",resizable:"yes",fullscreen:"yes"};dojo.mixin(settings,_3e5);ag.go.popup.open(settings);return false;};ag.go.popup.feedback=function(_3e6){settings={url:ahost+"/feedback",name:"agfeedback",width:610,height:580,scrollbars:"yes"};dojo.mixin(settings,_3e6);ag.go.popup.open(settings);return false;};ag.go.popup.closeAndGo=function(url){window.opener.location.href=url;window.close();};}if(!dojo._hasResource["agi.popaway"]){dojo._hasResource["agi.popaway"]=true;dojo.provide("agi.popaway");agi.popaway.context={blnDoPopAway:true,BLN_POPAWAY:true,popURL:"",popH:420,popW:500,popCN:"",popCD:7,popPCT:100,popSCROLL:"yes"};agi.popaway.processOnUnload=function(){setTimeout("agi.popaway.delay()",500);if(agi.popaway.context.blnDoPopAway&&agi.popaway.context.BLN_POPAWAY){agi.popaway.popAway();}};agi.popaway.processOnClick=function(){agi.popaway.setDoPopAway(false);setTimeout("agi.popaway.delay()",500);};agi.popaway.setDoPopAway=function(_3e7){agi.popaway.context.blnDoPopAway=_3e7;};agi.popaway.delay=function(){return true;};agi.popaway.popAway=function(URL,_3e8,_3e9,_3ea,_3eb,_3ec,_3ed){if(URL){agi.popaway.context.popURL=URL;}if(_3e8){agi.popaway.context.popH=_3e8;}if(_3e9){agi.popaway.context.popW=_3e9;}if(_3ea){agi.popaway.context.popCN=_3ea;}if(_3eb!=undefined){agi.popaway.context.popCD=_3eb;}if(_3ec){agi.popaway.context.popPCT=_3ec;}if(_3ed){agi.popaway.context.popSCROLL=_3ed;}var _3ee=Math.round(Math.random()*100);var _3ef="resizeable=yes,scrollbars="+agi.popaway.context.popSCROLL+",width="+agi.popaway.context.popW+",height="+agi.popaway.context.popH;if(_3ee<=agi.popaway.context.popPCT){if(agi.popaway.context.popCN){var _3f0=document.cookie;var pos=_3f0.indexOf(agi.popaway.context.popCN);var _3f1="";if(pos==-1){if(agi.popaway.context.popCD){var _3f2=86400;var _3f3=_3f2*agi.popaway.context.popCD;var _3f4=new Date();_3f4.setTime(_3f4.getTime()+(_3f3*1000));_3f1=" expires="+_3f4.toGMTString()+";";}document.cookie=agi.popaway.context.popCN+"=true;"+_3f1+" path=/;";popAwayWin=window.open(agi.popaway.context.popURL,"popaway",_3ef);}}else{popAwayWin=window.open(agi.popaway.context.popURL,"popaway",_3ef);}}};agi.popaway.addHandlers=function(URL,_3f5,_3f6,_3f7,_3f8,_3f9,_3fa){if(URL){agi.popaway.context.popURL=URL;}if(_3f5){agi.popaway.context.popH=_3f5;}if(_3f6){agi.popaway.context.popW=_3f6;}if(_3f7){agi.popaway.context.popCN=_3f7;}if(_3f8!=undefined){agi.popaway.context.popCD=_3f8;}if(_3f9){agi.popaway.context.popPCT=_3f9;}if(_3fa){agi.popaway.context.popSCROLL=_3fa;}if(dojo.isIE){dojo.connect(document,"onclick",agi.popaway,"processOnClick");dojo.connect(document,"onkeydown",agi.popaway,"processOnClick");window.onunload=agi.popaway.processOnUnload;}else{dojo.connect(window,"onclick",agi.popaway,"processOnClick");dojo.connect(window,"onkeydown",agi.popaway,"processOnClick");dojo.addOnUnload(agi.popaway.processOnUnload);}};agi.popaway.checkReferrer=function(_3fb,URL,_3fc,_3fd,_3fe,_3ff){if(document.referrer.indexOf(_3fb)!=-1){agi.popaway.popAway(URL,_3fc,_3fd,_3fe,_3ff);}};}if(!dojo._hasResource["ag.popaway"]){dojo._hasResource["ag.popaway"]=true;dojo.provide("ag.popaway");ag.popaway=agi.popaway;}if(!dojo._hasResource["ag.widget.quickshop"]){dojo._hasResource["ag.widget.quickshop"]=true;dojo.provide("ag.widget.legacy_quickshop");if(!ag.widget.quickshop){ag.widget.quickshop={};}(function(){var qs=ag.widget.quickshop;var d=dojo;qs.toString=function(){return "AGLegacyQuickshop";};qs.Quickshop=function(id){this.toString=function(){return "[LegacyQuickshop]";};if(agx.currentPage.hasEndeca){return;}var me=this;this.container=d.byId(id);this.headings={"occasion":"I want to send a...","recipient":"To...","sentiment":"And I want it to be..."};this.defaults={};this.check_defaults=true;this.chosen_count=0;this.last_recipient="";this.last_sentiment="";this.do_onload=function(){d.connect(d.byId("qs_occasion"),"onchange",this,"do_onchange");d.connect(d.byId("qs_recipient"),"onchange",this,"do_onchange");d.connect(d.byId("qs_sentiment"),"onchange",this,"do_onchange");this.parse_url();var _400=d.query(".submit",this.container)[0];_400.onclick=function(){me.submit_search();};this.build_quickshop();this.check_defaults=false;};this.update_occasion=function(val){var _401=qs_data.occasions;for(o in _401){occasion=_401[o];if(occasion.name==val){this.occasion=occasion;var _402=occasion.recipients;var _403=occasion.sentiments;this.build_dropdown("sentiment",_403);this.build_dropdown("recipient",_402);this.build_dropdown("occasion",_401,val);return;}}};this.update_recipient=function(val){this.last_recipient=val;if(val==""){this.build_dropdown("sentiment",this.occasion.sentiments,this.last_sentiment);this.chosen_count--;}if(d.byId("qs_recipient").value!=val){d.byId("qs_recipient").value=val;}if(d.byId("qs_sentiment").value!=""&&this.chosen_count<3){this.chosen_count++;return;}for(r in this.occasion.recipients){recipient=this.occasion.recipients[r];if(recipient.name==val){var _404=recipient.sentiments;this.build_dropdown("sentiment",_404);}}this.chosen_count=2;};this.update_sentiment=function(val){this.last_sentiment=val;if(val==""){this.build_dropdown("recipient",this.occasion.recipients,this.last_recipient);this.chosen_count--;}if(d.byId("qs_sentiment").value!=val){d.byId("qs_sentiment").value=val;}if(d.byId("qs_recipient").value!=""&&this.chosen_count<3){this.chosen_count++;return;}for(s in this.occasion.sentiments){sentiment=this.occasion.sentiments[s];if(sentiment.name==val){var _405=sentiment.recipients;this.build_dropdown("recipient",_405);}}this.chosen_count=2;};this.build_quickshop=function(){this.occasions=qs_data.occasions;this.occasion=qs_data.occasions[1];if(this.defaults.occasion!=null){this.update_occasion(this.defaults.occasion);}else{this.update_occasion(qs_data.occasions[0].name);}if(this.defaults.recipient!=null){this.update_recipient(this.defaults.recipient);}if(this.defaults.sentiment!=null){this.update_sentiment(this.defaults.sentiment);}this.chosen_count=1;};this.build_dropdown=function(_406,unit,_407,_408){var _409=d.byId("qs_"+_406);this.add_options(unit,_409,_406,_407,_408,true);};this.add_options=function(unit,_40a,_40b,_40c,_40d){this.remove_options(_40a);_40d=_40d===undefined?true:_40d;var _40e=0;if(_40d&&(_40a.id=="qs_recipient"||_40a.id=="qs_sentiment")){var _40f=_40b.charAt(0).toUpperCase()+_40b.substring(1);_40f=_40f.replace("Sentiment","Style");this._add_option("[Choose "+_40f+"]","",_40a,_40e);_40e+=1;}for(var i=0;i<unit.length;i++){var _410=false;if(_40c!=undefined){_410=unit[i].name==_40c;}this._add_option(unit[i].name,unit[i].name,_40a,i+_40e,_410);}};this._add_option=function(text,_411,_412,idx,_413){var _414=document.createElement("option");_414.text=text.toLowerCase();_414.value=_411;if(_412.id=="qs_occasion"){_414.text=_414.text+" ecard";}if(_412.options.add){_412.options.add(_414,idx);}else{_412.appendChild(_414);}if(_413){_412.options.selectedIndex=idx;}};this.remove_options=function(_415){for(var i=_415.options.length-1;i>=0;i--){_415.remove(i);}_415.options.length=0;};this.replace_options=function(){var _416=qs.get_group();var _417=d.byId("qs_sentiment");qs.remove_options(_417);var _418=_416.sentiments;qs.add_options(_418,_417,"sentiment");_417=d.byId("qs_recipient");qs.remove_options(_417);var _419=_416.recipients;qs.add_options(_419,_417,"recipient");};this.insert_select=function(_41a,_41b){var br=ag.dom.make_node("br",{});d.dom.prependChild(br,this.container);d.dom.prependChild(_41a,this.container);};this.do_onchange=function(e){var val=e.target.value;switch(e.target.id){case "qs_occasion":this.update_occasion(val);this.chosen_count=1;break;case "qs_sentiment":this.update_sentiment(val);break;case "qs_recipient":this.update_recipient(val);break;}};this.parse_url=function(){var _41c=window.location.search.replace("?","").split("&");for(var i=0;i<_41c.length;i++){if(_41c[i].startswith("qs_")){var nvp=_41c[i].split("=");if(nvp.length!=2){continue;}this.defaults[nvp[0].replace("qs_","")]=unescape(nvp[1]);}}};this.submit_search=function(){var ds=this.container.getElementsByTagName("select");var u=ahost+"/ecards/quickshop.pd?lpage=quickshop&";var p="";for(var i=0;i<ds.length;i++){var d=ds[i];var _41d=d.options[d.selectedIndex].value;p+=_41d?d.id+"="+escape(_41d)+"&":"";}if(!p){alert("Please make a selection first.");return;}p=p.replace(/&$/,"");u=u+p;window.location=u;};this.do_onload();};})();}if(!dojo._hasResource["ag.pile.shim"]){dojo._hasResource["ag.pile.shim"]=true;dojo.provide("ag.pile.shim");ag.pile.shim.toString=function(){return "SHIMTASTIC";};email_focus=agi.permissions.email_focus;newsletter_signup=agi.permissions.newsletter_signup;debounce=ag.util.debounce;toggle_block=ag.util.toggle_block;addHiddenInputElement=ag.dom.addHiddenInputElement;turbowipe=ag.widget.wiper.turbowipe;dojo.addOnLoad(ag.widget.myagdrop.init);FinditLightbox=ag.widget.findit.FinditLightbox;SignInLightbox=ag.widget.signin.SignInLightbox;RegistrationTrigger=ag.widget.register.RegistrationTrigger;showCellInfo=ag.widget.register.showCellInfo;hideCellInfo=ag.widget.register.hideCellInfo;submitSearch=function(){if(agx.currentPage.controller){if(agx.currentPage.controller.searchSubmit){return agx.currentPage.controller.searchSubmit(arguments);}}else{return ag.widget.search.submit(arguments);}};submitMSNSearch=function(_41e){if(agx.currentPage.controller){if(agx.currentPage.controller.searchSubmitMSN){return agx.currentPage.controller.searchSubmitMSN(_41e);}}else{return ag.widget.search.submit_msn(arguments);}};agi_to_pw=ag.go.photoworks.go;openJoin=ag.go.join.go;processOnClick=ag.popaway.processOnClick;quickshop=ag.widget.quickshop.Quickshop;getCustomerAge=agi.cookie.getCustomerAge;getCustomerGender=agi.cookie.getCustomerGender;getCustomerEmail=agi.cookie.getCustomerEmail;getCustomerNumber=agi.cookie.getMemNum;}if(!dojo._hasResource["ag.requester"]){dojo._hasResource["ag.requester"]=true;dojo.provide("ag.requester");ag.requester=agi.requester;}if(!dojo._hasResource["agi.flash.ufo"]){dojo._hasResource["agi.flash.ufo"]=true;dojo.provide("agi.flash.ufo");UFO={req:["movie","width","height","majorversion","build"],opt:["play","loop","menu","quality","scale","salign","wmode","bgcolor","base","flashvars","devicefont","allowscriptaccess","seamlesstabbing"],optAtt:["id","name","align"],optExc:["swliveconnect"],ximovie:"ufo.swf",xiwidth:"215",xiheight:"138",ua:navigator.userAgent.toLowerCase(),pluginType:"",fv:[0,0],foList:[],create:function(FO,id,_41f){if(!UFO.uaHas("w3cdom")||UFO.uaHas("ieMac")){return;}UFO.getFlashVersion();UFO.foList[id]=UFO.updateFO(FO);if(typeof _41f=="undefined"||_41f!="true"){UFO.createCSS("#"+id,"visibility:hidden;");}UFO.domLoad(id,_41f);},updateFO:function(FO){if(typeof FO.xi!="undefined"&&FO.xi=="true"){if(typeof FO.ximovie=="undefined"){FO.ximovie=UFO.ximovie;}if(typeof FO.xiwidth=="undefined"){FO.xiwidth=UFO.xiwidth;}if(typeof FO.xiheight=="undefined"){FO.xiheight=UFO.xiheight;}}FO.mainCalled=false;return FO;},domLoad:function(id,_420){if(typeof _420!="undefined"&&_420=="true"){UFO.main(id);}else{var _421=setInterval(function(){if((document.getElementsByTagName("body")[0]!=null||document.body!=null)&&document.getElementById(id)!=null){UFO.main(id);clearInterval(_421);}},250);if(typeof document.addEventListener!="undefined"){document.addEventListener("DOMContentLoaded",function(){UFO.main(id);clearInterval(_421);},null);}}},main:function(id){var _422=UFO.foList[id];if(_422.mainCalled){return;}UFO.foList[id].mainCalled=true;document.getElementById(id).style.visibility="hidden";if(UFO.hasRequired(id)){if(UFO.hasFlashVersion(parseInt(_422.majorversion,10),parseInt(_422.build,10))){if(typeof _422.setcontainercss!="undefined"&&_422.setcontainercss=="true"){UFO.setContainerCSS(id);}UFO.writeSWF(id);}else{if(_422.xi=="true"&&UFO.hasFlashVersion(6,65)){UFO.createDialog(id);}}}document.getElementById(id).style.visibility="visible";},createCSS:function(_423,_424){var _425=document.getElementsByTagName("head")[0];var _426=UFO.createElement("style");if(!UFO.uaHas("ieWin")){_426.appendChild(document.createTextNode(_423+" {"+_424+"}"));}_426.setAttribute("type","text/css");_426.setAttribute("media","screen");_425.appendChild(_426);if(UFO.uaHas("ieWin")&&document.styleSheets&&document.styleSheets.length>0){var _427=document.styleSheets[document.styleSheets.length-1];if(typeof _427.addRule=="object"){_427.addRule(_423,_424);}}},setContainerCSS:function(id){var _428=UFO.foList[id];var _429=/%/.test(_428.width)?"":"px";var _42a=/%/.test(_428.height)?"":"px";UFO.createCSS("#"+id,"width:"+_428.width+_429+"; height:"+_428.height+_42a+";");if(_428.width=="100%"){UFO.createCSS("body","margin-left:0; margin-right:0; padding-left:0; padding-right:0;");}if(_428.height=="100%"){UFO.createCSS("html","height:100%; overflow:hidden;");UFO.createCSS("body","margin-top:0; margin-bottom:0; padding-top:0; padding-bottom:0; height:100%;");}},createElement:function(el){return (UFO.uaHas("xml")&&typeof document.createElementNS!="undefined")?document.createElementNS("http://www.w3.org/1999/xhtml",el):document.createElement(el);},createObjParam:function(el,_42b,_42c){var _42d=UFO.createElement("param");_42d.setAttribute("name",_42b);_42d.setAttribute("value",_42c);el.appendChild(_42d);},uaHas:function(ft){var _42e=UFO.ua;switch(ft){case "w3cdom":return (typeof document.getElementById!="undefined"&&typeof document.getElementsByTagName!="undefined"&&(typeof document.createElement!="undefined"||typeof document.createElementNS!="undefined"));case "xml":var _42f=document.getElementsByTagName("meta");var _430=_42f.length;for(var i=0;i<_430;i++){if(/content-type/i.test(_42f[i].getAttribute("http-equiv"))&&/xml/i.test(_42f[i].getAttribute("content"))){return true;}}return false;case "ieMac":return /msie/.test(_42e)&&!/opera/.test(_42e)&&/mac/.test(_42e);case "ieWin":return /msie/.test(_42e)&&!/opera/.test(_42e)&&/win/.test(_42e);case "gecko":return /gecko/.test(_42e)&&!/applewebkit/.test(_42e);case "opera":return /opera/.test(_42e);case "safari":return /applewebkit/.test(_42e);default:return false;}},getFlashVersion:function(){if(UFO.fv[0]!=0){return;}if(navigator.plugins&&typeof navigator.plugins["Shockwave Flash"]=="object"){UFO.pluginType="npapi";var _431=navigator.plugins["Shockwave Flash"].description;if(typeof _431!="undefined"){_431=_431.replace(/^.*\s+(\S+\s+\S+$)/,"$1");var _432=parseInt(_431.replace(/^(.*)\..*$/,"$1"),10);var _433=/r/.test(_431)?parseInt(_431.replace(/^.*r(.*)$/,"$1"),10):0;UFO.fv=[_432,_433];}}else{if(window.ActiveXObject){UFO.pluginType="ax";try{var _434=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var _434=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");UFO.fv=[6,0];_434.AllowScriptAccess="always";}catch(e){if(UFO.fv[0]==6){return;}}try{var _434=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(typeof _434=="object"){var _431=_434.GetVariable("$version");if(typeof _431!="undefined"){_431=_431.replace(/^\S+\s+(.*)$/,"$1").split(",");UFO.fv=[parseInt(_431[0],10),parseInt(_431[2],10)];}}}}},hasRequired:function(id){var _435=UFO.req.length;for(var i=0;i<_435;i++){if(typeof UFO.foList[id][UFO.req[i]]=="undefined"){return false;}}return true;},hasFlashVersion:function(_436,_437){return (UFO.fv[0]>_436||(UFO.fv[0]==_436&&UFO.fv[1]>=_437))?true:false;},writeSWF:function(id){var _438=UFO.foList[id];var _439=document.getElementById(id);if(UFO.pluginType=="npapi"){if(UFO.uaHas("gecko")||UFO.uaHas("xml")){while(_439.hasChildNodes()){_439.removeChild(_439.firstChild);}var _43a=UFO.createElement("object");_43a.setAttribute("type","application/x-shockwave-flash");_43a.setAttribute("data",_438.movie);_43a.setAttribute("width",_438.width);_43a.setAttribute("height",_438.height);var _43b=UFO.optAtt.length;for(var i=0;i<_43b;i++){if(typeof _438[UFO.optAtt[i]]!="undefined"){_43a.setAttribute(UFO.optAtt[i],_438[UFO.optAtt[i]]);}}var _43c=UFO.opt.concat(UFO.optExc);var _43b=_43c.length;for(var i=0;i<_43b;i++){if(typeof _438[_43c[i]]!="undefined"){UFO.createObjParam(_43a,_43c[i],_438[_43c[i]]);}}_439.appendChild(_43a);}else{var _43d="";var _43c=UFO.opt.concat(UFO.optAtt).concat(UFO.optExc);var _43b=_43c.length;for(var i=0;i<_43b;i++){if(typeof _438[_43c[i]]!="undefined"){_43d+=" "+_43c[i]+"=\""+_438[_43c[i]]+"\"";}}_439.innerHTML="<embed type=\"application/x-shockwave-flash\" src=\""+_438.movie+"\" width=\""+_438.width+"\" height=\""+_438.height+"\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\""+_43d+"></embed>";}}else{if(UFO.pluginType=="ax"){var _43e="";var _43b=UFO.optAtt.length;for(var i=0;i<_43b;i++){if(typeof _438[UFO.optAtt[i]]!="undefined"){_43e+=" "+UFO.optAtt[i]+"=\""+_438[UFO.optAtt[i]]+"\"";}}var _43f="";var _43b=UFO.opt.length;for(var i=0;i<_43b;i++){if(typeof _438[UFO.opt[i]]!="undefined"){_43f+="<param name=\""+UFO.opt[i]+"\" value=\""+_438[UFO.opt[i]]+"\" />";}}var _440=window.location.protocol=="https:"?"https:":"http:";_439.innerHTML="<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\""+_43e+" width=\""+_438.width+"\" height=\""+_438.height+"\" codebase=\""+_440+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+_438.majorversion+",0,"+_438.build+",0\"><param name=\"movie\" value=\""+_438.movie+"\" />"+_43f+"</object>";if(_438["id"]){window[_438["id"]]=document.getElementById(_438["id"]);}}}},createDialog:function(id){var _441=UFO.foList[id];UFO.createCSS("html","height:100%; overflow:hidden;");UFO.createCSS("body","height:100%; overflow:hidden;");UFO.createCSS("#xi-con","position:absolute; left:0; top:0; z-index:1000; width:100%; height:100%; background-color:#fff; filter:alpha(opacity:75); opacity:0.75;");UFO.createCSS("#xi-dia","position:absolute; left:50%; top:50%; margin-left: -"+Math.round(parseInt(_441.xiwidth,10)/2)+"px; margin-top: -"+Math.round(parseInt(_441.xiheight,10)/2)+"px; width:"+_441.xiwidth+"px; height:"+_441.xiheight+"px;");var _442=document.getElementsByTagName("body")[0];var _443=UFO.createElement("div");_443.setAttribute("id","xi-con");var _444=UFO.createElement("div");_444.setAttribute("id","xi-dia");_443.appendChild(_444);_442.appendChild(_443);var _445=window.location;if(UFO.uaHas("xml")&&UFO.uaHas("safari")){var _446=document.getElementsByTagName("title")[0].firstChild.nodeValue=document.getElementsByTagName("title")[0].firstChild.nodeValue.slice(0,47)+" - Flash Player Installation";}else{var _446=document.title=document.title.slice(0,47)+" - Flash Player Installation";}var _447=UFO.pluginType=="ax"?"ActiveX":"PlugIn";var _448=typeof _441.xiurlcancel!="undefined"?"&xiUrlCancel="+_441.xiurlcancel:"";var _449=typeof _441.xiurlfailed!="undefined"?"&xiUrlFailed="+_441.xiurlfailed:"";UFO.foList["xi-dia"]={movie:_441.ximovie,width:_441.xiwidth,height:_441.xiheight,majorversion:"6",build:"65",flashvars:"MMredirectURL="+_445+"&MMplayerType="+_447+"&MMdoctitle="+_446+_448+_449};UFO.writeSWF("xi-dia");},expressInstallCallback:function(){var _44a=document.getElementsByTagName("body")[0];var _44b=document.getElementById("xi-con");_44a.removeChild(_44b);UFO.createCSS("body","height:auto; overflow:auto;");UFO.createCSS("html","height:auto; overflow:auto;");},cleanupIELeaks:function(){var _44c=document.getElementsByTagName("object");var _44d=_44c.length;for(var i=0;i<_44d;i++){_44c[i].style.display="none";for(var x in _44c[i]){if(typeof _44c[i][x]=="function"){_44c[i][x]=null;}}}}};if(typeof window.attachEvent!="undefined"&&UFO.uaHas("ieWin")){window.attachEvent("onunload",UFO.cleanupIELeaks);}}if(!dojo._hasResource["ag.flash.ufo"]){dojo._hasResource["ag.flash.ufo"]=true;dojo.provide("ag.flash.ufo");ag.flash.ufo=agi.flash.ufo;}if(!dojo._hasResource["ag.classes.Identified"]){dojo._hasResource["ag.classes.Identified"]=true;dojo.provide("ag.classes.Identified");ag.classes.Identified=agi.classes.Identified;}if(!dojo._hasResource["agi.classes.Adopter"]){dojo._hasResource["agi.classes.Adopter"]=true;dojo.provide("agi.classes.Adopter");dojo.declare("agi.classes.Adopter",[agi.classes.Identified],{constructor:function(_44e){if(dojo.isObject(_44e)){dojo.mixin(this,_44e);this.postMixInProperties();}},postMixInProperties:function(){return;}});}if(!dojo._hasResource["ag.classes.Adopter"]){dojo._hasResource["ag.classes.Adopter"]=true;dojo.provide("ag.classes.Adopter");ag.classes.Adopter=agi.classes.Adopter;}if(!dojo._hasResource["ag.cookie._base"]){dojo._hasResource["ag.cookie._base"]=true;dojo.provide("ag.cookie._base");ag.cookie=agi.cookie;ag.cookie.AGCookie=ag.cookie.AGICookie;}if(!dojo._hasResource["ag.cookie"]){dojo._hasResource["ag.cookie"]=true;dojo.provide("ag.cookie");}if(!dojo._hasResource["agi.knotice.KnoticeCookie"]){dojo._hasResource["agi.knotice.KnoticeCookie"]=true;dojo.provide("agi.knotice.KnoticeCookie");dojo.declare("agi.knotice.KnoticeCookie",[ag.classes.Identified,ag.classes.Adopter],{KEY:"ktid",constructor:function(){},read:function(_44f){if(!_44f){_44f="";}var _450=ag.cookie.MagicCookie.getCookieValue(this.KEY);if(_450==null){_450=_44f;}return _450;},set:function(_451){ag.cookie.MagicCookie.setCookieValue(this.KEY,_451,false);}});}if(!dojo._hasResource["ag.base64"]){dojo._hasResource["ag.base64"]=true;dojo.provide("ag.base64");ag.base64=agi.base64;}if(!dojo._hasResource["agi.segmentation.SegmentCookie"]){dojo._hasResource["agi.segmentation.SegmentCookie"]=true;dojo.provide("agi.segmentation.SegmentCookie");dojo.declare("agi.segmentation.SegmentCookie",[agi.classes.Identified,agi.classes.Adopter],{NON_MEMBER_DEFAULT:101,KEY:"segments",FROZEN_TREATMENTS:[184,185,186,203,204,207,208,217,218,219,235,236,237,238,240,241,242,244,245,246,247,248,249],constructor:function(){},read:function(){var _452=dojo.fromJson(agi.cookie.MagicCookie.getCookieValue(this.KEY));return _452;},set:function(_453,_454){if(!_454){_454=false;}var _455=dojo.fromJson(agi.cookie.MagicCookie.getCookieValue(this.KEY));if(_455==null){_455={};}for(key in _453){if(key.indexOf("cs")==0&&key.indexOf("cs9")!=0){if(_453[key]==this.NON_MEMBER_DEFAULT&&_455[key]>this.NON_MEMBER_DEFAULT){_453[key]=_455[key];}}if(!_454&&(key=="cs2"&&this.FROZEN_TREATMENTS.indexOf(_455[key])!=-1)){_453[key]=_455[key];}}dojo.mixin(_455,_453);agi.cookie.MagicCookie.setCookieValue(this.KEY,dojo.toJson(_455),false);}});}if(!dojo._hasResource["agi.knotice._base"]){dojo._hasResource["agi.knotice._base"]=true;dojo.provide("agi.knotice._base");agx.currentPage.other_ccs=["csga34597","csga16291","csga16280","csga16505","csma16918","csma16919","csma16920","csma16930","csya16619","csya16620","csya16621","csya16631","csga34601","csga34520","csga16275","csga16331","csma16952","csma16953","csma16954","csma16955","csya16653","csya16654","csya16655","csya16656","csga34600","csga16298","csga16277","csma16990","csma16991","csma16992","csma16993","csya16691","csya16692","csya16693","csya16694","csga16293","csga16276","csga16332","csma16939","csma16972","csma16973","csya16640","csya16673","csya16674","csga34563","csga16302","csga16270","csga16326","csma17028","csma17029","csma17030","csma17031","csya16729","csya16730","csya16731","csya16732","csga34591","csga16506","csga16354","csga34570","csma17106","csma16851","csma16852","csya16808","csya16551","csya16552","csga34610","csga16294","csga16274","csga16330","csma16944","csma16945","csma16946","csya16645","csya16646","csya16647","csga34593","csga16285","csga16255","csga16314","csma16855","csma16856","csma16857","csma16860","csma16858","csma16859","csya16256","csya16568","csya16557","csya16560","csya16558","csya16559","csga34594","csga16289","csga16262","csga16320","csma16862","csma16863","csma16864","csma16867","csma16865","csma16866","csya16562","csya16563","csya16564","csya16567","csya16565","csya16566","csga34612","csga34565","csga34522","csga16304","csga34586","csga34589","csga34581","csga34585","csma16949","csma17043","csma17044","csma16900","csma16901","csya16650","csya16744","csya16745","csya16601","csya16602","csga34559","csga16300","csga16267","csga16323","csma17003","csma17004","csma16999","csma17002","csma17000","csma17001","csya16704","csya16705","csya16700","csya16703","csya16701","csya16702","csga34568","csga16308","csga16272","csga16328","csga28317","csma17050","csma17051","csma17052","csma17055","csma17053","csma17054","csya16751","csya16752","csya16753","csya16756","csya16754","csya16755","csga34562","csga16260","csga16319","csma17017","csma17018","csya16718","csya16719"];agx.currentPage.free_ec_ccs=["csga34571","csga16311","csga28306","csga16316","csga16334","csga28321","csga16312","csga28307","csma16931","csma28425","csma16932","csma28426","csma16935","csma16937","csya16632","csya28380","csya16633","csya28381","csya16636","csya16638"];agx.currentPage.content_ccs=["csga16509","csga16510","csga16507","csga28324","csga28316"];agi.knotice.init=function(){if(typeof (knotice)=="undefined"||!agx.currentPage.knotice){dojo.query("[class*='knotice-zone']").forEach(function(node,_456,_457){if(node.style.visibility=="hidden"){dojo.style(node,{visibility:"visible"});}});}else{var _458={apiHost:"agweb.knotice.com",timeout:3000};try{var _459=ag.cookie.MagicCookie.getCookieValue("prevlog")*1;}catch(e){var _459=0;}var _45a=ag.cookie.MagicCookie.getCookieValue("sid")==agi.cookie.MagicCookie.getCookieValue("psid");_45a=_45a&&(_459!=1);var _45b=ag.cookie.MagicCookie.getCookieValue("lastaction");var _45c=(dojo.isIE>0)||(dojo.isFF>0);var _45d=ag.cookie.MagicCookie.getCookieValue("lasttrigger");var _45e=ag.cookie.MagicCookie.getCookieValue("dbtreatments");var cmpn=ag.cookie.MagicCookie.getCookieValue("cmpn");var c=ag.base64.decode(cmpn);var map=ag.cookie.NVP.toMap(c,"&","=");var _45f=map["cn"];var _460=0;var _461=(ag.cookie.AGCookie.getCookieValue("customer","status")==3);if(dojo.indexOf(agx.currentPage.other_ccs,_45f)!=-1){_460=2;}else{if(dojo.indexOf(agx.currentPage.free_ec_ccs,_45f)!=-1){_460=1;}else{if(dojo.indexOf(agx.currentPage.content_ccs,_45f)!=-1){_460=3;}}}if(_45e==null){_45e=0;}var _462={"Visitor Information.IsMember":_461,"Visitor Information.DBTreatmentID":_45e,"Visitor Information.freeTBCampCode":_460,"Visitor Information.FirstTimeVisitor":_45a,"Visitor Information.IsIEorFirefox":_45c,"Visitor Information.LastAction":_45b,"Visitor Information.LastTrig":_45d};var path=document.location.pathname;if(path.charAt(0)!="/"){path="/"+path;}var _463=document.location.host.replace(/^(stage|work|dev|www)\d*/,"$1").replace(/:\d+$/,"");if(path=="/"){_458.forceUrl=document.location.protocol+"//"+_463+"/index.pd"+document.location.search+document.location.hash;}else{_458.forceUrl=document.location.protocol+"//"+_463+document.location.pathname+document.location.search+document.location.hash;}var _464=ag.cookie.AGCookie.getCookie("KNOveride");if(_464!=null){_458.forceTargetPageID=_464;}knotice.init(_458,_462,agi.knotice.replace);}};agi.knotice.replace=function(data){if(!data){return;}if(data=="default"){data=101;}var _465=new agi.knotice.KnoticeCookie();_465.set(data);dojo.publish("agi/knotice/loaded");};}if(!dojo._hasResource["agi.knotice"]){dojo._hasResource["agi.knotice"]=true;dojo.provide("agi.knotice");}if(!dojo._hasResource["agi.ovoid.Konami"]){dojo._hasResource["agi.ovoid.Konami"]=true;dojo.provide("agi.ovoid.Konami");dojo.declare("agi.ovoid.Konami",[agi.classes.Identified],{kkeys:null,code:"38,38,40,40,37,39,37,39,66,65,13",handles:null,callback:null,once:true,constructor:function(_466){dojo.mixin(this,_466);this.kkeys=[];this.handles=[];this.handles.push(dojo.connect(dojo.doc,"onkeydown",dojo.hitch(this,this.keydown)));},keydown:function(evt){this.kkeys.push(evt.keyCode);if(this.kkeys.toString().indexOf(this.code)>=0){if(this.once){dojo.forEach(this.handles,dojo.disconnect);}if(this.callback){this.callback();}}}});}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}return (dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!dojo._hasResource["dojox.fx.text"]){dojo._hasResource["dojox.fx.text"]=true;dojo.provide("dojox.fx.text");dojox.fx.text._split=function(args){var node=args.node=dojo.byId(args.node),s=node.style,cs=dojo.getComputedStyle(node),_467=dojo.coords(node,true);args.duration=args.duration||1000;args.words=args.words||false;var _468=(args.text&&typeof (args.text)=="string")?args.text:node.innerHTML,_469=s.height,_46a=s.width,_46b=[];dojo.style(node,{height:cs.height,width:cs.width});var _46c=/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)/g;var reg=(args.words?/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]+\s*)/g:/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]\s*)/g);var _46d=(typeof args.text=="string")?args.text.match(reg):node.innerHTML.match(reg);var html="";var _46e=0;var _46f=0;for(var i=0;i<_46d.length;i++){var _470=_46d[i];if(!_470.match(_46c)){html+="<span>"+_470+"</span>";_46e++;}else{html+=_470;}}node.innerHTML=html;function _471(_472){var next=_472.nextSibling;if(_472.tagName=="SPAN"&&_472.childNodes.length==1&&_472.firstChild.nodeType==3){var _473=dojo.coords(_472,true);_46f++;dojo.style(_472,{padding:0,margin:0,top:(args.crop?"0px":_473.t+"px"),left:(args.crop?"0px":_473.l+"px"),display:"inline"});var _474=args.pieceAnimation(_472,_473,_467,_46f,_46e);if(dojo.isArray(_474)){_46b=_46b.concat(_474);}else{_46b[_46b.length]=_474;}}else{if(_472.firstChild){_471(_472.firstChild);}}if(next){_471(next);}};_471(node.firstChild);var anim=dojo.fx.combine(_46b);dojo.connect(anim,"onEnd",anim,function(){node.innerHTML=_468;dojo.style(node,{height:_469,width:_46a});});if(args.onPlay){dojo.connect(anim,"onPlay",anim,args.onPlay);}if(args.onEnd){dojo.connect(anim,"onEnd",anim,args.onEnd);}return anim;};dojox.fx.text.explode=function(args){var node=args.node=dojo.byId(args.node);var s=node.style;args.distance=args.distance||1;args.duration=args.duration||1000;args.random=args.random||0;if(typeof (args.fade)=="undefined"){args.fade=true;}if(typeof (args.sync)=="undefined"){args.sync=true;}args.random=Math.abs(args.random);args.pieceAnimation=function(_475,_476,_477,_478,_479){var _47a=_476.h;var _47b=_476.w;var _47c=args.distance*2;var _47d=args.duration;var _47e=parseFloat(_475.style.top);var _47f=parseFloat(_475.style.left);var _480=0;var _481=0;var _482=0;if(args.random){var seed=(Math.random()*args.random)+Math.max(1-args.random,0);_47c*=seed;_47d*=seed;_480=((args.unhide&&args.sync)||(!args.unhide&&!args.sync))?(args.duration-_47d):0;_481=Math.random()-0.5;_482=Math.random()-0.5;}var _483=((_477.h-_47a)/2-(_476.y-_477.y));var _484=((_477.w-_47b)/2-(_476.x-_477.x));var _485=Math.sqrt(Math.pow(_484,2)+Math.pow(_483,2));var _486=_47e-_483*_47c+_485*_482;var _487=_47f-_484*_47c+_485*_481;var _488=dojo.animateProperty({node:_475,duration:_47d,delay:_480,easing:(args.easing||(args.unhide?dojo.fx.easing.sinOut:dojo.fx.easing.circOut)),beforeBegin:(args.unhide?function(){if(args.fade){dojo.style(_475,"opacity",0);}_475.style.position=args.crop?"relative":"absolute";_475.style.top=_486+"px";_475.style.left=_487+"px";}:function(){_475.style.position=args.crop?"relative":"absolute";}),properties:{top:(args.unhide?{start:_486,end:_47e}:{start:_47e,end:_486}),left:(args.unhide?{start:_487,end:_47f}:{start:_47f,end:_487})}});if(args.fade){var _489=dojo.animateProperty({node:_475,duration:_47d,delay:_480,easing:(args.fadeEasing||dojo.fx.easing.quadOut),properties:{opacity:(args.unhide?{start:0,end:1}:{end:0})}});return (args.unhide?[_489,_488]:[_488,_489]);}else{return _488;}};var anim=dojox.fx.text._split(args);return anim;};dojox.fx.text.converge=function(args){args.unhide=true;return dojox.fx.text.explode(args);};dojox.fx.text.disintegrate=function(args){var node=args.node=dojo.byId(args.node);var s=node.style;args.duration=args.duration||1500;args.distance=args.distance||1.5;args.random=args.random||0;if(!args.fade){args.fade=true;}var _48a=Math.abs(args.random);args.pieceAnimation=function(_48b,_48c,_48d,_48e,_48f){var _490=_48c.h;var _491=_48c.w;var _492=args.interval||(args.duration/(1.5*_48f));var _493=(args.duration-_48f*_492);var _494=Math.random()*_48f*_492;var _495=(args.reverseOrder||args.distance<0)?(_48e*_492):((_48f-_48e)*_492);var _496=_494*_48a+Math.max(1-_48a,0)*_495;var _497={};if(args.unhide){_497.top={start:(parseFloat(_48b.style.top)-_48d.h*args.distance),end:parseFloat(_48b.style.top)};if(args.fade){_497.opacity={start:0,end:1};}}else{_497.top={end:(parseFloat(_48b.style.top)+_48d.h*args.distance)};if(args.fade){_497.opacity={end:0};}}var _498=dojo.animateProperty({node:_48b,duration:_493,delay:_496,easing:(args.easing||(args.unhide?dojo.fx.easing.sinIn:dojo.fx.easing.circIn)),properties:_497,beforeBegin:(args.unhide?function(){if(args.fade){dojo.style(_48b,"opacity",0);}_48b.style.position=args.crop?"relative":"absolute";_48b.style.top=_497.top.start+"px";}:function(){_48b.style.position=args.crop?"relative":"absolute";})});return _498;};var anim=dojox.fx.text._split(args);return anim;};dojox.fx.text.build=function(args){args.unhide=true;return dojox.fx.text.disintegrate(args);};dojox.fx.text.blockFadeOut=function(args){var node=args.node=dojo.byId(args.node);var s=node.style;args.duration=args.duration||1000;args.random=args.random||0;var _499=Math.abs(args.random);args.pieceAnimation=function(_49a,_49b,_49c,_49d,_49e){var _49f=args.interval||(args.duration/(1.5*_49e));var _4a0=(args.duration-_49e*_49f);var _4a1=Math.random()*_49e*_49f;var _4a2=(args.reverseOrder)?((_49e-_49d)*_49f):(_49d*_49f);var _4a3=_4a1*_499+Math.max(1-_499,0)*_4a2;var _4a4=dojo.animateProperty({node:_49a,duration:_4a0,delay:_4a3,easing:(args.easing||dojo.fx.easing.sinInOut),properties:{opacity:(args.unhide?{start:0,end:1}:{end:0})},beforeBegin:(args.unhide?function(){dojo.style(_49a,"opacity",0);}:undefined)});return _4a4;};var anim=dojox.fx.text._split(args);return anim;};dojox.fx.text.blockFadeIn=function(args){args.unhide=true;return dojox.fx.text.blockFadeOut(args);};dojox.fx.text.backspace=function(args){var node=args.node=dojo.byId(args.node);var s=node.style;args.words=false;args.duration=args.duration||2000;args.random=args.random||0;var _4a5=Math.abs(args.random);var _4a6=10;args.pieceAnimation=function(_4a7,_4a8,_4a9,_4aa,_4ab){var _4ac=args.interval||(args.duration/(1.5*_4ab)),text=("textContent" in _4a7)?_4a7.textContent:_4a7.innerText,_4ad=text.match(/\s/g);if(typeof (args.wordDelay)=="undefined"){args.wordDelay=_4ac*2;}if(!args.unhide){_4a6=(_4ab-_4aa-1)*_4ac;}var _4ae,_4af;if(args.fixed){if(args.unhide){var _4ae=function(){dojo.style(_4a7,"opacity",0);};}}else{if(args.unhide){var _4ae=function(){_4a7.style.display="none";};var _4af=function(){_4a7.style.display="inline";};}else{var _4af=function(){_4a7.style.display="none";};}}var _4b0=dojo.animateProperty({node:_4a7,duration:1,delay:_4a6,easing:(args.easing||dojo.fx.easing.sinInOut),properties:{opacity:(args.unhide?{start:0,end:1}:{end:0})},beforeBegin:_4ae,onEnd:_4af});if(args.unhide){var _4b1=Math.random()*text.length*_4ac;var _4b2=_4b1*_4a5/2+Math.max(1-_4a5/2,0)*args.wordDelay;_4a6+=_4b1*_4a5+Math.max(1-_4a5,0)*_4ac*text.length+(_4b2*(_4ad&&text.lastIndexOf(_4ad[_4ad.length-1])==text.length-1));}return _4b0;};var anim=dojox.fx.text._split(args);return anim;};dojox.fx.text.type=function(args){args.unhide=true;return dojox.fx.text.backspace(args);};}if(!dojo._hasResource["agi.ovoid.Credits"]){dojo._hasResource["agi.ovoid.Credits"]=true;dojo.provide("agi.ovoid.Credits");dojo.declare("agi.ovoid.Credits",[agi.classes.Identified],{url:"",templateString:"",overlayId:"",contentClass:"",innerContentId:"",lbWidth:660,lbTop:35,original_opacity:0.3,original_background_color:"black",opacity:0.75,background_color:"white",autostart:false,playing:false,start_timeout:5000,constructor:function(_4b3){dojo.mixin(this,_4b3);this.data=null;this.lightbox=new agi.widget.Lightbox({lightboxId:"lightbox",overlayId:this.overlayId,loadnow:false,width:this.lbWidth,top:this.lbTop,overflow:"",contents:this.templateString});this.showNow=false;},loadData:function(_4b4){this.showNow=_4b4;if(!this.url){return;}dojo.xhrGet({url:this.url,handleAs:"json",load:dojo.hitch(this,this.gotData)});},gotData:function(_4b5,_4b6){this.data=_4b5;if(this.showNow){this.show();}},show:function(){if(!this.data){return this.loadData(true);}var _4b7=dojo.byId(this.overlayId);this.original_opacity=dojo.style(_4b7).opacity;this.original_background_color=dojo.style(_4b7).backgroundColor;dojo.style(_4b7,{opacity:this.opacity,backgroundColor:this.background_color});this.lightbox.show();if(this.autostart){this.play();}else{setTimeout(dojo.hitch(this,this.play),this.start_timeout);}},play:function(){if(this.playing){return;}this.showPage(0);this.playing=true;},showPage:function(i){var page=this.data.pages[i];var _4b8=this.data.pages[i+1];var h1=dojo.query("."+this.contentClass+" h1")[0];var h2=dojo.query("."+this.contentClass+" h2")[0];var ul=dojo.query("."+this.contentClass+" ul")[0];var _4b9=dojo.byId(this.innerContentId);var _4ba={node:_4b9,random:0.5,distance:1.5,duration:1500};if(page){if(page.heading!=null){h1.innerHTML=page.heading;}if(page.subhead!=null){h2.innerHTML=page.subhead;}else{h2.innerHTML="";}if(page.items!=null){ul.innerHTML=this.makeLIs(page.items);}else{ul.innerHTML="";}}dojo.style(_4b9,"visibility","visible");var _4bb=page.showFor!=null?page.showFor:5000;if(_4b8!=null){_4ba.onEnd=dojo.hitch(this,function(){dojo.style(_4b9,"visibility","hidden");this.showPage(i+1);});var anim=dojox.fx.text.explode(_4ba);setTimeout(function(){anim.play();},_4bb);}else{setTimeout(dojo.hitch(this,this.hide),_4bb);}},makeLIs:function(_4bc){html="";for(var i=0;i<_4bc.length;i++){html=html+"<li>"+_4bc[i]+"</li>";}return html;},hide:function(){this.lightbox.hide();var _4bd=dojo.byId(this.overlayId);dojo.style(_4bd,{opacity:this.original_opacity,backgroundColor:this.original_background_color});}});}if(!dojo._hasResource["agi.ovoid.Genesis"]){dojo._hasResource["agi.ovoid.Genesis"]=true;dojo.provide("agi.ovoid.Genesis");dojo.declare("agi.ovoid.Genesis",[agi.ovoid.Konami],{code:"66,65,39,39,65,67,38,40,65,13"});}if(!dojo._hasResource["agi.ovoid.Release"]){dojo._hasResource["agi.ovoid.Release"]=true;dojo.provide("agi.ovoid.Release");dojo.declare("agi.ovoid.Release",[agi.classes.Identified,agi.widget.Lightbox,agi.classes.Adopter],{__doc__:"Lightbox widget for large image preview on design (double click thumbs).",templateString:"<div>\n\n<div id=\"pw-light-release\" class=\"pw-rc-light\" ><span class=\"pw-x1\"></span><span class=\"pw-x2\"></span><span class=\"pw-x3\"></span>\n\t<div class=\"pw-light-header\">\n        <ul>\n            <li class=\"pw-l-close\">\n                <a href=\"/\" onclick=\"dojo.publish('agi/modals/release/hide'); return false;\"><span></span>Close</a>\n            </li>\n        </ul>\n    </div>\n    \n    <div class=\"pw-light-content\" style=\"text-align: center;\">\n\t\t<h1 style=\"width:100%; color:#c42216; font-size: 28px; line-height: 34px; font-weight: bold; margin-bottom: 15px;\"></h1>\n\t\t<h2 style=\"font-size: 20px; line-height: 26px; color: #c42216; font-weight: bold; margin-bottom: 15px;\"></h2>\n        <div id=\"release-content\">\n        </div>\n    </div>\n</div>\n\n</div>\n",imghost:imghost,title:"PhotoWorks.com",subtitle:"",embed:"",data:null,dataUrl:null,showNow:false,constructor:function(){},postCreate:function(){this.inherited(arguments);dojo.subscribe("agi/modals/release/show",dojo.hitch(this,this.onOpen));dojo.subscribe("agi/modals/release/hide",dojo.hitch(this,this.onClose));dojo.subscribe("agi/modals/hide",dojo.hitch(this,this.onClose));this.handles=[];this.showNow=false;},onOpen:function(){if(!this.data){return this.loadData(true);}this.show();},onClose:function(evt){if(evt){dojo.stopEvent(evt);}this.hide();dojo.forEach(this.handles,dojo.disconnect);this.handles=[];},loadData:function(_4be){this.showNow=_4be;if(!this.dataUrl){return;}dojo.xhrGet({url:this.dataUrl,handleAs:"json",load:dojo.hitch(this,this.gotData)});},gotData:function(_4bf,_4c0){if(this.showNow){this.show();}this.data=_4bf;var _4c1=dojo.query("#"+this.lightboxId+" .pw-light-content h1")[0];var _4c2=dojo.query("#"+this.lightboxId+" .pw-light-content h2")[0];var _4c3=dojo.query("#"+this.lightboxId+" .pw-light-content div")[0];dojo.html.set(_4c1,this.data.title);dojo.html.set(_4c2,this.data.subtitle);dojo.html.set(_4c3,this.data.content);}});}if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");(function(){var _4c4=0,d=dojo;dojo.html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(node,cont){d.empty(node);if(cont){if(typeof cont=="string"){cont=d._toDom(cont,node.ownerDocument);}if(!cont.nodeType&&d.isArrayLike(cont)){for(var _4c5=cont.length,i=0;i<cont.length;i=_4c5==cont.length?i+1:0){d.place(cont[i],node,"last");}}else{d.place(cont,node,"last");}}return node;};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(_4c6,node){dojo.mixin(this,_4c6||{});node=this.node=dojo.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_4c4++].join("_");}},set:function(cont,_4c7){if(undefined!==cont){this.content=cont;}if(_4c7){this._mixin(_4c7);}this.onBegin();this.setContent();this.onEnd();return this.node;},setContent:function(){var node=this.node;if(!node){throw new Error(this.declaredClass+": setContent given no node");}try{node=dojo.html._setNodeContent(node,this.content);}catch(e){var _4c8=this.onContentError(e);try{node.innerHTML=_4c8;}catch(e){}}this.node=node;},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}dojo.html._emptyNode(this.node);},onBegin:function(){var cont=this.content;if(dojo.isString(cont)){if(this.cleanContent){cont=dojo.html._secureForInnerHtml(cont);}if(this.extractContent){var _4c9=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_4c9){cont=_4c9[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.node;delete this.content;},onContentError:function(err){return "Error occured setting content: "+err;},_mixin:function(_4ca){var _4cb={},key;for(key in _4ca){if(key in _4cb){continue;}this[key]=_4ca[key];}},_parse:function(){var _4cc=this.node;try{this.parseResults=dojo.parser.parse({rootNode:_4cc,dir:this.dir,lang:this.lang});}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_4cd){var _4ce=this["on"+type+"Error"].call(this,err);if(_4cd){}else{if(_4ce){dojo.html._setNodeContent(this.node,_4ce,true);}}}});dojo.html.set=function(node,cont,_4cf){if(undefined==cont){cont="";}if(!_4cf){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojo.html._ContentSetter(dojo.mixin(_4cf,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["ag.ovoid.Release"]){dojo._hasResource["ag.ovoid.Release"]=true;dojo.provide("ag.ovoid.Release");dojo.declare("ag.ovoid.Release",[agi.ovoid.Release],{templateString:"<div id=\"agi-lb-release-info\" style=\"background-color: #ffffff; border: 1px solid #B0AD89;\">\n    <div class=\"agi-close\"><span> </span><a href=\"#\" onclick=\"dojo.publish('agi/modals/release/hide');return false;\"><img src=\"{{imghost}}/agbeta/x.gif\" border=\"0\" height=\"11\" width=\"11\"></a><br style=\"clear: both;\"></div>\n\n    <div class=\"agi-lightboxpad\">\n        <div class=\"agi-light-content\" style=\"text-align: center;\">\n            <h1 style=\"text-align: center; text-transform: none; width:100%; color:#c42216; font-size: 28px; line-height: 34px; font-weight: bold; margin-bottom: 15px;\"></h1>\n            <h2 style=\"text-align: center; text-transform: none; font-size: 20px; line-height: 26px; color: #c42216; font-weight: bold; margin-bottom: 15px;\"></h2>\n            <div id=\"release-content\"></div>\n        </div>\n    </div>\n</div>\n",title:"AmericanGreetings.com",subtitle:"",embed:"",data:null,dataUrl:null,showNow:false,constructor:function(){},gotData:function(_4d0,_4d1){if(this.showNow){this.show();}this.data=_4d0;var _4d2=dojo.query("#"+this.lightboxId+" .agi-light-content h1")[0];var _4d3=dojo.query("#"+this.lightboxId+" .agi-light-content h2")[0];var _4d4=dojo.query("#"+this.lightboxId+" .agi-light-content div")[0];dojo.html.set(_4d2,this.data.title);dojo.html.set(_4d3,this.data.subtitle);dojo.html.set(_4d4,this.data.content);}});}if(!dojo._hasResource["ag.focus"]){dojo._hasResource["ag.focus"]=true;dojo.provide("ag.focus");window.onYouTubePlayerReady=function(_4d5){var _4d6=document.getElementById("pw-ytplayer");_4d6.addEventListener("onStateChange","    .stateChange");};ag.focus.stateChange=function(_4d7){if(_4d7==0){ag.focus.credits.hide();}else{if(_4d7==1){ag.focus.credits.play();}}};if(dojo.isIE){ag.focus.enablejsapi=0;ag.focus.autostart=true;}else{ag.focus.enablejsapi=1;ag.focus.autostart=false;}ag.focus.init=function(){ag.focus.release=new ag.ovoid.Release({dataUrl:"/credits/release",lightboxId:"release_lightbox",loaderId:"loadingImage",overlayId:"agi-overlay",loadnow:false,width:660,top:35,overflow:""});var _4d8=new agi.ovoid.Konami({callback:function(){ag.focus.release.onOpen();}});};dojo.addOnLoad(ag.focus.init);}if(!dojo._hasResource["dojo.io.script"]){dojo._hasResource["dojo.io.script"]=true;dojo.provide("dojo.io.script");(function(){var _4d9=dojo.isIE?"onreadystatechange":"load",_4da=/complete|loaded/;dojo.io.script={get:function(args){var dfd=this._makeScriptDeferred(args);var _4db=dfd.ioArgs;dojo._ioAddQueryToUrl(_4db);dojo._ioNotifyStart(dfd);if(this._canAttach(_4db)){var node=this.attach(_4db.id,_4db.url,args.frameDoc);if(!_4db.jsonp&&!_4db.args.checkString){var _4dc=dojo.connect(node,_4d9,function(evt){if(evt.type=="load"||_4da.test(node.readyState)){dojo.disconnect(_4dc);_4db.scriptLoaded=evt;}});}}dojo._ioWatch(dfd,this._validCheck,this._ioCheck,this._resHandle);return dfd;},attach:function(id,url,_4dd){var doc=(_4dd||dojo.doc);var _4de=doc.createElement("script");_4de.type="text/javascript";_4de.src=url;_4de.id=id;_4de.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_4de);},remove:function(id,_4df){dojo.destroy(dojo.byId(id,_4df));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(args){var dfd=dojo._ioSetArgs(args,this._deferredCancel,this._deferredOk,this._deferredError);var _4e0=dfd.ioArgs;_4e0.id=dojo._scopeName+"IoScript"+(this._counter++);_4e0.canDelete=false;_4e0.jsonp=args.callbackParamName||args.jsonp;if(_4e0.jsonp){_4e0.query=_4e0.query||"";if(_4e0.query.length>0){_4e0.query+="&";}_4e0.query+=_4e0.jsonp+"="+(args.frameDoc?"parent.":"")+dojo._scopeName+".io.script.jsonp_"+_4e0.id+"._jsonpCallback";_4e0.frameDoc=args.frameDoc;_4e0.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_4e0.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){dojo.io.script._addDeadScript(dfd.ioArgs);}},_deferredOk:function(dfd){var _4e1=dfd.ioArgs;if(_4e1.canDelete){dojo.io.script._addDeadScript(_4e1);}return _4e1.json||_4e1.scriptLoaded||_4e1;},_deferredError:function(_4e2,dfd){if(dfd.ioArgs.canDelete){if(_4e2.dojoType=="timeout"){dojo.io.script.remove(dfd.ioArgs.id,dfd.ioArgs.frameDoc);}else{dojo.io.script._addDeadScript(dfd.ioArgs);}}return _4e2;},_deadScripts:[],_counter:1,_addDeadScript:function(_4e3){dojo.io.script._deadScripts.push({id:_4e3.id,frameDoc:_4e3.frameDoc});_4e3.frameDoc=null;},_validCheck:function(dfd){var _4e4=dojo.io.script;var _4e5=_4e4._deadScripts;if(_4e5&&_4e5.length>0){for(var i=0;i<_4e5.length;i++){_4e4.remove(_4e5[i].id,_4e5[i].frameDoc);_4e5[i].frameDoc=null;}dojo.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){var _4e6=dfd.ioArgs;if(_4e6.json||(_4e6.scriptLoaded&&!_4e6.args.checkString)){return true;}var _4e7=_4e6.args.checkString;if(_4e7&&eval("typeof("+_4e7+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(dojo.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(_4e8){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;}};})();}if(!dojo._hasResource["agi.history.ViewHistoryCookie"]){dojo._hasResource["agi.history.ViewHistoryCookie"]=true;dojo.provide("agi.history.ViewHistoryCookie");dojo.declare("agi.history.ViewHistoryCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"cardviewhistory",constructor:function(){},read:function(_4e9){if(!_4e9){_4e9="";}var _4ea=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_4ea==null){_4ea=_4e9;}return _4ea;},set:function(_4eb){_4eb=this.read()+_4eb;agi.cookie.MagicCookie.setCookieValue(this.KEY,_4eb,false);},append:function(_4ec){this.set(this.read()+_4ec);}});}if(!dojo._hasResource["agi.history.LastActionCookie"]){dojo._hasResource["agi.history.LastActionCookie"]=true;dojo.provide("agi.history.LastActionCookie");dojo.declare("agi.history.LastActionCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"lastaction",constructor:function(){},read:function(_4ed){if(!_4ed){_4ed="";}var _4ee=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_4ee==null){_4ee=_4ed;}return _4ee;},set:function(_4ef){agi.cookie.MagicCookie.setCookieValue(this.KEY,_4ef,true);}});}if(!dojo._hasResource["agi.history.LastTriggerCookie"]){dojo._hasResource["agi.history.LastTriggerCookie"]=true;dojo.provide("agi.history.LastTriggerCookie");dojo.declare("agi.history.LastTriggerCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"lasttrigger",constructor:function(){},read:function(_4f0){if(!_4f0){_4f0="";}var _4f1=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_4f1==null){_4f1=_4f0;}return _4f1;},set:function(_4f2){agi.cookie.MagicCookie.setCookieValue(this.KEY,_4f2,false);}});}if(!dojo._hasResource["agi.segmentation.OrderBailCookie"]){dojo._hasResource["agi.segmentation.OrderBailCookie"]=true;dojo.provide("agi.segmentation.OrderBailCookie");dojo.declare("agi.segmentation.OrderBailCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"orderbail",constructor:function(){},read:function(_4f3){if(!_4f3){_4f3="";}var _4f4=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_4f4==null){_4f4=_4f3;}return _4f4;},set:function(_4f5){agi.cookie.MagicCookie.setCookieValue(this.KEY,_4f5,false);}});}if(!dojo._hasResource["agi.segmentation.SegmentTestGroupCookie"]){dojo._hasResource["agi.segmentation.SegmentTestGroupCookie"]=true;dojo.provide("agi.segmentation.SegmentTestGroupCookie");dojo.declare("agi.segmentation.SegmentTestGroupCookie",[agi.classes.Identified,agi.classes.Adopter],{KEY:"segmenttestgroup",constructor:function(){},read:function(_4f6){if(!_4f6){_4f6="";}var _4f7=agi.cookie.MagicCookie.getCookieValue(this.KEY);if(_4f7==null){_4f7=_4f6;}return _4f7;},set:function(_4f8){agi.cookie.MagicCookie.setCookieValue(this.KEY,_4f8,false);}});}if(!dojo._hasResource["agi.segmentation.constants"]){dojo._hasResource["agi.segmentation.constants"]=true;dojo.provide("agi.segmentation.constants");agi.segmentation.constants.MEMBER_DEFAULT=100;agi.segmentation.constants.NON_MEMBER_DEFAULT=101;agi.segmentation.constants.CSHomePage={MEM_DFT:100,NON_DFT:101,EC_3_9_DFT:102,EC_3_9_UPS:103,CP_3_9_DFT:104,CP_3_9_UPS:105,CP_1_2_DFT:106,CP_1_2_CNP:107,BD_1_2_RC1:109,BD_1_2_RC2:110,BD_1_2_RC3:111,BD_1_2_RC4:112,EC_3_9_DFT:113,EC_3_9_RC1:114,EC_3_9_RC2:115,EC_3_9_RC3:116,CP_3_9_DFT:118,CP_3_9_CNP:119,CP_3_9_CPUPS:120,CP_3_9_UPS:121,BD_3_9_DFT:122,BD_3_9_RC1:123,BD_3_9_RC2:124,BD_3_9_RC3:125,MEM_PRE_DFT:126,EC_PRE_REN:127,CP_PRE_REN:128,BD_PRE_REN:129,EC_10_12_DFT:130,EC_10_12_RC1:131,EC_10_12_RC2:132,EC_10_12_RC3:133,CP_10_12_DFT:134,CP_10_12_CNP:135,BD_10_12_DFT:137,BD_10_12_RC1:138,BD_10_12_RC2:139,BD_10_12_RC3:140,EC_1_2_DFT:141,EC_1_2_RC1:142,EC_1_2_RC2:143,EC_1_2_RC3:144,MEM_PROMO:145,NON_PROMO:146,EC_10_2_DFT:147,EC_10_2_RC1:148,EC_10_2_RC2:149,EC_10_2_RC3:150,EC_10_2_RC4:151,CP_10_2_DFT:152,CP_10_2_CNP:153,BD_10_2_DFT:154,BD_10_2_RC1:155,BD_10_2_RC2:156,BD_10_2_RC3:157,BD_10_2_RC4:158,EC_3_9_RC4:159,MEM_DFT_TCRL:164,MEM_DFT_TTST:165,EC_10_2_DFT_TST:166,EC_10_2_RC4_TST:167,CNPBD_ALL_DFT:168,CNPBD_ALL_DFT_TST:169,CNPBD_ALL_RC2:170,CNPBD_ALL_RC2_TST:171,EC_3_9_DFT_TST:172,EC_3_9_RC1_TST:173,EC_3_9_RC3_TST:174,CNPBD_ALL_RC1:175,CNPBD_ALL_RC1_TST:176,NON_FTV_DFT:177,NON_FTV_TST:178,NON_PS_EC_DFT:179,NON_PS_EC_TST:180,NON_OS_EC_DFT:181,NON_OS_EC_TST:182,NON_PS_FEC_DFT:183,NON_PS_FEC_TST:184,NON_OS_FEC_DFT:185,NON_OS_FEC_TST:186,NON_PS_BEC_DFT:187,NON_PS_BEC_TST:188,NON_OS_BEC_DFT:189,NON_OS_BEC_TST:190,NON_PS_FBEC_DFT:191,NON_PS_FBEC_TST:192,NON_OS_FBEC_DFT:193,NON_OS_FBEC_TST:194,NON_PS_CNP_DFT:195,NON_PS_CNP_TST:196,NON_OS_CNP_DFT:197,NON_OS_CNP_TST:198,NON_PS_BRAND_DFT:199,NON_PS_BRAND_TST:200,NON_OS_BRAND_DFT:201,NON_OS_BRAND_TST:202,NON_INT_FEC_DFT:203,NON_INT_FEC_TST:204,NON_INT_BEC_DFT:205,NON_INT_BEC_TST:206,NON_INT_FBEC_DFT:207,NON_INT_FBEC_TST:208,NON_INT_CNP_DFT:209,NON_INT_CNP_TST:210,NON_LA_OPB_DFT:211,NON_LA_OPB_TST:212,NON_LA_ECB_DFT:213,NON_LA_ECB_TST:214,NON_LA_CNPB_DFT:215,NON_LA_CNPB_TST:216,NON_LA_SND_DFT:217,NON_LA_SND_TST:218,NON_LA_SND_TST2:230,NON_LA_PRT_DFT:219,NON_LA_PRT_TST:220,MAC_IE8_USR:229};agi.segmentation.constants.CSViewPage={MEM_DFT:100,NON_DFT:101,NON_NEW_DFT:102,NON_NEW_TST:103,NON_LOW_DFT:104,NON_LOW_TST1:105,NON_LOW_TST2:106,NON_MED_DFT:107,NON_MED_TST1:108,NON_MED_TST2:109,NON_HGH_DFT:110,NON_HGH_TST1:111,BDAY_MEM_DFT:112,BDAY_NON_DFT:113,BDAY_NON_NEW_DFT:114,BDAY_NON_NEW_TST:115,BDAY_NON_LOW_DFT:116,BDAY_NON_LOW_TST1:117,BDAY_NON_LOW_TST2:118,BDAY_NON_MED_DFT:119,BDAY_NON_MED_TST1:120,BDAY_NON_MED_TST2:121,BDAY_NON_HGH_DFT:122,BDAY_NON_HGH_TST1:123};agi.segmentation.constants.CSDisplayPage={MEM_DFT:100,NON_DFT:101,NON_EFF_DEFN1_CMP:102,NON_EFF_DEFN1_TST:103,NON_NOEFF_DEFN1_CMP:104,NON_NOEFF_DEFN1_TST:105,NON_EFF_DEFN2_CMP:106,NON_EFF_DEFN2_TST:107,NON_NOEFF_DEFN2_CMP:108,NON_NOEFF_DEFN2_TST:109,MEM_EFF_DEFN2_CMP:110,MEM_EFF_DEFN2_TST:111,MEM_NON_EFF_DEFN2_CMP:112,MEM_NON_EFF_DEFN2_TST:113,NON_VIEW_CMP:114,NON_VIEW_TST:115,NON_FIND_CMP:116,NON_FIND_TST:117};}if(!dojo._hasResource["agi.segmentation.Listeners"]){dojo._hasResource["agi.segmentation.Listeners"]=true;dojo.provide("agi.segmentation.Listeners");dojo.declare("agi.segmentation.Listeners",[agi.classes.Identified,agi.classes.Adopter],{issue_cfp:false,constructor:function(){this.cardviewhistory=new agi.history.ViewHistoryCookie();this.lastactioncookie=new agi.history.LastActionCookie();this.lasttriggercookie=new agi.history.LastTriggerCookie();this.segmentcookie=new agi.segmentation.SegmentCookie();this.orderbailcookie=new agi.segmentation.OrderBailCookie();this.testgroupcookie=new agi.segmentation.SegmentTestGroupCookie();this.CSHP=agi.segmentation.constants.CSHomePage;this.NON_MEMBER_DEFAULT=agi.segmentation.constants.NON_MEMBER_DEFAULT;},fire:function(){if(typeof cust_seg_events=="undefined"){return;}dojo.forEach(cust_seg_events,dojo.hitch(this,this._execute));if(this.issue_cfp){this._issue_cookies();}},_issue_cookies:function(){dojo.io.script.get({url:ahost+"/share/session.pd",content:{cb:"void"}});},_execute:function(_4f9){if(typeof this[_4f9]=="function"){this[_4f9]();}},_is_test:function(){var test=this.testgroupcookie.read()+"";if(test!="0"&&test!="1"){test=Math.floor(Math.random()*2);this.testgroupcookie.set(test);}return parseInt(test);},_set_segment_cookie:function(_4fa){this.issue_cfp=true;this.segmentcookie.set(_4fa);},send_ecard:function(){this.lastactioncookie.set("send");this.lasttriggercookie.set("send");var site=this.determine_site();if(this._is_test()){this._set_segment_cookie({"cs2":this.CSHP.NON_LA_SND_TST});}else{this._set_segment_cookie({"cs2":this.CSHP.NON_LA_SND_DFT});}},view_ecard_free:function(){this.view_ecard("free");},view_ecard_paid:function(){this.view_ecard("paid");},view_ecard:function(type){if(type=="paid"){this.cardviewhistory.append("P");}else{this.cardviewhistory.append("F");}var _4fb=/.*F.*F.*/i;var _4fc=this.cardviewhistory.read();var site=this.determine_site();if(_4fc.search(_4fb)!=-1){this.lasttriggercookie.set("view2free");value=[235,236][this._is_test()];this._set_segment_cookie({"cs2":value});}},browse_ecard:function(){this.lastactioncookie.set("ecbrowse");this.lasttriggercookie.set("ecbrowse");},browse_printable:function(){this.lastactioncookie.set("cnpbrowse");this.lasttriggercookie.set("cnpbrowse");},order_bail:function(){var _4fd=this.orderbailcookie.read();if(document.location.pathname.indexOf("join")==-1&&_4fd.length>0){this.lastactioncookie.set("opbail");this.lasttriggercookie.set("opbail");this.orderbailcookie.set("");}},internal_search_birthday:function(){var site=this.determine_site();var _4fe=[this.CSHP.NON_INT_FBEC_DFT,this.CSHP.NON_INT_FBEC_TST][this._is_test()];this._set_segment_cookie({"cs2":_4fe});},internal_search_free:function(){var site=this.determine_site();var _4ff=[this.CSHP.NON_INT_FEC_DFT,this.CSHP.NON_INT_FEC_TST][this._is_test()];this._set_segment_cookie({"cs2":_4ff});},determine_site:function(){var bma="bluemountain.";var ag="americangreetings.";var _500="beta.";var url=window.location.toString().toLowerCase();if(url.indexOf(_500)>-1){return "agbeta";}if(url.indexOf(bma)>-1){return "bma";}if(url.indexOf(ag)>-1){return "ag";}return "ag";}});}if(!dojo._hasResource["agi.segmentation.SegmentProvider"]){dojo._hasResource["agi.segmentation.SegmentProvider"]=true;dojo.provide("agi.segmentation.SegmentProvider");agi.segmentation.SegmentProvider.init=function(){this.listeners=new agi.segmentation.Listeners();this.listeners.fire();};dojo.addOnLoad(agi.segmentation.SegmentProvider.init);}dojo.publish("/ag.layers.core/loaded/");
