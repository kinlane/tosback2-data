/* Â© 2012 Williams-Sonoma Inc. All rights reserved. */
dojo.provide("wsgc");if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(_1,_2){return _1.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_2&&_2.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(_3,re,_4){if(!(_3 instanceof Array)){return re(_3);}var b=[];for(var i=0;i<_3.length;i++){b.push(re(_3[i]));}return dojo.regexp.group(b.join("|"),_4);};dojo.regexp.group=function(_5,_6){return "("+(_6?"?:":"")+_5+")";};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(_7,_8,_9){var c=document.cookie;if(arguments.length==1){var _a=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(_7)+"=([^;]*)"));return _a?decodeURIComponent(_a[1]):undefined;}else{_9=_9||{};var _b=_9.expires;if(typeof _b=="number"){var d=new Date();d.setTime(d.getTime()+_b*24*60*60*1000);_b=_9.expires=d;}if(_b&&_b.toUTCString){_9.expires=_b.toUTCString();}_8=encodeURIComponent(_8);var _c=_7+"="+_8,_d;for(_d in _9){_c+="; "+_d;var _e=_9[_d];if(_e!==true){_c+="="+_e;}}document.cookie=_c;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dojo.io.script"]){dojo._hasResource["dojo.io.script"]=true;dojo.provide("dojo.io.script");(function(){var _f=dojo.isIE?"onreadystatechange":"load",_10=/complete|loaded/;dojo.io.script={get:function(_11){var dfd=this._makeScriptDeferred(_11);var _12=dfd.ioArgs;dojo._ioAddQueryToUrl(_12);dojo._ioNotifyStart(dfd);if(this._canAttach(_12)){var _13=this.attach(_12.id,_12.url,_11.frameDoc);if(!_12.jsonp&&!_12.args.checkString){var _14=dojo.connect(_13,_f,function(evt){if(evt.type=="load"||_10.test(_13.readyState)){dojo.disconnect(_14);_12.scriptLoaded=evt;}});}}dojo._ioWatch(dfd,this._validCheck,this._ioCheck,this._resHandle);return dfd;},attach:function(id,url,_15){var doc=(_15||dojo.doc);var _16=doc.createElement("script");_16.type="text/javascript";_16.src=url;_16.id=id;_16.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_16);},remove:function(id,_17){dojo.destroy(dojo.byId(id,_17));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(_18){var dfd=dojo._ioSetArgs(_18,this._deferredCancel,this._deferredOk,this._deferredError);var _19=dfd.ioArgs;_19.id=dojo._scopeName+"IoScript"+(this._counter++);_19.canDelete=false;_19.jsonp=_18.callbackParamName||_18.jsonp;if(_19.jsonp){_19.query=_19.query||"";if(_19.query.length>0){_19.query+="&";}_19.query+=_19.jsonp+"="+(_18.frameDoc?"parent.":"")+dojo._scopeName+".io.script.jsonp_"+_19.id+"._jsonpCallback";_19.frameDoc=_18.frameDoc;_19.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_19.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){dojo.io.script._addDeadScript(dfd.ioArgs);}},_deferredOk:function(dfd){var _1a=dfd.ioArgs;if(_1a.canDelete){dojo.io.script._addDeadScript(_1a);}return _1a.json||_1a.scriptLoaded||_1a;},_deferredError:function(_1b,dfd){if(dfd.ioArgs.canDelete){if(_1b.dojoType=="timeout"){dojo.io.script.remove(dfd.ioArgs.id,dfd.ioArgs.frameDoc);}else{dojo.io.script._addDeadScript(dfd.ioArgs);}}return _1b;},_deadScripts:[],_counter:1,_addDeadScript:function(_1c){dojo.io.script._deadScripts.push({id:_1c.id,frameDoc:_1c.frameDoc});_1c.frameDoc=null;},_validCheck:function(dfd){var _1d=dojo.io.script;var _1e=_1d._deadScripts;if(_1e&&_1e.length>0){for(var i=0;i<_1e.length;i++){_1d.remove(_1e[i].id,_1e[i].frameDoc);_1e[i].frameDoc=null;}dojo.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){var _1f=dfd.ioArgs;if(_1f.json||(_1f.scriptLoaded&&!_1f.args.checkString)){return true;}var _20=_1f.args.checkString;if(_20&&eval("typeof("+_20+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(dojo.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(_21){return true;},_jsonpCallback:function(_22){this.ioArgs.json=_22;}};})();}if(!dojo._hasResource["dojo.NodeList-manipulate"]){dojo._hasResource["dojo.NodeList-manipulate"]=true;dojo.provide("dojo.NodeList-manipulate");(function(){function _23(_24){var _25="",ch=_24.childNodes;for(var i=0,n;n=ch[i];i++){if(n.nodeType!=8){if(n.nodeType==1){_25+=_23(n);}else{_25+=n.nodeValue;}}}return _25;};function _26(_27){while(_27.childNodes[0]&&_27.childNodes[0].nodeType==1){_27=_27.childNodes[0];}return _27;};function _28(_29,_2a){if(typeof _29=="string"){_29=dojo._toDom(_29,(_2a&&_2a.ownerDocument));if(_29.nodeType==11){_29=_29.childNodes[0];}}else{if(_29.nodeType==1&&_29.parentNode){_29=_29.cloneNode(false);}}return _29;};dojo.extend(dojo.NodeList,{_placeMultiple:function(_2b,_2c){var nl2=typeof _2b=="string"||_2b.nodeType?dojo.query(_2b):_2b;var _2d=[];for(var i=0;i<nl2.length;i++){var _2e=nl2[i];var _2f=this.length;for(var j=_2f-1,_30;_30=this[j];j--){if(i>0){_30=this._cloneNode(_30);_2d.unshift(_30);}if(j==_2f-1){dojo.place(_30,_2e,_2c);}else{_2e.parentNode.insertBefore(_30,_2e);}_2e=_30;}}if(_2d.length){_2d.unshift(0);_2d.unshift(this.length-1);Array.prototype.splice.apply(this,_2d);}return this;},innerHTML:function(_31){if(arguments.length){return this.addContent(_31,"only");}else{return this[0].innerHTML;}},text:function(_32){if(arguments.length){for(var i=0,_33;_33=this[i];i++){if(_33.nodeType==1){dojo.empty(_33);_33.appendChild(_33.ownerDocument.createTextNode(_32));}}return this;}else{var _34="";for(i=0;_33=this[i];i++){_34+=_23(_33);}return _34;}},val:function(_35){if(arguments.length){var _36=dojo.isArray(_35);for(var _37=0,_38;_38=this[_37];_37++){var _39=_38.nodeName.toUpperCase();var _3a=_38.type;var _3b=_36?_35[_37]:_35;if(_39=="SELECT"){var _3c=_38.options;for(var i=0;i<_3c.length;i++){var opt=_3c[i];if(_38.multiple){opt.selected=(dojo.indexOf(_35,opt.value)!=-1);}else{opt.selected=(opt.value==_3b);}}}else{if(_3a=="checkbox"||_3a=="radio"){_38.checked=(_38.value==_3b);}else{_38.value=_3b;}}}return this;}else{_38=this[0];if(!_38||_38.nodeType!=1){return undefined;}_35=_38.value||"";if(_38.nodeName.toUpperCase()=="SELECT"&&_38.multiple){_35=[];_3c=_38.options;for(i=0;i<_3c.length;i++){opt=_3c[i];if(opt.selected){_35.push(opt.value);}}if(!_35.length){_35=null;}}return _35;}},append:function(_3d){return this.addContent(_3d,"last");},appendTo:function(_3e){return this._placeMultiple(_3e,"last");},prepend:function(_3f){return this.addContent(_3f,"first");},prependTo:function(_40){return this._placeMultiple(_40,"first");},after:function(_41){return this.addContent(_41,"after");},insertAfter:function(_42){return this._placeMultiple(_42,"after");},before:function(_43){return this.addContent(_43,"before");},insertBefore:function(_44){return this._placeMultiple(_44,"before");},remove:dojo.NodeList.prototype.orphan,wrap:function(_45){if(this[0]){_45=_28(_45,this[0]);for(var i=0,_46;_46=this[i];i++){var _47=this._cloneNode(_45);if(_46.parentNode){_46.parentNode.replaceChild(_47,_46);}var _48=_26(_47);_48.appendChild(_46);}}return this;},wrapAll:function(_49){if(this[0]){_49=_28(_49,this[0]);this[0].parentNode.replaceChild(_49,this[0]);var _4a=_26(_49);for(var i=0,_4b;_4b=this[i];i++){_4a.appendChild(_4b);}}return this;},wrapInner:function(_4c){if(this[0]){_4c=_28(_4c,this[0]);for(var i=0;i<this.length;i++){var _4d=this._cloneNode(_4c);this._wrap(dojo._toArray(this[i].childNodes),null,this._NodeListCtor).wrapAll(_4d);}}return this;},replaceWith:function(_4e){_4e=this._normalize(_4e,this[0]);for(var i=0,_4f;_4f=this[i];i++){this._place(_4e,_4f,"before",i>0);_4f.parentNode.removeChild(_4f);}return this;},replaceAll:function(_50){var nl=dojo.query(_50);var _51=this._normalize(this,this[0]);for(var i=0,_52;_52=nl[i];i++){this._place(_51,_52,"before",i>0);_52.parentNode.removeChild(_52);}return this;},clone:function(){var ary=[];for(var i=0;i<this.length;i++){ary.push(this._cloneNode(this[i]));}return this._wrap(ary,this,this._NodeListCtor);}});if(!dojo.NodeList.prototype.html){dojo.NodeList.prototype.html=dojo.NodeList.prototype.innerHTML;}})();}if(!dojo._hasResource["dojo.NodeList-traverse"]){dojo._hasResource["dojo.NodeList-traverse"]=true;dojo.provide("dojo.NodeList-traverse");dojo.extend(dojo.NodeList,{_buildArrayFromCallback:function(_53){var ary=[];for(var i=0;i<this.length;i++){var _54=_53.call(this[i],this[i],ary);if(_54){ary=ary.concat(_54);}}return ary;},_filterQueryResult:function(_55,_56){var _57=dojo.filter(_55,function(_58){return dojo.query(_56,_58.parentNode).indexOf(_58)!=-1;});var _59=this._wrap(_57);return _59;},_getUniqueAsNodeList:function(_5a){var ary=[];for(var i=0,_5b;_5b=_5a[i];i++){if(_5b.nodeType==1&&dojo.indexOf(ary,_5b)==-1){ary.push(_5b);}}return this._wrap(ary,null,this._NodeListCtor);},_getUniqueNodeListWithParent:function(_5c,_5d){var ary=this._getUniqueAsNodeList(_5c);ary=(_5d?this._filterQueryResult(ary,_5d):ary);return ary._stash(this);},_getRelatedUniqueNodes:function(_5e,_5f){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_5f),_5e);},children:function(_60){return this._getRelatedUniqueNodes(_60,function(_61,ary){return dojo._toArray(_61.childNodes);});},closest:function(_62){var _63=this;return this._getRelatedUniqueNodes(_62,function(_64,ary){do{if(_63._filterQueryResult([_64],_62).length){return _64;}}while((_64=_64.parentNode)&&_64.nodeType==1);return null;});},parent:function(_65){return this._getRelatedUniqueNodes(_65,function(_66,ary){return _66.parentNode;});},parents:function(_67){return this._getRelatedUniqueNodes(_67,function(_68,ary){var _69=[];while(_68.parentNode){_68=_68.parentNode;_69.push(_68);}return _69;});},siblings:function(_6a){return this._getRelatedUniqueNodes(_6a,function(_6b,ary){var _6c=[];var _6d=(_6b.parentNode&&_6b.parentNode.childNodes);for(var i=0;i<_6d.length;i++){if(_6d[i]!=_6b){_6c.push(_6d[i]);}}return _6c;});},next:function(_6e){return this._getRelatedUniqueNodes(_6e,function(_6f,ary){var _70=_6f.nextSibling;while(_70&&_70.nodeType!=1){_70=_70.nextSibling;}return _70;});},nextAll:function(_71){return this._getRelatedUniqueNodes(_71,function(_72,ary){var _73=[];var _74=_72;while((_74=_74.nextSibling)){if(_74.nodeType==1){_73.push(_74);}}return _73;});},prev:function(_75){return this._getRelatedUniqueNodes(_75,function(_76,ary){var _77=_76.previousSibling;while(_77&&_77.nodeType!=1){_77=_77.previousSibling;}return _77;});},prevAll:function(_78){return this._getRelatedUniqueNodes(_78,function(_79,ary){var _7a=[];var _7b=_79;while((_7b=_7b.previousSibling)){if(_7b.nodeType==1){_7a.push(_7b);}}return _7a;});},andSelf:function(){return this.concat(this._parent);},first:function(){return this._wrap(((this[0]&&[this[0]])||[]),this);},last:function(){return this._wrap((this.length?[this[this.length-1]]:[]),this);},even:function(){return this.filter(function(_7c,i){return i%2!=0;});},odd:function(){return this.filter(function(_7d,i){return i%2==0;});}});}if(!dojo._hasResource["wsgc.js.SearchController"]){dojo._hasResource["wsgc.js.SearchController"]=true;dojo.provide("wsgc.js.SearchController");dojo.declare("wsgc.js.SearchController",null,{constructor:function(_7e,_7f){var _80,_81;if(_7e){this.searchField=_7e;}else{_81=dojo.byId("search-field");if(_81){this.searchField=_81;}}if(location.href.indexOf("https:")===0){_80=WSI.config.secureAppUrl;}else{_80=WSI.config.appUrl;}this.viewset=dojo.byId("type-ahead-viewset").value;if(!_80){_80="/";}this.searchUrl=_80+this.searchUrl;this.resultsUrl=_80+this.resultsUrl;this._searchResultsCache=[];this.currentResultSet=[];this.createSearchResultsDiv(_7f);this._setupLocalStorage();this._registerSearchEvents();if(this.searchField.value===""){this.displayHistoricalSearchTerms();}},MIN_CHARS:2,SEARCH_HISTORY_LIMIT:3,pause:200,_searchResultsCache:null,_ajaxSearcRequest:null,currentSearchTerm:"",currentResultSet:null,searchUrl:"services/typeahead/",searchUrlSuffix:"*/index.json",resultsUrl:"search/results.html?words=",searchResults:null,inlineSearchHeader:null,searchField:null,timeouts:null,xhrimeout:1500,highlightedTerm:-1,viewset:null,_registerSearchEvents:function(){var _82=this.searchField,_83=dojo.byId("searchform");if(_82){dojo.connect(_82,"onkeyup",this,function(evt){var _84=evt.keyCode,_85=evt.ctlKey,_86=evt.shiftKey;if((_84===38||_84===40)&&!(_85||_86)){this.highlightTerm(_84);}else{if(_84===27&&!(_85||_86)){this.searchField.value=this.currentSearchTerm;this.hideSearchResults();}else{if(_84===13&&!(_85||_86)){this.hideSearchResults();}else{this.setCurrentSearchTerm(evt.currentTarget.value);this.primeTimeout();}}}});dojo.connect(_82,"onfocus",this,this.displayHistoricalSearchTerms);dojo.connect(_82,"onblur",this,this.hideSearchResults);}if(_83){dojo.connect(_83,"submit",this,function(evt){this.stashHistoricalSearchTerm(this.searchField.value);this.cancelSearchRequest();});}},displaySearchResults:function(_87,_88,_89){_89=_89?_89:"Search Suggestions";if(dojo.isArray(_87)&&_87.length>0){var ul=document.createElement("ul"),_8a=document.createElement("li"),_8b=document.createElement("a"),li,a,_8c,_8d;_8b.href=this.resultsUrl;for(var i=0,len=_87.length;i<len;i++){_87[i]=_87[i].replace(/<[^>]+>/g,"");li=_8a.cloneNode(true);a=_8b.cloneNode(true);if(dojo.trim(_88)!==""){a.innerHTML=_87[i].replace(_88,"<span>"+_88+"</span>");}else{a.innerHTML=_87[i];}a.href=a.href+encodeURIComponent(_87[i]);li.appendChild(a);ul.appendChild(li);}_8d=this.searchResults;_8c=dojo.query("ul",_8d);if(_8c.length>0){_8c=_8c[0];_8c.parentNode.replaceChild(ul,_8c);}else{_8d.appendChild(ul);}this.inlineSearchHeader.innerHTML=_89;dojo.removeClass(_8d,"hide");this.highlightedTerm=-1;this.currentResultSet=_87;}else{this.hideSearchResults();}},displayHistoricalSearchTerms:function(){var _8e=dojo.fromJson(this.getLocalStorage("recentSearches")||"[]");if(_8e.length){this.displaySearchResults(_8e,"","Recent Searches");}},createSearchResultsDiv:function(_8f,_90){if(_8f){this.searchResults=_8f;}else{var _91=dojo.byId("inlineSearchResults"),_92;if(_91){this.searchResults=_91;}else{var _93=document.createElement("div");dojo.attr(_93,{id:"searchResults"});dojo.addClass(_93,"hide");this.searchField.parentNode.appendChild(_93);this.searchResults=_93;}}this.inlineSearchHeader=typeof (_90)!=="undefined"?_90:dojo.query(".inlineSearchHeader")[0];dojo.connect(this.searchResults,"onclick",this,this.searchResultClick);},hideSearchResults:function(){var _94=this;setTimeout(function(){dojo.addClass(_94.searchResults,"hide");dojo.query("ul",_94.searchResults).forEach("item.parentNode.removeChild(item);");},500);_94.currentResultSet=[];_94.highlightedTerm=-1;},queueSearch:function(){var _95={handleAs:"json",load:this.searchCallback,timeout:this.xhrimeout,searchTerm:this.currentSearchTerm,context:this};_95.url=this.searchUrl+this.viewset+"/"+encodeURIComponent(this.currentSearchTerm.replace(/\./g," "))+this.searchUrlSuffix;dojo.xhrGet(_95);},primeTimeout:function(){this.clearTimeout();if(this.currentSearchTerm.length>=this.MIN_CHARS){if(this._searchResultsCache[this.currentSearchTerm]){this.displaySearchResults(this._searchResultsCache[this.currentSearchTerm],this.currentSearchTerm);}else{var _96=this;this.timeouts=setTimeout(function(){_96.queueSearch();},this.pause);}}else{this.hideSearchResults();}},clearTimeout:function(){if(this.timeouts){clearTimeout(this.timeouts);}},setCurrentSearchTerm:function(_97){this.currentSearchTerm=dojo.trim(_97);},searchCallback:function(_98){if(_98&&_98.results&&this.searchTerm){var _99=_98.results,_9a=this.searchTerm,_9b=this.context;_9b.displaySearchResults(_99,_9a);_9b._searchResultsCache[_9a]=_99;}},highlightTerm:function(_9c){var _9d=this.currentResultSet,_9e=_9d.length,_9f,_a0,_a1,_a2;if(_9e>0){_9f=(_9c===38)?-1:1;_a0=this.highlightedTerm;_a1=_a0+_9f;if(_a1>-1&&_a1<_9e){_a2=dojo.query("li",this.searchResults);if(_a0>-1){dojo.removeClass(_a2[_a0],"highlighted");}dojo.addClass(_a2[_a1],"highlighted");this.searchField.value=_9d[_a1];this.highlightedTerm=_a1;}}},searchResultClick:function(evt){var _a3=evt.target,_a4,_a5;if(_a3.nodeName==="A"){_a5=_a3.innerHTML;_a4=(_a5.indexOf("<span>")>-1);_a5=_a5.replace(/<span>/,"").replace(/<\/span>/,"");this.stashHistoricalSearchTerm(_a5);if(typeof cmCreatePageElementTag==="function"){if(_a4){cmCreatePageElementTag("Type Ahead","Search Interactions");}else{cmCreatePageElementTag("Search history","Search Interactions");}}}},searchResultKeyPress:function(){if(dojo.query(".highlighted",this.searchResults).length){if(typeof cmCreatePageElementTag==="function"){cmCreatePageElementTag("Type Ahead","Search Interactions");}}},stashHistoricalSearchTerm:function(_a6){var _a7=dojo.fromJson(this.getLocalStorage("recentSearches")||"[]"),i,len,_a8=[],obj={},_a9=this.SEARCH_HISTORY_LIMIT;_a7.unshift(_a6.toLowerCase());for(i=0,len=_a7.length;i<len;i++){if(!obj[_a7[i]]){obj[_a7[i]]=true;_a8.push(_a7[i]);}if(_a8.length===_a9){break;}}this.setLocalStorage("recentSearches",dojo.toJson(_a8));},cancelSearchRequest:function(){if(this._ajaxSearcRequest&&typeof this._ajaxSearcRequest.cancel==="function"){this._ajaxSearcRequest.cancel();}},setLocalStorage:function(key,_aa){return null;},getLocalStorage:function(key){return null;},_setupLocalStorage:function(){var _ab,_ac=WSI.config,_ad=(location.protocol==="https:"),_ae,_af;if("localStorage" in window&&window["localStorage"]!==null){this.setLocalStorage=function(key,_b0,_b1){if(typeof key!=="string"||typeof _b0!=="string"){return null;}if(!_b1){if(_ad){dojo.cookie("temp_local",_b0,{domain:_ac.cookieSubDomain,path:"/",expires:365});}else{dojo.cookie("sec_local",_b0,{domain:_ac.cookieSubDomain,path:"/",secure:true,expires:365});}}return window.localStorage.setItem(key,_b0);};this.getLocalStorage=function(key){return window.localStorage.getItem(key);};if(_ad){_ae=dojo.cookie("sec_local");if(_ae){this.setLocalStorage("recentSearches",_ae,true);dojo.cookie("sec_local",null,{domain:_ac.cookieSubDomain,path:"/",secure:true,expires:-1});}}else{_af=dojo.cookie("temp_local");if(_af){this.setLocalStorage("recentSearches",_af,true);dojo.cookie("temp_local",null,{domain:_ac.cookieSubDomain,path:"/",expires:-1});}}}}});}if(!dojo._hasResource["wsgc.js.Utils"]){dojo._hasResource["wsgc.js.Utils"]=true;dojo.provide("wsgc.js.Utils");(function(_b2,_b3){var _b4={},_b5={},_b6=WSI.innerShiv,_b7=null,_b8=!!navigator.userAgent.match(/iPad/i);_b2.declare("wsgc.js.Utils",null,{constructor:function(_b9,_ba){this._savedCartCookie=_b9;this._sessionCartCookie=_ba;this._registerSearchFieldEvents();this._registerInputPlaceholders();this._registerPopupNewWindowEvents();this._registerPopulateShippingFromBilling();this._registerChangeShipToEvents();this._registerInterstitialEvents();this._registerViewAllCookieBaker();this._setBasketCount();this._registerMultiSelect();this._setCellHeightByRow();this._footerJOELPopup();this._SMSForm();this._sidebarSMSForm();this._sidebarJOELPopup();this._registerThankYouNotesEvents();this._registerPromotionsSignInEvents();this._registerAosDCPickupEvents();this._registerAsynchronousShopImages();this._emailAFriendPreview();this._registerShopSortBy();this._nuclearFooter();this._bloomReach();this._registerOpenInParentWindowLink();this._autoEqualizeHeights();this._registerHoverFadeHandler();this._topNavRightAlign();if(_b2.byId("billing-info")){this._reisterBillingSyncOrder();}if(_b2.byId("paymentInformation")){this._scrollToPaymentPageErrors();this._registerSVCApply();this._registerCreditCardFieldEvents();this._registerPlaceOrder();this._registerSVCLRC();this._registerPromoRemove();this._registerPromoApplyEvents();}_b2.query(".forgotPassword").forEach(_b2.hitch(this,function(_bb){_b2.connect(_bb,"onclick",this,"handleForgotPasswordClick");}));var _bc=_b2.byId("mobileEquiv");if(_bc){_b2.connect(_bc,"onclick",this,"handleMobileEquivClick");}var _bd=_b2.byId("cartForm");if(_bd){_b2.connect(_b2.byId("cartForm"),"onsubmit",function(evt){_b2.query(".delete-item").forEach("item.disabled = true");return true;});}_b2.query("#choose-another-category-drop").forEach(function(_be){_b2.connect(_be,"onchange",this,function(evt){location.href=evt.currentTarget.value;});});_b2.query(".goBack").forEach(function(_bf){_b2.connect(_bf,"onclick",function(evt){evt.preventDefault();history.back();});});this.handleGuestRegistryPassword();if((typeof bazaarVoiceHost!=="undefined"&&document.referrer.match("^"+bazaarVoiceHost))||document.referrer===""){_b2.query("#recipes .goBack").forEach("item.style.display='none';");}if(_b2.byId("searchresults")){this._searchUtils=new wsgc.js.SearchUtils();}this._updateBannerCookie();_b2.query(".mboxDefault").forEach(function(_c0){if(_b2.style(_c0,"visibility")!=="visible"){_b2.style(_c0,"visibility","visible");}});if(WSI.isEnabled("bvAnswers")&&_b2.exists("WSI.bvAnsCalls")){var _c1=this.callFunctions,_c2=function(){if(window.$BV&&typeof window.$BV.configure==="function"&&typeof window.$BV.ui==="function"){_c1(WSI.bvAnsCalls);}else{setTimeout(_c2,500);}};_c2();}if(WSI.offsiteRequests.length){this._handleOffsiteRequests(WSI.offsiteRequests);WSI.offsiteRequests=[];}},POPUP_DEFAULT_HEIGHT:560,POPUP_DEFAULT_WIDTH:820,POPUP_DEFAULT_RESIZE:1,POPUP_DEFAULT_NAME:"AppPopup",_savedCartCookie:"",_sessionCartCookie:"",MULTI_BUY_CARTURL:"/shoppingcart/style-and-quantity.html",BANNER_COOKIE:"i",_multi_buy_items:null,MULTI_BUY_ERROR:"<p class=\"error\">Please select a product to add to your cart.</p>",formSubmitted:false,_searchController:null,_searchUtils:null,savedCreditCardSelected:false,savedCreditCardInfo:null,viewset:"ecom",placeHolderText:{},_registerAosDCPickupEvents:function(){var _c3=_b2.query(".dcPickupCbx");if(_c3.length===0){return;}var _c4=function(_c5){var _c6=_c5.parentNode.parentNode;_b2.query(".billingAddressUpdate",_c6).forEach("item.checked=false;");_b2.query(".aosDCPickupToggle").addClass("hidden");_b2.query(".dcField",_c6).forEach("dojo.addClass(item, 'hide');");_b2.query(".dcField input[type='text'], .dcField select",_c6).forEach("item.value='';");};var _c7=function(_c8){var _c9=_c8.parentNode.parentNode;_b2.query(".aosDCPickupToggle").removeClass("hidden");_b2.query(".dcField",_c9).forEach("dojo.removeClass(item, 'hide');");_b2.query(".dcField input[type='text'], .dcField select",_c9).forEach("item.value='';");};_c3.forEach(function(_ca){if(_ca.checked){_c4(_ca);}_b2.connect(_ca,"onclick",null,function(evt){var _cb=evt.currentTarget;if(_cb.checked){_c4(_cb);}else{_c7(_cb);}});});},_setBasketCount:function(){var _cc=_b2.cookie(this._sessionCartCookie.toUpperCase());if(typeof _cc=="undefined"){_cc=_b2.cookie(this._savedCartCookie.toUpperCase());}if((typeof _cc=="undefined")||(_cc.split("|").length<4)){return;}var _cd=_cc.split("|")[3];if(_b2.byId("cart-count")){if(_cd!=="0"){_b2.byId("cart-count").innerHTML="<span> : </span>"+_cd;}else{_b2.byId("cart-count").innerHTML="";}}},_registerSearchFieldEvents:function(){var _ce=_b2.byId("search-field"),_cf=_b2.byId("btnSearch"),_d0=(location.protocol==="https:"),_d1=_b2.cookie("sec_local"),_d2=_b2.cookie("temp_local");this._setViewSet();if(_ce&&WSI.searchType!=="google"){if((_d2&&!_d0)||(_d0&&_d1)){this._searchController=new wsgc.js.SearchController();}this.default_search_text=_ce.value;_b2.connect(_ce,"onfocus",this,function(evt){if(evt.currentTarget.value===this.default_search_text){evt.currentTarget.value="";}if(!this._searchController&&this.viewset!=="reg"){this._searchController=new wsgc.js.SearchController();}});_b2.connect(_ce,"onblur",this,function(evt){if(evt.currentTarget.value==""){evt.currentTarget.value=this.default_search_text;}});}if(_cf){_b2.connect(_cf,"click",this,function(evt){var _d3=_b2.byId("searchform"),_d4=_b2.byId("search-field"),_d5="&cm_sp=OnsiteSearch-_-GlobalNav-_-Button",_d6;evt.preventDefault();if(_d3&&_d3.action&&_ce&&_ce.value&&typeof cmCreateManualLinkClickTag==="function"){_d6=_d3.action+"?words="+encodeURIComponent(_ce.value)+_d5;cmCreateManualLinkClickTag(_d6,"GLOBAL_NAV","SEARCH");}if(_b2.query(".highlighted",this.searchResults).length&&typeof cmCreatePageElementTag==="function"){cmCreatePageElementTag("Search Interactions","Type Ahead");}if(this._searchController){this._searchController.stashHistoricalSearchTerm(_ce.value);}_d3.submit();});}},_registerInterstitialEvents:function(){var _d7=null;_b2.query("form.interstitialForm #btn-edit").forEach(function(_d8){_b2.connect(_d8,"onclick",this,"_handleInterstitialEditClick");},this);_b2.query("form.interstitialForm .btnEditBehavior").forEach(function(_d9){_b2.connect(_d9,"onclick",this,"_handleInterstitialEditClick");},this);_b2.query("form.interstitialForm .btn-preview").forEach(function(_da){_b2.connect(_da,"onclick",this,"_handleInterstitialPreviewClick");},this);_b2.query("form.interstitialForm #btn-continue").forEach(function(_db){_b2.connect(_db,"onclick",this,"_handleInterstitialContinueClick");},this);_b2.query(".interstitialForm .btn-continue-path").forEach(function(_dc){_b2.connect(_dc,"onclick",this,"_handleInterstitialContinueClick");},this);},_registerViewAllCookieBaker:function(){_b2.query(".pagination .view-all").connect("onclick",function(evt){_b2.cookie("viewall","1",{"path":"/"});});_b2.query(".pagination .view-by-page").connect("onclick",function(evt){_b2.cookie("viewall","0",{"expires":-1});});},_registerPopupNewWindowEvents:function(){WSI.Events.delegate("click",".popup",function(evt){_b2.stopEvent(evt);var _dd=_b2.attr(this,"rel");var _de;var _df,_e0,_e1,_e2;try{_de=_b2.fromJson(_dd);_df=(_de&&_de.dim&&_de.dim.height)?_de.dim.height:this.POPUP_DEFAULT_HEIGHT;_e0=(_de&&_de.dim&&_de.dim.width)?_de.dim.width:this.POPUP_DEFAULT_WIDTH;_e1=(_de&&_de.dim&&_de.dim.resize)?_de.dim.resize:this.POPUP_DEFAULT_RESIZE;_e2=(_de&&_de.name)?_de.name:this.POPUP_DEFAULT_NAME;}catch(e){_df=this.POPUP_DEFAULT_HEIGHT;_e0=this.POPUP_DEFAULT_WIDTH;_e1=this.POPUP_DEFAULT_RESIZE;_e2=this.POPUP_DEFAULT_NAME;}var _e3="toolbar=no,location=no,directories=no,scrollbars=1,resizable="+_e1+",height="+_df+",width="+_e0+",screenX=4,screenY=4,top=4,left=4";var win=window.open(this.href,_e2,_e3);if(win&&win.focus){win.focus();}if(_b2.attr(this,"pophref")){evt.href=_b2.attr(this,"pophref");}});WSI.Events.delegate("click",".newWindow",function(evt){_b2.stopEvent(evt);var _e4=_b2.attr(this,"rel");var _e5;var _e6;try{_e5=_b2.fromJson(_e4);_e6=(_e5&&_e5.name)?_e5.name:this.POPUP_DEFAULT_NAME;}catch(e){_e6=this.POPUP_DEFAULT_NAME;}var _e7="toolbar=yes,location=yes,directories=no,scrollbars=1,resizable=1";var win=window.open(this.href,_e6,_e7);if(win&&win.focus){win.focus();}});_b2.query(".close").forEach(function(_e8){_b2.connect(_e8,"onclick",function(evt){evt.preventDefault();evt.stopPropagation();window.close();});});_b2.query(".closeAndContinue").forEach(function(_e9){_b2.connect(_e9,"onclick",this,"_newParentWindow");},this);_b2.query(".driveParent").forEach(function(_ea){_b2.connect(_ea,"onclick",this,"_redirectParent");},this);_b2.query(".redirectParent").forEach(function(_eb){_b2.connect(_eb,"onclick",this,"_redirectParentNoClose");},this);WSI.Events.delegate("click",".print, .printButton",function(evt){var _ec=_b2.query("img[data-async-src]"),_ed=_ec.length;evt.preventDefault();if(_ed==0){window.print();}else{_ec.forEach(function(e,i){e.setAttribute("src",e.getAttribute("data-async-src"));_b2.connect(e,"onload",function(){_ed--;if(_ed==0){window.print();}});e.removeAttribute("data-async-src");});}});_b2.query(".rollover").forEach(function(_ee){_b2.connect(_ee,"onmouseover",function(evt){var _ef=evt.currentTarget.src.replace("_off","_on");evt.currentTarget.src=_ef;});_b2.connect(_ee,"onmouseout",function(evt){var _f0=evt.currentTarget.src.replace("_on","_off");evt.currentTarget.src=_f0;});_b2.connect(_ee,"onfocus",function(evt){var _f1=evt.currentTarget.src.replace("_off","_on");evt.currentTarget.src=_f1;});_b2.connect(_ee,"onblur",function(evt){var _f2=evt.currentTarget.src.replace("_on","_off");evt.currentTarget.src=_f2;});});_b2.query(".delete-item").forEach(function(_f3){_b2.connect(_f3,"onclick",function(evt){_b2.stopEvent(evt);var _f4=_f3.name;document.cartForm[_f4].value="true";_b2.byId("cartForm").submit();});});_b2.query(".checkoutButton").forEach(function(_f5){_b2.connect(_f5,"onclick",function(evt){_b2.stopEvent(evt);_b2.byId("checkout").value="true";_b2.byId("chkmode").value=_b2.hasClass(evt.currentTarget,"expressButton")?"xpress":"normal";_b2.byId("cartForm").submit();});});},_registerChangeShipToEvents:function(){var _f6=_b2.byId("shipToChanged");if(!_f6){return;}opener.location="/shoppingcart/";opener.location.reload(true);window.close();},_registerSVCApply:function(){var _f7=_b2.byId("applysvc");if(!_f7){return;}_b2.connect(_f7,"onclick",function(evt){var _f8=_b2.byId("svcCard.svcCardNumber");var _f9=_b2.byId("svcCard.pinNumber");if(_f8&&_f8.value===""){if(_f9&&_f9.value===""){var _fa=_b2.byId("applyPromoBlock");if(_fa){var _fb=_b2.byId("promoCode");if(_fb.value!==""){_b2.byId("promoApply").value="yes";}}var _fc=_b2.byId("svcApply");_fc.value="yes";return;}}var _fc=_b2.byId("svcApply");_fc.value="yes";});},_reisterBillingSyncOrder:function(){var _fd=_b2.byId("billingSubmit");if(!_fd){return;}_b2.connect(_fd,"onclick",this,function(evt){if(this.formSubmitted){_b2.stopEvent(evt);}else{this.formSubmitted=true;}});},_registerPlaceOrder:function(){var _fe=_b2.byId("placeOrder"),_ff=_b2.byId("buttonClick");if(!_fe){return;}_b2.connect(_fe,"onclick",this,function(evt){if(this.formSubmitted){evt.preventDefault();}else{this.formSubmitted=true;}});_b2.query("#action-buttons input[type='image']").connect("onclick",null,function(evt){if(_ff){_ff.value=evt.target.id;}});},_scrollToPaymentPageErrors:function(){var _100=_b2.byId("paymentInformation");if(!_100){return;}this.deferredPayment();var _101=_b2.byId("promotionsErrors");var _102=_b2.byId("svcError");var _103=_b2.byId("discountsApplied");var _104=_b2.byId("ccError");if(_101){if(_b2.query(".promotions-block").length>0){_b2.query(".promotions-block")[0].scrollIntoView(true);}}else{if(_102&&_b2.trim(_102.innerHTML)!==""){if(_b2.query(".gift-cards-and-help").length>0){_b2.query(".gift-cards-and-help")[0].scrollIntoView(true);}}else{if(_104&&_b2.trim(_104.innerHTML)!==""){if(_b2.query(".payment-information-block").length>0){_b2.query(".payment-information-block")[0].scrollIntoView(true);}}else{if(_103&&_b2.trim(_103.innerHTML)!==""){if(_b2.query(".gift-cards-and-help").length>0){_b2.query(".gift-cards-and-help")[0].scrollIntoView(true);}}}}}var _105=_b2.byId("creditCard.payType");if(_105.value==8){_b2.attr("creditCard.cardExpMonth","disabled",true);_b2.attr("creditCard.cardExpYear","disabled",true);_b2.attr("creditCard.cardVerificationNumber","disabled",true);}},_registerCreditCardFieldEvents:function(){var _106=_b2.byId("creditCard.payType"),_107=_b2.byId("icAvailable");if(!_106){return;}_b2.connect(_106,"onchange",_b2.hitch(this,function(evt){var _108=evt.target.value,_109=_b2.byId("creditCard.cardExpMonth"),_10a=_b2.byId("creditCard.cardExpYear"),_10b=_b2.byId("creditCard.cardVerificationNumber"),_10c=_b2.byId("allowZeroExp"),_10d=_b2.byId("creditCard.cardNumber");if(this.savedCreditCardSelected&&_108!=="scc"){this.savedCreditCardSelected=false;_b2.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_b2.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_109.value="";_10a.value="";_b2.attr(_10b,"disabled",false);_10b.value="";_b2.query("#edit-cc-link").forEach("dojo.addClass(item, 'hide');");}if(_108==="11"&&_107){this._displayCCFieldsForInstantCredit();}else{_b2.query(".sccHide, .icHide").forEach("dojo.removeClass(item, 'hide');");_b2.query(".sccDisable, .icDisable").forEach("dojo.attr(item, 'disabled', false);");_b2.attr(_10b,"disabled",false);_10c.value="N";_b2.removeClass(_10b,"hide");_109.options[0].text="Month";_10a.options[0].text="Year";_10d.value="";if(_108==="scc"){this.displaySavedCreditCard();}}this.deferredPayment();}));if(_106.value==="11"&&_107||(!_b2.byId("ccError")&&_107&&_b2.query("option[value='11']",_b2.byId("creditCard.payType")).length>0)){_106.value="11";this._displayCCFieldsForInstantCredit();}else{if(_106.value==="scc"||(!_b2.byId("ccError")&&_b2.query("option[value='scc']",_b2.byId("creditCard.payType")).length>0)){this.displaySavedCreditCard();}}},displaySavedCreditCard:function(){var _10e,_10f,ccvn,_110;if(!this.savedCreditCardInfo){_10e=_b2.byId("savedCCJSON");if(!_10e){return;}try{this.savedCreditCardInfo=_b2.fromJson(_10e.value);}catch(e){this.savedCreditCardInfo="";}if(this.savedCreditCardInfo===""){return;}}_10f=this.savedCreditCardInfo;this.savedCreditCardSelected=true;_b2.byId("creditCard.payType").value="scc";_b2.byId("creditCard.cardExpMonth").value=_10f.expireMonth;_b2.byId("creditCard.cardExpYear").value=_10f.expireYear;WSI.formV=new wsgc.js.InlineValidation();WSI.formV.hideAllCreditCardErrorMsgs();ccvn=_b2.byId("creditCard.cardVerificationNumber");_110=_b2.query(".ccvn");if(_10f.validate==="Y"||_10f.cardType==="8"){var _111=_b2.byId("allowZeroExp");if(_111){_111.value="Y";}}else{_110.forEach("dojo.removeClass(item, 'sccHide');");ccvn.value="";}_b2.query(".sccHide").forEach("dojo.addClass(item, 'hide');");_b2.query(".sccDisable").forEach("dojo.attr(item, 'disabled', true);");_b2.query("#edit-cc-link").forEach("dojo.removeClass(item, 'hide');");},_displayCCFieldsForInstantCredit:function(){var _112=_b2.byId("creditCard.cardExpMonth"),_113=_b2.byId("creditCard.cardExpYear"),_114=_b2.byId("creditCard.cardVerificationNumber"),_115=_b2.byId("allowZeroExp"),_116=_b2.byId("creditCard.cardNumber");_b2.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_b2.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_112.selectedIndex=0;_112.options[0].text="**";_b2.attr(_112,"disabled",true);_113.selectedIndex=0;_113.options[0].text="****";_b2.attr(_113,"disabled",true);_b2.removeClass(_114,"hide");_b2.attr(_114,"disabled",true);_116.value="****************";_115.value="Y";_b2.query(".icHide").forEach("dojo.addClass(item, 'hide');");_b2.query(".icDisable").forEach("dojo.attr(item, 'disabled', true);");WSI.formV=new wsgc.js.InlineValidation();WSI.formV.hideAllCreditCardErrorMsgs();WSI.formV.hideAllErrorMsgs(_b2.byId("creditCard.cardVerificationNumber"));},_registerPopulateShippingFromBilling:function(){var _117=_b2.byId("applyBillingAddtoShipping");if(_117&&_b2.hasClass(_117,"billToShipCopy")){_b2.connect(_117,"onclick",function(evt){var _118=evt.target.checked;if(_118){_b2.attr("shiptoAddress.fullName",{"value":_b2.byId("billtoAddress.fullName").value,"disabled":"disabled"});_b2.attr("shiptoAddress.addrLine1",{"value":_b2.byId("billtoAddress.addrLine1").value,"disabled":"disabled"});_b2.attr("shiptoAddress.addrLine2",{"value":_b2.byId("billtoAddress.addrLine2").value,"disabled":"disabled"});_b2.attr("shiptoAddress.city",{"value":_b2.byId("billtoAddress.city").value,"disabled":"disabled"});document.getElementById("shiptoAddress.state").value=document.getElementById("billtoAddress.state").value;_b2.byId("shiptoAddress.state").selectedIndex=_b2.byId("billtoAddress.state").selectedIndex;_b2.attr("shiptoAddress.state","disabled","true");_b2.attr("shiptoAddress.zip",{"value":_b2.byId("billtoAddress.zip").value,"disabled":"disabled"});_b2.attr("shiptoAddress.dayPhone",{"value":_b2.byId("billtoAddress.dayPhone").value,"disabled":"disabled"});_b2.attr("shiptoAddress.eveningPhone",{"value":_b2.byId("billtoAddress.eveningPhone").value,"disabled":"disabled"});_b2.query("#ship-account-info input, #ship-account-info select").addClass("disabled");}else{_b2.query("#ship-account-info input, #ship-account-info select").forEach(function(elem){elem.removeAttribute("disabled");});_b2.query("#ship-account-info input, #ship-account-info select").removeClass("disabled");}});if(_b2.attr(_117,"checked")===true){_b2.query("#ship-account-info input, #ship-account-info select").attr("disabled","disabled").addClass("disabled");}}},handleForgotPasswordClick:function(evt){_b2.stopEvent(evt);var form=_b2.byId("loginForm");if(form){form.action=WSI.config.secureAppUrl+"account/password-request-confirmation.html";form.submit();}},handleMobileEquivClick:function(evt){if(WSI.config){_b2.cookie(WSI.config.sitePref,"mobile",{domain:WSI.config.cookieSubDomain,path:"/"});}},_handleInterstitialEditClick:function(evt){_b2.stopEvent(evt);evt.preventDefault();_b2.byId("isEditMode").value="1";this._postInterstitialForm();},_handleInterstitialPreviewClick:function(evt){if(_b2.byId("isPreview")){_b2.byId("isPreview").value="1";}if(evt&&evt.currentTarget&&evt.currentTarget.id){var _119=evt.currentTarget.id.substr(10);if(_b2.byId("previewIndex")){_b2.byId("previewIndex").value=_119;}}_b2.stopEvent(evt);this._postInterstitialForm();},_handleInterstitialContinueClick:function(evt){_b2.stopEvent(evt);_b2.byId("isEditMode").value="0";this._postInterstitialForm();},_postInterstitialForm:function(){if(_b2.query(".interstitialForm").length>0){var form=_b2.query(".interstitialForm")[0];form.submit();}},_forwardToExternalSite:function(win,url){if(win){win.close();}var _11a=window.open(url);},_registerSVCLRC:function(){var _11b="";_b2.query(".removeSVCLRCButton").forEach(function(_11c){_b2.connect(_11c,"onclick",function(evt){if(!_b2.attr(evt.currentTarget,"svcnumber")){return false;}_11b=_b2.attr(evt.currentTarget,"svcnumber");_b2.byId("removeSvcLrc").value=_11b;return true;});});},_registerPromoRemove:function(){var _11d="";_b2.query(".removePromoButton").forEach(function(_11e){_b2.connect(_11e,"onclick",function(evt){if(!_b2.attr(evt.currentTarget,"promoCode")){return false;}_11d=_b2.attr(evt.currentTarget,"promoCode");_b2.byId("releasePromo").value=_11d;return true;});});},_newParentWindow:function(evt){var win;var url=evt.currentTarget.href;if(_b2.isFF){try{if(_b2.exists("window.opener.WSI.utils._forwardToExternalSite")){window.opener.WSI.utils._forwardToExternalSite(window,url);}else{win=window.open(url);window.close();}}catch(e){win=window.open(url);window.close();}}else{win=window.open(url);window.close();}},_redirectParent:function(evt){evt.preventDefault();evt.stopPropagation();var url=evt.currentTarget.href;if(_b2.exists("window.opener")){window.opener.location.href=url;if(_b2.exists("window.opener.focus")){window.opener.focus();}}else{var win=window.open(url);window.close();}window.close();},_redirectParentNoClose:function(evt){evt.preventDefault();evt.stopPropagation();var url=evt.currentTarget.href;if(_b2.exists("window.opener")){window.opener.location.href=url;}else{var win=window.open(url);}},deferredPayment:function(){var _11f=_b2.byId("creditCard.payType").value;var _120=_b2.byId("deferredPayment");if(_120){var _121=_b2.byId("deferPayments");var _122=_121.value.split(",");var _123=_b2.byId("creditCard.payType").options;var _124=_b2.byId("deferredCardType");for(var i=0;i<_122.length;i++){if(_11f===_122[i]){for(var j=0;j<_123.length;j++){if(_123[j].value==_11f){_124.innerHTML=_123[j].text;}}_b2.style(_120,{"display":"block"});break;}else{_b2.style(_120,{"display":"none"});}}}},_registerMultiSelect:function(){this._multi_buy_items=[];if(_b2.byId("productGroupIds")&&_b2.byId("productGroupIds").value!==""){this._multi_buy_items=_b2.byId("productGroupIds").value.split(",");}if(_b2.query("form[name='multiSelect']").length>0){_b2.query(".pagination a").connect("onclick",this,function(evt){var _125=_b2.query("form[name='multiSelect']")[0];var _126=evt.currentTarget.href;evt.preventDefault();this._writeMultiBuyItemsToField();_125.action=_126;_125.submit();});_b2.query(".btn-add-selected a").connect("onclick",this,function(evt){var _127=_b2.query("form[name='multiSelect']")[0];var _128=this.MULTI_BUY_CARTURL;evt.preventDefault();this._writeMultiBuyItemsToField();if(_b2.byId("productGroupIds")&&_b2.trim(_b2.byId("productGroupIds").value)!==""){_127.action=_128;_127.submit();}else{if(_b2.byId("pageErrorHook")){_b2.byId("pageErrorHook").innerHTML=this.MULTI_BUY_ERROR;window.scroll(0,0);}}});_b2.query(".muliBuyCheckbox").connect("onclick",this,"_handleMutliBuyCheckboxClick");}},_writeMultiBuyItemsToField:function(){if(_b2.byId("productGroupIds")&&this._multi_buy_items){_b2.byId("productGroupIds").value=this._multi_buy_items.join(",");}},_handleMutliBuyCheckboxClick:function(evt){var _129=evt.currentTarget;var _12a=evt.currentTarget.value;if(_129.checked){if(_b2.indexOf(this._multi_buy_items,_12a)===-1){this._multi_buy_items.push(_12a);}}else{if(_b2.indexOf(this._multi_buy_items,_12a)>-1){this._multi_buy_items.splice(_b2.indexOf(this._multi_buy_items,_12a),1);}}},_setCellHeightByRow:function(){if(!(_b2.byId("searchresults")||_b2.byId("one-shipment"))){if(_b2.query("ul.product-list").length>0){var _12b=_b2.query("ul.product-list");if(_12b.length>0){var _12c=_b2.query("div.subcat-list",_12b[0]).length>0;if(!_12c){_b2.forEach(_12b,function(row){var _12d=0;var _12e=_b2.query("li",row);_12e.forEach(function(el){_12d=_b2.marginBox(el).h>_12d?_b2.marginBox(el).h:_12d;});_12e.forEach(function(el){_b2.marginBox(el,{h:_12d});el.style.borderBottomWidth="1px";});});}else{_b2.forEach(_12b,function(row){var _12f=0;var _130=_b2.query("li div.product-name a",row);_130.forEach(function(el){_12f=_b2.marginBox(el).h>_12f?_b2.marginBox(el).h:_12f;});_130.forEach(function(el){var _131=_12f-_b2.marginBox(el).h+"px";_b2.style(el,"marginTop",_131);});var _132=0;var _133=_b2.query("div.subcat-list",row);_133.forEach(function(el){_132=_b2.marginBox(el).h>_132?_b2.marginBox(el).h:_132;});_133.forEach(function(el){_b2.marginBox(el,{h:_132});});});}}}}},_footerJOELPopup:function(){var _134=_b2.byId("joinEmail");if(_134){_b2.connect(_134,"onsubmit",function(evt){evt.preventDefault();evt.stopPropagation();var url=document.forms.joinEmail.action+"?email="+document.forms.joinEmail.email.value;var _135="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_135);win.focus();});}},_SMSForm:function(){var _136=_b2.byId("joinSMS");if(_136){_b2.connect(_136,"onsubmit",function(evt){_b2.stopEvent(evt);var url=_136.action+"?mobileNumber="+encodeURIComponent(_136.mobileNumber.value),_137="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4",win=window.open(url,"joinsms",_137);win.focus();});}},_sidebarSMSForm:function(){var _138=_b2.byId("joinSMS2");if(_138){_b2.connect(_138,"onsubmit",function(evt){_b2.stopEvent(evt);var url=_138.action+"?mobileNumber="+encodeURIComponent(_138.mobileNumber.value),_139="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4",win=window.open(url,"joinsms",_139);win.focus();});}},_sidebarJOELPopup:function(){var _13a=_b2.byId("joinEmail2");if(_13a){_b2.connect(_13a,"onsubmit",function(evt){evt.preventDefault();evt.stopPropagation();var url=document.forms.joinEmail2.action+"?email="+document.forms.joinEmail2.email.value;var _13b="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_13b);win.focus();});}},_registerThankYouNotesEvents:function(){if(_b2.byId("registry-thank-you-notes")){_b2.query(".thankYouSort").forEach(function(item){_b2.connect(item,"onchange",null,function(evt){_b2.byId("frmSort").submit();});});_b2.query(".submitChanges").forEach(function(item){_b2.connect(item,"onclick",null,function(evt){_b2.byId("thank-you-notes-form").submit();});});}},_registerInputPlaceholders:function(){var _13c=[_b2.byId("footer-email-field"),_b2.byId("sidebar-email-field"),_b2.byId("footer-sms-field"),_b2.byId("sidebar-sms-field")],_13d=function(_13e,_13f){_13f.placeHolderText[_13e.id]=_13e.value;_b2.connect(_13e,"onfocus",_13f,function(evt){var _140=evt.currentTarget;if(_140.value===this.placeHolderText[_13e.id]){_140.value="";}});_b2.connect(_13e,"onblur",_13f,function(evt){var _141=evt.currentTarget;if(_141.value===""){_141.value=this.placeHolderText[_13e.id];}});},i,len;for(i=0,len=_13c.length;i<len;i++){if(_13c[i]){_13d(_13c[i],this);}}},_emailAFriendPreview:function(){var _142=_b2.byId("emailAFriend");if(!_142){return;}var _143=_b2.byId("btn-preview");_b2.connect(_143,"onclick",function(evt){_b2.byId("preview").value="true";});},_registerPromotionsSignInEvents:function(){var _144=_b2.byId("apply-tax-exemption");if(!_144){return;}var _145=_b2.byId("yesexemption");if(_b2.byId("yesexemption").checked){_b2.removeClass("termsBlock","hide");}var _146=_b2.byId("noexemption");_b2.connect(_145,"onclick",function(evt){_b2.byId("termsBlock").className="";_b2.query(".message").forEach("item.className='hide';");});_b2.connect(_146,"onclick",function(evt){_b2.byId("termsBlock").className="hide";_b2.query(".message").forEach("item.className='hide';");});_b2.connect(_b2.byId("accepttoc"),"onclick",function(evt){_b2.query(".message").forEach("item.className='hide';");});if(_b2.byId("yesexemption").checked&&_b2.byId("accepttoc").checked){_b2.query(".message").forEach("item.className='hide';");}if(_b2.byId("noexemption").checked){_b2.query(".message").forEach("item.className='hide';");_b2.query("#termsBlock").forEach("item.className='hide';");}},_registerShopSortBy:function(){_b2.query("#sortBy").connect("onchange",null,function(evt){var _147={best:"Best Match",priceAsc:"Price Low to High",priceDesc:"Price High to Low",ratingAsc:"Rating Low to High",ratingDesc:"Rating High to Low","new":"New",bestSeller:"Best Seller"};if(typeof cmCreatePageElementTag==="function"){var _148=window.location.pathname.substr(0,8).match("/search/")?"Search Interactions":"Shop Interactions";cmCreatePageElementTag("Sort_"+_147[evt.currentTarget.value],_148);}if(_b2.byId("regListForm")){_b2.byId("regListForm").submit();}else{if(_b2.byId("sortByForm")){_b2.byId("sortByForm").submit();}}});},_registerPromoApplyEvents:function(){var _149=_b2.byId("applyPromoBlock");if(_149){var _14a=_b2.byId("applyPromo");if(_14a){_b2.connect(_14a,"onclick",function(evt){_b2.byId("promoApply").value="yes";});}}else{return;}},bvRatingsDisplayed:function(_14b,_14c,_14d,_14e,_14f){var _150=_b2.byId("BVReviewsContainer");var _151=_b2.byId("BVSecondaryCustomerRatings");var _152=_b2.byId("BVSVPLinkContainer");var _153=_b2.byId("reviews-controls");var _154=0;if(_14b>0){if(_150){_b2.removeClass("BVReviewsContainer","hide");_150.style.display="block";}if(_151){_150.style.display="block";}if(_152){_152.style.display="block";}if(_153){_153.style.display="block";}var _155;if(!cmCategoryId||cmCategoryId===""){if(_b2.byId("pipCategoryId")){_155=_b2.byId("pipCategoryId").value;}else{_155=" ";}if(_b2.byId("registrantid")&&(_b2.byId("registrantid").value!="")){_155="R:"+_155;}else{_155="E:"+_155;}}else{_155=cmCategoryId;}var _156="PRODUCT";var type;if(_14f.length>7){type=_14f.substring(0,7);if(type.toUpperCase()==="RECIPE."){_156="RECIPE";}}if(typeof cmCreateConversionEventTag==="function"&&_b2.query(".read-reviews a").length&&typeof WSI.groupName!=="undefined"){_b2.query(".read-reviews a").connect("onclick",function(evt){var _157=WSI.groupName;var _158=_14f.toUpperCase()+"-_-"+_157.toUpperCase()+"-_-"+_155.toUpperCase();if(_156==="RECIPE"){_158="-_--_--_--_-"+_157.toUpperCase();}cmCreateConversionEventTag(_156+" REVIEWS: READ A REVIEW","2",_156+" REVIEWS","0",_158);});}if(typeof cmCreateConversionEventTag==="function"&&_150&&typeof WSI.groupName!=="undefined"){_b2.query("a[name*='ReadAllReviews']",_150).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _159=WSI.groupName;var _15a=_14f.toUpperCase()+"-_-"+_159.toUpperCase()+"-_-"+_155.toUpperCase();if(_156==="RECIPE"){_15a="-_--_--_--_-"+_159.toUpperCase();}cmCreateConversionEventTag(_156+" REVIEWS: USER REVIEWS","2",_156+" REVIEWS","0",_15a);if(_b2.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_150&&typeof WSI.groupName!=="undefined"){_b2.query("a[name*='AddPositiveFeedback']",_150).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _15b=WSI.groupName;var _15c=_14f.toUpperCase()+"-_-"+_15b.toUpperCase()+"-_-"+_155.toUpperCase();if(_156==="RECIPE"){_15c="-_--_--_--_-"+_15b.toUpperCase();}cmCreateConversionEventTag(_156+" REVIEWS: HELPFUL REVIEW","2",_156+" REVIEWS","0",_15c);});});}if(typeof cmCreateConversionEventTag==="function"&&_150&&typeof WSI.groupName!=="undefined"){_b2.query("a[name*='AddNegativeFeedback']",_150).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _15d=WSI.groupName;var _15e=_14f.toUpperCase()+"-_-"+_15d.toUpperCase()+"-_-"+_155.toUpperCase();if(_156==="RECIPE"){_15e="-_--_--_--_-"+_15d.toUpperCase();}cmCreateConversionEventTag(_156+" REVIEWS: UNHELPFUL REVIEW","2",_156+" REVIEWS","0",_15e);});});}if(typeof cmCreateConversionEventTag==="function"&&_150&&typeof WSI.groupName!=="undefined"){_b2.query(".BVRRSocialBookmarkingSharingLinkFacebook",_150).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _15f=WSI.groupName;var _160=_14f.toUpperCase()+"-_-"+_15f.toUpperCase()+"-_-"+_155.toUpperCase()+"-_-FACEBOOK";if(_156==="RECIPE"){_160="-_--_--_-FACEBOOK-_-"+_15f.toUpperCase();}cmCreateConversionEventTag(_156+" REVIEWS: SHARED REVIEW","2",_156+" REVIEWS","0",_160);if(_b2.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_150&&typeof WSI.groupName!=="undefined"){_b2.query(".BVRRSocialBookmarkingSharingLinkDigg",_150).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _161=WSI.groupName;var _162=_14f.toUpperCase()+"-_-"+_161.toUpperCase()+"-_-"+_155.toUpperCase()+"-_-DIGG";if(_156==="RECIPE"){_162="-_--_--_-DIGG-_-"+_161.toUpperCase();}cmCreateConversionEventTag(_156+" REVIEWS: SHARED REVIEW","2",_156+" REVIEWS","0",_162);if(_b2.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_150&&typeof WSI.groupName!=="undefined"){_b2.query(".BVRRSocialBookmarkingSharingLinkDelIcioUs",_150).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _163=WSI.groupName;var _164=_14f.toUpperCase()+"-_-"+_163.toUpperCase()+"-_-"+_155.toUpperCase()+"-_-DELICIOUS";if(_156==="RECIPE"){_164="-_--_--_-DELICIOUS-_-"+_163.toUpperCase();}cmCreateConversionEventTag(_156+" REVIEWS: SHARED REVIEW","2",_156+" REVIEWS","0",_164);if(_b2.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_150&&typeof WSI.groupName!=="undefined"){_b2.query(".BVRRSocialBookmarkingSharingLinkTwitter",_150).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _165=WSI.groupName;var _166=_14f.toUpperCase()+"-_-"+_165.toUpperCase()+"-_-"+_155.toUpperCase()+"-_-TWITTER";if(_156==="RECIPE"){_166="-_--_--_-TWITTER-_-"+_165.toUpperCase();}cmCreateConversionEventTag(_156+" REVIEWS: SHARED REVIEW","2",_156+" REVIEWS","0",_166);if(_b2.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_153&&typeof WSI.groupName!=="undefined"){_b2.query("#all-reviews-container a",_153).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _167=WSI.groupName;var _168=_14f.toUpperCase()+"-_-"+_167.toUpperCase()+"-_-"+_155.toUpperCase();if(_156==="RECIPE"){_168="-_--_--_--_-"+_167.toUpperCase();}cmCreateConversionEventTag(_156+" REVIEWS: READ ALL REVIEWS","2",_156+" REVIEWS","0",_168);});});}if(typeof cmCreateConversionEventTag==="function"&&_b2.byId("BVCustomerRatings")&&typeof WSI.groupName!=="undefined"){_b2.query("a[name*='TrackingTag_Rating_Summary']",_b2.byId("BVCustomerRatings")).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){_b2.byId("bv-tabs").scrollIntoView();var _169=_b2.query(".tab.bv-rr")[0],_16a;if(document.createEvent){_16a=document.createEvent("HTMLEvents");_16a.initEvent("click",true,true);return !_169.dispatchEvent(_16a);}else{_16a=document.createEventObject();return _169.fireEvent("onclick",_16a);}});});}}else{if(_152){_153.style.display="none";}}},bvCheckDisplayLoadState:function(){if(!BVisLoaded){var page=_b2.byId("BVFrame").src;page="http://reviews.williams-sonoma.com/logging?page="+escape(page);_b2.byId("BVReviewsContainer").innerHTML="<!-- Review retrieval timed out -->";}},bvCheckPagesLoadState:function(){if(!BVisLoaded){_b2.byId("BVSubmissionFrame").src="";_b2.byId("BVSubmissionContainer").innerHTML="Review Submission Currently Unavailable";}},_registerAsynchronousShopImages:function(){var _16b=_b2.query("img[data-async-src]");this.asyncImages=[];this.currentImage=[0,null];if(_16b.length){_16b.forEach(function(e){this.asyncImages.push([_b2.coords(e,true).y,e]);},this);_b2.connect(window,"onscroll",this,this._loadAsynchronousShopImages);this._loadAsynchronousShopImages();}},_loadAsynchronousShopImages:function(){bottomThreshold=(document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||window.innerHeight)*2;while(this.asyncImages.length&&(this.currentImage[0]<bottomThreshold)){this.currentImage=this.asyncImages.shift();if(_b2.attr(this.currentImage[1],"data-async-src")){this.currentImage[1].setAttribute("src",_b2.attr(this.currentImage[1],"data-async-src"));this.currentImage[1].removeAttribute("data-async-src");}}},_handleOffsiteRequests:function(_16c){_16c=_16c||[];for(var i=0,len=_16c.length;i<len;++i){var _16d=_16c[i],type=_16d[0],url=_16d[1],_16e=_16d[2]||{};switch(type){case "css":this.loadStylesheet(url,_16e);break;case "js":this.loadScript(url);break;}}},loadScript:function(url,_16f){if(this.isScriptLoaded(url)){return;}var _170=new _b2._Url(document.location.href),_171=new _b2._Url(url),self=this,_172;if(_170.scheme===_171.scheme&&_170.host===_171.host&&_170.port===_171.port){_b2.xhrGet({url:url,load:function(_173){self._xhrScript(_173);self.setScriptLoaded(url);if(_16f&&_b2.isFunction(_16f)){_16f();}}});}else{this.docHead=this.docHead||_b2.query("head")[0];_172=_b2.create("script",{type:"text/javascript"});_172[_b2.isIE?"onreadystatechange":"onload"]=function(){if(!_b2.isIE||this.readyState==="loaded"||this.readyState==="complete"){self.setScriptLoaded(url);if(_16f&&_b2.isFunction(_16f)){_16f();}}};_172.src=url;_b2.place(_172,this.docHead);}},loadStylesheet:function(url,_174,_175){if(this.isStylesheetLoaded(url)){return;}var _176=document.createElement("link"),self=this;_b2.attr(_176,_b2.mixin(_174||{},{rel:"stylesheet",type:"text/css",href:url,onload:function(){if(_175){_175();}}}));this.docHead=this.docHead||_b2.query("head")[0];this.docHead.appendChild(_176);self.setStylesheetLoaded(url);},setStylesheetLoaded:function(urls){if(_b2.isArray(urls)){for(var i=0,len=urls.length;i<len;++i){_b4[urls[i]]=true;}}else{_b4[urls]=true;}},setScriptLoaded:function(urls){if(_b2.isArray(urls)){for(var i=0,len=urls.length;i<len;++i){_b5[urls[i]]=true;}}else{_b5[urls]=true;}},isStylesheetLoaded:function(url){return _b4[url];},isScriptLoaded:function(url){return _b5[url];},_xhrScript:function(_177){if(_177!==""){var _178,_179;_178=_b2.query("head")[0];_179=document.createElement("script");_179.type="text/javascript";_179.text=_177;_178.appendChild(_179);}},_setViewSet:function(){var _17a=_b2.byId("type-ahead-viewset");if(_17a&&_17a.value&&_17a.value!=="ecom"){this.viewset=_17a.value;}},handleGuestRegistryPassword:function(){var _17b=_b2.byId("guestPassword");if(_17b){_b2.connect(_17b,"onfocus",function(evt){_b2.query("#securityLevelPassword").forEach("item.checked='checked';");});}},loadFragment:function(_17c,_17d){if(_b2.isObject(_17c)){_17d=_17c;_17c="GET";}var href=WSI.utils.stripBaseUrlWhenHrefHasAnchor(_17d.url);function load(data){data=data.replace(/<script[^>]+type=(['"])text\/javascript\1[^>]*>([\s\S]*?)<\/script>/gim,function(_17e,_17f,src){if(_b2.trim(src)){(window.execScript||function(src){window["eval"].call(window,src);})(src);}return "";});if(_17d.load){_17d.load(data);}_b2.publish("/fragment/loaded",[{href:href,data:data}]);};if(href.length&&href.charAt(0)==="#"){try{href=href.substr(1);var _180=_b2.byId(href);if(_180.nodeName==="SCRIPT"&&_b2.attr(_180,"type")==="text/html"){var _181=arguments.callee.templates||(arguments.callee.templates={});_181[href]=_181[href]||WSI.utils.template(_b2.trim(_180.innerHTML));_180=_181[href]();}else{_180=_180.innerHTML;}load(_180);}catch(error){if(_17d.error){_17d.error(error);}}}else{_b2.xhr(_17c,_b2.mixin({},_17d,{load:load,error:function(_182){if(_17d.error){_17d.error(_182);}}}));}},connect:function(obj,_183,_184,_185,_186){var _187=_183.replace(/^on/,"");if(WSI.earlyEventQueues&&WSI.earlyEventQueues[_187]&&obj){var _188=WSI.earlyEventQueues[_187][obj];if(_188&&_188!=="drained"){var ctx=_184||obj;var _189=typeof _185==="string"?ctx[_185]:_185;while(_188.length){var evt=_188.shift();_189.call(ctx,_186?evt:_b2.fixEvent(evt));}WSI.earlyEventQueues[_187][obj]="drained";}}return _b2.connect.apply(_b2,arguments);},stopEarlyEventCapture:function(){for(var _18a in (WSI.earlyEventQueues||{})){if(document.detachEvent){document.detachEvent("on"+_18a,WSI.capturingEventHandler);}else{document.removeEventListener(_18a,WSI.capturingEventHandler,true);}}WSI.earlyEventQueues={};_b2.query(".captureEarlyEvents").removeClass("earlyEventsCaptured").removeClass("captureEarlyEvents");},templateSettings:{evaluate:/\[%([\s\S]+?)%\]/g,interpolate:/\[%=([\s\S]+?)%\]/g},template:function(str,data){var c=this.templateSettings;var tmpl="var __p=[],print=function(){__p.push.apply(__p,arguments);};"+"with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(_18b,code){return "',"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+",'";}).replace(c.evaluate||null,function(_18c,code){return "');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('";}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var func=new Function("obj",tmpl);return data?func(data):func;},_bloomReach:function(){var _18d=_b2.byId("br-more-products-widget"),_18e=_b2.byId("br-related-searches-widget");if(_18d){_b2.connect(_18d,"onclick",this,function(evt){var _18f=evt.target,_190;if(_b2.hasClass(_18f.parentNode,"br-more-widget-view")){evt.preventDefault();_b2.query(".br-more-widget",_18d).forEach("item.style.display='none';");_190=_b2.attr(_18f,"href").replace(/^[^#]*/,"");if(_190){_b2.query(_190,_18d).forEach("dojo.removeClass(item, 'hide');");}if(_18e){this._equalizeHeight(_18d,_18e);}}else{if(_b2.hasClass(_18f.parentNode,"br-more-widget-popup-close")){evt.preventDefault();_b2.query(".br-more-widget-popup",_18d).forEach("dojo.addClass(item, 'hide');");_b2.query(".br-more-widget",_18d).forEach("item.style.display='block';");if(_18e){this._equalizeHeight(_18d,_18e);}}}});}if(_18d&&_18e){this._equalizeHeight(_18d,_18e);}},_equalizeHeight:function(_191,_192){var _193;if(_191&&_192){_191.style.height="auto";_192.style.height="auto";_193=Math.max(_b2.marginBox(_191).h,_b2.marginBox(_192).h)-1;_b2.marginBox(_191,{h:_193});_b2.marginBox(_192,{h:_193});}},registerAvsOverrideElementTagHandler:function(_194,_195,_196){if((_194||_194==="")&&_195&&_196){_b2.query("form[name="+_194+"]").connect("submit",function(evt){_195=_b2.isArray(_195)?_195:[_195];_b2.some(_195,function(_197){var _198=_b2.byId(_197+".overideAddressVerification");if(_198&&_198.checked){cmCreatePageElementTag(_196,"AVS",null,null,null,"");return true;}});});}},_updateBannerCookie:function(){var _199;if(_b2.exists("WSI.bannerCookie")){_199=WSI.bannerCookie;if(_199.cookie&&_199.value){_b2.cookie(_199.cookie,_199.value,{path:"/",domain:_199.domain});}}},swapClasses:function(_19a,_19b,_19c){if(_19a.nodeName){_19a=_b2.NodeList(_19a);}_19a.filter("."+_19b).removeClass(_19b).addClass(_19c);return _19a;},closest:function(_19d,_19e){var node=_19e;do{if(_b2._filterQueryResult([node],_19d).length){return node;}}while((node=node.parentNode)&&node.nodeType===1);},callFunctions:function(_19f){if(_b2.isArray(_19f)){for(var i=0,len=_19f.length;i<len;i++){if(typeof _19f[i]==="function"){_19f[i]();}}}},initXHRDialog:function initXHRDialog(_1a0,_1a1){var _1a2,_1a3,i,len,_1a4;_b2.query(".XHRForm").forEach(function(item){_b2.connect(item,"onsubmit",null,function(evt){var _1a5="get",_1a6=10000;_b2.stopEvent(evt);if(this.submitted){return;}else{this.submitted=true;}if(item.method.toUpperCase()==="POST"){_1a5="post";}_b2.xhr(_1a5,{timeout:_1a6,form:item,handleAs:"text",load:function(data,_1a7){var _1a8=WSI.config,_1a9,_1aa=_1a7.xhr;_1a9=_1aa.getResponseHeader("Location");if(_1a9){window.location.href=_1a9;}else{if(data&&data.length){_1a0.containerNode.innerHTML=data;initXHRDialog(_1a0,_1a1);}else{_1a0.close();}}},error:function(_1ab,_1ac){this.submitted=false;_b2.place("<ul class='error'><li>A communication error occurred - Please try gain.</li></ul>",_1a0.containerNode,"first");}});});});if(_1a1){_1a1=_b2.isArray(_1a1)?_1a1:[_1a1];for(i=0,len=_1a1.length;i<len;i++){_1a2=_1a1[i];if(typeof _1a2==="function"){_1a2(this);}}}_b2.query(".closeButton").forEach(function(item){_b2.connect(item,"onclick",_1a0,function(evt){_b2.stopEvent(evt);this.close();});});},addDialogLoadHandler:function addDialogLoadHandler(_1ad,_1ae){WSI.dialogLoadHandlers=WSI.dialogLoadHandlers||{};WSI.dialogLoadHandlers[_1ad]=_1ae;},removeDialogLoadHandler:function removeDialogLoadHandler(_1af){if(WSI.dialogLoadHandlers){delete WSI.dialogLoadHandlers[_1af];}},smoothScrollTo:function(_1b0){if(_b7!=null){return;}_b7=_1b0;if(_1b0){var _1b1=function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}return -c/2*((--t)*(t-2)-1)+b;};var _1b2=function(elem){var _1b3=0;if(elem.offsetParent){do{_1b3+=elem.offsetTop;}while(elem=elem.offsetParent);}return _1b3;};var _1b4=_1b2(_1b0);var _1b5=window.pageYOffset||document.documentElement.scrollTop;var _1b6=_1b4-_1b5;var _1b7=300;var _1b8=15;var wait=_1b7/_1b8;var _1b9=0;var _1ba=setInterval(function(){var cur=_1b1(_1b9,_1b5,_1b6,_1b8);window.scrollTo(0,cur);if(_1b9===_1b8){clearInterval(_1ba);_b7=null;}_1b9++;},wait);}},getBrowserScrollbarWidth:function(){return WSI.config.scrollbarWidth||(WSI.config.scrollbarWidth=(function(){var _1bb=_b2.place("<div style=\"position:absolute;top:0;left:0;visibility:hidden;width:200px;height:150px;overflow:hidden;margin-left:-9999px;\"/>",_b2.body());var _1bc=_b2.place("<p style=\"width:100%;height:200px;\"/>",_1bb);var _1bd=_1bc.offsetWidth;_b2.style(_1bb,"overflow","scroll");var _1be=_1bc.offsetWidth;if(_1bd===_1be){_1be=_1bb.clientWidth;}_b2.destroy(_1bb);return _1bd-_1be;})());},_nuclearFooter:function(){_b2.query(".nso-title span").forEach(function(elem){_b2.connect(elem,"onclick",function(evt){var _1bf="nso-"+elem.id;if(_b2.style(_1bf,"visibility")=="visible"){_b2.style(_1bf,"visibility","hidden");_b2.byId(elem.id).innerHTML="[+]";}else{_b2.query(".nso-brand").forEach(function(_1c0){_b2.style(_1c0,"visibility","hidden");});_b2.query(".nso-title span").forEach(function(_1c1){_b2.byId(_1c1.id).innerHTML="[+]";});_b2.style(_1bf,"visibility","visible");_b2.byId(elem.id).innerHTML="[&ndash;]";}});});},_registerOpenInParentWindowLink:function(){_b2.query(".openInParentWindow").forEach(function(elem){_b2.connect(elem,"click",function(evt){_b2.stopEvent(evt);(window.opener||window).location.href=_b2.attr(elem,"href");if(window.opener){window.close();}});});},stripBaseUrlWhenHrefHasAnchor:function(href){var _1c2=href.match(/#.*$/);return (_1c2!==null)?_1c2[0]:href;},toDom:function(src){if(_b2.isIE<=8){_b6.innerHTML=src;if(_b6.childNodes.length===1){return _b6.firstChild;}else{return _b6.childNodes;}}else{return _b2._toDom(src);}},_autoEqualizeHeights:function(){_b2.query(".equalizeHeights").forEach(this.equalizeHeights);},equalizeHeights:function(_1c3){var _1c4=0;_b2.query(">*",_1c3).forEach(function(elem){_1c4=Math.max(_1c4,_b2.contentBox(elem).h);}).style({minHeight:_1c4+"px"});},_registerHoverFadeHandler:function(){WSI.Events.delegate("mousemove",".hoverFade:not(.hoverFadeActive)",_1c5);function _1c5(evt){var elem=this,_1c6=_b2.position(elem),_1c7=_b2.query(".hoverFadeTarget",elem),_1c8=true,_1c9=_b2.connect(_b2.body(),"mousemove",function(evt){var x=evt.clientX-_1c6.x,y=evt.clientY-_1c6.y;if((_1c8&&(x<0||x>_1c6.w||y<0||y>_1c6.h))||WSI.utils.closest(".hoverFadeActive",evt.target)!==elem){_1ca.stop();_b2.disconnect(_1c9);var _1cb=_b2.fx.combine(_1c7.map(function(_1cc){return _b2.animateProperty({node:_1cc,properties:{opacity:0},duration:150});}));_b2.connect(_1cb,_1c8?"onBegin":"onEnd",function(){_b2.removeClass(elem,"hoverFadeActive");});_1cb.play();_1c8=false;}}),_1ca=_b2.fx.combine(_1c7.map(function(_1cd){return _b2.animateProperty({node:_1cd,properties:{opacity:1},delay:_b8?0:150,duration:150});}));if(_b8){var temp=_b2.place("<span/>",_b2.body());setTimeout(function(){_b2.body().removeChild(temp);});}_b2.connect(_1ca,"onEnd",function(){_1c8=false;});_1ca.play();_b2.addClass(elem,"hoverFadeActive");_b2.stopEvent(evt);};},_topNavRightAlign:function(_1ce){var _1cf=_b2.query("#topnav-container .nav-menu")[0],_1d0=function(){var _1d1=_b2.contentBox(_1cf);_b2.query(".nav-columns",_1cf).forEach(function(menu){_b2.style(menu,"left","auto");var pos=_b2.marginBox(menu),_1d2=menu,_1d3=0,_1d4=0;_b2.query(".col, .spotlight",menu).map(function(col){_1d3+=_b2.marginBox(col).w;});do{_1d4+=_b2.style(_1d2,"padding-left")+_b2.style(_1d2,"border-left-width");_1d2=_1d2.parentNode;}while(_1d2!==_1cf.parentNode);_1d3+=_b8?1:0;if(pos.l+_1d3+_1d4>_1d1.w){_b2.style(menu,{width:_1d3+"px",left:Math.max(0,_1d1.w-(_1d3+_1d4))+"px"});}});};if(_1ce){_1d0();}else{function _1d5(evt){_1d0();WSI.Events.undelegate("mouseover",_1d5);};WSI.Events.delegate("mouseover","#topnav-container .nav-menu li",_1d5);}},asyncLoadTopNav:function(url){var self=this;this.loadFragment({url:url,load:function(data){var _1d6=self.toDom(data),_1d7=_b2.query("#topnav-container .nav-columns");_b2.query(".nav-columns",_1d6).forEach(function(menu,i){_b2.style(menu,"opacity",!!_1d7.at(i).style("opacity")?1:0);_1d7.at(i).replaceWith(menu);});_b2.query("#topnav-container .equalizeHeights").forEach(self.equalizeHeights);self._topNavRightAlign(true);},error:function(_1d8){_b2.query("#topnav-container .nav-placeholder").remove();}});}});}(dojo));dojo.provide("wsgc.nls.wsgc_en-us");dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.en_us");dijit.nls.loading.en_us={"loadingState":"Loading...","errorState":"Sorry, an error occurred"};}if(!dojo._hasResource["wsgc.js.Dataset"]){dojo._hasResource["wsgc.js.Dataset"]=true;(function(dojo,_1d9){var _1da="data-";function _1db(_1dc){return /^\s*{.*}\s*$/.test(_1dc)?dojo.fromJson(_1dc):(_1dc||{});};function _1dd(attr){return _1da+attr.toLowerCase();};WSI.dataset=dojo.mixin(dojo.provide("wsgc.js.Dataset"),{get:function get(elem,attr,_1de){if(_1de){var name=_1dd(attr),_1df={};while(elem){if(dojo.hasAttr(elem,name)){_1df=dojo.mixin(get(elem,attr),_1df);}elem=elem.parentNode;}return _1df;}else{return _1db(elem.getAttribute(_1dd(attr))||"{}");}},set:function(elem,attr,_1e0){elem.setAttribute(_1dd(attr),dojo.isObject(_1e0)?dojo.toJson(_1e0):_1e0);},"delete":function(elem,attr){elem.removeAttribute(_1dd(attr));},keys:function(elem){var keys=[],_1e1=elem.attributes;for(var i=0,len=_1e1.length;i<len;++i){var name=_1e1[i].name;if(!name.indexOf(_1da)){keys.push(name.substr(_1da.length));}}return keys;},mixin:function(elem,attr,obj){this.set(elem,attr,dojo.mixin(this.get(elem,attr),obj));}});}(dojo));}if(!dojo._hasResource["wsgc.js.IntlUtils"]){dojo._hasResource["wsgc.js.IntlUtils"]=true;dojo.provide("wsgc.js.IntlUtils");(function(dojo,_1e2){function _1e3(_1e4,_1e5){return _1e4.major>_1e5.major||(_1e4.major==_1e5.major&&(_1e4.minor>_1e5.minor||(_1e4.minor==_1e5.minor&&_1e4.rev>=_1e5.rev)));};dojo.declare("wsgc.js.IntlUtils",null,{constructor:function(){this._registerCheckoutEvent();this._registerDeleteCountryEventHandler(dojo.query(".deleteCountry"));},_registerCheckoutEvent:function(){dojo.query(".checkoutButtonIntl").forEach(function(elem){dojo.connect(elem,"click",function(evt){dojo.stopEvent(evt);dojo.byId("checkout").value="true";if(dojox.embed.Flash.available&&_1e3(dojox.embed.Flash.version,{major:7,minor:0,rev:0})){dojo.byId("cartForm").submit();}else{window.location="/internationalcheckout/flasherror.html";}});},this);},_registerDeleteCountryEventHandler:function(_1e6){_1e6.connect("click",function(evt){dojo.stopEvent(evt);dojo.xhrGet({url:"/international/setcountry.html",content:{country:"US",currency:"USD"},preventCache:true,load:function(){window.location.reload();}});if(typeof (cmCreateConversionEventTag)!=="undefined"){cmCreateConversionEventTag("Change Country","1","International");}});},interceptAddToBasket:function(evt){var _1e7=WSI.utils.closest(".section",evt.currentTarget);if(dojo.query(".skuErrorHook",_1e7).length!==dojo.query(".skuErrorHook:empty",_1e7).length){dojo.stopEvent(evt);dojo.byId("pageErrorHook").focus();window.scrollTo(0,0);}},flagBasedCurrencySelector:function(_1e8){var _1e9=WSI.config.country||"US";var _1ea=dojo.query(".currencyCode",_1e8.elem)[0];var _1eb={};for(var i=0,len=_1ea.options.length;i<len;++i){_1eb[_1ea.options[i].value]=i;}dojo.addClass(dojo.query(".flagMap a."+_1e9,_1e8.elem)[0].parentNode,"selected-country");_1ea.selectedIndex=_1eb[WSI.config.currency||"USD"];dojo.query(".flagMap a",_1e8.elem).connect("click",function(evt){dojo.query(".selected-country").removeClass("selected-country");_1e9=this.getAttribute("data-countryCode");var _1ec=this.getAttribute("data-defaultCurrency");dojo.addClass(this.parentNode,"selected-country");_1ea.selectedIndex=_1eb[_1ec];});dojo.connect(dojo.byId("intlSetCountryDialogSubmit"),"click",function(evt){dojo.stopEvent(evt);if(_1e9!=""&&_1ea.value){dojo.xhrGet({url:"/international/ineligible-items.html",content:{country:_1e9,currency:_1ea.value},preventCache:true,load:function(){window.location.reload();}});if(typeof (cmCreateConversionEventTag)!=="undefined"){cmCreateConversionEventTag("Change Country","1","International");}}else{dojo.query("ul.error",_1e8.elem).removeClass("hide");dojo.query("ul.error li.countryMessage",_1e8.elem).toggleClass("hide",countrySelect.selectedIndex!=0);dojo.query("ul.error li.currencyMessage",_1e8.elem).toggleClass("hide",!!_1ea.value);}});this._registerDeleteCountryEventHandler(dojo.query("#deleteCountry",_1e8.elem));WSI.utils.swapClasses(dojo.query(".deferredLayover",_1e8.elem),"deferredLayover","layover");dojo.query(".layover",_1e8.elem).connect("click",function(evt){WSI.layoverC.openLayover(evt);});}});}(dojo));}if(!dojo._hasResource["dojox.xml.parser"]){dojo._hasResource["dojox.xml.parser"]=true;dojo.provide("dojox.xml.parser");dojox.xml.parser.parse=function(str,_1ed){var _1ee=dojo.doc;var doc;_1ed=_1ed||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _1ef=new DOMParser();doc=_1ef.parseFromString(str,_1ed);var de=doc.documentElement;var _1f0="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_1f0){var _1f1=de.getElementsByTagNameNS(_1f0,"sourcetext")[0];if(_1f1){_1f1=_1f1.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_1f1);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_1ee.implementation&&_1ee.implementation.createDocument){if(str&&dojo.trim(str)&&_1ee.createElement){var tmp=_1ee.createElement("xml");tmp.innerHTML=str;var _1f2=_1ee.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_1f3){_1f2.importNode(_1f3,true);});return _1f2;}else{return _1ee.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _1f4=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_1f4.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _1f5="";if(node){dojo.forEach(node.childNodes,function(_1f6){switch(_1f6.nodeType){case 1:case 5:_1f5+=dojox.xml.parser.textContent(_1f6);break;case 3:case 2:case 4:_1f5+=_1f6.nodeValue;}});}return _1f5;}};dojox.xml.parser.replaceChildren=function(node,_1f7){var _1f8=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_1f9){_1f8.push(_1f9);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_1f8,dojo.destroy);if(!dojo.isArray(_1f7)){node.appendChild(_1f7);}else{dojo.forEach(_1f7,function(_1fa){node.appendChild(_1fa);});}};dojox.xml.parser.removeChildren=function(node){var _1fb=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _1fb;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};}if(!dojo._hasResource["dojox.embed.Flash"]){dojo._hasResource["dojox.embed.Flash"]=true;dojo.provide("dojox.embed.Flash");(function(){var _1fc,_1fd;var _1fe=7;var _1ff="dojox-embed-flash-",_200=0;var _201={expressInstall:false,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"always",allowNetworking:"all",style:null,redirect:null};function prep(_202){_202=dojo.delegate(_201,_202);if(!("path" in _202)){return null;}if(!("id" in _202)){_202.id=(_1ff+_200++);}return _202;};if(dojo.isIE){_1fc=function(_203){_203=prep(_203);if(!_203){return null;}var p;var path=_203.path;if(_203.vars){var a=[];for(p in _203.vars){a.push(p+"="+_203.vars[p]);}_203.params.FlashVars=a.join("&");delete _203.vars;}var s="<object id=\""+_203.id+"\" "+"classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" "+"width=\""+_203.width+"\" "+"height=\""+_203.height+"\""+((_203.style)?" style=\""+_203.style+"\"":"")+">"+"<param name=\"movie\" value=\""+path+"\" />";if(_203.params){for(p in _203.params){s+="<param name=\""+p+"\" value=\""+_203.params[p]+"\" />";}}s+="</object>";return {id:_203.id,markup:s};};_1fd=(function(){var _204=10,_205=null;while(!_205&&_204>6){try{_205=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_204--);}catch(e){}}if(_205){var v=_205.GetVariable("$version").split(" ")[1].split(",");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}else{_1fc=function(_206){_206=prep(_206);if(!_206){return null;}var p;var path=_206.path;if(_206.vars){var a=[];for(p in _206.vars){a.push(p+"="+_206.vars[p]);}_206.params.flashVars=a.join("&");delete _206.vars;}var s="<embed type=\"application/x-shockwave-flash\" "+"src=\""+path+"\" "+"id=\""+_206.id+"\" "+"width=\""+_206.width+"\" "+"height=\""+_206.height+"\""+((_206.style)?" style=\""+_206.style+"\" ":"")+"swLiveConnect=\""+_206.swLiveConnect+"\" "+"allowScriptAccess=\""+_206.params.allowScriptAccess+"\" "+"allowNetworking=\""+_206.params.allowNetworking+"\" "+"pluginspage=\""+window.location.protocol+"//www.adobe.com/go/getflashplayer\" ";if(_206.params){for(p in _206.params){s+=" "+p+"=\""+_206.params[p]+"\"";}}s+=" />";return {id:_206.id,markup:s};};_1fd=(function(){var _207=navigator.plugins["Shockwave Flash"];if(_207&&_207.description){var v=_207.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}dojox.embed.Flash=function(_208,node){if(location.href.toLowerCase().indexOf("file://")>-1){throw new Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");}this.available=dojox.embed.Flash.available;this.minimumVersion=_208.minimumVersion||_1fe;this.id=null;this.movie=null;this.domNode=null;if(node){node=dojo.byId(node);}setTimeout(dojo.hitch(this,function(){if(_208.expressInstall||this.available&&this.available>=this.minimumVersion){if(_208&&node){this.init(_208,node);}else{this.onError("embed.Flash was not provided with the proper arguments.");}}else{if(!this.available){this.onError("Flash is not installed.");}else{this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);}dojo.query("img",node).forEach("dojo.style(item, 'display', 'inline')");}}),100);};dojo.extend(dojox.embed.Flash,{onReady:function(_209){},onLoad:function(_20a){},onError:function(msg){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie);},init:function(_20b,node){this.destroy();node=dojo.byId(node||this.domNode);if(!node){throw new Error("dojox.embed.Flash: no domNode reference has been passed.");}var p=0,_20c=false;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;if(dojox.embed.Flash.initialized){this.id=dojox.embed.Flash.place(_20b,node);this.domNode=node;setTimeout(dojo.hitch(this,function(){this.movie=this.byId(this.id,_20b.doc);this.onReady(this.movie);this._poller=setInterval(dojo.hitch(this,function(){try{p=this.movie.PercentLoaded();}catch(e){}if(p==100){this._onload();}else{if(p==0&&this._pollCount++>this._pollMax){clearInterval(this._poller);}}}),this.pollTime);}),1);}else{dojo.query("img",node).forEach("dojo.style(item, 'display', 'inline')");}},_destroy:function(){try{this.domNode.removeChild(this.movie);}catch(e){}this.id=this.movie=this.domNode=null;},destroy:function(){if(!this.movie){return;}var test=dojo.delegate({id:true,movie:true,domNode:true,onReady:true,onLoad:true});for(var p in this){if(!test[p]){delete this[p];}}if(this._poller){dojo.connect(this,"onLoad",this,"_destroy");}else{this._destroy();}},byId:function(_20d,doc){doc=doc||document;if(doc.embeds[_20d]){return doc.embeds[_20d];}if(doc[_20d]){return doc[_20d];}if(window[_20d]){return window[_20d];}if(document[_20d]){return document[_20d];}return null;}});dojo.mixin(dojox.embed.Flash,{minSupported:8,available:_1fd.major,supported:(_1fd.major>=_1fd.required),minimumRequired:_1fd.required,version:_1fd,initialized:false,onInitialize:function(){dojox.embed.Flash.initialized=true;},__ie_markup__:function(_20e){return _1fc(_20e);},proxy:function(obj,_20f){dojo.forEach((dojo.isArray(_20f)?_20f:[_20f]),function(item){this[item]=dojo.hitch(this,function(){return (function(){return eval(this.movie.CallFunction("<invoke name=\""+item+"\" returntype=\"javascript\">"+"<arguments>"+dojo.map(arguments,function(item){return __flash__toXML(item);}).join("")+"</arguments>"+"</invoke>"));}).apply(this,arguments||[]);});},obj);}});dojox.embed.Flash.place=function(_210,node){var o=_1fc(_210);node=dojo.byId(node);if(!node){node=dojo.doc.createElement("div");node.id=o.id+"-container";dojo.body().appendChild(node);}if(o){node.innerHTML=o.markup;return o.id;}return null;};dojox.embed.Flash.onInitialize();})();}if(!dojo._hasResource["wsgc.js.MetricsWrapper"]){dojo._hasResource["wsgc.js.MetricsWrapper"]=true;dojo.provide("wsgc.js.MetricsWrapper");dojo.declare("wsgc.js.MetricsWrapper",null,{constructor:function(){WSI.Events.delegate("click","[data-metrics],[metrics]",function(evt){try{var _211=dojo.attr(this,"data-metrics");if(!_211){var _211=dojo.attr(this,"metrics");}if(evt.target.type=="checkbox"){_211=_211.replace("Checkbox_$_State",evt.target.checked?"checked":"unchecked");}eval(_211);}catch(e){}});}});}if(!dojo._hasResource["wsgc.js.DeferredLayover"]){dojo._hasResource["wsgc.js.DeferredLayover"]=true;dojo.provide("wsgc.js.DeferredLayover");dojo.declare("wsgc.js.DeferredLayover",null,{constructor:function(_212){function _213(o){if(document.attachEvent){var t={};for(var i in o){t[i]=o[i];}o=t;}return o;};var _214=dojo.query(".deferredLayover");var _215=[];_214.forEach(function(_216){var _217=dojo.connect(_216,"click",function(evt){dojo.stopEvent(evt);dojo.forEach(_215,function(_218){dojo.disconnect(_218);});_215=[];if(WSI.layoverC){WSI.utils.swapClasses(_214,"deferredLayover","layover").connect("click",WSI.layoverC,WSI.layoverC.openLayover);WSI.layoverC.openLayover(evt);}else{evt=_213(evt);evt.currentTarget_=evt.currentTarget;WSI.utils.loadScript(_212,function(){setTimeout(function(){WSI.utils.swapClasses(_214,"deferredLayover","layover");WSI.layoverC=new wsgc.js.LayoverBase();WSI.layoverC.openLayover(evt);});});}});_215.push(_217);});}});}if(!dojo._hasResource["wsgc.js.Selector"]){dojo._hasResource["wsgc.js.Selector"]=true;dojo.provide("wsgc.js.Selector");(function(dojo,_219){var _21a=_21b(),_21c="_sel_",_21d=0,_21e="parentNode",_21f="previousSibling",_220={},_221={">":_222(_21e,true)," ":_222(_21e,false),"+":_222(_21f,true),"~":_222(_21f,false)};dojo.mixin(wsgc.js.Selector,{is:function is(_223,_224,_225){var _226=this.parse(_224),_227,i,l;for(i=0,l=_226.length;i<l;++i){_227=_225?[[" ",_225]].concat(_226[i]):_226[i];if(this.test(_228([_223]),_227,_227.length-1)){return true;}}return false;},test:function test(_229,_22a,_22b){var _22c=_22a[_22b][0],_22d=_22a[_22b][1],_22e=_221[_22c],_22f,_230;while((_230=_229())){if(_22d===_230||_22d==="*"||(typeof _22d==="string"&&dojo._filterQueryResult([_230],_22d).length)){_22f=_22e(_230);if(_22b===0||this.test(_22f,_22a,_22b-1)){return _230;}if(_229.axis===_22f.axis&&!_22f.singleton){break;}}}},parse:function parse(_231){var _232=[],_233=_220[_231]||[],_234,_235;if(_233.length){return _233;}while((_234=_21a.exec(_231))){_235=(_234[1]&&dojo.trim(_234[1]))||" ";if(_235.charAt(0)===","){_233.push(_232);_232=[[dojo.trim(_235.substr(1))||" ",_234[2]]];}else{_232.push([_235,_234[2]]);}}if(_232.length){_233.push(_232);}return _220[_231]=_233;},closest:function closest(_236,_237){var _238=this.parse(_236),_239,_23a,_23b,_23c,_23d;for(var i=0,len=_238.length;i<len;i++){_23d=_238[i];_239=true;_23a=_221[" "](_237);_23b=function(){if(_239){_239=false;return _237;}return _23a();};_23c=this.test(_23b,_23d,_23d.length-1);if(_23c){return _23c;}}},idFor:function idFor(elem){if(!elem.id){do{var id=_21c+_21d++;}while(dojo.byId(id));elem.id=id;}return elem.id;}});function _228(_23e){var i=0;return function arrayIterator(){return _23e[i++];};};function _222(axis,_23f){return function nextIteratorGenerator(_240){var _241=true,_242=function _242(){_242.axis=axis;_242.singleton=_23f;if(!_23f||_241){_241=false;while((_240=_240[axis])&&_240.nodeType!==1){}return _240;}};return _242;};};function _21b(){return /((?:\s+(?![>+~,])|\s*(?:,\s*)?[>+~]\s*|\s*,\s*|^\s*))((?:\*|[a-z_\\][a-z0-9_\\|-]*)?(?:(?:[.#][a-z_\\][a-z0-9_\\|-]*|(?::not\(\s*(?:\*|[.#]?[a-z_\\][a-z0-9_\\|-]*|\[\s*[a-z_\\][a-z0-9_\\|-]*\s*(?:[~|^$*]?=\s*(?:'[^']*'|"[^"]*")\s*)?\]|::?[a-z_\\][a-z0-9_\\|-]*(?:\((?:'[^']*'|"[^"]*"|[^)])*\))?)\s*\))|::?[a-z_\\][a-z0-9_\\|-]*(?:\((?:'[^']*'|"[^"]*"|[^)])*\))?|\[\s*[a-z_\\][a-z0-9_\\|-]*\s*(?:[~|^$*]?=\s*(?:'[^']*'|"[^"]*")\s*)?\])*))/ig;};}(dojo));}if(!dojo._hasResource["wsgc.js.Events"]){dojo._hasResource["wsgc.js.Events"]=true;dojo.provide("wsgc.js.Events");(function(dojo,_243){WSI=window.WSI||{};WSI.Events=dojo.mixin(wsgc.js.Events,wsgc.js.Selector,{delegate:function(_244,_245,_246,_247){if(!_247){_247=_246;_246=dojo.body();}_244=_244.replace(/^on/,"");var self=this,_248=this.idFor(_246),_249=this.delegate.delegates||(this.delegate.delegates={}),_24a=_249[_248]||(_249[_248]={}),_24b=_24a.events||(_24a.events={}),_24c=_24b[_244];this.parse(_245);if(!_24c){_24c=_24b[_244]=function(evt){var _24d=_24c.selectors,elem=evt.target,_24e={};do{if(elem.disabled){continue;}for(var _24f in _24d){if(_24d.hasOwnProperty(_24f)){if(_25d(_24d[_24f],_24e)&&self.is(elem,_24f,_246===dojo.body()?null:_246)){dojo.forEach(_24d[_24f],function(_250){if(!_24e[_250]){_24e[_250]=true;_250.call(elem,evt);}});}}}}while(elem!=evt.currentTarget&&(elem=elem.parentNode)&&elem!=document.documentElement);};if(_244==="focus"||_244==="blur"){var _251=function(evt){return _24c(dojo.fixEvent(evt||window.event,this));};if(document.attachEvent){document.attachEvent("onfocus"+(_244==="blur"?"out":"in"),_246,_251);}else{_246.addEventListener(_244,_251,true);}}else{dojo.connect(_246,_244,_24c);}_24c.selectors={};}_24c.selectors[_245]=_24c.selectors[_245]||[];_24c.selectors[_245].push(_247);},undelegate:function(_252,_253,_254,_255){if(!_255){if(!_254){if(typeof _253==="function"){_255=_253;_254=dojo.body();_253=null;}else{if(typeof _253==="object"){_254=_253;_253=null;}else{_254=dojo.body();}}}else{if(typeof _254==="function"){_255=_254;_254=dojo.body();}}}var _256=this.delegate.delegates||{},_257=_256[this.idFor(_254)]||{},_258=_257.events||{},_259=_258[_252]||{},_25a=_259.selectors||{},_25b=_25a[_253||""]||[],_25c=_255?dojo.indexOf(_25b,_255):-1;if(!_253){if(!_255){_259.selectors={};}else{for(_253 in _25a){if(_25a.hasOwnProperty(_253)){_25b=_25a[_253];_25c=dojo.indexOf(_25b,_255);if(_25c>-1){_25b.splice(_25c,1);}}}}}else{if(!_25b||(_255&&_25c===-1)){return;}else{if(_255){_25b.splice(_25c,1);}else{_25a[_253]=[];}}}}});function _25d(_25e,_25f){return dojo.some(_25e,function(_260){return !_25f[_260];});};if(dojo){dojo.delegateEvent=WSI.Events.delegate;dojo.undelegateEvent=WSI.Events.undelegate;}}(dojo));}if(!dojo._hasResource["wsgc.js.Tabs"]){dojo._hasResource["wsgc.js.Tabs"]=true;dojo.provide("wsgc.js.Tabs");(function(dojo,_261){var _262=!!navigator.userAgent.match(/iPad/i);WSI.Events.delegate("click",".tabsWidget>:first-child>.tab",function(evt){dojo.stopEvent(evt);if(!dojo.hasClass(this,"active")){var tab=new Tab(this);tab.tabsAndContents.query(">.active").removeClass("active");tab.tabsAndContents.query(">:nth-child("+tab.position+")").addClass("active");dojo.publish("/tab/click",[tab]);}});if(_262){dojo.subscribe("/tab/click",function(_263){_264(_263);});dojo.addOnLoad(function(){dojo.query(".tabsWidget>:first-child()>.tab.active").forEach(function(_265){_264(new Tab(_265));});});function _264(tab){dojo.query(".tabScrollbar",tab.widget).remove();var _266=dojo.contentBox(tab.content),_267=dojo.query(".scroll-contents",tab.content)[0],_268=dojo.marginBox(_267);if(_268.h>_266.h){var _269=dojo.place("<div class=\"tabScrollbar\"><div class=\"tabScroll\"/></div>",tab.widget,"last"),_26a=_269.firstChild,_26b=_266.h*_266.h/_268.h,_26c=dojo.style(_26a,"marginTop")+dojo.style(_26a,"marginBottom"),_26d=_266.h-_26b-_26c,_26e=_268.h-_266.h,_26f,_270;function _271(evt){_26f=evt.targetTouches[0].clientY;_270=tab.content.scrollTop;};function _272(evt){if(evt.touches.length===1){dojo.stopEvent(evt);var _273=evt.targetTouches[evt.touches.length-1].clientY-_26f;tab.content.scrollTop=_270-_273;}};function _274(evt){_26a.style.top=(_26d*(tab.content.scrollTop/_26e))+"px";};if(tab.widget.disconnectPreviousActiveTabEvents){tab.widget.disconnectPreviousActiveTabEvents();}tab.widget.disconnectPreviousActiveTabEvents=function(){_267.removeEventListener("touchstart",_271);_267.removeEventListener("touchmove",_272);tab.content.removeEventListener("scroll",_274);};_26a.style.height=_26b+"px";_267.addEventListener("touchstart",_271);_267.addEventListener("touchmove",_272);tab.content.addEventListener("scroll",_274);_26a.addEventListener("touchstart",function(evt){dojo.stopEvent(evt);_26f=evt.targetTouches[0].clientY;_270=tab.content.scrollTop;});_26a.addEventListener("touchmove",function(evt){dojo.stopEvent(evt);var _275=evt.targetTouches[evt.touches.length-1].clientY-_26f;tab.content.scrollTop=_270+(_26e*(_275/_26d));});_269.addEventListener("touchstart",function(evt){dojo.stopEvent(evt);if(evt.targetTouches[0].clientY<dojo.position(_26a,true).y){tab.content.scrollTop-=_266.h;}else{tab.content.scrollTop+=_266.h;}});}};}function Tab(tab){this.tab=tab;this.parent=tab.parentNode;this.widget=this.parent.parentNode;this.tabsAndContents=dojo.query(">*",this.widget);this.position=dojo.query(">.tab",this.parent).indexOf(tab)+1;this.content=dojo.query(">:nth-child(2)>:nth-child("+this.position+")",this.widget)[0];};}(dojo));}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _276=this;dojo.mixin(_276,args);_276.node=args.node;_276._showArgs=dojo.mixin({},args);_276._showArgs.node=_276.node;_276._showArgs.duration=_276.showDuration;_276.showAnim=_276.showFunc(_276._showArgs);_276._hideArgs=dojo.mixin({},args);_276._hideArgs.node=_276.node;_276._hideArgs.duration=_276.hideDuration;_276.hideAnim=_276.hideFunc(_276._hideArgs);dojo.connect(_276.showAnim,"beforeBegin",dojo.hitch(_276.hideAnim,"stop",true));dojo.connect(_276.hideAnim,"beforeBegin",dojo.hitch(_276.showAnim,"stop",true));},show:function(_277){return this.showAnim.play(_277||0);},hide:function(_278){return this.hideAnim.play(_278||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_279={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _27a=function(_27b){this._index=-1;this._animations=_27b||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_27a,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_27c,_27d){if(!this._current){this._current=this._animations[this._index=0];}if(!_27d&&this._current.status()=="playing"){return this;}var _27e=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_27f=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_280=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_27e);d.disconnect(_27f);d.disconnect(_280);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_281,_282){this.pause();var _283=this.duration*_281;this._current=null;d.some(this._animations,function(a){if(a.duration<=_283){this._current=a;return true;}_283-=a.duration;return false;});if(this._current){this._current.gotoPercent(_283/this._current.duration,_282);}return this;},stop:function(_284){if(this._current){if(_284){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_27a,_279);dojo.fx.chain=function(_285){return new _27a(_285);};var _286=function(_287){this._animations=_287||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_287,function(a){var _288=a.duration;if(a.delay){_288+=a.delay;}if(this.duration<_288){this.duration=_288;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var self=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(d.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};d.extend(_286,{_doAction:function(_289,args){d.forEach(this._animations,function(a){a[_289].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_28a,args){var t=this._pseudoAnimation;t[_28a].apply(t,args);},play:function(_28b,_28c){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_28d,_28e){var ms=this.duration*_28d;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_28e);});this._call("gotoPercent",arguments);return this;},stop:function(_28f){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_286,_279);dojo.fx.combine=function(_290){return new _286(_290);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _291=d.style(node,"height");return Math.max(_291,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}return (dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!dojo._hasResource["wsgc.js.Scroller"]){dojo._hasResource["wsgc.js.Scroller"]=true;dojo.provide("wsgc.js.Scroller");(function(dojo,_292){var _293={},_294="disabled",_295,_296={duration:450,rate:20,easing:dojo.fx.easing.quadInOut,pageSize:0};WSI.Events.delegate("click",".scroller-container>.control",function(evt){dojo.stopEvent(evt);var _297=wsgc.js.Scroller.get(this.parentNode);var _298=dojo.hasClass(this,"btn-next");if(_298){_297.next();}else{_297.prev();}});dojo.declare("wsgc.js.Scroller",null,{constructor:function(_299){_293[_29a(_299)]=this;this.widget=_299;this.controls=dojo.query(">.control",this.widget);this.scroll=dojo.query(">.scroller",this.widget)[0];this.scrollerContainer=this.scroll.parentNode;this.isVertical=dojo.hasClass(this.scrollerContainer,"vertical");this.itemContainer=dojo.query(">.panel",this.scroll)[0];this.items=dojo.query(">*",this.itemContainer);this.scrollSize=dojo.contentBox(this.scroll);var _29b=this.items.length?dojo.position(this.items[0]):{y:0,x:0},_29c=this.items.length>1?dojo.position(this.items[1]):_29b,_29d=dojo.marginBox(this.itemContainer);this.itemOffset={h:_29c.y-_29b.y,w:_29c.x-_29b.x};if(this.isVertical){this.item=-Math.round(_29d.t/this.itemOffset.h);this.itemsPerPage=Math.round(this.scrollSize.h/this.itemOffset.h);}else{this.item=-Math.round(_29d.l/this.itemOffset.w);this.itemsPerPage=Math.round(this.scrollSize.w/this.itemOffset.w);}this.options=dojo.mixin({},_296,dojo.fromJson(dojo.attr(this.widget,"data-scroller")||"{}"));if(typeof this.options.easing=="string"){this.options.easing=eval(this.options.easing);}this.pageSize=this.options.pageSize||this.itemsPerPage;},scrollTo:function(_29e){if(!_295&&_29e>=this.itemsPerPage){_29f(this,this.pageSize*Math.floor(_29e/this.itemsPerPage));}},next:function(){_29f(this,this.pageSize);},prev:function(){_2a0(this,this.pageSize);}});dojo.mixin(wsgc.js.Scroller,{get:function(_2a1){return _293[_29a(_2a1)]||new wsgc.js.Scroller(_2a1);}});var _2a2=0;function _29a(_2a3){return _2a3.id||(_2a3.id="_scroller"+_2a2++);};function _29f(_2a4,_2a5){if(!_295&&_2a4.item<_2a4.items.length-_2a4.itemsPerPage){_2a4.item+=_2a5;var _2a6=dojo.marginBox(_2a4.itemContainer);if(_2a4.isVertical){_2a6.t-=(_2a4.itemOffset.h*_2a5);}else{_2a6.l-=(_2a4.itemOffset.w*_2a5);}dojo.fx.slideTo(dojo.mixin({},_2a4.options,{node:_2a4.items[0].parentNode,left:_2a6.l,top:_2a6.t,onEnd:function(){if(_2a4.item>=_2a4.items.length-_2a4.itemsPerPage){_2a4.controls.filter(".btn-next").addClass(_294);}_295=false;}})).play();_295=true;_2a4.controls.filter(".btn-prev").removeClass(_294);}};function _2a0(_2a7,_2a8){if(!_295&&_2a7.item>0){_2a7.item-=_2a8;var _2a9=dojo.marginBox(_2a7.itemContainer);if(_2a7.isVertical){_2a9.t+=(_2a7.itemOffset.h*_2a8);}else{_2a9.l+=(_2a7.itemOffset.w*_2a8);}dojo.fx.slideTo(dojo.mixin({},_2a7.options,{node:_2a7.itemContainer,left:_2a9.l,top:_2a9.t,onEnd:function(){if(_2a7.item===0){_2a7.controls.filter(".btn-prev").addClass(_294);}_295=false;}})).play();_295=true;_2a7.controls.filter(".btn-next").removeClass(_294);}};}(dojo));}if(!dojo._hasResource["wsgc.js.Image"]){dojo._hasResource["wsgc.js.Image"]=true;(function(dojo,_2aa){var _2ab={duration:500,easing:dojo.fx.easing.quadInOut};WSI.Image=dojo.mixin(dojo.provide("wsgc.js.Image"),{swap:function(_2ac,url,_2ad,_2ae){if(dojo.isFunction(_2ad)){_2ae=_2ad;_2ad={};}var _2af=dojo.mixin({},_2ad,_2ab);var _2b0=dojo.marginBox(_2ac),_2b1=dojo.position(_2ac);var _2b2=this.clone(_2ac),self=this;dojo.style(_2b2,{"position":"absolute","top":"0px","left":"0px","opacity":0});var _2b3;var _2b4=setTimeout(function(){_2b3=dojo.clone(WSI.throbber);dojo.style(_2b3,{"position":"absolute","top":(_2b0.t+(_2b0.h/2))+"px","left":(_2b0.l+(_2b0.w/2))+"px"});dojo.place(_2b3,_2ac,"after");},175);this.loadWithCallback(_2b2,url,function(){if(_2b4){clearTimeout(_2b4);_2b4=null;}setTimeout(function(){if(_2b3){dojo.destroy(_2b3);}},250);dojo.place(_2b2,_2ac,"before");var _2b5=dojo.marginBox(_2b2);var _2b6;var _2b7=[dojo.fadeOut(dojo.mixin({node:_2ac},_2af)),dojo.fadeIn(dojo.mixin({node:_2b2},_2af))];if(_2b5.h>_2b0.h){var _2b8="<div class='spacer' style='position: relative; height: 0px; width: 1px; visibility: hidden;'></div>";dojo.place(_2b8,_2ac,"after");var _2b9=dojo.query(".spacer")[0];var _2ba=Math.max(_2b5.h-_2b0.h,0);_2b7.push(dojo.animateProperty(dojo.mixin({node:_2b9,duration:150,properties:{height:_2ba}},_2af)));}var anim=dojo.fx.combine(_2b7);dojo.connect(anim,"onEnd",function(){var _2bb=self.clone(_2ac);dojo.style(_2bb,"opacity","1");_2bb.id=_2ac.id;self.loadWithCallback(_2bb,dojo.attr(_2b2,"src"),function(){dojo.place(_2bb,_2ac,"replace");dojo.destroy(_2b9);dojo.destroy(_2b2);if(_2ae){_2ae(_2bb);}});});anim.play();});},loadWithCallback:function(_2bc,url,fn){var _2bd="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",_2be=dojo.connect(_2bc,"onload",function(){if(_2bc.src!==_2bd){fn();}dojo.disconnect(_2be);});dojo.attr(_2bc,"src",url);if(!dojo.isIE&&(_2bc.complete||typeof _2bc.complete==="undefined")){_2bc.src=_2bd;_2bc.src=url;}},clone:function(_2bf){var _2c0=new Image();dojo.forEach(["alt","class","title"],function(name){var val=dojo.attr(_2bf,name);if(val){dojo.attr(_2c0,name,val);}});return _2c0;}});}(dojo));}if(!dojo._hasResource["wsgc.js.Thumbnail"]){dojo._hasResource["wsgc.js.Thumbnail"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.Thumbnail");(function(dojo,_2c1){WSI.Events.delegate("click",".thumbnailWidget",function(evt){dojo.stopEvent(evt);var _2c2=dojo.fromJson(dojo.attr(this,"data-thumbnail")||"{}");dojo.publish("/thumbnail/click",[{href:this.href||_2c2.href,alt:_2c2.alt||"",elem:this,target:this.target||_2c2.target,map:_2c2.map,options:_2c2}]);});WSI.Thumbnail=dojo.mixin(wsgc.js.Thumbnail,{subscribe:function(_2c3,fn){if(typeof _2c3==="string"){_2c3=[_2c3];}dojo.subscribe("/thumbnail/click",function(_2c4){if(_2c4&&_2c4.target&&dojo.indexOf(_2c3,_2c4.target)>-1){fn(_2c4);}});}});var _2c5={};dojo.subscribe("/thumbnail/click",function(_2c6){if(!_2c5[_2c6.target]){var _2c7=dojo.query("#"+_2c6.target+".thumbnailTarget");if(_2c7.length){if(_2c7[0].nodeName=="IMG"){if(_2c7[0].src!=_2c6.href){_2c5[_2c6.target]=true;WSI.Image.swap(_2c7[0],_2c6.href,function(_2c8){if(_2c6.map){dojo.attr(_2c8,"useMap",_2c6.map);}_2c5[_2c6.target]=false;});}}else{WSI.utils.loadFragment(dojo.mixin({url:_2c6.href,load:function(data){_2c7.html(data);}},_2c6.options));}}}});function _2c9(href){var _2ca=href.match(/#.*/);return (_2ca!==null)?_2ca[0]:href;};}(dojo));}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.window.getBox=function(){var _2cb=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _2cc=dojo._docScroll();return {w:_2cb.clientWidth,h:_2cb.clientHeight,l:_2cc.x,t:_2cc.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _2cd=doc.compatMode=="BackCompat",_2ce=_2cd?body:html,_2cf=isWK?body:_2ce,_2d0=_2ce.clientWidth,_2d1=_2ce.clientHeight,rtl=!dojo._isBodyLtr(),_2d2=pos||dojo.position(node),el=node.parentNode,_2d3=function(el){return ((isIE<=6||(isIE&&_2cd))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_2d3(node)){return;}while(el){if(el==body){el=_2cf;}var _2d4=dojo.position(el),_2d5=_2d3(el);if(el==_2cf){_2d4.w=_2d0;_2d4.h=_2d1;if(_2cf==html&&isIE&&rtl){_2d4.x+=_2cf.offsetWidth-_2d4.w;}if(_2d4.x<0||!isIE){_2d4.x=0;}if(_2d4.y<0||!isIE){_2d4.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_2d4.w-=pb.w;_2d4.h-=pb.h;_2d4.x+=pb.l;_2d4.y+=pb.t;}if(el!=_2cf){var _2d6=el.clientWidth,_2d7=_2d4.w-_2d6;if(_2d6>0&&_2d7>0){_2d4.w=_2d6;if(isIE&&rtl){_2d4.x+=_2d7;}}_2d6=el.clientHeight;_2d7=_2d4.h-_2d6;if(_2d6>0&&_2d7>0){_2d4.h=_2d6;}}if(_2d5){if(_2d4.y<0){_2d4.h+=_2d4.y;_2d4.y=0;}if(_2d4.x<0){_2d4.w+=_2d4.x;_2d4.x=0;}if(_2d4.y+_2d4.h>_2d1){_2d4.h=_2d1-_2d4.y;}if(_2d4.x+_2d4.w>_2d0){_2d4.w=_2d0-_2d4.x;}}var l=_2d2.x-_2d4.x,t=_2d2.y-Math.max(_2d4.y,0),r=l+_2d2.w-_2d4.w,bot=t+_2d2.h-_2d4.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_2d2.x+=el.scrollLeft;el.scrollLeft+=(isIE>=8&&!_2cd&&rtl)?-s:s;_2d2.x-=el.scrollLeft;}if(bot*t>0){_2d2.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_2d2.y-=el.scrollTop;}el=(el!=_2cf)&&!_2d5&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};}if(!dojo._hasResource["wsgc.js.Overlay"]){dojo._hasResource["wsgc.js.Overlay"]=true;dojo.provide("wsgc.js.Overlay");(function(dojo,_2d8){var _2d9={id:"",classname:"",mask:true,loadingThrobber:true,fixedScroll:true,destroyOnHide:true,preventCache:true},_2da={},_2db,_2dc=".overlayMask,.overlayScroll,.overlayCloseButton",_2dd="",_2de=!!navigator.userAgent.match(/iPad/i),_2df,_2e0=["onLoad","onShow","onShowing","onShown","onHide","onHidden","onDestroy","onRefresh"];dojo.addOnLoad(function(){WSI.Events.delegate("click",".overlayTrigger",function(evt){var _2e1=dojo.mixin({},dojo.fromJson(dojo.attr(this,"data-overlay")||"{}")),data=dojo.fromJson(dojo.attr(this,"data-overlaydata")||"{}"),href=dojo.attr(this,"href");wsgc.js.Overlay.trigger(_2e1,data,href);dojo.stopEvent(evt);});WSI.Events.delegate("click",".cancelOverlay",function(evt){wsgc.js.Overlay.cancel();});});dojo.declare("wsgc.js.Overlay",null,{constructor:function(href,_2e2){var self=this,loc=document.location,_2e3=loc.href.substr(0,loc.href.length-loc.hash.length);this.href=href.replace(_2e3,"");this.options=dojo.mixin({},_2d9,_2e2);this.registeredCallbacks={};dojo.forEach(_2e0,function(name){self[name]=function(){return self._callback(name);};self.registeredCallbacks[name]=self.options[name]?[self.options[name]]:[];});this.isAjax=this.href.charAt(0)!=="#";},refresh:function(){var self=this;if(this.onRefresh(this)===false){return;}this.isLoaded=false;this.load(function(){if(self.throbber){dojo.destroy(self.throbber);}self.elem=dojo.place(WSI.utils.toDom(self.template(self.data)),self.elem,"replace");var pos={marginTop:self.elem.style.marginTop,marginLeft:self.elem.style.marginLeft,top:self.elem.style.top,left:self.elem.style.left};dojo.style(self.elem,pos);if(self.onShowing(self)===false){return;}});},load:function(_2e4){var self=this;if(!this.isAjax||this.isLoaded){if(_2e4){_2e4();}else{self.show();}return;}if(this.onLoad(this)===false){return;}if(this.options.loadingThrobber){this.throbber=dojo.place("<div class=\"overlayThrobber\"></div>",dojo.body());this.throbber.appendChild(dojo.clone(WSI.throbber));}var _2e5={};if(this.options.form&&dojo.byId(this.options.form)){_2e5.form=dojo.byId(this.options.form);}WSI.utils.loadFragment(this.options.httpmethod||"GET",dojo.mixin(_2e5,{url:this.href,preventCache:this.options.preventCache,timeout:this.options.timeout||30000,load:function(data){if(data===data.replace(/<script.+type=['"]text\/html['"].+id=['"]overlayTemplate_[^>]*>([\s\S]*?)<\/script>/gim,function(_2e6,src){self.template=WSI.utils.template(dojo.trim(src));return "";})){_2df=_2df||WSI.utils.template(dojo.trim(dojo.byId("overlayTemplate_defaultAjaxWrapper").innerHTML));self.template=(function(dojo,_2e7){var _2e8=_2df({ajaxContent:data,id:self.options.id,classname:self.options.classname});return function(){return _2e8;};}(dojo));}self.isLoaded=true;if(_2e4){_2e4();}else{self.show();}},error:function(_2e9){var _2ea=dojo.query("#overlayTemplate_overlayError");if(_2ea.length===0){wsgc.js.Overlay.hideAll();if(self.throbber){dojo.destroy(self.throbber);}setTimeout(function(){alert("Sorry, your request could not be processed at this time. Please try again later.");if(self.mask){dojo.body().removeChild(self.mask);}if(self.scroll){dojo.style(self.scroll,"overflow","hidden");dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:_2dd,paddingRight:_2dd});dojo.body().removeChild(self.scroll);}},100);}else{self.elem=dojo.create("div",{"class":"overlayErrorContainer","innerHTML":_2ea.innerHTML()});if(_2e4){_2e4();}else{self.show();}}}}));},show:function(){var self=this;if(_2db){if(_2db===self){self.refresh();return;}}if(this.onShow(this)===false){return;}self.mask=self.mask||(self.options.mask&&dojo.place("<div class='overlayMask'></div>",dojo.body()));self.scroll=self.scroll||(self.options.fixedScroll&&dojo.place("<div class='overlayScroll'></div>",dojo.body()));if(self.scroll&&!_2de){dojo.style(self.scroll,{"overflowX":"auto","overflowY":"scroll"});dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:"hidden",paddingRight:WSI.utils.getBrowserScrollbarWidth()+"px"});}if(self.mask&&_2de){var _2eb=dojo.marginBox(dojo.body());dojo.style(self.mask,{width:window.innerWidth+"px",height:_2eb.h+"px"});}if(this.isAjax&&!this.isLoaded){this.load(_2ec);}else{try{self.template=self.template||WSI.utils.template(dojo.trim(dojo.byId("overlayTemplate_"+self.href.substr(1)).innerHTML));}catch(e){}_2ec();}function _2ec(){if(_2db){if(_2db!==self){_2db.hide(true);}}self.elem=self.elem||WSI.utils.toDom(self.template(self.data));dojo.style(self.scroll||self.elem,"opacity",0);if(self.scroll){dojo.style(self.elem,"left","-9999px");}dojo.place(self.elem,self.scroll||dojo.body());if(self.onShowing(self)===false){return;}setTimeout(function(){if(self.scroll){var _2ed=dojo.position(self.elem);var _2ee=self.elem.style.height==="auto"||self.elem.style.height==="";if(_2ee){dojo.style(self.elem,"marginTop",(_2ed.h/-2)+"px");}self.center();self.resizeConnection=dojo.connect(window,"resize",dojo.hitch(self,self.center));if(self.throbber){dojo.destroy(dojo.query("img",self.throbber)[0]);}if(_2de){dojo.style(self.scroll||self.elem,"opacity",1);if(self.throbber){dojo.style(self.throbber,"opacity",0);}_2db=self;dojo.query("a",self.elem)[0].focus();dojo.style(self.scroll||self.elem,"filter",_2dd);if(self.onShown(self)===false){return;}}else{var _2ef=[dojo.fadeIn({node:self.scroll||self.elem,duration:self.throbber?150:500,delay:self.throbber?200:100,easing:dojo.fx.easing.linear,onEnd:function(evt){if(self.elem){_2db=self;dojo.query("a",self.elem)[0].focus();dojo.style(self.scroll||self.elem,"filter",_2dd);if(self.onShown(self)===false){return;}self.center();}}})];if(self.throbber){_2ef.push(dojo.animateProperty({node:self.throbber,duration:350,easing:dojo.fx.easing.quintInOut,properties:{marginTop:{end:_2ed.h/-2},height:{end:_2ed.h},marginLeft:{end:_2ed.w/-2},width:{end:_2ed.w}},onEnd:function(){dojo.destroy(self.throbber);}}));_2ef.push(dojo.fadeOut({node:self.throbber,duration:300,easing:dojo.fx.easing.linear}));}dojo.fx.combine(_2ef).play();}}});};},hide:function(_2f0){if(this.onHide(this)===false){return;}var self=this;if(self.mask){dojo.body().removeChild(self.mask);}if(this.scroll){dojo.disconnect(self.resizeConnection);self.resizeConnection=null;}if(_2de||_2f0){dojo.style(self.scroll||self.elem,"opacity",0);_2db=null;dojo.body().removeChild(self.scroll||self.elem);if(self.options.destroyOnHide){self.destroy();}if(self.onHidden(self)===false){return;}}else{dojo.fadeOut({node:self.scroll||self.elem,duration:300,easing:dojo.fx.easing.expoOut,onEnd:function(evt){_2db=null;if(self.scroll){dojo.style(self.scroll,"overflow","hidden");dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:_2dd,paddingRight:_2dd});}dojo.body().removeChild(self.scroll||self.elem);if(self.options.destroyOnHide){self.destroy();}if(self.onHidden(self)===false){return;}}}).play();}},destroy:function(){if(this.onDestroy(this)===false){return;}dojo.destroy(this.elem);this.elem=null;delete this.elem;if(this.scroll){dojo.destroy(this.scroll);this.scroll=null;}if(this.mask){dojo.destroy(this.mask);this.mask=null;}this.template=null;this.isLoaded=false;},center:function(){var _2f1=dojo.position(this.elem),_2f2=dojo.window.getBox(),_2f3=false,_2f4={left:_2dd,top:_2dd,marginTop:(_2f1.h/-2)+"px",marginLeft:_2dd};if(_2de){_2f2={l:window.pageXOffset,t:window.pageYOffset,w:window.innerWidth,h:window.innerHeight};}else{_2f2.t=_2f2.l=0;}_2f2.w-=WSI.utils.getBrowserScrollbarWidth();if(_2f1.w>_2f2.w){_2f4.marginLeft=0;_2f4.left=_2f2.l+"px";_2f3=true;}else{if(_2de){_2f4.marginLeft=0;_2f4.left=(_2f2.l+(_2f2.w/2)-(_2f1.w/2))+"px";}}if(_2f1.h+20>_2f2.h-(_2f3?WSI.utils.getBrowserScrollbarWidth():0)){_2f4.marginTop="10px";_2f4.top=_2f2.t+"px";}else{if(_2de){_2f4.marginTop="10px";_2f4.top=(_2f2.t+(_2f2.h/2)-(_2f1.h/2))+"px";}}dojo.style(this.elem,_2f4);},_callback:function(name){var self=this;var res=true;if(this.registeredCallbacks[name]){dojo.every(this.registeredCallbacks[name],function(_2f5){res=res&&(_2f5.call(self,self)!==false);return res;});}return res;},_addCallback:function(name,fn){if(this.registeredCallbacks[name]){this.registeredCallbacks[name].push(fn);}},_removeCallback:function(name,fn){if(this.registeredCallbacks[name]){if(fn){var i=this.registeredCallbacks[name].indexOf(fn);if(i!=-1){this.registeredCallbacks[name].splice(i,1);return true;}}else{this.registeredCallbacks[name]=[];return true;}}return false;}});function _2f6(href){var _2f7=href.match(/#(.*)/);return (_2f7!==null)?_2f7[0]:href;};var _2f8={getByHref:function(href,_2f9){href=_2f6(href||_2f9.href);var _2fa=_2da[href];if(_2fa){dojo.mixin(_2fa.options,_2f9);}else{_2fa=(_2da[href]=new wsgc.js.Overlay(href,_2f9));}return _2fa;},trigger:function(_2fb,data,href){overlay=wsgc.js.Overlay.getByHref(href,_2fb);overlay.data=data;overlay.show();},hide:function(href,_2fc){href=_2f6(href||options.href);var _2fd=_2da[href];if(_2fd){_2fd.hide(_2fc);}},refresh:function(href){href=_2f6(href||options.href);var _2fe=_2da[href];if(_2fe){_2fe.refresh();}},center:function(){if(_2db){_2db.center();}},hideAll:function(){try{_2db.hide(true);}catch(e){}return;},cancel:function(){try{_2db.hide(false);}catch(e){}return;}};dojo.forEach(_2e0,function(_2ff){var _300={};_300["addO"+_2ff.substr(1)]=function(fn){this._addCallback(_2ff,fn);};_300["removeO"+_2ff.substr(1)]=function(fn){this._removeCallback(_2ff,fn);};dojo.extend(wsgc.js.Overlay,_300);_2f8["addO"+_2ff.substr(1)+"ByHref"]=_301(_2ff);_2f8["removeO"+_2ff.substr(1)+"ByHref"]=_302(_2ff);});dojo.mixin(wsgc.js.Overlay,_2f8);function _301(name){return function(href,fn){var _303=wsgc.js.Overlay.getByHref(href);_303._addCallback(name,fn);};};function _302(name){return function(href,fn){var _304=wsgc.js.Overlay.getByHref(href);_304._removeCallback(name,fn);};};WSI.Events.delegate(_2de?"touchstart":"click",_2dc,function(evt){if(this===evt.target&&_2db){dojo.stopEvent(evt);_2db.hide();}});dojo.connect(dojo.body(),"keypress",function(evt){if(evt.keyCode===dojo.keys.ESCAPE&&_2db){dojo.stopEvent(evt);_2db.hide();}});}(dojo));}if(!dojo._hasResource["wsgc.js.Tooltip"]){dojo._hasResource["wsgc.js.Tooltip"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.Tooltip");(function(dojo,_305){var _306=!!navigator.userAgent.match(/iPad/i),_307={placement:"above","style":"",id:"default",content:{},template:"",delay:300};if(!_306){WSI.Events.delegate("mouseover",".showTooltip",function(evt){var _308={},elem=this,_309;_308=new wsgc.js.Tooltip(this,WSI.dataset.get(this,"tooltip"));_309=dojo.connect(dojo.body(),"mousemove",function(evt){if(WSI.utils.closest(".showTooltip",evt.target)!==elem){dojo.disconnect(_309);_308.hide();}});});}dojo.declare("wsgc.js.Tooltip",null,{constructor:function(elem,_30a){var _30b;this.options=dojo.mixin({},_307,_30a);this.elem=elem;if(_30a.template){_30b=WSI.utils.template(_30a.template);}else{if(dojo.byId("template-tooltip-"+this.options.id)){_30b=WSI.utils.template(dojo.trim(dojo.byId("template-tooltip-"+this.options.id).innerHTML));}else{}}dojo.mixin(this.options.content,{"style":this.options.style,placement:this.options.placement});this.node=WSI.utils.toDom(_30b(this.options.content));this.setPositioning();this.show();},setPositioning:function(){var _30c,_30d;_30c=dojo.position(this.elem,true);_30d=this.getDimensions();switch(this.options.placement){case "above":this.position={x:_30c.x+_30c.w/2-_30d.w/2,y:_30c.y-_30d.h};break;case "below":this.position={x:_30c.x+_30c.w/2-_30d.w/2,y:_30c.y+_30c.h};break;case "left":this.position={x:_30c.x-_30d.w,y:_30c.y+_30c.h/2-_30d.h/2};break;case "right":this.position={x:_30c.x+_30c.w,y:_30c.y+_30c.h/2-_30d.h/2};break;}},getDimensions:function(){var _30e;dojo.style(this.node,{position:"absolute",top:"0px",left:"0px"});dojo.place(this.node,dojo.body());_30e=dojo.position(this.node,true);this.node.parentNode.removeChild(this.node);dojo.removeAttr(this.node,"style");return _30e;},show:function(){dojo.style(this.node,{top:(this.position.y||0)+"px",left:(this.position.x||0)+"px",position:"absolute",opacity:0});dojo.place(this.node,dojo.body());dojo.fadeIn({node:this.node,duration:100,delay:this.options.delay}).play();},hide:function(){var node=this.node;dojo.fadeOut({node:this.node,duration:100,onEnd:function(){dojo.destroy(node);}}).play();}});}(dojo));}if(!dojo._hasResource["wsgc.js.SwatchTooltips"]){dojo._hasResource["wsgc.js.SwatchTooltips"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.SwatchTooltips");(function(dojo,_30f){var _310=!!navigator.userAgent.match(/iPad/i);if(!_310){WSI.Events.delegate("mouseover","ul.graphical-att>li>a",function(evt){var _311={},elem=this,_312;_311=new wsgc.js.Tooltip(this,{"id":"swatch",content:{colorSrc:this.href,colorName:this.title}});_312=dojo.connect(dojo.body(),"mousemove",function(evt){if(WSI.utils.closest("a",evt.target)!==elem){dojo.disconnect(_312);_311.hide();}});});}}(dojo));}if(!dojo._hasResource["wsgc.common.js.VideoPlayer"]){dojo._hasResource["wsgc.common.js.VideoPlayer"]=true;dojo.provide("wsgc.common.js.VideoPlayer");dojo.provide("wsgc.js.VideoPlayer");(function(dojo,_313){var _314=0,_315={youTube:{width:640,height:390,autoplay:true,theme:"light"},productBuildFlash:{width:400,height:370}};WSI.VideoPlayer=dojo.mixin(wsgc.js.VideoPlayer,{youTubeData:function(_316,_317){var _318="cb"+_314++;WSI.utils.loadScript("//gdata.youtube.com/feeds/api/videos/"+_316+"?v=2&alt=json-in-script&callback=WSI.VideoPlayer."+_318);WSI.VideoPlayer[_318]=function(data){delete WSI.VideoPlayer[_318];try{_317({videoId:_316,title:data.entry.media$group.media$title.$t,description:data.entry.media$group.media$description.$t});}catch(e){if(console&&console.error){}}};},youTubePlayer:function(elem,_319){var opts=dojo.mixin({},_315.youTube,_319||{},WSI.dataset.get(elem,"youtubevideo")||{}),_31a=opts.videoId,_31b=!dojo.isIE||dojo.isIE>7,_31c=!!navigator.userAgent.match(/iP(?:ad|hone)/i),_31d="//www.youtube.com/embed/"+_31a+"?enableuseJsApi="+(_31b?1:0)+"&origin="+WSI.config.appUrl,_31e=new YT.Player(elem,{videoId:_31a,height:opts.height,width:opts.width,events:_31b?{onReady:function(evt){if(!_31c&&opts.autoplay){_31e.playVideo();}},onStateChange:function(evt){if(evt.data===0&&_31c){_31e.seekTo(0);}}}:{},playerVars:{wmode:"transparent",autohide:1,autoplay:dojo.isIE===7&&opts.autoplay?1:0,modestbranding:_31c?0:1,iv_load_policy:3,fs:1,cc_load_policy:0,rel:0,showsearch:0,enablejsapi:1,webkitAllowFullScreen:"webkitAllowFullScreen",mozallowfullscreen:"mozallowfullscreen",allowFullScreen:"allowFullScreen",theme:opts.theme}});},productBuildFlashPlayer:function(elem,_31f){var opts=dojo.mixin({},_315.productBuildFlash,_31f||{},WSI.dataset.get(elem,"productbuildflash")||{}),_320=opts.videoPath,_321=WSI.config.sessionCookieName,_322=_321?("&sessionCookieName="+_321+"&sessionId="+(dojo.cookie(_321)||"")):"";new dojox.embed.Flash({path:_320,width:opts.width,height:opts.height,params:{wmode:"transparent",allowFullScreen:"true",flashvars:"urlbase=${rc.getRootUrl()}&swfbase="+_320+_322,allowScriptAccess:"always"}},elem);}});wsgc.common.js.VideoPlayer=wsgc.js.VideoPlayer;}(dojo));}if(!dojo._hasResource["wsgc.js.Social"]){dojo._hasResource["wsgc.js.Social"]=true;dojo.provide("wsgc.js.Social");(function(dojo,_323){dojo.declare("wsgc.js.Social",[],{constructor:function(url){this.callbacks=[];if(url){WSI.utils.loadScript(url);}},_callCallbacks:function(){for(var i=0,len=this.callbacks.length;i<len;++i){if(false===this.callbacks[i].apply(this,arguments)){break;}}},registerCallback:function(fn){this.callbacks.push(fn);}});dojo.declare("wsgc.js.social.Twitter",[wsgc.js.Social],{constructor:function(url){var self=this,t=window.twttr={_e:[],ready:function(f){t._e.push(f);}};t.ready(function(_324){_324.events.bind("tweet",function(evt){self._callCallbacks(evt);});});}});dojo.declare("wsgc.js.social.Facebook",[wsgc.js.Social],{constructor:function(url,_325){var self=this,opts={status:true,cookie:true,xfbml:true};if(_325){opts.appId=_325;}window.fbAsyncInit=function(){FB.init(opts);FB.getLoginStatus(function(_326){});FB.Event.subscribe("edge.create",function(r){self._callCallbacks(r);});};}});dojo.declare("wsgc.js.social.GooglePlus",[wsgc.js.Social],{constructor:function(url){var self=this;window.googlepluscallback=function(arg){self._callCallbacks(arg);};}});}(dojo));}
