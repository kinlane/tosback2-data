/* Â© 2012 Williams-Sonoma Inc. All rights reserved. */
dojo.provide("wsgc");if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(_1,_2){return _1.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_2&&_2.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(_3,re,_4){if(!(_3 instanceof Array)){return re(_3);}var b=[];for(var i=0;i<_3.length;i++){b.push(re(_3[i]));}return dojo.regexp.group(b.join("|"),_4);};dojo.regexp.group=function(_5,_6){return "("+(_6?"?:":"")+_5+")";};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(_7,_8,_9){var c=document.cookie;if(arguments.length==1){var _a=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(_7)+"=([^;]*)"));return _a?decodeURIComponent(_a[1]):undefined;}else{_9=_9||{};var _b=_9.expires;if(typeof _b=="number"){var d=new Date();d.setTime(d.getTime()+_b*24*60*60*1000);_b=_9.expires=d;}if(_b&&_b.toUTCString){_9.expires=_b.toUTCString();}_8=encodeURIComponent(_8);var _c=_7+"="+_8,_d;for(_d in _9){_c+="; "+_d;var _e=_9[_d];if(_e!==true){_c+="="+_e;}}document.cookie=_c;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dojo.io.script"]){dojo._hasResource["dojo.io.script"]=true;dojo.provide("dojo.io.script");(function(){var _f=dojo.isIE?"onreadystatechange":"load",_10=/complete|loaded/;dojo.io.script={get:function(_11){var dfd=this._makeScriptDeferred(_11);var _12=dfd.ioArgs;dojo._ioAddQueryToUrl(_12);dojo._ioNotifyStart(dfd);if(this._canAttach(_12)){var _13=this.attach(_12.id,_12.url,_11.frameDoc);if(!_12.jsonp&&!_12.args.checkString){var _14=dojo.connect(_13,_f,function(evt){if(evt.type=="load"||_10.test(_13.readyState)){dojo.disconnect(_14);_12.scriptLoaded=evt;}});}}dojo._ioWatch(dfd,this._validCheck,this._ioCheck,this._resHandle);return dfd;},attach:function(id,url,_15){var doc=(_15||dojo.doc);var _16=doc.createElement("script");_16.type="text/javascript";_16.src=url;_16.id=id;_16.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_16);},remove:function(id,_17){dojo.destroy(dojo.byId(id,_17));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(_18){var dfd=dojo._ioSetArgs(_18,this._deferredCancel,this._deferredOk,this._deferredError);var _19=dfd.ioArgs;_19.id=dojo._scopeName+"IoScript"+(this._counter++);_19.canDelete=false;_19.jsonp=_18.callbackParamName||_18.jsonp;if(_19.jsonp){_19.query=_19.query||"";if(_19.query.length>0){_19.query+="&";}_19.query+=_19.jsonp+"="+(_18.frameDoc?"parent.":"")+dojo._scopeName+".io.script.jsonp_"+_19.id+"._jsonpCallback";_19.frameDoc=_18.frameDoc;_19.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_19.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){dojo.io.script._addDeadScript(dfd.ioArgs);}},_deferredOk:function(dfd){var _1a=dfd.ioArgs;if(_1a.canDelete){dojo.io.script._addDeadScript(_1a);}return _1a.json||_1a.scriptLoaded||_1a;},_deferredError:function(_1b,dfd){if(dfd.ioArgs.canDelete){if(_1b.dojoType=="timeout"){dojo.io.script.remove(dfd.ioArgs.id,dfd.ioArgs.frameDoc);}else{dojo.io.script._addDeadScript(dfd.ioArgs);}}return _1b;},_deadScripts:[],_counter:1,_addDeadScript:function(_1c){dojo.io.script._deadScripts.push({id:_1c.id,frameDoc:_1c.frameDoc});_1c.frameDoc=null;},_validCheck:function(dfd){var _1d=dojo.io.script;var _1e=_1d._deadScripts;if(_1e&&_1e.length>0){for(var i=0;i<_1e.length;i++){_1d.remove(_1e[i].id,_1e[i].frameDoc);_1e[i].frameDoc=null;}dojo.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){var _1f=dfd.ioArgs;if(_1f.json||(_1f.scriptLoaded&&!_1f.args.checkString)){return true;}var _20=_1f.args.checkString;if(_20&&eval("typeof("+_20+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(dojo.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(_21){return true;},_jsonpCallback:function(_22){this.ioArgs.json=_22;}};})();}if(!dojo._hasResource["dojo.NodeList-manipulate"]){dojo._hasResource["dojo.NodeList-manipulate"]=true;dojo.provide("dojo.NodeList-manipulate");(function(){function _23(_24){var _25="",ch=_24.childNodes;for(var i=0,n;n=ch[i];i++){if(n.nodeType!=8){if(n.nodeType==1){_25+=_23(n);}else{_25+=n.nodeValue;}}}return _25;};function _26(_27){while(_27.childNodes[0]&&_27.childNodes[0].nodeType==1){_27=_27.childNodes[0];}return _27;};function _28(_29,_2a){if(typeof _29=="string"){_29=dojo._toDom(_29,(_2a&&_2a.ownerDocument));if(_29.nodeType==11){_29=_29.childNodes[0];}}else{if(_29.nodeType==1&&_29.parentNode){_29=_29.cloneNode(false);}}return _29;};dojo.extend(dojo.NodeList,{_placeMultiple:function(_2b,_2c){var nl2=typeof _2b=="string"||_2b.nodeType?dojo.query(_2b):_2b;var _2d=[];for(var i=0;i<nl2.length;i++){var _2e=nl2[i];var _2f=this.length;for(var j=_2f-1,_30;_30=this[j];j--){if(i>0){_30=this._cloneNode(_30);_2d.unshift(_30);}if(j==_2f-1){dojo.place(_30,_2e,_2c);}else{_2e.parentNode.insertBefore(_30,_2e);}_2e=_30;}}if(_2d.length){_2d.unshift(0);_2d.unshift(this.length-1);Array.prototype.splice.apply(this,_2d);}return this;},innerHTML:function(_31){if(arguments.length){return this.addContent(_31,"only");}else{return this[0].innerHTML;}},text:function(_32){if(arguments.length){for(var i=0,_33;_33=this[i];i++){if(_33.nodeType==1){dojo.empty(_33);_33.appendChild(_33.ownerDocument.createTextNode(_32));}}return this;}else{var _34="";for(i=0;_33=this[i];i++){_34+=_23(_33);}return _34;}},val:function(_35){if(arguments.length){var _36=dojo.isArray(_35);for(var _37=0,_38;_38=this[_37];_37++){var _39=_38.nodeName.toUpperCase();var _3a=_38.type;var _3b=_36?_35[_37]:_35;if(_39=="SELECT"){var _3c=_38.options;for(var i=0;i<_3c.length;i++){var opt=_3c[i];if(_38.multiple){opt.selected=(dojo.indexOf(_35,opt.value)!=-1);}else{opt.selected=(opt.value==_3b);}}}else{if(_3a=="checkbox"||_3a=="radio"){_38.checked=(_38.value==_3b);}else{_38.value=_3b;}}}return this;}else{_38=this[0];if(!_38||_38.nodeType!=1){return undefined;}_35=_38.value||"";if(_38.nodeName.toUpperCase()=="SELECT"&&_38.multiple){_35=[];_3c=_38.options;for(i=0;i<_3c.length;i++){opt=_3c[i];if(opt.selected){_35.push(opt.value);}}if(!_35.length){_35=null;}}return _35;}},append:function(_3d){return this.addContent(_3d,"last");},appendTo:function(_3e){return this._placeMultiple(_3e,"last");},prepend:function(_3f){return this.addContent(_3f,"first");},prependTo:function(_40){return this._placeMultiple(_40,"first");},after:function(_41){return this.addContent(_41,"after");},insertAfter:function(_42){return this._placeMultiple(_42,"after");},before:function(_43){return this.addContent(_43,"before");},insertBefore:function(_44){return this._placeMultiple(_44,"before");},remove:dojo.NodeList.prototype.orphan,wrap:function(_45){if(this[0]){_45=_28(_45,this[0]);for(var i=0,_46;_46=this[i];i++){var _47=this._cloneNode(_45);if(_46.parentNode){_46.parentNode.replaceChild(_47,_46);}var _48=_26(_47);_48.appendChild(_46);}}return this;},wrapAll:function(_49){if(this[0]){_49=_28(_49,this[0]);this[0].parentNode.replaceChild(_49,this[0]);var _4a=_26(_49);for(var i=0,_4b;_4b=this[i];i++){_4a.appendChild(_4b);}}return this;},wrapInner:function(_4c){if(this[0]){_4c=_28(_4c,this[0]);for(var i=0;i<this.length;i++){var _4d=this._cloneNode(_4c);this._wrap(dojo._toArray(this[i].childNodes),null,this._NodeListCtor).wrapAll(_4d);}}return this;},replaceWith:function(_4e){_4e=this._normalize(_4e,this[0]);for(var i=0,_4f;_4f=this[i];i++){this._place(_4e,_4f,"before",i>0);_4f.parentNode.removeChild(_4f);}return this;},replaceAll:function(_50){var nl=dojo.query(_50);var _51=this._normalize(this,this[0]);for(var i=0,_52;_52=nl[i];i++){this._place(_51,_52,"before",i>0);_52.parentNode.removeChild(_52);}return this;},clone:function(){var ary=[];for(var i=0;i<this.length;i++){ary.push(this._cloneNode(this[i]));}return this._wrap(ary,this,this._NodeListCtor);}});if(!dojo.NodeList.prototype.html){dojo.NodeList.prototype.html=dojo.NodeList.prototype.innerHTML;}})();}if(!dojo._hasResource["dojo.NodeList-traverse"]){dojo._hasResource["dojo.NodeList-traverse"]=true;dojo.provide("dojo.NodeList-traverse");dojo.extend(dojo.NodeList,{_buildArrayFromCallback:function(_53){var ary=[];for(var i=0;i<this.length;i++){var _54=_53.call(this[i],this[i],ary);if(_54){ary=ary.concat(_54);}}return ary;},_filterQueryResult:function(_55,_56){var _57=dojo.filter(_55,function(_58){return dojo.query(_56,_58.parentNode).indexOf(_58)!=-1;});var _59=this._wrap(_57);return _59;},_getUniqueAsNodeList:function(_5a){var ary=[];for(var i=0,_5b;_5b=_5a[i];i++){if(_5b.nodeType==1&&dojo.indexOf(ary,_5b)==-1){ary.push(_5b);}}return this._wrap(ary,null,this._NodeListCtor);},_getUniqueNodeListWithParent:function(_5c,_5d){var ary=this._getUniqueAsNodeList(_5c);ary=(_5d?this._filterQueryResult(ary,_5d):ary);return ary._stash(this);},_getRelatedUniqueNodes:function(_5e,_5f){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_5f),_5e);},children:function(_60){return this._getRelatedUniqueNodes(_60,function(_61,ary){return dojo._toArray(_61.childNodes);});},closest:function(_62){var _63=this;return this._getRelatedUniqueNodes(_62,function(_64,ary){do{if(_63._filterQueryResult([_64],_62).length){return _64;}}while((_64=_64.parentNode)&&_64.nodeType==1);return null;});},parent:function(_65){return this._getRelatedUniqueNodes(_65,function(_66,ary){return _66.parentNode;});},parents:function(_67){return this._getRelatedUniqueNodes(_67,function(_68,ary){var _69=[];while(_68.parentNode){_68=_68.parentNode;_69.push(_68);}return _69;});},siblings:function(_6a){return this._getRelatedUniqueNodes(_6a,function(_6b,ary){var _6c=[];var _6d=(_6b.parentNode&&_6b.parentNode.childNodes);for(var i=0;i<_6d.length;i++){if(_6d[i]!=_6b){_6c.push(_6d[i]);}}return _6c;});},next:function(_6e){return this._getRelatedUniqueNodes(_6e,function(_6f,ary){var _70=_6f.nextSibling;while(_70&&_70.nodeType!=1){_70=_70.nextSibling;}return _70;});},nextAll:function(_71){return this._getRelatedUniqueNodes(_71,function(_72,ary){var _73=[];var _74=_72;while((_74=_74.nextSibling)){if(_74.nodeType==1){_73.push(_74);}}return _73;});},prev:function(_75){return this._getRelatedUniqueNodes(_75,function(_76,ary){var _77=_76.previousSibling;while(_77&&_77.nodeType!=1){_77=_77.previousSibling;}return _77;});},prevAll:function(_78){return this._getRelatedUniqueNodes(_78,function(_79,ary){var _7a=[];var _7b=_79;while((_7b=_7b.previousSibling)){if(_7b.nodeType==1){_7a.push(_7b);}}return _7a;});},andSelf:function(){return this.concat(this._parent);},first:function(){return this._wrap(((this[0]&&[this[0]])||[]),this);},last:function(){return this._wrap((this.length?[this[this.length-1]]:[]),this);},even:function(){return this.filter(function(_7c,i){return i%2!=0;});},odd:function(){return this.filter(function(_7d,i){return i%2==0;});}});}if(!dojo._hasResource["wsgc.js.SearchController"]){dojo._hasResource["wsgc.js.SearchController"]=true;dojo.provide("wsgc.js.SearchController");dojo.declare("wsgc.js.SearchController",null,{constructor:function(_7e,_7f){var _80,_81;if(_7e){this.searchField=_7e;}else{_81=dojo.byId("search-field");if(_81){this.searchField=_81;}}if(location.href.indexOf("https:")===0){_80=WSI.config.secureAppUrl;}else{_80=WSI.config.appUrl;}this.viewset=dojo.byId("type-ahead-viewset").value;if(!_80){_80="/";}this.searchUrl=_80+this.searchUrl;this.resultsUrl=_80+this.resultsUrl;this._searchResultsCache=[];this.currentResultSet=[];this.createSearchResultsDiv(_7f);this._setupLocalStorage();this._registerSearchEvents();if(this.searchField.value===""){this.displayHistoricalSearchTerms();}},MIN_CHARS:2,SEARCH_HISTORY_LIMIT:3,pause:200,_searchResultsCache:null,_ajaxSearcRequest:null,currentSearchTerm:"",currentResultSet:null,searchUrl:"services/typeahead/",searchUrlSuffix:"*/index.json",resultsUrl:"search/results.html?words=",searchResults:null,inlineSearchHeader:null,searchField:null,timeouts:null,xhrimeout:1500,highlightedTerm:-1,viewset:null,_registerSearchEvents:function(){var _82=this.searchField,_83=dojo.byId("searchform");if(_82){dojo.connect(_82,"onkeyup",this,function(evt){var _84=evt.keyCode,_85=evt.ctlKey,_86=evt.shiftKey;if((_84===38||_84===40)&&!(_85||_86)){this.highlightTerm(_84);}else{if(_84===27&&!(_85||_86)){this.searchField.value=this.currentSearchTerm;this.hideSearchResults();}else{if(_84===13&&!(_85||_86)){this.hideSearchResults();}else{this.setCurrentSearchTerm(evt.currentTarget.value);this.primeTimeout();}}}});dojo.connect(_82,"onfocus",this,this.displayHistoricalSearchTerms);dojo.connect(_82,"onblur",this,this.hideSearchResults);}if(_83){dojo.connect(_83,"submit",this,function(evt){this.stashHistoricalSearchTerm(this.searchField.value);this.cancelSearchRequest();});}},displaySearchResults:function(_87,_88,_89){_89=_89?_89:"Search Suggestions";if(dojo.isArray(_87)&&_87.length>0){var ul=document.createElement("ul"),_8a=document.createElement("li"),_8b=document.createElement("a"),li,a,_8c,_8d;_8b.href=this.resultsUrl;for(var i=0,len=_87.length;i<len;i++){_87[i]=_87[i].replace(/<[^>]+>/g,"");li=_8a.cloneNode(true);a=_8b.cloneNode(true);if(dojo.trim(_88)!==""){a.innerHTML=_87[i].replace(_88,"<span>"+_88+"</span>");}else{a.innerHTML=_87[i];}a.href=a.href+encodeURIComponent(_87[i]);li.appendChild(a);ul.appendChild(li);}_8d=this.searchResults;_8c=dojo.query("ul",_8d);if(_8c.length>0){_8c=_8c[0];_8c.parentNode.replaceChild(ul,_8c);}else{_8d.appendChild(ul);}this.inlineSearchHeader.innerHTML=_89;dojo.removeClass(_8d,"hide");this.highlightedTerm=-1;this.currentResultSet=_87;}else{this.hideSearchResults();}},displayHistoricalSearchTerms:function(){var _8e=dojo.fromJson(this.getLocalStorage("recentSearches")||"[]");if(_8e.length){this.displaySearchResults(_8e,"","Recent Searches");}},createSearchResultsDiv:function(_8f,_90){if(_8f){this.searchResults=_8f;}else{var _91=dojo.byId("inlineSearchResults"),_92;if(_91){this.searchResults=_91;}else{var _93=document.createElement("div");dojo.attr(_93,{id:"searchResults"});dojo.addClass(_93,"hide");this.searchField.parentNode.appendChild(_93);this.searchResults=_93;}}this.inlineSearchHeader=typeof (_90)!=="undefined"?_90:dojo.query(".inlineSearchHeader")[0];dojo.connect(this.searchResults,"onclick",this,this.searchResultClick);},hideSearchResults:function(){var _94=this;setTimeout(function(){dojo.addClass(_94.searchResults,"hide");dojo.query("ul",_94.searchResults).forEach("item.parentNode.removeChild(item);");},500);_94.currentResultSet=[];_94.highlightedTerm=-1;},queueSearch:function(){var _95={handleAs:"json",load:this.searchCallback,timeout:this.xhrimeout,searchTerm:this.currentSearchTerm,context:this};_95.url=this.searchUrl+this.viewset+"/"+encodeURIComponent(this.currentSearchTerm.replace(/\./g," "))+this.searchUrlSuffix;dojo.xhrGet(_95);},primeTimeout:function(){this.clearTimeout();if(this.currentSearchTerm.length>=this.MIN_CHARS){if(this._searchResultsCache[this.currentSearchTerm]){this.displaySearchResults(this._searchResultsCache[this.currentSearchTerm],this.currentSearchTerm);}else{var _96=this;this.timeouts=setTimeout(function(){_96.queueSearch();},this.pause);}}else{this.hideSearchResults();}},clearTimeout:function(){if(this.timeouts){clearTimeout(this.timeouts);}},setCurrentSearchTerm:function(_97){this.currentSearchTerm=dojo.trim(_97);},searchCallback:function(_98){if(_98&&_98.results&&this.searchTerm){var _99=_98.results,_9a=this.searchTerm,_9b=this.context;_9b.displaySearchResults(_99,_9a);_9b._searchResultsCache[_9a]=_99;}},highlightTerm:function(_9c){var _9d=this.currentResultSet,_9e=_9d.length,_9f,_a0,_a1,_a2;if(_9e>0){_9f=(_9c===38)?-1:1;_a0=this.highlightedTerm;_a1=_a0+_9f;if(_a1>-1&&_a1<_9e){_a2=dojo.query("li",this.searchResults);if(_a0>-1){dojo.removeClass(_a2[_a0],"highlighted");}dojo.addClass(_a2[_a1],"highlighted");this.searchField.value=_9d[_a1];this.highlightedTerm=_a1;}}},searchResultClick:function(evt){var _a3=evt.target,_a4,_a5;if(_a3.nodeName==="A"){_a5=_a3.innerHTML;_a4=(_a5.indexOf("<span>")>-1);_a5=_a5.replace(/<span>/,"").replace(/<\/span>/,"");this.stashHistoricalSearchTerm(_a5);if(typeof cmCreatePageElementTag==="function"){if(_a4){cmCreatePageElementTag("Type Ahead","Search Interactions");}else{cmCreatePageElementTag("Search history","Search Interactions");}}}},searchResultKeyPress:function(){if(dojo.query(".highlighted",this.searchResults).length){if(typeof cmCreatePageElementTag==="function"){cmCreatePageElementTag("Type Ahead","Search Interactions");}}},stashHistoricalSearchTerm:function(_a6){var _a7=dojo.fromJson(this.getLocalStorage("recentSearches")||"[]"),i,len,_a8=[],obj={},_a9=this.SEARCH_HISTORY_LIMIT;_a7.unshift(_a6.toLowerCase());for(i=0,len=_a7.length;i<len;i++){if(!obj[_a7[i]]){obj[_a7[i]]=true;_a8.push(_a7[i]);}if(_a8.length===_a9){break;}}this.setLocalStorage("recentSearches",dojo.toJson(_a8));},cancelSearchRequest:function(){if(this._ajaxSearcRequest&&typeof this._ajaxSearcRequest.cancel==="function"){this._ajaxSearcRequest.cancel();}},setLocalStorage:function(key,_aa){return null;},getLocalStorage:function(key){return null;},_setupLocalStorage:function(){var _ab,_ac=WSI.config,_ad=(location.protocol==="https:"),_ae,_af;if("localStorage" in window&&window["localStorage"]!==null){this.setLocalStorage=function(key,_b0,_b1){if(typeof key!=="string"||typeof _b0!=="string"){return null;}if(!_b1){if(_ad){dojo.cookie("temp_local",_b0,{domain:_ac.cookieSubDomain,path:"/",expires:365});}else{dojo.cookie("sec_local",_b0,{domain:_ac.cookieSubDomain,path:"/",secure:true,expires:365});}}return window.localStorage.setItem(key,_b0);};this.getLocalStorage=function(key){return window.localStorage.getItem(key);};if(_ad){_ae=dojo.cookie("sec_local");if(_ae){this.setLocalStorage("recentSearches",_ae,true);dojo.cookie("sec_local",null,{domain:_ac.cookieSubDomain,path:"/",secure:true,expires:-1});}}else{_af=dojo.cookie("temp_local");if(_af){this.setLocalStorage("recentSearches",_af,true);dojo.cookie("temp_local",null,{domain:_ac.cookieSubDomain,path:"/",expires:-1});}}}}});}if(!dojo._hasResource["wsgc.common.js.Utils"]){dojo._hasResource["wsgc.common.js.Utils"]=true;dojo.provide("wsgc.common.js.Utils");(function(_b2,_b3){_b2.declare("wsgc.common.js.Utils",null,{getWindowScrollPos:function(){if(typeof window.pageXOffset==="undefined"){var _b4=document.documentElement||document.body.parentNode||document.body;return {x:_b4.scrollLeft,y:_b4.scrollTop};}return {x:window.pageXOffset,y:window.pageYOffset};}});}(dojo));}if(!dojo._hasResource["wsgc.js.UserAgent"]){dojo._hasResource["wsgc.js.UserAgent"]=true;dojo.provide("wsgc.js.UserAgent");(function(_b5,_b6){WSI=window.WSI||{};WSI.isIPad=!!navigator.userAgent.match(/iPad/i);WSI.capabilities=Modernizr;}(dojo));}if(!dojo._hasResource["wsgc.js.Utils"]){dojo._hasResource["wsgc.js.Utils"]=true;dojo.provide("wsgc.js.Utils");(function(_b7,_b8){var _b9={},_ba={},_bb=WSI.innerShiv,_bc=null,_bd=null,_be=WSI.isIPad,_bf=WSI.capabilities.touch;_b7.declare("wsgc.js.Utils",[wsgc.common.js.Utils],{constructor:function(_c0,_c1){this._savedCartCookie=_c0;this._sessionCartCookie=_c1;this._registerSearchFieldEvents();this._registerInputPlaceholders();this._registerPopupNewWindowEvents();this._registerPopulateShippingFromBilling();this._registerChangeShipToEvents();this._registerInterstitialEvents();this._registerViewAllCookieBaker();this._setBasketCount();this._registerMultiSelect();this._setCellHeightByRow();this._footerJOELPopup();this._SMSForm();this._sidebarSMSForm();this._sidebarJOELPopup();this._registerPromotionsSignInEvents();this._registerAosDCPickupEvents();this._registerAsynchronousShopImages();this._emailAFriendPreview();this._registerShopSortBy();this._nuclearFooter();this._bloomReach();this._registerOpenInParentWindowLink();this._autoEqualizeHeights();this._registerHoverFadeHandler();this._topNavRightAlign();if(_b7.byId("billing-info")){this._reisterBillingSyncOrder();}if(_b7.byId("paymentInformation")){this._scrollToPaymentPageErrors();this._registerSVCApply();this._registerCreditCardFieldEvents();this._registerPlaceOrder();this._registerSVCLRC();this._registerPromoRemove();this._registerPromoApplyEvents();}_b7.query(".forgotPassword").forEach(_b7.hitch(this,function(_c2){_b7.connect(_c2,"onclick",this,"handleForgotPasswordClick");}));var _c3=_b7.byId("mobileEquiv");if(_c3){_b7.connect(_c3,"onclick",this,"handleMobileEquivClick");}var _c4=_b7.byId("cartForm");if(_c4){_b7.connect(_b7.byId("cartForm"),"onsubmit",function(evt){_b7.query(".delete-item").forEach("item.disabled = true");return true;});}_b7.query("#choose-another-category-drop").forEach(function(_c5){_b7.connect(_c5,"onchange",this,function(evt){location.href=evt.currentTarget.value;});});_b7.query(".goBack").forEach(function(_c6){_b7.connect(_c6,"onclick",function(evt){evt.preventDefault();history.back();});});this.handleGuestRegistryPassword();if((typeof bazaarVoiceHost!=="undefined"&&document.referrer.match("^"+bazaarVoiceHost))||document.referrer===""){_b7.query("#recipes .goBack").forEach("item.style.display='none';");}if(_b7.byId("searchresults")){this._searchUtils=new wsgc.js.SearchUtils();}this._updateBannerCookie();_b7.query(".mboxDefault").forEach(function(_c7){if(_b7.style(_c7,"visibility")!=="visible"){_b7.style(_c7,"visibility","visible");}});if(WSI.isEnabled("bvAnswers")&&_b7.exists("WSI.bvAnsCalls")){var _c8=this.callFunctions,_c9=function(){if(window.$BV&&typeof window.$BV.configure==="function"&&typeof window.$BV.ui==="function"){_c8(WSI.bvAnsCalls);}else{setTimeout(_c9,500);}};_c9();}if(WSI.offsiteRequests.length){this._handleOffsiteRequests(WSI.offsiteRequests);WSI.offsiteRequests=[];}},POPUP_DEFAULT_HEIGHT:560,POPUP_DEFAULT_WIDTH:820,POPUP_DEFAULT_RESIZE:1,POPUP_DEFAULT_NAME:"AppPopup",_savedCartCookie:"",_sessionCartCookie:"",MULTI_BUY_CARTURL:"/shoppingcart/style-and-quantity.html",BANNER_COOKIE:"i",_multi_buy_items:null,MULTI_BUY_ERROR:"<p class=\"error\">Please select a product to add to your cart.</p>",formSubmitted:false,_searchController:null,_searchUtils:null,savedCreditCardSelected:false,savedCreditCardInfo:null,viewset:"ecom",placeHolderText:{},_registerAosDCPickupEvents:function(){var _ca=_b7.query(".dcPickupCbx");if(_ca.length===0){return;}var _cb=function(_cc){var _cd=_cc.parentNode.parentNode;_b7.query(".billingAddressUpdate",_cd).forEach("item.checked=false;");_b7.query(".aosDCPickupToggle").addClass("hidden");_b7.query(".dcField",_cd).forEach("dojo.addClass(item, 'hide');");_b7.query(".dcField input[type='text'], .dcField select",_cd).forEach("item.value='';");};var _ce=function(_cf){var _d0=_cf.parentNode.parentNode;_b7.query(".aosDCPickupToggle").removeClass("hidden");_b7.query(".dcField",_d0).forEach("dojo.removeClass(item, 'hide');");_b7.query(".dcField input[type='text'], .dcField select",_d0).forEach("item.value='';");};_ca.forEach(function(_d1){if(_d1.checked){_cb(_d1);}_b7.connect(_d1,"onclick",null,function(evt){var _d2=evt.currentTarget;if(_d2.checked){_cb(_d2);}else{_ce(_d2);}});});},_setBasketCount:function(){var _d3=_b7.cookie(this._sessionCartCookie.toUpperCase());if(typeof _d3=="undefined"){_d3=_b7.cookie(this._savedCartCookie.toUpperCase());}if((typeof _d3=="undefined")||(_d3.split("|").length<4)){return;}var _d4=_d3.split("|")[3];if(_b7.byId("cart-count")){if(_d4!=="0"){_b7.byId("cart-count").innerHTML="<span> : </span>"+_d4;}else{_b7.byId("cart-count").innerHTML="";}}},_registerSearchFieldEvents:function(){var _d5=_b7.byId("search-field"),_d6=_b7.byId("btnSearch"),_d7=(location.protocol==="https:"),_d8=_b7.cookie("sec_local"),_d9=_b7.cookie("temp_local");this._setViewSet();if(_d5&&WSI.searchType!=="google"){if((_d9&&!_d7)||(_d7&&_d8)){this._searchController=new wsgc.js.SearchController();}this.default_search_text=_d5.value;_b7.connect(_d5,"onfocus",this,function(evt){if(evt.currentTarget.value===this.default_search_text){evt.currentTarget.value="";}if(!this._searchController&&this.viewset!=="reg"){this._searchController=new wsgc.js.SearchController();}});_b7.connect(_d5,"onblur",this,function(evt){if(evt.currentTarget.value==""){evt.currentTarget.value=this.default_search_text;}});}if(_d6){_b7.connect(_d6,"click",this,function(evt){var _da=_b7.byId("searchform"),_db=_b7.byId("search-field"),_dc="&cm_sp=OnsiteSearch-_-GlobalNav-_-Button",_dd;evt.preventDefault();if(_da&&_da.action&&_d5&&_d5.value&&typeof cmCreateManualLinkClickTag==="function"){_dd=_da.action+"?words="+encodeURIComponent(_d5.value)+_dc;cmCreateManualLinkClickTag(_dd,"GLOBAL_NAV","SEARCH");}if(_b7.query(".highlighted",this.searchResults).length&&typeof cmCreatePageElementTag==="function"){cmCreatePageElementTag("Search Interactions","Type Ahead");}if(this._searchController){this._searchController.stashHistoricalSearchTerm(_d5.value);}_da.submit();});}},_registerInterstitialEvents:function(){var _de=null;_b7.query("form.interstitialForm #btn-edit").forEach(function(_df){_b7.connect(_df,"onclick",this,"_handleInterstitialEditClick");},this);_b7.query("form.interstitialForm .btnEditBehavior").forEach(function(_e0){_b7.connect(_e0,"onclick",this,"_handleInterstitialEditClick");},this);_b7.query("form.interstitialForm .btn-preview").forEach(function(_e1){_b7.connect(_e1,"onclick",this,"_handleInterstitialPreviewClick");},this);_b7.query("form.interstitialForm #btn-continue").forEach(function(_e2){_b7.connect(_e2,"onclick",this,"_handleInterstitialContinueClick");},this);_b7.query(".interstitialForm .btn-continue-path").forEach(function(_e3){_b7.connect(_e3,"onclick",this,"_handleInterstitialContinueClick");},this);},_registerViewAllCookieBaker:function(){_b7.query(".pagination .view-all").connect("onclick",function(evt){_b7.cookie("viewall","1",{"path":"/"});});_b7.query(".pagination .view-by-page").connect("onclick",function(evt){_b7.cookie("viewall","0",{"expires":-1});});},_registerPopupNewWindowEvents:function(){WSI.Events.delegate("click",".popup",function(evt){_b7.stopEvent(evt);var _e4=_b7.attr(this,"rel");var _e5;var _e6,_e7,_e8,_e9;try{_e5=_b7.fromJson(_e4);_e6=(_e5&&_e5.dim&&_e5.dim.height)?_e5.dim.height:this.POPUP_DEFAULT_HEIGHT;_e7=(_e5&&_e5.dim&&_e5.dim.width)?_e5.dim.width:this.POPUP_DEFAULT_WIDTH;_e8=(_e5&&_e5.dim&&_e5.dim.resize)?_e5.dim.resize:this.POPUP_DEFAULT_RESIZE;_e9=(_e5&&_e5.name)?_e5.name:this.POPUP_DEFAULT_NAME;}catch(e){_e6=this.POPUP_DEFAULT_HEIGHT;_e7=this.POPUP_DEFAULT_WIDTH;_e8=this.POPUP_DEFAULT_RESIZE;_e9=this.POPUP_DEFAULT_NAME;}var _ea="toolbar=no,location=no,directories=no,scrollbars=1,resizable="+_e8+",height="+_e6+",width="+_e7+",screenX=4,screenY=4,top=4,left=4";var win=window.open(this.href,_e9,_ea);if(win&&win.focus){win.focus();}if(_b7.attr(this,"pophref")){evt.href=_b7.attr(this,"pophref");}});WSI.Events.delegate("click",".newWindow",function(evt){_b7.stopEvent(evt);var _eb=_b7.attr(this,"rel");var _ec;var _ed;try{_ec=_b7.fromJson(_eb);_ed=(_ec&&_ec.name)?_ec.name:this.POPUP_DEFAULT_NAME;}catch(e){_ed=this.POPUP_DEFAULT_NAME;}var _ee="toolbar=yes,location=yes,directories=no,scrollbars=1,resizable=1";var win=window.open(this.href,_ed,_ee);if(win&&win.focus){win.focus();}});_b7.query(".close").forEach(function(_ef){_b7.connect(_ef,"onclick",function(evt){evt.preventDefault();evt.stopPropagation();window.close();});});_b7.query(".closeAndContinue").forEach(function(_f0){_b7.connect(_f0,"onclick",this,"_newParentWindow");},this);_b7.query(".driveParent").forEach(function(_f1){_b7.connect(_f1,"onclick",this,"_redirectParent");},this);_b7.query(".redirectParent").forEach(function(_f2){_b7.connect(_f2,"onclick",this,"_redirectParentNoClose");},this);WSI.Events.delegate("click",".print, .printButton",function(evt){var _f3=_b7.query("img[data-async-src]"),_f4=_f3.length;evt.preventDefault();if(_f4==0){window.print();}else{_f3.forEach(function(e,i){e.setAttribute("src",e.getAttribute("data-async-src"));_b7.connect(e,"onload",function(){_f4--;if(_f4==0){window.print();}});e.removeAttribute("data-async-src");});}});_b7.query(".rollover").forEach(function(_f5){_b7.connect(_f5,"onmouseover",function(evt){var _f6=evt.currentTarget.src.replace("_off","_on");evt.currentTarget.src=_f6;});_b7.connect(_f5,"onmouseout",function(evt){var _f7=evt.currentTarget.src.replace("_on","_off");evt.currentTarget.src=_f7;});_b7.connect(_f5,"onfocus",function(evt){var _f8=evt.currentTarget.src.replace("_off","_on");evt.currentTarget.src=_f8;});_b7.connect(_f5,"onblur",function(evt){var _f9=evt.currentTarget.src.replace("_on","_off");evt.currentTarget.src=_f9;});});_b7.query(".delete-item").forEach(function(_fa){_b7.connect(_fa,"onclick",function(evt){_b7.stopEvent(evt);var _fb=_fa.name;document.cartForm[_fb].value="true";_b7.byId("cartForm").submit();});});_b7.query(".checkoutButton").forEach(function(_fc){_b7.connect(_fc,"onclick",function(evt){_b7.stopEvent(evt);_b7.byId("checkout").value="true";_b7.byId("chkmode").value=_b7.hasClass(evt.currentTarget,"expressButton")?"xpress":"normal";_b7.byId("cartForm").submit();});});},_registerChangeShipToEvents:function(){var _fd=_b7.byId("shipToChanged");if(!_fd){return;}opener.location="/shoppingcart/";opener.location.reload(true);window.close();},_registerSVCApply:function(){var _fe=_b7.byId("applysvc");if(!_fe){return;}_b7.connect(_fe,"onclick",function(evt){var _ff=_b7.byId("svcCard.svcCardNumber");var _100=_b7.byId("svcCard.pinNumber");if(_ff&&_ff.value===""){if(_100&&_100.value===""){var _101=_b7.byId("applyPromoBlock");if(_101){var _102=_b7.byId("promoCode");if(_102.value!==""){_b7.byId("promoApply").value="yes";}}var _103=_b7.byId("svcApply");_103.value="yes";return;}}var _103=_b7.byId("svcApply");_103.value="yes";});},_reisterBillingSyncOrder:function(){var _104=_b7.byId("billingSubmit");if(!_104){return;}_b7.connect(_104,"onclick",this,function(evt){if(this.formSubmitted){_b7.stopEvent(evt);}else{this.formSubmitted=true;}});},_registerPlaceOrder:function(){var _105=_b7.byId("placeOrder"),_106=_b7.byId("buttonClick");if(!_105){return;}_b7.connect(_105,"onclick",this,function(evt){if(this.formSubmitted){evt.preventDefault();}else{this.formSubmitted=true;}});_b7.query("#action-buttons input[type='image']").connect("onclick",null,function(evt){if(_106){_106.value=evt.target.id;}});},_scrollToPaymentPageErrors:function(){var _107=_b7.byId("paymentInformation");if(!_107){return;}this.deferredPayment();var _108=_b7.byId("promotionsErrors");var _109=_b7.byId("svcError");var _10a=_b7.byId("discountsApplied");var _10b=_b7.byId("ccError");if(_108){if(_b7.query(".promotions-block").length>0){_b7.query(".promotions-block")[0].scrollIntoView(true);}}else{if(_109&&_b7.trim(_109.innerHTML)!==""){if(_b7.query(".gift-cards-and-help").length>0){_b7.query(".gift-cards-and-help")[0].scrollIntoView(true);}}else{if(_10b&&_b7.trim(_10b.innerHTML)!==""){if(_b7.query(".payment-information-block").length>0){_b7.query(".payment-information-block")[0].scrollIntoView(true);}}else{if(_10a&&_b7.trim(_10a.innerHTML)!==""){if(_b7.query(".gift-cards-and-help").length>0){_b7.query(".gift-cards-and-help")[0].scrollIntoView(true);}}}}}var _10c=_b7.byId("creditCard.payType");if(_10c.value==8){_b7.attr("creditCard.cardExpMonth","disabled",true);_b7.attr("creditCard.cardExpYear","disabled",true);_b7.attr("creditCard.cardVerificationNumber","disabled",true);}},_registerCreditCardFieldEvents:function(){var _10d=_b7.byId("creditCard.payType"),_10e=_b7.byId("icAvailable");if(!_10d){return;}_b7.connect(_10d,"onchange",_b7.hitch(this,function(evt){var _10f=evt.target.value,_110=_b7.byId("creditCard.cardExpMonth"),_111=_b7.byId("creditCard.cardExpYear"),_112=_b7.byId("creditCard.cardVerificationNumber"),_113=_b7.byId("allowZeroExp"),_114=_b7.byId("creditCard.cardNumber");if(this.savedCreditCardSelected&&_10f!=="scc"){this.savedCreditCardSelected=false;_b7.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_b7.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_110.value="";_111.value="";_b7.attr(_112,"disabled",false);_112.value="";_b7.query("#edit-cc-link").forEach("dojo.addClass(item, 'hide');");}if(_10f==="11"&&_10e){this._displayCCFieldsForInstantCredit();}else{_b7.query(".sccHide, .icHide").forEach("dojo.removeClass(item, 'hide');");_b7.query(".sccDisable, .icDisable").forEach("dojo.attr(item, 'disabled', false);");_b7.attr(_112,"disabled",false);_113.value="N";_b7.removeClass(_112,"hide");_110.options[0].text="Month";_111.options[0].text="Year";_114.value="";if(_10f==="scc"){this.displaySavedCreditCard();}}this.deferredPayment();}));if(_10d.value==="11"&&_10e||(!_b7.byId("ccError")&&_10e&&_b7.query("option[value='11']",_b7.byId("creditCard.payType")).length>0)){_10d.value="11";this._displayCCFieldsForInstantCredit();}else{if(_10d.value==="scc"||(!_b7.byId("ccError")&&_b7.query("option[value='scc']",_b7.byId("creditCard.payType")).length>0)){this.displaySavedCreditCard();}}},displaySavedCreditCard:function(){var _115,_116,ccvn,_117;if(!this.savedCreditCardInfo){_115=_b7.byId("savedCCJSON");if(!_115){return;}try{this.savedCreditCardInfo=_b7.fromJson(_115.value);}catch(e){this.savedCreditCardInfo="";}if(this.savedCreditCardInfo===""){return;}}_116=this.savedCreditCardInfo;this.savedCreditCardSelected=true;_b7.byId("creditCard.payType").value="scc";_b7.byId("creditCard.cardExpMonth").value=_116.expireMonth;_b7.byId("creditCard.cardExpYear").value=_116.expireYear;WSI.formV=new wsgc.js.InlineValidation();WSI.formV.hideAllCreditCardErrorMsgs();ccvn=_b7.byId("creditCard.cardVerificationNumber");_117=_b7.query(".ccvn");if(_116.validate==="Y"||_116.cardType==="8"){var _118=_b7.byId("allowZeroExp");if(_118){_118.value="Y";}}else{_117.forEach("dojo.removeClass(item, 'sccHide');");ccvn.value="";}_b7.query(".sccHide").forEach("dojo.addClass(item, 'hide');");_b7.query(".sccDisable").forEach("dojo.attr(item, 'disabled', true);");_b7.query("#edit-cc-link").forEach("dojo.removeClass(item, 'hide');");},_displayCCFieldsForInstantCredit:function(){var _119=_b7.byId("creditCard.cardExpMonth"),_11a=_b7.byId("creditCard.cardExpYear"),_11b=_b7.byId("creditCard.cardVerificationNumber"),_11c=_b7.byId("allowZeroExp"),_11d=_b7.byId("creditCard.cardNumber");_b7.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_b7.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_119.selectedIndex=0;_119.options[0].text="**";_b7.attr(_119,"disabled",true);_11a.selectedIndex=0;_11a.options[0].text="****";_b7.attr(_11a,"disabled",true);_b7.removeClass(_11b,"hide");_b7.attr(_11b,"disabled",true);_11d.value="****************";_11c.value="Y";_b7.query(".icHide").forEach("dojo.addClass(item, 'hide');");_b7.query(".icDisable").forEach("dojo.attr(item, 'disabled', true);");WSI.formV=new wsgc.js.InlineValidation();WSI.formV.hideAllCreditCardErrorMsgs();WSI.formV.hideAllErrorMsgs(_b7.byId("creditCard.cardVerificationNumber"));},_registerPopulateShippingFromBilling:function(){var _11e=_b7.byId("applyBillingAddtoShipping");if(_11e&&_b7.hasClass(_11e,"billToShipCopy")){_b7.connect(_11e,"onclick",function(evt){var _11f=evt.target.checked;if(_11f){_b7.attr("shiptoAddress.fullName",{"value":_b7.byId("billtoAddress.fullName").value,"disabled":"disabled"});_b7.attr("shiptoAddress.addrLine1",{"value":_b7.byId("billtoAddress.addrLine1").value,"disabled":"disabled"});_b7.attr("shiptoAddress.addrLine2",{"value":_b7.byId("billtoAddress.addrLine2").value,"disabled":"disabled"});_b7.attr("shiptoAddress.city",{"value":_b7.byId("billtoAddress.city").value,"disabled":"disabled"});document.getElementById("shiptoAddress.state").value=document.getElementById("billtoAddress.state").value;_b7.byId("shiptoAddress.state").selectedIndex=_b7.byId("billtoAddress.state").selectedIndex;_b7.attr("shiptoAddress.state","disabled","true");_b7.attr("shiptoAddress.zip",{"value":_b7.byId("billtoAddress.zip").value,"disabled":"disabled"});_b7.attr("shiptoAddress.dayPhone",{"value":_b7.byId("billtoAddress.dayPhone").value,"disabled":"disabled"});_b7.attr("shiptoAddress.eveningPhone",{"value":_b7.byId("billtoAddress.eveningPhone").value,"disabled":"disabled"});_b7.query("#ship-account-info input, #ship-account-info select").addClass("disabled");}else{_b7.query("#ship-account-info input, #ship-account-info select").forEach(function(elem){elem.removeAttribute("disabled");});_b7.query("#ship-account-info input, #ship-account-info select").removeClass("disabled");}});if(_b7.attr(_11e,"checked")===true){_b7.query("#ship-account-info input, #ship-account-info select").attr("disabled","disabled").addClass("disabled");}}},handleForgotPasswordClick:function(evt){_b7.stopEvent(evt);var form=_b7.byId("loginForm");if(form){form.action=WSI.config.secureAppUrl+"account/password-request-confirmation.html";form.submit();}},handleMobileEquivClick:function(evt){if(WSI.config){_b7.cookie(WSI.config.sitePref,"mobile",{domain:WSI.config.cookieSubDomain,path:"/"});}},_handleInterstitialEditClick:function(evt){_b7.stopEvent(evt);evt.preventDefault();_b7.byId("isEditMode").value="1";this._postInterstitialForm();},_handleInterstitialPreviewClick:function(evt){if(_b7.byId("isPreview")){_b7.byId("isPreview").value="1";}if(evt&&evt.currentTarget&&evt.currentTarget.id){var _120=evt.currentTarget.id.substr(10);if(_b7.byId("previewIndex")){_b7.byId("previewIndex").value=_120;}}_b7.stopEvent(evt);this._postInterstitialForm();},_handleInterstitialContinueClick:function(evt){_b7.stopEvent(evt);_b7.byId("isEditMode").value="0";this._postInterstitialForm();},_postInterstitialForm:function(){if(_b7.query(".interstitialForm").length>0){var form=_b7.query(".interstitialForm")[0];form.submit();}},_forwardToExternalSite:function(win,url){if(win){win.close();}var _121=window.open(url);},_registerSVCLRC:function(){var _122="";_b7.query(".removeSVCLRCButton").forEach(function(_123){_b7.connect(_123,"onclick",function(evt){if(!_b7.attr(evt.currentTarget,"svcnumber")){return false;}_122=_b7.attr(evt.currentTarget,"svcnumber");_b7.byId("removeSvcLrc").value=_122;return true;});});},_registerPromoRemove:function(){var _124="";_b7.query(".removePromoButton").forEach(function(_125){_b7.connect(_125,"onclick",function(evt){if(!_b7.attr(evt.currentTarget,"promoCode")){return false;}_124=_b7.attr(evt.currentTarget,"promoCode");_b7.byId("releasePromo").value=_124;return true;});});},_newParentWindow:function(evt){var win;var url=evt.currentTarget.href;if(_b7.isFF){try{if(_b7.exists("window.opener.WSI.utils._forwardToExternalSite")){window.opener.WSI.utils._forwardToExternalSite(window,url);}else{win=window.open(url);window.close();}}catch(e){win=window.open(url);window.close();}}else{win=window.open(url);window.close();}},_redirectParent:function(evt){evt.preventDefault();evt.stopPropagation();var url=evt.currentTarget.href;if(_b7.exists("window.opener")){window.opener.location.href=url;if(_b7.exists("window.opener.focus")){window.opener.focus();}}else{var win=window.open(url);window.close();}window.close();},_redirectParentNoClose:function(evt){evt.preventDefault();evt.stopPropagation();var url=evt.currentTarget.href;if(_b7.exists("window.opener")){window.opener.location.href=url;}else{var win=window.open(url);}},deferredPayment:function(){var _126=_b7.byId("creditCard.payType").value;var _127=_b7.byId("deferredPayment");if(_127){var _128=_b7.byId("deferPayments");var _129=_128.value.split(",");var _12a=_b7.byId("creditCard.payType").options;var _12b=_b7.byId("deferredCardType");for(var i=0;i<_129.length;i++){if(_126===_129[i]){for(var j=0;j<_12a.length;j++){if(_12a[j].value==_126){_12b.innerHTML=_12a[j].text;}}_b7.style(_127,{"display":"block"});break;}else{_b7.style(_127,{"display":"none"});}}}},_registerMultiSelect:function(){this._multi_buy_items=[];if(_b7.byId("productGroupIds")&&_b7.byId("productGroupIds").value!==""){this._multi_buy_items=_b7.byId("productGroupIds").value.split(",");}if(_b7.query("form[name='multiSelect']").length>0){_b7.query(".pagination a").connect("onclick",this,function(evt){var _12c=_b7.query("form[name='multiSelect']")[0];var _12d=evt.currentTarget.href;evt.preventDefault();this._writeMultiBuyItemsToField();_12c.action=_12d;_12c.submit();});_b7.query(".btn-add-selected a").connect("onclick",this,function(evt){var _12e=_b7.query("form[name='multiSelect']")[0];var _12f=this.MULTI_BUY_CARTURL;evt.preventDefault();this._writeMultiBuyItemsToField();if(_b7.byId("productGroupIds")&&_b7.trim(_b7.byId("productGroupIds").value)!==""){_12e.action=_12f;_12e.submit();}else{if(_b7.byId("pageErrorHook")){_b7.byId("pageErrorHook").innerHTML=this.MULTI_BUY_ERROR;window.scroll(0,0);}}});_b7.query(".muliBuyCheckbox").connect("onclick",this,"_handleMutliBuyCheckboxClick");}},_writeMultiBuyItemsToField:function(){if(_b7.byId("productGroupIds")&&this._multi_buy_items){_b7.byId("productGroupIds").value=this._multi_buy_items.join(",");}},_handleMutliBuyCheckboxClick:function(evt){var _130=evt.currentTarget;var _131=evt.currentTarget.value;if(_130.checked){if(_b7.indexOf(this._multi_buy_items,_131)===-1){this._multi_buy_items.push(_131);}}else{if(_b7.indexOf(this._multi_buy_items,_131)>-1){this._multi_buy_items.splice(_b7.indexOf(this._multi_buy_items,_131),1);}}},_setCellHeightByRow:function(){if(!(_b7.byId("searchresults")||_b7.byId("one-shipment"))){if(_b7.query("ul.product-list").length>0){var _132=_b7.query("ul.product-list");if(_132.length>0){var _133=_b7.query("div.subcat-list",_132[0]).length>0;if(!_133){_b7.forEach(_132,function(row){var _134=0;var _135=_b7.query("li",row);_135.forEach(function(el){_134=_b7.marginBox(el).h>_134?_b7.marginBox(el).h:_134;});_135.forEach(function(el){_b7.marginBox(el,{h:_134});el.style.borderBottomWidth="1px";});});}else{_b7.forEach(_132,function(row){var _136=0;var _137=_b7.query("li div.product-name a",row);_137.forEach(function(el){_136=_b7.marginBox(el).h>_136?_b7.marginBox(el).h:_136;});_137.forEach(function(el){var _138=_136-_b7.marginBox(el).h+"px";_b7.style(el,"marginTop",_138);});var _139=0;var _13a=_b7.query("div.subcat-list",row);_13a.forEach(function(el){_139=_b7.marginBox(el).h>_139?_b7.marginBox(el).h:_139;});_13a.forEach(function(el){_b7.marginBox(el,{h:_139});});});}}}}},_footerJOELPopup:function(){var _13b=_b7.byId("joinEmail");if(_13b){_b7.connect(_13b,"onsubmit",function(evt){evt.preventDefault();evt.stopPropagation();var url=document.forms.joinEmail.action+"?email="+document.forms.joinEmail.email.value;var _13c="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_13c);win.focus();});}},_SMSForm:function(){var _13d=_b7.byId("joinSMS");if(_13d){_b7.connect(_13d,"onsubmit",function(evt){_b7.stopEvent(evt);var url=_13d.action+"?mobileNumber="+encodeURIComponent(_13d.mobileNumber.value),_13e="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4",win=window.open(url,"joinsms",_13e);win.focus();});}},_sidebarSMSForm:function(){var _13f=_b7.byId("joinSMS2");if(_13f){_b7.connect(_13f,"onsubmit",function(evt){_b7.stopEvent(evt);var url=_13f.action+"?mobileNumber="+encodeURIComponent(_13f.mobileNumber.value),_140="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4",win=window.open(url,"joinsms",_140);win.focus();});}},_sidebarJOELPopup:function(){var _141=_b7.byId("joinEmail2");if(_141){_b7.connect(_141,"onsubmit",function(evt){evt.preventDefault();evt.stopPropagation();var url=document.forms.joinEmail2.action+"?email="+document.forms.joinEmail2.email.value;var _142="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_142);win.focus();});}},_registerInputPlaceholders:function(){var _143=[_b7.byId("footer-email-field"),_b7.byId("sidebar-email-field"),_b7.byId("footer-sms-field"),_b7.byId("sidebar-sms-field")],_144=function(_145,_146){_146.placeHolderText[_145.id]=_145.value;_b7.connect(_145,"onfocus",_146,function(evt){var _147=evt.currentTarget;if(_147.value===this.placeHolderText[_145.id]){_147.value="";}});_b7.connect(_145,"onblur",_146,function(evt){var _148=evt.currentTarget;if(_148.value===""){_148.value=this.placeHolderText[_145.id];}});},i,len;for(i=0,len=_143.length;i<len;i++){if(_143[i]){_144(_143[i],this);}}},_emailAFriendPreview:function(){var _149=_b7.byId("emailAFriend");if(!_149){return;}var _14a=_b7.byId("btn-preview");_b7.connect(_14a,"onclick",function(evt){_b7.byId("preview").value="true";});},_registerPromotionsSignInEvents:function(){var _14b=_b7.byId("apply-tax-exemption");if(!_14b){return;}var _14c=_b7.byId("yesexemption");if(_b7.byId("yesexemption").checked){_b7.removeClass("termsBlock","hide");}var _14d=_b7.byId("noexemption");_b7.connect(_14c,"onclick",function(evt){_b7.byId("termsBlock").className="";_b7.query(".message").forEach("item.className='hide';");});_b7.connect(_14d,"onclick",function(evt){_b7.byId("termsBlock").className="hide";_b7.query(".message").forEach("item.className='hide';");});_b7.connect(_b7.byId("accepttoc"),"onclick",function(evt){_b7.query(".message").forEach("item.className='hide';");});if(_b7.byId("yesexemption").checked&&_b7.byId("accepttoc").checked){_b7.query(".message").forEach("item.className='hide';");}if(_b7.byId("noexemption").checked){_b7.query(".message").forEach("item.className='hide';");_b7.query("#termsBlock").forEach("item.className='hide';");}},_registerShopSortBy:function(){if(!_b7.byId("facetedNavContainer")){_b7.query("#sortBy").connect("onchange",null,function(evt){var _14e={best:"Best Match",priceAsc:"Price Low to High",priceDesc:"Price High to Low",ratingAsc:"Rating Low to High",ratingDesc:"Rating High to Low","new":"New",bestSeller:"Best Seller"};if(typeof cmCreatePageElementTag==="function"){var _14f=window.location.pathname.substr(0,8).match("/search/")?"Search Interactions":"Shop Interactions";cmCreatePageElementTag("Sort_"+_14e[evt.currentTarget.value],_14f);}if(_b7.byId("regListForm")){_b7.byId("regListForm").submit();}else{if(_b7.byId("sortByForm")){_b7.byId("sortByForm").submit();}}});}},_registerPromoApplyEvents:function(){var _150=_b7.byId("applyPromoBlock");if(_150){var _151=_b7.byId("applyPromo");if(_151){_b7.connect(_151,"onclick",function(evt){_b7.byId("promoApply").value="yes";});}}else{return;}},bvRatingsDisplayed:function(_152,_153,_154,_155,_156){var _157=_b7.byId("BVReviewsContainer");var _158=_b7.byId("BVSecondaryCustomerRatings");var _159=_b7.byId("BVSVPLinkContainer");var _15a=_b7.byId("reviews-controls");var _15b=0;if(_152>0){if(_157){_b7.removeClass("BVReviewsContainer","hide");_157.style.display="block";}if(_158){_157.style.display="block";}if(_159){_159.style.display="block";}if(_15a){_15a.style.display="block";}var _15c;if(!cmCategoryId||cmCategoryId===""){if(_b7.byId("pipCategoryId")){_15c=_b7.byId("pipCategoryId").value;}else{_15c=" ";}if(_b7.byId("registrantid")&&(_b7.byId("registrantid").value!="")){_15c="R:"+_15c;}else{_15c="E:"+_15c;}}else{_15c=cmCategoryId;}var _15d="PRODUCT";var type;if(_156.length>7){type=_156.substring(0,7);if(type.toUpperCase()==="RECIPE."){_15d="RECIPE";}}if(typeof cmCreateConversionEventTag==="function"&&_b7.query(".read-reviews a").length&&typeof WSI.groupName!=="undefined"){_b7.query(".read-reviews a").connect("onclick",function(evt){var _15e=WSI.groupName;var _15f=_156.toUpperCase()+"-_-"+_15e.toUpperCase()+"-_-"+_15c.toUpperCase();if(_15d==="RECIPE"){_15f="-_--_--_--_-"+_15e.toUpperCase();}cmCreateConversionEventTag(_15d+" REVIEWS: READ A REVIEW","2",_15d+" REVIEWS","0",_15f);});}if(typeof cmCreateConversionEventTag==="function"&&_157&&typeof WSI.groupName!=="undefined"){_b7.query("a[name*='ReadAllReviews']",_157).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _160=WSI.groupName;var _161=_156.toUpperCase()+"-_-"+_160.toUpperCase()+"-_-"+_15c.toUpperCase();if(_15d==="RECIPE"){_161="-_--_--_--_-"+_160.toUpperCase();}cmCreateConversionEventTag(_15d+" REVIEWS: USER REVIEWS","2",_15d+" REVIEWS","0",_161);if(_b7.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_157&&typeof WSI.groupName!=="undefined"){_b7.query("a[name*='AddPositiveFeedback']",_157).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _162=WSI.groupName;var _163=_156.toUpperCase()+"-_-"+_162.toUpperCase()+"-_-"+_15c.toUpperCase();if(_15d==="RECIPE"){_163="-_--_--_--_-"+_162.toUpperCase();}cmCreateConversionEventTag(_15d+" REVIEWS: HELPFUL REVIEW","2",_15d+" REVIEWS","0",_163);});});}if(typeof cmCreateConversionEventTag==="function"&&_157&&typeof WSI.groupName!=="undefined"){_b7.query("a[name*='AddNegativeFeedback']",_157).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _164=WSI.groupName;var _165=_156.toUpperCase()+"-_-"+_164.toUpperCase()+"-_-"+_15c.toUpperCase();if(_15d==="RECIPE"){_165="-_--_--_--_-"+_164.toUpperCase();}cmCreateConversionEventTag(_15d+" REVIEWS: UNHELPFUL REVIEW","2",_15d+" REVIEWS","0",_165);});});}if(typeof cmCreateConversionEventTag==="function"&&_157&&typeof WSI.groupName!=="undefined"){_b7.query(".BVRRSocialBookmarkingSharingLinkFacebook",_157).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _166=WSI.groupName;var _167=_156.toUpperCase()+"-_-"+_166.toUpperCase()+"-_-"+_15c.toUpperCase()+"-_-FACEBOOK";if(_15d==="RECIPE"){_167="-_--_--_-FACEBOOK-_-"+_166.toUpperCase();}cmCreateConversionEventTag(_15d+" REVIEWS: SHARED REVIEW","2",_15d+" REVIEWS","0",_167);if(_b7.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_157&&typeof WSI.groupName!=="undefined"){_b7.query(".BVRRSocialBookmarkingSharingLinkDigg",_157).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _168=WSI.groupName;var _169=_156.toUpperCase()+"-_-"+_168.toUpperCase()+"-_-"+_15c.toUpperCase()+"-_-DIGG";if(_15d==="RECIPE"){_169="-_--_--_-DIGG-_-"+_168.toUpperCase();}cmCreateConversionEventTag(_15d+" REVIEWS: SHARED REVIEW","2",_15d+" REVIEWS","0",_169);if(_b7.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_157&&typeof WSI.groupName!=="undefined"){_b7.query(".BVRRSocialBookmarkingSharingLinkDelIcioUs",_157).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _16a=WSI.groupName;var _16b=_156.toUpperCase()+"-_-"+_16a.toUpperCase()+"-_-"+_15c.toUpperCase()+"-_-DELICIOUS";if(_15d==="RECIPE"){_16b="-_--_--_-DELICIOUS-_-"+_16a.toUpperCase();}cmCreateConversionEventTag(_15d+" REVIEWS: SHARED REVIEW","2",_15d+" REVIEWS","0",_16b);if(_b7.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_157&&typeof WSI.groupName!=="undefined"){_b7.query(".BVRRSocialBookmarkingSharingLinkTwitter",_157).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _16c=WSI.groupName;var _16d=_156.toUpperCase()+"-_-"+_16c.toUpperCase()+"-_-"+_15c.toUpperCase()+"-_-TWITTER";if(_15d==="RECIPE"){_16d="-_--_--_-TWITTER-_-"+_16c.toUpperCase();}cmCreateConversionEventTag(_15d+" REVIEWS: SHARED REVIEW","2",_15d+" REVIEWS","0",_16d);if(_b7.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_15a&&typeof WSI.groupName!=="undefined"){_b7.query("#all-reviews-container a",_15a).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _16e=WSI.groupName;var _16f=_156.toUpperCase()+"-_-"+_16e.toUpperCase()+"-_-"+_15c.toUpperCase();if(_15d==="RECIPE"){_16f="-_--_--_--_-"+_16e.toUpperCase();}cmCreateConversionEventTag(_15d+" REVIEWS: READ ALL REVIEWS","2",_15d+" REVIEWS","0",_16f);});});}if(typeof cmCreateConversionEventTag==="function"&&_b7.byId("BVCustomerRatings")&&typeof WSI.groupName!=="undefined"){_b7.query("a[name*='TrackingTag_Rating_Summary']",_b7.byId("BVCustomerRatings")).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){_b7.byId("bv-tabs").scrollIntoView();var _170=_b7.query(".tab.bv-rr")[0],_171;if(document.createEvent){_171=document.createEvent("HTMLEvents");_171.initEvent("click",true,true);return !_170.dispatchEvent(_171);}else{_171=document.createEventObject();return _170.fireEvent("onclick",_171);}});});}}else{if(_159){_15a.style.display="none";}}},bvCheckDisplayLoadState:function(){if(!BVisLoaded){var page=_b7.byId("BVFrame").src;page="http://reviews.williams-sonoma.com/logging?page="+escape(page);_b7.byId("BVReviewsContainer").innerHTML="<!-- Review retrieval timed out -->";}},bvCheckPagesLoadState:function(){if(!BVisLoaded){_b7.byId("BVSubmissionFrame").src="";_b7.byId("BVSubmissionContainer").innerHTML="Review Submission Currently Unavailable";}},_registerAsynchronousShopImages:function(){var _172=_b7.query("img[data-async-src]");this.asyncImages=[];this.currentImage=[0,null];if(_172.length){_172.forEach(function(e){this.asyncImages.push([_b7.coords(e,true).y,e]);},this);_bd=_bd||_b7.connect(window,"onscroll",this,this._loadAsynchronousShopImages);this._loadAsynchronousShopImages();}},_loadAsynchronousShopImages:function(){bottomThreshold=(document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||window.innerHeight)*2;while(this.asyncImages.length&&(this.currentImage[0]<bottomThreshold)){this.currentImage=this.asyncImages.shift();if(_b7.attr(this.currentImage[1],"data-async-src")){this.currentImage[1].setAttribute("src",_b7.attr(this.currentImage[1],"data-async-src"));this.currentImage[1].removeAttribute("data-async-src");}}},_handleOffsiteRequests:function(_173){_173=_173||[];for(var i=0,len=_173.length;i<len;++i){var _174=_173[i],type=_174[0],url=_174[1],_175=_174[2]||{};switch(type){case "css":this.loadStylesheet(url,_175);break;case "js":this.loadScript(url);break;}}},loadScript:function(url,_176){if(this.isScriptLoaded(url)){return;}var _177=new _b7._Url(document.location.href),_178=new _b7._Url(url),self=this,_179;if(_177.scheme===_178.scheme&&_177.host===_178.host&&_177.port===_178.port){_b7.xhrGet({url:url,load:function(_17a){self._xhrScript(_17a);self.setScriptLoaded(url);if(_176&&_b7.isFunction(_176)){_176();}}});}else{this.docHead=this.docHead||_b7.query("head")[0];_179=_b7.create("script",{type:"text/javascript"});_179[_b7.isIE?"onreadystatechange":"onload"]=function(){if(!_b7.isIE||this.readyState==="loaded"||this.readyState==="complete"){self.setScriptLoaded(url);if(_176&&_b7.isFunction(_176)){_176();}}};_179.src=url;_b7.place(_179,this.docHead);}},loadStylesheet:function(url,_17b,_17c){if(this.isStylesheetLoaded(url)){return;}var _17d=document.createElement("link"),self=this;_b7.attr(_17d,_b7.mixin(_17b||{},{rel:"stylesheet",type:"text/css",href:url,onload:function(){if(_17c){_17c();}}}));this.docHead=this.docHead||_b7.query("head")[0];this.docHead.appendChild(_17d);self.setStylesheetLoaded(url);},setStylesheetLoaded:function(urls){if(_b7.isArray(urls)){for(var i=0,len=urls.length;i<len;++i){_b9[urls[i]]=true;}}else{_b9[urls]=true;}},setScriptLoaded:function(urls){if(_b7.isArray(urls)){for(var i=0,len=urls.length;i<len;++i){_ba[urls[i]]=true;}}else{_ba[urls]=true;}},isStylesheetLoaded:function(url){return _b9[url];},isScriptLoaded:function(url){return _ba[url];},_xhrScript:function(_17e){if(_17e!==""){var _17f,_180;_17f=_b7.query("head")[0];_180=document.createElement("script");_180.type="text/javascript";_180.text=_17e;_17f.appendChild(_180);}},_setViewSet:function(){var _181=_b7.byId("type-ahead-viewset");if(_181&&_181.value&&_181.value!=="ecom"){this.viewset=_181.value;}},handleGuestRegistryPassword:function(){var _182=_b7.byId("guestPassword");if(_182){_b7.connect(_182,"onfocus",function(evt){_b7.query("#securityLevelPassword").forEach("item.checked='checked';");});}},loadFragment:function(_183,_184){if(_b7.isObject(_183)){_184=_183;_183="GET";}var href=WSI.utils.stripBaseUrlWhenHrefHasAnchor(_184.url);function load(data){data=data.replace(/<script[^>]+type=(['"])text\/javascript\1[^>]*>([\s\S]*?)<\/script>/gim,function(_185,_186,src){if(_b7.trim(src)){(window.execScript||function(src){window["eval"].call(window,src);})(src);}return "";});if(_184.load){_184.load(data);}_b7.publish("/fragment/loaded",[{href:href,data:data}]);};if(href.length&&href.charAt(0)==="#"){try{href=href.substr(1);var _187=_b7.byId(href);if(_187.nodeName==="SCRIPT"&&_b7.attr(_187,"type")==="text/html"){var _188=arguments.callee.templates||(arguments.callee.templates={});_188[href]=_188[href]||WSI.utils.template(_b7.trim(_187.innerHTML));_187=_188[href]();}else{_187=_187.innerHTML;}load(_187);}catch(error){if(_184.error){_184.error(error);}}}else{_b7.xhr(_183,_b7.mixin({},_184,{load:load,error:function(_189){if(_184.error){_184.error(_189);}}}));}},connect:function(obj,_18a,_18b,_18c,_18d){var _18e=_18a.replace(/^on/,"");if(WSI.earlyEventQueues&&WSI.earlyEventQueues[_18e]&&obj){var _18f=WSI.earlyEventQueues[_18e][obj];if(_18f&&_18f!=="drained"){var ctx=_18b||obj;var _190=typeof _18c==="string"?ctx[_18c]:_18c;while(_18f.length){var evt=_18f.shift();_190.call(ctx,_18d?evt:_b7.fixEvent(evt));}WSI.earlyEventQueues[_18e][obj]="drained";}}return _b7.connect.apply(_b7,arguments);},stopEarlyEventCapture:function(){for(var _191 in (WSI.earlyEventQueues||{})){if(document.detachEvent){document.detachEvent("on"+_191,WSI.capturingEventHandler);}else{document.removeEventListener(_191,WSI.capturingEventHandler,true);}}WSI.earlyEventQueues={};_b7.query(".captureEarlyEvents").removeClass("earlyEventsCaptured").removeClass("captureEarlyEvents");},templateSettings:{evaluate:/\[%([\s\S]+?)%\]/g,interpolate:/\[%=([\s\S]+?)%\]/g},template:function(str,data){var c=this.templateSettings;var tmpl="var __p=[],print=function(){__p.push.apply(__p,arguments);};"+"with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(_192,code){return "',"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+",'";}).replace(c.evaluate||null,function(_193,code){return "');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('";}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var func=new Function("obj",tmpl);return data?func(data):func;},_bloomReach:function(){var _194=_b7.byId("br-more-products-widget"),_195=_b7.byId("br-related-searches-widget");if(_194){_b7.connect(_194,"onclick",this,function(evt){var _196=evt.target,_197;if(_b7.hasClass(_196.parentNode,"br-more-widget-view")){evt.preventDefault();_b7.query(".br-more-widget",_194).forEach("item.style.display='none';");_197=_b7.attr(_196,"href").replace(/^[^#]*/,"");if(_197){_b7.query(_197,_194).forEach("dojo.removeClass(item, 'hide');");}if(_195){this._equalizeHeight(_194,_195);}}else{if(_b7.hasClass(_196.parentNode,"br-more-widget-popup-close")){evt.preventDefault();_b7.query(".br-more-widget-popup",_194).forEach("dojo.addClass(item, 'hide');");_b7.query(".br-more-widget",_194).forEach("item.style.display='block';");if(_195){this._equalizeHeight(_194,_195);}}}});}if(_194&&_195){this._equalizeHeight(_194,_195);}},_equalizeHeight:function(_198,_199){var _19a;if(_198&&_199){_198.style.height="auto";_199.style.height="auto";_19a=Math.max(_b7.marginBox(_198).h,_b7.marginBox(_199).h)-1;_b7.marginBox(_198,{h:_19a});_b7.marginBox(_199,{h:_19a});}},registerAvsOverrideElementTagHandler:function(_19b,_19c,_19d){if((_19b||_19b==="")&&_19c&&_19d){_b7.query("form[name="+_19b+"]").connect("submit",function(evt){_19c=_b7.isArray(_19c)?_19c:[_19c];_b7.some(_19c,function(_19e){var _19f=_b7.byId(_19e+".overideAddressVerification");if(_19f&&_19f.checked){cmCreatePageElementTag(_19d,"AVS",null,null,null,"");return true;}});});}},_updateBannerCookie:function(){var _1a0;if(_b7.exists("WSI.bannerCookie")){_1a0=WSI.bannerCookie;if(_1a0.cookie&&_1a0.value){_b7.cookie(_1a0.cookie,_1a0.value,{path:"/",domain:_1a0.domain});}}},swapClasses:function(_1a1,_1a2,_1a3){if(_1a1.nodeName){_1a1=_b7.NodeList(_1a1);}_1a1.filter("."+_1a2).removeClass(_1a2).addClass(_1a3);return _1a1;},closest:function(_1a4,_1a5){var node=_1a5;do{if(_b7._filterQueryResult([node],_1a4).length){return node;}}while((node=node.parentNode)&&node.nodeType===1);},callFunctions:function(_1a6){if(_b7.isArray(_1a6)){for(var i=0,len=_1a6.length;i<len;i++){if(typeof _1a6[i]==="function"){_1a6[i]();}}}},initXHRDialog:function initXHRDialog(_1a7,_1a8){var _1a9,_1aa,i,len,_1ab;_b7.query(".XHRForm").forEach(function(item){_b7.connect(item,"onsubmit",null,function(evt){var _1ac="get",_1ad=10000;_b7.stopEvent(evt);if(this.submitted){return;}else{this.submitted=true;}if(item.method.toUpperCase()==="POST"){_1ac="post";}_b7.xhr(_1ac,{timeout:_1ad,form:item,handleAs:"text",load:function(data,_1ae){var _1af=WSI.config,_1b0,_1b1=_1ae.xhr;_1b0=_1b1.getResponseHeader("Location");if(_1b0){window.location.href=_1b0;}else{if(data&&data.length){_1a7.containerNode.innerHTML=data;initXHRDialog(_1a7,_1a8);}else{_1a7.close();}}},error:function(_1b2,_1b3){this.submitted=false;_b7.place("<ul class='error'><li>A communication error occurred - Please try gain.</li></ul>",_1a7.containerNode,"first");}});});});if(_1a8){_1a8=_b7.isArray(_1a8)?_1a8:[_1a8];for(i=0,len=_1a8.length;i<len;i++){_1a9=_1a8[i];if(typeof _1a9==="function"){_1a9(this);}}}_b7.query(".closeButton").forEach(function(item){_b7.connect(item,"onclick",_1a7,function(evt){_b7.stopEvent(evt);this.close();});});},addDialogLoadHandler:function addDialogLoadHandler(_1b4,_1b5){WSI.dialogLoadHandlers=WSI.dialogLoadHandlers||{};WSI.dialogLoadHandlers[_1b4]=_1b5;},removeDialogLoadHandler:function removeDialogLoadHandler(_1b6){if(WSI.dialogLoadHandlers){delete WSI.dialogLoadHandlers[_1b6];}},smoothScrollTo:function(_1b7){if(_bc!=null){return;}_bc=_1b7;if(_1b7){var _1b8=function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}return -c/2*((--t)*(t-2)-1)+b;};var _1b9=function(elem){var _1ba=0;if(elem.offsetParent){do{_1ba+=elem.offsetTop;}while(elem=elem.offsetParent);}return _1ba;};var _1bb=_1b9(_1b7);var _1bc=window.pageYOffset||document.documentElement.scrollTop;var _1bd=_1bb-_1bc;var _1be=300;var _1bf=15;var wait=_1be/_1bf;var _1c0=0;var _1c1=setInterval(function(){var cur=_1b8(_1c0,_1bc,_1bd,_1bf);window.scrollTo(0,cur);if(_1c0===_1bf){clearInterval(_1c1);_bc=null;}_1c0++;},wait);}},getBrowserScrollbarWidth:function(){return WSI.config.scrollbarWidth||(WSI.config.scrollbarWidth=(function(){var _1c2=_b7.place("<div style=\"position:absolute;top:0;left:0;visibility:hidden;width:200px;height:150px;overflow:hidden;margin-left:-9999px;\"/>",_b7.body());var _1c3=_b7.place("<p style=\"width:100%;height:200px;\"/>",_1c2);var _1c4=_1c3.offsetWidth;_b7.style(_1c2,"overflow","scroll");var _1c5=_1c3.offsetWidth;if(_1c4===_1c5){_1c5=_1c2.clientWidth;}_b7.destroy(_1c2);return _1c4-_1c5;})());},forEach:function(obj,_1c6,_1c7){var _1c8=Array.prototype.forEach,_1c9={},_1c7=_1c7||window,_1ca=Object.prototype.hasOwnProperty;if(obj==null){return;}if(_1c8&&obj.forEach===_1c8){obj.forEach(_1c6,_1c7);}else{if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(i in obj&&_1c6.call(_1c7,obj[i],i,obj)===_1c9){return;}}}else{for(var key in obj){if(_1ca.call(obj,key)){if(_1c6.call(_1c7,obj[key],key,obj)===_1c9){return;}}}}}},textareaMaxLength:function(_1cb){var _1cb=_1cb||"textarea[maxlength]";WSI.Events.delegate("keypress",_1cb,function(evt){var $el=_b7.query(evt.target),_1cc=_b7.keys,_1cd=parseInt($el.attr("maxlength")[0],10),_1ce=$el.attr("value")[0].length;if(_1ce>=_1cd){switch(evt.keyCode){case _1cc.BACKSPACE:case _1cc.DELETE:case _1cc.UP_ARROW:case _1cc.DOWN_ARROW:case _1cc.RIGHT_ARROW:case _1cc.LEFT_ARROW:break;default:_b7.stopEvent(evt);break;}}});(function(){try{_b7.query(_1cb).forEach(function(el){var $el=_b7.query(el),_1cf=parseInt($el.attr("maxlength"),10),_1d0=$el.val();textLength=_1d0.length;if(textLength>_1cf){$el.val(_1d0.substr(0,_1cf));}});}catch(e){}setTimeout(arguments.callee,500);})();},stripBaseUrlWhenHrefHasAnchor:function(href){var _1d1=href.match(/#.*$/);return (_1d1!==null)?_1d1[0]:href;},onlyNumericInput:function(_1d2){_b7.query(_1d2).connect("keydown",_b7.hitch(this,this.keyHandler));_b7.query(_1d2).connect("keypress",_b7.hitch(this,this.keyHandler));},nonChar:false,keyHandler:function(e){var evt=(e)?e:window.event,_1d3,p={type:evt.type,charCode:evt.charCode,keyCode:evt.keyCode,which:evt.which,keyChar:String.fromCharCode(evt.charCode)};if(evt.type=="keydown"){_1d3=evt.keyCode;switch(_1d3){case _b7.keys.BACKSPACE:case _b7.keys.SPACE:case _b7.keys.DELETE:case _b7.keys.ENTER:case _b7.keys.TAB:case _b7.keys.LEFT_ARROW:case _b7.keys.RIGHT_ARROW:this.nonChar=true;break;default:this.nonChar=false;}}else{if(this.nonChar){return;}_1d3=(evt.charCode)?evt.charCode:evt.keyCode;if(_1d3<48||_1d3>57){_b7.stopEvent(e);}}},_nuclearFooter:function(){_b7.query(".nso-title span").forEach(function(elem){_b7.connect(elem,"onclick",function(evt){var _1d4="nso-"+elem.id;if(_b7.style(_1d4,"visibility")=="visible"){_b7.style(_1d4,"visibility","hidden");_b7.byId(elem.id).innerHTML="[+]";}else{_b7.query(".nso-brand").forEach(function(_1d5){_b7.style(_1d5,"visibility","hidden");});_b7.query(".nso-title span").forEach(function(_1d6){_b7.byId(_1d6.id).innerHTML="[+]";});_b7.style(_1d4,"visibility","visible");_b7.byId(elem.id).innerHTML="[&ndash;]";}});});},_registerOpenInParentWindowLink:function(){_b7.query(".openInParentWindow").forEach(function(elem){_b7.connect(elem,"click",function(evt){_b7.stopEvent(evt);(window.opener||window).location.href=_b7.attr(elem,"href");if(window.opener){window.close();}});});},stripBaseUrlWhenHrefHasAnchor:function(href){var _1d7=href.match(/#.*$/);return (_1d7!==null)?_1d7[0]:href;},toDom:function(src){if(_b7.isIE<=8){_bb.innerHTML=src;if(_bb.childNodes.length===1){return _bb.firstChild;}else{var frag=document.createDocumentFragment();while(_bb.childNodes.length){frag.appendChild(_bb.childNodes.item(0));}return frag;}}else{return _b7._toDom(src);}},_autoEqualizeHeights:function(){_b7.query(".equalizeHeights").forEach(this.equalizeHeights);},equalizeHeights:function(_1d8){var _1d9=0;_b7.query(">*",_1d8).forEach(function(elem){_1d9=Math.max(_1d9,_b7.contentBox(elem).h);}).style({minHeight:_1d9+"px"});},_registerHoverFadeHandler:function(){WSI.Events.delegate("mousemove",".hoverFade:not(.hoverFadeActive)",_1da);if(_bf){WSI.Events.delegate("touchstart",".hoverFade:not(.hoverFadeActive)",_1da);}function _1da(evt){var elem=this,_1db=_b7.position(elem),_1dc=_b7.query(".hoverFadeTarget",elem),_1dd=true;if(_bf){var _1de;var _1df;_b7.connect(_b7.body(),"touchstart",function(evt){_1de=evt.changedTouches[0].clientX;_1df=evt.changedTouches[0].clientY;});}var _1e0=_b7.connect(_b7.body(),_bf?"touchend":"mousemove",function(evt){if(_bf){var _1e1=Math.abs(Math.abs(evt.changedTouches[0].clientX)-Math.abs(_1de))>20||Math.abs(Math.abs(evt.changedTouches[0].clientY)-Math.abs(_1df))>20;}var _1e2=!_bf?true:!_1e1;if(_1e2){var x=(_bf?evt.changedTouches[0].clientX:evt.clientX)-_1db.x,y=(_bf?evt.changedTouches[0].clientY:evt.clientY)-_1db.y;if((_1dd&&(x<0||x>_1db.w||y<0||y>_1db.h))||WSI.utils.closest(".hoverFadeActive",evt.target)!==elem){_1e3.stop();_b7.disconnect(_1e0);var _1e4=_b7.fx.combine(_1dc.map(function(_1e5){return _b7.animateProperty({node:_1e5,properties:{opacity:0},duration:150});}));_b7.connect(_1e4,_1dd?"onBegin":"onEnd",function(){_b7.removeClass(elem,"hoverFadeActive");});_1e4.play();_1dd=false;}}}),_1e3=_b7.fx.combine(_1dc.map(function(_1e6){return _b7.animateProperty({node:_1e6,properties:{opacity:1},delay:_be?0:150,duration:150});}));if(_be){var temp=_b7.place("<span/>",_b7.body());setTimeout(function(){_b7.body().removeChild(temp);});}_b7.connect(_1e3,"onEnd",function(){_1dd=false;});_1e3.play();_b7.addClass(elem,"hoverFadeActive");_b7.stopEvent(evt);};},_topNavRightAlign:function(_1e7){var _1e8=_b7.query("#topnav-container .nav-menu")[0],_1e9=function(){var _1ea=_b7.contentBox(_1e8);_b7.query(".nav-columns",_1e8).forEach(function(menu){_b7.style(menu,"left","auto");var pos=_b7.marginBox(menu),_1eb=menu,_1ec=0,_1ed=0;_b7.query(".col, .spotlight",menu).map(function(col){_1ec+=_b7.marginBox(col).w;});do{_1ed+=_b7.style(_1eb,"padding-left")+_b7.style(_1eb,"border-left-width");_1eb=_1eb.parentNode;}while(_1eb!==_1e8.parentNode);_1ec+=_be?1:0;if(pos.l+_1ec+_1ed>_1ea.w){_b7.style(menu,{width:_1ec+"px",left:Math.max(0,_1ea.w-(_1ec+_1ed))+"px"});}});};if(_1e7){_1e9();}else{function _1ee(evt){_1e9();WSI.Events.undelegate("mouseover",_1ee);if(_bf){WSI.Events.undelegate("touchstart",_1ee);}};WSI.Events.delegate("mouseover","#topnav-container .nav-menu li",_1ee);if(_bf){WSI.Events.delegate("touchstart","#topnav-container .nav-menu li",_1ee);}}},asyncLoadTopNav:function(url){var self=this;this.loadFragment({url:url,load:function(data){var _1ef=self.toDom(data),_1f0=_b7.query("#topnav-container .nav-columns");_b7.query(".nav-columns",_1ef).forEach(function(menu,i){_b7.style(menu,"opacity",!!_1f0.at(i).style("opacity")?1:0);_1f0.at(i).replaceWith(menu);});_b7.query("#topnav-container .equalizeHeights").forEach(self.equalizeHeights);self._topNavRightAlign(true);},error:function(_1f1){_b7.query("#topnav-container .nav-placeholder").remove();}});}});}(dojo));dojo.provide("wsgc.nls.wsgc_en-us");dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.en_us");dijit.nls.loading.en_us={"loadingState":"Loading...","errorState":"Sorry, an error occurred"};}if(!dojo._hasResource["wsgc.js.Dataset"]){dojo._hasResource["wsgc.js.Dataset"]=true;(function(dojo,_1f2){var _1f3="data-";function _1f4(_1f5){return /^\s*{.*}\s*$/.test(_1f5)?dojo.fromJson(_1f5):(_1f5||{});};function _1f6(attr){return _1f3+attr.toLowerCase();};WSI.dataset=dojo.mixin(dojo.provide("wsgc.js.Dataset"),{get:function get(elem,attr,_1f7){if(_1f7){var name=_1f6(attr),_1f8={};while(elem){if(dojo.hasAttr(elem,name)){_1f8=dojo.mixin(get(elem,attr),_1f8);}elem=elem.parentNode;}return _1f8;}else{return _1f4(elem.getAttribute(_1f6(attr))||"{}");}},set:function(elem,attr,_1f9){elem.setAttribute(_1f6(attr),dojo.isObject(_1f9)?dojo.toJson(_1f9):_1f9);},"delete":function(elem,attr){elem.removeAttribute(_1f6(attr));},keys:function(elem){var keys=[],_1fa=elem.attributes;for(var i=0,len=_1fa.length;i<len;++i){var name=_1fa[i].name;if(!name.indexOf(_1f3)){keys.push(name.substr(_1f3.length));}}return keys;},mixin:function(elem,attr,obj){this.set(elem,attr,dojo.mixin(this.get(elem,attr),obj));}});}(dojo));}if(!dojo._hasResource["wsgc.js.IntlUtils"]){dojo._hasResource["wsgc.js.IntlUtils"]=true;dojo.provide("wsgc.js.IntlUtils");(function(dojo,_1fb){dojo.declare("wsgc.js.IntlUtils",null,{constructor:function(){this._registerCheckoutEvent();this._registerDeleteCountryEventHandler(dojo.query(".deleteCountry"));},_registerCheckoutEvent:function(){WSI.Events.delegate("click",".checkoutButtonIntl",function(evt){dojo.stopEvent(evt);dojo.byId("checkout").value="true";dojo.byId("cartForm").submit();});},_registerDeleteCountryEventHandler:function(_1fc){_1fc.connect("click",function(evt){dojo.stopEvent(evt);dojo.xhrGet({url:"/international/setcountry.html",content:{country:"US",currency:"USD"},preventCache:true,load:function(){window.location.reload();}});if(typeof (cmCreateConversionEventTag)!=="undefined"){cmCreateConversionEventTag("Change Country","1","International");}});},interceptAddToBasket:function(evt){var _1fd=WSI.utils.closest(".section",evt.currentTarget);if(dojo.query(".skuErrorHook",_1fd).length!==dojo.query(".skuErrorHook:empty",_1fd).length){dojo.stopEvent(evt);dojo.byId("pageErrorHook").focus();window.scrollTo(0,0);}},flagBasedCurrencySelector:function(_1fe){var _1ff=WSI.config.country||"US",_200=dojo.query(".currencyCode",_1fe.elem)[0],_201={};for(var i=0,len=_200.options.length;i<len;++i){_201[_200.options[i].value]=i;}dojo.addClass(dojo.query(".flagMap a."+_1ff,_1fe.elem)[0].parentNode,"selected-country");_200.selectedIndex=_201[WSI.config.currency||"USD"];dojo.query(".flagMap a",_1fe.elem).connect("click",function(evt){dojo.query(".selected-country").removeClass("selected-country");_1ff=this.getAttribute("data-countryCode");var _202=this.getAttribute("data-defaultCurrency");dojo.addClass(this.parentNode,"selected-country");_200.selectedIndex=_201[_202];dojo.stopEvent(evt);});dojo.connect(dojo.byId("intlSetCountryDialogSubmit"),"click",function(evt){dojo.stopEvent(evt);if(_1ff!=""&&_200.value){dojo.xhrGet({url:"/international/ineligible-items.html",content:{country:_1ff,currency:_200.value},preventCache:true,load:function(){window.location.reload();}});if(typeof (cmCreateConversionEventTag)!=="undefined"){cmCreateConversionEventTag("Change Country","1","International");}}else{dojo.query("ul.error",_1fe.elem).removeClass("hide");dojo.query("ul.error li.countryMessage",_1fe.elem).toggleClass("hide",countrySelect.selectedIndex!=0);dojo.query("ul.error li.currencyMessage",_1fe.elem).toggleClass("hide",!!_200.value);}});this._registerDeleteCountryEventHandler(dojo.query("#deleteCountry",_1fe.elem));WSI.utils.swapClasses(dojo.query(".deferredLayover",_1fe.elem),"deferredLayover","layover");dojo.query(".layover",_1fe.elem).connect("click",function(evt){WSI.layoverC.openLayover(evt);});}});}(dojo));}if(!dojo._hasResource["dojox.xml.parser"]){dojo._hasResource["dojox.xml.parser"]=true;dojo.provide("dojox.xml.parser");dojox.xml.parser.parse=function(str,_203){var _204=dojo.doc;var doc;_203=_203||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _205=new DOMParser();doc=_205.parseFromString(str,_203);var de=doc.documentElement;var _206="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_206){var _207=de.getElementsByTagNameNS(_206,"sourcetext")[0];if(_207){_207=_207.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_207);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_204.implementation&&_204.implementation.createDocument){if(str&&dojo.trim(str)&&_204.createElement){var tmp=_204.createElement("xml");tmp.innerHTML=str;var _208=_204.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_209){_208.importNode(_209,true);});return _208;}else{return _204.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _20a=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_20a.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _20b="";if(node){dojo.forEach(node.childNodes,function(_20c){switch(_20c.nodeType){case 1:case 5:_20b+=dojox.xml.parser.textContent(_20c);break;case 3:case 2:case 4:_20b+=_20c.nodeValue;}});}return _20b;}};dojox.xml.parser.replaceChildren=function(node,_20d){var _20e=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_20f){_20e.push(_20f);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_20e,dojo.destroy);if(!dojo.isArray(_20d)){node.appendChild(_20d);}else{dojo.forEach(_20d,function(_210){node.appendChild(_210);});}};dojox.xml.parser.removeChildren=function(node){var _211=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _211;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};}if(!dojo._hasResource["dojox.embed.Flash"]){dojo._hasResource["dojox.embed.Flash"]=true;dojo.provide("dojox.embed.Flash");(function(){var _212,_213;var _214=7;var _215="dojox-embed-flash-",_216=0;var _217={expressInstall:false,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"always",allowNetworking:"all",style:null,redirect:null};function prep(_218){_218=dojo.delegate(_217,_218);if(!("path" in _218)){return null;}if(!("id" in _218)){_218.id=(_215+_216++);}return _218;};if(dojo.isIE){_212=function(_219){_219=prep(_219);if(!_219){return null;}var p;var path=_219.path;if(_219.vars){var a=[];for(p in _219.vars){a.push(p+"="+_219.vars[p]);}_219.params.FlashVars=a.join("&");delete _219.vars;}var s="<object id=\""+_219.id+"\" "+"classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" "+"width=\""+_219.width+"\" "+"height=\""+_219.height+"\""+((_219.style)?" style=\""+_219.style+"\"":"")+">"+"<param name=\"movie\" value=\""+path+"\" />";if(_219.params){for(p in _219.params){s+="<param name=\""+p+"\" value=\""+_219.params[p]+"\" />";}}s+="</object>";return {id:_219.id,markup:s};};_213=(function(){var _21a=10,_21b=null;while(!_21b&&_21a>6){try{_21b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_21a--);}catch(e){}}if(_21b){var v=_21b.GetVariable("$version").split(" ")[1].split(",");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}else{_212=function(_21c){_21c=prep(_21c);if(!_21c){return null;}var p;var path=_21c.path;if(_21c.vars){var a=[];for(p in _21c.vars){a.push(p+"="+_21c.vars[p]);}_21c.params.flashVars=a.join("&");delete _21c.vars;}var s="<embed type=\"application/x-shockwave-flash\" "+"src=\""+path+"\" "+"id=\""+_21c.id+"\" "+"width=\""+_21c.width+"\" "+"height=\""+_21c.height+"\""+((_21c.style)?" style=\""+_21c.style+"\" ":"")+"swLiveConnect=\""+_21c.swLiveConnect+"\" "+"allowScriptAccess=\""+_21c.params.allowScriptAccess+"\" "+"allowNetworking=\""+_21c.params.allowNetworking+"\" "+"pluginspage=\""+window.location.protocol+"//www.adobe.com/go/getflashplayer\" ";if(_21c.params){for(p in _21c.params){s+=" "+p+"=\""+_21c.params[p]+"\"";}}s+=" />";return {id:_21c.id,markup:s};};_213=(function(){var _21d=navigator.plugins["Shockwave Flash"];if(_21d&&_21d.description){var v=_21d.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}dojox.embed.Flash=function(_21e,node){if(location.href.toLowerCase().indexOf("file://")>-1){throw new Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");}this.available=dojox.embed.Flash.available;this.minimumVersion=_21e.minimumVersion||_214;this.id=null;this.movie=null;this.domNode=null;if(node){node=dojo.byId(node);}setTimeout(dojo.hitch(this,function(){if(_21e.expressInstall||this.available&&this.available>=this.minimumVersion){if(_21e&&node){this.init(_21e,node);}else{this.onError("embed.Flash was not provided with the proper arguments.");}}else{if(!this.available){this.onError("Flash is not installed.");}else{this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);}dojo.query("img",node).forEach("dojo.style(item, 'display', 'inline')");}}),100);};dojo.extend(dojox.embed.Flash,{onReady:function(_21f){},onLoad:function(_220){},onError:function(msg){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie);},init:function(_221,node){this.destroy();node=dojo.byId(node||this.domNode);if(!node){throw new Error("dojox.embed.Flash: no domNode reference has been passed.");}var p=0,_222=false;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;if(dojox.embed.Flash.initialized){this.id=dojox.embed.Flash.place(_221,node);this.domNode=node;setTimeout(dojo.hitch(this,function(){this.movie=this.byId(this.id,_221.doc);this.onReady(this.movie);this._poller=setInterval(dojo.hitch(this,function(){try{p=this.movie.PercentLoaded();}catch(e){}if(p==100){this._onload();}else{if(p==0&&this._pollCount++>this._pollMax){clearInterval(this._poller);}}}),this.pollTime);}),1);}else{dojo.query("img",node).forEach("dojo.style(item, 'display', 'inline')");}},_destroy:function(){try{this.domNode.removeChild(this.movie);}catch(e){}this.id=this.movie=this.domNode=null;},destroy:function(){if(!this.movie){return;}var test=dojo.delegate({id:true,movie:true,domNode:true,onReady:true,onLoad:true});for(var p in this){if(!test[p]){delete this[p];}}if(this._poller){dojo.connect(this,"onLoad",this,"_destroy");}else{this._destroy();}},byId:function(_223,doc){doc=doc||document;if(doc.embeds[_223]){return doc.embeds[_223];}if(doc[_223]){return doc[_223];}if(window[_223]){return window[_223];}if(document[_223]){return document[_223];}return null;}});dojo.mixin(dojox.embed.Flash,{minSupported:8,available:_213.major,supported:(_213.major>=_213.required),minimumRequired:_213.required,version:_213,initialized:false,onInitialize:function(){dojox.embed.Flash.initialized=true;},__ie_markup__:function(_224){return _212(_224);},proxy:function(obj,_225){dojo.forEach((dojo.isArray(_225)?_225:[_225]),function(item){this[item]=dojo.hitch(this,function(){return (function(){return eval(this.movie.CallFunction("<invoke name=\""+item+"\" returntype=\"javascript\">"+"<arguments>"+dojo.map(arguments,function(item){return __flash__toXML(item);}).join("")+"</arguments>"+"</invoke>"));}).apply(this,arguments||[]);});},obj);}});dojox.embed.Flash.place=function(_226,node){var o=_212(_226);node=dojo.byId(node);if(!node){node=dojo.doc.createElement("div");node.id=o.id+"-container";dojo.body().appendChild(node);}if(o){node.innerHTML=o.markup;return o.id;}return null;};dojox.embed.Flash.onInitialize();})();}if(!dojo._hasResource["wsgc.js.DeferredLayover"]){dojo._hasResource["wsgc.js.DeferredLayover"]=true;dojo.provide("wsgc.js.DeferredLayover");dojo.declare("wsgc.js.DeferredLayover",null,{constructor:function(_227){function _228(o){if(document.attachEvent){var t={};for(var i in o){t[i]=o[i];}o=t;}return o;};var _229=dojo.query(".deferredLayover");var _22a=[];_229.forEach(function(_22b){var _22c=dojo.connect(_22b,"click",function(evt){dojo.stopEvent(evt);dojo.forEach(_22a,function(_22d){dojo.disconnect(_22d);});_22a=[];if(WSI.layoverC){WSI.utils.swapClasses(_229,"deferredLayover","layover").connect("click",WSI.layoverC,WSI.layoverC.openLayover);WSI.layoverC.openLayover(evt);}else{evt=_228(evt);evt.currentTarget_=evt.currentTarget;WSI.utils.loadScript(_227,function(){setTimeout(function(){WSI.utils.swapClasses(_229,"deferredLayover","layover");WSI.layoverC=new wsgc.js.LayoverBase();WSI.layoverC.openLayover(evt);});});}});_22a.push(_22c);});}});}if(!dojo._hasResource["wsgc.js.Selector"]){dojo._hasResource["wsgc.js.Selector"]=true;dojo.provide("wsgc.js.Selector");(function(dojo,_22e){var _22f=_230(),_231="_sel_",_232=0,_233="parentNode",_234="previousSibling",_235={},_236={">":_237(_233,true)," ":_237(_233,false),"+":_237(_234,true),"~":_237(_234,false)};dojo.mixin(wsgc.js.Selector,{is:function is(_238,_239,_23a){var _23b=this.parse(_239),_23c,i,l;for(i=0,l=_23b.length;i<l;++i){_23c=_23a?[[" ",_23a]].concat(_23b[i]):_23b[i];if(this.test(_23d([_238]),_23c,_23c.length-1)){return true;}}return false;},test:function test(_23e,_23f,_240){var _241=_23f[_240][0],_242=_23f[_240][1],_243=_236[_241],_244,_245;while((_245=_23e())){if(_242===_245||_242==="*"||(typeof _242==="string"&&dojo._filterQueryResult([_245],_242).length)){_244=_243(_245);if(_240===0||this.test(_244,_23f,_240-1)){return _245;}if(_23e.axis===_244.axis&&!_244.singleton){break;}}}},parse:function parse(_246){var _247=[],_248=_235[_246]||[],_249,_24a;if(_248.length){return _248;}while((_249=_22f.exec(_246))){_24a=(_249[1]&&dojo.trim(_249[1]))||" ";if(_24a.charAt(0)===","){_248.push(_247);_247=[[dojo.trim(_24a.substr(1))||" ",_249[2]]];}else{_247.push([_24a,_249[2]]);}}if(_247.length){_248.push(_247);}return _235[_246]=_248;},closest:function closest(_24b,_24c){var _24d=this.parse(_24b),_24e,_24f,_250,_251,_252;for(var i=0,len=_24d.length;i<len;i++){_252=_24d[i];_24e=true;_24f=_236[" "](_24c);_250=function(){if(_24e){_24e=false;return _24c;}return _24f();};_251=this.test(_250,_252,_252.length-1);if(_251){return _251;}}},idFor:function idFor(elem){if(!elem.id){do{var id=_231+_232++;}while(dojo.byId(id));elem.id=id;}return elem.id;}});function _23d(_253){var i=0;return function arrayIterator(){return _253[i++];};};function _237(axis,_254){return function nextIteratorGenerator(_255){var _256=true,_257=function _257(){_257.axis=axis;_257.singleton=_254;if(!_254||_256){_256=false;while((_255=_255[axis])&&_255.nodeType!==1){}return _255;}};return _257;};};function _230(){return /((?:\s+(?![>+~,])|\s*(?:,\s*)?[>+~]\s*|\s*,\s*|^\s*))((?:\*|[a-z_\\][a-z0-9_\\|-]*)?(?:(?:[.#][a-z_\\][a-z0-9_\\|-]*|(?::not\(\s*(?:\*|[.#]?[a-z_\\][a-z0-9_\\|-]*|\[\s*[a-z_\\][a-z0-9_\\|-]*\s*(?:[~|^$*]?=\s*(?:'[^']*'|"[^"]*")\s*)?\]|::?[a-z_\\][a-z0-9_\\|-]*(?:\((?:'[^']*'|"[^"]*"|[^)])*\))?)\s*\))|::?[a-z_\\][a-z0-9_\\|-]*(?:\((?:'[^']*'|"[^"]*"|[^)])*\))?|\[\s*[a-z_\\][a-z0-9_\\|-]*\s*(?:[~|^$*]?=\s*(?:'[^']*'|"[^"]*")\s*)?\])*))/ig;};}(dojo));}if(!dojo._hasResource["wsgc.js.Events"]){dojo._hasResource["wsgc.js.Events"]=true;dojo.provide("wsgc.js.Events");(function(dojo,_258){WSI=window.WSI||{};WSI.Events=dojo.mixin(wsgc.js.Events,wsgc.js.Selector,{delegate:function(_259,_25a,_25b,_25c){if(!_25c){_25c=_25b;_25b=dojo.body();}_259=_259.replace(/^on/,"");var self=this,_25d=this.idFor(_25b),_25e=this.delegate.delegates||(this.delegate.delegates={}),_25f=_25e[_25d]||(_25e[_25d]={}),_260=_25f.events||(_25f.events={}),_261=_260[_259];this.parse(_25a);if(!_261){_261=_260[_259]=function(evt){var _262=_261.selectors,elem=evt.target,_263={};do{if(elem.disabled){continue;}for(var _264 in _262){if(_262.hasOwnProperty(_264)){if(_272(_262[_264],_263)&&self.is(elem,_264,_25b===dojo.body()?null:_25b)){dojo.forEach(_262[_264],function(_265){if(!_263[_265]){_263[_265]=true;_265.call(elem,evt);}});}}}}while(elem!=evt.currentTarget&&(elem=elem.parentNode)&&elem!=document.documentElement);};if(_259==="focus"||_259==="blur"){var _266=function(evt){return _261(dojo.fixEvent(evt||window.event,this));};if(document.attachEvent){document.attachEvent("onfocus"+(_259==="blur"?"out":"in"),_25b,_266);}else{_25b.addEventListener(_259,_266,true);}}else{dojo.connect(_25b,_259,_261);}_261.selectors={};}_261.selectors[_25a]=_261.selectors[_25a]||[];_261.selectors[_25a].push(_25c);},undelegate:function(_267,_268,_269,_26a){if(!_26a){if(!_269){if(typeof _268==="function"){_26a=_268;_269=dojo.body();_268=null;}else{if(typeof _268==="object"){_269=_268;_268=null;}else{_269=dojo.body();}}}else{if(typeof _269==="function"){_26a=_269;_269=dojo.body();}}}var _26b=this.delegate.delegates||{},_26c=_26b[this.idFor(_269)]||{},_26d=_26c.events||{},_26e=_26d[_267]||{},_26f=_26e.selectors||{},_270=_26f[_268||""]||[],_271=_26a?dojo.indexOf(_270,_26a):-1;if(!_268){if(!_26a){_26e.selectors={};}else{for(_268 in _26f){if(_26f.hasOwnProperty(_268)){_270=_26f[_268];_271=dojo.indexOf(_270,_26a);if(_271>-1){_270.splice(_271,1);}}}}}else{if(!_270||(_26a&&_271===-1)){return;}else{if(_26a){_270.splice(_271,1);}else{_26f[_268]=[];}}}}});function _272(_273,_274){return dojo.some(_273,function(_275){return !_274[_275];});};if(dojo){dojo.delegateEvent=WSI.Events.delegate;dojo.undelegateEvent=WSI.Events.undelegate;}}(dojo));}if(!dojo._hasResource["wsgc.js.MetricsWrapper"]){dojo._hasResource["wsgc.js.MetricsWrapper"]=true;dojo.provide("wsgc.js.MetricsWrapper");(function(dojo,_276){WSI.Events.delegate("click","[data-metrics],[metrics]",function(evt){try{var _277=dojo.attr(this,"data-metrics");if(!_277){_277=dojo.attr(this,"metrics");}if(evt.target.type==="checkbox"){_277=_277.replace("Checkbox_$_State",evt.target.checked?"checked":"unchecked");}eval(_277);}catch(err){}});}(dojo));}if(!dojo._hasResource["wsgc.js.Tabs"]){dojo._hasResource["wsgc.js.Tabs"]=true;dojo.provide("wsgc.js.Tabs");(function(dojo,_278){var _279=WSI.isIPad;WSI.Events.delegate("click",".tabsWidget>:first-child>.tab",function(evt){dojo.stopEvent(evt);if(!dojo.hasClass(this,"active")){var tab=new Tab(this);tab.tabsAndContents.query(">.active").removeClass("active");tab.tabsAndContents.query(">:nth-child("+tab.position+")").addClass("active");dojo.publish("/tab/click",[tab]);}});if(_279){dojo.subscribe("/tab/click",function(_27a){_27b(_27a);});dojo.addOnLoad(function(){dojo.query(".tabsWidget>:first-child()>.tab.active").forEach(function(_27c){_27b(new Tab(_27c));});});function _27b(tab){dojo.query(".tabScrollbar",tab.widget).remove();var _27d=dojo.contentBox(tab.content),_27e=dojo.query(".scroll-contents",tab.content)[0],_27f=dojo.marginBox(_27e);if(_27f.h>_27d.h){var _280=dojo.place("<div class=\"tabScrollbar\"><div class=\"tabScroll\"/></div>",tab.widget,"last"),_281=_280.firstChild,_282=_27d.h*_27d.h/_27f.h,_283=dojo.style(_281,"marginTop")+dojo.style(_281,"marginBottom"),_284=_27d.h-_282-_283,_285=_27f.h-_27d.h,_286,_287;function _288(evt){_286=evt.targetTouches[0].clientY;_287=tab.content.scrollTop;};function _289(evt){if(evt.touches.length===1){dojo.stopEvent(evt);var _28a=evt.targetTouches[evt.touches.length-1].clientY-_286;tab.content.scrollTop=_287-_28a;}};function _28b(evt){_281.style.top=(_284*(tab.content.scrollTop/_285))+"px";};if(tab.widget.disconnectPreviousActiveTabEvents){tab.widget.disconnectPreviousActiveTabEvents();}tab.widget.disconnectPreviousActiveTabEvents=function(){_27e.removeEventListener("touchstart",_288);_27e.removeEventListener("touchmove",_289);tab.content.removeEventListener("scroll",_28b);};_281.style.height=_282+"px";_27e.addEventListener("touchstart",_288);_27e.addEventListener("touchmove",_289);tab.content.addEventListener("scroll",_28b);_281.addEventListener("touchstart",function(evt){dojo.stopEvent(evt);_286=evt.targetTouches[0].clientY;_287=tab.content.scrollTop;});_281.addEventListener("touchmove",function(evt){dojo.stopEvent(evt);var _28c=evt.targetTouches[evt.touches.length-1].clientY-_286;tab.content.scrollTop=_287+(_285*(_28c/_284));});_280.addEventListener("touchstart",function(evt){dojo.stopEvent(evt);if(evt.targetTouches[0].clientY<dojo.position(_281,true).y){tab.content.scrollTop-=_27d.h;}else{tab.content.scrollTop+=_27d.h;}});}};}function Tab(tab){this.tab=tab;this.parent=tab.parentNode;this.widget=this.parent.parentNode;this.tabsAndContents=dojo.query(">*",this.widget);this.position=dojo.query(">.tab",this.parent).indexOf(tab)+1;this.content=dojo.query(">:nth-child(2)>:nth-child("+this.position+")",this.widget)[0];};}(dojo));}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _28d=this;dojo.mixin(_28d,args);_28d.node=args.node;_28d._showArgs=dojo.mixin({},args);_28d._showArgs.node=_28d.node;_28d._showArgs.duration=_28d.showDuration;_28d.showAnim=_28d.showFunc(_28d._showArgs);_28d._hideArgs=dojo.mixin({},args);_28d._hideArgs.node=_28d.node;_28d._hideArgs.duration=_28d.hideDuration;_28d.hideAnim=_28d.hideFunc(_28d._hideArgs);dojo.connect(_28d.showAnim,"beforeBegin",dojo.hitch(_28d.hideAnim,"stop",true));dojo.connect(_28d.hideAnim,"beforeBegin",dojo.hitch(_28d.showAnim,"stop",true));},show:function(_28e){return this.showAnim.play(_28e||0);},hide:function(_28f){return this.hideAnim.play(_28f||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_290={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _291=function(_292){this._index=-1;this._animations=_292||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_291,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_293,_294){if(!this._current){this._current=this._animations[this._index=0];}if(!_294&&this._current.status()=="playing"){return this;}var _295=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_296=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_297=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_295);d.disconnect(_296);d.disconnect(_297);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_298,_299){this.pause();var _29a=this.duration*_298;this._current=null;d.some(this._animations,function(a){if(a.duration<=_29a){this._current=a;return true;}_29a-=a.duration;return false;});if(this._current){this._current.gotoPercent(_29a/this._current.duration,_299);}return this;},stop:function(_29b){if(this._current){if(_29b){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_291,_290);dojo.fx.chain=function(_29c){return new _291(_29c);};var _29d=function(_29e){this._animations=_29e||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_29e,function(a){var _29f=a.duration;if(a.delay){_29f+=a.delay;}if(this.duration<_29f){this.duration=_29f;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var self=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(d.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};d.extend(_29d,{_doAction:function(_2a0,args){d.forEach(this._animations,function(a){a[_2a0].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_2a1,args){var t=this._pseudoAnimation;t[_2a1].apply(t,args);},play:function(_2a2,_2a3){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_2a4,_2a5){var ms=this.duration*_2a4;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_2a5);});this._call("gotoPercent",arguments);return this;},stop:function(_2a6){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_29d,_290);dojo.fx.combine=function(_2a7){return new _29d(_2a7);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _2a8=d.style(node,"height");return Math.max(_2a8,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}return (dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!dojo._hasResource["wsgc.js.Scroller"]){dojo._hasResource["wsgc.js.Scroller"]=true;dojo.provide("wsgc.js.Scroller");(function(dojo,_2a9){var _2aa={},_2ab="disabled",_2ac,_2ad={duration:450,rate:20,easing:dojo.fx.easing.quadInOut,pageSize:0};WSI.Events.delegate("click",".scroller-container>.control",function(evt){dojo.stopEvent(evt);var _2ae=wsgc.js.Scroller.get(this.parentNode);var _2af=dojo.hasClass(this,"btn-next");if(_2af){_2ae.next();}else{_2ae.prev();}});dojo.declare("wsgc.js.Scroller",null,{constructor:function(_2b0){_2aa[_2b1(_2b0)]=this;this.widget=_2b0;this.controls=dojo.query(">.control",this.widget);this.scroll=dojo.query(">.scroller",this.widget)[0];this.scrollerContainer=this.scroll.parentNode;this.isVertical=dojo.hasClass(this.scrollerContainer,"vertical");this.itemContainer=dojo.query(">.panel",this.scroll)[0];this.items=dojo.query(">*",this.itemContainer);this.scrollSize=dojo.contentBox(this.scroll);var _2b2=this.items.length?dojo.position(this.items[0]):{y:0,x:0},_2b3=this.items.length>1?dojo.position(this.items[1]):_2b2,_2b4=dojo.marginBox(this.itemContainer);this.itemOffset={h:_2b3.y-_2b2.y,w:_2b3.x-_2b2.x};if(this.isVertical){this.item=-Math.round(_2b4.t/this.itemOffset.h);this.itemsPerPage=Math.round(this.scrollSize.h/this.itemOffset.h);}else{this.item=-Math.round(_2b4.l/this.itemOffset.w);this.itemsPerPage=Math.round(this.scrollSize.w/this.itemOffset.w);}this.options=dojo.mixin({},_2ad,dojo.fromJson(dojo.attr(this.widget,"data-scroller")||"{}"));if(typeof this.options.easing=="string"){this.options.easing=eval(this.options.easing);}this.pageSize=this.options.pageSize||this.itemsPerPage;},scrollTo:function(_2b5){if(!_2ac&&_2b5>=this.itemsPerPage){_2b6(this,this.pageSize*Math.floor(_2b5/this.itemsPerPage));}},next:function(){_2b6(this,this.pageSize);},prev:function(){_2b7(this,this.pageSize);}});dojo.mixin(wsgc.js.Scroller,{get:function(_2b8){return _2aa[_2b1(_2b8)]||new wsgc.js.Scroller(_2b8);}});var _2b9=0;function _2b1(_2ba){return _2ba.id||(_2ba.id="_scroller"+_2b9++);};function _2b6(_2bb,_2bc){if(!_2ac&&_2bb.item<_2bb.items.length-_2bb.itemsPerPage){_2bb.item+=_2bc;var _2bd=dojo.marginBox(_2bb.itemContainer);if(_2bb.isVertical){_2bd.t-=(_2bb.itemOffset.h*_2bc);}else{_2bd.l-=(_2bb.itemOffset.w*_2bc);}dojo.fx.slideTo(dojo.mixin({},_2bb.options,{node:_2bb.items[0].parentNode,left:_2bd.l,top:_2bd.t,onEnd:function(){if(_2bb.item>=_2bb.items.length-_2bb.itemsPerPage){_2bb.controls.filter(".btn-next").addClass(_2ab);}_2ac=false;}})).play();_2ac=true;_2bb.controls.filter(".btn-prev").removeClass(_2ab);}};function _2b7(_2be,_2bf){if(!_2ac&&_2be.item>0){_2be.item-=_2bf;var _2c0=dojo.marginBox(_2be.itemContainer);if(_2be.isVertical){_2c0.t+=(_2be.itemOffset.h*_2bf);}else{_2c0.l+=(_2be.itemOffset.w*_2bf);}dojo.fx.slideTo(dojo.mixin({},_2be.options,{node:_2be.itemContainer,left:_2c0.l,top:_2c0.t,onEnd:function(){if(_2be.item===0){_2be.controls.filter(".btn-prev").addClass(_2ab);}_2ac=false;}})).play();_2ac=true;_2be.controls.filter(".btn-next").removeClass(_2ab);}};}(dojo));}if(!dojo._hasResource["wsgc.js.Image"]){dojo._hasResource["wsgc.js.Image"]=true;(function(dojo,_2c1){var _2c2={duration:500,easing:dojo.fx.easing.quadInOut};WSI.Image=dojo.mixin(dojo.provide("wsgc.js.Image"),{swap:function(_2c3,url,_2c4,_2c5){if(dojo.isFunction(_2c4)){_2c5=_2c4;_2c4={};}var _2c6=dojo.mixin({},_2c4,_2c2);var _2c7=dojo.marginBox(_2c3),_2c8=dojo.position(_2c3);var _2c9=this.clone(_2c3),self=this;dojo.style(_2c9,{"position":"absolute","top":"0px","left":"0px","opacity":0});var _2ca;var _2cb=setTimeout(function(){_2ca=dojo.clone(WSI.throbber);dojo.style(_2ca,{"position":"absolute","top":(_2c7.t+(_2c7.h/2))+"px","left":(_2c7.l+(_2c7.w/2))+"px"});dojo.place(_2ca,_2c3,"after");},175);this.loadWithCallback(_2c9,url,function(){if(_2cb){clearTimeout(_2cb);_2cb=null;}setTimeout(function(){if(_2ca){dojo.destroy(_2ca);}},250);dojo.place(_2c9,_2c3,"before");var _2cc=dojo.marginBox(_2c9);var _2cd;var _2ce=[dojo.fadeOut(dojo.mixin({node:_2c3},_2c6)),dojo.fadeIn(dojo.mixin({node:_2c9},_2c6))];if(_2cc.h>_2c7.h){var _2cf="<div class='spacer' style='position: relative; height: 0px; width: 1px; visibility: hidden;'></div>";dojo.place(_2cf,_2c3,"after");var _2d0=dojo.query(".spacer")[0];var _2d1=Math.max(_2cc.h-_2c7.h,0);_2ce.push(dojo.animateProperty(dojo.mixin({node:_2d0,duration:150,properties:{height:_2d1}},_2c6)));}var anim=dojo.fx.combine(_2ce);dojo.connect(anim,"onEnd",function(){var _2d2=self.clone(_2c3);dojo.style(_2d2,"opacity","1");_2d2.id=_2c3.id;self.loadWithCallback(_2d2,dojo.attr(_2c9,"src"),function(){dojo.place(_2d2,_2c3,"replace");dojo.destroy(_2d0);dojo.destroy(_2c9);if(_2c5){_2c5(_2d2);}});});anim.play();});},loadWithCallback:function(_2d3,url,fn){var _2d4="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",_2d5=dojo.connect(_2d3,"onload",function(){if(_2d3.src!==_2d4){fn();}dojo.disconnect(_2d5);});dojo.attr(_2d3,"src",url);if(!dojo.isIE&&(_2d3.complete||typeof _2d3.complete==="undefined")){_2d3.src=_2d4;_2d3.src=url;}},clone:function(_2d6){var _2d7=new Image();dojo.forEach(["alt","class","title"],function(name){var val=dojo.attr(_2d6,name);if(val){dojo.attr(_2d7,name,val);}});return _2d7;}});}(dojo));}if(!dojo._hasResource["wsgc.js.Thumbnail"]){dojo._hasResource["wsgc.js.Thumbnail"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.Thumbnail");(function(dojo,_2d8){WSI.Events.delegate("click",".thumbnailWidget",function(evt){dojo.stopEvent(evt);var _2d9=dojo.fromJson(dojo.attr(this,"data-thumbnail")||"{}");dojo.publish("/thumbnail/click",[{href:this.href||_2d9.href,alt:_2d9.alt||"",elem:this,target:this.target||_2d9.target,map:_2d9.map,options:_2d9}]);});WSI.Thumbnail=dojo.mixin(wsgc.js.Thumbnail,{subscribe:function(_2da,fn){if(typeof _2da==="string"){_2da=[_2da];}dojo.subscribe("/thumbnail/click",function(_2db){if(_2db&&_2db.target&&dojo.indexOf(_2da,_2db.target)>-1){fn(_2db);}});}});var _2dc={};dojo.subscribe("/thumbnail/click",function(_2dd){if(!_2dc[_2dd.target]){var _2de=dojo.query("#"+_2dd.target+".thumbnailTarget");if(_2de.length){if(_2de[0].nodeName=="IMG"){if(_2de[0].src!=_2dd.href){_2dc[_2dd.target]=true;WSI.Image.swap(_2de[0],_2dd.href,function(_2df){if(_2dd.map){dojo.attr(_2df,"useMap",_2dd.map);}_2dc[_2dd.target]=false;});}}else{WSI.utils.loadFragment(dojo.mixin({url:_2dd.href,load:function(data){_2de.html(data);}},_2dd.options));}}}});function _2e0(href){var _2e1=href.match(/#.*/);return (_2e1!==null)?_2e1[0]:href;};}(dojo));}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.window.getBox=function(){var _2e2=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _2e3=dojo._docScroll();return {w:_2e2.clientWidth,h:_2e2.clientHeight,l:_2e3.x,t:_2e3.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _2e4=doc.compatMode=="BackCompat",_2e5=_2e4?body:html,_2e6=isWK?body:_2e5,_2e7=_2e5.clientWidth,_2e8=_2e5.clientHeight,rtl=!dojo._isBodyLtr(),_2e9=pos||dojo.position(node),el=node.parentNode,_2ea=function(el){return ((isIE<=6||(isIE&&_2e4))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_2ea(node)){return;}while(el){if(el==body){el=_2e6;}var _2eb=dojo.position(el),_2ec=_2ea(el);if(el==_2e6){_2eb.w=_2e7;_2eb.h=_2e8;if(_2e6==html&&isIE&&rtl){_2eb.x+=_2e6.offsetWidth-_2eb.w;}if(_2eb.x<0||!isIE){_2eb.x=0;}if(_2eb.y<0||!isIE){_2eb.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_2eb.w-=pb.w;_2eb.h-=pb.h;_2eb.x+=pb.l;_2eb.y+=pb.t;}if(el!=_2e6){var _2ed=el.clientWidth,_2ee=_2eb.w-_2ed;if(_2ed>0&&_2ee>0){_2eb.w=_2ed;if(isIE&&rtl){_2eb.x+=_2ee;}}_2ed=el.clientHeight;_2ee=_2eb.h-_2ed;if(_2ed>0&&_2ee>0){_2eb.h=_2ed;}}if(_2ec){if(_2eb.y<0){_2eb.h+=_2eb.y;_2eb.y=0;}if(_2eb.x<0){_2eb.w+=_2eb.x;_2eb.x=0;}if(_2eb.y+_2eb.h>_2e8){_2eb.h=_2e8-_2eb.y;}if(_2eb.x+_2eb.w>_2e7){_2eb.w=_2e7-_2eb.x;}}var l=_2e9.x-_2eb.x,t=_2e9.y-Math.max(_2eb.y,0),r=l+_2e9.w-_2eb.w,bot=t+_2e9.h-_2eb.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_2e9.x+=el.scrollLeft;el.scrollLeft+=(isIE>=8&&!_2e4&&rtl)?-s:s;_2e9.x-=el.scrollLeft;}if(bot*t>0){_2e9.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_2e9.y-=el.scrollTop;}el=(el!=_2e6)&&!_2ec&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};}if(!dojo._hasResource["wsgc.js.Overlay"]){dojo._hasResource["wsgc.js.Overlay"]=true;dojo.provide("wsgc.js.Overlay");(function(dojo,_2ef){var _2f0={id:"",classname:"",mask:true,loadingThrobber:true,fixedScroll:true,destroyOnHide:true,preventCache:true},_2f1={},_2f2,_2f3=".overlayMask,.overlayScroll,.overlayCloseButton",_2f4="",_2f5=WSI.isIPad,_2f6,_2f7=["onLoad","onShow","onShowing","onShown","onHide","onHidden","onDestroy","onRefresh"];dojo.addOnLoad(function(){WSI.Events.delegate("click",".overlayTrigger",function(evt){var _2f8=dojo.mixin({},dojo.fromJson(dojo.attr(this,"data-overlay")||"{}")),data=dojo.fromJson(dojo.attr(this,"data-overlaydata")||"{}"),href=dojo.attr(this,"href");wsgc.js.Overlay.trigger(_2f8,data,href);dojo.stopEvent(evt);});WSI.Events.delegate("click",".cancelOverlay",function(evt){wsgc.js.Overlay.cancel();});});dojo.declare("wsgc.js.Overlay",null,{constructor:function(href,_2f9){var self=this,loc=document.location,_2fa=loc.href.substr(0,loc.href.length-loc.hash.length);this.href=href.replace(_2fa,"");this.options=dojo.mixin({},_2f0,_2f9);this.registeredCallbacks={};dojo.forEach(_2f7,function(name){self[name]=function(){return self._callback(name);};self.registeredCallbacks[name]=self.options[name]?[self.options[name]]:[];});this.isAjax=this.href.charAt(0)!=="#";},refresh:function(){var self=this;if(this.onRefresh(this)===false){return;}this.isLoaded=false;this.load(function(){if(self.throbber){dojo.destroy(self.throbber);}self.elem=dojo.place(WSI.utils.toDom(self.template(self.data)),self.elem,"replace");var pos={marginTop:self.elem.style.marginTop,marginLeft:self.elem.style.marginLeft,top:self.elem.style.top,left:self.elem.style.left};dojo.style(self.elem,pos);if(self.onShowing(self)===false){return;}});},load:function(_2fb){var self=this;if(!this.isAjax||this.isLoaded){if(_2fb){_2fb();}else{self.show();}return;}if(this.onLoad(this)===false){return;}if(this.options.loadingThrobber){this.throbber=dojo.place("<div class=\"overlayThrobber\"></div>",dojo.body());this.throbber.appendChild(dojo.clone(WSI.throbber));}var _2fc={};if(this.options.form&&dojo.byId(this.options.form)){_2fc.form=dojo.byId(this.options.form);}WSI.utils.loadFragment(this.options.httpmethod||"GET",dojo.mixin(_2fc,{url:this.href,preventCache:this.options.preventCache,timeout:this.options.timeout||30000,load:function(data){if(data===data.replace(/<script.+type=['"]text\/html['"].+id=['"]overlayTemplate_[^>]*>([\s\S]*?)<\/script>/gim,function(_2fd,src){self.template=WSI.utils.template(dojo.trim(src));return "";})){_2f6=_2f6||WSI.utils.template(dojo.trim(dojo.byId("overlayTemplate_defaultAjaxWrapper").innerHTML));self.template=(function(dojo,_2fe){var _2ff=_2f6({ajaxContent:data,id:self.options.id,classname:self.options.classname});return function(){return _2ff;};}(dojo));}self.isLoaded=true;if(_2fb){_2fb();}else{self.show();}},error:function(_300){var _301=dojo.query("#overlayTemplate_overlayError");if(_301.length===0){wsgc.js.Overlay.hideAll();if(self.throbber){dojo.destroy(self.throbber);}setTimeout(function(){alert("Sorry, your request could not be processed at this time. Please try again later.");if(self.mask){dojo.body().removeChild(self.mask);}if(self.scroll){dojo.style(self.scroll,"overflow","hidden");dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:_2f4,paddingRight:_2f4});dojo.body().removeChild(self.scroll);}},100);}else{self.elem=dojo.create("div",{"class":"overlayErrorContainer","innerHTML":_301.innerHTML()});if(_2fb){_2fb();}else{self.show();}}}}));},show:function(){var self=this;if(_2f2){if(_2f2===self){self.refresh();return;}}if(this.onShow(this)===false){return;}self.mask=self.mask||(self.options.mask&&dojo.place("<div class='overlayMask'></div>",dojo.body()));self.scroll=self.scroll||(self.options.fixedScroll&&dojo.place("<div class='overlayScroll'></div>",dojo.body()));if(self.scroll&&!_2f5){dojo.style(self.scroll,{"overflowX":"auto","overflowY":"scroll"});dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:"hidden",paddingRight:WSI.utils.getBrowserScrollbarWidth()+"px"});}if(self.mask&&_2f5){var _302=dojo.marginBox(dojo.body());dojo.style(self.mask,{width:window.innerWidth+"px",height:_302.h+"px"});}if(this.isAjax&&!this.isLoaded){this.load(_303);}else{try{self.template=self.template||WSI.utils.template(dojo.trim(dojo.byId("overlayTemplate_"+self.href.substr(1)).innerHTML));}catch(e){}_303();}function _303(){if(_2f2){if(_2f2!==self){_2f2.hide(true);}}self.elem=self.elem||WSI.utils.toDom(self.template(self.data));dojo.style(self.scroll||self.elem,"opacity",0);if(self.scroll){dojo.style(self.elem,"left","-9999px");}dojo.place(self.elem,self.scroll||dojo.body());if(self.onShowing(self)===false){return;}setTimeout(function(){if(self.scroll){var _304=dojo.position(self.elem);var _305=self.elem.style.height==="auto"||self.elem.style.height==="";if(_305){dojo.style(self.elem,"marginTop",(_304.h/-2)+"px");}self.center();self.resizeConnection=dojo.connect(window,"resize",dojo.hitch(self,self.center));if(self.throbber){dojo.destroy(dojo.query("img",self.throbber)[0]);}if(_2f5){dojo.style(self.scroll||self.elem,"opacity",1);if(self.throbber){dojo.style(self.throbber,"opacity",0);}_2f2=self;dojo.query("a",self.elem)[0].focus();dojo.style(self.scroll||self.elem,"filter",_2f4);if(self.onShown(self)===false){return;}}else{var _306=[dojo.fadeIn({node:self.scroll||self.elem,duration:self.throbber?150:500,delay:self.throbber?200:100,easing:dojo.fx.easing.linear,onEnd:function(evt){if(self.elem){_2f2=self;dojo.query("a",self.elem)[0].focus();dojo.style(self.scroll||self.elem,"filter",_2f4);if(self.onShown(self)===false){return;}self.center();}}})];if(self.throbber){_306.push(dojo.animateProperty({node:self.throbber,duration:350,easing:dojo.fx.easing.quintInOut,properties:{marginTop:{end:_304.h/-2},height:{end:_304.h},marginLeft:{end:_304.w/-2},width:{end:_304.w}},onEnd:function(){dojo.destroy(self.throbber);}}));_306.push(dojo.fadeOut({node:self.throbber,duration:300,easing:dojo.fx.easing.linear}));}dojo.fx.combine(_306).play();}}});};},hide:function(_307){if(this.onHide(this)===false){return;}var self=this;if(self.mask){dojo.body().removeChild(self.mask);}if(this.scroll){dojo.disconnect(self.resizeConnection);self.resizeConnection=null;}if(_2f5||_307){dojo.style(self.scroll||self.elem,"opacity",0);_2f2=null;dojo.body().removeChild(self.scroll||self.elem);if(self.options.destroyOnHide){self.destroy();}if(self.onHidden(self)===false){return;}}else{dojo.fadeOut({node:self.scroll||self.elem,duration:300,easing:dojo.fx.easing.expoOut,onEnd:function(evt){_2f2=null;if(self.scroll){dojo.style(self.scroll,"overflow","hidden");dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:_2f4,paddingRight:_2f4});}dojo.body().removeChild(self.scroll||self.elem);if(self.options.destroyOnHide){self.destroy();}if(self.onHidden(self)===false){return;}}}).play();}},destroy:function(){if(this.onDestroy(this)===false){return;}dojo.destroy(this.elem);this.elem=null;delete this.elem;if(this.scroll){dojo.destroy(this.scroll);this.scroll=null;}if(this.mask){dojo.destroy(this.mask);this.mask=null;}this.template=null;this.isLoaded=false;},center:function(){var _308=dojo.position(this.elem),_309=dojo.window.getBox(),_30a=false,_30b={left:_2f4,top:_2f4,marginTop:(_308.h/-2)+"px",marginLeft:_2f4};if(_2f5){_309={l:window.pageXOffset,t:window.pageYOffset,w:window.innerWidth,h:window.innerHeight};}else{_309.t=_309.l=0;}_309.w-=WSI.utils.getBrowserScrollbarWidth();if(_308.w>_309.w){_30b.marginLeft=0;_30b.left=_309.l+"px";_30a=true;}else{if(_2f5){_30b.marginLeft=0;_30b.left=(_309.l+(_309.w/2)-(_308.w/2))+"px";}}if(_308.h+20>_309.h-(_30a?WSI.utils.getBrowserScrollbarWidth():0)){_30b.marginTop="10px";_30b.top=_309.t+"px";}else{if(_2f5){_30b.marginTop="10px";_30b.top=(_309.t+(_309.h/2)-(_308.h/2))+"px";}}dojo.style(this.elem,_30b);},_callback:function(name){var self=this;var res=true;if(this.registeredCallbacks[name]){dojo.every(this.registeredCallbacks[name],function(_30c){res=res&&(_30c.call(self,self)!==false);return res;});}return res;},_addCallback:function(name,fn){if(this.registeredCallbacks[name]){this.registeredCallbacks[name].push(fn);}},_removeCallback:function(name,fn){if(this.registeredCallbacks[name]){if(fn){var i=this.registeredCallbacks[name].indexOf(fn);if(i!==-1){this.registeredCallbacks[name].splice(i,1);return true;}}else{this.registeredCallbacks[name]=[];return true;}}return false;}});function _30d(href){var _30e=href.match(/#(.*)/);return (_30e!==null)?_30e[0]:href;};var _30f={getByHref:function(href,_310){href=_30d(href||_310.href);var _311=_2f1[href];if(_311){dojo.mixin(_311.options,_310);}else{_311=(_2f1[href]=new wsgc.js.Overlay(href,_310));}return _311;},trigger:function(_312,data,href){overlay=wsgc.js.Overlay.getByHref(href,_312);overlay.data=data;overlay.show();},hide:function(href,_313){href=_30d(href||options.href);var _314=_2f1[href];if(_314){_314.hide(_313);}},refresh:function(href){href=_30d(href||options.href);var _315=_2f1[href];if(_315){_315.refresh();}},center:function(){if(_2f2){_2f2.center();}},hideAll:function(){try{_2f2.hide(true);}catch(e){}return;},cancel:function(){try{_2f2.hide(false);}catch(e){}return;}};dojo.forEach(_2f7,function(_316){var _317={};_317["addO"+_316.substr(1)]=function(fn){this._addCallback(_316,fn);};_317["removeO"+_316.substr(1)]=function(fn){this._removeCallback(_316,fn);};dojo.extend(wsgc.js.Overlay,_317);_30f["addO"+_316.substr(1)+"ByHref"]=_318(_316);_30f["removeO"+_316.substr(1)+"ByHref"]=_319(_316);});dojo.mixin(wsgc.js.Overlay,_30f);function _318(name){return function(href,fn){var _31a=wsgc.js.Overlay.getByHref(href);_31a._addCallback(name,fn);};};function _319(name){return function(href,fn){var _31b=wsgc.js.Overlay.getByHref(href);_31b._removeCallback(name,fn);};};WSI.Events.delegate(WSI.capabilities.touch?"touchstart":"click",_2f3,function(evt){if(this===evt.target&&_2f2){dojo.stopEvent(evt);_2f2.hide();}});dojo.connect(dojo.body(),"keypress",function(evt){if(evt.keyCode===dojo.keys.ESCAPE&&_2f2){dojo.stopEvent(evt);_2f2.hide();}});}(dojo));}if(!dojo._hasResource["wsgc.js.Tooltip"]){dojo._hasResource["wsgc.js.Tooltip"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.Tooltip");(function(dojo,_31c){var _31d=WSI.capabilities.touch,_31e={placement:"above","style":"",id:"default",content:{},template:"",delay:300};if(!_31d){WSI.Events.delegate("mouseover",".showTooltip",function(evt){var _31f={},elem=this,_320;_31f=new wsgc.js.Tooltip(this,WSI.dataset.get(this,"tooltip"));_320=dojo.connect(dojo.body(),"mousemove",function(evt){if(WSI.utils.closest(".showTooltip",evt.target)!==elem){dojo.disconnect(_320);_31f.hide();}});});}dojo.declare("wsgc.js.Tooltip",null,{constructor:function(elem,_321){var _322;this.options=dojo.mixin({},_31e,_321);this.elem=elem;if(_321.template){_322=WSI.utils.template(_321.template);}else{if(dojo.byId("template-tooltip-"+this.options.id)){_322=WSI.utils.template(dojo.trim(dojo.byId("template-tooltip-"+this.options.id).innerHTML));}else{}}dojo.mixin(this.options.content,{"style":this.options.style,placement:this.options.placement});this.node=WSI.utils.toDom(_322(this.options.content));this.setPositioning();this.show();},setPositioning:function(){var _323,_324;_323=dojo.position(this.elem,true);_324=this.getDimensions();switch(this.options.placement){case "above":this.position={x:_323.x+_323.w/2-_324.w/2,y:_323.y-_324.h};break;case "below":this.position={x:_323.x+_323.w/2-_324.w/2,y:_323.y+_323.h};break;case "left":this.position={x:_323.x-_324.w,y:_323.y+_323.h/2-_324.h/2};break;case "right":this.position={x:_323.x+_323.w,y:_323.y+_323.h/2-_324.h/2};break;}},getDimensions:function(){var _325;dojo.style(this.node,{position:"absolute",top:"0px",left:"0px"});dojo.place(this.node,dojo.body());_325=dojo.position(this.node,true);this.node.parentNode.removeChild(this.node);dojo.removeAttr(this.node,"style");return _325;},show:function(){dojo.style(this.node,{top:(this.position.y||0)+"px",left:(this.position.x||0)+"px",position:"absolute",opacity:0});dojo.place(this.node,dojo.body());dojo.fadeIn({node:this.node,duration:100,delay:this.options.delay}).play();},hide:function(){var node=this.node;dojo.fadeOut({node:this.node,duration:100,onEnd:function(){dojo.destroy(node);}}).play();}});}(dojo));}if(!dojo._hasResource["wsgc.js.SwatchTooltips"]){dojo._hasResource["wsgc.js.SwatchTooltips"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.SwatchTooltips");(function(dojo,_326){var _327=WSI.capabilities.touch;if(!_327){WSI.Events.delegate("mouseover","ul.graphical-att>li>a",function(evt){var _328={},elem=this,_329;_328=new wsgc.js.Tooltip(this,{"id":"swatch",content:{colorSrc:this.href,colorName:this.title}});_329=dojo.connect(dojo.body(),"mousemove",function(evt){if(WSI.utils.closest("a",evt.target)!==elem){dojo.disconnect(_329);_328.hide();}});});}}(dojo));}if(!dojo._hasResource["wsgc.common.js.VideoPlayer"]){dojo._hasResource["wsgc.common.js.VideoPlayer"]=true;dojo.provide("wsgc.common.js.VideoPlayer");dojo.provide("wsgc.js.VideoPlayer");(function(dojo,_32a){var _32b=0,_32c={youTube:{width:640,height:390,autoplay:true,theme:"light"},productBuildFlash:{width:400,height:370}};WSI.VideoPlayer=dojo.mixin(wsgc.js.VideoPlayer,{youTubeData:function(_32d,_32e){var _32f="cb"+_32b++;WSI.utils.loadScript("//gdata.youtube.com/feeds/api/videos/"+_32d+"?v=2&alt=json-in-script&callback=WSI.VideoPlayer."+_32f);WSI.VideoPlayer[_32f]=function(data){delete WSI.VideoPlayer[_32f];try{_32e({videoId:_32d,title:data.entry.media$group.media$title.$t,description:data.entry.media$group.media$description.$t});}catch(e){if(console&&console.error){}}};},youTubePlayer:function(elem,_330){var opts=dojo.mixin({},_32c.youTube,_330||{},WSI.dataset.get(elem,"youtubevideo")||{}),_331=opts.videoId,_332=!dojo.isIE||dojo.isIE>7,_333=!!navigator.userAgent.match(/iP(?:ad|hone)/i),_334="//www.youtube.com/embed/"+_331+"?enableuseJsApi="+(_332?1:0)+"&origin="+WSI.config.appUrl,_335=new YT.Player(elem,{videoId:_331,height:opts.height,width:opts.width,events:_332?{onReady:function(evt){if(!_333&&opts.autoplay){_335.playVideo();}},onStateChange:function(evt){if(evt.data===0&&_333){_335.seekTo(0);}}}:{},playerVars:{wmode:"transparent",autohide:1,autoplay:dojo.isIE===7&&opts.autoplay?1:0,modestbranding:_333?0:1,iv_load_policy:3,fs:1,cc_load_policy:0,rel:0,showsearch:0,enablejsapi:1,webkitAllowFullScreen:"webkitAllowFullScreen",mozallowfullscreen:"mozallowfullscreen",allowFullScreen:"allowFullScreen",theme:opts.theme}});},productBuildFlashPlayer:function(elem,_336){var opts=dojo.mixin({},_32c.productBuildFlash,_336||{},WSI.dataset.get(elem,"productbuildflash")||{}),_337=opts.videoPath,_338=WSI.config.sessionCookieName,_339=_338?("&sessionCookieName="+_338+"&sessionId="+(dojo.cookie(_338)||"")):"";new dojox.embed.Flash({path:_337,width:opts.width,height:opts.height,params:{wmode:"transparent",allowFullScreen:"true",flashvars:"urlbase=${rc.getRootUrl()}&swfbase="+_337+_339,allowScriptAccess:"always"}},elem);}});wsgc.common.js.VideoPlayer=wsgc.js.VideoPlayer;}(dojo));}if(!dojo._hasResource["wsgc.js.Social"]){dojo._hasResource["wsgc.js.Social"]=true;dojo.provide("wsgc.js.Social");(function(dojo,_33a){dojo.declare("wsgc.js.Social",[],{constructor:function(url){this.callbacks=[];if(url){WSI.utils.loadScript(url);}},_callCallbacks:function(){for(var i=0,len=this.callbacks.length;i<len;++i){if(false===this.callbacks[i].apply(this,arguments)){break;}}},registerCallback:function(fn){this.callbacks.push(fn);}});dojo.declare("wsgc.js.social.Twitter",[wsgc.js.Social],{constructor:function(url){var self=this,t=window.twttr={_e:[],ready:function(f){t._e.push(f);}};t.ready(function(_33b){_33b.events.bind("tweet",function(evt){self._callCallbacks(evt);});});}});dojo.declare("wsgc.js.social.Facebook",[wsgc.js.Social],{constructor:function(url,_33c){var self=this,opts={status:true,cookie:true,xfbml:true};if(_33c){opts.appId=_33c;}window.fbAsyncInit=function(){FB.init(opts);FB.getLoginStatus(function(_33d){});FB.Event.subscribe("edge.create",function(r){self._callCallbacks(r);});};}});dojo.declare("wsgc.js.social.GooglePlus",[wsgc.js.Social],{constructor:function(url){var self=this;window.googlepluscallback=function(arg){self._callCallbacks(arg);};}});}(dojo));}if(!dojo._hasResource["wsgc.js.StringUtils"]){dojo._hasResource["wsgc.js.StringUtils"]=true;(function(){dojo.mixin(dojo.provide("wsgc.js.StringUtils"),{capitalize:function(word){return word[0].toUpperCase()+(word[1]?word.substr(1).toLowerCase():"");},leftPad:function(str,_33e,pad){return (Array(_33e+1).join(pad||"0")+str).substr(-_33e);},escapeRegExp:function(str){return str.replace(/([.?*+\[\]^$()])/g,"\\$1");},ordinalSuffix:function(n){if(((n%100)/10)|0!==1){switch(n%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd";}}return n+"th";}});}());}if(!dojo._hasResource["wsgc.js.DateUtils"]){dojo._hasResource["wsgc.js.DateUtils"]=true;dojo.provide("wsgc.js.DateUtils");(function(){var _33f=["January","February","March","April","May","June","July","August","September","October","November","December"],_340=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_341=wsgc.js.StringUtils,_342=dojo.mixin(wsgc.js.DateUtils,{MIN_DATE:new Date(1000,0),MAX_DATE:new Date(9999,11,31),DAYS_PER_MONTH:[31,28,31,30,31,30,31,31,30,31,30,31],MONTH_NAMES:_33f,MONTH_ABBRS:dojo.map(_33f,function(name){return name.substr(0,3);}),DAY_NAMES:_340,DAY_ABBRS:dojo.map(_340,function(name){return name.substr(0,3);}),isLeapYear:function(year){return new Date(year,1,29).getMonth()===1;},getDaysInMonth:function(_343,year){return _343===1&&_342.isLeapYear(year)?29:_342.DAYS_PER_MONTH[_343];},getWeeksInMonth:function(_344,year){return Math.ceil((_342.getFirstDayOfWeekForMonth(_344,year)+_342.getDaysInMonth(_344,year))/7);},getFirstDayOfWeekForMonth:function(_345,year){return new Date(year,_345).getDay();},getLastDayOfWeekForMonth:function(_346,year){return new Date(year,_346,_342.getDaysInMonth(_346,year)).getDay();},fixDate:function(date,_347){if(isNaN(date)){date=_347;}else{date=new Date(Math.max(_342.MIN_DATE,Math.min(_342.MAX_DATE,date||_347)));}if(!date){debugger;}return new Date(date.getFullYear(),date.getMonth(),date.getDate());},guessCentury:function(year){var _348=new Date().getFullYear(),_349=100*(((_348-85)/100)|0),_34a=100*(((_348+15)/100)|0);if((_348-(_349+year))<=85){return _349;}else{return _34a;}},format:function(_34b,date){return _34b.replace(/y+|m+|d+|r|H+|h+|M+|s+|S+|a|Z/g,function(_34c){switch(_34c){case "yyyy":return date.getFullYear();case "yy":return (date.getFullYear()+"").substr(2,2);case "MMMM":return _342.MONTH_NAMES[date.getMonth()];case "MMM":return _342.MONTH_ABBRS[date.getMonth()];case "MM":return _341.leftPad(date.getMonth()+1,2,"0");case "M":return date.getMonth()+1;case "dddd":return _342.DAY_NAMES[date.getDay()];case "ddd":return _342.DAY_ABBRS[date.getDay()];case "dd":return _341.leftPad(date.getDate(),2,"0");case "d":return date.getDate();case "r":return _341.ordinalSuffix(date.getDate());case "hh":return _341.leftPad(date.getHours(),2,"0");case "h":return date.getHours();case "HH":return _341.leftPad((date.getHours()%12)||12);case "H":return (date.getHours()%12)||12;case "mm":return _341.leftPad(date.getMinutes(),2,"0");case "m":return date.getMinutes();case "ss":return _341.leftPad(date.getSeconds(),2,"0");case "s":return date.getSeconds();case "SSS":return _341.leftPad(date.getMilliseconds(),3,"0");case "S":return date.getMilliseconds();case "a":return date.getHours()<12?"AM":"PM";case "Z":return date.getTimezoneOffset()/-0.6;default:return _34c;}});},parse:function(_34d,_34e){var date=new Date(NaN),_34f=0,_350="\\d\\d",_351="\\d\\d\\d\\d",_352="\\d+",_353={year:0,month:0,day:1,hours:0,minutes:0,seconds:0,milliseconds:0};function _354(_355){if(_34e.length>_34f){var re=new RegExp(_355,"g"),_356;re.lastIndex=_34f;_356=re.exec(_34e);if(!_356){throw "DateUtils parse error: "+_341.ordinalSuffix(_34f)+" character of "+_34e+" does not match "+_355;}_34f+=_356[0].length;return _356[0];}};_34d=_34d.replace(/y+|m+|d+|H+|h+|M+|s+|S+|a|Z|.+?/g,function(_357){if(_34e.length<=_34f){return _357;}switch(_357){case "yyyy":_353.year=+_354(_351);break;case "yy":_353.year=+_354(_350);_353.year+=_342.guessCentury(_353.year);break;case "y":_353.year=+_354(_352);if(_353.year<100){_353.year+=_342.guessCentury(_353.year);}break;case "MMMM":_353.month=_342.MONTH_NAMES.indexOf(_354(_342.MONTH_NAMES.join("|")));break;case "MMM":_353.month=_342.MONTH_ABBRS.indexOf(_354(_342.MONTH_ABBRS.join("|")));break;case "MM":_353.month=_354(_350)-1;break;case "M":_353.month=_354(_352)-1;break;case "dddd":break;case "ddd":break;case "dd":_353.day=+_354(_350);break;case "d":_353.day=+_354(_352);break;case "hh":_353.hours=+_354(_350);break;case "h":_353.hours=+_354(_352);break;case "HH":_353.hours=+_354(_350);break;case "H":_353.hours=+_354(_352);break;case "mm":_353.minutes=+_354(_350);break;case "m":_353.minutes=+_354(_352);break;case "ss":_353.seconds=+_354(_350);break;case "s":_353.seconds=+_354(_352);break;case "SSS":_353.milliseconds=+_354(_350);break;case "S":_353.milliseconds=+_354(_352);break;case "a":_353.ampm=_354("[apAP][mM]").toLowerCase();break;case "Z":_353.tzoffset=_354("[-+]?\\d+")*-0.6;break;case "/":case "-":case ".":_354("[./-]");break;default:_354(_341.escapeRegExp(_357));break;}return "";});if(_34e.length>_34f){throw "Unconsumed characters remain in input string: "+_34e.substr(_34f);}if(_34d.length){throw "Unmatched characters remain in pattern string: "+_34d;}_353.hours=_353.hours?(_353.hours%12)+(_353.ampm==="pm"?12:0):0;function _358(prop,min,max){return _353[prop]>=min&&_353[prop]<=max;};if(_358("month",0,11)&&_358("day",1,_342.getDaysInMonth(_353.month,_353.year))&&_358("hours",0,23)&&_358("minutes",0,59)&&_358("seconds",0,59)&&_358("milliseconds",0,999)){date=new Date(_353.year,_353.month,_353.day,_353.hours,_353.minutes,_353.seconds,_353.milliseconds);if(_353.tzoffset){date.setTimezoneOffset(_353.tzoffset);}}return date;}});}());}if(!dojo._hasResource["wsgc.js.CalendarWidget"]){dojo._hasResource["wsgc.js.CalendarWidget"]=true;dojo.provide("wsgc.js.CalendarWidget");(function(){var _359={},_35a=wsgc.js.DateUtils,_35b=wsgc.js.StringUtils;dojo.addOnLoad(function(){dojo.forEach(["day","week","month","dayOfWeek"],function(name){var _35c=dojo.byId("calendarWidget_"+name+"Template");if(_35c){_359[name]=WSI.utils.template(_35c.innerHTML);}});});dojo.declare("wsgc.js.CalendarWidget",[],{constructor:function(elem,date,_35d){this.elem=elem;if(!_35d&&date&&date.constructor!==Date){_35d=date;date=new Date();}this.opts=_35d||{};this.opts.startDate=_35a.fixDate(this.opts.startDate,_35a.MIN_DATE);this.opts.endDate=_35a.fixDate(this.opts.endDate,_35a.MAX_DATE);this.opts.dateFormat=this.opts.dateFormat||"M/d/yyyy";if(this.opts.endDate<this.opts.startDate){throw new Error("end date before start date");}this.setSelectedDate(date);},setSelectedDate:function(date){date=_35a.fixDate(date,new Date());if(this.opts.startDate>date){throw new Error("date before start date");}else{if(this.opts.endDate<date){throw new Error("date after end date");}}this.selectedDate=date;this.viewMonth(date.getMonth(),date.getFullYear());},viewMonth:function(_35e,year){var date=new Date(year||this.year,_35e);this.month=date.getMonth();this.year=date.getFullYear();this.dayOfWeek=date.getDay();this._render();},_render:function(){var self=this,_35f=this.month,year=this.year,_360=this.opts.startDate,_361=this.opts.endDate,_362=_35a.getWeeksInMonth(_35f,year),_363=_35a.getFirstDayOfWeekForMonth(_35f,year),_364=_35a.getLastDayOfWeekForMonth(_35f,year),date=new Date(year,_35f,1-_363),days=[],_365=[],_366={lastMonth:{selector:".month .last",month:_35f-1},nextMonth:{selector:".month .next",month:_35f+1},lastYear:{selector:".year .last",month:_35f-12},nextYear:{selector:".year .next",month:_35f+12}},_367,_368,_369;for(var week=0;week<_362;week++){for(var _36a=0;_36a<7;_36a++){_367=(week===0&&_36a<_363)?"last":(week===_362-1&&_36a>_364)?"next":"this";_369=(date.getTime()===this.selectedDate.getTime());_368=(date>=_360&&date<=_361);days.push(_359.day(new Day(date,_367,_369,_368,this.opts.dateFormat)));date=new Date(date.getFullYear(),date.getMonth(),date.getDate()+1);}_365.push(_359.week(new Week(days)));days=[];}this.elem.innerHTML=_359.month(new _36b(_365,_35f,year));function _36c(_36d,_36e){dojo.query(_36d,self.elem).connect("click",function(evt){dojo.stopEvent(evt);self.viewMonth(_36e);});};for(var _36f in _366){_36c(".controls "+_366[_36f].selector,_366[_36f].month);}dojo.query(".day",this.elem).connect("click",function(evt){dojo.stopEvent(evt);if(self.opts.selectFn){self.opts.selectFn(new Date(this.getAttribute("data-date")));}});dojo.query(".controls .month input",this.elem).connect("change",function(evt){var _370=_35a.MONTH_ABBRS.indexOf(_35b.capitalize(this.value.substr(0,3)));if(_370>-1){self.viewMonth(_370);}else{this.value=_35a.MONTH_NAMES[self.month];}});dojo.query(".controls .year input",this.elem).connect("change",function(evt){var year=+this.value;if(year>0&&year<100){year=_35a.guessCentury(year)+year;}self.viewMonth(self.month,year);});}});function _371(_372,_373){this.dayName=_372;this.dayAbbr=_373;};function Day(date,_374,_375,_376,_377){this.day=date.getDate();this.dayOfWeek=date.getDay();this.dayAbbr=_35a.DAY_ABBRS[date.getDay()];this.date=_35a.format(_377,date);this.whichMonth=_374;this.isSelectedDay=_375;this.inDateRange=_376;};function Week(days){this.days=days;};function _36b(_378,_379,year){this.weeks=_378;this.month=_379;this.monthName=_35a.MONTH_NAMES[_379];this.year=year;this.dayAbbrs=dojo.map(_35a.DAY_ABBRS,function(_37a,i){return _359.dayOfWeek(new _371(_35a.DAY_NAMES[i],_37a));});};}());}
