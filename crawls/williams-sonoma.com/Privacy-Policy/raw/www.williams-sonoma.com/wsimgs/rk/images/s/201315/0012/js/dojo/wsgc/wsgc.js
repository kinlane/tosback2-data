/* Â© 2012 Williams-Sonoma Inc. All rights reserved. */
dojo.provide("wsgc");if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(_1,_2){return _1.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_2&&_2.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(_3,re,_4){if(!(_3 instanceof Array)){return re(_3);}var b=[];for(var i=0;i<_3.length;i++){b.push(re(_3[i]));}return dojo.regexp.group(b.join("|"),_4);};dojo.regexp.group=function(_5,_6){return "("+(_6?"?:":"")+_5+")";};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(_7,_8,_9){var c=document.cookie;if(arguments.length==1){var _a=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(_7)+"=([^;]*)"));return _a?decodeURIComponent(_a[1]):undefined;}else{_9=_9||{};var _b=_9.expires;if(typeof _b=="number"){var d=new Date();d.setTime(d.getTime()+_b*24*60*60*1000);_b=_9.expires=d;}if(_b&&_b.toUTCString){_9.expires=_b.toUTCString();}_8=encodeURIComponent(_8);var _c=_7+"="+_8,_d;for(_d in _9){_c+="; "+_d;var _e=_9[_d];if(_e!==true){_c+="="+_e;}}document.cookie=_c;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dojo.io.script"]){dojo._hasResource["dojo.io.script"]=true;dojo.provide("dojo.io.script");(function(){var _f=dojo.isIE?"onreadystatechange":"load",_10=/complete|loaded/;dojo.io.script={get:function(_11){var dfd=this._makeScriptDeferred(_11);var _12=dfd.ioArgs;dojo._ioAddQueryToUrl(_12);dojo._ioNotifyStart(dfd);if(this._canAttach(_12)){var _13=this.attach(_12.id,_12.url,_11.frameDoc);if(!_12.jsonp&&!_12.args.checkString){var _14=dojo.connect(_13,_f,function(evt){if(evt.type=="load"||_10.test(_13.readyState)){dojo.disconnect(_14);_12.scriptLoaded=evt;}});}}dojo._ioWatch(dfd,this._validCheck,this._ioCheck,this._resHandle);return dfd;},attach:function(id,url,_15){var doc=(_15||dojo.doc);var _16=doc.createElement("script");_16.type="text/javascript";_16.src=url;_16.id=id;_16.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_16);},remove:function(id,_17){dojo.destroy(dojo.byId(id,_17));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(_18){var dfd=dojo._ioSetArgs(_18,this._deferredCancel,this._deferredOk,this._deferredError);var _19=dfd.ioArgs;_19.id=dojo._scopeName+"IoScript"+(this._counter++);_19.canDelete=false;_19.jsonp=_18.callbackParamName||_18.jsonp;if(_19.jsonp){_19.query=_19.query||"";if(_19.query.length>0){_19.query+="&";}_19.query+=_19.jsonp+"="+(_18.frameDoc?"parent.":"")+dojo._scopeName+".io.script.jsonp_"+_19.id+"._jsonpCallback";_19.frameDoc=_18.frameDoc;_19.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_19.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){dojo.io.script._addDeadScript(dfd.ioArgs);}},_deferredOk:function(dfd){var _1a=dfd.ioArgs;if(_1a.canDelete){dojo.io.script._addDeadScript(_1a);}return _1a.json||_1a.scriptLoaded||_1a;},_deferredError:function(_1b,dfd){if(dfd.ioArgs.canDelete){if(_1b.dojoType=="timeout"){dojo.io.script.remove(dfd.ioArgs.id,dfd.ioArgs.frameDoc);}else{dojo.io.script._addDeadScript(dfd.ioArgs);}}return _1b;},_deadScripts:[],_counter:1,_addDeadScript:function(_1c){dojo.io.script._deadScripts.push({id:_1c.id,frameDoc:_1c.frameDoc});_1c.frameDoc=null;},_validCheck:function(dfd){var _1d=dojo.io.script;var _1e=_1d._deadScripts;if(_1e&&_1e.length>0){for(var i=0;i<_1e.length;i++){_1d.remove(_1e[i].id,_1e[i].frameDoc);_1e[i].frameDoc=null;}dojo.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){var _1f=dfd.ioArgs;if(_1f.json||(_1f.scriptLoaded&&!_1f.args.checkString)){return true;}var _20=_1f.args.checkString;if(_20&&eval("typeof("+_20+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(dojo.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(_21){return true;},_jsonpCallback:function(_22){this.ioArgs.json=_22;}};})();}if(!dojo._hasResource["dojo.NodeList-manipulate"]){dojo._hasResource["dojo.NodeList-manipulate"]=true;dojo.provide("dojo.NodeList-manipulate");(function(){function _23(_24){var _25="",ch=_24.childNodes;for(var i=0,n;n=ch[i];i++){if(n.nodeType!=8){if(n.nodeType==1){_25+=_23(n);}else{_25+=n.nodeValue;}}}return _25;};function _26(_27){while(_27.childNodes[0]&&_27.childNodes[0].nodeType==1){_27=_27.childNodes[0];}return _27;};function _28(_29,_2a){if(typeof _29=="string"){_29=dojo._toDom(_29,(_2a&&_2a.ownerDocument));if(_29.nodeType==11){_29=_29.childNodes[0];}}else{if(_29.nodeType==1&&_29.parentNode){_29=_29.cloneNode(false);}}return _29;};dojo.extend(dojo.NodeList,{_placeMultiple:function(_2b,_2c){var nl2=typeof _2b=="string"||_2b.nodeType?dojo.query(_2b):_2b;var _2d=[];for(var i=0;i<nl2.length;i++){var _2e=nl2[i];var _2f=this.length;for(var j=_2f-1,_30;_30=this[j];j--){if(i>0){_30=this._cloneNode(_30);_2d.unshift(_30);}if(j==_2f-1){dojo.place(_30,_2e,_2c);}else{_2e.parentNode.insertBefore(_30,_2e);}_2e=_30;}}if(_2d.length){_2d.unshift(0);_2d.unshift(this.length-1);Array.prototype.splice.apply(this,_2d);}return this;},innerHTML:function(_31){if(arguments.length){return this.addContent(_31,"only");}else{return this[0].innerHTML;}},text:function(_32){if(arguments.length){for(var i=0,_33;_33=this[i];i++){if(_33.nodeType==1){dojo.empty(_33);_33.appendChild(_33.ownerDocument.createTextNode(_32));}}return this;}else{var _34="";for(i=0;_33=this[i];i++){_34+=_23(_33);}return _34;}},val:function(_35){if(arguments.length){var _36=dojo.isArray(_35);for(var _37=0,_38;_38=this[_37];_37++){var _39=_38.nodeName.toUpperCase();var _3a=_38.type;var _3b=_36?_35[_37]:_35;if(_39=="SELECT"){var _3c=_38.options;for(var i=0;i<_3c.length;i++){var opt=_3c[i];if(_38.multiple){opt.selected=(dojo.indexOf(_35,opt.value)!=-1);}else{opt.selected=(opt.value==_3b);}}}else{if(_3a=="checkbox"||_3a=="radio"){_38.checked=(_38.value==_3b);}else{_38.value=_3b;}}}return this;}else{_38=this[0];if(!_38||_38.nodeType!=1){return undefined;}_35=_38.value||"";if(_38.nodeName.toUpperCase()=="SELECT"&&_38.multiple){_35=[];_3c=_38.options;for(i=0;i<_3c.length;i++){opt=_3c[i];if(opt.selected){_35.push(opt.value);}}if(!_35.length){_35=null;}}return _35;}},append:function(_3d){return this.addContent(_3d,"last");},appendTo:function(_3e){return this._placeMultiple(_3e,"last");},prepend:function(_3f){return this.addContent(_3f,"first");},prependTo:function(_40){return this._placeMultiple(_40,"first");},after:function(_41){return this.addContent(_41,"after");},insertAfter:function(_42){return this._placeMultiple(_42,"after");},before:function(_43){return this.addContent(_43,"before");},insertBefore:function(_44){return this._placeMultiple(_44,"before");},remove:dojo.NodeList.prototype.orphan,wrap:function(_45){if(this[0]){_45=_28(_45,this[0]);for(var i=0,_46;_46=this[i];i++){var _47=this._cloneNode(_45);if(_46.parentNode){_46.parentNode.replaceChild(_47,_46);}var _48=_26(_47);_48.appendChild(_46);}}return this;},wrapAll:function(_49){if(this[0]){_49=_28(_49,this[0]);this[0].parentNode.replaceChild(_49,this[0]);var _4a=_26(_49);for(var i=0,_4b;_4b=this[i];i++){_4a.appendChild(_4b);}}return this;},wrapInner:function(_4c){if(this[0]){_4c=_28(_4c,this[0]);for(var i=0;i<this.length;i++){var _4d=this._cloneNode(_4c);this._wrap(dojo._toArray(this[i].childNodes),null,this._NodeListCtor).wrapAll(_4d);}}return this;},replaceWith:function(_4e){_4e=this._normalize(_4e,this[0]);for(var i=0,_4f;_4f=this[i];i++){this._place(_4e,_4f,"before",i>0);_4f.parentNode.removeChild(_4f);}return this;},replaceAll:function(_50){var nl=dojo.query(_50);var _51=this._normalize(this,this[0]);for(var i=0,_52;_52=nl[i];i++){this._place(_51,_52,"before",i>0);_52.parentNode.removeChild(_52);}return this;},clone:function(){var ary=[];for(var i=0;i<this.length;i++){ary.push(this._cloneNode(this[i]));}return this._wrap(ary,this,this._NodeListCtor);}});if(!dojo.NodeList.prototype.html){dojo.NodeList.prototype.html=dojo.NodeList.prototype.innerHTML;}})();}if(!dojo._hasResource["dojo.NodeList-traverse"]){dojo._hasResource["dojo.NodeList-traverse"]=true;dojo.provide("dojo.NodeList-traverse");dojo.extend(dojo.NodeList,{_buildArrayFromCallback:function(_53){var ary=[];for(var i=0;i<this.length;i++){var _54=_53.call(this[i],this[i],ary);if(_54){ary=ary.concat(_54);}}return ary;},_filterQueryResult:function(_55,_56){var _57=dojo.filter(_55,function(_58){return dojo.query(_56,_58.parentNode).indexOf(_58)!=-1;});var _59=this._wrap(_57);return _59;},_getUniqueAsNodeList:function(_5a){var ary=[];for(var i=0,_5b;_5b=_5a[i];i++){if(_5b.nodeType==1&&dojo.indexOf(ary,_5b)==-1){ary.push(_5b);}}return this._wrap(ary,null,this._NodeListCtor);},_getUniqueNodeListWithParent:function(_5c,_5d){var ary=this._getUniqueAsNodeList(_5c);ary=(_5d?this._filterQueryResult(ary,_5d):ary);return ary._stash(this);},_getRelatedUniqueNodes:function(_5e,_5f){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_5f),_5e);},children:function(_60){return this._getRelatedUniqueNodes(_60,function(_61,ary){return dojo._toArray(_61.childNodes);});},closest:function(_62){var _63=this;return this._getRelatedUniqueNodes(_62,function(_64,ary){do{if(_63._filterQueryResult([_64],_62).length){return _64;}}while((_64=_64.parentNode)&&_64.nodeType==1);return null;});},parent:function(_65){return this._getRelatedUniqueNodes(_65,function(_66,ary){return _66.parentNode;});},parents:function(_67){return this._getRelatedUniqueNodes(_67,function(_68,ary){var _69=[];while(_68.parentNode){_68=_68.parentNode;_69.push(_68);}return _69;});},siblings:function(_6a){return this._getRelatedUniqueNodes(_6a,function(_6b,ary){var _6c=[];var _6d=(_6b.parentNode&&_6b.parentNode.childNodes);for(var i=0;i<_6d.length;i++){if(_6d[i]!=_6b){_6c.push(_6d[i]);}}return _6c;});},next:function(_6e){return this._getRelatedUniqueNodes(_6e,function(_6f,ary){var _70=_6f.nextSibling;while(_70&&_70.nodeType!=1){_70=_70.nextSibling;}return _70;});},nextAll:function(_71){return this._getRelatedUniqueNodes(_71,function(_72,ary){var _73=[];var _74=_72;while((_74=_74.nextSibling)){if(_74.nodeType==1){_73.push(_74);}}return _73;});},prev:function(_75){return this._getRelatedUniqueNodes(_75,function(_76,ary){var _77=_76.previousSibling;while(_77&&_77.nodeType!=1){_77=_77.previousSibling;}return _77;});},prevAll:function(_78){return this._getRelatedUniqueNodes(_78,function(_79,ary){var _7a=[];var _7b=_79;while((_7b=_7b.previousSibling)){if(_7b.nodeType==1){_7a.push(_7b);}}return _7a;});},andSelf:function(){return this.concat(this._parent);},first:function(){return this._wrap(((this[0]&&[this[0]])||[]),this);},last:function(){return this._wrap((this.length?[this[this.length-1]]:[]),this);},even:function(){return this.filter(function(_7c,i){return i%2!=0;});},odd:function(){return this.filter(function(_7d,i){return i%2==0;});}});}if(!dojo._hasResource["wsgc.js.SearchController"]){dojo._hasResource["wsgc.js.SearchController"]=true;dojo.provide("wsgc.js.SearchController");dojo.declare("wsgc.js.SearchController",null,{constructor:function(_7e,_7f){var _80,_81;if(_7e){this.searchField=_7e;}else{_81=dojo.byId("search-field");if(_81){this.searchField=_81;}}if(location.href.indexOf("https:")===0){_80=WSI.config.secureAppUrl;}else{_80=WSI.config.appUrl;}this.viewset=dojo.byId("type-ahead-viewset").value;if(!_80){_80="/";}this.searchUrl=_80+this.searchUrl;this.resultsUrl=_80+this.resultsUrl;this._searchResultsCache=[];this.currentResultSet=[];this.createSearchResultsDiv(_7f);this._setupLocalStorage();this._registerSearchEvents();if(this.searchField.value===""){this.displayHistoricalSearchTerms();}},MIN_CHARS:2,SEARCH_HISTORY_LIMIT:3,pause:200,_searchResultsCache:null,_ajaxSearcRequest:null,currentSearchTerm:"",currentResultSet:null,searchUrl:"services/typeahead/",searchUrlSuffix:"*/index.json",resultsUrl:"search/results.html?words=",searchResults:null,inlineSearchHeader:null,searchField:null,timeouts:null,xhrimeout:1500,highlightedTerm:-1,viewset:null,_registerSearchEvents:function(){var _82=this.searchField,_83=dojo.byId("searchform");if(_82){dojo.connect(_82,"onkeyup",this,function(evt){var _84=evt.keyCode,_85=evt.ctlKey,_86=evt.shiftKey;if((_84===38||_84===40)&&!(_85||_86)){this.highlightTerm(_84);}else{if(_84===27&&!(_85||_86)){this.searchField.value=this.currentSearchTerm;this.hideSearchResults();}else{if(_84===13&&!(_85||_86)){this.hideSearchResults();}else{this.setCurrentSearchTerm(evt.currentTarget.value);this.primeTimeout();}}}});dojo.connect(_82,"onfocus",this,this.displayHistoricalSearchTerms);dojo.connect(_82,"onblur",this,this.hideSearchResults);}if(_83){dojo.connect(_83,"submit",this,function(evt){this.stashHistoricalSearchTerm(this.searchField.value);this.cancelSearchRequest();});}},displaySearchResults:function(_87,_88,_89){_89=_89?_89:"Search Suggestions";if(dojo.isArray(_87)&&_87.length>0){var ul=document.createElement("ul"),_8a=document.createElement("li"),_8b=document.createElement("a"),li,a,_8c,_8d;_8b.href=this.resultsUrl;for(var i=0,len=_87.length;i<len;i++){_87[i]=_87[i].replace(/<[^>]+>/g,"");li=_8a.cloneNode(true);a=_8b.cloneNode(true);if(dojo.trim(_88)!==""){a.innerHTML=_87[i].replace(_88,"<span>"+_88+"</span>");}else{a.innerHTML=_87[i];}a.href=a.href+encodeURIComponent(_87[i]);li.appendChild(a);ul.appendChild(li);}_8d=this.searchResults;_8c=dojo.query("ul",_8d);if(_8c.length>0){_8c=_8c[0];_8c.parentNode.replaceChild(ul,_8c);}else{_8d.appendChild(ul);}this.inlineSearchHeader.innerHTML=_89;dojo.removeClass(_8d,"hide");this.highlightedTerm=-1;this.currentResultSet=_87;}else{this.hideSearchResults();}},displayHistoricalSearchTerms:function(){var _8e=dojo.fromJson(this.getLocalStorage("recentSearches")||"[]");if(_8e.length){this.displaySearchResults(_8e,"","Recent Searches");}},createSearchResultsDiv:function(_8f,_90){if(_8f){this.searchResults=_8f;}else{var _91=dojo.byId("inlineSearchResults"),_92;if(_91){this.searchResults=_91;}else{var _93=document.createElement("div");dojo.attr(_93,{id:"searchResults"});dojo.addClass(_93,"hide");this.searchField.parentNode.appendChild(_93);this.searchResults=_93;}}this.inlineSearchHeader=typeof (_90)!=="undefined"?_90:dojo.query(".inlineSearchHeader")[0];dojo.connect(this.searchResults,"onclick",this,this.searchResultClick);},hideSearchResults:function(){var _94=this;setTimeout(function(){dojo.addClass(_94.searchResults,"hide");dojo.query("ul",_94.searchResults).forEach("item.parentNode.removeChild(item);");},500);_94.currentResultSet=[];_94.highlightedTerm=-1;},queueSearch:function(){var _95={handleAs:"json",load:this.searchCallback,timeout:this.xhrimeout,searchTerm:this.currentSearchTerm,context:this};_95.url=this.searchUrl+this.viewset+"/"+encodeURIComponent(this.currentSearchTerm.replace(/\./g," "))+this.searchUrlSuffix;dojo.xhrGet(_95);},primeTimeout:function(){this.clearTimeout();if(this.currentSearchTerm.length>=this.MIN_CHARS){if(this._searchResultsCache[this.currentSearchTerm]){this.displaySearchResults(this._searchResultsCache[this.currentSearchTerm],this.currentSearchTerm);}else{var _96=this;this.timeouts=setTimeout(function(){_96.queueSearch();},this.pause);}}else{this.hideSearchResults();}},clearTimeout:function(){if(this.timeouts){clearTimeout(this.timeouts);}},setCurrentSearchTerm:function(_97){this.currentSearchTerm=dojo.trim(_97);},searchCallback:function(_98){if(_98&&_98.results&&this.searchTerm){var _99=_98.results,_9a=this.searchTerm,_9b=this.context;_9b.displaySearchResults(_99,_9a);_9b._searchResultsCache[_9a]=_99;}},highlightTerm:function(_9c){var _9d=this.currentResultSet,_9e=_9d.length,_9f,_a0,_a1,_a2;if(_9e>0){_9f=(_9c===38)?-1:1;_a0=this.highlightedTerm;_a1=_a0+_9f;if(_a1>-1&&_a1<_9e){_a2=dojo.query("li",this.searchResults);if(_a0>-1){dojo.removeClass(_a2[_a0],"highlighted");}dojo.addClass(_a2[_a1],"highlighted");this.searchField.value=_9d[_a1];this.highlightedTerm=_a1;}}},searchResultClick:function(evt){var _a3=evt.target,_a4,_a5;if(_a3.nodeName==="A"){_a5=_a3.innerHTML;_a4=(_a5.indexOf("<span>")>-1);_a5=_a5.replace(/<span>/,"").replace(/<\/span>/,"");this.stashHistoricalSearchTerm(_a5);if(typeof cmCreatePageElementTag==="function"){if(_a4){cmCreatePageElementTag("Type Ahead","Search Interactions");}else{cmCreatePageElementTag("Search history","Search Interactions");}}}},searchResultKeyPress:function(){if(dojo.query(".highlighted",this.searchResults).length){if(typeof cmCreatePageElementTag==="function"){cmCreatePageElementTag("Type Ahead","Search Interactions");}}},stashHistoricalSearchTerm:function(_a6){var _a7=dojo.fromJson(this.getLocalStorage("recentSearches")||"[]"),i,len,_a8=[],obj={},_a9=this.SEARCH_HISTORY_LIMIT;_a7.unshift(_a6.toLowerCase());for(i=0,len=_a7.length;i<len;i++){if(!obj[_a7[i]]){obj[_a7[i]]=true;_a8.push(_a7[i]);}if(_a8.length===_a9){break;}}this.setLocalStorage("recentSearches",dojo.toJson(_a8));},cancelSearchRequest:function(){if(this._ajaxSearcRequest&&typeof this._ajaxSearcRequest.cancel==="function"){this._ajaxSearcRequest.cancel();}},setLocalStorage:function(key,_aa){return null;},getLocalStorage:function(key){return null;},_setupLocalStorage:function(){var _ab,_ac=WSI.config,_ad=(location.protocol==="https:"),_ae,_af;if("localStorage" in window&&window["localStorage"]!==null){this.setLocalStorage=function(key,_b0,_b1){if(typeof key!=="string"||typeof _b0!=="string"){return null;}if(!_b1){if(_ad){dojo.cookie("temp_local",_b0,{domain:_ac.cookieSubDomain,path:"/",expires:365});}else{dojo.cookie("sec_local",_b0,{domain:_ac.cookieSubDomain,path:"/",secure:true,expires:365});}}return window.localStorage.setItem(key,_b0);};this.getLocalStorage=function(key){return window.localStorage.getItem(key);};if(_ad){_ae=dojo.cookie("sec_local");if(_ae){this.setLocalStorage("recentSearches",_ae,true);dojo.cookie("sec_local",null,{domain:_ac.cookieSubDomain,path:"/",secure:true,expires:-1});}}else{_af=dojo.cookie("temp_local");if(_af){this.setLocalStorage("recentSearches",_af,true);dojo.cookie("temp_local",null,{domain:_ac.cookieSubDomain,path:"/",expires:-1});}}}}});}if(!dojo._hasResource["wsgc.common.js.Utils"]){dojo._hasResource["wsgc.common.js.Utils"]=true;dojo.provide("wsgc.common.js.Utils");(function(_b2,_b3){_b2.declare("wsgc.common.js.Utils",null,{getWindowScrollPos:function(){if(typeof window.pageXOffset==="undefined"){var _b4=document.documentElement||document.body.parentNode||document.body;return {x:_b4.scrollLeft,y:_b4.scrollTop};}return {x:window.pageXOffset,y:window.pageYOffset};}});}(dojo));}if(!dojo._hasResource["wsgc.js.UserAgent"]){dojo._hasResource["wsgc.js.UserAgent"]=true;dojo.provide("wsgc.js.UserAgent");(function(_b5,_b6){WSI=window.WSI||{};WSI.isIPad=!!navigator.userAgent.match(/iPad/i);WSI.capabilities=Modernizr;}(dojo));}if(!dojo._hasResource["wsgc.js.Utils"]){dojo._hasResource["wsgc.js.Utils"]=true;dojo.provide("wsgc.js.Utils");(function(_b7,_b8){var _b9={},_ba={},_bb=WSI.innerShiv,_bc=null,_bd=null;_b7.declare("wsgc.js.Utils",[wsgc.common.js.Utils],{constructor:function(_be,_bf){this._savedCartCookie=_be;this._sessionCartCookie=_bf;this._registerSearchFieldEvents();this._registerInputPlaceholders();this._registerPopupNewWindowEvents();this._registerPopulateShippingFromBilling();this._registerChangeShipToEvents();this._registerInterstitialEvents();this._registerViewAllCookieBaker();this._setBasketCount();this._registerMultiSelect();this._setCellHeightByRow();this._footerJOELPopup();this._SMSForm();this._sidebarSMSForm();this._sidebarJOELPopup();this._registerPromotionsSignInEvents();this._registerAosDCPickupEvents();this._registerAsynchronousShopImages();this._emailAFriendPreview();this._registerShopSortBy();this._nuclearFooter();this._bloomReach();this._registerOpenInParentWindowLink();if(_b7.byId("billing-info")){this._reisterBillingSyncOrder();}if(_b7.byId("paymentInformation")){this._scrollToPaymentPageErrors();this._registerSVCApply();this._registerCreditCardFieldEvents();this._registerPlaceOrder();this._registerSVCLRC();this._registerPromoRemove();this._registerPromoApplyEvents();}_b7.query(".forgotPassword").forEach(_b7.hitch(this,function(_c0){_b7.connect(_c0,"onclick",this,"handleForgotPasswordClick");}));var _c1=_b7.byId("mobileEquiv");if(_c1){_b7.connect(_c1,"onclick",this,"handleMobileEquivClick");}var _c2=_b7.byId("cartForm");if(_c2){_b7.connect(_b7.byId("cartForm"),"onsubmit",function(evt){_b7.query(".delete-item").forEach("item.disabled = true");return true;});}_b7.query("#choose-another-category-drop").forEach(function(_c3){_b7.connect(_c3,"onchange",this,function(evt){location.href=evt.currentTarget.value;});});_b7.query(".goBack").forEach(function(_c4){_b7.connect(_c4,"onclick",function(evt){evt.preventDefault();history.back();});});this.handleGuestRegistryPassword();if((typeof bazaarVoiceHost!=="undefined"&&document.referrer.match("^"+bazaarVoiceHost))||document.referrer===""){_b7.query("#recipes .goBack").forEach("item.style.display='none';");}if(_b7.byId("searchresults")){this._searchUtils=new wsgc.js.SearchUtils();}this._updateBannerCookie();_b7.query(".mboxDefault").forEach(function(_c5){if(_b7.style(_c5,"visibility")!=="visible"){_b7.style(_c5,"visibility","visible");}});if(WSI.isEnabled("bvAnswers")&&_b7.exists("WSI.bvAnsCalls")){var _c6=this.callFunctions,_c7=function(){if(window.$BV&&typeof window.$BV.configure==="function"&&typeof window.$BV.ui==="function"){_c6(WSI.bvAnsCalls);}else{setTimeout(_c7,500);}};_c7();}if(WSI.offsiteRequests.length){this._handleOffsiteRequests(WSI.offsiteRequests);WSI.offsiteRequests=[];}},POPUP_DEFAULT_HEIGHT:560,POPUP_DEFAULT_WIDTH:820,POPUP_DEFAULT_RESIZE:1,POPUP_DEFAULT_NAME:"AppPopup",_savedCartCookie:"",_sessionCartCookie:"",MULTI_BUY_CARTURL:"/shoppingcart/style-and-quantity.html",BANNER_COOKIE:"i",_multi_buy_items:null,MULTI_BUY_ERROR:"<p class=\"error\">Please select a product to add to your cart.</p>",formSubmitted:false,_searchController:null,_searchUtils:null,savedCreditCardSelected:false,savedCreditCardInfo:null,viewset:"ecom",placeHolderText:{},_registerAosDCPickupEvents:function(){var _c8=_b7.query(".dcPickupCbx");if(_c8.length===0){return;}var _c9=function(_ca){var _cb=_ca.parentNode.parentNode;_b7.query(".billingAddressUpdate",_cb).forEach("item.checked=false;");_b7.query(".aosDCPickupToggle").addClass("hidden");_b7.query(".dcField",_cb).forEach("dojo.addClass(item, 'hide');");_b7.query(".dcField input[type='text'], .dcField select",_cb).forEach("item.value='';");};var _cc=function(_cd){var _ce=_cd.parentNode.parentNode;_b7.query(".aosDCPickupToggle").removeClass("hidden");_b7.query(".dcField",_ce).forEach("dojo.removeClass(item, 'hide');");_b7.query(".dcField input[type='text'], .dcField select",_ce).forEach("item.value='';");};_c8.forEach(function(_cf){if(_cf.checked){_c9(_cf);}_b7.connect(_cf,"onclick",null,function(evt){var _d0=evt.currentTarget;if(_d0.checked){_c9(_d0);}else{_cc(_d0);}});});},_setBasketCount:function(){var _d1=_b7.cookie(this._sessionCartCookie.toUpperCase());if(typeof _d1=="undefined"){_d1=_b7.cookie(this._savedCartCookie.toUpperCase());}if((typeof _d1=="undefined")||(_d1.split("|").length<4)){return;}var _d2=_d1.split("|")[3];if(_b7.byId("cart-count")){if(_d2!=="0"){_b7.byId("cart-count").innerHTML="<span> : </span>"+_d2;}else{_b7.byId("cart-count").innerHTML="";}}},_registerSearchFieldEvents:function(){var _d3=_b7.byId("search-field"),_d4=_b7.byId("btnSearch"),_d5=(location.protocol==="https:"),_d6=_b7.cookie("sec_local"),_d7=_b7.cookie("temp_local");this._setViewSet();if(_d3&&WSI.searchType!=="google"){if((_d7&&!_d5)||(_d5&&_d6)){this._searchController=new wsgc.js.SearchController();}this.default_search_text=_d3.value;_b7.connect(_d3,"onfocus",this,function(evt){if(evt.currentTarget.value===this.default_search_text){evt.currentTarget.value="";}if(!this._searchController&&this.viewset!=="reg"){this._searchController=new wsgc.js.SearchController();}});_b7.connect(_d3,"onblur",this,function(evt){if(evt.currentTarget.value==""){evt.currentTarget.value=this.default_search_text;}});}if(_d4){_b7.connect(_d4,"click",this,function(evt){var _d8=_b7.byId("searchform"),_d9=_b7.byId("search-field"),_da="&cm_sp=OnsiteSearch-_-GlobalNav-_-Button",_db;evt.preventDefault();if(_d8&&_d8.action&&_d3&&_d3.value&&typeof cmCreateManualLinkClickTag==="function"){_db=_d8.action+"?words="+encodeURIComponent(_d3.value)+_da;cmCreateManualLinkClickTag(_db,"GLOBAL_NAV","SEARCH");}if(_b7.query(".highlighted",this.searchResults).length&&typeof cmCreatePageElementTag==="function"){cmCreatePageElementTag("Search Interactions","Type Ahead");}if(this._searchController){this._searchController.stashHistoricalSearchTerm(_d3.value);}_d8.submit();});}},_registerInterstitialEvents:function(){var _dc=null;_b7.query("form.interstitialForm #btn-edit").forEach(function(_dd){_b7.connect(_dd,"onclick",this,"_handleInterstitialEditClick");},this);_b7.query("form.interstitialForm .btnEditBehavior").forEach(function(_de){_b7.connect(_de,"onclick",this,"_handleInterstitialEditClick");},this);_b7.query("form.interstitialForm .btn-preview").forEach(function(_df){_b7.connect(_df,"onclick",this,"_handleInterstitialPreviewClick");},this);_b7.query("form.interstitialForm #btn-continue").forEach(function(_e0){_b7.connect(_e0,"onclick",this,"_handleInterstitialContinueClick");},this);_b7.query(".interstitialForm .btn-continue-path").forEach(function(_e1){_b7.connect(_e1,"onclick",this,"_handleInterstitialContinueClick");},this);},_registerViewAllCookieBaker:function(){_b7.query(".pagination .view-all").connect("onclick",function(evt){_b7.cookie("viewall","1",{"path":"/"});});_b7.query(".pagination .view-by-page").connect("onclick",function(evt){_b7.cookie("viewall","0",{"expires":-1});});},_registerPopupNewWindowEvents:function(){WSI.Events.delegate("click",".popup",function(evt){_b7.stopEvent(evt);var _e2=_b7.attr(this,"rel");var _e3;var _e4,_e5,_e6,_e7;try{_e3=_b7.fromJson(_e2);_e4=(_e3&&_e3.dim&&_e3.dim.height)?_e3.dim.height:this.POPUP_DEFAULT_HEIGHT;_e5=(_e3&&_e3.dim&&_e3.dim.width)?_e3.dim.width:this.POPUP_DEFAULT_WIDTH;_e6=(_e3&&_e3.dim&&_e3.dim.resize)?_e3.dim.resize:this.POPUP_DEFAULT_RESIZE;_e7=(_e3&&_e3.name)?_e3.name:this.POPUP_DEFAULT_NAME;}catch(e){_e4=this.POPUP_DEFAULT_HEIGHT;_e5=this.POPUP_DEFAULT_WIDTH;_e6=this.POPUP_DEFAULT_RESIZE;_e7=this.POPUP_DEFAULT_NAME;}var _e8="toolbar=no,location=no,directories=no,scrollbars=1,resizable="+_e6+",height="+_e4+",width="+_e5+",screenX=4,screenY=4,top=4,left=4";var win=window.open(this.href,_e7,_e8);if(win&&win.focus){win.focus();}if(_b7.attr(this,"pophref")){evt.href=_b7.attr(this,"pophref");}});WSI.Events.delegate("click",".newWindow",function(evt){_b7.stopEvent(evt);var _e9=_b7.attr(this,"rel");var _ea;var _eb;try{_ea=_b7.fromJson(_e9);_eb=(_ea&&_ea.name)?_ea.name:this.POPUP_DEFAULT_NAME;}catch(e){_eb=this.POPUP_DEFAULT_NAME;}var _ec="toolbar=yes,location=yes,directories=no,scrollbars=1,resizable=1";var win=window.open(this.href,_eb,_ec);if(win&&win.focus){win.focus();}});_b7.query(".close").forEach(function(_ed){_b7.connect(_ed,"onclick",function(evt){evt.preventDefault();evt.stopPropagation();window.close();});});_b7.query(".closeAndContinue").forEach(function(_ee){_b7.connect(_ee,"onclick",this,"_newParentWindow");},this);_b7.query(".driveParent").forEach(function(_ef){_b7.connect(_ef,"onclick",this,"_redirectParent");},this);_b7.query(".redirectParent").forEach(function(_f0){_b7.connect(_f0,"onclick",this,"_redirectParentNoClose");},this);WSI.Events.delegate("click",".print, .printButton",function(evt){var _f1=_b7.query("img[data-async-src]"),_f2=_f1.length;evt.preventDefault();if(_f2==0){window.print();}else{_f1.forEach(function(e,i){e.setAttribute("src",e.getAttribute("data-async-src"));_b7.connect(e,"onload",function(){_f2--;if(_f2==0){window.print();}});e.removeAttribute("data-async-src");});}});_b7.query(".rollover").forEach(function(_f3){_b7.connect(_f3,"onmouseover",function(evt){var _f4=evt.currentTarget.src.replace("_off","_on");evt.currentTarget.src=_f4;});_b7.connect(_f3,"onmouseout",function(evt){var _f5=evt.currentTarget.src.replace("_on","_off");evt.currentTarget.src=_f5;});_b7.connect(_f3,"onfocus",function(evt){var _f6=evt.currentTarget.src.replace("_off","_on");evt.currentTarget.src=_f6;});_b7.connect(_f3,"onblur",function(evt){var _f7=evt.currentTarget.src.replace("_on","_off");evt.currentTarget.src=_f7;});});_b7.query(".delete-item").forEach(function(_f8){_b7.connect(_f8,"onclick",function(evt){_b7.stopEvent(evt);var _f9=_f8.name;document.cartForm[_f9].value="true";_b7.byId("cartForm").submit();});});_b7.query(".checkoutButton").forEach(function(_fa){_b7.connect(_fa,"onclick",function(evt){_b7.stopEvent(evt);_b7.byId("checkout").value="true";_b7.byId("chkmode").value=_b7.hasClass(evt.currentTarget,"expressButton")?"xpress":"normal";_b7.byId("cartForm").submit();});});},_registerChangeShipToEvents:function(){var _fb=_b7.byId("shipToChanged");if(!_fb){return;}opener.location="/shoppingcart/";opener.location.reload(true);window.close();},_registerSVCApply:function(){var _fc=_b7.byId("applysvc");if(!_fc){return;}_b7.connect(_fc,"onclick",function(evt){var _fd=_b7.byId("svcCard.svcCardNumber");var _fe=_b7.byId("svcCard.pinNumber");if(_fd&&_fd.value===""){if(_fe&&_fe.value===""){var _ff=_b7.byId("applyPromoBlock");if(_ff){var _100=_b7.byId("promoCode");if(_100.value!==""){_b7.byId("promoApply").value="yes";}}var _101=_b7.byId("svcApply");_101.value="yes";return;}}var _101=_b7.byId("svcApply");_101.value="yes";});},_reisterBillingSyncOrder:function(){var _102=_b7.byId("billingSubmit");if(!_102){return;}_b7.connect(_102,"onclick",this,function(evt){if(this.formSubmitted){_b7.stopEvent(evt);}else{this.formSubmitted=true;}});},_registerPlaceOrder:function(){var _103=_b7.byId("placeOrder"),_104=_b7.byId("buttonClick");if(!_103){return;}_b7.connect(_103,"onclick",this,function(evt){if(this.formSubmitted){evt.preventDefault();}else{this.formSubmitted=true;}});_b7.query("#action-buttons input[type='image']").connect("onclick",null,function(evt){if(_104){_104.value=evt.target.id;}});},_scrollToPaymentPageErrors:function(){var _105=_b7.byId("paymentInformation");if(!_105){return;}this.deferredPayment();var _106=_b7.byId("promotionsErrors");var _107=_b7.byId("svcError");var _108=_b7.byId("discountsApplied");var _109=_b7.byId("ccError");if(_106){if(_b7.query(".promotions-block").length>0){_b7.query(".promotions-block")[0].scrollIntoView(true);}}else{if(_107&&_b7.trim(_107.innerHTML)!==""){if(_b7.query(".gift-cards-and-help").length>0){_b7.query(".gift-cards-and-help")[0].scrollIntoView(true);}}else{if(_109&&_b7.trim(_109.innerHTML)!==""){if(_b7.query(".payment-information-block").length>0){_b7.query(".payment-information-block")[0].scrollIntoView(true);}}else{if(_108&&_b7.trim(_108.innerHTML)!==""){if(_b7.query(".gift-cards-and-help").length>0){_b7.query(".gift-cards-and-help")[0].scrollIntoView(true);}}}}}var _10a=_b7.byId("creditCard.payType");if(_10a.value==8){_b7.attr("creditCard.cardExpMonth","disabled",true);_b7.attr("creditCard.cardExpYear","disabled",true);_b7.attr("creditCard.cardVerificationNumber","disabled",true);}},_registerCreditCardFieldEvents:function(){var _10b=_b7.byId("creditCard.payType"),_10c=_b7.byId("icAvailable");if(!_10b){return;}_b7.connect(_10b,"onchange",_b7.hitch(this,function(evt){var _10d=evt.target.value,_10e=_b7.byId("creditCard.cardExpMonth"),_10f=_b7.byId("creditCard.cardExpYear"),_110=_b7.byId("creditCard.cardVerificationNumber"),_111=_b7.byId("allowZeroExp"),_112=_b7.byId("creditCard.cardNumber");if(this.savedCreditCardSelected&&_10d!=="scc"){this.savedCreditCardSelected=false;_b7.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_b7.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_10e.value="";_10f.value="";_b7.attr(_110,"disabled",false);_110.value="";_b7.query("#edit-cc-link").forEach("dojo.addClass(item, 'hide');");}if(_10d==="11"&&_10c){this._displayCCFieldsForInstantCredit();}else{_b7.query(".sccHide, .icHide").forEach("dojo.removeClass(item, 'hide');");_b7.query(".sccDisable, .icDisable").forEach("dojo.attr(item, 'disabled', false);");_b7.attr(_110,"disabled",false);_111.value="N";_b7.removeClass(_110,"hide");_10e.options[0].text="Month";_10f.options[0].text="Year";_112.value="";if(_10d==="scc"){this.displaySavedCreditCard();}}this.deferredPayment();}));if(_10b.value==="11"&&_10c||(!_b7.byId("ccError")&&_10c&&_b7.query("option[value='11']",_b7.byId("creditCard.payType")).length>0)){_10b.value="11";this._displayCCFieldsForInstantCredit();}else{if(_10b.value==="scc"||(!_b7.byId("ccError")&&_b7.query("option[value='scc']",_b7.byId("creditCard.payType")).length>0)){this.displaySavedCreditCard();}}},displaySavedCreditCard:function(){var _113,_114,ccvn,_115;if(!this.savedCreditCardInfo){_113=_b7.byId("savedCCJSON");if(!_113){return;}try{this.savedCreditCardInfo=_b7.fromJson(_113.value);}catch(e){this.savedCreditCardInfo="";}if(this.savedCreditCardInfo===""){return;}}_114=this.savedCreditCardInfo;this.savedCreditCardSelected=true;_b7.byId("creditCard.payType").value="scc";_b7.byId("creditCard.cardExpMonth").value=_114.expireMonth;_b7.byId("creditCard.cardExpYear").value=_114.expireYear;WSI.formV=new wsgc.js.InlineValidation();WSI.formV.hideAllCreditCardErrorMsgs();ccvn=_b7.byId("creditCard.cardVerificationNumber");_115=_b7.query(".ccvn");if(_114.validate==="Y"||_114.cardType==="8"){var _116=_b7.byId("allowZeroExp");if(_116){_116.value="Y";}}else{_115.forEach("dojo.removeClass(item, 'sccHide');");ccvn.value="";}_b7.query(".sccHide").forEach("dojo.addClass(item, 'hide');");_b7.query(".sccDisable").forEach("dojo.attr(item, 'disabled', true);");_b7.query("#edit-cc-link").forEach("dojo.removeClass(item, 'hide');");},_displayCCFieldsForInstantCredit:function(){var _117=_b7.byId("creditCard.cardExpMonth"),_118=_b7.byId("creditCard.cardExpYear"),_119=_b7.byId("creditCard.cardVerificationNumber"),_11a=_b7.byId("allowZeroExp"),_11b=_b7.byId("creditCard.cardNumber");_b7.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_b7.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_117.selectedIndex=0;_117.options[0].text="**";_b7.attr(_117,"disabled",true);_118.selectedIndex=0;_118.options[0].text="****";_b7.attr(_118,"disabled",true);_b7.removeClass(_119,"hide");_b7.attr(_119,"disabled",true);_11b.value="****************";_11a.value="Y";_b7.query(".icHide").forEach("dojo.addClass(item, 'hide');");_b7.query(".icDisable").forEach("dojo.attr(item, 'disabled', true);");WSI.formV=new wsgc.js.InlineValidation();WSI.formV.hideAllCreditCardErrorMsgs();WSI.formV.hideAllErrorMsgs(_b7.byId("creditCard.cardVerificationNumber"));},_registerPopulateShippingFromBilling:function(){var _11c=_b7.byId("applyBillingAddtoShipping");if(_11c&&_b7.hasClass(_11c,"billToShipCopy")){_b7.connect(_11c,"onclick",function(evt){var _11d=evt.target.checked;if(_11d){_b7.attr("shiptoAddress.fullName",{"value":_b7.byId("billtoAddress.fullName").value,"disabled":"disabled"});_b7.attr("shiptoAddress.addrLine1",{"value":_b7.byId("billtoAddress.addrLine1").value,"disabled":"disabled"});_b7.attr("shiptoAddress.addrLine2",{"value":_b7.byId("billtoAddress.addrLine2").value,"disabled":"disabled"});_b7.attr("shiptoAddress.city",{"value":_b7.byId("billtoAddress.city").value,"disabled":"disabled"});document.getElementById("shiptoAddress.state").value=document.getElementById("billtoAddress.state").value;_b7.byId("shiptoAddress.state").selectedIndex=_b7.byId("billtoAddress.state").selectedIndex;_b7.attr("shiptoAddress.state","disabled","true");_b7.attr("shiptoAddress.zip",{"value":_b7.byId("billtoAddress.zip").value,"disabled":"disabled"});_b7.attr("shiptoAddress.dayPhone",{"value":_b7.byId("billtoAddress.dayPhone").value,"disabled":"disabled"});_b7.attr("shiptoAddress.eveningPhone",{"value":_b7.byId("billtoAddress.eveningPhone").value,"disabled":"disabled"});_b7.query("#ship-account-info input, #ship-account-info select").addClass("disabled");}else{_b7.query("#ship-account-info input, #ship-account-info select").forEach(function(elem){elem.removeAttribute("disabled");});_b7.query("#ship-account-info input, #ship-account-info select").removeClass("disabled");}});if(_b7.attr(_11c,"checked")===true){_b7.query("#ship-account-info input, #ship-account-info select").attr("disabled","disabled").addClass("disabled");}}},handleForgotPasswordClick:function(evt){_b7.stopEvent(evt);var form=_b7.byId("loginForm");if(form){form.action=WSI.config.secureAppUrl+"account/password-request-confirmation.html";form.submit();}},handleMobileEquivClick:function(evt){if(WSI.config){_b7.cookie(WSI.config.sitePref,"mobile",{domain:WSI.config.cookieSubDomain,path:"/"});}},_handleInterstitialEditClick:function(evt){_b7.stopEvent(evt);evt.preventDefault();_b7.byId("isEditMode").value="1";this._postInterstitialForm();},_handleInterstitialPreviewClick:function(evt){if(_b7.byId("isPreview")){_b7.byId("isPreview").value="1";}if(evt&&evt.currentTarget&&evt.currentTarget.id){var _11e=evt.currentTarget.id.substr(10);if(_b7.byId("previewIndex")){_b7.byId("previewIndex").value=_11e;}}_b7.stopEvent(evt);this._postInterstitialForm();},_handleInterstitialContinueClick:function(evt){_b7.stopEvent(evt);_b7.byId("isEditMode").value="0";this._postInterstitialForm();},_postInterstitialForm:function(){if(_b7.query(".interstitialForm").length>0){var form=_b7.query(".interstitialForm")[0];form.submit();}},_forwardToExternalSite:function(win,url){if(win){win.close();}var _11f=window.open(url);},_registerSVCLRC:function(){var _120="";_b7.query(".removeSVCLRCButton").forEach(function(_121){_b7.connect(_121,"onclick",function(evt){if(!_b7.attr(evt.currentTarget,"svcnumber")){return false;}_120=_b7.attr(evt.currentTarget,"svcnumber");_b7.byId("removeSvcLrc").value=_120;return true;});});},_registerPromoRemove:function(){var _122="";_b7.query(".removePromoButton").forEach(function(_123){_b7.connect(_123,"onclick",function(evt){if(!_b7.attr(evt.currentTarget,"promoCode")){return false;}_122=_b7.attr(evt.currentTarget,"promoCode");_b7.byId("releasePromo").value=_122;return true;});});},_newParentWindow:function(evt){var win;var url=evt.currentTarget.href;if(_b7.isFF){try{if(_b7.exists("window.opener.WSI.utils._forwardToExternalSite")){window.opener.WSI.utils._forwardToExternalSite(window,url);}else{win=window.open(url);window.close();}}catch(e){win=window.open(url);window.close();}}else{win=window.open(url);window.close();}},_redirectParent:function(evt){evt.preventDefault();evt.stopPropagation();var url=evt.currentTarget.href;if(_b7.exists("window.opener")){window.opener.location.href=url;if(_b7.exists("window.opener.focus")){window.opener.focus();}}else{var win=window.open(url);window.close();}window.close();},_redirectParentNoClose:function(evt){evt.preventDefault();evt.stopPropagation();var url=evt.currentTarget.href;if(_b7.exists("window.opener")){window.opener.location.href=url;}else{var win=window.open(url);}},deferredPayment:function(){var _124=_b7.byId("creditCard.payType").value;var _125=_b7.byId("deferredPayment");if(_125){var _126=_b7.byId("deferPayments");var _127=_126.value.split(",");var _128=_b7.byId("creditCard.payType").options;var _129=_b7.byId("deferredCardType");for(var i=0;i<_127.length;i++){if(_124===_127[i]){for(var j=0;j<_128.length;j++){if(_128[j].value==_124){_129.innerHTML=_128[j].text;}}_b7.style(_125,{"display":"block"});break;}else{_b7.style(_125,{"display":"none"});}}}},_registerMultiSelect:function(){this._multi_buy_items=[];if(_b7.byId("productGroupIds")&&_b7.byId("productGroupIds").value!==""){this._multi_buy_items=_b7.byId("productGroupIds").value.split(",");}if(_b7.query("form[name='multiSelect']").length>0){_b7.query(".pagination a").connect("onclick",this,function(evt){var _12a=_b7.query("form[name='multiSelect']")[0];var _12b=evt.currentTarget.href;evt.preventDefault();this._writeMultiBuyItemsToField();_12a.action=_12b;_12a.submit();});_b7.query(".btn-add-selected a").connect("onclick",this,function(evt){var _12c=_b7.query("form[name='multiSelect']")[0];var _12d=this.MULTI_BUY_CARTURL;evt.preventDefault();this._writeMultiBuyItemsToField();if(_b7.byId("productGroupIds")&&_b7.trim(_b7.byId("productGroupIds").value)!==""){_12c.action=_12d;_12c.submit();}else{if(_b7.byId("pageErrorHook")){_b7.byId("pageErrorHook").innerHTML=this.MULTI_BUY_ERROR;window.scroll(0,0);}}});_b7.query(".muliBuyCheckbox").connect("onclick",this,"_handleMutliBuyCheckboxClick");}},_writeMultiBuyItemsToField:function(){if(_b7.byId("productGroupIds")&&this._multi_buy_items){_b7.byId("productGroupIds").value=this._multi_buy_items.join(",");}},_handleMutliBuyCheckboxClick:function(evt){var _12e=evt.currentTarget;var _12f=evt.currentTarget.value;if(_12e.checked){if(_b7.indexOf(this._multi_buy_items,_12f)===-1){this._multi_buy_items.push(_12f);}}else{if(_b7.indexOf(this._multi_buy_items,_12f)>-1){this._multi_buy_items.splice(_b7.indexOf(this._multi_buy_items,_12f),1);}}},_setCellHeightByRow:function(){if(!(_b7.byId("searchresults")||_b7.byId("one-shipment"))){if(_b7.query("ul.product-list").length>0){var _130=_b7.query("ul.product-list");if(_130.length>0){var _131=_b7.query("div.subcat-list",_130[0]).length>0;if(!_131){_b7.forEach(_130,function(row){var _132=0;var _133=_b7.query("li",row);_133.forEach(function(el){_132=_b7.marginBox(el).h>_132?_b7.marginBox(el).h:_132;});_133.forEach(function(el){_b7.marginBox(el,{h:_132});el.style.borderBottomWidth="1px";});});}else{_b7.forEach(_130,function(row){var _134=0;var _135=_b7.query("li div.product-name a",row);_135.forEach(function(el){_134=_b7.marginBox(el).h>_134?_b7.marginBox(el).h:_134;});_135.forEach(function(el){var _136=_134-_b7.marginBox(el).h+"px";_b7.style(el,"marginTop",_136);});var _137=0;var _138=_b7.query("div.subcat-list",row);_138.forEach(function(el){_137=_b7.marginBox(el).h>_137?_b7.marginBox(el).h:_137;});_138.forEach(function(el){_b7.marginBox(el,{h:_137});});});}}}}},_footerJOELPopup:function(){var _139=_b7.byId("joinEmail");if(_139){_b7.connect(_139,"onsubmit",function(evt){evt.preventDefault();evt.stopPropagation();var url=document.forms.joinEmail.action+"?email="+document.forms.joinEmail.email.value;var _13a="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_13a);win.focus();});}},_SMSForm:function(){var _13b=_b7.byId("joinSMS");if(_13b){_b7.connect(_13b,"onsubmit",function(evt){_b7.stopEvent(evt);var url=_13b.action+"?mobileNumber="+encodeURIComponent(_13b.mobileNumber.value),_13c="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4",win=window.open(url,"joinsms",_13c);win.focus();});}},_sidebarSMSForm:function(){var _13d=_b7.byId("joinSMS2");if(_13d){_b7.connect(_13d,"onsubmit",function(evt){_b7.stopEvent(evt);var url=_13d.action+"?mobileNumber="+encodeURIComponent(_13d.mobileNumber.value),_13e="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4",win=window.open(url,"joinsms",_13e);win.focus();});}},_sidebarJOELPopup:function(){var _13f=_b7.byId("joinEmail2");if(_13f){_b7.connect(_13f,"onsubmit",function(evt){evt.preventDefault();evt.stopPropagation();var url=document.forms.joinEmail2.action+"?email="+document.forms.joinEmail2.email.value;var _140="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_140);win.focus();});}},_registerInputPlaceholders:function(){var _141=[_b7.byId("footer-email-field"),_b7.byId("sidebar-email-field"),_b7.byId("footer-sms-field"),_b7.byId("sidebar-sms-field")],_142=function(_143,_144){_144.placeHolderText[_143.id]=_143.value;_b7.connect(_143,"onfocus",_144,function(evt){var _145=evt.currentTarget;if(_145.value===this.placeHolderText[_143.id]){_145.value="";}});_b7.connect(_143,"onblur",_144,function(evt){var _146=evt.currentTarget;if(_146.value===""){_146.value=this.placeHolderText[_143.id];}});},i,len;for(i=0,len=_141.length;i<len;i++){if(_141[i]){_142(_141[i],this);}}},_emailAFriendPreview:function(){var _147=_b7.byId("emailAFriend");if(!_147){return;}var _148=_b7.byId("btn-preview");_b7.connect(_148,"onclick",function(evt){_b7.byId("preview").value="true";});},_registerPromotionsSignInEvents:function(){var _149=_b7.byId("apply-tax-exemption");if(!_149){return;}var _14a=_b7.byId("yesexemption");if(_b7.byId("yesexemption").checked){_b7.removeClass("termsBlock","hide");}var _14b=_b7.byId("noexemption");_b7.connect(_14a,"onclick",function(evt){_b7.byId("termsBlock").className="";_b7.query(".message").forEach("item.className='hide';");});_b7.connect(_14b,"onclick",function(evt){_b7.byId("termsBlock").className="hide";_b7.query(".message").forEach("item.className='hide';");});_b7.connect(_b7.byId("accepttoc"),"onclick",function(evt){_b7.query(".message").forEach("item.className='hide';");});if(_b7.byId("yesexemption").checked&&_b7.byId("accepttoc").checked){_b7.query(".message").forEach("item.className='hide';");}if(_b7.byId("noexemption").checked){_b7.query(".message").forEach("item.className='hide';");_b7.query("#termsBlock").forEach("item.className='hide';");}},_registerShopSortBy:function(){if(!_b7.byId("facetedNavContainer")){_b7.query("#sortBy").connect("onchange",null,function(evt){var _14c={best:"Best Match",priceAsc:"Price Low to High",priceDesc:"Price High to Low",ratingAsc:"Rating Low to High",ratingDesc:"Rating High to Low","new":"New",bestSeller:"Best Seller"};if(typeof cmCreatePageElementTag==="function"){var _14d=window.location.pathname.substr(0,8).match("/search/")?"Search Interactions":"Shop Interactions";cmCreatePageElementTag("Sort_"+_14c[evt.currentTarget.value],_14d);}if(_b7.byId("regListForm")){_b7.byId("regListForm").submit();}else{if(_b7.byId("sortByForm")){_b7.byId("sortByForm").submit();}}});}},_registerPromoApplyEvents:function(){var _14e=_b7.byId("applyPromoBlock");if(_14e){var _14f=_b7.byId("applyPromo");if(_14f){_b7.connect(_14f,"onclick",function(evt){_b7.byId("promoApply").value="yes";});}}else{return;}},bvRatingsDisplayed:function(_150,_151,_152,_153,_154){var _155=_b7.byId("BVReviewsContainer");var _156=_b7.byId("BVSecondaryCustomerRatings");var _157=_b7.byId("BVSVPLinkContainer");var _158=_b7.byId("reviews-controls");var _159=0;if(_150>0){if(_155){_b7.removeClass("BVReviewsContainer","hide");_155.style.display="block";}if(_156){_155.style.display="block";}if(_157){_157.style.display="block";}if(_158){_158.style.display="block";}var _15a;if(!cmCategoryId||cmCategoryId===""){if(_b7.byId("pipCategoryId")){_15a=_b7.byId("pipCategoryId").value;}else{_15a=" ";}if(_b7.byId("registrantid")&&(_b7.byId("registrantid").value!="")){_15a="R:"+_15a;}else{_15a="E:"+_15a;}}else{_15a=cmCategoryId;}var _15b="PRODUCT";var type;if(_154.length>7){type=_154.substring(0,7);if(type.toUpperCase()==="RECIPE."){_15b="RECIPE";}}if(typeof cmCreateConversionEventTag==="function"&&_b7.query(".read-reviews a").length&&typeof WSI.groupName!=="undefined"){_b7.query(".read-reviews a").connect("onclick",function(evt){var _15c=WSI.groupName;var _15d=_154.toUpperCase()+"-_-"+_15c.toUpperCase()+"-_-"+_15a.toUpperCase();if(_15b==="RECIPE"){_15d="-_--_--_--_-"+_15c.toUpperCase();}cmCreateConversionEventTag(_15b+" REVIEWS: READ A REVIEW","2",_15b+" REVIEWS","0",_15d);});}if(typeof cmCreateConversionEventTag==="function"&&_155&&typeof WSI.groupName!=="undefined"){_b7.query("a[name*='ReadAllReviews']",_155).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _15e=WSI.groupName;var _15f=_154.toUpperCase()+"-_-"+_15e.toUpperCase()+"-_-"+_15a.toUpperCase();if(_15b==="RECIPE"){_15f="-_--_--_--_-"+_15e.toUpperCase();}cmCreateConversionEventTag(_15b+" REVIEWS: USER REVIEWS","2",_15b+" REVIEWS","0",_15f);if(_b7.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_155&&typeof WSI.groupName!=="undefined"){_b7.query("a[name*='AddPositiveFeedback']",_155).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _160=WSI.groupName;var _161=_154.toUpperCase()+"-_-"+_160.toUpperCase()+"-_-"+_15a.toUpperCase();if(_15b==="RECIPE"){_161="-_--_--_--_-"+_160.toUpperCase();}cmCreateConversionEventTag(_15b+" REVIEWS: HELPFUL REVIEW","2",_15b+" REVIEWS","0",_161);});});}if(typeof cmCreateConversionEventTag==="function"&&_155&&typeof WSI.groupName!=="undefined"){_b7.query("a[name*='AddNegativeFeedback']",_155).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _162=WSI.groupName;var _163=_154.toUpperCase()+"-_-"+_162.toUpperCase()+"-_-"+_15a.toUpperCase();if(_15b==="RECIPE"){_163="-_--_--_--_-"+_162.toUpperCase();}cmCreateConversionEventTag(_15b+" REVIEWS: UNHELPFUL REVIEW","2",_15b+" REVIEWS","0",_163);});});}if(typeof cmCreateConversionEventTag==="function"&&_155&&typeof WSI.groupName!=="undefined"){_b7.query(".BVRRSocialBookmarkingSharingLinkFacebook",_155).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _164=WSI.groupName;var _165=_154.toUpperCase()+"-_-"+_164.toUpperCase()+"-_-"+_15a.toUpperCase()+"-_-FACEBOOK";if(_15b==="RECIPE"){_165="-_--_--_-FACEBOOK-_-"+_164.toUpperCase();}cmCreateConversionEventTag(_15b+" REVIEWS: SHARED REVIEW","2",_15b+" REVIEWS","0",_165);if(_b7.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_155&&typeof WSI.groupName!=="undefined"){_b7.query(".BVRRSocialBookmarkingSharingLinkDigg",_155).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _166=WSI.groupName;var _167=_154.toUpperCase()+"-_-"+_166.toUpperCase()+"-_-"+_15a.toUpperCase()+"-_-DIGG";if(_15b==="RECIPE"){_167="-_--_--_-DIGG-_-"+_166.toUpperCase();}cmCreateConversionEventTag(_15b+" REVIEWS: SHARED REVIEW","2",_15b+" REVIEWS","0",_167);if(_b7.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_155&&typeof WSI.groupName!=="undefined"){_b7.query(".BVRRSocialBookmarkingSharingLinkDelIcioUs",_155).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _168=WSI.groupName;var _169=_154.toUpperCase()+"-_-"+_168.toUpperCase()+"-_-"+_15a.toUpperCase()+"-_-DELICIOUS";if(_15b==="RECIPE"){_169="-_--_--_-DELICIOUS-_-"+_168.toUpperCase();}cmCreateConversionEventTag(_15b+" REVIEWS: SHARED REVIEW","2",_15b+" REVIEWS","0",_169);if(_b7.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_155&&typeof WSI.groupName!=="undefined"){_b7.query(".BVRRSocialBookmarkingSharingLinkTwitter",_155).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _16a=WSI.groupName;var _16b=_154.toUpperCase()+"-_-"+_16a.toUpperCase()+"-_-"+_15a.toUpperCase()+"-_-TWITTER";if(_15b==="RECIPE"){_16b="-_--_--_-TWITTER-_-"+_16a.toUpperCase();}cmCreateConversionEventTag(_15b+" REVIEWS: SHARED REVIEW","2",_15b+" REVIEWS","0",_16b);if(_b7.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_158&&typeof WSI.groupName!=="undefined"){_b7.query("#all-reviews-container a",_158).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){var _16c=WSI.groupName;var _16d=_154.toUpperCase()+"-_-"+_16c.toUpperCase()+"-_-"+_15a.toUpperCase();if(_15b==="RECIPE"){_16d="-_--_--_--_-"+_16c.toUpperCase();}cmCreateConversionEventTag(_15b+" REVIEWS: READ ALL REVIEWS","2",_15b+" REVIEWS","0",_16d);});});}if(typeof cmCreateConversionEventTag==="function"&&_b7.byId("BVCustomerRatings")&&typeof WSI.groupName!=="undefined"){_b7.query("a[name*='TrackingTag_Rating_Summary']",_b7.byId("BVCustomerRatings")).forEach(function(item){_b7.connect(item,"onclick",null,function(evt){_b7.byId("bv-tabs").scrollIntoView();var _16e=_b7.query(".tab.bv-rr")[0],_16f;if(document.createEvent){_16f=document.createEvent("HTMLEvents");_16f.initEvent("click",true,true);return !_16e.dispatchEvent(_16f);}else{_16f=document.createEventObject();return _16e.fireEvent("onclick",_16f);}});});}}else{if(_157){_158.style.display="none";}}},bvCheckDisplayLoadState:function(){if(!BVisLoaded){var page=_b7.byId("BVFrame").src;page="http://reviews.williams-sonoma.com/logging?page="+escape(page);_b7.byId("BVReviewsContainer").innerHTML="<!-- Review retrieval timed out -->";}},bvCheckPagesLoadState:function(){if(!BVisLoaded){_b7.byId("BVSubmissionFrame").src="";_b7.byId("BVSubmissionContainer").innerHTML="Review Submission Currently Unavailable";}},_registerAsynchronousShopImages:function(){var _170=_b7.query("img[data-async-src]");this.asyncImages=[];this.currentImage=[0,null];if(_170.length){_170.forEach(function(e){this.asyncImages.push([_b7.coords(e,true).y,e]);},this);_bd=_bd||_b7.connect(window,"onscroll",this,this._loadAsynchronousShopImages);this._loadAsynchronousShopImages();}},_loadAsynchronousShopImages:function(){bottomThreshold=(document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||window.innerHeight)*2;while(this.asyncImages.length&&(this.currentImage[0]<bottomThreshold)){this.currentImage=this.asyncImages.shift();if(_b7.attr(this.currentImage[1],"data-async-src")){this.currentImage[1].setAttribute("src",_b7.attr(this.currentImage[1],"data-async-src"));this.currentImage[1].removeAttribute("data-async-src");}}},_handleOffsiteRequests:function(_171){_171=_171||[];for(var i=0,len=_171.length;i<len;++i){var _172=_171[i],type=_172[0],url=_172[1],_173=_172[2]||{};switch(type){case "css":this.loadStylesheet(url,_173);break;case "js":this.loadScript(url);break;}}},loadScript:function(url,_174){if(this.isScriptLoaded(url)){if(_174&&_b7.isFunction(_174)){_174();}return;}var _175=new _b7._Url(document.location.href),_176=new _b7._Url(url),self=this,_177;if(_175.scheme===_176.scheme&&_175.host===_176.host&&_175.port===_176.port){_b7.xhrGet({url:url,load:function(_178){self._xhrScript(_178);self.setScriptLoaded(url);if(_174&&_b7.isFunction(_174)){_174();}}});}else{this.docHead=this.docHead||_b7.query("head")[0];_177=_b7.create("script",{type:"text/javascript"});_177[_b7.isIE?"onreadystatechange":"onload"]=function(){if(!_b7.isIE||this.readyState==="loaded"||this.readyState==="complete"){self.setScriptLoaded(url);if(_174&&_b7.isFunction(_174)){_174();}}};_177.src=url;_b7.place(_177,this.docHead);}},loadStylesheet:function(url,_179,_17a){if(this.isStylesheetLoaded(url)){if(_17a&&_b7.isFunction(_17a)){_17a();}return;}var _17b=document.createElement("link"),self=this;_b7.attr(_17b,_b7.mixin(_179||{},{rel:"stylesheet",type:"text/css",href:url,onload:function(){if(_17a&&_b7.isFunction(_17a)){_17a();}}}));this.docHead=this.docHead||_b7.query("head")[0];this.docHead.appendChild(_17b);self.setStylesheetLoaded(url);},setStylesheetLoaded:function(urls){if(_b7.isArray(urls)){for(var i=0,len=urls.length;i<len;++i){_b9[urls[i]]=true;}}else{_b9[urls]=true;}},setScriptLoaded:function(urls){if(_b7.isArray(urls)){for(var i=0,len=urls.length;i<len;++i){_ba[urls[i]]=true;}}else{_ba[urls]=true;}},isStylesheetLoaded:function(url){return _b9[url];},isScriptLoaded:function(url){return _ba[url];},_xhrScript:function(_17c){if(_17c!==""){var _17d,_17e;_17d=_b7.query("head")[0];_17e=document.createElement("script");_17e.type="text/javascript";_17e.text=_17c;_17d.appendChild(_17e);}},_setViewSet:function(){var _17f=_b7.byId("type-ahead-viewset");if(_17f&&_17f.value&&_17f.value!=="ecom"){this.viewset=_17f.value;}},handleGuestRegistryPassword:function(){var _180=_b7.byId("guestPassword");if(_180){_b7.connect(_180,"onfocus",function(evt){_b7.query("#securityLevelPassword").forEach("item.checked='checked';");});}},loadFragment:function(_181,_182){if(_b7.isObject(_181)){_182=_181;_181="GET";}var href=WSI.utils.stripBaseUrlWhenHrefHasAnchor(_182.url);function load(data){data=data.replace(/<script[^>]+type=(['"])text\/javascript\1[^>]*>([\s\S]*?)<\/script>/gim,function(_183,_184,src){if(_b7.trim(src)){(window.execScript||function(src){window["eval"].call(window,src);})(src);}return "";});if(_182.load){_182.load(data);}_b7.publish("/fragment/loaded",[{href:href,data:data}]);};if(href.length&&href.charAt(0)==="#"){try{href=href.substr(1);var _185=_b7.byId(href);if(_185.nodeName==="SCRIPT"&&_b7.attr(_185,"type")==="text/html"){var _186=arguments.callee.templates||(arguments.callee.templates={});_186[href]=_186[href]||WSI.utils.template(_b7.trim(_185.innerHTML));_185=_186[href]();}else{_185=_185.innerHTML;}load(_185);}catch(error){if(_182.error){_182.error(error);}}}else{_b7.xhr(_181,_b7.mixin({},_182,{load:load,error:function(_187){if(_182.error){_182.error(_187);}}}));}},connect:function(obj,_188,_189,_18a,_18b){var _18c=_188.replace(/^on/,"");if(WSI.earlyEventQueues&&WSI.earlyEventQueues[_18c]&&obj){var _18d=WSI.earlyEventQueues[_18c][obj];if(_18d&&_18d!=="drained"){var ctx=_189||obj;var _18e=typeof _18a==="string"?ctx[_18a]:_18a;while(_18d.length){var evt=_18d.shift();_18e.call(ctx,_18b?evt:_b7.fixEvent(evt));}WSI.earlyEventQueues[_18c][obj]="drained";}}return _b7.connect.apply(_b7,arguments);},stopEarlyEventCapture:function(){for(var _18f in (WSI.earlyEventQueues||{})){if(document.detachEvent){document.detachEvent("on"+_18f,WSI.capturingEventHandler);}else{document.removeEventListener(_18f,WSI.capturingEventHandler,true);}}WSI.earlyEventQueues={};_b7.query(".captureEarlyEvents").removeClass("earlyEventsCaptured").removeClass("captureEarlyEvents");},templateSettings:{evaluate:/\[%([\s\S]+?)%\]/g,interpolate:/\[%=([\s\S]+?)%\]/g},template:function(str,data){var c=this.templateSettings;var tmpl="var __p=[],print=function(){__p.push.apply(__p,arguments);};"+"with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(_190,code){return "',"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+",'";}).replace(c.evaluate||null,function(_191,code){return "');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('";}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var func=new Function("obj",tmpl);return data?func(data):func;},_bloomReach:function(){var _192=_b7.byId("br-more-products-widget"),_193=_b7.byId("br-related-searches-widget");if(_192){_b7.connect(_192,"onclick",this,function(evt){var _194=evt.target,_195;if(_b7.hasClass(_194.parentNode,"br-more-widget-view")){evt.preventDefault();_b7.query(".br-more-widget",_192).forEach("item.style.display='none';");_195=_b7.attr(_194,"href").replace(/^[^#]*/,"");if(_195){_b7.query(_195,_192).forEach("dojo.removeClass(item, 'hide');");}if(_193){this._equalizeHeight(_192,_193);}}else{if(_b7.hasClass(_194.parentNode,"br-more-widget-popup-close")){evt.preventDefault();_b7.query(".br-more-widget-popup",_192).forEach("dojo.addClass(item, 'hide');");_b7.query(".br-more-widget",_192).forEach("item.style.display='block';");if(_193){this._equalizeHeight(_192,_193);}}}});}if(_192&&_193){this._equalizeHeight(_192,_193);}},_equalizeHeight:function(_196,_197){var _198;if(_196&&_197){_196.style.height="auto";_197.style.height="auto";_198=Math.max(_b7.marginBox(_196).h,_b7.marginBox(_197).h)-1;_b7.marginBox(_196,{h:_198});_b7.marginBox(_197,{h:_198});}},registerAvsOverrideElementTagHandler:function(_199,_19a,_19b){if((_199||_199==="")&&_19a&&_19b){_b7.query("form[name="+_199+"]").connect("submit",function(evt){_19a=_b7.isArray(_19a)?_19a:[_19a];_b7.some(_19a,function(_19c){var _19d=_b7.byId(_19c+".overideAddressVerification");if(_19d&&_19d.checked){cmCreatePageElementTag(_19b,"AVS",null,null,null,"");return true;}});});}},_updateBannerCookie:function(){var _19e;if(_b7.exists("WSI.bannerCookie")){_19e=WSI.bannerCookie;if(_19e.cookie&&_19e.value){_b7.cookie(_19e.cookie,_19e.value,{path:"/",domain:_19e.domain});}}},swapClasses:function(_19f,_1a0,_1a1){if(_19f.nodeName){_19f=_b7.NodeList(_19f);}_19f.filter("."+_1a0).removeClass(_1a0).addClass(_1a1);return _19f;},closest:function(_1a2,_1a3){var node=_1a3;do{if(_b7._filterQueryResult([node],_1a2).length){return node;}}while((node=node.parentNode)&&node.nodeType===1);},callFunctions:function(_1a4){if(_b7.isArray(_1a4)){for(var i=0,len=_1a4.length;i<len;i++){if(typeof _1a4[i]==="function"){_1a4[i]();}}}},initXHRDialog:function initXHRDialog(_1a5,_1a6){var _1a7,_1a8,i,len,_1a9;_b7.query(".XHRForm").forEach(function(item){_b7.connect(item,"onsubmit",null,function(evt){var _1aa="get",_1ab=10000;_b7.stopEvent(evt);if(this.submitted){return;}else{this.submitted=true;}if(item.method.toUpperCase()==="POST"){_1aa="post";}_b7.xhr(_1aa,{timeout:_1ab,form:item,handleAs:"text",load:function(data,_1ac){var _1ad=WSI.config,_1ae,_1af=_1ac.xhr;_1ae=_1af.getResponseHeader("Location");if(_1ae){window.location.href=_1ae;}else{if(data&&data.length){_1a5.containerNode.innerHTML=data;initXHRDialog(_1a5,_1a6);}else{_1a5.close();}}},error:function(_1b0,_1b1){this.submitted=false;_b7.place("<ul class='error'><li>A communication error occurred - Please try gain.</li></ul>",_1a5.containerNode,"first");}});});});if(_1a6){_1a6=_b7.isArray(_1a6)?_1a6:[_1a6];for(i=0,len=_1a6.length;i<len;i++){_1a7=_1a6[i];if(typeof _1a7==="function"){_1a7(this);}}}_b7.query(".closeButton").forEach(function(item){_b7.connect(item,"onclick",_1a5,function(evt){_b7.stopEvent(evt);this.close();});});},addDialogLoadHandler:function addDialogLoadHandler(_1b2,_1b3){WSI.dialogLoadHandlers=WSI.dialogLoadHandlers||{};WSI.dialogLoadHandlers[_1b2]=_1b3;},removeDialogLoadHandler:function removeDialogLoadHandler(_1b4){if(WSI.dialogLoadHandlers){delete WSI.dialogLoadHandlers[_1b4];}},smoothScrollTo:function(_1b5){if(_bc!=null){return;}_bc=_1b5;if(_1b5){var _1b6=function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}return -c/2*((--t)*(t-2)-1)+b;};var _1b7=function(elem){var _1b8=0;if(elem.offsetParent){do{_1b8+=elem.offsetTop;}while(elem=elem.offsetParent);}return _1b8;};var _1b9=_1b7(_1b5);var _1ba=window.pageYOffset||document.documentElement.scrollTop;var _1bb=_1b9-_1ba;var _1bc=300;var _1bd=15;var wait=_1bc/_1bd;var _1be=0;var _1bf=setInterval(function(){var cur=_1b6(_1be,_1ba,_1bb,_1bd);window.scrollTo(0,cur);if(_1be===_1bd){clearInterval(_1bf);_bc=null;}_1be++;},wait);}},getBrowserScrollbarWidth:function(){return WSI.config.scrollbarWidth||(WSI.config.scrollbarWidth=(function(){var _1c0=_b7.place("<div style=\"position:absolute;top:0;left:0;visibility:hidden;width:200px;height:150px;overflow:hidden;margin-left:-9999px;\"/>",_b7.body());var _1c1=_b7.place("<p style=\"width:100%;height:200px;\"/>",_1c0);var _1c2=_1c1.offsetWidth;_b7.style(_1c0,"overflow","scroll");var _1c3=_1c1.offsetWidth;if(_1c2===_1c3){_1c3=_1c0.clientWidth;}_b7.destroy(_1c0);return _1c2-_1c3;})());},forEach:function(obj,_1c4,_1c5){var _1c6=Array.prototype.forEach,_1c7={},_1c5=_1c5||window,_1c8=Object.prototype.hasOwnProperty;if(obj==null){return;}if(_1c6&&obj.forEach===_1c6){obj.forEach(_1c4,_1c5);}else{if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(i in obj&&_1c4.call(_1c5,obj[i],i,obj)===_1c7){return;}}}else{for(var key in obj){if(_1c8.call(obj,key)){if(_1c4.call(_1c5,obj[key],key,obj)===_1c7){return;}}}}}},textareaMaxLength:function(_1c9){var _1c9=_1c9||"textarea[maxlength]";WSI.Events.delegate("keypress",_1c9,function(evt){var $el=_b7.query(evt.target),_1ca=_b7.keys,_1cb=parseInt($el.attr("maxlength")[0],10),_1cc=$el.attr("value")[0].length;if(_1cc>=_1cb){switch(evt.keyCode){case _1ca.BACKSPACE:case _1ca.DELETE:case _1ca.UP_ARROW:case _1ca.DOWN_ARROW:case _1ca.RIGHT_ARROW:case _1ca.LEFT_ARROW:break;default:_b7.stopEvent(evt);break;}}});(function(){try{_b7.query(_1c9).forEach(function(el){var $el=_b7.query(el),_1cd=parseInt($el.attr("maxlength"),10),_1ce=$el.val();textLength=_1ce.length;if(textLength>_1cd){$el.val(_1ce.substr(0,_1cd));}});}catch(e){}setTimeout(arguments.callee,500);})();},stripBaseUrlWhenHrefHasAnchor:function(href){var _1cf=href.match(/#.*$/);return (_1cf!==null)?_1cf[0]:href;},onlyNumericInput:function(_1d0){_b7.query(_1d0).connect("keydown",_b7.hitch(this,this.keyHandler));_b7.query(_1d0).connect("keypress",_b7.hitch(this,this.keyHandler));},nonChar:false,keyHandler:function(e){var evt=(e)?e:window.event,_1d1,p={type:evt.type,charCode:evt.charCode,keyCode:evt.keyCode,which:evt.which,keyChar:String.fromCharCode(evt.charCode)};if(evt.type=="keydown"){_1d1=evt.keyCode;switch(_1d1){case _b7.keys.BACKSPACE:case _b7.keys.SPACE:case _b7.keys.DELETE:case _b7.keys.ENTER:case _b7.keys.TAB:case _b7.keys.LEFT_ARROW:case _b7.keys.RIGHT_ARROW:this.nonChar=true;break;default:this.nonChar=false;}}else{if(this.nonChar){return;}_1d1=(evt.charCode)?evt.charCode:evt.keyCode;if(_1d1<48||_1d1>57){_b7.stopEvent(e);}}},_nuclearFooter:function(){_b7.query(".nso-title span").forEach(function(elem){_b7.connect(elem,"onclick",function(evt){var _1d2="nso-"+elem.id;if(_b7.style(_1d2,"visibility")=="visible"){_b7.style(_1d2,"visibility","hidden");_b7.byId(elem.id).innerHTML="[+]";}else{_b7.query(".nso-brand").forEach(function(_1d3){_b7.style(_1d3,"visibility","hidden");});_b7.query(".nso-title span").forEach(function(_1d4){_b7.byId(_1d4.id).innerHTML="[+]";});_b7.style(_1d2,"visibility","visible");_b7.byId(elem.id).innerHTML="[&ndash;]";}});});},_registerOpenInParentWindowLink:function(){_b7.query(".openInParentWindow").forEach(function(elem){_b7.connect(elem,"click",function(evt){_b7.stopEvent(evt);(window.opener||window).location.href=_b7.attr(elem,"href");if(window.opener){window.close();}});});},stripBaseUrlWhenHrefHasAnchor:function(href){var _1d5=href.match(/#.*$/);return (_1d5!==null)?_1d5[0]:href;},toDom:function(src){if(_b7.isIE<=8){_bb.innerHTML=src;if(_bb.childNodes.length===1){return _bb.firstChild;}else{var frag=document.createDocumentFragment();while(_bb.childNodes.length){frag.appendChild(_bb.childNodes.item(0));}return frag;}}else{return _b7._toDom(src);}}});}(dojo));dojo.provide("wsgc.nls.wsgc_en-us");dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.en_us");dijit.nls.loading.en_us={"loadingState":"Loading...","errorState":"Sorry, an error occurred"};}if(!dojo._hasResource["wsgc.js.Dataset"]){dojo._hasResource["wsgc.js.Dataset"]=true;(function(dojo,_1d6){var _1d7="data-";function _1d8(_1d9){return /^\s*{.*}\s*$/.test(_1d9)?dojo.fromJson(_1d9):(_1d9||{});};function _1da(attr){return _1d7+attr.toLowerCase();};WSI.dataset=dojo.mixin(dojo.provide("wsgc.js.Dataset"),{get:function get(elem,attr,_1db){if(_1db){var name=_1da(attr),_1dc={};while(elem){if(dojo.hasAttr(elem,name)){_1dc=dojo.mixin(get(elem,attr),_1dc);}elem=elem.parentNode;}return _1dc;}else{return _1d8(elem.getAttribute(_1da(attr))||"{}");}},set:function(elem,attr,_1dd){elem.setAttribute(_1da(attr),dojo.isObject(_1dd)?dojo.toJson(_1dd):_1dd);},"delete":function(elem,attr){elem.removeAttribute(_1da(attr));},keys:function(elem){var keys=[],_1de=elem.attributes;for(var i=0,len=_1de.length;i<len;++i){var name=_1de[i].name;if(!name.indexOf(_1d7)){keys.push(name.substr(_1d7.length));}}return keys;},mixin:function(elem,attr,obj){this.set(elem,attr,dojo.mixin(this.get(elem,attr),obj));}});}(dojo));}if(!dojo._hasResource["wsgc.js.IntlUtils"]){dojo._hasResource["wsgc.js.IntlUtils"]=true;dojo.provide("wsgc.js.IntlUtils");(function(dojo,_1df){dojo.declare("wsgc.js.IntlUtils",null,{constructor:function(){this._registerCheckoutEvent();this._registerDeleteCountryEventHandler(dojo.query(".deleteCountry"));},_registerCheckoutEvent:function(){WSI.Events.delegate("click",".checkoutButtonIntl",function(evt){dojo.stopEvent(evt);dojo.byId("checkout").value="true";dojo.byId("cartForm").submit();});},_registerDeleteCountryEventHandler:function(_1e0){_1e0.connect("click",function(evt){dojo.stopEvent(evt);dojo.xhrGet({url:"/international/setcountry.html",content:{country:"US",currency:"USD"},preventCache:true,load:function(){window.location.reload();}});if(typeof (cmCreateConversionEventTag)!=="undefined"){cmCreateConversionEventTag("Change Country","1","International");}});},interceptAddToBasket:function(evt){var _1e1=WSI.utils.closest(".section",evt.currentTarget);if(dojo.query(".skuErrorHook",_1e1).length!==dojo.query(".skuErrorHook:empty",_1e1).length){dojo.stopEvent(evt);dojo.byId("pageErrorHook").focus();window.scrollTo(0,0);}},flagBasedCurrencySelector:function(_1e2){var _1e3=WSI.config.country||"US",_1e4=dojo.query(".currencyCode",_1e2.elem)[0],_1e5={};for(var i=0,len=_1e4.options.length;i<len;++i){_1e5[_1e4.options[i].value]=i;}dojo.addClass(dojo.query(".flagMap a."+_1e3,_1e2.elem)[0].parentNode,"selected-country");_1e4.selectedIndex=_1e5[WSI.config.currency||"USD"];dojo.query(".flagMap a",_1e2.elem).connect("click",function(evt){dojo.query(".selected-country").removeClass("selected-country");_1e3=this.getAttribute("data-countryCode");var _1e6=this.getAttribute("data-defaultCurrency");dojo.addClass(this.parentNode,"selected-country");_1e4.selectedIndex=_1e5[_1e6];dojo.stopEvent(evt);});dojo.connect(dojo.byId("intlSetCountryDialogSubmit"),"click",function(evt){dojo.stopEvent(evt);if(_1e3!=""&&_1e4.value){dojo.xhrGet({url:"/international/ineligible-items.html",content:{country:_1e3,currency:_1e4.value},preventCache:true,load:function(){window.location.reload();}});if(typeof (cmCreateConversionEventTag)!=="undefined"){cmCreateConversionEventTag("Change Country","1","International");}}else{dojo.query("ul.error",_1e2.elem).removeClass("hide");dojo.query("ul.error li.countryMessage",_1e2.elem).toggleClass("hide",countrySelect.selectedIndex!=0);dojo.query("ul.error li.currencyMessage",_1e2.elem).toggleClass("hide",!!_1e4.value);}});this._registerDeleteCountryEventHandler(dojo.query("#deleteCountry",_1e2.elem));WSI.utils.swapClasses(dojo.query(".deferredLayover",_1e2.elem),"deferredLayover","layover");dojo.query(".layover",_1e2.elem).connect("click",function(evt){WSI.layoverC.openLayover(evt);});}});}(dojo));}if(!dojo._hasResource["dojox.xml.parser"]){dojo._hasResource["dojox.xml.parser"]=true;dojo.provide("dojox.xml.parser");dojox.xml.parser.parse=function(str,_1e7){var _1e8=dojo.doc;var doc;_1e7=_1e7||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _1e9=new DOMParser();doc=_1e9.parseFromString(str,_1e7);var de=doc.documentElement;var _1ea="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_1ea){var _1eb=de.getElementsByTagNameNS(_1ea,"sourcetext")[0];if(_1eb){_1eb=_1eb.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_1eb);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_1e8.implementation&&_1e8.implementation.createDocument){if(str&&dojo.trim(str)&&_1e8.createElement){var tmp=_1e8.createElement("xml");tmp.innerHTML=str;var _1ec=_1e8.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_1ed){_1ec.importNode(_1ed,true);});return _1ec;}else{return _1e8.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _1ee=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_1ee.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _1ef="";if(node){dojo.forEach(node.childNodes,function(_1f0){switch(_1f0.nodeType){case 1:case 5:_1ef+=dojox.xml.parser.textContent(_1f0);break;case 3:case 2:case 4:_1ef+=_1f0.nodeValue;}});}return _1ef;}};dojox.xml.parser.replaceChildren=function(node,_1f1){var _1f2=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_1f3){_1f2.push(_1f3);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_1f2,dojo.destroy);if(!dojo.isArray(_1f1)){node.appendChild(_1f1);}else{dojo.forEach(_1f1,function(_1f4){node.appendChild(_1f4);});}};dojox.xml.parser.removeChildren=function(node){var _1f5=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _1f5;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};}if(!dojo._hasResource["dojox.embed.Flash"]){dojo._hasResource["dojox.embed.Flash"]=true;dojo.provide("dojox.embed.Flash");(function(){var _1f6,_1f7;var _1f8=7;var _1f9="dojox-embed-flash-",_1fa=0;var _1fb={expressInstall:false,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"always",allowNetworking:"all",style:null,redirect:null};function prep(_1fc){_1fc=dojo.delegate(_1fb,_1fc);if(!("path" in _1fc)){return null;}if(!("id" in _1fc)){_1fc.id=(_1f9+_1fa++);}return _1fc;};if(dojo.isIE){_1f6=function(_1fd){_1fd=prep(_1fd);if(!_1fd){return null;}var p;var path=_1fd.path;if(_1fd.vars){var a=[];for(p in _1fd.vars){a.push(p+"="+_1fd.vars[p]);}_1fd.params.FlashVars=a.join("&");delete _1fd.vars;}var s="<object id=\""+_1fd.id+"\" "+"classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" "+"width=\""+_1fd.width+"\" "+"height=\""+_1fd.height+"\""+((_1fd.style)?" style=\""+_1fd.style+"\"":"")+">"+"<param name=\"movie\" value=\""+path+"\" />";if(_1fd.params){for(p in _1fd.params){s+="<param name=\""+p+"\" value=\""+_1fd.params[p]+"\" />";}}s+="</object>";return {id:_1fd.id,markup:s};};_1f7=(function(){var _1fe=10,_1ff=null;while(!_1ff&&_1fe>6){try{_1ff=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_1fe--);}catch(e){}}if(_1ff){var v=_1ff.GetVariable("$version").split(" ")[1].split(",");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}else{_1f6=function(_200){_200=prep(_200);if(!_200){return null;}var p;var path=_200.path;if(_200.vars){var a=[];for(p in _200.vars){a.push(p+"="+_200.vars[p]);}_200.params.flashVars=a.join("&");delete _200.vars;}var s="<embed type=\"application/x-shockwave-flash\" "+"src=\""+path+"\" "+"id=\""+_200.id+"\" "+"width=\""+_200.width+"\" "+"height=\""+_200.height+"\""+((_200.style)?" style=\""+_200.style+"\" ":"")+"swLiveConnect=\""+_200.swLiveConnect+"\" "+"allowScriptAccess=\""+_200.params.allowScriptAccess+"\" "+"allowNetworking=\""+_200.params.allowNetworking+"\" "+"pluginspage=\""+window.location.protocol+"//www.adobe.com/go/getflashplayer\" ";if(_200.params){for(p in _200.params){s+=" "+p+"=\""+_200.params[p]+"\"";}}s+=" />";return {id:_200.id,markup:s};};_1f7=(function(){var _201=navigator.plugins["Shockwave Flash"];if(_201&&_201.description){var v=_201.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}dojox.embed.Flash=function(_202,node){if(location.href.toLowerCase().indexOf("file://")>-1){throw new Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");}this.available=dojox.embed.Flash.available;this.minimumVersion=_202.minimumVersion||_1f8;this.id=null;this.movie=null;this.domNode=null;if(node){node=dojo.byId(node);}setTimeout(dojo.hitch(this,function(){if(_202.expressInstall||this.available&&this.available>=this.minimumVersion){if(_202&&node){this.init(_202,node);}else{this.onError("embed.Flash was not provided with the proper arguments.");}}else{if(!this.available){this.onError("Flash is not installed.");}else{this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);}dojo.query("img",node).forEach("dojo.style(item, 'display', 'inline')");}}),100);};dojo.extend(dojox.embed.Flash,{onReady:function(_203){},onLoad:function(_204){},onError:function(msg){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie);},init:function(_205,node){this.destroy();node=dojo.byId(node||this.domNode);if(!node){throw new Error("dojox.embed.Flash: no domNode reference has been passed.");}var p=0,_206=false;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;if(dojox.embed.Flash.initialized){this.id=dojox.embed.Flash.place(_205,node);this.domNode=node;setTimeout(dojo.hitch(this,function(){this.movie=this.byId(this.id,_205.doc);this.onReady(this.movie);this._poller=setInterval(dojo.hitch(this,function(){try{p=this.movie.PercentLoaded();}catch(e){}if(p==100){this._onload();}else{if(p==0&&this._pollCount++>this._pollMax){clearInterval(this._poller);}}}),this.pollTime);}),1);}else{dojo.query("img",node).forEach("dojo.style(item, 'display', 'inline')");}},_destroy:function(){try{this.domNode.removeChild(this.movie);}catch(e){}this.id=this.movie=this.domNode=null;},destroy:function(){if(!this.movie){return;}var test=dojo.delegate({id:true,movie:true,domNode:true,onReady:true,onLoad:true});for(var p in this){if(!test[p]){delete this[p];}}if(this._poller){dojo.connect(this,"onLoad",this,"_destroy");}else{this._destroy();}},byId:function(_207,doc){doc=doc||document;if(doc.embeds[_207]){return doc.embeds[_207];}if(doc[_207]){return doc[_207];}if(window[_207]){return window[_207];}if(document[_207]){return document[_207];}return null;}});dojo.mixin(dojox.embed.Flash,{minSupported:8,available:_1f7.major,supported:(_1f7.major>=_1f7.required),minimumRequired:_1f7.required,version:_1f7,initialized:false,onInitialize:function(){dojox.embed.Flash.initialized=true;},__ie_markup__:function(_208){return _1f6(_208);},proxy:function(obj,_209){dojo.forEach((dojo.isArray(_209)?_209:[_209]),function(item){this[item]=dojo.hitch(this,function(){return (function(){return eval(this.movie.CallFunction("<invoke name=\""+item+"\" returntype=\"javascript\">"+"<arguments>"+dojo.map(arguments,function(item){return __flash__toXML(item);}).join("")+"</arguments>"+"</invoke>"));}).apply(this,arguments||[]);});},obj);}});dojox.embed.Flash.place=function(_20a,node){var o=_1f6(_20a);node=dojo.byId(node);if(!node){node=dojo.doc.createElement("div");node.id=o.id+"-container";dojo.body().appendChild(node);}if(o){node.innerHTML=o.markup;return o.id;}return null;};dojox.embed.Flash.onInitialize();})();}if(!dojo._hasResource["wsgc.js.DeferredLayover"]){dojo._hasResource["wsgc.js.DeferredLayover"]=true;dojo.provide("wsgc.js.DeferredLayover");dojo.declare("wsgc.js.DeferredLayover",null,{constructor:function(_20b){function _20c(o){if(document.attachEvent){var t={};for(var i in o){t[i]=o[i];}o=t;}return o;};var _20d=dojo.query(".deferredLayover");var _20e=[];_20d.forEach(function(_20f){var _210=dojo.connect(_20f,"click",function(evt){dojo.stopEvent(evt);dojo.forEach(_20e,function(_211){dojo.disconnect(_211);});_20e=[];if(WSI.layoverC){WSI.utils.swapClasses(_20d,"deferredLayover","layover").connect("click",WSI.layoverC,WSI.layoverC.openLayover);WSI.layoverC.openLayover(evt);}else{evt=_20c(evt);evt.currentTarget_=evt.currentTarget;WSI.utils.loadScript(_20b,function(){setTimeout(function(){WSI.utils.swapClasses(_20d,"deferredLayover","layover");WSI.layoverC=new wsgc.js.LayoverBase();WSI.layoverC.openLayover(evt);});});}});_20e.push(_210);});}});}if(!dojo._hasResource["wsgc.js.Selector"]){dojo._hasResource["wsgc.js.Selector"]=true;dojo.provide("wsgc.js.Selector");(function(dojo,_212){var _213=_214(),_215="_sel_",_216=0,_217="parentNode",_218="previousSibling",_219={},_21a={">":_21b(_217,true)," ":_21b(_217,false),"+":_21b(_218,true),"~":_21b(_218,false)};dojo.mixin(wsgc.js.Selector,{is:function is(_21c,_21d,_21e){var _21f=this.parse(_21d),_220,i,l;for(i=0,l=_21f.length;i<l;++i){_220=_21e?[[" ",_21e]].concat(_21f[i]):_21f[i];if(this.test(_221([_21c]),_220,_220.length-1)){return true;}}return false;},test:function test(_222,_223,_224){var _225=_223[_224][0],_226=_223[_224][1],_227=_21a[_225],_228,_229;while((_229=_222())){if(_226===_229||_226==="*"||(typeof _226==="string"&&dojo._filterQueryResult([_229],_226).length)){_228=_227(_229);if(_224===0||this.test(_228,_223,_224-1)){return _229;}if(_222.axis===_228.axis&&!_228.singleton){break;}}}},parse:function parse(_22a){var _22b=[],_22c=_219[_22a]||[],_22d,_22e;if(_22c.length){return _22c;}while((_22d=_213.exec(_22a))){_22e=(_22d[1]&&dojo.trim(_22d[1]))||" ";if(_22e.charAt(0)===","){_22c.push(_22b);_22b=[[dojo.trim(_22e.substr(1))||" ",_22d[2]]];}else{_22b.push([_22e,_22d[2]]);}}if(_22b.length){_22c.push(_22b);}return _219[_22a]=_22c;},closest:function closest(_22f,_230){var _231=this.parse(_22f),_232,_233,_234,_235,_236;for(var i=0,len=_231.length;i<len;i++){_236=_231[i];_232=true;_233=_21a[" "](_230);_234=function(){if(_232){_232=false;return _230;}return _233();};_235=this.test(_234,_236,_236.length-1);if(_235){return _235;}}},idFor:function idFor(elem){if(!elem.id){do{var id=_215+_216++;}while(dojo.byId(id));elem.id=id;}return elem.id;}});function _221(_237){var i=0;return function arrayIterator(){return _237[i++];};};function _21b(axis,_238){return function nextIteratorGenerator(_239){var _23a=true,_23b=function _23b(){_23b.axis=axis;_23b.singleton=_238;if(!_238||_23a){_23a=false;while((_239=_239[axis])&&_239.nodeType!==1){}return _239;}};return _23b;};};function _214(){return /((?:\s+(?![>+~,])|\s*(?:,\s*)?[>+~]\s*|\s*,\s*|^\s*))((?:\*|[a-z_\\][a-z0-9_\\|-]*)?(?:(?:[.#][a-z_\\][a-z0-9_\\|-]*|(?::not\(\s*(?:\*|[.#]?[a-z_\\][a-z0-9_\\|-]*|\[\s*[a-z_\\][a-z0-9_\\|-]*\s*(?:[~|^$*]?=\s*(?:'[^']*'|"[^"]*")\s*)?\]|::?[a-z_\\][a-z0-9_\\|-]*(?:\((?:'[^']*'|"[^"]*"|[^)])*\))?)\s*\))|::?[a-z_\\][a-z0-9_\\|-]*(?:\((?:'[^']*'|"[^"]*"|[^)])*\))?|\[\s*[a-z_\\][a-z0-9_\\|-]*\s*(?:[~|^$*]?=\s*(?:'[^']*'|"[^"]*")\s*)?\])*))/ig;};}(dojo));}if(!dojo._hasResource["wsgc.js.Events"]){dojo._hasResource["wsgc.js.Events"]=true;dojo.provide("wsgc.js.Events");(function(dojo,_23c){WSI=window.WSI||{};WSI.Events=dojo.mixin(wsgc.js.Events,wsgc.js.Selector,{delegate:function(_23d,_23e,_23f,_240){if(!_240){_240=_23f;_23f=dojo.body();}_23d=_23d.replace(/^on/,"");var self=this,_241=this.idFor(_23f),_242=this.delegate.delegates||(this.delegate.delegates={}),_243=_242[_241]||(_242[_241]={}),_244=_243.events||(_243.events={}),_245=_244[_23d];this.parse(_23e);if(!_245){_245=_244[_23d]=function(evt){var _246=_245.selectors,elem=evt.target,_247={};do{if(elem.disabled){continue;}for(var _248 in _246){if(_246.hasOwnProperty(_248)){if(_256(_246[_248],_247)&&self.is(elem,_248,_23f===dojo.body()?null:_23f)){dojo.forEach(_246[_248],function(_249){if(!_247[_249]){_247[_249]=true;_249.call(elem,evt);}});}}}}while(elem!=evt.currentTarget&&(elem=elem.parentNode)&&elem!=document.documentElement);};if(_23d==="focus"||_23d==="blur"){var _24a=function(evt){return _245(dojo.fixEvent(evt||window.event,this));};if(document.attachEvent){document.attachEvent("onfocus"+(_23d==="blur"?"out":"in"),_23f,_24a);}else{_23f.addEventListener(_23d,_24a,true);}}else{dojo.connect(_23f,_23d,_245);}_245.selectors={};}_245.selectors[_23e]=_245.selectors[_23e]||[];_245.selectors[_23e].push(_240);},undelegate:function(_24b,_24c,_24d,_24e){if(!_24e){if(!_24d){if(typeof _24c==="function"){_24e=_24c;_24d=dojo.body();_24c=null;}else{if(typeof _24c==="object"){_24d=_24c;_24c=null;}else{_24d=dojo.body();}}}else{if(typeof _24d==="function"){_24e=_24d;_24d=dojo.body();}}}var _24f=this.delegate.delegates||{},_250=_24f[this.idFor(_24d)]||{},_251=_250.events||{},_252=_251[_24b]||{},_253=_252.selectors||{},_254=_253[_24c||""]||[],_255=_24e?dojo.indexOf(_254,_24e):-1;if(!_24c){if(!_24e){_252.selectors={};}else{for(_24c in _253){if(_253.hasOwnProperty(_24c)){_254=_253[_24c];_255=dojo.indexOf(_254,_24e);if(_255>-1){_254.splice(_255,1);}}}}}else{if(!_254||(_24e&&_255===-1)){return;}else{if(_24e){_254.splice(_255,1);}else{_253[_24c]=[];}}}}});function _256(_257,_258){return dojo.some(_257,function(_259){return !_258[_259];});};if(dojo){dojo.delegateEvent=WSI.Events.delegate;dojo.undelegateEvent=WSI.Events.undelegate;}}(dojo));}if(!dojo._hasResource["wsgc.js.MetricsWrapper"]){dojo._hasResource["wsgc.js.MetricsWrapper"]=true;dojo.provide("wsgc.js.MetricsWrapper");(function(dojo,_25a){WSI.Events.delegate("click","[data-metrics],[metrics]",function(evt){try{var _25b=dojo.attr(this,"data-metrics");if(!_25b){_25b=dojo.attr(this,"metrics");}if(evt.target.type==="checkbox"){_25b=_25b.replace("Checkbox_$_State",evt.target.checked?"checked":"unchecked");}eval(_25b);}catch(err){}});}(dojo));}if(!dojo._hasResource["wsgc.js.Tabs"]){dojo._hasResource["wsgc.js.Tabs"]=true;dojo.provide("wsgc.js.Tabs");(function(dojo,_25c){var _25d=WSI.isIPad;WSI.Events.delegate("click",".tabsWidget>:first-child>.tab",function(evt){dojo.stopEvent(evt);if(!dojo.hasClass(this,"active")){var tab=new Tab(this);tab.tabsAndContents.query(">.active").removeClass("active");tab.tabsAndContents.query(">:nth-child("+tab.position+")").addClass("active");dojo.publish("/tab/click",[tab]);}});if(_25d){dojo.subscribe("/tab/click",function(_25e){_25f(_25e);});dojo.addOnLoad(function(){dojo.query(".tabsWidget>:first-child()>.tab.active").forEach(function(_260){_25f(new Tab(_260));});});function _25f(tab){dojo.query(".tabScrollbar",tab.widget).remove();var _261=dojo.contentBox(tab.content),_262=dojo.query(".scroll-contents",tab.content)[0],_263=dojo.marginBox(_262);if(_263.h>_261.h){var _264=dojo.place("<div class=\"tabScrollbar\"><div class=\"tabScroll\"/></div>",tab.widget,"last"),_265=_264.firstChild,_266=_261.h*_261.h/_263.h,_267=dojo.style(_265,"marginTop")+dojo.style(_265,"marginBottom"),_268=_261.h-_266-_267,_269=_263.h-_261.h,_26a,_26b;function _26c(evt){_26a=evt.targetTouches[0].clientY;_26b=tab.content.scrollTop;};function _26d(evt){if(evt.touches.length===1){dojo.stopEvent(evt);var _26e=evt.targetTouches[evt.touches.length-1].clientY-_26a;tab.content.scrollTop=_26b-_26e;}};function _26f(evt){_265.style.top=(_268*(tab.content.scrollTop/_269))+"px";};if(tab.widget.disconnectPreviousActiveTabEvents){tab.widget.disconnectPreviousActiveTabEvents();}tab.widget.disconnectPreviousActiveTabEvents=function(){_262.removeEventListener("touchstart",_26c);_262.removeEventListener("touchmove",_26d);tab.content.removeEventListener("scroll",_26f);};_265.style.height=_266+"px";_262.addEventListener("touchstart",_26c);_262.addEventListener("touchmove",_26d);tab.content.addEventListener("scroll",_26f);_265.addEventListener("touchstart",function(evt){dojo.stopEvent(evt);_26a=evt.targetTouches[0].clientY;_26b=tab.content.scrollTop;});_265.addEventListener("touchmove",function(evt){dojo.stopEvent(evt);var _270=evt.targetTouches[evt.touches.length-1].clientY-_26a;tab.content.scrollTop=_26b+(_269*(_270/_268));});_264.addEventListener("touchstart",function(evt){dojo.stopEvent(evt);if(evt.targetTouches[0].clientY<dojo.position(_265,true).y){tab.content.scrollTop-=_261.h;}else{tab.content.scrollTop+=_261.h;}});}};}function Tab(tab){this.tab=tab;this.parent=tab.parentNode;this.widget=this.parent.parentNode;this.tabsAndContents=dojo.query(">*",this.widget);this.position=dojo.query(">.tab",this.parent).indexOf(tab)+1;this.content=dojo.query(">:nth-child(2)>:nth-child("+this.position+")",this.widget)[0];};}(dojo));}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _271=this;dojo.mixin(_271,args);_271.node=args.node;_271._showArgs=dojo.mixin({},args);_271._showArgs.node=_271.node;_271._showArgs.duration=_271.showDuration;_271.showAnim=_271.showFunc(_271._showArgs);_271._hideArgs=dojo.mixin({},args);_271._hideArgs.node=_271.node;_271._hideArgs.duration=_271.hideDuration;_271.hideAnim=_271.hideFunc(_271._hideArgs);dojo.connect(_271.showAnim,"beforeBegin",dojo.hitch(_271.hideAnim,"stop",true));dojo.connect(_271.hideAnim,"beforeBegin",dojo.hitch(_271.showAnim,"stop",true));},show:function(_272){return this.showAnim.play(_272||0);},hide:function(_273){return this.hideAnim.play(_273||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_274={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _275=function(_276){this._index=-1;this._animations=_276||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_275,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_277,_278){if(!this._current){this._current=this._animations[this._index=0];}if(!_278&&this._current.status()=="playing"){return this;}var _279=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_27a=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_27b=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_279);d.disconnect(_27a);d.disconnect(_27b);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_27c,_27d){this.pause();var _27e=this.duration*_27c;this._current=null;d.some(this._animations,function(a){if(a.duration<=_27e){this._current=a;return true;}_27e-=a.duration;return false;});if(this._current){this._current.gotoPercent(_27e/this._current.duration,_27d);}return this;},stop:function(_27f){if(this._current){if(_27f){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_275,_274);dojo.fx.chain=function(_280){return new _275(_280);};var _281=function(_282){this._animations=_282||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_282,function(a){var _283=a.duration;if(a.delay){_283+=a.delay;}if(this.duration<_283){this.duration=_283;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var self=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(d.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};d.extend(_281,{_doAction:function(_284,args){d.forEach(this._animations,function(a){a[_284].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_285,args){var t=this._pseudoAnimation;t[_285].apply(t,args);},play:function(_286,_287){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_288,_289){var ms=this.duration*_288;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_289);});this._call("gotoPercent",arguments);return this;},stop:function(_28a){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_281,_274);dojo.fx.combine=function(_28b){return new _281(_28b);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _28c=d.style(node,"height");return Math.max(_28c,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}return (dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!dojo._hasResource["wsgc.js.Scroller"]){dojo._hasResource["wsgc.js.Scroller"]=true;dojo.provide("wsgc.js.Scroller");(function(dojo,_28d){var _28e={},_28f="disabled",_290,_291={duration:450,rate:20,easing:dojo.fx.easing.quadInOut,pageSize:0};WSI.Events.delegate("click",".scroller-container>.control",function(evt){dojo.stopEvent(evt);if(!dojo.hasClass(this,_28f)){var _292=wsgc.js.Scroller.get(this.parentNode);var _293=dojo.hasClass(this,"btn-next");if(_293){_292.next();}else{_292.prev();}}});dojo.declare("wsgc.js.Scroller",null,{constructor:function(_294){_28e[_295(_294)]=this;this.widget=_294;this.controls=dojo.query(">.control",this.widget);this.scroll=dojo.query(">.scroller",this.widget)[0];this.scrollerContainer=this.scroll.parentNode;this.isVertical=dojo.hasClass(this.scrollerContainer,"vertical");this.itemContainer=dojo.query(">.panel",this.scroll)[0];this.items=dojo.query(">*:not(.hide)",this.itemContainer);this.scrollSize=dojo.contentBox(this.scroll);var _296=this.items.length?dojo.position(this.items[0]):{y:0,x:0},_297=this.items.length>1?dojo.position(this.items[1]):_296,_298=dojo.marginBox(this.itemContainer);this.itemOffset={h:_297.y-_296.y,w:_297.x-_296.x};if(this.isVertical){this.item=-Math.round(_298.t/this.itemOffset.h);this.itemsPerPage=Math.round(this.scrollSize.h/this.itemOffset.h);}else{this.item=-Math.round(_298.l/this.itemOffset.w);this.itemsPerPage=Math.round(this.scrollSize.w/this.itemOffset.w);}this.options=dojo.mixin({},_291,dojo.fromJson(dojo.attr(this.widget,"data-scroller")||"{}"));if(typeof this.options.easing=="string"){this.options.easing=eval(this.options.easing);}this.pageSize=this.options.pageSize||this.itemsPerPage;},scrollTo:function(_299){if(!_290&&_299>=this.itemsPerPage){_29a(this,this.pageSize*Math.floor(_299/this.itemsPerPage));}},next:function(){_29a(this,this.pageSize);},prev:function(){_29b(this,this.pageSize);}});dojo.mixin(wsgc.js.Scroller,{get:function(_29c){return _28e[_295(_29c)]||new wsgc.js.Scroller(_29c);}});var _29d=0;function _295(_29e){return _29e.id||(_29e.id="_scroller"+_29d++);};function _29a(_29f,_2a0){if(!_290&&_29f.item<_29f.items.length-_29f.itemsPerPage){_29f.item+=_2a0;var _2a1=dojo.marginBox(_29f.itemContainer);if(_29f.isVertical){_2a1.t-=(_29f.itemOffset.h*_2a0);}else{_2a1.l-=(_29f.itemOffset.w*_2a0);}dojo.fx.slideTo(dojo.mixin({},_29f.options,{node:_29f.items[0].parentNode,left:_2a1.l,top:_2a1.t,onEnd:function(){if(_29f.item>=_29f.items.length-_29f.itemsPerPage){_29f.controls.filter(".btn-next").addClass(_28f);}_290=false;}})).play();_290=true;_29f.controls.filter(".btn-prev").removeClass(_28f);}};function _29b(_2a2,_2a3){if(!_290&&_2a2.item>0){_2a2.item-=_2a3;var _2a4=dojo.marginBox(_2a2.itemContainer);if(_2a2.isVertical){_2a4.t+=(_2a2.itemOffset.h*_2a3);}else{_2a4.l+=(_2a2.itemOffset.w*_2a3);}dojo.fx.slideTo(dojo.mixin({},_2a2.options,{node:_2a2.itemContainer,left:_2a4.l,top:_2a4.t,onEnd:function(){if(_2a2.item===0){_2a2.controls.filter(".btn-prev").addClass(_28f);}_290=false;}})).play();_290=true;_2a2.controls.filter(".btn-next").removeClass(_28f);}};}(dojo));}if(!dojo._hasResource["wsgc.js.Image"]){dojo._hasResource["wsgc.js.Image"]=true;(function(dojo,_2a5){var _2a6={duration:500,easing:dojo.fx.easing.quadInOut};WSI.Image=dojo.mixin(dojo.provide("wsgc.js.Image"),{swap:function(_2a7,url,_2a8,_2a9){if(dojo.isFunction(_2a8)){_2a9=_2a8;_2a8={};}var _2aa=dojo.mixin({},_2a8,_2a6);var _2ab=dojo.marginBox(_2a7),_2ac=dojo.position(_2a7);var _2ad=this.clone(_2a7),self=this;dojo.style(_2ad,{"position":"absolute","top":"0px","left":"0px","opacity":0});var _2ae;var _2af=setTimeout(function(){_2ae=dojo.clone(WSI.throbber);dojo.style(_2ae,{"position":"absolute","top":(_2ab.t+(_2ab.h/2))+"px","left":(_2ab.l+(_2ab.w/2))+"px"});dojo.place(_2ae,_2a7,"after");},175);this.loadWithCallback(_2ad,url,function(){if(_2af){clearTimeout(_2af);_2af=null;}setTimeout(function(){if(_2ae){dojo.destroy(_2ae);}},250);dojo.place(_2ad,_2a7,"before");var _2b0=dojo.marginBox(_2ad);var _2b1;var _2b2=[dojo.fadeOut(dojo.mixin({node:_2a7},_2aa)),dojo.fadeIn(dojo.mixin({node:_2ad},_2aa))];if(_2b0.h>_2ab.h){var _2b3="<div class='spacer' style='position: relative; height: 0px; width: 1px; visibility: hidden;'></div>";dojo.place(_2b3,_2a7,"after");var _2b4=dojo.query(".spacer")[0];var _2b5=Math.max(_2b0.h-_2ab.h,0);_2b2.push(dojo.animateProperty(dojo.mixin({node:_2b4,duration:150,properties:{height:_2b5}},_2aa)));}var anim=dojo.fx.combine(_2b2);dojo.connect(anim,"onEnd",function(){var _2b6=self.clone(_2a7);dojo.style(_2b6,"opacity","1");_2b6.id=_2a7.id;self.loadWithCallback(_2b6,dojo.attr(_2ad,"src"),function(){dojo.place(_2b6,_2a7,"replace");dojo.destroy(_2b4);dojo.destroy(_2ad);if(_2a9){_2a9(_2b6);}});});anim.play();});},loadWithCallback:function(_2b7,url,fn){var _2b8="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",_2b9=dojo.connect(_2b7,"onload",function(){if(_2b7.src!==_2b8){fn();}dojo.disconnect(_2b9);});dojo.attr(_2b7,"src",url);if(!dojo.isIE&&(_2b7.complete||typeof _2b7.complete==="undefined")){_2b7.src=_2b8;_2b7.src=url;}},clone:function(_2ba){var _2bb=new Image();dojo.forEach(["alt","class","title"],function(name){var val=dojo.attr(_2ba,name);if(val){dojo.attr(_2bb,name,val);}});return _2bb;}});}(dojo));}if(!dojo._hasResource["wsgc.js.Thumbnail"]){dojo._hasResource["wsgc.js.Thumbnail"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.Thumbnail");(function(dojo,_2bc){WSI.Events.delegate("click",".thumbnailWidget",function(evt){dojo.stopEvent(evt);var _2bd=dojo.fromJson(dojo.attr(this,"data-thumbnail")||"{}");dojo.publish("/thumbnail/click",[{href:this.href||_2bd.href,alt:_2bd.alt||"",elem:this,target:this.target||_2bd.target,map:_2bd.map,options:_2bd}]);});WSI.Thumbnail=dojo.mixin(wsgc.js.Thumbnail,{subscribe:function(_2be,fn){if(typeof _2be==="string"){_2be=[_2be];}dojo.subscribe("/thumbnail/click",function(_2bf){if(_2bf&&_2bf.target&&dojo.indexOf(_2be,_2bf.target)>-1){fn(_2bf);}});}});var _2c0={};dojo.subscribe("/thumbnail/click",function(_2c1){if(!_2c0[_2c1.target]){var _2c2=dojo.query("#"+_2c1.target+".thumbnailTarget");if(_2c2.length){if(_2c2[0].nodeName=="IMG"){if(_2c2[0].src!=_2c1.href){_2c0[_2c1.target]=true;WSI.Image.swap(_2c2[0],_2c1.href,function(_2c3){if(_2c1.map){dojo.attr(_2c3,"useMap",_2c1.map);}_2c0[_2c1.target]=false;});}}else{WSI.utils.loadFragment(dojo.mixin({url:_2c1.href,load:function(data){_2c2.html(data);}},_2c1.options));}}}});function _2c4(href){var _2c5=href.match(/#.*/);return (_2c5!==null)?_2c5[0]:href;};}(dojo));}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.window.getBox=function(){var _2c6=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _2c7=dojo._docScroll();return {w:_2c6.clientWidth,h:_2c6.clientHeight,l:_2c7.x,t:_2c7.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _2c8=doc.compatMode=="BackCompat",_2c9=_2c8?body:html,_2ca=isWK?body:_2c9,_2cb=_2c9.clientWidth,_2cc=_2c9.clientHeight,rtl=!dojo._isBodyLtr(),_2cd=pos||dojo.position(node),el=node.parentNode,_2ce=function(el){return ((isIE<=6||(isIE&&_2c8))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_2ce(node)){return;}while(el){if(el==body){el=_2ca;}var _2cf=dojo.position(el),_2d0=_2ce(el);if(el==_2ca){_2cf.w=_2cb;_2cf.h=_2cc;if(_2ca==html&&isIE&&rtl){_2cf.x+=_2ca.offsetWidth-_2cf.w;}if(_2cf.x<0||!isIE){_2cf.x=0;}if(_2cf.y<0||!isIE){_2cf.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_2cf.w-=pb.w;_2cf.h-=pb.h;_2cf.x+=pb.l;_2cf.y+=pb.t;}if(el!=_2ca){var _2d1=el.clientWidth,_2d2=_2cf.w-_2d1;if(_2d1>0&&_2d2>0){_2cf.w=_2d1;if(isIE&&rtl){_2cf.x+=_2d2;}}_2d1=el.clientHeight;_2d2=_2cf.h-_2d1;if(_2d1>0&&_2d2>0){_2cf.h=_2d1;}}if(_2d0){if(_2cf.y<0){_2cf.h+=_2cf.y;_2cf.y=0;}if(_2cf.x<0){_2cf.w+=_2cf.x;_2cf.x=0;}if(_2cf.y+_2cf.h>_2cc){_2cf.h=_2cc-_2cf.y;}if(_2cf.x+_2cf.w>_2cb){_2cf.w=_2cb-_2cf.x;}}var l=_2cd.x-_2cf.x,t=_2cd.y-Math.max(_2cf.y,0),r=l+_2cd.w-_2cf.w,bot=t+_2cd.h-_2cf.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_2cd.x+=el.scrollLeft;el.scrollLeft+=(isIE>=8&&!_2c8&&rtl)?-s:s;_2cd.x-=el.scrollLeft;}if(bot*t>0){_2cd.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_2cd.y-=el.scrollTop;}el=(el!=_2ca)&&!_2d0&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};}if(!dojo._hasResource["wsgc.js.Overlay"]){dojo._hasResource["wsgc.js.Overlay"]=true;dojo.provide("wsgc.js.Overlay");(function(dojo,_2d3){var _2d4={id:"",classname:"",mask:true,loadingThrobber:true,fixedScroll:true,destroyOnHide:true,preventCache:true},_2d5={},_2d6,_2d7=".overlayMask,.overlayScroll,.overlayCloseButton",_2d8="",_2d9=WSI.isIPad,_2da,_2db=["onLoad","onShow","onShowing","onShown","onHide","onHidden","onDestroy","onRefresh"];dojo.addOnLoad(function(){WSI.Events.delegate("click",".overlayTrigger",function(evt){var _2dc=dojo.mixin({},dojo.fromJson(dojo.attr(this,"data-overlay")||"{}")),data=dojo.fromJson(dojo.attr(this,"data-overlaydata")||"{}"),href=dojo.attr(this,"href");wsgc.js.Overlay.trigger(_2dc,data,href);dojo.stopEvent(evt);});WSI.Events.delegate("click",".cancelOverlay",function(evt){wsgc.js.Overlay.cancel();});});dojo.declare("wsgc.js.Overlay",null,{constructor:function(href,_2dd){var self=this,loc=document.location,_2de=loc.href.substr(0,loc.href.length-loc.hash.length);this.href=href.replace(_2de,"");this.options=dojo.mixin({},_2d4,_2dd);this.registeredCallbacks={};dojo.forEach(_2db,function(name){self[name]=function(){return self._callback(name);};self.registeredCallbacks[name]=self.options[name]?[self.options[name]]:[];});this.isAjax=this.href.charAt(0)!=="#";},refresh:function(){var self=this;if(this.onRefresh(this)===false){return;}this.isLoaded=false;this.load(function(){if(self.throbber){dojo.destroy(self.throbber);}self.elem=dojo.place(WSI.utils.toDom(self.template(self.data)),self.elem,"replace");var pos={marginTop:self.elem.style.marginTop,marginLeft:self.elem.style.marginLeft,top:self.elem.style.top,left:self.elem.style.left};dojo.style(self.elem,pos);if(self.onShowing(self)===false){return;}});},load:function(_2df){var self=this;if(!this.isAjax||this.isLoaded){if(_2df){_2df();}else{self.show();}return;}if(this.onLoad(this)===false){return;}if(this.options.loadingThrobber){this.throbber=dojo.place("<div class=\"overlayThrobber\"></div>",dojo.body());this.throbber.appendChild(dojo.clone(WSI.throbber));}var _2e0={};if(this.options.form&&dojo.byId(this.options.form)){_2e0.form=dojo.byId(this.options.form);}WSI.utils.loadFragment(this.options.httpmethod||"GET",dojo.mixin(_2e0,{url:this.href,preventCache:this.options.preventCache,timeout:this.options.timeout||30000,load:function(data){if(data===data.replace(/<script.+type=['"]text\/html['"].+id=['"]overlayTemplate_[^>]*>([\s\S]*?)<\/script>/gim,function(_2e1,src){self.template=WSI.utils.template(dojo.trim(src));return "";})){_2da=_2da||WSI.utils.template(dojo.trim(dojo.byId("overlayTemplate_defaultAjaxWrapper").innerHTML));self.template=(function(dojo,_2e2){var _2e3=_2da({ajaxContent:data,id:self.options.id,classname:self.options.classname});return function(){return _2e3;};}(dojo));}self.isLoaded=true;if(_2df){_2df();}else{self.show();}},error:function(_2e4){var _2e5=dojo.query("#overlayTemplate_overlayError");if(_2e5.length===0){wsgc.js.Overlay.hideAll();if(self.throbber){dojo.destroy(self.throbber);}setTimeout(function(){alert("Sorry, your request could not be processed at this time. Please try again later.");if(self.mask){dojo.body().removeChild(self.mask);}if(self.scroll){dojo.style(self.scroll,"overflow","hidden");dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:_2d8,paddingRight:_2d8});dojo.body().removeChild(self.scroll);}},100);}else{self.elem=dojo.create("div",{"class":"overlayErrorContainer","innerHTML":_2e5.innerHTML()});if(_2df){_2df();}else{self.show();}}}}));},show:function(){var self=this;if(_2d6){if(_2d6===self){self.refresh();return;}}if(this.onShow(this)===false){return;}self.mask=self.mask||(self.options.mask&&dojo.place("<div class='overlayMask'></div>",dojo.body()));self.scroll=self.scroll||(self.options.fixedScroll&&dojo.place("<div class='overlayScroll'></div>",dojo.body()));if(self.scroll&&!_2d9){dojo.style(self.scroll,{"overflowX":"auto","overflowY":"scroll"});dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:"hidden",paddingRight:WSI.utils.getBrowserScrollbarWidth()+"px"});}if(self.mask&&_2d9){var _2e6=dojo.marginBox(dojo.body());dojo.style(self.mask,{width:window.innerWidth+"px",height:_2e6.h+"px"});}if(this.isAjax&&!this.isLoaded){this.load(_2e7);}else{try{self.template=self.template||WSI.utils.template(dojo.trim(dojo.byId("overlayTemplate_"+self.href.substr(1)).innerHTML));}catch(e){}_2e7();}function _2e7(){if(_2d6){if(_2d6!==self){_2d6.hide(true);}}self.elem=self.elem||WSI.utils.toDom(self.template(self.data));dojo.style(self.scroll||self.elem,"opacity",0);if(self.scroll){dojo.style(self.elem,"left","-9999px");}dojo.place(self.elem,self.scroll||dojo.body());if(self.onShowing(self)===false){return;}setTimeout(function(){if(self.scroll){var _2e8=dojo.position(self.elem);var _2e9=self.elem.style.height==="auto"||self.elem.style.height==="";if(_2e9){dojo.style(self.elem,"marginTop",(_2e8.h/-2)+"px");}self.center();self.resizeConnection=dojo.connect(window,"resize",dojo.hitch(self,self.center));if(self.throbber){dojo.destroy(dojo.query("img",self.throbber)[0]);}if(_2d9){dojo.style(self.scroll||self.elem,"opacity",1);if(self.throbber){dojo.style(self.throbber,"opacity",0);}_2d6=self;dojo.query("a",self.elem)[0].focus();dojo.style(self.scroll||self.elem,"filter",_2d8);if(self.onShown(self)===false){return;}}else{var _2ea=[dojo.fadeIn({node:self.scroll||self.elem,duration:self.throbber?150:500,delay:self.throbber?200:100,easing:dojo.fx.easing.linear,onEnd:function(evt){if(self.elem){_2d6=self;dojo.query("a",self.elem)[0].focus();dojo.style(self.scroll||self.elem,"filter",_2d8);if(self.onShown(self)===false){return;}self.center();}}})];if(self.throbber){_2ea.push(dojo.animateProperty({node:self.throbber,duration:350,easing:dojo.fx.easing.quintInOut,properties:{marginTop:{end:_2e8.h/-2},height:{end:_2e8.h},marginLeft:{end:_2e8.w/-2},width:{end:_2e8.w}},onEnd:function(){dojo.destroy(self.throbber);}}));_2ea.push(dojo.fadeOut({node:self.throbber,duration:300,easing:dojo.fx.easing.linear}));}dojo.fx.combine(_2ea).play();}}});};},hide:function(_2eb){if(this.onHide(this)===false){return;}var self=this;if(self.mask){dojo.body().removeChild(self.mask);}if(this.scroll){dojo.disconnect(self.resizeConnection);self.resizeConnection=null;}if(_2d9||_2eb){dojo.style(self.scroll||self.elem,"opacity",0);_2d6=null;dojo.body().removeChild(self.scroll||self.elem);if(self.options.destroyOnHide){self.destroy();}if(self.onHidden(self)===false){return;}}else{dojo.fadeOut({node:self.scroll||self.elem,duration:300,easing:dojo.fx.easing.expoOut,onEnd:function(evt){_2d6=null;if(self.scroll){dojo.style(self.scroll,"overflow","hidden");dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:_2d8,paddingRight:_2d8});}dojo.body().removeChild(self.scroll||self.elem);if(self.options.destroyOnHide){self.destroy();}if(self.onHidden(self)===false){return;}}}).play();}},destroy:function(){if(this.onDestroy(this)===false){return;}dojo.destroy(this.elem);this.elem=null;delete this.elem;if(this.scroll){dojo.destroy(this.scroll);this.scroll=null;}if(this.mask){dojo.destroy(this.mask);this.mask=null;}this.template=null;this.isLoaded=false;},center:function(){var _2ec=dojo.position(this.elem),_2ed=dojo.window.getBox(),_2ee=false,_2ef={left:_2d8,top:_2d8,marginTop:(_2ec.h/-2)+"px",marginLeft:_2d8};if(_2d9){_2ed={l:window.pageXOffset,t:window.pageYOffset,w:window.innerWidth,h:window.innerHeight};}else{_2ed.t=_2ed.l=0;}_2ed.w-=WSI.utils.getBrowserScrollbarWidth();if(_2ec.w>_2ed.w){_2ef.marginLeft=0;_2ef.left=_2ed.l+"px";_2ee=true;}else{if(_2d9){_2ef.marginLeft=0;_2ef.left=(_2ed.l+(_2ed.w/2)-(_2ec.w/2))+"px";}}if(_2ec.h+20>_2ed.h-(_2ee?WSI.utils.getBrowserScrollbarWidth():0)){_2ef.marginTop="10px";_2ef.top=_2ed.t+"px";}else{if(_2d9){_2ef.marginTop="10px";_2ef.top=(_2ed.t+(_2ed.h/2)-(_2ec.h/2))+"px";}}dojo.style(this.elem,_2ef);},_callback:function(name){var self=this;var res=true;if(this.registeredCallbacks[name]){dojo.every(this.registeredCallbacks[name],function(_2f0){res=res&&(_2f0.call(self,self)!==false);return res;});}return res;},_addCallback:function(name,fn){if(this.registeredCallbacks[name]){this.registeredCallbacks[name].push(fn);}},_removeCallback:function(name,fn){if(this.registeredCallbacks[name]){if(fn){var i=this.registeredCallbacks[name].indexOf(fn);if(i!==-1){this.registeredCallbacks[name].splice(i,1);return true;}}else{this.registeredCallbacks[name]=[];return true;}}return false;}});function _2f1(href){var _2f2=href.match(/#(.*)/);return (_2f2!==null)?_2f2[0]:href;};var _2f3={getByHref:function(href,_2f4){href=_2f1(href||_2f4.href);var _2f5=_2d5[href];if(_2f5){dojo.mixin(_2f5.options,_2f4);}else{_2f5=(_2d5[href]=new wsgc.js.Overlay(href,_2f4));}return _2f5;},trigger:function(_2f6,data,href){overlay=wsgc.js.Overlay.getByHref(href,_2f6);overlay.data=data;overlay.show();},hide:function(href,_2f7){href=_2f1(href||options.href);var _2f8=_2d5[href];if(_2f8){_2f8.hide(_2f7);}},refresh:function(href){href=_2f1(href||options.href);var _2f9=_2d5[href];if(_2f9){_2f9.refresh();}},center:function(){if(_2d6){_2d6.center();}},hideAll:function(){try{_2d6.hide(true);}catch(e){}return;},cancel:function(){try{_2d6.hide(false);}catch(e){}return;}};dojo.forEach(_2db,function(_2fa){var _2fb={};_2fb["addO"+_2fa.substr(1)]=function(fn){this._addCallback(_2fa,fn);};_2fb["removeO"+_2fa.substr(1)]=function(fn){this._removeCallback(_2fa,fn);};dojo.extend(wsgc.js.Overlay,_2fb);_2f3["addO"+_2fa.substr(1)+"ByHref"]=_2fc(_2fa);_2f3["removeO"+_2fa.substr(1)+"ByHref"]=_2fd(_2fa);});dojo.mixin(wsgc.js.Overlay,_2f3);function _2fc(name){return function(href,fn){var _2fe=wsgc.js.Overlay.getByHref(href);_2fe._addCallback(name,fn);};};function _2fd(name){return function(href,fn){var _2ff=wsgc.js.Overlay.getByHref(href);_2ff._removeCallback(name,fn);};};WSI.Events.delegate(WSI.capabilities.touch?"touchstart":"click",_2d7,function(evt){if(this===evt.target&&_2d6){dojo.stopEvent(evt);_2d6.hide();}});dojo.connect(dojo.body(),"keypress",function(evt){if(evt.keyCode===dojo.keys.ESCAPE&&_2d6){dojo.stopEvent(evt);_2d6.hide();}});}(dojo));}if(!dojo._hasResource["wsgc.js.Tooltip"]){dojo._hasResource["wsgc.js.Tooltip"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.Tooltip");(function(dojo,_300){var _301=WSI.capabilities.touch,_302={placement:"above","style":"",id:"default",content:{},template:"",delay:300};if(!_301){WSI.Events.delegate("mouseover",".showTooltip",function(evt){var _303={},elem=this,_304;_303=new wsgc.js.Tooltip(this,WSI.dataset.get(this,"tooltip"));_304=dojo.connect(dojo.body(),"mousemove",function(evt){if(WSI.utils.closest(".showTooltip",evt.target)!==elem){dojo.disconnect(_304);_303.hide();}});});}dojo.declare("wsgc.js.Tooltip",null,{constructor:function(elem,_305){var _306;this.options=dojo.mixin({},_302,_305);this.elem=elem;if(_305.template){_306=WSI.utils.template(_305.template);}else{if(dojo.byId("template-tooltip-"+this.options.id)){_306=WSI.utils.template(dojo.trim(dojo.byId("template-tooltip-"+this.options.id).innerHTML));}else{}}dojo.mixin(this.options.content,{"style":this.options.style,placement:this.options.placement});this.node=WSI.utils.toDom(_306(this.options.content));this.setPositioning();this.show();},setPositioning:function(){var _307,_308;_307=dojo.position(this.elem,true);_308=this.getDimensions();switch(this.options.placement){case "above":this.position={x:_307.x+_307.w/2-_308.w/2,y:_307.y-_308.h};break;case "below":this.position={x:_307.x+_307.w/2-_308.w/2,y:_307.y+_307.h};break;case "left":this.position={x:_307.x-_308.w,y:_307.y+_307.h/2-_308.h/2};break;case "right":this.position={x:_307.x+_307.w,y:_307.y+_307.h/2-_308.h/2};break;}},getDimensions:function(){var _309;dojo.style(this.node,{position:"absolute",top:"0px",left:"0px"});dojo.place(this.node,dojo.body());_309=dojo.position(this.node,true);this.node.parentNode.removeChild(this.node);dojo.removeAttr(this.node,"style");return _309;},show:function(){dojo.style(this.node,{top:(this.position.y||0)+"px",left:(this.position.x||0)+"px",position:"absolute",opacity:0});dojo.place(this.node,dojo.body());dojo.fadeIn({node:this.node,duration:100,delay:this.options.delay}).play();},hide:function(){var node=this.node;dojo.fadeOut({node:this.node,duration:100,onEnd:function(){dojo.destroy(node);}}).play();}});}(dojo));}if(!dojo._hasResource["wsgc.js.SwatchTooltips"]){dojo._hasResource["wsgc.js.SwatchTooltips"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.SwatchTooltips");(function(dojo,_30a){var _30b=WSI.capabilities.touch;if(!_30b){WSI.Events.delegate("mouseover","ul.graphical-att>li>a",function(evt){var _30c={},elem=this,_30d;_30c=new wsgc.js.Tooltip(this,{"id":"swatch",content:{colorSrc:this.href,colorName:this.title}});_30d=dojo.connect(dojo.body(),"mousemove",function(evt){if(WSI.utils.closest("a",evt.target)!==elem){dojo.disconnect(_30d);_30c.hide();}});});}}(dojo));}if(!dojo._hasResource["wsgc.common.js.VideoPlayer"]){dojo._hasResource["wsgc.common.js.VideoPlayer"]=true;dojo.provide("wsgc.common.js.VideoPlayer");dojo.provide("wsgc.js.VideoPlayer");(function(dojo,_30e){var _30f=0,_310={youTube:{width:640,height:390,autoplay:true,theme:"light"},productBuildFlash:{width:400,height:370}};WSI.VideoPlayer=dojo.mixin(wsgc.js.VideoPlayer,{youTubeData:function(_311,_312){var _313="cb"+_30f++;WSI.utils.loadScript("//gdata.youtube.com/feeds/api/videos/"+_311+"?v=2&alt=json-in-script&callback=WSI.VideoPlayer."+_313);WSI.VideoPlayer[_313]=function(data){delete WSI.VideoPlayer[_313];try{_312({videoId:_311,title:data.entry.media$group.media$title.$t,description:data.entry.media$group.media$description.$t});}catch(e){if(console&&console.error){}}};},youTubePlayer:function(elem,_314){var opts=dojo.mixin({},_310.youTube,_314||{},WSI.dataset.get(elem,"youtubevideo")||{}),_315=opts.videoId,_316=!dojo.isIE||dojo.isIE>7,_317=!!navigator.userAgent.match(/iP(?:ad|hone)/i),_318="//www.youtube.com/embed/"+_315+"?enableuseJsApi="+(_316?1:0)+"&origin="+WSI.config.appUrl,_319=new YT.Player(elem,{videoId:_315,height:opts.height,width:opts.width,events:_316?{onReady:function(evt){if(!_317&&opts.autoplay){_319.playVideo();}},onStateChange:function(evt){if(evt.data===0&&_317){_319.seekTo(0);}}}:{},playerVars:{wmode:"transparent",autohide:1,autoplay:dojo.isIE===7&&opts.autoplay?1:0,modestbranding:_317?0:1,iv_load_policy:3,fs:1,cc_load_policy:0,rel:0,showsearch:0,enablejsapi:1,webkitAllowFullScreen:"webkitAllowFullScreen",mozallowfullscreen:"mozallowfullscreen",allowFullScreen:"allowFullScreen",theme:opts.theme}});},productBuildFlashPlayer:function(elem,_31a){var opts=dojo.mixin({},_310.productBuildFlash,_31a||{},WSI.dataset.get(elem,"productbuildflash")||{}),_31b=opts.videoPath,_31c=WSI.config.sessionCookieName,_31d=_31c?("&sessionCookieName="+_31c+"&sessionId="+(dojo.cookie(_31c)||"")):"";new dojox.embed.Flash({path:_31b,width:opts.width,height:opts.height,params:{wmode:"transparent",allowFullScreen:"true",flashvars:"urlbase=${rc.getRootUrl()}&swfbase="+_31b+_31d,allowScriptAccess:"always"}},elem);}});wsgc.common.js.VideoPlayer=wsgc.js.VideoPlayer;}(dojo));}if(!dojo._hasResource["wsgc.js.Social"]){dojo._hasResource["wsgc.js.Social"]=true;dojo.provide("wsgc.js.Social");(function(dojo,_31e){dojo.declare("wsgc.js.Social",[],{constructor:function(url){this.callbacks=[];if(url&&!WSI.isRetailStoreRequest()){WSI.utils.loadScript(url);}},_callCallbacks:function(){for(var i=0,len=this.callbacks.length;i<len;++i){if(false===this.callbacks[i].apply(this,arguments)){break;}}},registerCallback:function(fn){this.callbacks.push(fn);}});dojo.declare("wsgc.js.social.Twitter",[wsgc.js.Social],{constructor:function(url){var self=this,t=window.twttr={_e:[],ready:function(f){t._e.push(f);}};t.ready(function(_31f){_31f.events.bind("tweet",function(evt){self._callCallbacks(evt);});});}});dojo.declare("wsgc.js.social.Facebook",[wsgc.js.Social],{constructor:function(url,_320){var self=this,opts={status:true,cookie:true,xfbml:true};if(_320){opts.appId=_320;}window.fbAsyncInit=function(){FB.init(opts);FB.getLoginStatus(function(_321){});FB.Event.subscribe("edge.create",function(r){self._callCallbacks(r);});};}});dojo.declare("wsgc.js.social.GooglePlus",[wsgc.js.Social],{constructor:function(url){var self=this;window.googlepluscallback=function(arg){self._callCallbacks(arg);};}});}(dojo));}if(!dojo._hasResource["wsgc.js.StringUtils"]){dojo._hasResource["wsgc.js.StringUtils"]=true;(function(){dojo.mixin(dojo.provide("wsgc.js.StringUtils"),{capitalize:function(word){return word[0].toUpperCase()+(word[1]?word.substr(1).toLowerCase():"");},leftPad:function(str,_322,pad){return (Array(_322+1).join(pad||"0")+str).substr(-_322);},escapeRegExp:function(str){return str.replace(/([.?*+\[\]^$()])/g,"\\$1");},ordinalSuffix:function(n){if(((n%100)/10)|0!==1){switch(n%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd";}}return n+"th";}});}());}if(!dojo._hasResource["wsgc.js.DateUtils"]){dojo._hasResource["wsgc.js.DateUtils"]=true;dojo.provide("wsgc.js.DateUtils");(function(){var _323=["January","February","March","April","May","June","July","August","September","October","November","December"],_324=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_325=wsgc.js.StringUtils,_326=dojo.mixin(wsgc.js.DateUtils,{MIN_DATE:new Date(1000,0),MAX_DATE:new Date(9999,11,31),DAYS_PER_MONTH:[31,28,31,30,31,30,31,31,30,31,30,31],MONTH_NAMES:_323,MONTH_ABBRS:dojo.map(_323,function(name){return name.substr(0,3);}),DAY_NAMES:_324,DAY_ABBRS:dojo.map(_324,function(name){return name.substr(0,3);}),isLeapYear:function(year){return new Date(year,1,29).getMonth()===1;},getDaysInMonth:function(_327,year){return _327===1&&_326.isLeapYear(year)?29:_326.DAYS_PER_MONTH[_327];},getWeeksInMonth:function(_328,year){return Math.ceil((_326.getFirstDayOfWeekForMonth(_328,year)+_326.getDaysInMonth(_328,year))/7);},getFirstDayOfWeekForMonth:function(_329,year){return new Date(year,_329).getDay();},getLastDayOfWeekForMonth:function(_32a,year){return new Date(year,_32a,_326.getDaysInMonth(_32a,year)).getDay();},fixDate:function(date,_32b){if(isNaN(date)){date=_32b;}else{date=new Date(Math.max(_326.MIN_DATE,Math.min(_326.MAX_DATE,date||_32b)));}if(!date){debugger;}return new Date(date.getFullYear(),date.getMonth(),date.getDate());},guessCentury:function(year){var _32c=new Date().getFullYear(),_32d=100*(((_32c-85)/100)|0),_32e=100*(((_32c+15)/100)|0);if((_32c-(_32d+year))<=85){return _32d;}else{return _32e;}},format:function(_32f,date){return _32f.replace(/y+|m+|d+|r|H+|h+|M+|s+|S+|a|Z/g,function(_330){switch(_330){case "yyyy":return date.getFullYear();case "yy":return (date.getFullYear()+"").substr(2,2);case "MMMM":return _326.MONTH_NAMES[date.getMonth()];case "MMM":return _326.MONTH_ABBRS[date.getMonth()];case "MM":return _325.leftPad(date.getMonth()+1,2,"0");case "M":return date.getMonth()+1;case "dddd":return _326.DAY_NAMES[date.getDay()];case "ddd":return _326.DAY_ABBRS[date.getDay()];case "dd":return _325.leftPad(date.getDate(),2,"0");case "d":return date.getDate();case "r":return _325.ordinalSuffix(date.getDate());case "hh":return _325.leftPad(date.getHours(),2,"0");case "h":return date.getHours();case "HH":return _325.leftPad((date.getHours()%12)||12);case "H":return (date.getHours()%12)||12;case "mm":return _325.leftPad(date.getMinutes(),2,"0");case "m":return date.getMinutes();case "ss":return _325.leftPad(date.getSeconds(),2,"0");case "s":return date.getSeconds();case "SSS":return _325.leftPad(date.getMilliseconds(),3,"0");case "S":return date.getMilliseconds();case "a":return date.getHours()<12?"AM":"PM";case "Z":return date.getTimezoneOffset()/-0.6;default:return _330;}});},parse:function(_331,_332){var date=new Date(NaN),_333=0,_334="\\d\\d",_335="\\d\\d\\d\\d",_336="\\d+",_337={year:0,month:0,day:1,hours:0,minutes:0,seconds:0,milliseconds:0};function _338(_339){if(_332.length>_333){var re=new RegExp(_339,"g"),_33a;re.lastIndex=_333;_33a=re.exec(_332);if(!_33a){throw "DateUtils parse error: "+_325.ordinalSuffix(_333)+" character of "+_332+" does not match "+_339;}_333+=_33a[0].length;return _33a[0];}};_331=_331.replace(/y+|m+|d+|H+|h+|M+|s+|S+|a|Z|.+?/g,function(_33b){if(_332.length<=_333){return _33b;}switch(_33b){case "yyyy":_337.year=+_338(_335);break;case "yy":_337.year=+_338(_334);_337.year+=_326.guessCentury(_337.year);break;case "y":_337.year=+_338(_336);if(_337.year<100){_337.year+=_326.guessCentury(_337.year);}break;case "MMMM":_337.month=_326.MONTH_NAMES.indexOf(_338(_326.MONTH_NAMES.join("|")));break;case "MMM":_337.month=_326.MONTH_ABBRS.indexOf(_338(_326.MONTH_ABBRS.join("|")));break;case "MM":_337.month=_338(_334)-1;break;case "M":_337.month=_338(_336)-1;break;case "dddd":break;case "ddd":break;case "dd":_337.day=+_338(_334);break;case "d":_337.day=+_338(_336);break;case "hh":_337.hours=+_338(_334);break;case "h":_337.hours=+_338(_336);break;case "HH":_337.hours=+_338(_334);break;case "H":_337.hours=+_338(_336);break;case "mm":_337.minutes=+_338(_334);break;case "m":_337.minutes=+_338(_336);break;case "ss":_337.seconds=+_338(_334);break;case "s":_337.seconds=+_338(_336);break;case "SSS":_337.milliseconds=+_338(_334);break;case "S":_337.milliseconds=+_338(_336);break;case "a":_337.ampm=_338("[apAP][mM]").toLowerCase();break;case "Z":_337.tzoffset=_338("[-+]?\\d+")*-0.6;break;case "/":case "-":case ".":_338("[./-]");break;default:_338(_325.escapeRegExp(_33b));break;}return "";});if(_332.length>_333){throw "Unconsumed characters remain in input string: "+_332.substr(_333);}if(_331.length){throw "Unmatched characters remain in pattern string: "+_331;}_337.hours=_337.hours?(_337.hours%12)+(_337.ampm==="pm"?12:0):0;function _33c(prop,min,max){return _337[prop]>=min&&_337[prop]<=max;};if(_33c("month",0,11)&&_33c("day",1,_326.getDaysInMonth(_337.month,_337.year))&&_33c("hours",0,23)&&_33c("minutes",0,59)&&_33c("seconds",0,59)&&_33c("milliseconds",0,999)){date=new Date(_337.year,_337.month,_337.day,_337.hours,_337.minutes,_337.seconds,_337.milliseconds);if(_337.tzoffset){date.setTimezoneOffset(_337.tzoffset);}}return date;}});}());}if(!dojo._hasResource["wsgc.js.CalendarWidget"]){dojo._hasResource["wsgc.js.CalendarWidget"]=true;dojo.provide("wsgc.js.CalendarWidget");(function(){var _33d={},_33e=wsgc.js.DateUtils,_33f=wsgc.js.StringUtils;dojo.addOnLoad(function(){dojo.forEach(["day","week","month","dayOfWeek"],function(name){var _340=dojo.byId("calendarWidget_"+name+"Template");if(_340){_33d[name]=WSI.utils.template(_340.innerHTML);}});});dojo.declare("wsgc.js.CalendarWidget",[],{constructor:function(elem,date,_341){this.elem=elem;if(!_341&&date&&date.constructor!==Date){_341=date;date=new Date();}this.opts=_341||{};this.opts.startDate=_33e.fixDate(this.opts.startDate,_33e.MIN_DATE);this.opts.endDate=_33e.fixDate(this.opts.endDate,_33e.MAX_DATE);this.opts.dateFormat=this.opts.dateFormat||"M/d/yyyy";if(this.opts.endDate<this.opts.startDate){throw new Error("end date before start date");}this.setSelectedDate(date);},setSelectedDate:function(date){date=_33e.fixDate(date,new Date());if(this.opts.startDate>date){throw new Error("date before start date");}else{if(this.opts.endDate<date){throw new Error("date after end date");}}this.selectedDate=date;this.viewMonth(date.getMonth(),date.getFullYear());},viewMonth:function(_342,year){var date=new Date(year||this.year,_342);this.month=date.getMonth();this.year=date.getFullYear();this.dayOfWeek=date.getDay();this._render();},_render:function(){var self=this,_343=this.month,year=this.year,_344=this.opts.startDate,_345=this.opts.endDate,_346=_33e.getWeeksInMonth(_343,year),_347=_33e.getFirstDayOfWeekForMonth(_343,year),_348=_33e.getLastDayOfWeekForMonth(_343,year),date=new Date(year,_343,1-_347),days=[],_349=[],_34a={lastMonth:{selector:".month .last",month:_343-1},nextMonth:{selector:".month .next",month:_343+1},lastYear:{selector:".year .last",month:_343-12},nextYear:{selector:".year .next",month:_343+12}},_34b,_34c,_34d;for(var week=0;week<_346;week++){for(var _34e=0;_34e<7;_34e++){_34b=(week===0&&_34e<_347)?"last":(week===_346-1&&_34e>_348)?"next":"this";_34d=(date.getTime()===this.selectedDate.getTime());_34c=(date>=_344&&date<=_345);days.push(_33d.day(new Day(date,_34b,_34d,_34c,this.opts.dateFormat)));date=new Date(date.getFullYear(),date.getMonth(),date.getDate()+1);}_349.push(_33d.week(new Week(days)));days=[];}this.elem.innerHTML=_33d.month(new _34f(_349,_343,year));function _350(_351,_352){dojo.query(_351,self.elem).connect("click",function(evt){dojo.stopEvent(evt);self.viewMonth(_352);});};for(var _353 in _34a){_350(".controls "+_34a[_353].selector,_34a[_353].month);}dojo.query(".day",this.elem).connect("click",function(evt){dojo.stopEvent(evt);if(self.opts.selectFn){self.opts.selectFn(new Date(this.getAttribute("data-date")));}});dojo.query(".controls .month input",this.elem).connect("change",function(evt){var _354=_33e.MONTH_ABBRS.indexOf(_33f.capitalize(this.value.substr(0,3)));if(_354>-1){self.viewMonth(_354);}else{this.value=_33e.MONTH_NAMES[self.month];}});dojo.query(".controls .year input",this.elem).connect("change",function(evt){var year=+this.value;if(year>0&&year<100){year=_33e.guessCentury(year)+year;}self.viewMonth(self.month,year);});}});function _355(_356,_357){this.dayName=_356;this.dayAbbr=_357;};function Day(date,_358,_359,_35a,_35b){this.day=date.getDate();this.dayOfWeek=date.getDay();this.dayAbbr=_33e.DAY_ABBRS[date.getDay()];this.date=_33e.format(_35b,date);this.whichMonth=_358;this.isSelectedDay=_359;this.inDateRange=_35a;};function Week(days){this.days=days;};function _34f(_35c,_35d,year){this.weeks=_35c;this.month=_35d;this.monthName=_33e.MONTH_NAMES[_35d];this.year=year;this.dayAbbrs=dojo.map(_33e.DAY_ABBRS,function(_35e,i){return _33d.dayOfWeek(new _355(_33e.DAY_NAMES[i],_35e));});};}());}if(!dojo._hasResource["wsgc.js.GlobalTopNav"]){dojo._hasResource["wsgc.js.GlobalTopNav"]=true;dojo.provide("wsgc.js.GlobalTopNav");(function(dojo,_35f){var _360=false;var _361=WSI.isIPad;var _362=WSI.capabilities.touch;var _363=dojo.byId("topnav-container");if(_363){var _364=WSI.dataset.get(_363,"topnav");}else{return;}_365();_366();WSI.Events.delegate("mousemove",".hoverFade:not(.hoverFadeActive)",_367);if(_362){WSI.Events.delegate("touchstart",".hoverFade:not(.hoverFadeActive)",_367);}function _365(){dojo.query(".equalizeHeights").forEach(_368);};function _366(_369){var _36a=dojo.query("#topnav-container .nav-menu")[0];var _36b=50;var _36c=200;var _36d=function(){var _36e=dojo.contentBox(_36a);var _36f=false;var _370=-Infinity;dojo.query(".nav-columns",_36a).forEach(function(menu,_371){if(_371>1){dojo.style(menu,"left","auto");}var pos=dojo.marginBox(menu);var _372=menu;var _373=0;var _374=0;_36f=_36f||pos.l<_370;_370=pos.l;dojo.query(".col, .spotlight",menu).map(function(col){_373+=_364.configId==="PK"?dojo.marginBox(col).w+3:dojo.marginBox(col).w;});do{_374+=dojo.style(_372,"padding-left")+dojo.style(_372,"border-left-width");_372=_372.parentNode;}while(_372!==_36a.parentNode);_373+=_361?1:0;if(pos.l+_373+_374>_36e.w){dojo.style(menu,{width:_373+"px",left:Math.max(0,_36e.w-(_373+_374))+"px"});}});if(_36f&&_36b--){setTimeout(_36d,_36c);}};if(_369){_36d();}else{function _375(evt){_36d();WSI.Events.undelegate("mouseover",_375);if(_362){WSI.Events.undelegate("touchstart",_375);}};WSI.Events.delegate("mouseover","#topnav-container .nav-menu li",_375);if(_362){WSI.Events.delegate("touchstart","#topnav-container .nav-menu li",_375);}}};function _367(evt){dojo.stopEvent(evt);var elem=this;var _376=dojo.position(elem);var _377=dojo.query(".hoverFadeTarget",elem);var _378=true;if(_362){var _379;var _37a;dojo.connect(dojo.body(),"touchstart",function(evt){_379=evt.changedTouches[0].clientX;_37a=evt.changedTouches[0].clientY;});}var _37b=dojo.connect(dojo.body(),_362?"touchend":"mousemove",function(evt){if(_362){var _37c=Math.abs(Math.abs(evt.changedTouches[0].clientX)-Math.abs(_379))>20||Math.abs(Math.abs(evt.changedTouches[0].clientY)-Math.abs(_37a))>20;}var _37d=!_362?true:!_37c;if(_37d){var x=(_362?evt.changedTouches[0].clientX:evt.clientX)-_376.x;var y=(_362?evt.changedTouches[0].clientY:evt.clientY)-_376.y;if((_378&&(x<0||x>_376.w||y<0||y>_376.h))||WSI.utils.closest(".hoverFadeActive",evt.target)!==elem){_37e.stop();dojo.disconnect(_37b);var _37f=dojo.fx.combine(_377.map(function(_380){return dojo.animateProperty({node:_380,properties:{opacity:0},duration:50});}));dojo.connect(_37f,_378?"onBegin":"onEnd",function(){dojo.removeClass(elem,"hoverFadeActive");});_37f.play();_378=false;}}}),_37e=dojo.fx.combine(_377.map(function(_381){return dojo.animateProperty({node:_381,properties:{opacity:1},delay:_362?0:150,duration:150});}));if(_362){var temp=dojo.place("<span/>",dojo.body());setTimeout(function(){dojo.body().removeChild(temp);});}dojo.connect(_37e,"onEnd",function(){_378=false;});_37e.play();dojo.addClass(elem,"hoverFadeActive");};function _382(){if(_364.deferLoading){var url="/cacheable/"+_364.generations+"/globalnav/navigation.html";var self=this;WSI.utils.loadFragment({url:url,load:function(data){var _383=WSI.utils.toDom(data);var _384=dojo.query("#topnav-container .nav-columns");dojo.query(".nav-columns",_383).forEach(function(menu,i){dojo.style(menu,"opacity",!!_384.at(i).style("opacity")?1:0);_384.at(i).replaceWith(menu);});_365();_366(true);},error:function(_385){dojo.query("#topnav-container .nav-placeholder").remove();}});}};function _368(_386){var _387=0;dojo.query(">*",_386).forEach(function(elem){_387=Math.max(_387,dojo.contentBox(elem).h);}).style({minHeight:_387+"px"});};dojo.ready(_382);}(dojo));}if(!dojo._hasResource["wsgc.common.js.RichRelevance"]){dojo._hasResource["wsgc.common.js.RichRelevance"]=true;dojo.provide("wsgc.common.js.RichRelevance");(function(dojo,_388){var WSI=window.WSI||{},_389,_38a=4000;WSI.rr=WSI.rr||{};_389=WSI.rr;_389.init=function(_38b,url,_38c,_38d){R3_COMMON=new r3_common();R3_COMMON.setApiKey(_38b);R3_COMMON.setBaseUrl(url);R3_COMMON.setClickthruServer(_38c);R3_COMMON.setSessionId(dojo.cookie(_38d));R3_COMMON.setUserId(dojo.cookie("CoreID6"));};_389.addOnLoad=function(_38e,_38f){dojo.addOnLoad(function(){var _390=dojo.byId("rrRACRecsTemplate");_389.itemTemplate=_389.itemTemplate||WSI.utils.template(dojo.byId("rrProductRecsItemTemplate").innerHTML);if(_38e){_389.ratingTemplate=_389.ratingTemplate||WSI.utils.template(dojo.byId("ratingTemplate").innerHTML);}_389.pricingTemplate=_389.pricingTemplate||WSI.utils.template(dojo.byId("pricingTemplate").innerHTML);_389.currencyTemplate=_389.currencyTemplate||WSI.utils.template(dojo.byId("currencyTemplate").innerHTML);_389.renderCurrency=function(_391){return _389.currencyTemplate({name:WSI.config.currency,intl:WSI.config.international,amount:WSI.config.international?Number(_391).toFixed(2):Number(_391).toFixed(2).replace(/(\d)(\d\d\d)(?=\.)/g,"$1,$2")});};_389.setupPriceData=function(item){var _392=item.attr_sale==="1"?"sale":(item.attr_specialprice?"special":""),_393,_394,i,len;if(item.salepricecents!=="0"){item.attr_saleprice=item.salepricecents/100;}item.attr_price=item.pricecents/100;if(typeof WSI.ccyConv==="function"){_393=["attr_price","attr_saleprice","attr_specialprice","attr_lowestprice","attr_lowestsaleprice","attr_lowestspecialprice"];for(i=0,len=_393.length;i<len;i++){if(item[_393[i]]){item[_393[i]]=WSI.ccyConv(item[_393[i]]);}}}_394=item["attr_lowest"+_392+"price"]?_389.renderCurrency(item["attr_lowest"+_392+"price"])+" &ndash; "+_389.renderCurrency(item["attr_"+_392+"price"]):_389.renderCurrency(item["attr_"+_392+"price"]);item.priceData={saleOrSpecial:_392,price:_394,regularPrice:item.attr_lowestprice?_389.renderCurrency(item.attr_lowestprice)+" &ndash; "+_389.renderCurrency(item.attr_price):_389.renderCurrency(item.attr_price),hasSurcharge:false,surcharge:0};};if(_390){_389.racRecsTemplate=_389.racRecsTemplate||WSI.utils.template(_390.innerHTML);}});if(_38f&&!_389.racFirst){_389.getPIPRecs();}};_389.callback=function(recs){var _395,_396,_397,_398,_399=_389.templateInfo,_39a,j,i,len,_39b,_39c;if(recs.placements&&recs.placements.length>0){for(j=0,_39a=recs.placements.length;j<_39a;j++){_395=recs.placements[j].items;_397=recs.placements[j].placementType;if(_397==="item_page.searchlanding"){setupSearchLandingToggle();}if(_395.length>0){_389.recsShown=true;_398=[];for(i=0,len=_395.length;i<len;++i){_395[i].index=i+1;_39b=_395[i].url.indexOf("%3F")>-1?"%26":"%3F";_395[i].url=_395[i].url+_39b+encodeURIComponent("cm_src="+_389.templateInfo[_397].cmSrc);_395[i].cmel=_389.templateInfo[_397].cmEl?_389.templateInfo[_397].cmEl:_389.templateInfo[_397].cmElCat;_395[i].cmelcat=_389.templateInfo[_397].cmElCat;_395[i].image=_395[i].image.slice(0,-5)+_389.templateInfo[_397].imgSuffix+_395[i].image.slice(-4);_389.setupPriceData(_395[i]);_398.push(_389.itemTemplate(_395[i]));}dojo.place(dojo.trim((WSI.utils.template(dojo.byId(_389.templateInfo[_397].templateId).innerHTML))({placement:recs.placements[j],items:_398.join(""),index:j,elCat:_399[_397].cmElCat,cmel:_399[_397].cmEl?_399[_397].cmEl:_399[_397].cmElCat})),dojo.query(_399[_397].placeNode)[0],_399[_397].placeFirst?"first":"last");if(_395.length<=_389.templateInfo[_397].scrollLimit){dojo.query("#machine-recs-"+j+" .btn-next, #machine-recs-"+j+" .btn-prev").addClass("invisible");}}}}else{dojo.query(".rrFallback").removeClass("hide");}if(WSI.config.id==="pk"&&_389.templateInfo["item_page.pip2"]){if(recs.placements&&recs.placements.length===0){dojo.query(".you-may-also-like").addClass("hide");}}};_389.getPIPRecs=function(){if(WSI.isRetailStoreRequest()||typeof _389.templateInfo==="undefined"){return;}var _39d;if(R3_COMMON&&R3_COMMON.placementTypes){R3_COMMON.placementTypes="";R3_ITEM=_388,R3_ADDTOCART=_388;}for(_39d in _389.templateInfo){if(_389.templateInfo.hasOwnProperty(_39d)&&_39d!=="item_page.searchlanding"&&!(dojo.exists("WSI.isIPad")&&_39d==="item_page.rvi1")){R3_COMMON.addPlacementType(_39d);}}R3_COMMON.enableJson();R3_ITEM=new r3_item();if(WSI.primaryGroupId){R3_ITEM.setId(WSI.primaryGroupId);}else{R3_ITEM.setId(WSI.groupId);}R3_ITEM.setRecommendable(_389.isRecommendable);if(_389.category){R3_ITEM.addCategory(_389.category);}RR.jsonCallback=_389.callback;rr_flush_onload();r3();};_389.getRACRecs=function(_39e,_39f){if(WSI.isRetailStoreRequest()||typeof R3_COMMON==="undefined"){return;}var key;if(typeof _39f==="undefined"){_39f="#racOverlay";}if(R3_COMMON&&R3_COMMON.placementTypes){R3_COMMON.placementTypes="";R3_ITEM=_388,R3_ADDTOCART=_388,R3_CATEGORY=_388,R3_SEARCH=_388;}R3_COMMON.addPlacementType("add_to_cart_page.rac1");R3_COMMON.enableJson();R3_ADDTOCART=new r3_addtocart();if(_39e){for(key in _39e){if(_39e.hasOwnProperty(key)){R3_ADDTOCART.addItemIdToCart(key);}}}WSI.rr.racRecsShown=false;RR.jsonCallback=function(recs){var _3a0=WSI.rr,_3a1=dojo.byId("rrRACRecsTemplate"),_3a2,_3a3,i,len,_3a4=_3a0.cartType?_3a0.cartType.toUpperCase():"RAC",_3a5="Auto"+_3a4+"Rel",_3a6;if(recs.placements&&recs.placements.length>0&&!_3a0.racRecsShown&&(_3a0.racRecsTemplate||_3a1)){_3a0.racRecsTemplate=_3a0.racRecsTemplate||WSI.utils.template(_3a1.innerHTML);_3a3=recs.placements[0].items;_3a0.racRecsShown=true;if(_3a3.length>0){_3a2=[];for(i=0,len=_3a3.length;i<len;++i){_3a3[i].index=i+1;_3a6=_3a3[i].url.indexOf("%3F")>-1?"%26":"%3F";_3a3[i].url=_3a3[i].url+_3a6+encodeURIComponent("cm_src="+_3a5);_3a3[i].cmel="AUTORACREL";_3a3[i].cmelcat="AUTORACREL";_3a3[i].image=_3a3[i].image.slice(0,-5)+_3a0.racImgSuffix+_3a3[i].image.slice(-4);_3a0.setupPriceData(_3a3[i]);_3a2.push(_3a0.itemTemplate(_3a3[i]));}dojo.query(_39f+" .ymal")[0].innerHTML=dojo.trim(_3a0.racRecsTemplate({placement:recs.placements[0],items:_3a2.join("")}));dojo.query(_39f+" .ymal").removeClass("hide");}}else{_3a0.racMerchantRecs();}};rr_flush_onload();r3();};_389.getRecs=function(){if(WSI.isRetailStoreRequest()){return;}var _3a7=WSI.rr,_3a8;for(_3a8 in _3a7.templateInfo){if(_3a7.templateInfo.hasOwnProperty(_3a8)){R3_COMMON.addPlacementType(_3a8);}}R3_COMMON.enableJson();_3a7.recsShown=false;RR.jsonCallback=_3a7.callback;rr_flush_onload();r3();setTimeout(function(){if(!_3a7.recsShown){_3a7.recsShown=true;dojo.query(".rrFallback").removeClass("hide");for(_3a8 in _3a7.templateInfo){dojo.query(_3a7.templateInfo[_3a8].placeNode).addClass("hide");}}},_38a);};_389.addExclusions=function(_3a9,_3aa,max){var i,len;if(typeof max==="undefined"){max=_3aa.length;}for(i=0,len=Math.min(max,_3aa.length);i<len;i++){_3a9(_3aa[i]);}};setupSearchLandingToggle=function(){WSI.Events.delegate("click",".hide-recommendations-title, .show-recommendations-title",function(evt){dojo.stopEvent(evt);var _3ab=dojo.query(".search-landing-items");if(_3ab.length>0){if(dojo.hasClass(evt.target,"hide-recommendations-title")||dojo.hasClass(evt.target.parentNode,"hide-recommendations-title")){if(dojo.isIE){dojo.query("li",_3ab[0]).style("visibility","hidden");}dojo.fx.wipeOut({node:_3ab[0]}).play();}else{dojo.fx.wipeIn({node:_3ab[0],onEnd:function(){if(dojo.isIE){dojo.query("li",_3ab[0]).style("visibility","visible");}}}).play();}dojo.forEach(dojo.query("#recommendationsToggle > a, #recommendationsToggle > h2"),function(item){dojo.toggleClass(item,"hide");});}});};})(dojo);}
