/* Â© 2012 Williams-Sonoma Inc. All rights reserved. */
dojo.provide("wsgc");if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(_1,_2){return _1.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_2&&_2.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(_3,re,_4){if(!(_3 instanceof Array)){return re(_3);}var b=[];for(var i=0;i<_3.length;i++){b.push(re(_3[i]));}return dojo.regexp.group(b.join("|"),_4);};dojo.regexp.group=function(_5,_6){return "("+(_6?"?:":"")+_5+")";};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(_7,_8,_9){var c=document.cookie;if(arguments.length==1){var _a=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(_7)+"=([^;]*)"));return _a?decodeURIComponent(_a[1]):undefined;}else{_9=_9||{};var _b=_9.expires;if(typeof _b=="number"){var d=new Date();d.setTime(d.getTime()+_b*24*60*60*1000);_b=_9.expires=d;}if(_b&&_b.toUTCString){_9.expires=_b.toUTCString();}_8=encodeURIComponent(_8);var _c=_7+"="+_8,_d;for(_d in _9){_c+="; "+_d;var _e=_9[_d];if(_e!==true){_c+="="+_e;}}document.cookie=_c;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dojo.io.script"]){dojo._hasResource["dojo.io.script"]=true;dojo.provide("dojo.io.script");(function(){var _f=dojo.isIE?"onreadystatechange":"load",_10=/complete|loaded/;dojo.io.script={get:function(_11){var dfd=this._makeScriptDeferred(_11);var _12=dfd.ioArgs;dojo._ioAddQueryToUrl(_12);dojo._ioNotifyStart(dfd);if(this._canAttach(_12)){var _13=this.attach(_12.id,_12.url,_11.frameDoc);if(!_12.jsonp&&!_12.args.checkString){var _14=dojo.connect(_13,_f,function(evt){if(evt.type=="load"||_10.test(_13.readyState)){dojo.disconnect(_14);_12.scriptLoaded=evt;}});}}dojo._ioWatch(dfd,this._validCheck,this._ioCheck,this._resHandle);return dfd;},attach:function(id,url,_15){var doc=(_15||dojo.doc);var _16=doc.createElement("script");_16.type="text/javascript";_16.src=url;_16.id=id;_16.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_16);},remove:function(id,_17){dojo.destroy(dojo.byId(id,_17));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(_18){var dfd=dojo._ioSetArgs(_18,this._deferredCancel,this._deferredOk,this._deferredError);var _19=dfd.ioArgs;_19.id=dojo._scopeName+"IoScript"+(this._counter++);_19.canDelete=false;_19.jsonp=_18.callbackParamName||_18.jsonp;if(_19.jsonp){_19.query=_19.query||"";if(_19.query.length>0){_19.query+="&";}_19.query+=_19.jsonp+"="+(_18.frameDoc?"parent.":"")+dojo._scopeName+".io.script.jsonp_"+_19.id+"._jsonpCallback";_19.frameDoc=_18.frameDoc;_19.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_19.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){dojo.io.script._addDeadScript(dfd.ioArgs);}},_deferredOk:function(dfd){var _1a=dfd.ioArgs;if(_1a.canDelete){dojo.io.script._addDeadScript(_1a);}return _1a.json||_1a.scriptLoaded||_1a;},_deferredError:function(_1b,dfd){if(dfd.ioArgs.canDelete){if(_1b.dojoType=="timeout"){dojo.io.script.remove(dfd.ioArgs.id,dfd.ioArgs.frameDoc);}else{dojo.io.script._addDeadScript(dfd.ioArgs);}}return _1b;},_deadScripts:[],_counter:1,_addDeadScript:function(_1c){dojo.io.script._deadScripts.push({id:_1c.id,frameDoc:_1c.frameDoc});_1c.frameDoc=null;},_validCheck:function(dfd){var _1d=dojo.io.script;var _1e=_1d._deadScripts;if(_1e&&_1e.length>0){for(var i=0;i<_1e.length;i++){_1d.remove(_1e[i].id,_1e[i].frameDoc);_1e[i].frameDoc=null;}dojo.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){var _1f=dfd.ioArgs;if(_1f.json||(_1f.scriptLoaded&&!_1f.args.checkString)){return true;}var _20=_1f.args.checkString;if(_20&&eval("typeof("+_20+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(dojo.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(_21){return true;},_jsonpCallback:function(_22){this.ioArgs.json=_22;}};})();}if(!dojo._hasResource["dojo.NodeList-manipulate"]){dojo._hasResource["dojo.NodeList-manipulate"]=true;dojo.provide("dojo.NodeList-manipulate");(function(){function _23(_24){var _25="",ch=_24.childNodes;for(var i=0,n;n=ch[i];i++){if(n.nodeType!=8){if(n.nodeType==1){_25+=_23(n);}else{_25+=n.nodeValue;}}}return _25;};function _26(_27){while(_27.childNodes[0]&&_27.childNodes[0].nodeType==1){_27=_27.childNodes[0];}return _27;};function _28(_29,_2a){if(typeof _29=="string"){_29=dojo._toDom(_29,(_2a&&_2a.ownerDocument));if(_29.nodeType==11){_29=_29.childNodes[0];}}else{if(_29.nodeType==1&&_29.parentNode){_29=_29.cloneNode(false);}}return _29;};dojo.extend(dojo.NodeList,{_placeMultiple:function(_2b,_2c){var nl2=typeof _2b=="string"||_2b.nodeType?dojo.query(_2b):_2b;var _2d=[];for(var i=0;i<nl2.length;i++){var _2e=nl2[i];var _2f=this.length;for(var j=_2f-1,_30;_30=this[j];j--){if(i>0){_30=this._cloneNode(_30);_2d.unshift(_30);}if(j==_2f-1){dojo.place(_30,_2e,_2c);}else{_2e.parentNode.insertBefore(_30,_2e);}_2e=_30;}}if(_2d.length){_2d.unshift(0);_2d.unshift(this.length-1);Array.prototype.splice.apply(this,_2d);}return this;},innerHTML:function(_31){if(arguments.length){return this.addContent(_31,"only");}else{return this[0].innerHTML;}},text:function(_32){if(arguments.length){for(var i=0,_33;_33=this[i];i++){if(_33.nodeType==1){dojo.empty(_33);_33.appendChild(_33.ownerDocument.createTextNode(_32));}}return this;}else{var _34="";for(i=0;_33=this[i];i++){_34+=_23(_33);}return _34;}},val:function(_35){if(arguments.length){var _36=dojo.isArray(_35);for(var _37=0,_38;_38=this[_37];_37++){var _39=_38.nodeName.toUpperCase();var _3a=_38.type;var _3b=_36?_35[_37]:_35;if(_39=="SELECT"){var _3c=_38.options;for(var i=0;i<_3c.length;i++){var opt=_3c[i];if(_38.multiple){opt.selected=(dojo.indexOf(_35,opt.value)!=-1);}else{opt.selected=(opt.value==_3b);}}}else{if(_3a=="checkbox"||_3a=="radio"){_38.checked=(_38.value==_3b);}else{_38.value=_3b;}}}return this;}else{_38=this[0];if(!_38||_38.nodeType!=1){return undefined;}_35=_38.value||"";if(_38.nodeName.toUpperCase()=="SELECT"&&_38.multiple){_35=[];_3c=_38.options;for(i=0;i<_3c.length;i++){opt=_3c[i];if(opt.selected){_35.push(opt.value);}}if(!_35.length){_35=null;}}return _35;}},append:function(_3d){return this.addContent(_3d,"last");},appendTo:function(_3e){return this._placeMultiple(_3e,"last");},prepend:function(_3f){return this.addContent(_3f,"first");},prependTo:function(_40){return this._placeMultiple(_40,"first");},after:function(_41){return this.addContent(_41,"after");},insertAfter:function(_42){return this._placeMultiple(_42,"after");},before:function(_43){return this.addContent(_43,"before");},insertBefore:function(_44){return this._placeMultiple(_44,"before");},remove:dojo.NodeList.prototype.orphan,wrap:function(_45){if(this[0]){_45=_28(_45,this[0]);for(var i=0,_46;_46=this[i];i++){var _47=this._cloneNode(_45);if(_46.parentNode){_46.parentNode.replaceChild(_47,_46);}var _48=_26(_47);_48.appendChild(_46);}}return this;},wrapAll:function(_49){if(this[0]){_49=_28(_49,this[0]);this[0].parentNode.replaceChild(_49,this[0]);var _4a=_26(_49);for(var i=0,_4b;_4b=this[i];i++){_4a.appendChild(_4b);}}return this;},wrapInner:function(_4c){if(this[0]){_4c=_28(_4c,this[0]);for(var i=0;i<this.length;i++){var _4d=this._cloneNode(_4c);this._wrap(dojo._toArray(this[i].childNodes),null,this._NodeListCtor).wrapAll(_4d);}}return this;},replaceWith:function(_4e){_4e=this._normalize(_4e,this[0]);for(var i=0,_4f;_4f=this[i];i++){this._place(_4e,_4f,"before",i>0);_4f.parentNode.removeChild(_4f);}return this;},replaceAll:function(_50){var nl=dojo.query(_50);var _51=this._normalize(this,this[0]);for(var i=0,_52;_52=nl[i];i++){this._place(_51,_52,"before",i>0);_52.parentNode.removeChild(_52);}return this;},clone:function(){var ary=[];for(var i=0;i<this.length;i++){ary.push(this._cloneNode(this[i]));}return this._wrap(ary,this,this._NodeListCtor);}});if(!dojo.NodeList.prototype.html){dojo.NodeList.prototype.html=dojo.NodeList.prototype.innerHTML;}})();}if(!dojo._hasResource["dojo.NodeList-traverse"]){dojo._hasResource["dojo.NodeList-traverse"]=true;dojo.provide("dojo.NodeList-traverse");dojo.extend(dojo.NodeList,{_buildArrayFromCallback:function(_53){var ary=[];for(var i=0;i<this.length;i++){var _54=_53.call(this[i],this[i],ary);if(_54){ary=ary.concat(_54);}}return ary;},_filterQueryResult:function(_55,_56){var _57=dojo.filter(_55,function(_58){return dojo.query(_56,_58.parentNode).indexOf(_58)!=-1;});var _59=this._wrap(_57);return _59;},_getUniqueAsNodeList:function(_5a){var ary=[];for(var i=0,_5b;_5b=_5a[i];i++){if(_5b.nodeType==1&&dojo.indexOf(ary,_5b)==-1){ary.push(_5b);}}return this._wrap(ary,null,this._NodeListCtor);},_getUniqueNodeListWithParent:function(_5c,_5d){var ary=this._getUniqueAsNodeList(_5c);ary=(_5d?this._filterQueryResult(ary,_5d):ary);return ary._stash(this);},_getRelatedUniqueNodes:function(_5e,_5f){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_5f),_5e);},children:function(_60){return this._getRelatedUniqueNodes(_60,function(_61,ary){return dojo._toArray(_61.childNodes);});},closest:function(_62){var _63=this;return this._getRelatedUniqueNodes(_62,function(_64,ary){do{if(_63._filterQueryResult([_64],_62).length){return _64;}}while((_64=_64.parentNode)&&_64.nodeType==1);return null;});},parent:function(_65){return this._getRelatedUniqueNodes(_65,function(_66,ary){return _66.parentNode;});},parents:function(_67){return this._getRelatedUniqueNodes(_67,function(_68,ary){var _69=[];while(_68.parentNode){_68=_68.parentNode;_69.push(_68);}return _69;});},siblings:function(_6a){return this._getRelatedUniqueNodes(_6a,function(_6b,ary){var _6c=[];var _6d=(_6b.parentNode&&_6b.parentNode.childNodes);for(var i=0;i<_6d.length;i++){if(_6d[i]!=_6b){_6c.push(_6d[i]);}}return _6c;});},next:function(_6e){return this._getRelatedUniqueNodes(_6e,function(_6f,ary){var _70=_6f.nextSibling;while(_70&&_70.nodeType!=1){_70=_70.nextSibling;}return _70;});},nextAll:function(_71){return this._getRelatedUniqueNodes(_71,function(_72,ary){var _73=[];var _74=_72;while((_74=_74.nextSibling)){if(_74.nodeType==1){_73.push(_74);}}return _73;});},prev:function(_75){return this._getRelatedUniqueNodes(_75,function(_76,ary){var _77=_76.previousSibling;while(_77&&_77.nodeType!=1){_77=_77.previousSibling;}return _77;});},prevAll:function(_78){return this._getRelatedUniqueNodes(_78,function(_79,ary){var _7a=[];var _7b=_79;while((_7b=_7b.previousSibling)){if(_7b.nodeType==1){_7a.push(_7b);}}return _7a;});},andSelf:function(){return this.concat(this._parent);},first:function(){return this._wrap(((this[0]&&[this[0]])||[]),this);},last:function(){return this._wrap((this.length?[this[this.length-1]]:[]),this);},even:function(){return this.filter(function(_7c,i){return i%2!=0;});},odd:function(){return this.filter(function(_7d,i){return i%2==0;});}});}if(!dojo._hasResource["wsgc.js.SearchController"]){dojo._hasResource["wsgc.js.SearchController"]=true;dojo.provide("wsgc.js.SearchController");dojo.declare("wsgc.js.SearchController",null,{constructor:function(_7e,_7f){var _80,_81;if(_7e){this.searchField=_7e;}else{_81=dojo.byId("search-field");if(_81){this.searchField=_81;}}if(location.href.indexOf("https:")===0){_80=WSI.config.secureAppUrl;}else{_80=WSI.config.appUrl;}this.viewset=dojo.byId("type-ahead-viewset").value;if(!_80){_80="/";}this.searchUrl=_80+this.searchUrl;this.resultsUrl=_80+this.resultsUrl;this._searchResultsCache=[];this.currentResultSet=[];this.createSearchResultsDiv(_7f);this._setupLocalStorage();this._registerSearchEvents();if(this.searchField.value===""){this.displayHistoricalSearchTerms();}},MIN_CHARS:2,SEARCH_HISTORY_LIMIT:3,pause:200,_searchResultsCache:null,_ajaxSearcRequest:null,currentSearchTerm:"",currentResultSet:null,searchUrl:"services/typeahead/",searchUrlSuffix:"*/index.json",resultsUrl:"search/results.html?words=",searchResults:null,inlineSearchHeader:null,searchField:null,timeouts:null,xhrimeout:1500,highlightedTerm:-1,viewset:null,_registerSearchEvents:function(){var _82=this.searchField,_83=dojo.byId("searchform");if(_82){dojo.connect(_82,"onkeyup",this,function(evt){var _84=evt.keyCode,_85=evt.ctlKey,_86=evt.shiftKey;if((_84===38||_84===40)&&!(_85||_86)){this.highlightTerm(_84);}else{if(_84===27&&!(_85||_86)){this.searchField.value=this.currentSearchTerm;this.hideSearchResults();}else{if(_84===13&&!(_85||_86)){this.hideSearchResults();}else{this.setCurrentSearchTerm(evt.currentTarget.value);this.primeTimeout();}}}});dojo.connect(_82,"onfocus",this,this.displayHistoricalSearchTerms);dojo.connect(_82,"onblur",this,this.hideSearchResults);}if(_83){dojo.connect(_83,"submit",this,function(evt){this.stashHistoricalSearchTerm(this.searchField.value);this.cancelSearchRequest();});}},displaySearchResults:function(_87,_88,_89){_89=_89?_89:"Search Suggestions";if(dojo.isArray(_87)&&_87.length>0){var ul=document.createElement("ul"),_8a=document.createElement("li"),_8b=document.createElement("a"),li,a,_8c,_8d;_8b.href=this.resultsUrl;for(var i=0,len=_87.length;i<len;i++){_87[i]=_87[i].replace(/<[^>]+>/g,"");li=_8a.cloneNode(true);a=_8b.cloneNode(true);if(dojo.trim(_88)!==""){a.innerHTML=_87[i].replace(_88,"<span>"+_88+"</span>");}else{a.innerHTML=_87[i];}a.href=a.href+encodeURIComponent(_87[i]);li.appendChild(a);ul.appendChild(li);}_8d=this.searchResults;_8c=dojo.query("ul",_8d);if(_8c.length>0){_8c=_8c[0];_8c.parentNode.replaceChild(ul,_8c);}else{_8d.appendChild(ul);}this.inlineSearchHeader.innerHTML=_89;dojo.removeClass(_8d,"hide");this.highlightedTerm=-1;this.currentResultSet=_87;}else{this.hideSearchResults();}},displayHistoricalSearchTerms:function(){var _8e=dojo.fromJson(this.getLocalStorage("recentSearches")||"[]");if(_8e.length){this.displaySearchResults(_8e,"","Recent Searches");}},createSearchResultsDiv:function(_8f,_90){if(_8f){this.searchResults=_8f;}else{var _91=dojo.byId("inlineSearchResults"),_92;if(_91){this.searchResults=_91;}else{var _93=document.createElement("div");dojo.attr(_93,{id:"searchResults"});dojo.addClass(_93,"hide");this.searchField.parentNode.appendChild(_93);this.searchResults=_93;}}this.inlineSearchHeader=typeof (_90)!=="undefined"?_90:dojo.query(".inlineSearchHeader")[0];dojo.connect(this.searchResults,"onclick",this,this.searchResultClick);},hideSearchResults:function(){var _94=this;setTimeout(function(){dojo.addClass(_94.searchResults,"hide");dojo.query("ul",_94.searchResults).forEach("item.parentNode.removeChild(item);");},500);_94.currentResultSet=[];_94.highlightedTerm=-1;},queueSearch:function(){var _95={handleAs:"json",load:this.searchCallback,timeout:this.xhrimeout,searchTerm:this.currentSearchTerm,context:this};_95.url=this.searchUrl+this.viewset+"/"+encodeURIComponent(this.currentSearchTerm.replace(/\./g," "))+this.searchUrlSuffix;dojo.xhrGet(_95);},primeTimeout:function(){this.clearTimeout();if(this.currentSearchTerm.length>=this.MIN_CHARS){if(this._searchResultsCache[this.currentSearchTerm]){this.displaySearchResults(this._searchResultsCache[this.currentSearchTerm],this.currentSearchTerm);}else{var _96=this;this.timeouts=setTimeout(function(){_96.queueSearch();},this.pause);}}else{this.hideSearchResults();}},clearTimeout:function(){if(this.timeouts){clearTimeout(this.timeouts);}},setCurrentSearchTerm:function(_97){this.currentSearchTerm=dojo.trim(_97);},searchCallback:function(_98){if(_98&&_98.results&&this.searchTerm){var _99=_98.results,_9a=this.searchTerm,_9b=this.context;_9b.displaySearchResults(_99,_9a);_9b._searchResultsCache[_9a]=_99;}},highlightTerm:function(_9c){var _9d=this.currentResultSet,_9e=_9d.length,_9f,_a0,_a1,_a2;if(_9e>0){_9f=(_9c===38)?-1:1;_a0=this.highlightedTerm;_a1=_a0+_9f;if(_a1>-1&&_a1<_9e){_a2=dojo.query("li",this.searchResults);if(_a0>-1){dojo.removeClass(_a2[_a0],"highlighted");}dojo.addClass(_a2[_a1],"highlighted");this.searchField.value=_9d[_a1];this.highlightedTerm=_a1;}}},searchResultClick:function(evt){var _a3=evt.target,_a4,_a5;if(_a3.nodeName==="A"){_a5=_a3.innerHTML;_a4=(_a5.indexOf("<span>")>-1);_a5=_a5.replace(/<span>/,"").replace(/<\/span>/,"");this.stashHistoricalSearchTerm(_a5);if(typeof cmCreatePageElementTag==="function"){if(_a4){cmCreatePageElementTag("Type Ahead","Search Interactions");}else{cmCreatePageElementTag("Search history","Search Interactions");}}}},searchResultKeyPress:function(){if(dojo.query(".highlighted",this.searchResults).length){if(typeof cmCreatePageElementTag==="function"){cmCreatePageElementTag("Type Ahead","Search Interactions");}}},stashHistoricalSearchTerm:function(_a6){var _a7=dojo.fromJson(this.getLocalStorage("recentSearches")||"[]"),i,len,_a8=[],obj={},_a9=this.SEARCH_HISTORY_LIMIT;_a7.unshift(_a6.toLowerCase());for(i=0,len=_a7.length;i<len;i++){if(!obj[_a7[i]]){obj[_a7[i]]=true;_a8.push(_a7[i]);}if(_a8.length===_a9){break;}}this.setLocalStorage("recentSearches",dojo.toJson(_a8));},cancelSearchRequest:function(){if(this._ajaxSearcRequest&&typeof this._ajaxSearcRequest.cancel==="function"){this._ajaxSearcRequest.cancel();}},setLocalStorage:function(key,_aa){return null;},getLocalStorage:function(key){return null;},_setupLocalStorage:function(){var _ab,_ac=WSI.config,_ad=(location.protocol==="https:"),_ae,_af;if("localStorage" in window&&window["localStorage"]!==null){this.setLocalStorage=function(key,_b0,_b1){if(typeof key!=="string"||typeof _b0!=="string"){return null;}if(!_b1){if(_ad){dojo.cookie("temp_local",_b0,{domain:_ac.cookieSubDomain,path:"/",expires:365});}else{dojo.cookie("sec_local",_b0,{domain:_ac.cookieSubDomain,path:"/",secure:true,expires:365});}}return window.localStorage.setItem(key,_b0);};this.getLocalStorage=function(key){return window.localStorage.getItem(key);};if(_ad){_ae=dojo.cookie("sec_local");if(_ae){this.setLocalStorage("recentSearches",_ae,true);dojo.cookie("sec_local",null,{domain:_ac.cookieSubDomain,path:"/",secure:true,expires:-1});}}else{_af=dojo.cookie("temp_local");if(_af){this.setLocalStorage("recentSearches",_af,true);dojo.cookie("temp_local",null,{domain:_ac.cookieSubDomain,path:"/",expires:-1});}}}}});}if(!dojo._hasResource["wsgc.js.Utils"]){dojo._hasResource["wsgc.js.Utils"]=true;dojo.provide("wsgc.js.Utils");(function(_b2,_b3){var _b4={},_b5={},_b6=WSI.innerShiv,_b7=null,_b8=null,_b9=!!navigator.userAgent.match(/iPad/i);_b2.declare("wsgc.js.Utils",null,{constructor:function(_ba,_bb){this._savedCartCookie=_ba;this._sessionCartCookie=_bb;this._registerSearchFieldEvents();this._registerInputPlaceholders();this._registerPopupNewWindowEvents();this._registerPopulateShippingFromBilling();this._registerChangeShipToEvents();this._registerInterstitialEvents();this._registerViewAllCookieBaker();this._setBasketCount();this._registerMultiSelect();this._setCellHeightByRow();this._footerJOELPopup();this._SMSForm();this._sidebarSMSForm();this._sidebarJOELPopup();this._registerThankYouNotesEvents();this._registerPromotionsSignInEvents();this._registerAosDCPickupEvents();this._registerAsynchronousShopImages();this._emailAFriendPreview();this._registerShopSortBy();this._nuclearFooter();this._bloomReach();this._registerOpenInParentWindowLink();this._autoEqualizeHeights();this._registerHoverFadeHandler();this._topNavRightAlign();if(_b2.byId("billing-info")){this._reisterBillingSyncOrder();}if(_b2.byId("paymentInformation")){this._scrollToPaymentPageErrors();this._registerSVCApply();this._registerCreditCardFieldEvents();this._registerPlaceOrder();this._registerSVCLRC();this._registerPromoRemove();this._registerPromoApplyEvents();}_b2.query(".forgotPassword").forEach(_b2.hitch(this,function(_bc){_b2.connect(_bc,"onclick",this,"handleForgotPasswordClick");}));var _bd=_b2.byId("mobileEquiv");if(_bd){_b2.connect(_bd,"onclick",this,"handleMobileEquivClick");}var _be=_b2.byId("cartForm");if(_be){_b2.connect(_b2.byId("cartForm"),"onsubmit",function(evt){_b2.query(".delete-item").forEach("item.disabled = true");return true;});}_b2.query("#choose-another-category-drop").forEach(function(_bf){_b2.connect(_bf,"onchange",this,function(evt){location.href=evt.currentTarget.value;});});_b2.query(".goBack").forEach(function(_c0){_b2.connect(_c0,"onclick",function(evt){evt.preventDefault();history.back();});});this.handleGuestRegistryPassword();if((typeof bazaarVoiceHost!=="undefined"&&document.referrer.match("^"+bazaarVoiceHost))||document.referrer===""){_b2.query("#recipes .goBack").forEach("item.style.display='none';");}if(_b2.byId("searchresults")){this._searchUtils=new wsgc.js.SearchUtils();}this._updateBannerCookie();_b2.query(".mboxDefault").forEach(function(_c1){if(_b2.style(_c1,"visibility")!=="visible"){_b2.style(_c1,"visibility","visible");}});if(WSI.isEnabled("bvAnswers")&&_b2.exists("WSI.bvAnsCalls")){var _c2=this.callFunctions,_c3=function(){if(window.$BV&&typeof window.$BV.configure==="function"&&typeof window.$BV.ui==="function"){_c2(WSI.bvAnsCalls);}else{setTimeout(_c3,500);}};_c3();}if(WSI.offsiteRequests.length){this._handleOffsiteRequests(WSI.offsiteRequests);WSI.offsiteRequests=[];}},POPUP_DEFAULT_HEIGHT:560,POPUP_DEFAULT_WIDTH:820,POPUP_DEFAULT_RESIZE:1,POPUP_DEFAULT_NAME:"AppPopup",_savedCartCookie:"",_sessionCartCookie:"",MULTI_BUY_CARTURL:"/shoppingcart/style-and-quantity.html",BANNER_COOKIE:"i",_multi_buy_items:null,MULTI_BUY_ERROR:"<p class=\"error\">Please select a product to add to your cart.</p>",formSubmitted:false,_searchController:null,_searchUtils:null,savedCreditCardSelected:false,savedCreditCardInfo:null,viewset:"ecom",placeHolderText:{},_registerAosDCPickupEvents:function(){var _c4=_b2.query(".dcPickupCbx");if(_c4.length===0){return;}var _c5=function(_c6){var _c7=_c6.parentNode.parentNode;_b2.query(".billingAddressUpdate",_c7).forEach("item.checked=false;");_b2.query(".aosDCPickupToggle").addClass("hidden");_b2.query(".dcField",_c7).forEach("dojo.addClass(item, 'hide');");_b2.query(".dcField input[type='text'], .dcField select",_c7).forEach("item.value='';");};var _c8=function(_c9){var _ca=_c9.parentNode.parentNode;_b2.query(".aosDCPickupToggle").removeClass("hidden");_b2.query(".dcField",_ca).forEach("dojo.removeClass(item, 'hide');");_b2.query(".dcField input[type='text'], .dcField select",_ca).forEach("item.value='';");};_c4.forEach(function(_cb){if(_cb.checked){_c5(_cb);}_b2.connect(_cb,"onclick",null,function(evt){var _cc=evt.currentTarget;if(_cc.checked){_c5(_cc);}else{_c8(_cc);}});});},_setBasketCount:function(){var _cd=_b2.cookie(this._sessionCartCookie.toUpperCase());if(typeof _cd=="undefined"){_cd=_b2.cookie(this._savedCartCookie.toUpperCase());}if((typeof _cd=="undefined")||(_cd.split("|").length<4)){return;}var _ce=_cd.split("|")[3];if(_b2.byId("cart-count")){if(_ce!=="0"){_b2.byId("cart-count").innerHTML="<span> : </span>"+_ce;}else{_b2.byId("cart-count").innerHTML="";}}},_registerSearchFieldEvents:function(){var _cf=_b2.byId("search-field"),_d0=_b2.byId("btnSearch"),_d1=(location.protocol==="https:"),_d2=_b2.cookie("sec_local"),_d3=_b2.cookie("temp_local");this._setViewSet();if(_cf&&WSI.searchType!=="google"){if((_d3&&!_d1)||(_d1&&_d2)){this._searchController=new wsgc.js.SearchController();}this.default_search_text=_cf.value;_b2.connect(_cf,"onfocus",this,function(evt){if(evt.currentTarget.value===this.default_search_text){evt.currentTarget.value="";}if(!this._searchController&&this.viewset!=="reg"){this._searchController=new wsgc.js.SearchController();}});_b2.connect(_cf,"onblur",this,function(evt){if(evt.currentTarget.value==""){evt.currentTarget.value=this.default_search_text;}});}if(_d0){_b2.connect(_d0,"click",this,function(evt){var _d4=_b2.byId("searchform"),_d5=_b2.byId("search-field"),_d6="&cm_sp=OnsiteSearch-_-GlobalNav-_-Button",_d7;evt.preventDefault();if(_d4&&_d4.action&&_cf&&_cf.value&&typeof cmCreateManualLinkClickTag==="function"){_d7=_d4.action+"?words="+encodeURIComponent(_cf.value)+_d6;cmCreateManualLinkClickTag(_d7,"GLOBAL_NAV","SEARCH");}if(_b2.query(".highlighted",this.searchResults).length&&typeof cmCreatePageElementTag==="function"){cmCreatePageElementTag("Search Interactions","Type Ahead");}if(this._searchController){this._searchController.stashHistoricalSearchTerm(_cf.value);}_d4.submit();});}},_registerInterstitialEvents:function(){var _d8=null;_b2.query("form.interstitialForm #btn-edit").forEach(function(_d9){_b2.connect(_d9,"onclick",this,"_handleInterstitialEditClick");},this);_b2.query("form.interstitialForm .btnEditBehavior").forEach(function(_da){_b2.connect(_da,"onclick",this,"_handleInterstitialEditClick");},this);_b2.query("form.interstitialForm .btn-preview").forEach(function(_db){_b2.connect(_db,"onclick",this,"_handleInterstitialPreviewClick");},this);_b2.query("form.interstitialForm #btn-continue").forEach(function(_dc){_b2.connect(_dc,"onclick",this,"_handleInterstitialContinueClick");},this);_b2.query(".interstitialForm .btn-continue-path").forEach(function(_dd){_b2.connect(_dd,"onclick",this,"_handleInterstitialContinueClick");},this);},_registerViewAllCookieBaker:function(){_b2.query(".pagination .view-all").connect("onclick",function(evt){_b2.cookie("viewall","1",{"path":"/"});});_b2.query(".pagination .view-by-page").connect("onclick",function(evt){_b2.cookie("viewall","0",{"expires":-1});});},_registerPopupNewWindowEvents:function(){WSI.Events.delegate("click",".popup",function(evt){_b2.stopEvent(evt);var _de=_b2.attr(this,"rel");var _df;var _e0,_e1,_e2,_e3;try{_df=_b2.fromJson(_de);_e0=(_df&&_df.dim&&_df.dim.height)?_df.dim.height:this.POPUP_DEFAULT_HEIGHT;_e1=(_df&&_df.dim&&_df.dim.width)?_df.dim.width:this.POPUP_DEFAULT_WIDTH;_e2=(_df&&_df.dim&&_df.dim.resize)?_df.dim.resize:this.POPUP_DEFAULT_RESIZE;_e3=(_df&&_df.name)?_df.name:this.POPUP_DEFAULT_NAME;}catch(e){_e0=this.POPUP_DEFAULT_HEIGHT;_e1=this.POPUP_DEFAULT_WIDTH;_e2=this.POPUP_DEFAULT_RESIZE;_e3=this.POPUP_DEFAULT_NAME;}var _e4="toolbar=no,location=no,directories=no,scrollbars=1,resizable="+_e2+",height="+_e0+",width="+_e1+",screenX=4,screenY=4,top=4,left=4";var win=window.open(this.href,_e3,_e4);if(win&&win.focus){win.focus();}if(_b2.attr(this,"pophref")){evt.href=_b2.attr(this,"pophref");}});WSI.Events.delegate("click",".newWindow",function(evt){_b2.stopEvent(evt);var _e5=_b2.attr(this,"rel");var _e6;var _e7;try{_e6=_b2.fromJson(_e5);_e7=(_e6&&_e6.name)?_e6.name:this.POPUP_DEFAULT_NAME;}catch(e){_e7=this.POPUP_DEFAULT_NAME;}var _e8="toolbar=yes,location=yes,directories=no,scrollbars=1,resizable=1";var win=window.open(this.href,_e7,_e8);if(win&&win.focus){win.focus();}});_b2.query(".close").forEach(function(_e9){_b2.connect(_e9,"onclick",function(evt){evt.preventDefault();evt.stopPropagation();window.close();});});_b2.query(".closeAndContinue").forEach(function(_ea){_b2.connect(_ea,"onclick",this,"_newParentWindow");},this);_b2.query(".driveParent").forEach(function(_eb){_b2.connect(_eb,"onclick",this,"_redirectParent");},this);_b2.query(".redirectParent").forEach(function(_ec){_b2.connect(_ec,"onclick",this,"_redirectParentNoClose");},this);WSI.Events.delegate("click",".print, .printButton",function(evt){var _ed=_b2.query("img[data-async-src]"),_ee=_ed.length;evt.preventDefault();if(_ee==0){window.print();}else{_ed.forEach(function(e,i){e.setAttribute("src",e.getAttribute("data-async-src"));_b2.connect(e,"onload",function(){_ee--;if(_ee==0){window.print();}});e.removeAttribute("data-async-src");});}});_b2.query(".rollover").forEach(function(_ef){_b2.connect(_ef,"onmouseover",function(evt){var _f0=evt.currentTarget.src.replace("_off","_on");evt.currentTarget.src=_f0;});_b2.connect(_ef,"onmouseout",function(evt){var _f1=evt.currentTarget.src.replace("_on","_off");evt.currentTarget.src=_f1;});_b2.connect(_ef,"onfocus",function(evt){var _f2=evt.currentTarget.src.replace("_off","_on");evt.currentTarget.src=_f2;});_b2.connect(_ef,"onblur",function(evt){var _f3=evt.currentTarget.src.replace("_on","_off");evt.currentTarget.src=_f3;});});_b2.query(".delete-item").forEach(function(_f4){_b2.connect(_f4,"onclick",function(evt){_b2.stopEvent(evt);var _f5=_f4.name;document.cartForm[_f5].value="true";_b2.byId("cartForm").submit();});});_b2.query(".checkoutButton").forEach(function(_f6){_b2.connect(_f6,"onclick",function(evt){_b2.stopEvent(evt);_b2.byId("checkout").value="true";_b2.byId("chkmode").value=_b2.hasClass(evt.currentTarget,"expressButton")?"xpress":"normal";_b2.byId("cartForm").submit();});});},_registerChangeShipToEvents:function(){var _f7=_b2.byId("shipToChanged");if(!_f7){return;}opener.location="/shoppingcart/";opener.location.reload(true);window.close();},_registerSVCApply:function(){var _f8=_b2.byId("applysvc");if(!_f8){return;}_b2.connect(_f8,"onclick",function(evt){var _f9=_b2.byId("svcCard.svcCardNumber");var _fa=_b2.byId("svcCard.pinNumber");if(_f9&&_f9.value===""){if(_fa&&_fa.value===""){var _fb=_b2.byId("applyPromoBlock");if(_fb){var _fc=_b2.byId("promoCode");if(_fc.value!==""){_b2.byId("promoApply").value="yes";}}var _fd=_b2.byId("svcApply");_fd.value="yes";return;}}var _fd=_b2.byId("svcApply");_fd.value="yes";});},_reisterBillingSyncOrder:function(){var _fe=_b2.byId("billingSubmit");if(!_fe){return;}_b2.connect(_fe,"onclick",this,function(evt){if(this.formSubmitted){_b2.stopEvent(evt);}else{this.formSubmitted=true;}});},_registerPlaceOrder:function(){var _ff=_b2.byId("placeOrder"),_100=_b2.byId("buttonClick");if(!_ff){return;}_b2.connect(_ff,"onclick",this,function(evt){if(this.formSubmitted){evt.preventDefault();}else{this.formSubmitted=true;}});_b2.query("#action-buttons input[type='image']").connect("onclick",null,function(evt){if(_100){_100.value=evt.target.id;}});},_scrollToPaymentPageErrors:function(){var _101=_b2.byId("paymentInformation");if(!_101){return;}this.deferredPayment();var _102=_b2.byId("promotionsErrors");var _103=_b2.byId("svcError");var _104=_b2.byId("discountsApplied");var _105=_b2.byId("ccError");if(_102){if(_b2.query(".promotions-block").length>0){_b2.query(".promotions-block")[0].scrollIntoView(true);}}else{if(_103&&_b2.trim(_103.innerHTML)!==""){if(_b2.query(".gift-cards-and-help").length>0){_b2.query(".gift-cards-and-help")[0].scrollIntoView(true);}}else{if(_105&&_b2.trim(_105.innerHTML)!==""){if(_b2.query(".payment-information-block").length>0){_b2.query(".payment-information-block")[0].scrollIntoView(true);}}else{if(_104&&_b2.trim(_104.innerHTML)!==""){if(_b2.query(".gift-cards-and-help").length>0){_b2.query(".gift-cards-and-help")[0].scrollIntoView(true);}}}}}var _106=_b2.byId("creditCard.payType");if(_106.value==8){_b2.attr("creditCard.cardExpMonth","disabled",true);_b2.attr("creditCard.cardExpYear","disabled",true);_b2.attr("creditCard.cardVerificationNumber","disabled",true);}},_registerCreditCardFieldEvents:function(){var _107=_b2.byId("creditCard.payType"),_108=_b2.byId("icAvailable");if(!_107){return;}_b2.connect(_107,"onchange",_b2.hitch(this,function(evt){var _109=evt.target.value,_10a=_b2.byId("creditCard.cardExpMonth"),_10b=_b2.byId("creditCard.cardExpYear"),_10c=_b2.byId("creditCard.cardVerificationNumber"),_10d=_b2.byId("allowZeroExp"),_10e=_b2.byId("creditCard.cardNumber");if(this.savedCreditCardSelected&&_109!=="scc"){this.savedCreditCardSelected=false;_b2.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_b2.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_10a.value="";_10b.value="";_b2.attr(_10c,"disabled",false);_10c.value="";_b2.query("#edit-cc-link").forEach("dojo.addClass(item, 'hide');");}if(_109==="11"&&_108){this._displayCCFieldsForInstantCredit();}else{_b2.query(".sccHide, .icHide").forEach("dojo.removeClass(item, 'hide');");_b2.query(".sccDisable, .icDisable").forEach("dojo.attr(item, 'disabled', false);");_b2.attr(_10c,"disabled",false);_10d.value="N";_b2.removeClass(_10c,"hide");_10a.options[0].text="Month";_10b.options[0].text="Year";_10e.value="";if(_109==="scc"){this.displaySavedCreditCard();}}this.deferredPayment();}));if(_107.value==="11"&&_108||(!_b2.byId("ccError")&&_108&&_b2.query("option[value='11']",_b2.byId("creditCard.payType")).length>0)){_107.value="11";this._displayCCFieldsForInstantCredit();}else{if(_107.value==="scc"||(!_b2.byId("ccError")&&_b2.query("option[value='scc']",_b2.byId("creditCard.payType")).length>0)){this.displaySavedCreditCard();}}},displaySavedCreditCard:function(){var _10f,_110,ccvn,_111;if(!this.savedCreditCardInfo){_10f=_b2.byId("savedCCJSON");if(!_10f){return;}try{this.savedCreditCardInfo=_b2.fromJson(_10f.value);}catch(e){this.savedCreditCardInfo="";}if(this.savedCreditCardInfo===""){return;}}_110=this.savedCreditCardInfo;this.savedCreditCardSelected=true;_b2.byId("creditCard.payType").value="scc";_b2.byId("creditCard.cardExpMonth").value=_110.expireMonth;_b2.byId("creditCard.cardExpYear").value=_110.expireYear;WSI.formV=new wsgc.js.InlineValidation();WSI.formV.hideAllCreditCardErrorMsgs();ccvn=_b2.byId("creditCard.cardVerificationNumber");_111=_b2.query(".ccvn");if(_110.validate==="Y"||_110.cardType==="8"){var _112=_b2.byId("allowZeroExp");if(_112){_112.value="Y";}}else{_111.forEach("dojo.removeClass(item, 'sccHide');");ccvn.value="";}_b2.query(".sccHide").forEach("dojo.addClass(item, 'hide');");_b2.query(".sccDisable").forEach("dojo.attr(item, 'disabled', true);");_b2.query("#edit-cc-link").forEach("dojo.removeClass(item, 'hide');");},_displayCCFieldsForInstantCredit:function(){var _113=_b2.byId("creditCard.cardExpMonth"),_114=_b2.byId("creditCard.cardExpYear"),_115=_b2.byId("creditCard.cardVerificationNumber"),_116=_b2.byId("allowZeroExp"),_117=_b2.byId("creditCard.cardNumber");_b2.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_b2.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_113.selectedIndex=0;_113.options[0].text="**";_b2.attr(_113,"disabled",true);_114.selectedIndex=0;_114.options[0].text="****";_b2.attr(_114,"disabled",true);_b2.removeClass(_115,"hide");_b2.attr(_115,"disabled",true);_117.value="****************";_116.value="Y";_b2.query(".icHide").forEach("dojo.addClass(item, 'hide');");_b2.query(".icDisable").forEach("dojo.attr(item, 'disabled', true);");WSI.formV=new wsgc.js.InlineValidation();WSI.formV.hideAllCreditCardErrorMsgs();WSI.formV.hideAllErrorMsgs(_b2.byId("creditCard.cardVerificationNumber"));},_registerPopulateShippingFromBilling:function(){var _118=_b2.byId("applyBillingAddtoShipping");if(_118&&_b2.hasClass(_118,"billToShipCopy")){_b2.connect(_118,"onclick",function(evt){var _119=evt.target.checked;if(_119){_b2.attr("shiptoAddress.fullName",{"value":_b2.byId("billtoAddress.fullName").value,"disabled":"disabled"});_b2.attr("shiptoAddress.addrLine1",{"value":_b2.byId("billtoAddress.addrLine1").value,"disabled":"disabled"});_b2.attr("shiptoAddress.addrLine2",{"value":_b2.byId("billtoAddress.addrLine2").value,"disabled":"disabled"});_b2.attr("shiptoAddress.city",{"value":_b2.byId("billtoAddress.city").value,"disabled":"disabled"});document.getElementById("shiptoAddress.state").value=document.getElementById("billtoAddress.state").value;_b2.byId("shiptoAddress.state").selectedIndex=_b2.byId("billtoAddress.state").selectedIndex;_b2.attr("shiptoAddress.state","disabled","true");_b2.attr("shiptoAddress.zip",{"value":_b2.byId("billtoAddress.zip").value,"disabled":"disabled"});_b2.attr("shiptoAddress.dayPhone",{"value":_b2.byId("billtoAddress.dayPhone").value,"disabled":"disabled"});_b2.attr("shiptoAddress.eveningPhone",{"value":_b2.byId("billtoAddress.eveningPhone").value,"disabled":"disabled"});_b2.query("#ship-account-info input, #ship-account-info select").addClass("disabled");}else{_b2.query("#ship-account-info input, #ship-account-info select").forEach(function(elem){elem.removeAttribute("disabled");});_b2.query("#ship-account-info input, #ship-account-info select").removeClass("disabled");}});if(_b2.attr(_118,"checked")===true){_b2.query("#ship-account-info input, #ship-account-info select").attr("disabled","disabled").addClass("disabled");}}},handleForgotPasswordClick:function(evt){_b2.stopEvent(evt);var form=_b2.byId("loginForm");if(form){form.action=WSI.config.secureAppUrl+"account/password-request-confirmation.html";form.submit();}},handleMobileEquivClick:function(evt){if(WSI.config){_b2.cookie(WSI.config.sitePref,"mobile",{domain:WSI.config.cookieSubDomain,path:"/"});}},_handleInterstitialEditClick:function(evt){_b2.stopEvent(evt);evt.preventDefault();_b2.byId("isEditMode").value="1";this._postInterstitialForm();},_handleInterstitialPreviewClick:function(evt){if(_b2.byId("isPreview")){_b2.byId("isPreview").value="1";}if(evt&&evt.currentTarget&&evt.currentTarget.id){var _11a=evt.currentTarget.id.substr(10);if(_b2.byId("previewIndex")){_b2.byId("previewIndex").value=_11a;}}_b2.stopEvent(evt);this._postInterstitialForm();},_handleInterstitialContinueClick:function(evt){_b2.stopEvent(evt);_b2.byId("isEditMode").value="0";this._postInterstitialForm();},_postInterstitialForm:function(){if(_b2.query(".interstitialForm").length>0){var form=_b2.query(".interstitialForm")[0];form.submit();}},_forwardToExternalSite:function(win,url){if(win){win.close();}var _11b=window.open(url);},_registerSVCLRC:function(){var _11c="";_b2.query(".removeSVCLRCButton").forEach(function(_11d){_b2.connect(_11d,"onclick",function(evt){if(!_b2.attr(evt.currentTarget,"svcnumber")){return false;}_11c=_b2.attr(evt.currentTarget,"svcnumber");_b2.byId("removeSvcLrc").value=_11c;return true;});});},_registerPromoRemove:function(){var _11e="";_b2.query(".removePromoButton").forEach(function(_11f){_b2.connect(_11f,"onclick",function(evt){if(!_b2.attr(evt.currentTarget,"promoCode")){return false;}_11e=_b2.attr(evt.currentTarget,"promoCode");_b2.byId("releasePromo").value=_11e;return true;});});},_newParentWindow:function(evt){var win;var url=evt.currentTarget.href;if(_b2.isFF){try{if(_b2.exists("window.opener.WSI.utils._forwardToExternalSite")){window.opener.WSI.utils._forwardToExternalSite(window,url);}else{win=window.open(url);window.close();}}catch(e){win=window.open(url);window.close();}}else{win=window.open(url);window.close();}},_redirectParent:function(evt){evt.preventDefault();evt.stopPropagation();var url=evt.currentTarget.href;if(_b2.exists("window.opener")){window.opener.location.href=url;if(_b2.exists("window.opener.focus")){window.opener.focus();}}else{var win=window.open(url);window.close();}window.close();},_redirectParentNoClose:function(evt){evt.preventDefault();evt.stopPropagation();var url=evt.currentTarget.href;if(_b2.exists("window.opener")){window.opener.location.href=url;}else{var win=window.open(url);}},deferredPayment:function(){var _120=_b2.byId("creditCard.payType").value;var _121=_b2.byId("deferredPayment");if(_121){var _122=_b2.byId("deferPayments");var _123=_122.value.split(",");var _124=_b2.byId("creditCard.payType").options;var _125=_b2.byId("deferredCardType");for(var i=0;i<_123.length;i++){if(_120===_123[i]){for(var j=0;j<_124.length;j++){if(_124[j].value==_120){_125.innerHTML=_124[j].text;}}_b2.style(_121,{"display":"block"});break;}else{_b2.style(_121,{"display":"none"});}}}},_registerMultiSelect:function(){this._multi_buy_items=[];if(_b2.byId("productGroupIds")&&_b2.byId("productGroupIds").value!==""){this._multi_buy_items=_b2.byId("productGroupIds").value.split(",");}if(_b2.query("form[name='multiSelect']").length>0){_b2.query(".pagination a").connect("onclick",this,function(evt){var _126=_b2.query("form[name='multiSelect']")[0];var _127=evt.currentTarget.href;evt.preventDefault();this._writeMultiBuyItemsToField();_126.action=_127;_126.submit();});_b2.query(".btn-add-selected a").connect("onclick",this,function(evt){var _128=_b2.query("form[name='multiSelect']")[0];var _129=this.MULTI_BUY_CARTURL;evt.preventDefault();this._writeMultiBuyItemsToField();if(_b2.byId("productGroupIds")&&_b2.trim(_b2.byId("productGroupIds").value)!==""){_128.action=_129;_128.submit();}else{if(_b2.byId("pageErrorHook")){_b2.byId("pageErrorHook").innerHTML=this.MULTI_BUY_ERROR;window.scroll(0,0);}}});_b2.query(".muliBuyCheckbox").connect("onclick",this,"_handleMutliBuyCheckboxClick");}},_writeMultiBuyItemsToField:function(){if(_b2.byId("productGroupIds")&&this._multi_buy_items){_b2.byId("productGroupIds").value=this._multi_buy_items.join(",");}},_handleMutliBuyCheckboxClick:function(evt){var _12a=evt.currentTarget;var _12b=evt.currentTarget.value;if(_12a.checked){if(_b2.indexOf(this._multi_buy_items,_12b)===-1){this._multi_buy_items.push(_12b);}}else{if(_b2.indexOf(this._multi_buy_items,_12b)>-1){this._multi_buy_items.splice(_b2.indexOf(this._multi_buy_items,_12b),1);}}},_setCellHeightByRow:function(){if(!(_b2.byId("searchresults")||_b2.byId("one-shipment"))){if(_b2.query("ul.product-list").length>0){var _12c=_b2.query("ul.product-list");if(_12c.length>0){var _12d=_b2.query("div.subcat-list",_12c[0]).length>0;if(!_12d){_b2.forEach(_12c,function(row){var _12e=0;var _12f=_b2.query("li",row);_12f.forEach(function(el){_12e=_b2.marginBox(el).h>_12e?_b2.marginBox(el).h:_12e;});_12f.forEach(function(el){_b2.marginBox(el,{h:_12e});el.style.borderBottomWidth="1px";});});}else{_b2.forEach(_12c,function(row){var _130=0;var _131=_b2.query("li div.product-name a",row);_131.forEach(function(el){_130=_b2.marginBox(el).h>_130?_b2.marginBox(el).h:_130;});_131.forEach(function(el){var _132=_130-_b2.marginBox(el).h+"px";_b2.style(el,"marginTop",_132);});var _133=0;var _134=_b2.query("div.subcat-list",row);_134.forEach(function(el){_133=_b2.marginBox(el).h>_133?_b2.marginBox(el).h:_133;});_134.forEach(function(el){_b2.marginBox(el,{h:_133});});});}}}}},_footerJOELPopup:function(){var _135=_b2.byId("joinEmail");if(_135){_b2.connect(_135,"onsubmit",function(evt){evt.preventDefault();evt.stopPropagation();var url=document.forms.joinEmail.action+"?email="+document.forms.joinEmail.email.value;var _136="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_136);win.focus();});}},_SMSForm:function(){var _137=_b2.byId("joinSMS");if(_137){_b2.connect(_137,"onsubmit",function(evt){_b2.stopEvent(evt);var url=_137.action+"?mobileNumber="+encodeURIComponent(_137.mobileNumber.value),_138="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4",win=window.open(url,"joinsms",_138);win.focus();});}},_sidebarSMSForm:function(){var _139=_b2.byId("joinSMS2");if(_139){_b2.connect(_139,"onsubmit",function(evt){_b2.stopEvent(evt);var url=_139.action+"?mobileNumber="+encodeURIComponent(_139.mobileNumber.value),_13a="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4",win=window.open(url,"joinsms",_13a);win.focus();});}},_sidebarJOELPopup:function(){var _13b=_b2.byId("joinEmail2");if(_13b){_b2.connect(_13b,"onsubmit",function(evt){evt.preventDefault();evt.stopPropagation();var url=document.forms.joinEmail2.action+"?email="+document.forms.joinEmail2.email.value;var _13c="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=250,width=500,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_13c);win.focus();});}},_registerThankYouNotesEvents:function(){if(_b2.byId("registry-thank-you-notes")){_b2.query(".thankYouSort").forEach(function(item){_b2.connect(item,"onchange",null,function(evt){_b2.byId("frmSort").submit();});});_b2.query(".submitChanges").forEach(function(item){_b2.connect(item,"onclick",null,function(evt){_b2.byId("thank-you-notes-form").submit();});});}},_registerInputPlaceholders:function(){var _13d=[_b2.byId("footer-email-field"),_b2.byId("sidebar-email-field"),_b2.byId("footer-sms-field"),_b2.byId("sidebar-sms-field")],_13e=function(_13f,_140){_140.placeHolderText[_13f.id]=_13f.value;_b2.connect(_13f,"onfocus",_140,function(evt){var _141=evt.currentTarget;if(_141.value===this.placeHolderText[_13f.id]){_141.value="";}});_b2.connect(_13f,"onblur",_140,function(evt){var _142=evt.currentTarget;if(_142.value===""){_142.value=this.placeHolderText[_13f.id];}});},i,len;for(i=0,len=_13d.length;i<len;i++){if(_13d[i]){_13e(_13d[i],this);}}},_emailAFriendPreview:function(){var _143=_b2.byId("emailAFriend");if(!_143){return;}var _144=_b2.byId("btn-preview");_b2.connect(_144,"onclick",function(evt){_b2.byId("preview").value="true";});},_registerPromotionsSignInEvents:function(){var _145=_b2.byId("apply-tax-exemption");if(!_145){return;}var _146=_b2.byId("yesexemption");if(_b2.byId("yesexemption").checked){_b2.removeClass("termsBlock","hide");}var _147=_b2.byId("noexemption");_b2.connect(_146,"onclick",function(evt){_b2.byId("termsBlock").className="";_b2.query(".message").forEach("item.className='hide';");});_b2.connect(_147,"onclick",function(evt){_b2.byId("termsBlock").className="hide";_b2.query(".message").forEach("item.className='hide';");});_b2.connect(_b2.byId("accepttoc"),"onclick",function(evt){_b2.query(".message").forEach("item.className='hide';");});if(_b2.byId("yesexemption").checked&&_b2.byId("accepttoc").checked){_b2.query(".message").forEach("item.className='hide';");}if(_b2.byId("noexemption").checked){_b2.query(".message").forEach("item.className='hide';");_b2.query("#termsBlock").forEach("item.className='hide';");}},_registerShopSortBy:function(){if(!_b2.byId("facetedNavContainer")){_b2.query("#sortBy").connect("onchange",null,function(evt){var _148={best:"Best Match",priceAsc:"Price Low to High",priceDesc:"Price High to Low",ratingAsc:"Rating Low to High",ratingDesc:"Rating High to Low","new":"New",bestSeller:"Best Seller"};if(typeof cmCreatePageElementTag==="function"){var _149=window.location.pathname.substr(0,8).match("/search/")?"Search Interactions":"Shop Interactions";cmCreatePageElementTag("Sort_"+_148[evt.currentTarget.value],_149);}if(_b2.byId("regListForm")){_b2.byId("regListForm").submit();}else{if(_b2.byId("sortByForm")){_b2.byId("sortByForm").submit();}}});}},_registerPromoApplyEvents:function(){var _14a=_b2.byId("applyPromoBlock");if(_14a){var _14b=_b2.byId("applyPromo");if(_14b){_b2.connect(_14b,"onclick",function(evt){_b2.byId("promoApply").value="yes";});}}else{return;}},bvRatingsDisplayed:function(_14c,_14d,_14e,_14f,_150){var _151=_b2.byId("BVReviewsContainer");var _152=_b2.byId("BVSecondaryCustomerRatings");var _153=_b2.byId("BVSVPLinkContainer");var _154=_b2.byId("reviews-controls");var _155=0;if(_14c>0){if(_151){_b2.removeClass("BVReviewsContainer","hide");_151.style.display="block";}if(_152){_151.style.display="block";}if(_153){_153.style.display="block";}if(_154){_154.style.display="block";}var _156;if(!cmCategoryId||cmCategoryId===""){if(_b2.byId("pipCategoryId")){_156=_b2.byId("pipCategoryId").value;}else{_156=" ";}if(_b2.byId("registrantid")&&(_b2.byId("registrantid").value!="")){_156="R:"+_156;}else{_156="E:"+_156;}}else{_156=cmCategoryId;}var _157="PRODUCT";var type;if(_150.length>7){type=_150.substring(0,7);if(type.toUpperCase()==="RECIPE."){_157="RECIPE";}}if(typeof cmCreateConversionEventTag==="function"&&_b2.query(".read-reviews a").length&&typeof WSI.groupName!=="undefined"){_b2.query(".read-reviews a").connect("onclick",function(evt){var _158=WSI.groupName;var _159=_150.toUpperCase()+"-_-"+_158.toUpperCase()+"-_-"+_156.toUpperCase();if(_157==="RECIPE"){_159="-_--_--_--_-"+_158.toUpperCase();}cmCreateConversionEventTag(_157+" REVIEWS: READ A REVIEW","2",_157+" REVIEWS","0",_159);});}if(typeof cmCreateConversionEventTag==="function"&&_151&&typeof WSI.groupName!=="undefined"){_b2.query("a[name*='ReadAllReviews']",_151).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _15a=WSI.groupName;var _15b=_150.toUpperCase()+"-_-"+_15a.toUpperCase()+"-_-"+_156.toUpperCase();if(_157==="RECIPE"){_15b="-_--_--_--_-"+_15a.toUpperCase();}cmCreateConversionEventTag(_157+" REVIEWS: USER REVIEWS","2",_157+" REVIEWS","0",_15b);if(_b2.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_151&&typeof WSI.groupName!=="undefined"){_b2.query("a[name*='AddPositiveFeedback']",_151).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _15c=WSI.groupName;var _15d=_150.toUpperCase()+"-_-"+_15c.toUpperCase()+"-_-"+_156.toUpperCase();if(_157==="RECIPE"){_15d="-_--_--_--_-"+_15c.toUpperCase();}cmCreateConversionEventTag(_157+" REVIEWS: HELPFUL REVIEW","2",_157+" REVIEWS","0",_15d);});});}if(typeof cmCreateConversionEventTag==="function"&&_151&&typeof WSI.groupName!=="undefined"){_b2.query("a[name*='AddNegativeFeedback']",_151).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _15e=WSI.groupName;var _15f=_150.toUpperCase()+"-_-"+_15e.toUpperCase()+"-_-"+_156.toUpperCase();if(_157==="RECIPE"){_15f="-_--_--_--_-"+_15e.toUpperCase();}cmCreateConversionEventTag(_157+" REVIEWS: UNHELPFUL REVIEW","2",_157+" REVIEWS","0",_15f);});});}if(typeof cmCreateConversionEventTag==="function"&&_151&&typeof WSI.groupName!=="undefined"){_b2.query(".BVRRSocialBookmarkingSharingLinkFacebook",_151).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _160=WSI.groupName;var _161=_150.toUpperCase()+"-_-"+_160.toUpperCase()+"-_-"+_156.toUpperCase()+"-_-FACEBOOK";if(_157==="RECIPE"){_161="-_--_--_-FACEBOOK-_-"+_160.toUpperCase();}cmCreateConversionEventTag(_157+" REVIEWS: SHARED REVIEW","2",_157+" REVIEWS","0",_161);if(_b2.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_151&&typeof WSI.groupName!=="undefined"){_b2.query(".BVRRSocialBookmarkingSharingLinkDigg",_151).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _162=WSI.groupName;var _163=_150.toUpperCase()+"-_-"+_162.toUpperCase()+"-_-"+_156.toUpperCase()+"-_-DIGG";if(_157==="RECIPE"){_163="-_--_--_-DIGG-_-"+_162.toUpperCase();}cmCreateConversionEventTag(_157+" REVIEWS: SHARED REVIEW","2",_157+" REVIEWS","0",_163);if(_b2.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_151&&typeof WSI.groupName!=="undefined"){_b2.query(".BVRRSocialBookmarkingSharingLinkDelIcioUs",_151).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _164=WSI.groupName;var _165=_150.toUpperCase()+"-_-"+_164.toUpperCase()+"-_-"+_156.toUpperCase()+"-_-DELICIOUS";if(_157==="RECIPE"){_165="-_--_--_-DELICIOUS-_-"+_164.toUpperCase();}cmCreateConversionEventTag(_157+" REVIEWS: SHARED REVIEW","2",_157+" REVIEWS","0",_165);if(_b2.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_151&&typeof WSI.groupName!=="undefined"){_b2.query(".BVRRSocialBookmarkingSharingLinkTwitter",_151).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _166=WSI.groupName;var _167=_150.toUpperCase()+"-_-"+_166.toUpperCase()+"-_-"+_156.toUpperCase()+"-_-TWITTER";if(_157==="RECIPE"){_167="-_--_--_-TWITTER-_-"+_166.toUpperCase();}cmCreateConversionEventTag(_157+" REVIEWS: SHARED REVIEW","2",_157+" REVIEWS","0",_167);if(_b2.isIE){evt.preventDefault();}});});}if(typeof cmCreateConversionEventTag==="function"&&_154&&typeof WSI.groupName!=="undefined"){_b2.query("#all-reviews-container a",_154).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){var _168=WSI.groupName;var _169=_150.toUpperCase()+"-_-"+_168.toUpperCase()+"-_-"+_156.toUpperCase();if(_157==="RECIPE"){_169="-_--_--_--_-"+_168.toUpperCase();}cmCreateConversionEventTag(_157+" REVIEWS: READ ALL REVIEWS","2",_157+" REVIEWS","0",_169);});});}if(typeof cmCreateConversionEventTag==="function"&&_b2.byId("BVCustomerRatings")&&typeof WSI.groupName!=="undefined"){_b2.query("a[name*='TrackingTag_Rating_Summary']",_b2.byId("BVCustomerRatings")).forEach(function(item){_b2.connect(item,"onclick",null,function(evt){_b2.byId("bv-tabs").scrollIntoView();var _16a=_b2.query(".tab.bv-rr")[0],_16b;if(document.createEvent){_16b=document.createEvent("HTMLEvents");_16b.initEvent("click",true,true);return !_16a.dispatchEvent(_16b);}else{_16b=document.createEventObject();return _16a.fireEvent("onclick",_16b);}});});}}else{if(_153){_154.style.display="none";}}},bvCheckDisplayLoadState:function(){if(!BVisLoaded){var page=_b2.byId("BVFrame").src;page="http://reviews.williams-sonoma.com/logging?page="+escape(page);_b2.byId("BVReviewsContainer").innerHTML="<!-- Review retrieval timed out -->";}},bvCheckPagesLoadState:function(){if(!BVisLoaded){_b2.byId("BVSubmissionFrame").src="";_b2.byId("BVSubmissionContainer").innerHTML="Review Submission Currently Unavailable";}},_registerAsynchronousShopImages:function(){var _16c=_b2.query("img[data-async-src]");this.asyncImages=[];this.currentImage=[0,null];if(_16c.length){_16c.forEach(function(e){this.asyncImages.push([_b2.coords(e,true).y,e]);},this);_b8=_b8||_b2.connect(window,"onscroll",this,this._loadAsynchronousShopImages);this._loadAsynchronousShopImages();}},_loadAsynchronousShopImages:function(){bottomThreshold=(document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||window.innerHeight)*2;while(this.asyncImages.length&&(this.currentImage[0]<bottomThreshold)){this.currentImage=this.asyncImages.shift();if(_b2.attr(this.currentImage[1],"data-async-src")){this.currentImage[1].setAttribute("src",_b2.attr(this.currentImage[1],"data-async-src"));this.currentImage[1].removeAttribute("data-async-src");}}},_handleOffsiteRequests:function(_16d){_16d=_16d||[];for(var i=0,len=_16d.length;i<len;++i){var _16e=_16d[i],type=_16e[0],url=_16e[1],_16f=_16e[2]||{};switch(type){case "css":this.loadStylesheet(url,_16f);break;case "js":this.loadScript(url);break;}}},loadScript:function(url,_170){if(this.isScriptLoaded(url)){return;}var _171=new _b2._Url(document.location.href),_172=new _b2._Url(url),self=this,_173;if(_171.scheme===_172.scheme&&_171.host===_172.host&&_171.port===_172.port){_b2.xhrGet({url:url,load:function(_174){self._xhrScript(_174);self.setScriptLoaded(url);if(_170&&_b2.isFunction(_170)){_170();}}});}else{this.docHead=this.docHead||_b2.query("head")[0];_173=_b2.create("script",{type:"text/javascript"});_173[_b2.isIE?"onreadystatechange":"onload"]=function(){if(!_b2.isIE||this.readyState==="loaded"||this.readyState==="complete"){self.setScriptLoaded(url);if(_170&&_b2.isFunction(_170)){_170();}}};_173.src=url;_b2.place(_173,this.docHead);}},loadStylesheet:function(url,_175,_176){if(this.isStylesheetLoaded(url)){return;}var _177=document.createElement("link"),self=this;_b2.attr(_177,_b2.mixin(_175||{},{rel:"stylesheet",type:"text/css",href:url,onload:function(){if(_176){_176();}}}));this.docHead=this.docHead||_b2.query("head")[0];this.docHead.appendChild(_177);self.setStylesheetLoaded(url);},setStylesheetLoaded:function(urls){if(_b2.isArray(urls)){for(var i=0,len=urls.length;i<len;++i){_b4[urls[i]]=true;}}else{_b4[urls]=true;}},setScriptLoaded:function(urls){if(_b2.isArray(urls)){for(var i=0,len=urls.length;i<len;++i){_b5[urls[i]]=true;}}else{_b5[urls]=true;}},isStylesheetLoaded:function(url){return _b4[url];},isScriptLoaded:function(url){return _b5[url];},_xhrScript:function(_178){if(_178!==""){var _179,_17a;_179=_b2.query("head")[0];_17a=document.createElement("script");_17a.type="text/javascript";_17a.text=_178;_179.appendChild(_17a);}},_setViewSet:function(){var _17b=_b2.byId("type-ahead-viewset");if(_17b&&_17b.value&&_17b.value!=="ecom"){this.viewset=_17b.value;}},handleGuestRegistryPassword:function(){var _17c=_b2.byId("guestPassword");if(_17c){_b2.connect(_17c,"onfocus",function(evt){_b2.query("#securityLevelPassword").forEach("item.checked='checked';");});}},loadFragment:function(_17d,_17e){if(_b2.isObject(_17d)){_17e=_17d;_17d="GET";}var href=WSI.utils.stripBaseUrlWhenHrefHasAnchor(_17e.url);function load(data){data=data.replace(/<script[^>]+type=(['"])text\/javascript\1[^>]*>([\s\S]*?)<\/script>/gim,function(_17f,_180,src){if(_b2.trim(src)){(window.execScript||function(src){window["eval"].call(window,src);})(src);}return "";});if(_17e.load){_17e.load(data);}_b2.publish("/fragment/loaded",[{href:href,data:data}]);};if(href.length&&href.charAt(0)==="#"){try{href=href.substr(1);var _181=_b2.byId(href);if(_181.nodeName==="SCRIPT"&&_b2.attr(_181,"type")==="text/html"){var _182=arguments.callee.templates||(arguments.callee.templates={});_182[href]=_182[href]||WSI.utils.template(_b2.trim(_181.innerHTML));_181=_182[href]();}else{_181=_181.innerHTML;}load(_181);}catch(error){if(_17e.error){_17e.error(error);}}}else{_b2.xhr(_17d,_b2.mixin({},_17e,{load:load,error:function(_183){if(_17e.error){_17e.error(_183);}}}));}},connect:function(obj,_184,_185,_186,_187){var _188=_184.replace(/^on/,"");if(WSI.earlyEventQueues&&WSI.earlyEventQueues[_188]&&obj){var _189=WSI.earlyEventQueues[_188][obj];if(_189&&_189!=="drained"){var ctx=_185||obj;var _18a=typeof _186==="string"?ctx[_186]:_186;while(_189.length){var evt=_189.shift();_18a.call(ctx,_187?evt:_b2.fixEvent(evt));}WSI.earlyEventQueues[_188][obj]="drained";}}return _b2.connect.apply(_b2,arguments);},stopEarlyEventCapture:function(){for(var _18b in (WSI.earlyEventQueues||{})){if(document.detachEvent){document.detachEvent("on"+_18b,WSI.capturingEventHandler);}else{document.removeEventListener(_18b,WSI.capturingEventHandler,true);}}WSI.earlyEventQueues={};_b2.query(".captureEarlyEvents").removeClass("earlyEventsCaptured").removeClass("captureEarlyEvents");},templateSettings:{evaluate:/\[%([\s\S]+?)%\]/g,interpolate:/\[%=([\s\S]+?)%\]/g},template:function(str,data){var c=this.templateSettings;var tmpl="var __p=[],print=function(){__p.push.apply(__p,arguments);};"+"with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(_18c,code){return "',"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+",'";}).replace(c.evaluate||null,function(_18d,code){return "');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('";}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var func=new Function("obj",tmpl);return data?func(data):func;},_bloomReach:function(){var _18e=_b2.byId("br-more-products-widget"),_18f=_b2.byId("br-related-searches-widget");if(_18e){_b2.connect(_18e,"onclick",this,function(evt){var _190=evt.target,_191;if(_b2.hasClass(_190.parentNode,"br-more-widget-view")){evt.preventDefault();_b2.query(".br-more-widget",_18e).forEach("item.style.display='none';");_191=_b2.attr(_190,"href").replace(/^[^#]*/,"");if(_191){_b2.query(_191,_18e).forEach("dojo.removeClass(item, 'hide');");}if(_18f){this._equalizeHeight(_18e,_18f);}}else{if(_b2.hasClass(_190.parentNode,"br-more-widget-popup-close")){evt.preventDefault();_b2.query(".br-more-widget-popup",_18e).forEach("dojo.addClass(item, 'hide');");_b2.query(".br-more-widget",_18e).forEach("item.style.display='block';");if(_18f){this._equalizeHeight(_18e,_18f);}}}});}if(_18e&&_18f){this._equalizeHeight(_18e,_18f);}},_equalizeHeight:function(_192,_193){var _194;if(_192&&_193){_192.style.height="auto";_193.style.height="auto";_194=Math.max(_b2.marginBox(_192).h,_b2.marginBox(_193).h)-1;_b2.marginBox(_192,{h:_194});_b2.marginBox(_193,{h:_194});}},registerAvsOverrideElementTagHandler:function(_195,_196,_197){if((_195||_195==="")&&_196&&_197){_b2.query("form[name="+_195+"]").connect("submit",function(evt){_196=_b2.isArray(_196)?_196:[_196];_b2.some(_196,function(_198){var _199=_b2.byId(_198+".overideAddressVerification");if(_199&&_199.checked){cmCreatePageElementTag(_197,"AVS",null,null,null,"");return true;}});});}},_updateBannerCookie:function(){var _19a;if(_b2.exists("WSI.bannerCookie")){_19a=WSI.bannerCookie;if(_19a.cookie&&_19a.value){_b2.cookie(_19a.cookie,_19a.value,{path:"/",domain:_19a.domain});}}},swapClasses:function(_19b,_19c,_19d){if(_19b.nodeName){_19b=_b2.NodeList(_19b);}_19b.filter("."+_19c).removeClass(_19c).addClass(_19d);return _19b;},closest:function(_19e,_19f){var node=_19f;do{if(_b2._filterQueryResult([node],_19e).length){return node;}}while((node=node.parentNode)&&node.nodeType===1);},callFunctions:function(_1a0){if(_b2.isArray(_1a0)){for(var i=0,len=_1a0.length;i<len;i++){if(typeof _1a0[i]==="function"){_1a0[i]();}}}},initXHRDialog:function initXHRDialog(_1a1,_1a2){var _1a3,_1a4,i,len,_1a5;_b2.query(".XHRForm").forEach(function(item){_b2.connect(item,"onsubmit",null,function(evt){var _1a6="get",_1a7=10000;_b2.stopEvent(evt);if(this.submitted){return;}else{this.submitted=true;}if(item.method.toUpperCase()==="POST"){_1a6="post";}_b2.xhr(_1a6,{timeout:_1a7,form:item,handleAs:"text",load:function(data,_1a8){var _1a9=WSI.config,_1aa,_1ab=_1a8.xhr;_1aa=_1ab.getResponseHeader("Location");if(_1aa){window.location.href=_1aa;}else{if(data&&data.length){_1a1.containerNode.innerHTML=data;initXHRDialog(_1a1,_1a2);}else{_1a1.close();}}},error:function(_1ac,_1ad){this.submitted=false;_b2.place("<ul class='error'><li>A communication error occurred - Please try gain.</li></ul>",_1a1.containerNode,"first");}});});});if(_1a2){_1a2=_b2.isArray(_1a2)?_1a2:[_1a2];for(i=0,len=_1a2.length;i<len;i++){_1a3=_1a2[i];if(typeof _1a3==="function"){_1a3(this);}}}_b2.query(".closeButton").forEach(function(item){_b2.connect(item,"onclick",_1a1,function(evt){_b2.stopEvent(evt);this.close();});});},addDialogLoadHandler:function addDialogLoadHandler(_1ae,_1af){WSI.dialogLoadHandlers=WSI.dialogLoadHandlers||{};WSI.dialogLoadHandlers[_1ae]=_1af;},removeDialogLoadHandler:function removeDialogLoadHandler(_1b0){if(WSI.dialogLoadHandlers){delete WSI.dialogLoadHandlers[_1b0];}},smoothScrollTo:function(_1b1){if(_b7!=null){return;}_b7=_1b1;if(_1b1){var _1b2=function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}return -c/2*((--t)*(t-2)-1)+b;};var _1b3=function(elem){var _1b4=0;if(elem.offsetParent){do{_1b4+=elem.offsetTop;}while(elem=elem.offsetParent);}return _1b4;};var _1b5=_1b3(_1b1);var _1b6=window.pageYOffset||document.documentElement.scrollTop;var _1b7=_1b5-_1b6;var _1b8=300;var _1b9=15;var wait=_1b8/_1b9;var _1ba=0;var _1bb=setInterval(function(){var cur=_1b2(_1ba,_1b6,_1b7,_1b9);window.scrollTo(0,cur);if(_1ba===_1b9){clearInterval(_1bb);_b7=null;}_1ba++;},wait);}},getBrowserScrollbarWidth:function(){return WSI.config.scrollbarWidth||(WSI.config.scrollbarWidth=(function(){var _1bc=_b2.place("<div style=\"position:absolute;top:0;left:0;visibility:hidden;width:200px;height:150px;overflow:hidden;margin-left:-9999px;\"/>",_b2.body());var _1bd=_b2.place("<p style=\"width:100%;height:200px;\"/>",_1bc);var _1be=_1bd.offsetWidth;_b2.style(_1bc,"overflow","scroll");var _1bf=_1bd.offsetWidth;if(_1be===_1bf){_1bf=_1bc.clientWidth;}_b2.destroy(_1bc);return _1be-_1bf;})());},_nuclearFooter:function(){_b2.query(".nso-title span").forEach(function(elem){_b2.connect(elem,"onclick",function(evt){var _1c0="nso-"+elem.id;if(_b2.style(_1c0,"visibility")=="visible"){_b2.style(_1c0,"visibility","hidden");_b2.byId(elem.id).innerHTML="[+]";}else{_b2.query(".nso-brand").forEach(function(_1c1){_b2.style(_1c1,"visibility","hidden");});_b2.query(".nso-title span").forEach(function(_1c2){_b2.byId(_1c2.id).innerHTML="[+]";});_b2.style(_1c0,"visibility","visible");_b2.byId(elem.id).innerHTML="[&ndash;]";}});});},_registerOpenInParentWindowLink:function(){_b2.query(".openInParentWindow").forEach(function(elem){_b2.connect(elem,"click",function(evt){_b2.stopEvent(evt);(window.opener||window).location.href=_b2.attr(elem,"href");if(window.opener){window.close();}});});},stripBaseUrlWhenHrefHasAnchor:function(href){var _1c3=href.match(/#.*$/);return (_1c3!==null)?_1c3[0]:href;},toDom:function(src){if(_b2.isIE<=8){_b6.innerHTML=src;if(_b6.childNodes.length===1){return _b6.firstChild;}else{var frag=document.createDocumentFragment();while(_b6.childNodes.length){frag.appendChild(_b6.childNodes.item(0));}return frag;}}else{return _b2._toDom(src);}},_autoEqualizeHeights:function(){_b2.query(".equalizeHeights").forEach(this.equalizeHeights);},equalizeHeights:function(_1c4){var _1c5=0;_b2.query(">*",_1c4).forEach(function(elem){_1c5=Math.max(_1c5,_b2.contentBox(elem).h);}).style({minHeight:_1c5+"px"});},_registerHoverFadeHandler:function(){WSI.Events.delegate("mousemove",".hoverFade:not(.hoverFadeActive)",_1c6);function _1c6(evt){var elem=this,_1c7=_b2.position(elem),_1c8=_b2.query(".hoverFadeTarget",elem),_1c9=true,_1ca=_b2.connect(_b2.body(),"mousemove",function(evt){var x=evt.clientX-_1c7.x,y=evt.clientY-_1c7.y;if((_1c9&&(x<0||x>_1c7.w||y<0||y>_1c7.h))||WSI.utils.closest(".hoverFadeActive",evt.target)!==elem){_1cb.stop();_b2.disconnect(_1ca);var _1cc=_b2.fx.combine(_1c8.map(function(_1cd){return _b2.animateProperty({node:_1cd,properties:{opacity:0},duration:150});}));_b2.connect(_1cc,_1c9?"onBegin":"onEnd",function(){_b2.removeClass(elem,"hoverFadeActive");});_1cc.play();_1c9=false;}}),_1cb=_b2.fx.combine(_1c8.map(function(_1ce){return _b2.animateProperty({node:_1ce,properties:{opacity:1},delay:_b9?0:150,duration:150});}));if(_b9){var temp=_b2.place("<span/>",_b2.body());setTimeout(function(){_b2.body().removeChild(temp);});}_b2.connect(_1cb,"onEnd",function(){_1c9=false;});_1cb.play();_b2.addClass(elem,"hoverFadeActive");_b2.stopEvent(evt);};},_topNavRightAlign:function(_1cf){var _1d0=_b2.query("#topnav-container .nav-menu")[0],_1d1=function(){var _1d2=_b2.contentBox(_1d0);_b2.query(".nav-columns",_1d0).forEach(function(menu){_b2.style(menu,"left","auto");var pos=_b2.marginBox(menu),_1d3=menu,_1d4=0,_1d5=0;_b2.query(".col, .spotlight",menu).map(function(col){_1d4+=_b2.marginBox(col).w;});do{_1d5+=_b2.style(_1d3,"padding-left")+_b2.style(_1d3,"border-left-width");_1d3=_1d3.parentNode;}while(_1d3!==_1d0.parentNode);_1d4+=_b9?1:0;if(pos.l+_1d4+_1d5>_1d2.w){_b2.style(menu,{width:_1d4+"px",left:Math.max(0,_1d2.w-(_1d4+_1d5))+"px"});}});};if(_1cf){_1d1();}else{function _1d6(evt){_1d1();WSI.Events.undelegate("mouseover",_1d6);};WSI.Events.delegate("mouseover","#topnav-container .nav-menu li",_1d6);}},asyncLoadTopNav:function(url){var self=this;this.loadFragment({url:url,load:function(data){var _1d7=self.toDom(data),_1d8=_b2.query("#topnav-container .nav-columns");_b2.query(".nav-columns",_1d7).forEach(function(menu,i){_b2.style(menu,"opacity",!!_1d8.at(i).style("opacity")?1:0);_1d8.at(i).replaceWith(menu);});_b2.query("#topnav-container .equalizeHeights").forEach(self.equalizeHeights);self._topNavRightAlign(true);},error:function(_1d9){_b2.query("#topnav-container .nav-placeholder").remove();}});}});}(dojo));dojo.provide("wsgc.nls.wsgc_en-us");dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={"buttonOk":"OK","buttonCancel":"Cancel","buttonSave":"Save","itemClose":"Close"};dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.en_us");dijit.nls.loading.en_us={"loadingState":"Loading...","errorState":"Sorry, an error occurred"};}if(!dojo._hasResource["wsgc.js.Dataset"]){dojo._hasResource["wsgc.js.Dataset"]=true;(function(dojo,_1da){var _1db="data-";function _1dc(_1dd){return /^\s*{.*}\s*$/.test(_1dd)?dojo.fromJson(_1dd):(_1dd||{});};function _1de(attr){return _1db+attr.toLowerCase();};WSI.dataset=dojo.mixin(dojo.provide("wsgc.js.Dataset"),{get:function get(elem,attr,_1df){if(_1df){var name=_1de(attr),_1e0={};while(elem){if(dojo.hasAttr(elem,name)){_1e0=dojo.mixin(get(elem,attr),_1e0);}elem=elem.parentNode;}return _1e0;}else{return _1dc(elem.getAttribute(_1de(attr))||"{}");}},set:function(elem,attr,_1e1){elem.setAttribute(_1de(attr),dojo.isObject(_1e1)?dojo.toJson(_1e1):_1e1);},"delete":function(elem,attr){elem.removeAttribute(_1de(attr));},keys:function(elem){var keys=[],_1e2=elem.attributes;for(var i=0,len=_1e2.length;i<len;++i){var name=_1e2[i].name;if(!name.indexOf(_1db)){keys.push(name.substr(_1db.length));}}return keys;},mixin:function(elem,attr,obj){this.set(elem,attr,dojo.mixin(this.get(elem,attr),obj));}});}(dojo));}if(!dojo._hasResource["wsgc.js.IntlUtils"]){dojo._hasResource["wsgc.js.IntlUtils"]=true;dojo.provide("wsgc.js.IntlUtils");(function(dojo,_1e3){function _1e4(_1e5,_1e6){return _1e5.major>_1e6.major||(_1e5.major==_1e6.major&&(_1e5.minor>_1e6.minor||(_1e5.minor==_1e6.minor&&_1e5.rev>=_1e6.rev)));};dojo.declare("wsgc.js.IntlUtils",null,{constructor:function(){this._registerCheckoutEvent();this._registerDeleteCountryEventHandler(dojo.query(".deleteCountry"));},_registerCheckoutEvent:function(){dojo.query(".checkoutButtonIntl").forEach(function(elem){dojo.connect(elem,"click",function(evt){dojo.stopEvent(evt);dojo.byId("checkout").value="true";if(dojox.embed.Flash.available&&_1e4(dojox.embed.Flash.version,{major:7,minor:0,rev:0})){dojo.byId("cartForm").submit();}else{window.location="/internationalcheckout/flasherror.html";}});},this);},_registerDeleteCountryEventHandler:function(_1e7){_1e7.connect("click",function(evt){dojo.stopEvent(evt);dojo.xhrGet({url:"/international/setcountry.html",content:{country:"US",currency:"USD"},preventCache:true,load:function(){window.location.reload();}});if(typeof (cmCreateConversionEventTag)!=="undefined"){cmCreateConversionEventTag("Change Country","1","International");}});},interceptAddToBasket:function(evt){var _1e8=WSI.utils.closest(".section",evt.currentTarget);if(dojo.query(".skuErrorHook",_1e8).length!==dojo.query(".skuErrorHook:empty",_1e8).length){dojo.stopEvent(evt);dojo.byId("pageErrorHook").focus();window.scrollTo(0,0);}},flagBasedCurrencySelector:function(_1e9){var _1ea=WSI.config.country||"US";var _1eb=dojo.query(".currencyCode",_1e9.elem)[0];var _1ec={};for(var i=0,len=_1eb.options.length;i<len;++i){_1ec[_1eb.options[i].value]=i;}dojo.addClass(dojo.query(".flagMap a."+_1ea,_1e9.elem)[0].parentNode,"selected-country");_1eb.selectedIndex=_1ec[WSI.config.currency||"USD"];dojo.query(".flagMap a",_1e9.elem).connect("click",function(evt){dojo.query(".selected-country").removeClass("selected-country");_1ea=this.getAttribute("data-countryCode");var _1ed=this.getAttribute("data-defaultCurrency");dojo.addClass(this.parentNode,"selected-country");_1eb.selectedIndex=_1ec[_1ed];dojo.stopEvent(evt);});dojo.connect(dojo.byId("intlSetCountryDialogSubmit"),"click",function(evt){dojo.stopEvent(evt);if(_1ea!=""&&_1eb.value){dojo.xhrGet({url:"/international/ineligible-items.html",content:{country:_1ea,currency:_1eb.value},preventCache:true,load:function(){window.location.reload();}});if(typeof (cmCreateConversionEventTag)!=="undefined"){cmCreateConversionEventTag("Change Country","1","International");}}else{dojo.query("ul.error",_1e9.elem).removeClass("hide");dojo.query("ul.error li.countryMessage",_1e9.elem).toggleClass("hide",countrySelect.selectedIndex!=0);dojo.query("ul.error li.currencyMessage",_1e9.elem).toggleClass("hide",!!_1eb.value);}});this._registerDeleteCountryEventHandler(dojo.query("#deleteCountry",_1e9.elem));WSI.utils.swapClasses(dojo.query(".deferredLayover",_1e9.elem),"deferredLayover","layover");dojo.query(".layover",_1e9.elem).connect("click",function(evt){WSI.layoverC.openLayover(evt);});}});}(dojo));}if(!dojo._hasResource["dojox.xml.parser"]){dojo._hasResource["dojox.xml.parser"]=true;dojo.provide("dojox.xml.parser");dojox.xml.parser.parse=function(str,_1ee){var _1ef=dojo.doc;var doc;_1ee=_1ee||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _1f0=new DOMParser();doc=_1f0.parseFromString(str,_1ee);var de=doc.documentElement;var _1f1="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_1f1){var _1f2=de.getElementsByTagNameNS(_1f1,"sourcetext")[0];if(_1f2){_1f2=_1f2.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_1f2);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_1ef.implementation&&_1ef.implementation.createDocument){if(str&&dojo.trim(str)&&_1ef.createElement){var tmp=_1ef.createElement("xml");tmp.innerHTML=str;var _1f3=_1ef.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_1f4){_1f3.importNode(_1f4,true);});return _1f3;}else{return _1ef.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _1f5=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_1f5.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _1f6="";if(node){dojo.forEach(node.childNodes,function(_1f7){switch(_1f7.nodeType){case 1:case 5:_1f6+=dojox.xml.parser.textContent(_1f7);break;case 3:case 2:case 4:_1f6+=_1f7.nodeValue;}});}return _1f6;}};dojox.xml.parser.replaceChildren=function(node,_1f8){var _1f9=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_1fa){_1f9.push(_1fa);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_1f9,dojo.destroy);if(!dojo.isArray(_1f8)){node.appendChild(_1f8);}else{dojo.forEach(_1f8,function(_1fb){node.appendChild(_1fb);});}};dojox.xml.parser.removeChildren=function(node){var _1fc=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _1fc;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};}if(!dojo._hasResource["dojox.embed.Flash"]){dojo._hasResource["dojox.embed.Flash"]=true;dojo.provide("dojox.embed.Flash");(function(){var _1fd,_1fe;var _1ff=7;var _200="dojox-embed-flash-",_201=0;var _202={expressInstall:false,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"always",allowNetworking:"all",style:null,redirect:null};function prep(_203){_203=dojo.delegate(_202,_203);if(!("path" in _203)){return null;}if(!("id" in _203)){_203.id=(_200+_201++);}return _203;};if(dojo.isIE){_1fd=function(_204){_204=prep(_204);if(!_204){return null;}var p;var path=_204.path;if(_204.vars){var a=[];for(p in _204.vars){a.push(p+"="+_204.vars[p]);}_204.params.FlashVars=a.join("&");delete _204.vars;}var s="<object id=\""+_204.id+"\" "+"classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" "+"width=\""+_204.width+"\" "+"height=\""+_204.height+"\""+((_204.style)?" style=\""+_204.style+"\"":"")+">"+"<param name=\"movie\" value=\""+path+"\" />";if(_204.params){for(p in _204.params){s+="<param name=\""+p+"\" value=\""+_204.params[p]+"\" />";}}s+="</object>";return {id:_204.id,markup:s};};_1fe=(function(){var _205=10,_206=null;while(!_206&&_205>6){try{_206=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_205--);}catch(e){}}if(_206){var v=_206.GetVariable("$version").split(" ")[1].split(",");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}else{_1fd=function(_207){_207=prep(_207);if(!_207){return null;}var p;var path=_207.path;if(_207.vars){var a=[];for(p in _207.vars){a.push(p+"="+_207.vars[p]);}_207.params.flashVars=a.join("&");delete _207.vars;}var s="<embed type=\"application/x-shockwave-flash\" "+"src=\""+path+"\" "+"id=\""+_207.id+"\" "+"width=\""+_207.width+"\" "+"height=\""+_207.height+"\""+((_207.style)?" style=\""+_207.style+"\" ":"")+"swLiveConnect=\""+_207.swLiveConnect+"\" "+"allowScriptAccess=\""+_207.params.allowScriptAccess+"\" "+"allowNetworking=\""+_207.params.allowNetworking+"\" "+"pluginspage=\""+window.location.protocol+"//www.adobe.com/go/getflashplayer\" ";if(_207.params){for(p in _207.params){s+=" "+p+"=\""+_207.params[p]+"\"";}}s+=" />";return {id:_207.id,markup:s};};_1fe=(function(){var _208=navigator.plugins["Shockwave Flash"];if(_208&&_208.description){var v=_208.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}dojox.embed.Flash=function(_209,node){if(location.href.toLowerCase().indexOf("file://")>-1){throw new Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");}this.available=dojox.embed.Flash.available;this.minimumVersion=_209.minimumVersion||_1ff;this.id=null;this.movie=null;this.domNode=null;if(node){node=dojo.byId(node);}setTimeout(dojo.hitch(this,function(){if(_209.expressInstall||this.available&&this.available>=this.minimumVersion){if(_209&&node){this.init(_209,node);}else{this.onError("embed.Flash was not provided with the proper arguments.");}}else{if(!this.available){this.onError("Flash is not installed.");}else{this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);}dojo.query("img",node).forEach("dojo.style(item, 'display', 'inline')");}}),100);};dojo.extend(dojox.embed.Flash,{onReady:function(_20a){},onLoad:function(_20b){},onError:function(msg){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie);},init:function(_20c,node){this.destroy();node=dojo.byId(node||this.domNode);if(!node){throw new Error("dojox.embed.Flash: no domNode reference has been passed.");}var p=0,_20d=false;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;if(dojox.embed.Flash.initialized){this.id=dojox.embed.Flash.place(_20c,node);this.domNode=node;setTimeout(dojo.hitch(this,function(){this.movie=this.byId(this.id,_20c.doc);this.onReady(this.movie);this._poller=setInterval(dojo.hitch(this,function(){try{p=this.movie.PercentLoaded();}catch(e){}if(p==100){this._onload();}else{if(p==0&&this._pollCount++>this._pollMax){clearInterval(this._poller);}}}),this.pollTime);}),1);}else{dojo.query("img",node).forEach("dojo.style(item, 'display', 'inline')");}},_destroy:function(){try{this.domNode.removeChild(this.movie);}catch(e){}this.id=this.movie=this.domNode=null;},destroy:function(){if(!this.movie){return;}var test=dojo.delegate({id:true,movie:true,domNode:true,onReady:true,onLoad:true});for(var p in this){if(!test[p]){delete this[p];}}if(this._poller){dojo.connect(this,"onLoad",this,"_destroy");}else{this._destroy();}},byId:function(_20e,doc){doc=doc||document;if(doc.embeds[_20e]){return doc.embeds[_20e];}if(doc[_20e]){return doc[_20e];}if(window[_20e]){return window[_20e];}if(document[_20e]){return document[_20e];}return null;}});dojo.mixin(dojox.embed.Flash,{minSupported:8,available:_1fe.major,supported:(_1fe.major>=_1fe.required),minimumRequired:_1fe.required,version:_1fe,initialized:false,onInitialize:function(){dojox.embed.Flash.initialized=true;},__ie_markup__:function(_20f){return _1fd(_20f);},proxy:function(obj,_210){dojo.forEach((dojo.isArray(_210)?_210:[_210]),function(item){this[item]=dojo.hitch(this,function(){return (function(){return eval(this.movie.CallFunction("<invoke name=\""+item+"\" returntype=\"javascript\">"+"<arguments>"+dojo.map(arguments,function(item){return __flash__toXML(item);}).join("")+"</arguments>"+"</invoke>"));}).apply(this,arguments||[]);});},obj);}});dojox.embed.Flash.place=function(_211,node){var o=_1fd(_211);node=dojo.byId(node);if(!node){node=dojo.doc.createElement("div");node.id=o.id+"-container";dojo.body().appendChild(node);}if(o){node.innerHTML=o.markup;return o.id;}return null;};dojox.embed.Flash.onInitialize();})();}if(!dojo._hasResource["wsgc.js.MetricsWrapper"]){dojo._hasResource["wsgc.js.MetricsWrapper"]=true;dojo.provide("wsgc.js.MetricsWrapper");dojo.declare("wsgc.js.MetricsWrapper",null,{constructor:function(){WSI.Events.delegate("click","[data-metrics],[metrics]",function(evt){try{var _212=dojo.attr(this,"data-metrics");if(!_212){var _212=dojo.attr(this,"metrics");}if(evt.target.type=="checkbox"){_212=_212.replace("Checkbox_$_State",evt.target.checked?"checked":"unchecked");}eval(_212);}catch(e){}});}});}if(!dojo._hasResource["wsgc.js.DeferredLayover"]){dojo._hasResource["wsgc.js.DeferredLayover"]=true;dojo.provide("wsgc.js.DeferredLayover");dojo.declare("wsgc.js.DeferredLayover",null,{constructor:function(_213){function _214(o){if(document.attachEvent){var t={};for(var i in o){t[i]=o[i];}o=t;}return o;};var _215=dojo.query(".deferredLayover");var _216=[];_215.forEach(function(_217){var _218=dojo.connect(_217,"click",function(evt){dojo.stopEvent(evt);dojo.forEach(_216,function(_219){dojo.disconnect(_219);});_216=[];if(WSI.layoverC){WSI.utils.swapClasses(_215,"deferredLayover","layover").connect("click",WSI.layoverC,WSI.layoverC.openLayover);WSI.layoverC.openLayover(evt);}else{evt=_214(evt);evt.currentTarget_=evt.currentTarget;WSI.utils.loadScript(_213,function(){setTimeout(function(){WSI.utils.swapClasses(_215,"deferredLayover","layover");WSI.layoverC=new wsgc.js.LayoverBase();WSI.layoverC.openLayover(evt);});});}});_216.push(_218);});}});}if(!dojo._hasResource["wsgc.js.Selector"]){dojo._hasResource["wsgc.js.Selector"]=true;dojo.provide("wsgc.js.Selector");(function(dojo,_21a){var _21b=_21c(),_21d="_sel_",_21e=0,_21f="parentNode",_220="previousSibling",_221={},_222={">":_223(_21f,true)," ":_223(_21f,false),"+":_223(_220,true),"~":_223(_220,false)};dojo.mixin(wsgc.js.Selector,{is:function is(_224,_225,_226){var _227=this.parse(_225),_228,i,l;for(i=0,l=_227.length;i<l;++i){_228=_226?[[" ",_226]].concat(_227[i]):_227[i];if(this.test(_229([_224]),_228,_228.length-1)){return true;}}return false;},test:function test(_22a,_22b,_22c){var _22d=_22b[_22c][0],_22e=_22b[_22c][1],_22f=_222[_22d],_230,_231;while((_231=_22a())){if(_22e===_231||_22e==="*"||(typeof _22e==="string"&&dojo._filterQueryResult([_231],_22e).length)){_230=_22f(_231);if(_22c===0||this.test(_230,_22b,_22c-1)){return _231;}if(_22a.axis===_230.axis&&!_230.singleton){break;}}}},parse:function parse(_232){var _233=[],_234=_221[_232]||[],_235,_236;if(_234.length){return _234;}while((_235=_21b.exec(_232))){_236=(_235[1]&&dojo.trim(_235[1]))||" ";if(_236.charAt(0)===","){_234.push(_233);_233=[[dojo.trim(_236.substr(1))||" ",_235[2]]];}else{_233.push([_236,_235[2]]);}}if(_233.length){_234.push(_233);}return _221[_232]=_234;},closest:function closest(_237,_238){var _239=this.parse(_237),_23a,_23b,_23c,_23d,_23e;for(var i=0,len=_239.length;i<len;i++){_23e=_239[i];_23a=true;_23b=_222[" "](_238);_23c=function(){if(_23a){_23a=false;return _238;}return _23b();};_23d=this.test(_23c,_23e,_23e.length-1);if(_23d){return _23d;}}},idFor:function idFor(elem){if(!elem.id){do{var id=_21d+_21e++;}while(dojo.byId(id));elem.id=id;}return elem.id;}});function _229(_23f){var i=0;return function arrayIterator(){return _23f[i++];};};function _223(axis,_240){return function nextIteratorGenerator(_241){var _242=true,_243=function _243(){_243.axis=axis;_243.singleton=_240;if(!_240||_242){_242=false;while((_241=_241[axis])&&_241.nodeType!==1){}return _241;}};return _243;};};function _21c(){return /((?:\s+(?![>+~,])|\s*(?:,\s*)?[>+~]\s*|\s*,\s*|^\s*))((?:\*|[a-z_\\][a-z0-9_\\|-]*)?(?:(?:[.#][a-z_\\][a-z0-9_\\|-]*|(?::not\(\s*(?:\*|[.#]?[a-z_\\][a-z0-9_\\|-]*|\[\s*[a-z_\\][a-z0-9_\\|-]*\s*(?:[~|^$*]?=\s*(?:'[^']*'|"[^"]*")\s*)?\]|::?[a-z_\\][a-z0-9_\\|-]*(?:\((?:'[^']*'|"[^"]*"|[^)])*\))?)\s*\))|::?[a-z_\\][a-z0-9_\\|-]*(?:\((?:'[^']*'|"[^"]*"|[^)])*\))?|\[\s*[a-z_\\][a-z0-9_\\|-]*\s*(?:[~|^$*]?=\s*(?:'[^']*'|"[^"]*")\s*)?\])*))/ig;};}(dojo));}if(!dojo._hasResource["wsgc.js.Events"]){dojo._hasResource["wsgc.js.Events"]=true;dojo.provide("wsgc.js.Events");(function(dojo,_244){WSI=window.WSI||{};WSI.Events=dojo.mixin(wsgc.js.Events,wsgc.js.Selector,{delegate:function(_245,_246,_247,_248){if(!_248){_248=_247;_247=dojo.body();}_245=_245.replace(/^on/,"");var self=this,_249=this.idFor(_247),_24a=this.delegate.delegates||(this.delegate.delegates={}),_24b=_24a[_249]||(_24a[_249]={}),_24c=_24b.events||(_24b.events={}),_24d=_24c[_245];this.parse(_246);if(!_24d){_24d=_24c[_245]=function(evt){var _24e=_24d.selectors,elem=evt.target,_24f={};do{if(elem.disabled){continue;}for(var _250 in _24e){if(_24e.hasOwnProperty(_250)){if(_25e(_24e[_250],_24f)&&self.is(elem,_250,_247===dojo.body()?null:_247)){dojo.forEach(_24e[_250],function(_251){if(!_24f[_251]){_24f[_251]=true;_251.call(elem,evt);}});}}}}while(elem!=evt.currentTarget&&(elem=elem.parentNode)&&elem!=document.documentElement);};if(_245==="focus"||_245==="blur"){var _252=function(evt){return _24d(dojo.fixEvent(evt||window.event,this));};if(document.attachEvent){document.attachEvent("onfocus"+(_245==="blur"?"out":"in"),_247,_252);}else{_247.addEventListener(_245,_252,true);}}else{dojo.connect(_247,_245,_24d);}_24d.selectors={};}_24d.selectors[_246]=_24d.selectors[_246]||[];_24d.selectors[_246].push(_248);},undelegate:function(_253,_254,_255,_256){if(!_256){if(!_255){if(typeof _254==="function"){_256=_254;_255=dojo.body();_254=null;}else{if(typeof _254==="object"){_255=_254;_254=null;}else{_255=dojo.body();}}}else{if(typeof _255==="function"){_256=_255;_255=dojo.body();}}}var _257=this.delegate.delegates||{},_258=_257[this.idFor(_255)]||{},_259=_258.events||{},_25a=_259[_253]||{},_25b=_25a.selectors||{},_25c=_25b[_254||""]||[],_25d=_256?dojo.indexOf(_25c,_256):-1;if(!_254){if(!_256){_25a.selectors={};}else{for(_254 in _25b){if(_25b.hasOwnProperty(_254)){_25c=_25b[_254];_25d=dojo.indexOf(_25c,_256);if(_25d>-1){_25c.splice(_25d,1);}}}}}else{if(!_25c||(_256&&_25d===-1)){return;}else{if(_256){_25c.splice(_25d,1);}else{_25b[_254]=[];}}}}});function _25e(_25f,_260){return dojo.some(_25f,function(_261){return !_260[_261];});};if(dojo){dojo.delegateEvent=WSI.Events.delegate;dojo.undelegateEvent=WSI.Events.undelegate;}}(dojo));}if(!dojo._hasResource["wsgc.js.Tabs"]){dojo._hasResource["wsgc.js.Tabs"]=true;dojo.provide("wsgc.js.Tabs");(function(dojo,_262){var _263=!!navigator.userAgent.match(/iPad/i);WSI.Events.delegate("click",".tabsWidget>:first-child>.tab",function(evt){dojo.stopEvent(evt);if(!dojo.hasClass(this,"active")){var tab=new Tab(this);tab.tabsAndContents.query(">.active").removeClass("active");tab.tabsAndContents.query(">:nth-child("+tab.position+")").addClass("active");dojo.publish("/tab/click",[tab]);}});if(_263){dojo.subscribe("/tab/click",function(_264){_265(_264);});dojo.addOnLoad(function(){dojo.query(".tabsWidget>:first-child()>.tab.active").forEach(function(_266){_265(new Tab(_266));});});function _265(tab){dojo.query(".tabScrollbar",tab.widget).remove();var _267=dojo.contentBox(tab.content),_268=dojo.query(".scroll-contents",tab.content)[0],_269=dojo.marginBox(_268);if(_269.h>_267.h){var _26a=dojo.place("<div class=\"tabScrollbar\"><div class=\"tabScroll\"/></div>",tab.widget,"last"),_26b=_26a.firstChild,_26c=_267.h*_267.h/_269.h,_26d=dojo.style(_26b,"marginTop")+dojo.style(_26b,"marginBottom"),_26e=_267.h-_26c-_26d,_26f=_269.h-_267.h,_270,_271;function _272(evt){_270=evt.targetTouches[0].clientY;_271=tab.content.scrollTop;};function _273(evt){if(evt.touches.length===1){dojo.stopEvent(evt);var _274=evt.targetTouches[evt.touches.length-1].clientY-_270;tab.content.scrollTop=_271-_274;}};function _275(evt){_26b.style.top=(_26e*(tab.content.scrollTop/_26f))+"px";};if(tab.widget.disconnectPreviousActiveTabEvents){tab.widget.disconnectPreviousActiveTabEvents();}tab.widget.disconnectPreviousActiveTabEvents=function(){_268.removeEventListener("touchstart",_272);_268.removeEventListener("touchmove",_273);tab.content.removeEventListener("scroll",_275);};_26b.style.height=_26c+"px";_268.addEventListener("touchstart",_272);_268.addEventListener("touchmove",_273);tab.content.addEventListener("scroll",_275);_26b.addEventListener("touchstart",function(evt){dojo.stopEvent(evt);_270=evt.targetTouches[0].clientY;_271=tab.content.scrollTop;});_26b.addEventListener("touchmove",function(evt){dojo.stopEvent(evt);var _276=evt.targetTouches[evt.touches.length-1].clientY-_270;tab.content.scrollTop=_271+(_26f*(_276/_26e));});_26a.addEventListener("touchstart",function(evt){dojo.stopEvent(evt);if(evt.targetTouches[0].clientY<dojo.position(_26b,true).y){tab.content.scrollTop-=_267.h;}else{tab.content.scrollTop+=_267.h;}});}};}function Tab(tab){this.tab=tab;this.parent=tab.parentNode;this.widget=this.parent.parentNode;this.tabsAndContents=dojo.query(">*",this.widget);this.position=dojo.query(">.tab",this.parent).indexOf(tab)+1;this.content=dojo.query(">:nth-child(2)>:nth-child("+this.position+")",this.widget)[0];};}(dojo));}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _277=this;dojo.mixin(_277,args);_277.node=args.node;_277._showArgs=dojo.mixin({},args);_277._showArgs.node=_277.node;_277._showArgs.duration=_277.showDuration;_277.showAnim=_277.showFunc(_277._showArgs);_277._hideArgs=dojo.mixin({},args);_277._hideArgs.node=_277.node;_277._hideArgs.duration=_277.hideDuration;_277.hideAnim=_277.hideFunc(_277._hideArgs);dojo.connect(_277.showAnim,"beforeBegin",dojo.hitch(_277.hideAnim,"stop",true));dojo.connect(_277.hideAnim,"beforeBegin",dojo.hitch(_277.showAnim,"stop",true));},show:function(_278){return this.showAnim.play(_278||0);},hide:function(_279){return this.hideAnim.play(_279||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_27a={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _27b=function(_27c){this._index=-1;this._animations=_27c||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_27b,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_27d,_27e){if(!this._current){this._current=this._animations[this._index=0];}if(!_27e&&this._current.status()=="playing"){return this;}var _27f=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_280=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_281=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_27f);d.disconnect(_280);d.disconnect(_281);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_282,_283){this.pause();var _284=this.duration*_282;this._current=null;d.some(this._animations,function(a){if(a.duration<=_284){this._current=a;return true;}_284-=a.duration;return false;});if(this._current){this._current.gotoPercent(_284/this._current.duration,_283);}return this;},stop:function(_285){if(this._current){if(_285){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_27b,_27a);dojo.fx.chain=function(_286){return new _27b(_286);};var _287=function(_288){this._animations=_288||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_288,function(a){var _289=a.duration;if(a.delay){_289+=a.delay;}if(this.duration<_289){this.duration=_289;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var self=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(d.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};d.extend(_287,{_doAction:function(_28a,args){d.forEach(this._animations,function(a){a[_28a].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_28b,args){var t=this._pseudoAnimation;t[_28b].apply(t,args);},play:function(_28c,_28d){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_28e,_28f){var ms=this.duration*_28e;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_28f);});this._call("gotoPercent",arguments);return this;},stop:function(_290){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_287,_27a);dojo.fx.combine=function(_291){return new _287(_291);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _292=d.style(node,"height");return Math.max(_292,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}return (dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!dojo._hasResource["wsgc.js.Scroller"]){dojo._hasResource["wsgc.js.Scroller"]=true;dojo.provide("wsgc.js.Scroller");(function(dojo,_293){var _294={},_295="disabled",_296,_297={duration:450,rate:20,easing:dojo.fx.easing.quadInOut,pageSize:0};WSI.Events.delegate("click",".scroller-container>.control",function(evt){dojo.stopEvent(evt);var _298=wsgc.js.Scroller.get(this.parentNode);var _299=dojo.hasClass(this,"btn-next");if(_299){_298.next();}else{_298.prev();}});dojo.declare("wsgc.js.Scroller",null,{constructor:function(_29a){_294[_29b(_29a)]=this;this.widget=_29a;this.controls=dojo.query(">.control",this.widget);this.scroll=dojo.query(">.scroller",this.widget)[0];this.scrollerContainer=this.scroll.parentNode;this.isVertical=dojo.hasClass(this.scrollerContainer,"vertical");this.itemContainer=dojo.query(">.panel",this.scroll)[0];this.items=dojo.query(">*",this.itemContainer);this.scrollSize=dojo.contentBox(this.scroll);var _29c=this.items.length?dojo.position(this.items[0]):{y:0,x:0},_29d=this.items.length>1?dojo.position(this.items[1]):_29c,_29e=dojo.marginBox(this.itemContainer);this.itemOffset={h:_29d.y-_29c.y,w:_29d.x-_29c.x};if(this.isVertical){this.item=-Math.round(_29e.t/this.itemOffset.h);this.itemsPerPage=Math.round(this.scrollSize.h/this.itemOffset.h);}else{this.item=-Math.round(_29e.l/this.itemOffset.w);this.itemsPerPage=Math.round(this.scrollSize.w/this.itemOffset.w);}this.options=dojo.mixin({},_297,dojo.fromJson(dojo.attr(this.widget,"data-scroller")||"{}"));if(typeof this.options.easing=="string"){this.options.easing=eval(this.options.easing);}this.pageSize=this.options.pageSize||this.itemsPerPage;},scrollTo:function(_29f){if(!_296&&_29f>=this.itemsPerPage){_2a0(this,this.pageSize*Math.floor(_29f/this.itemsPerPage));}},next:function(){_2a0(this,this.pageSize);},prev:function(){_2a1(this,this.pageSize);}});dojo.mixin(wsgc.js.Scroller,{get:function(_2a2){return _294[_29b(_2a2)]||new wsgc.js.Scroller(_2a2);}});var _2a3=0;function _29b(_2a4){return _2a4.id||(_2a4.id="_scroller"+_2a3++);};function _2a0(_2a5,_2a6){if(!_296&&_2a5.item<_2a5.items.length-_2a5.itemsPerPage){_2a5.item+=_2a6;var _2a7=dojo.marginBox(_2a5.itemContainer);if(_2a5.isVertical){_2a7.t-=(_2a5.itemOffset.h*_2a6);}else{_2a7.l-=(_2a5.itemOffset.w*_2a6);}dojo.fx.slideTo(dojo.mixin({},_2a5.options,{node:_2a5.items[0].parentNode,left:_2a7.l,top:_2a7.t,onEnd:function(){if(_2a5.item>=_2a5.items.length-_2a5.itemsPerPage){_2a5.controls.filter(".btn-next").addClass(_295);}_296=false;}})).play();_296=true;_2a5.controls.filter(".btn-prev").removeClass(_295);}};function _2a1(_2a8,_2a9){if(!_296&&_2a8.item>0){_2a8.item-=_2a9;var _2aa=dojo.marginBox(_2a8.itemContainer);if(_2a8.isVertical){_2aa.t+=(_2a8.itemOffset.h*_2a9);}else{_2aa.l+=(_2a8.itemOffset.w*_2a9);}dojo.fx.slideTo(dojo.mixin({},_2a8.options,{node:_2a8.itemContainer,left:_2aa.l,top:_2aa.t,onEnd:function(){if(_2a8.item===0){_2a8.controls.filter(".btn-prev").addClass(_295);}_296=false;}})).play();_296=true;_2a8.controls.filter(".btn-next").removeClass(_295);}};}(dojo));}if(!dojo._hasResource["wsgc.js.Image"]){dojo._hasResource["wsgc.js.Image"]=true;(function(dojo,_2ab){var _2ac={duration:500,easing:dojo.fx.easing.quadInOut};WSI.Image=dojo.mixin(dojo.provide("wsgc.js.Image"),{swap:function(_2ad,url,_2ae,_2af){if(dojo.isFunction(_2ae)){_2af=_2ae;_2ae={};}var _2b0=dojo.mixin({},_2ae,_2ac);var _2b1=dojo.marginBox(_2ad),_2b2=dojo.position(_2ad);var _2b3=this.clone(_2ad),self=this;dojo.style(_2b3,{"position":"absolute","top":"0px","left":"0px","opacity":0});var _2b4;var _2b5=setTimeout(function(){_2b4=dojo.clone(WSI.throbber);dojo.style(_2b4,{"position":"absolute","top":(_2b1.t+(_2b1.h/2))+"px","left":(_2b1.l+(_2b1.w/2))+"px"});dojo.place(_2b4,_2ad,"after");},175);this.loadWithCallback(_2b3,url,function(){if(_2b5){clearTimeout(_2b5);_2b5=null;}setTimeout(function(){if(_2b4){dojo.destroy(_2b4);}},250);dojo.place(_2b3,_2ad,"before");var _2b6=dojo.marginBox(_2b3);var _2b7;var _2b8=[dojo.fadeOut(dojo.mixin({node:_2ad},_2b0)),dojo.fadeIn(dojo.mixin({node:_2b3},_2b0))];if(_2b6.h>_2b1.h){var _2b9="<div class='spacer' style='position: relative; height: 0px; width: 1px; visibility: hidden;'></div>";dojo.place(_2b9,_2ad,"after");var _2ba=dojo.query(".spacer")[0];var _2bb=Math.max(_2b6.h-_2b1.h,0);_2b8.push(dojo.animateProperty(dojo.mixin({node:_2ba,duration:150,properties:{height:_2bb}},_2b0)));}var anim=dojo.fx.combine(_2b8);dojo.connect(anim,"onEnd",function(){var _2bc=self.clone(_2ad);dojo.style(_2bc,"opacity","1");_2bc.id=_2ad.id;self.loadWithCallback(_2bc,dojo.attr(_2b3,"src"),function(){dojo.place(_2bc,_2ad,"replace");dojo.destroy(_2ba);dojo.destroy(_2b3);if(_2af){_2af(_2bc);}});});anim.play();});},loadWithCallback:function(_2bd,url,fn){var _2be="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",_2bf=dojo.connect(_2bd,"onload",function(){if(_2bd.src!==_2be){fn();}dojo.disconnect(_2bf);});dojo.attr(_2bd,"src",url);if(!dojo.isIE&&(_2bd.complete||typeof _2bd.complete==="undefined")){_2bd.src=_2be;_2bd.src=url;}},clone:function(_2c0){var _2c1=new Image();dojo.forEach(["alt","class","title"],function(name){var val=dojo.attr(_2c0,name);if(val){dojo.attr(_2c1,name,val);}});return _2c1;}});}(dojo));}if(!dojo._hasResource["wsgc.js.Thumbnail"]){dojo._hasResource["wsgc.js.Thumbnail"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.Thumbnail");(function(dojo,_2c2){WSI.Events.delegate("click",".thumbnailWidget",function(evt){dojo.stopEvent(evt);var _2c3=dojo.fromJson(dojo.attr(this,"data-thumbnail")||"{}");dojo.publish("/thumbnail/click",[{href:this.href||_2c3.href,alt:_2c3.alt||"",elem:this,target:this.target||_2c3.target,map:_2c3.map,options:_2c3}]);});WSI.Thumbnail=dojo.mixin(wsgc.js.Thumbnail,{subscribe:function(_2c4,fn){if(typeof _2c4==="string"){_2c4=[_2c4];}dojo.subscribe("/thumbnail/click",function(_2c5){if(_2c5&&_2c5.target&&dojo.indexOf(_2c4,_2c5.target)>-1){fn(_2c5);}});}});var _2c6={};dojo.subscribe("/thumbnail/click",function(_2c7){if(!_2c6[_2c7.target]){var _2c8=dojo.query("#"+_2c7.target+".thumbnailTarget");if(_2c8.length){if(_2c8[0].nodeName=="IMG"){if(_2c8[0].src!=_2c7.href){_2c6[_2c7.target]=true;WSI.Image.swap(_2c8[0],_2c7.href,function(_2c9){if(_2c7.map){dojo.attr(_2c9,"useMap",_2c7.map);}_2c6[_2c7.target]=false;});}}else{WSI.utils.loadFragment(dojo.mixin({url:_2c7.href,load:function(data){_2c8.html(data);}},_2c7.options));}}}});function _2ca(href){var _2cb=href.match(/#.*/);return (_2cb!==null)?_2cb[0]:href;};}(dojo));}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.window.getBox=function(){var _2cc=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _2cd=dojo._docScroll();return {w:_2cc.clientWidth,h:_2cc.clientHeight,l:_2cd.x,t:_2cd.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _2ce=doc.compatMode=="BackCompat",_2cf=_2ce?body:html,_2d0=isWK?body:_2cf,_2d1=_2cf.clientWidth,_2d2=_2cf.clientHeight,rtl=!dojo._isBodyLtr(),_2d3=pos||dojo.position(node),el=node.parentNode,_2d4=function(el){return ((isIE<=6||(isIE&&_2ce))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_2d4(node)){return;}while(el){if(el==body){el=_2d0;}var _2d5=dojo.position(el),_2d6=_2d4(el);if(el==_2d0){_2d5.w=_2d1;_2d5.h=_2d2;if(_2d0==html&&isIE&&rtl){_2d5.x+=_2d0.offsetWidth-_2d5.w;}if(_2d5.x<0||!isIE){_2d5.x=0;}if(_2d5.y<0||!isIE){_2d5.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_2d5.w-=pb.w;_2d5.h-=pb.h;_2d5.x+=pb.l;_2d5.y+=pb.t;}if(el!=_2d0){var _2d7=el.clientWidth,_2d8=_2d5.w-_2d7;if(_2d7>0&&_2d8>0){_2d5.w=_2d7;if(isIE&&rtl){_2d5.x+=_2d8;}}_2d7=el.clientHeight;_2d8=_2d5.h-_2d7;if(_2d7>0&&_2d8>0){_2d5.h=_2d7;}}if(_2d6){if(_2d5.y<0){_2d5.h+=_2d5.y;_2d5.y=0;}if(_2d5.x<0){_2d5.w+=_2d5.x;_2d5.x=0;}if(_2d5.y+_2d5.h>_2d2){_2d5.h=_2d2-_2d5.y;}if(_2d5.x+_2d5.w>_2d1){_2d5.w=_2d1-_2d5.x;}}var l=_2d3.x-_2d5.x,t=_2d3.y-Math.max(_2d5.y,0),r=l+_2d3.w-_2d5.w,bot=t+_2d3.h-_2d5.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_2d3.x+=el.scrollLeft;el.scrollLeft+=(isIE>=8&&!_2ce&&rtl)?-s:s;_2d3.x-=el.scrollLeft;}if(bot*t>0){_2d3.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_2d3.y-=el.scrollTop;}el=(el!=_2d0)&&!_2d6&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};}if(!dojo._hasResource["wsgc.js.Overlay"]){dojo._hasResource["wsgc.js.Overlay"]=true;dojo.provide("wsgc.js.Overlay");(function(dojo,_2d9){var _2da={id:"",classname:"",mask:true,loadingThrobber:true,fixedScroll:true,destroyOnHide:true,preventCache:true},_2db={},_2dc,_2dd=".overlayMask,.overlayScroll,.overlayCloseButton",_2de="",_2df=!!navigator.userAgent.match(/iPad/i),_2e0,_2e1=["onLoad","onShow","onShowing","onShown","onHide","onHidden","onDestroy","onRefresh"];dojo.addOnLoad(function(){WSI.Events.delegate("click",".overlayTrigger",function(evt){var _2e2=dojo.mixin({},dojo.fromJson(dojo.attr(this,"data-overlay")||"{}")),data=dojo.fromJson(dojo.attr(this,"data-overlaydata")||"{}"),href=dojo.attr(this,"href");wsgc.js.Overlay.trigger(_2e2,data,href);dojo.stopEvent(evt);});WSI.Events.delegate("click",".cancelOverlay",function(evt){wsgc.js.Overlay.cancel();});});dojo.declare("wsgc.js.Overlay",null,{constructor:function(href,_2e3){var self=this,loc=document.location,_2e4=loc.href.substr(0,loc.href.length-loc.hash.length);this.href=href.replace(_2e4,"");this.options=dojo.mixin({},_2da,_2e3);this.registeredCallbacks={};dojo.forEach(_2e1,function(name){self[name]=function(){return self._callback(name);};self.registeredCallbacks[name]=self.options[name]?[self.options[name]]:[];});this.isAjax=this.href.charAt(0)!=="#";},refresh:function(){var self=this;if(this.onRefresh(this)===false){return;}this.isLoaded=false;this.load(function(){if(self.throbber){dojo.destroy(self.throbber);}self.elem=dojo.place(WSI.utils.toDom(self.template(self.data)),self.elem,"replace");var pos={marginTop:self.elem.style.marginTop,marginLeft:self.elem.style.marginLeft,top:self.elem.style.top,left:self.elem.style.left};dojo.style(self.elem,pos);if(self.onShowing(self)===false){return;}});},load:function(_2e5){var self=this;if(!this.isAjax||this.isLoaded){if(_2e5){_2e5();}else{self.show();}return;}if(this.onLoad(this)===false){return;}if(this.options.loadingThrobber){this.throbber=dojo.place("<div class=\"overlayThrobber\"></div>",dojo.body());this.throbber.appendChild(dojo.clone(WSI.throbber));}var _2e6={};if(this.options.form&&dojo.byId(this.options.form)){_2e6.form=dojo.byId(this.options.form);}WSI.utils.loadFragment(this.options.httpmethod||"GET",dojo.mixin(_2e6,{url:this.href,preventCache:this.options.preventCache,timeout:this.options.timeout||30000,load:function(data){if(data===data.replace(/<script.+type=['"]text\/html['"].+id=['"]overlayTemplate_[^>]*>([\s\S]*?)<\/script>/gim,function(_2e7,src){self.template=WSI.utils.template(dojo.trim(src));return "";})){_2e0=_2e0||WSI.utils.template(dojo.trim(dojo.byId("overlayTemplate_defaultAjaxWrapper").innerHTML));self.template=(function(dojo,_2e8){var _2e9=_2e0({ajaxContent:data,id:self.options.id,classname:self.options.classname});return function(){return _2e9;};}(dojo));}self.isLoaded=true;if(_2e5){_2e5();}else{self.show();}},error:function(_2ea){var _2eb=dojo.query("#overlayTemplate_overlayError");if(_2eb.length===0){wsgc.js.Overlay.hideAll();if(self.throbber){dojo.destroy(self.throbber);}setTimeout(function(){alert("Sorry, your request could not be processed at this time. Please try again later.");if(self.mask){dojo.body().removeChild(self.mask);}if(self.scroll){dojo.style(self.scroll,"overflow","hidden");dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:_2de,paddingRight:_2de});dojo.body().removeChild(self.scroll);}},100);}else{self.elem=dojo.create("div",{"class":"overlayErrorContainer","innerHTML":_2eb.innerHTML()});if(_2e5){_2e5();}else{self.show();}}}}));},show:function(){var self=this;if(_2dc){if(_2dc===self){self.refresh();return;}}if(this.onShow(this)===false){return;}self.mask=self.mask||(self.options.mask&&dojo.place("<div class='overlayMask'></div>",dojo.body()));self.scroll=self.scroll||(self.options.fixedScroll&&dojo.place("<div class='overlayScroll'></div>",dojo.body()));if(self.scroll&&!_2df){dojo.style(self.scroll,{"overflowX":"auto","overflowY":"scroll"});dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:"hidden",paddingRight:WSI.utils.getBrowserScrollbarWidth()+"px"});}if(self.mask&&_2df){var _2ec=dojo.marginBox(dojo.body());dojo.style(self.mask,{width:window.innerWidth+"px",height:_2ec.h+"px"});}if(this.isAjax&&!this.isLoaded){this.load(_2ed);}else{try{self.template=self.template||WSI.utils.template(dojo.trim(dojo.byId("overlayTemplate_"+self.href.substr(1)).innerHTML));}catch(e){}_2ed();}function _2ed(){if(_2dc){if(_2dc!==self){_2dc.hide(true);}}self.elem=self.elem||WSI.utils.toDom(self.template(self.data));dojo.style(self.scroll||self.elem,"opacity",0);if(self.scroll){dojo.style(self.elem,"left","-9999px");}dojo.place(self.elem,self.scroll||dojo.body());if(self.onShowing(self)===false){return;}setTimeout(function(){if(self.scroll){var _2ee=dojo.position(self.elem);var _2ef=self.elem.style.height==="auto"||self.elem.style.height==="";if(_2ef){dojo.style(self.elem,"marginTop",(_2ee.h/-2)+"px");}self.center();self.resizeConnection=dojo.connect(window,"resize",dojo.hitch(self,self.center));if(self.throbber){dojo.destroy(dojo.query("img",self.throbber)[0]);}if(_2df){dojo.style(self.scroll||self.elem,"opacity",1);if(self.throbber){dojo.style(self.throbber,"opacity",0);}_2dc=self;dojo.query("a",self.elem)[0].focus();dojo.style(self.scroll||self.elem,"filter",_2de);if(self.onShown(self)===false){return;}}else{var _2f0=[dojo.fadeIn({node:self.scroll||self.elem,duration:self.throbber?150:500,delay:self.throbber?200:100,easing:dojo.fx.easing.linear,onEnd:function(evt){if(self.elem){_2dc=self;dojo.query("a",self.elem)[0].focus();dojo.style(self.scroll||self.elem,"filter",_2de);if(self.onShown(self)===false){return;}self.center();}}})];if(self.throbber){_2f0.push(dojo.animateProperty({node:self.throbber,duration:350,easing:dojo.fx.easing.quintInOut,properties:{marginTop:{end:_2ee.h/-2},height:{end:_2ee.h},marginLeft:{end:_2ee.w/-2},width:{end:_2ee.w}},onEnd:function(){dojo.destroy(self.throbber);}}));_2f0.push(dojo.fadeOut({node:self.throbber,duration:300,easing:dojo.fx.easing.linear}));}dojo.fx.combine(_2f0).play();}}});};},hide:function(_2f1){if(this.onHide(this)===false){return;}var self=this;if(self.mask){dojo.body().removeChild(self.mask);}if(this.scroll){dojo.disconnect(self.resizeConnection);self.resizeConnection=null;}if(_2df||_2f1){dojo.style(self.scroll||self.elem,"opacity",0);_2dc=null;dojo.body().removeChild(self.scroll||self.elem);if(self.options.destroyOnHide){self.destroy();}if(self.onHidden(self)===false){return;}}else{dojo.fadeOut({node:self.scroll||self.elem,duration:300,easing:dojo.fx.easing.expoOut,onEnd:function(evt){_2dc=null;if(self.scroll){dojo.style(self.scroll,"overflow","hidden");dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:_2de,paddingRight:_2de});}dojo.body().removeChild(self.scroll||self.elem);if(self.options.destroyOnHide){self.destroy();}if(self.onHidden(self)===false){return;}}}).play();}},destroy:function(){if(this.onDestroy(this)===false){return;}dojo.destroy(this.elem);this.elem=null;delete this.elem;if(this.scroll){dojo.destroy(this.scroll);this.scroll=null;}if(this.mask){dojo.destroy(this.mask);this.mask=null;}this.template=null;this.isLoaded=false;},center:function(){var _2f2=dojo.position(this.elem),_2f3=dojo.window.getBox(),_2f4=false,_2f5={left:_2de,top:_2de,marginTop:(_2f2.h/-2)+"px",marginLeft:_2de};if(_2df){_2f3={l:window.pageXOffset,t:window.pageYOffset,w:window.innerWidth,h:window.innerHeight};}else{_2f3.t=_2f3.l=0;}_2f3.w-=WSI.utils.getBrowserScrollbarWidth();if(_2f2.w>_2f3.w){_2f5.marginLeft=0;_2f5.left=_2f3.l+"px";_2f4=true;}else{if(_2df){_2f5.marginLeft=0;_2f5.left=(_2f3.l+(_2f3.w/2)-(_2f2.w/2))+"px";}}if(_2f2.h+20>_2f3.h-(_2f4?WSI.utils.getBrowserScrollbarWidth():0)){_2f5.marginTop="10px";_2f5.top=_2f3.t+"px";}else{if(_2df){_2f5.marginTop="10px";_2f5.top=(_2f3.t+(_2f3.h/2)-(_2f2.h/2))+"px";}}dojo.style(this.elem,_2f5);},_callback:function(name){var self=this;var res=true;if(this.registeredCallbacks[name]){dojo.every(this.registeredCallbacks[name],function(_2f6){res=res&&(_2f6.call(self,self)!==false);return res;});}return res;},_addCallback:function(name,fn){if(this.registeredCallbacks[name]){this.registeredCallbacks[name].push(fn);}},_removeCallback:function(name,fn){if(this.registeredCallbacks[name]){if(fn){var i=this.registeredCallbacks[name].indexOf(fn);if(i!=-1){this.registeredCallbacks[name].splice(i,1);return true;}}else{this.registeredCallbacks[name]=[];return true;}}return false;}});function _2f7(href){var _2f8=href.match(/#(.*)/);return (_2f8!==null)?_2f8[0]:href;};var _2f9={getByHref:function(href,_2fa){href=_2f7(href||_2fa.href);var _2fb=_2db[href];if(_2fb){dojo.mixin(_2fb.options,_2fa);}else{_2fb=(_2db[href]=new wsgc.js.Overlay(href,_2fa));}return _2fb;},trigger:function(_2fc,data,href){overlay=wsgc.js.Overlay.getByHref(href,_2fc);overlay.data=data;overlay.show();},hide:function(href,_2fd){href=_2f7(href||options.href);var _2fe=_2db[href];if(_2fe){_2fe.hide(_2fd);}},refresh:function(href){href=_2f7(href||options.href);var _2ff=_2db[href];if(_2ff){_2ff.refresh();}},center:function(){if(_2dc){_2dc.center();}},hideAll:function(){try{_2dc.hide(true);}catch(e){}return;},cancel:function(){try{_2dc.hide(false);}catch(e){}return;}};dojo.forEach(_2e1,function(_300){var _301={};_301["addO"+_300.substr(1)]=function(fn){this._addCallback(_300,fn);};_301["removeO"+_300.substr(1)]=function(fn){this._removeCallback(_300,fn);};dojo.extend(wsgc.js.Overlay,_301);_2f9["addO"+_300.substr(1)+"ByHref"]=_302(_300);_2f9["removeO"+_300.substr(1)+"ByHref"]=_303(_300);});dojo.mixin(wsgc.js.Overlay,_2f9);function _302(name){return function(href,fn){var _304=wsgc.js.Overlay.getByHref(href);_304._addCallback(name,fn);};};function _303(name){return function(href,fn){var _305=wsgc.js.Overlay.getByHref(href);_305._removeCallback(name,fn);};};WSI.Events.delegate(_2df?"touchstart":"click",_2dd,function(evt){if(this===evt.target&&_2dc){dojo.stopEvent(evt);_2dc.hide();}});dojo.connect(dojo.body(),"keypress",function(evt){if(evt.keyCode===dojo.keys.ESCAPE&&_2dc){dojo.stopEvent(evt);_2dc.hide();}});}(dojo));}if(!dojo._hasResource["wsgc.js.Tooltip"]){dojo._hasResource["wsgc.js.Tooltip"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.Tooltip");(function(dojo,_306){var _307=!!navigator.userAgent.match(/iPad/i),_308={placement:"above","style":"",id:"default",content:{},template:"",delay:300};if(!_307){WSI.Events.delegate("mouseover",".showTooltip",function(evt){var _309={},elem=this,_30a;_309=new wsgc.js.Tooltip(this,WSI.dataset.get(this,"tooltip"));_30a=dojo.connect(dojo.body(),"mousemove",function(evt){if(WSI.utils.closest(".showTooltip",evt.target)!==elem){dojo.disconnect(_30a);_309.hide();}});});}dojo.declare("wsgc.js.Tooltip",null,{constructor:function(elem,_30b){var _30c;this.options=dojo.mixin({},_308,_30b);this.elem=elem;if(_30b.template){_30c=WSI.utils.template(_30b.template);}else{if(dojo.byId("template-tooltip-"+this.options.id)){_30c=WSI.utils.template(dojo.trim(dojo.byId("template-tooltip-"+this.options.id).innerHTML));}else{}}dojo.mixin(this.options.content,{"style":this.options.style,placement:this.options.placement});this.node=WSI.utils.toDom(_30c(this.options.content));this.setPositioning();this.show();},setPositioning:function(){var _30d,_30e;_30d=dojo.position(this.elem,true);_30e=this.getDimensions();switch(this.options.placement){case "above":this.position={x:_30d.x+_30d.w/2-_30e.w/2,y:_30d.y-_30e.h};break;case "below":this.position={x:_30d.x+_30d.w/2-_30e.w/2,y:_30d.y+_30d.h};break;case "left":this.position={x:_30d.x-_30e.w,y:_30d.y+_30d.h/2-_30e.h/2};break;case "right":this.position={x:_30d.x+_30d.w,y:_30d.y+_30d.h/2-_30e.h/2};break;}},getDimensions:function(){var _30f;dojo.style(this.node,{position:"absolute",top:"0px",left:"0px"});dojo.place(this.node,dojo.body());_30f=dojo.position(this.node,true);this.node.parentNode.removeChild(this.node);dojo.removeAttr(this.node,"style");return _30f;},show:function(){dojo.style(this.node,{top:(this.position.y||0)+"px",left:(this.position.x||0)+"px",position:"absolute",opacity:0});dojo.place(this.node,dojo.body());dojo.fadeIn({node:this.node,duration:100,delay:this.options.delay}).play();},hide:function(){var node=this.node;dojo.fadeOut({node:this.node,duration:100,onEnd:function(){dojo.destroy(node);}}).play();}});}(dojo));}if(!dojo._hasResource["wsgc.js.SwatchTooltips"]){dojo._hasResource["wsgc.js.SwatchTooltips"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.SwatchTooltips");(function(dojo,_310){var _311=!!navigator.userAgent.match(/iPad/i);if(!_311){WSI.Events.delegate("mouseover","ul.graphical-att>li>a",function(evt){var _312={},elem=this,_313;_312=new wsgc.js.Tooltip(this,{"id":"swatch",content:{colorSrc:this.href,colorName:this.title}});_313=dojo.connect(dojo.body(),"mousemove",function(evt){if(WSI.utils.closest("a",evt.target)!==elem){dojo.disconnect(_313);_312.hide();}});});}}(dojo));}if(!dojo._hasResource["wsgc.common.js.VideoPlayer"]){dojo._hasResource["wsgc.common.js.VideoPlayer"]=true;dojo.provide("wsgc.common.js.VideoPlayer");dojo.provide("wsgc.js.VideoPlayer");(function(dojo,_314){var _315=0,_316={youTube:{width:640,height:390,autoplay:true,theme:"light"},productBuildFlash:{width:400,height:370}};WSI.VideoPlayer=dojo.mixin(wsgc.js.VideoPlayer,{youTubeData:function(_317,_318){var _319="cb"+_315++;WSI.utils.loadScript("//gdata.youtube.com/feeds/api/videos/"+_317+"?v=2&alt=json-in-script&callback=WSI.VideoPlayer."+_319);WSI.VideoPlayer[_319]=function(data){delete WSI.VideoPlayer[_319];try{_318({videoId:_317,title:data.entry.media$group.media$title.$t,description:data.entry.media$group.media$description.$t});}catch(e){if(console&&console.error){}}};},youTubePlayer:function(elem,_31a){var opts=dojo.mixin({},_316.youTube,_31a||{},WSI.dataset.get(elem,"youtubevideo")||{}),_31b=opts.videoId,_31c=!dojo.isIE||dojo.isIE>7,_31d=!!navigator.userAgent.match(/iP(?:ad|hone)/i),_31e="//www.youtube.com/embed/"+_31b+"?enableuseJsApi="+(_31c?1:0)+"&origin="+WSI.config.appUrl,_31f=new YT.Player(elem,{videoId:_31b,height:opts.height,width:opts.width,events:_31c?{onReady:function(evt){if(!_31d&&opts.autoplay){_31f.playVideo();}},onStateChange:function(evt){if(evt.data===0&&_31d){_31f.seekTo(0);}}}:{},playerVars:{wmode:"transparent",autohide:1,autoplay:dojo.isIE===7&&opts.autoplay?1:0,modestbranding:_31d?0:1,iv_load_policy:3,fs:1,cc_load_policy:0,rel:0,showsearch:0,enablejsapi:1,webkitAllowFullScreen:"webkitAllowFullScreen",mozallowfullscreen:"mozallowfullscreen",allowFullScreen:"allowFullScreen",theme:opts.theme}});},productBuildFlashPlayer:function(elem,_320){var opts=dojo.mixin({},_316.productBuildFlash,_320||{},WSI.dataset.get(elem,"productbuildflash")||{}),_321=opts.videoPath,_322=WSI.config.sessionCookieName,_323=_322?("&sessionCookieName="+_322+"&sessionId="+(dojo.cookie(_322)||"")):"";new dojox.embed.Flash({path:_321,width:opts.width,height:opts.height,params:{wmode:"transparent",allowFullScreen:"true",flashvars:"urlbase=${rc.getRootUrl()}&swfbase="+_321+_323,allowScriptAccess:"always"}},elem);}});wsgc.common.js.VideoPlayer=wsgc.js.VideoPlayer;}(dojo));}if(!dojo._hasResource["wsgc.js.Social"]){dojo._hasResource["wsgc.js.Social"]=true;dojo.provide("wsgc.js.Social");(function(dojo,_324){dojo.declare("wsgc.js.Social",[],{constructor:function(url){this.callbacks=[];if(url){WSI.utils.loadScript(url);}},_callCallbacks:function(){for(var i=0,len=this.callbacks.length;i<len;++i){if(false===this.callbacks[i].apply(this,arguments)){break;}}},registerCallback:function(fn){this.callbacks.push(fn);}});dojo.declare("wsgc.js.social.Twitter",[wsgc.js.Social],{constructor:function(url){var self=this,t=window.twttr={_e:[],ready:function(f){t._e.push(f);}};t.ready(function(_325){_325.events.bind("tweet",function(evt){self._callCallbacks(evt);});});}});dojo.declare("wsgc.js.social.Facebook",[wsgc.js.Social],{constructor:function(url,_326){var self=this,opts={status:true,cookie:true,xfbml:true};if(_326){opts.appId=_326;}window.fbAsyncInit=function(){FB.init(opts);FB.getLoginStatus(function(_327){});FB.Event.subscribe("edge.create",function(r){self._callCallbacks(r);});};}});dojo.declare("wsgc.js.social.GooglePlus",[wsgc.js.Social],{constructor:function(url){var self=this;window.googlepluscallback=function(arg){self._callCallbacks(arg);};}});}(dojo));}
