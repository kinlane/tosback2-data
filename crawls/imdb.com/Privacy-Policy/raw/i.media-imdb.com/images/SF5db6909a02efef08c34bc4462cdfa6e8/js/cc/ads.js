(function(){window.generic=window.generic||{};window.generic.install=function(w,p){var s;for(s in p)if(p.hasOwnProperty(s))w[s]=p[s]}})();(function(w){w.install(w,{document_readys:[],document_is_ready:function(){var p=w.document_readys,s;w.document_readys=null;for(s=0;s<p.length;s++)try{p[s](jQuery)}catch(u){}w.should_jQuery_noConflict&&jQuery.noConflict(false)},on_document_ready:function(p){w.has_document_readied()?p(jQuery):w.document_readys.push(p)},has_document_readied:function(){return w.document_readys===null}})})(window.generic);function consoleLog(w,p){var s=window.consoleLog,u=document.location,x=u.host.match(/^(m|www|uk).imdb.[a-z]+$/);u=u.hash.match("debug=1");if(p)(s[p]=s[p]||[]).push(w);else p="global";(s.global=s.global||[]).push(p+" : "+w);try{!u&&x||window.console&&window.console.log&&window.console.log(p+" : "+w)}catch(j){}};document.getElementsByTagName("html")[0].className+=" scriptsOn";(function(){var w=window.ads_js_start?(new Date).getTime()-window.ads_js_start:null,p=document,s=navigator.userAgent,u=/MSIE/.test(s),x=/Firefox/.test(s),j=window.generic,J={top_ad:"t",top_rhs:"tr",upfront_navstrip:"ns"},z=document.all?function(a){return document.all[a]}:function(a){return document.getElementById(a)},M=function(a){return document.getElementsByTagName(a)},U=function(a){return z(a).contentWindow.document},E=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,function(){c.apply(a,arguments)}):
a.addEventListener(b,c,false)},T=Math.random()*1E16,B=[[/%3B/g,";"],[/%3D/g,"="],[/%2C/g,","],[/%3F/g,"?"]],G=/(\[|%5B)CLIENT_SIDE_ORD(\]|%5D)/g,f=/(\[|%5B)PASEGMENTS(\]|%5D)/,l=/(\[|%5B)CLIENT_SIDE_KEYVALUES(\]|%5D)/,t={},n={},m=function(){var a,b,c=function(){var k="{";if(b){if("h"in b)k+=g("h");if("h"in b&&"n"in b)k+=",";if("n"in b)k+=g("n")}k+="}";j.cookie.set("as",k,j.days_to_midnight||1)},g=function(k){var q="";jQuery.each(b[k],function(H,y){q+='"'+H+'":['+d(y[0])+","+d(y[1])+"],"});return'"'+
k+'":{'+q.substr(0,q.length-1)+"}"},h=function(){var k=j.cookie.get("as");if(k)try{b=jQuery.parseJSON(k);a=a||b||{}}catch(q){a=a||(b={})}},d=function(k){k=parseInt(k,10);return isFinite(k)?k:0},e=function(){return document.location.pathname==="/"?"h":"n"},o=function(k){var q=ad_utils.get_ad_object(k[0]);return k.css("display")==="none"?0:parseInt(q.w,10)},v=function(k,q){var H=0,y=ad_utils.get_ad_object(k[0]);y=parseInt(y.h,10);if(q==="top_ad")if(jQuery("#nb20").hasClass("banner"))H=-5;else{if(jQuery("#nb20").hasClass("supertab"))H=
-15}else if(q==="injected_billboard")H=20;if("swfAutoMaxHeight"in k[0].contentWindow)y=k[0].contentWindow.swfMinHeight;return k.css("display")==="none"?0:y+H},r={top_ad:"t",top_rhs:"tr",upfront_navstrip:"ns",injected_navstrip:"in",injected_billboard:"ib"};return{store:function(){j.on_document_ready(function(k){var q;try{h();b=b||{};q=b[e()]||{};k.each(r,function(y,A){var N=k("#"+y);if(N.length!==0)q[A]=[o(N,y),v(N,y)]});b[e()]=q;c()}catch(H){consoleLog("Failed to store ad size cookie "+H.toString(),
"ads")}})}}}(),F=function(){var a=function(c,g){c=c.contentWindow?c.contentWindow.document:c.contentDocument;x||c.open("text/html","replace");c.write("<body>"+g+"<script>document.close()<\/script></body>")},b=function(c,g){var h="__srcless_"+Math.floor(Math.random()*68719476735).toString(36),d="<body><script>document.write(parent.ad_utils."+h+");delete parent.ad_utils."+h+";<\/script></body>";ad_utils[h]=g;c.src="javascript:unescape('"+escape(d)+"')"};return{inject_code:function(c,g){u?b(c,g):a(c,
g)}}}();this.ad_utils={ord:T,ord_regex:G,ad_table:{},ad_queue:[],queue_ad:function(a,b){var c=this.ad_queue;a={tile:a,slot:b,prev:c.length>0?c[c.length-1].slot:null};c.push(a);j.monitoring.update_slot_metrics(b,"iframe");this.ad_table[b]=a},register_ad:function(a){j.monitoring.update_slot_metrics(a,"iframe");this.ad_table[a]={slot:a}},render_ad_fast:function(a){var b=p.getElementById(a),c=b.contentWindow,g=b.getAttribute("data-dart-params");g='<style>body{background:transparent;}</style><script src="'+
(b.getAttribute("data-override-url")||custom.doubleclick.construct_url(g))+'" type="text/javascript"><\/script><script>document.write("<script defer>parent.ad_utils.ad_table.'+a+'.fired=true;<\\/script>");<\/script>';j.monitoring.start_timing(a);j.monitoring.update_slot_metrics(a,"request");F.inject_code(b,g);c.show_ad_feedback=function(){j.on_document_ready(function(){ad_utils.show_ad_feedback(a)})};c.d16g_external_callback=function(h){p.ad=h;ad_utils.expand_ad(b)}},render_ad:function(a,b,c){var g=
this.ad_queue,h=b.frameElement.id;this.ad_table[h]||(this.ad_table[h]={slot:h});var d=this.ad_table[h].prev,e=a.location.hash;c=c||custom.doubleclick.construct_url(e);ad_utils.weblab.get_treatment("kill ads");b.show_ad_feedback=function(){j.on_document_ready(function(){ad_utils.show_ad_feedback(h)})};b.d16g_external_callback=function(r){a.ad=r;ad_utils.expand_ad(b.frameElement)};try{if(g.length===0||g[0].slot==h){if(d)this.ad_table[d].onFireAd=null;g.shift();this.ad_table[h].fired=true;this.ad_table[h].render=
"normal";try{j.monitoring.start_timing(h);j.monitoring.update_slot_metrics(h,"request");j.monitoring.record_metric("fast_ads_"+(h==="upfront_navstrip"?"navstrip":h)+"_request.normal",csm.duration())}catch(o){consoleLog("start_timing failed: "+o.toString(),"ads")}a.write('<script src="'+c+'" type="text/javascript"><\/script>');this.ad_table[h].onFireAd&&this.ad_table[h].onFireAd()}else if(d)this.ad_table[d].onFireAd=function(){b.location.reload()}}catch(v){a.write('<script src="'+c+'" type="text/javascript"><\/script>')}},
resize_iframe:function(a){this.expand_ad(a)},expand_ad:function(a){var b=this,c=a.id,g=a.height,h=a.width;if(!("expand_called"in this.ad_table[c])){var d=a.parentNode.id,e=this.get_ad_object(a),o=z(c+"_before"),v=z(c+"_after"),r,k=csm.duration(),q=z(c+"_reflow_helper"),H=q!==null?q.offsetTop:null;if(c+"_wrapper"!==d)if(!j.has_document_readied()){j.on_document_ready(function(){b.expand_ad(a)});return}if(this.ad_table&&this.ad_table[c]){this.ad_table[c].expanded=1;if(e){if(!document.ads)document.ads=
{};document.ads[e.cid]=e;if("w"in e)a.width=parseInt(e.w,10);if("h"in e)a.height=parseInt(e.h,10);if("z"in e&&e.z){a.parentNode.style.zIndex=e.z;a.parentNode.style.position="relative"}if(e.st)this.expand_supertab(e);else if(e.bb)this.expand_billboard(e);else a.id==="top_ad"&&this.is_open(e)&&!e.clickroll&&!e.overlay&&this.expand_top_banner();e.wrap&&this.expand_wrap(e);e.bamf&&this.expand_bamf(e,a);e.inner_bamf&&this.expand_inner_bamf(e);e.relative_bamf&&this.expand_relative_bamf(e);if(this.is_open(e)){o&&
this.display_label(o);v&&this.display_label(v)}else this.collapse_ad(a);if(e.styles)for(r in e.styles)j.override_style(r,e.styles[r].style)}this.ad_table[c].expand_called=1;j.on_document_ready(function(y){y(a).trigger("expand_ad")});g===a.height&&h===a.width?j.monitoring.update_slot_metrics(c,"reflow",0):setTimeout(function(){var y=c==="top_ad"&&ad_utils.is_open(e)&&!e.st?10:0;q!==null&&q.offsetTop===H+y?j.monitoring.update_slot_metrics(c,"reflow",0):j.monitoring.update_slot_metrics(c,"reflow",k)},
10);j.monitoring.update_slot_metrics(c,"tagdeliver",k);m.store();document.body.className=document.body.className}}},get_ad_object:function(a){a=a.id;var b=U(a),c=null;try{c=b.ad}catch(g){consoleLog("Cannot access ad parameters: "+g.toString(),"ads")}if(c){if(!("pid"in c))c.pid="DFP";if(!("url"in c))c.url="http://ad.doubleclick.net/adi/d16g-sec.preview/;cid="+("cid"in c?c.cid:"")}else{var h=0,d=0;c=["img","object","embed","iframe"];var e,o,v;for(o in c){v=b.getElementsByTagName(c[o]);for(e=0;e<v.length;e++){var r=
v[e],k;k=r.scrollWidth||r.width;r=r.scrollHeight||r.height;if(k&&k>1)h=Math.max(h,parseInt(k,10));if(r&&r>1)d=Math.max(d,parseInt(r,10));consoleLog(a+" : estimated size : "+k+","+r,"ads")}}c={w:h.toString(),h:d.toString(),pid:"",url:"",aid:"0",cid:"0"};if(h===0||d===0)c.scope="null"}return b.ad=c},get_cornerstone_ad_object:function(a){a=J[a]+"adData";if("aanResponse"in top.document&&a in top.document.aanResponse)return top.document.aanResponse[a];return null},get_mapped_amazon_slot_name:function(a){return J[a]?
J[a]:a},clean_up_slot_metrics:function(a){var b=a.id,c=U(b);a=this.get_ad_object(a);try{j.monitoring.stop_timing(b,this.get_type_of_ad(a),true)}catch(g){consoleLog("stop_timing failed: "+g.toString(),"ads")}c.location.href.match(/\/ads\/request\//)&&this.log_ad_impression(a,b)},on_ad_load:function(a){var b=a.id,c=this.get_ad_object(a),g=this.ad_table[b];if(!g||!(g.fired||g.injected))consoleLog("deflected spurious onload event for "+b,"on_ad_load");else{a.style.visibility="";g.loaded=true;c.scope===
"blank"&&a.getAttribute("data-original-width")==="0"&&a.getAttribute("data-original-height")==="0"?j.monitoring.update_slot_metrics(b,"load",0):j.monitoring.update_slot_metrics(b,"load");j.monitoring.update_slot_metrics(b,"trueload");g.expanded||this.expand_ad(a);this.clean_up_slot_metrics(a);this.ad_load.loaded(b)}},ad_load:function(){var a={};return{loaded:function(b){var c=a[b];if(c)for(b=0;b<c.length;b++)c[b]()},listen:function(b,c){ad_utils.ad_table[b]&&ad_utils.ad_table[b].loaded?setTimeout(c,
0):(a[b]=a[b]||[]).push(c)}}}(),is_open:function(a){return a&&"w"in a&&"h"in a&&a.w>0&&a.h>0&&a.scope!=="blank"},expand_supertab:function(){var a=z("nb15"),b=z("nb20");if(a)a.className="supertab";else if(b)b.className="supertab"},expand_billboard:function(a){function b(){var C=j.cookie.get(O),I=C&&C.split(/o|c/);C=C&&C.split(/\d*/);var V={},P;if(I&&C){C[0]===""&&C.shift();for(P=0;P<C.length;++P)V[I[P]]=C[P]}S=V}function c(){var C="",I;for(I in S)if(S.hasOwnProperty(I))C+=I+S[I];j.cookie.set(O,C,j.days_to_midnight||
1)}function g(C,I){var V=q.createElement("div");C=C.getElementsByTagName(I);var P,W="";for(I=0;I<C.length;++I){P=C[I];P.parentNode.removeChild(P);V.appendChild(P);W+=V.innerHTML;V.removeChild(P)}return W}function h(){parseInt(r.style.height,10)!==parseInt(q.ad.h,10)&&r.contentWindow.minimize();r.style.display="none";K.style.display="block";b();S[a.aid]="c";c();L="";L+=g(q,"object");L+=g(q,"embed");m.store()}function d(){K.style.display="none";r.style.display="block";b();S[a.aid]="o";c();if(L)y.innerHTML=
L+y.innerHTML;q.getElementById("billboard_close_button").onclick=h;m.store()}function e(C){C=C;for(var I=0;C;){I+=C.offsetTop;C=C.offsetParent}return I}function o(){if(!A)return false;var C=A.parentElement||A.parentNode,I=z("injected_billboard_reflow_helper");return C&&I&&(C.offsetTop===I.offsetTop||e(C)===e(I))}var v=document,r=z("injected_billboard"),k=r.parentElement||r.parentNode,q=r.contentWindow.document,H=q.getElementsByTagName("body"),y=H.length===1?H[0]:q.createElement("body"),A=z("top_rhs_wrapper");
H=a.bb_close;var N=a.bb_show,O="ax",L,S,K,Q;if(!k)return false;k.className=(k.className?k.className+" ":"")+"billboard";if(a.bb===1){Q=q.createElement("div");Q.id="billboard_close_button";Q.style.cssFloat="right";Q.style.cursor="pointer";Q.style.position="absolute";Q.style.top=0;Q.style.right=0;Q.innerHTML=H;Q.onclick=h;y.appendChild(Q);K=v.createElement("div");K.id="billboard_show_button";K.innerHTML=N;K.onclick=d;o()?(A.parentElement||A.parentNode).insertBefore(K,A):(k.parentElement||k.parentNode).insertBefore(K,
(k.parentElement||k.parentNode).firstChild);b();a.aid in S&&S[a.aid]==="c"&&h()}return true},expand_top_banner:function(){var a=z("nb15");if(a)a.className="banner";else z("nb20").className="banner"},expand_bamf:function(a,b){j.extend(b.style,a.bamf.style)},expand_inner_bamf:function(a){a=a.inner_bamf;var b=z(a.targetId);b&&a.node&&j.insert_after(a.node,b)},expand_relative_bamf:function(a){a=a.relative_bamf;var b=z(a.targetId),c;if(a.relation=="insert_after")c=j.insert_after;else if(a.relation=="insert_before")c=
j.insert_before;else if(a.relation=="insert_inside")c=j.insert_inside;b&&a.node&&c(a.node,b)},expand_wrap:function(a){if(!a.styles)a.styles={};j.extend(a.styles,{"styleguide-v2":{style:{background:a.wrap}},root:{style:{"background-color":"transparent","box-shadow":"none"}},pagecontent:{style:{height:"100%"}},nb20:{style:{background:"none"}}})},expand_label:function(a){a.className=a.className.replace(/hidden/,"")},display_label:function(a){a.className=a.className.replace(/ads-invisible/,"")},collapse_ad:function(a){var b=
a.id,c=function(g){if(g=z(g))g.className="hidden"};a.style.display="none";c(b+"_before");c(b+"_after")},log_ad_impression:function(a,b){var c="/ads/record/[scope];[slot];[aid];[cid];[ord];[time].js";c=c.chained_replace([[/\[slot\]/g,b],[/\[ord\]/g,this.ord],[/\[time\]/g,(new Date).getTime()]]);c=c.chained_replace(a?[[/\[scope\]/g,a.scope||"0"],[/\[aid\]/g,a.aid],[/\[cid\]/g,a.cid]]:[[/\[scope\]/g,"null"]]);j.load_script(c)},get_type_of_ad:function(a){if(!a)return"null";if(a.scope)return a.scope;return"got_ad"},
show_ad_feedback:function(a){function b(){g("#ad_feedback_"+a).remove();return false}function c(y){var A=g(window),N=g(document),O=(A.width()-300)/2+N.scrollLeft();A=(A.height()-320)/2+N.scrollTop();y.css({top:A<0?0:A,left:O})}try{var g=jQuery,h=window.frames[a],d=ad_utils.get_ad_object(h.frameElement),e,o=h.location.hash.match(/#([^;]*);/),v={adId:d?d.aid:"",cid:d?d.cid:"",page_id:window.location.href.substr(0,255),pagesubtype:o?o[1]:"",slot:a},r=v.adId+";"+v.cid+";"+v.slot,k=g("#ad_feedback_container"),
q=0;g("div.dfp_slot iframe").each(function(){var y=this.id,A=ad_utils.get_ad_object(this);if(!(y in n)&&A){e=ad_utils.get_cornerstone_ad_object(y);n[y]=e?{aid:e.adId,cid:e.creativeId,pid:e.adNetwork}:{aid:A.aid,cid:A.cid,pid:A.pid};n[y].url=A.url;n[y].dim=A.w+"x"+A.h}});g.each(n,function(y,A){v["slot_"+q]=y;v["cid_"+q]=A.cid;v["aid_"+q]=A.aid;v["pid_"+q]=A.pid;v["dim_"+q]=A.dim;v["url_"+q]=A.url;q++});if(k.length===0){k=g('<iframe id="ad_feedback_container">');k.addClass("hidden").attr({name:"ad_feedback_container",
scrolling:"no",frameborder:"no",marginheight:"0",marginwidth:"0",allowtransparency:"yes"});k[0].hide=function(){g(this).addClass("hidden")};k[0].show=function(){g(this).removeClass("hidden")};k[0].isHidden=function(){return k.hasClass("hidden")};g("body").append(k)}if(k.attr("src")===""||k.attr("ref")!==r)k.unbind().load(function(){k[0].show();c(k);g(this).unbind()}).attr("src","/ads/feedback.html#"+g.param(v)).attr("ref",r);else if(k[0].isHidden()){k[0].show();c(k)}else{k[0].hide();return false}}catch(H){consoleLog("ad feedback failure : "+
H,"ads");b()}return false},report_ad_data:function(a,b){a=a;var c,g={};if(a!==top){try{for(;a.parent!==top;)a=a.parent;c=a.frameElement.id}catch(h){consoleLog("could not determine ad slot: "+h);return}$.each("aid cid pid url dom dim".split(" "),function(d,e){if(e in b)g[e]=b[e]});n[c]=g}},ns:function(){var a={},b=function(c){return a[c]=a[c]||{}};return{register:function(c,g,h){b(typeof c==="string"?c:c.frameElement.id)[g]=h},get:b}}(),inject_ad:function(){var a={},b={},c=function(h){consoleLog(h,
"inject_ad")},g={injected_billboard:"top_ad",injected_navstrip:"top_ad"};return{render:function(h){var d=h.document,e=h.frameElement,o=e.id;h=z(g[o]);ad_utils.ad_table[o]={slot:o,injected:true};if(o in a){E(e,"load",function(){ad_utils.on_ad_load(this)});d.write(a[o]);delete a[o]}else E(h,"load",function(){if(!(o in a)){c(o+" will never have an ad");e.contentWindow.document.ad={h:"0",w:"0",scope:"blank"};ad_utils.on_ad_load(e)}});b[o]=true;c(o+" rendered")},inject:function(h,d){a[h]=d;b[h]&&z(h).contentWindow.location.reload();
c(h+" injected")}}}(),weblab:function(){var a={};return{set_treatment:function(b,c){a[b]=c},get_treatment:function(b){return a[b]}}}(),fallback:function(){var a,b=function(d){consoleLog(d,"kill_ad")},c=function(d){var e=ad_utils.weblab.get_treatment("kill ads");return a&&d in a&&e==="treatment"},g=function(d){var e=ad_utils.ad_table[d],o=z(d),v=z(d+"_fallback"),r=o.parentNode;if(e&&e.loaded)b("tried to kill "+d+" but it already has an ad");else if(j.monitoring.get_remnant_partner(d)==="none")b("can not kill a direct sold ad in "+
d);else if(v){b("showing fallback element for "+d);v.style.display="";j.monitoring.record_metric("csm_"+d+"_load_aborted."+j.monitoring.get_remnant_partner(d),csm.duration());if(u){o.src='javascript:"<script>window.frameElement.parentNode.removeChild(window.frameElement);<\/script>"';o.onload=null;o.style.display="none"}else r.removeChild(o);d==="top_ad"&&ad_utils.expand_top_banner()}else{ad_utils.collapse_ad(o);b("no fallback to show for "+d+" and collapse the slot")}},h=function(d){var e=ad_utils.ad_table[d],
o=z(d),v=z(d+"_fallback_code"),r=p.createElement("div");o=o.parentNode;if(v)if(!(e&&e.loaded)){b("filling in fallback element for "+d);r.id=d+"_fallback";r.innerHTML=unescape(v.innerHTML);r.style.display="none";o.insertBefore(r,o.firstChild)}};return{set_kill_threshold:function(d){a=d},start_kill_timer:function(d){var e;e=z(d);if(c(d))if(a&&d in a){e.style.visibility="hidden";e=a[d]-((new Date).getTime()-window.IMDbTimer.starttime);b("threshold for "+d+": "+a[d]);setTimeout(function(){h(d)},e-350);
setTimeout(function(){g(d)},e);b("killing "+d+" in "+e+"ms")}else b("ERROR: the kill threshold is not correctly set. Bail from the kill-ad feature")}}}()};j.install(j,{should_jQuery_noConflict:window.$&&!window.jQuery,one_way_send_record:[],insert_after:function(a,b){try{b.parentNode.insertBefore(a,b.nextSibling)}catch(c){b.parentNode.appendChild(a)}},insert_before:function(a,b){b.parentNode.insertBefore(a,b)},insert_inside:function(a,b){b.appendChild(a)},extend:function(a,b){var c;for(c in b)if(typeof b[c]==
"object"){if(a[c]!=b[c]){if(typeof a[c]=="undefined")a[c]={};this.extend(a[c],b[c])}}else a[c]=b[c]},override_style:function(a,b,c){a="#"+a;var g;for(g in b)b[g]+=" !important";j.add_json_style(a,b,c)},add_json_style:function(a,b,c,g){a=a+"{";var h;for(h in b)a+=h+":"+b[h]+";";a+="}";j.add_css_style(a,c,g)},add_css_style:function(a,b,c){var g=["css-style-generic"],h,d;if(!b||!b.length)b="css-style-generic";else g.push(b);c||(c="a");for(d in g)if(!z(g[d])){h=document.createElement("style");h.setAttribute("type",
"text/css");h.id=g[d];M("head")[0].appendChild(h)}h=z(b);if(h.styleSheet&&"cssText"in h.styleSheet){a=(c==="a"?h.styleSheet.cssText:"")+a;h.styleSheet.cssText=a}else{a=(c==="a"?h.innerHTML:"")+a;try{h.innerHTML=a}catch(e){h.innerText=a}}},add_css_file:function(a,b){b||(b="css-file-generic");var c=z(b);if(!c){c=document.createElement("link");c.setAttribute("type","text/css");c.rel="stylesheet";c.id=b;M("head")[0].appendChild(c)}c.href=a},set:function(a,b){a=a.split(":");a[0]=="cookie"?j.cookie.set(a[1],
b):j.cache.set(a[1],b)},get:function(a){a=a.split(":");return a[0]=="cookie"?j.cookie.get(a[1]):j.cache.get(a[1])},erase:function(a){a=a.split(":");return a[0]=="cookie"?j.cookie.erase(a[1]):j.cache.erase(a[1])},cache:{set:function(a,b){t[a]=b},get:function(a){return t[a]},erase:function(a){delete t[a]}},load_script:function(a){var b=document.createElement("script");b.type="text/javascript";b.src=a;M("head")[0].appendChild(b)},load_script_notify:function(a,b){var c=document.createElement("script"),
g=false;c.type="text/javascript";c.src=a;c.onload=c.onreadystatechange=function(){var h=this.readyState;if(!(g||h&&h!="complete"&&h!="loaded")){g=true;document.body.removeChild(c);"function"===typeof b&&b(a)}};document.body.appendChild(c)},one_way_send:function(a){imageObj=new Image(0,0);imageObj.src=a;this.one_way_send_record.push(imageObj)},extensions:{String:{chained_replace:function(a){var b=this,c;for(c=0;c<a.length;c++){var g=a[c];b=b.replace(g[0],g[1])}return b},collapse:function(a,b){for(var c=
this;c.length>b;){var g=c.replace(a,"");if(g.length==c.length)break;c=g}return c}}},load_when_visible:function(a,b){var c=0,g=jQuery(window),h=g.height()+g.scrollTop();if(jQuery("#"+a).length){var d=jQuery(jQuery("#"+a).get(0)),e=d.offset().top;h>e?b(a):g.scroll(function(){h=g.height()+g.scrollTop();e=d.offset().top;if(h>e&&!c){c=1;b(a)}})}else b(a)},unload_plugins:function(){for(var a=[document],b,c,g,h=new RegExp("^("+location.protocol+"//"+location.hostname+")?(/.*)?$"),d=function(e){var o,v;for(o=
e.length-1;o>=0;o--){v=e[o];v.parentNode.removeChild(v)}};a.length;){b=a.pop();d(b.getElementsByTagName("object"));d(b.getElementsByTagName("embed"));b=b.getElementsByTagName("iframe");for(g=b.length-1;g>=0;g--){c=b[g];if(h.test(c.src))(c=c.contentWindow.document)&&a.push(c);else d([c])}}}});String.prototype.chained_replace=j.extensions.String.chained_replace;String.prototype.collapse=j.extensions.String.collapse;this.custom={amazon:{segments:null,complete_segments:null,aan_call_name:"aan_call",get_segments:function(a){if(!this.segments){var b=
j.cookie.get("us")||"";b=b.replace(/[^a-zA-Z0-9;=]/g,"");this.segments=b.collapse(/s=[^;]*;$/,a);a=b.length-this.segments.length;a!==0&&j.monitoring.record_metric("seg_trimmed",a)}return this.segments},load_callback:function(a){this.complete_segments=a;trimmed_segs=a.collapse(/s=[^;]*;$/,450);j.cookie.set("us",trimmed_segs,7);if(this.segments===null){j.monitoring.stop_timing(this.aan_call_name,"in_time",false);csm.measure("csm_aan_response.in_time")}else{j.monitoring.stop_timing(this.aan_call_name,
"late",false);csm.measure("csm_aan_response.late")}},aan_iframe_oncall:function(){j.monitoring.start_timing(custom.amazon.aan_call_name);csm.measure("csm_aan_request")}},doubleclick:function(){var a=[],b=function(d){d=d.replace(G,T);d=d.replace(l,a.join(";"));d=d.chained_replace(B);var e=475-d.chained_replace([[f,""],[/^[^\;]*/,""]]).length;e=custom.amazon.get_segments(e);return d.replace(f,e)},c=/\[PLAYLISTINDEX\]/,g=/\[PLAYLISTID\]/,h=/\[PLAYERTYPE\]/;return{construct_url:function(d){var e=d.match(";ifb=pf;")?
"pfadj":"adj";d=escape(d.substring(1,d.length));d=b(d);return document.location.protocol+"//ad.doubleclick.net/"+e+"/"+d},construct_video_url:function(d,e){d=b(d);d=d.replace(c,"vi="+(e.listindex||"0"));d=d.replace(g,e.list?"vl="+e.list:"");d=d.replace(h,"vt="+e.playertype);return document.location.protocol+"//ad.doubleclick.net/pfadx/"+d},add_client_side_keyvalue:function(d,e){a.push(d+"="+e)}}}(),indirect:{close:function(a){a.location.href.match("floater")&&custom.floater.close(a.frameElement.id)}},
full_page:{style_id:"custom__full_page__generated_styles",data_url:"/images/a/js/graffiti_data.js",apply:function(a){var b=this;document.getElementById("root").style.boxShadow="none";window.generic.on_document_ready(function(){b.settings=a;"styles"in b?b._apply():window.generic.load_script_notify(b.data_url,function(){b._apply()})})},_apply:function(){var a;a=this.settings.ARGS.split(/&/);var b={},c=this,g="/* ARGS:"+this.settings.ARGS+" */\n";jQuery.each(a,function(d,e){d=/^(.*)=(.*)$/.exec(e);if(d.length===
3)b[d[1]]=unescape(d[2].replace(/\+/g," "))});a=this.invert_styles(b.treatment);jQuery.each(a,function(d,e){if(e.fixed)g+=c.format_css(e,e.fixed);else if(b[d]||e["default"])g+=c.format_css(e,b[d])});try{jQuery("style#"+this.style_id).remove();jQuery("head").append(jQuery('<style type="text/css">').attr("id",this.style_id).html(g))}catch(h){j.add_css_style(g,this.style_id,"o")}},invert_styles:function(a){var b=["default","important","fixed"],c={};jQuery.each(this.styles[a],function(g,h){jQuery.each(h,
function(d,e){var o=c[e.name]={style:g,selector:e.selector};jQuery.each(b,function(v,r){if(e[r])o[r]=e[r]})})});return c},format_css:function(a,b){return a.selector+" { "+a.style+" : "+(b?b:a["default"])+(a.important?" !important ":"")+"}\n"}},floater:{close:function(a){j.extend(z(a),{style:{width:"0px",height:"0px"}})},launch:function(a,b,c,g,h,d,e){var o=document.createElement("iframe");g=typeof g==="string"?z(g):g;c!="none"&&setTimeout(function(){custom.floater.close(e)},c*1E3);j.extend(o,{id:e,
name:e,src:a,width:b[0]+"px",height:b[1]+"px",frameBorder:"0",scrolling:"no",allowTransparency:"true",style:{marginLeft:d[0]+"px",marginTop:d[1]+"px",zIndex:d[2],position:"absolute"}});h(o,g)},set:function(a,b,c,g,h,d){j.cache.set("floater",a);a="floater_"+Math.ceil(Math.random()*9999999);custom.floater.launch("/images/a/ifb/doubleclick/indirect.html?source=cache:floater",b,c,g,h,d,a);return a}}};var D=function(a,b){return b?'<param name="'+a+'" value="'+b+'">':""},R=function(a,b){return b?" "+a+
'="'+b+'" ':""};this.flashAdUtils={makeFlashAd:function(a){var b=a.id,c=a.src,g=a.width,h=a.height,d=a.bgcolor,e=a.wmode||"opaque",o=a.salign,v=a.scale,r=a.extraParams,k=a.extraTAGs,q=a.minVersion,H=escape(a.clickThru),y=a.clickTAGs,A=function(K){return K!==null&&K!==undefined&&(K+"").length},N=function(K){return isFinite(parseInt(K,10))};a="";var O,L;if(!A(b)||!A(c)||!N(g)||!N(h))consoleLog("makeFlashAd: Missing required params","flashAdUtils");else{flashAdUtils.canPlayFlash(q)||consoleLog("makeFlashAd: Current flash version too low",
"flashAdUtils");if(y)for(q=0;q<y.length;q++)if(y[q])a=a+"&clickTAG"+(q+1)+"="+escape(y[q]);if(k)for(O in k)a=a+"&"+escape(O)+"="+escape(k[O]);a+="&ord="+ad_utils.ord;O=k="";try{q={width:1,height:1,src:1,bgcolor:1,wmode:1,salign:1,scale:1,flashvars:1};for(L in r)if(!q[L]){k+=D(L,r[L]);O+=R(L,r[L])}}catch(S){}r=D("bgcolor",d);d=R("bgcolor",d);L=D("wmode",e);e=R("wmode",e);q=D("scale",v);v=R("scale",v);y=D("salign",o);o=R("salign",o);return'<object  classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"  codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"  width="'+
g+'"  height="'+h+'"  id="swf_'+b+'"><param name="movie" value="'+c+'"><param name="flashvars" value="env=WEB&clickTAG='+H+"&"+a+'"><param name="play" value="true"><param name="quality" value="high"><param name="allowScriptAccess" value="always">'+q+y+r+L+k+'<div style="margin-left:0.1px"><embed src="'+c+'"  flashvars="env=WEB&clickTAG='+H+"&"+a+'"  quality="high"  play="true"  width="'+g+'"  height="'+h+'"  name="swf_'+b+'"  allowScriptAccess="always"  type="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" '+
v+o+d+e+O+"></embed></div></object>"}},canPlayFlash:function(a){var b=false,c=parseInt(a,10);a=!a||c<9?9:c;if((navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0)&&navigator.plugins["Shockwave Flash"]){b=navigator.plugins["Shockwave Flash"].description.split(" ");var g;for(c=0;c<b.length;++c)isNaN(parseInt(b[c],10))||(g=parseInt(b[c],10));b=g>=a}else if(navigator.userAgent&&navigator.userAgent.indexOf("MSIE")>=
0&&navigator.appVersion.indexOf("Win")!==-1)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a);h.AllowScriptAccess="always";b=h.GetVariable("$version").match(/([0-9]+)/)[1]>=a}catch(d){}return b}};m.store();j.on_document_ready(function(a){a(window).load(function(){m.store()})});j.on_document_ready(function(){E(window,"unload",function(){j.unload_plugins()})});w&&j.on_document_ready(function(){j.monitoring.record_metric("ads_js_response",w)})})();(function(w){w.install(w,{extended_split:function(p,s,u){for(var x=[],j=0,J;!u||x.length<u-1;){J=p.indexOf(s,j);if(J===-1)break;x.push(p.substring(j,J));j=J+s.length}x.push(p.substring(j));return x},object_from_querystring:function(p){var s=p.split("&"),u={},x;if(p==="")return{};for(p=0;p<s.length;p++){x=w.extended_split(s[p],"=",2);u[x[0]]=x.length===1?null:decodeURIComponent(x[1])}return u},cookie:{set:function(p,s,u){var x,j;if(u){j=new Date;j.setTime(j.getTime()+u*24*60*60*1E3);u="; expires="+
j.toGMTString()}else u="";x=document.location.host.split(".");j=x.pop();x=x.pop();document.cookie=p+"="+escape(s)+u+"; path=/; domain="+x+"."+j},get:function(p){var s=document.cookie.split(";"),u,x;for(u=0;u<s.length;u++)if(typeof s[u]=="string"){x=s[u].split("=");if(x[0]&&x[1]&&x[0].replace(/\s/,"")==p)return unescape(x[1])}return null},erase:function(p){this.set(p,"",-1)}}})})(window.generic);(function(w,p,s){var u=w.generic=w.generic||{},x={},j=w.IMDbTimer,J="IMDbTimer"in w?w.IMDbTimer.starttime:NaN,z=p.location.hash.match("debug=1"),M=z||!isNaN(J)&&Math.random()<0.25,U=z||Math.random()<0.1,E=function(){var f={},l={top_ad:s,top_rhs:s,upfront_navstrip:s,bottom_ad:s},t={top_ad:1,top_rhs:1,upfront_navstrip:1,injected_navstrip:1,injected_billboard:1,bottom_ad:2},n={top_ad:1,top_rhs:1,upfront_navstrip:1,bottom_ad:1};forester_events={reflow:1,"ad-delivery":1,load:1};u.on_document_ready(function(m){m(w).bind("beforeunload",
function(){var F,D;for(F in f){D=f[F];D.request&&D.load===s&&u.monitoring.record_event("ad_load_failure."+F)}u.monitoring.send_metrics()})});return{is_slot_monitored:function(m){return m in t||m in n},is_twilight_slot:function(m){return m in t},is_twilight_core_slot:function(m){return m in t&&t[m]===1},is_forester_slot:function(m){return m in n},is_forester_event:function(m,F){return this.is_forester_slot(m)&&F in forester_events},set_metric_value:function(m,F,D){(f[m]=f[m]||{})[F]=D},get_metric_value:function(m,
F){if(m in f)return f[m][F]},get_core_slots_duration:function(m){var F=0,D;for(D in t)if(this.is_twilight_core_slot(D)){if(s===this.get_metric_value(D,m))return null;F=Math.max(F,this.get_metric_value(D,m))}return F},set_remnant_partner:function(m,F){l[m]=F;return this},get_remnant_partner:function(m){return l[m]}}}(),T="http://www.imdb.com/twilight/?",B=function(){var f=function(){return{prepare_and_send_metric:function(n,m,F,D){t({slot:m,ad_network_name:"DART",aid:n.aid,cid:n.cid,slot_event:F,time:D})}}}(),
l=function(){return{prepare_and_send_metric:function(n,m,F){var D,R=20,a;a=function(){if(D=ad_utils.get_cornerstone_ad_object(n))t({slot:n,ad_network_name:"PDA",aid:D.adId,cid:D.creativeId,slot_event:m,time:F});else--R&&setTimeout(a,100)};a()}}}(),t=function(n){var m,F,D,R,a;if(U&&E.is_forester_slot(n.slot)){m=ad_utils.get_mapped_amazon_slot_name(n.slot);F=page_type;D=n.ad_network_name;R=n.aid;a=n.cid;n='{"s":"imdb","l":"'+m+'","p":"'+F+'","n":"'+D+'","a":"'+R+'","c":"'+a+'","m":"'+n.slot_event+'","v":"'+
n.time+'"}';z&&consoleLog(n+" metrics sent","forester");u.one_way_send("http://fls-na.amazon.com/1/display-ads-cx/1/OP/?LMET"+escape(n))}};return{send_forester_metric:function(n,m,F,D){f.prepare_and_send_metric(n,m,F,D);l.prepare_and_send_metric(m,F,D)},set_page_type:function(n){page_type=n}}}();this.csm={measure:function(f,l){this.record(f,this.duration(),l)},record:function(f,l,t,n){if(M&&!csm.metrics[f]){csm.metrics[f]=l;u.monitoring.record_metric(f+(n?n:""),csm.metrics[f],t)}},duration:function(){return(new Date).getTime()-
J},metrics:{}};u.monitoring={event_starts:{},event_stops:{},events_to_stop:0,event_duration:{},event_counters:[],all_events_started_flag:false,twilight_info:"",twilight_client:function(){var f=navigator.userAgent,l;if((l=f.match(/MSIE (\d+)/))&&l[1]>=6)return"ie"+l[1];if(l=f.match(/Mac OS.*Firefox\/(\d+)/))return l[1]==="3"?"firefox3-mac":"firefox-mac";if(l=f.match(/Firefox\/(\d+)/))return l[1]==="3"?"firefox3":"firefox";if(f.indexOf("Chrome")!==-1)return"chrome";if(f.indexOf("Safari")!==-1)return"safari";
if(f.indexOf("Opera")!==-1)return"opera";return"Other"}(),isTwilightActiveSample:M,page_type:"",start_timing:function(f){this.start_timing_at(f,(new Date).getTime())},start_timing_at:function(f,l){this.event_starts[f]=l;this.events_to_stop++},stop_timing:function(f,l,t){var n=(new Date).getTime(),m=f;if(this.event_starts[f]){this.event_stops[f]=n;if(l)m+="."+l;this.record_metric(m,n-this.event_starts[f]);delete this.event_starts[f];this.events_to_stop--;if(t||this.all_events_started_flag&&this.events_to_stop===
0)this.send_metrics()}},record_event:function(f,l){var t;this.event_counters.push(f);if(f in x)for(weblab in x[f]){t=f+"__weblab_"+weblab;this.event_counters.push(t);consoleLog(t,"twilight")}consoleLog(f,"twilight");l&&this.send_metrics()},record_metric:function(f,l,t){var n,m;this.event_duration[f]=l;consoleLog(f+","+l,"twilight");if(f in x)for(n in x[f]){m=f+"__weblab_"+n;this.event_duration[m]=l;consoleLog(m+","+l,"twilight")}t&&this.send_metrics()},send_metrics:function(){var f=T+this.twilight_info,
l=1,t;for(t in this.event_duration){f+="&Operation."+l+"="+t;f+="&OperationTiming."+l+"="+this.event_duration[t];l++}this.event_duration={};if(!(l===1&&this.event_counters.length===0)){for(l=0;l<this.event_counters.length;l++)f+="&Counter."+(l+1)+"="+this.event_counters[l];this.event_counters=[];f+="&ord="+ad_utils.ord;u.one_way_send(f);consoleLog("metrics sent","twilight")}},set_twilight_info:function(f,l,t,n,m){if(j&&j.pt==="java")f+=".java";this.twilight_info="PageType="+f+"&Geo="+l+"&tw_ord="+
t+"&timestamp="+n+"&Client="+this.twilight_client;T=m},set_forester_info:function(f){B.set_page_type(f)},all_events_started:function(){this.all_events_started_flag=true},set_remnant_partner:function(f,l){E.set_remnant_partner(f.frameElement.id,l)},get_remnant_partner:function(f){return E.get_remnant_partner(f)||"none"},update_slot_metrics:function(f,l,t){var n,m;m=(n=p.getElementById(f))?n.contentWindow.document.ad:null;n="load"===l&&E.get_remnant_partner(f)?"."+E.get_remnant_partner(f):"";if(!(!f||
!E.is_slot_monitored(f)||E.get_metric_value(f,l))){E.set_metric_value(f,l,s!==t?t:csm.duration());t=E.get_metric_value(f,l);if(m&&E.is_forester_event(f,l)){B.send_forester_metric(m,f,l,t);l==="load"&&B.send_forester_metric(m,f,"ad-delivery",E.get_metric_value(f,"load")-E.get_metric_value(f,"request"))}if(E.is_twilight_slot(f)){m=f==="upfront_navstrip"?"navstrip":f;csm.record("csm_"+m+"_"+l,t,0,n);"load"===l&&""!==n&&csm.record("csm_"+m+"_deliver",t-E.get_metric_value(f,"tagdeliver"),0,n);if(E.is_twilight_core_slot(f)){n=
E.get_core_slots_duration(l);n!==null&&csm.record("csm_core_ads_"+l,n);l==="load"&&/^(\/|\/title\/tt\d+\/|\/name\/nm\d+\/)$/.test(p.location.pathname)&&csm.record("csm_"+m+G.get_network_name(f)+G.get_in_weblab()+"_timeout",t,0,G.get_level_for_load(page_type,t))}}}},get_metric_value:function(f,l){return E.get_metric_value(f,l)},enable_weblab_metrics:function(f,l,t){var n,m;for(n=0;n<t.length;n++){m=t[n];x[m]=x[m]||{};x[m][f+"_"+l]=1}}};var G=function(){return{get_network_name:function(f){return E.get_remnant_partner(f)?
"_remnant":"_direct"},get_in_weblab:function(){return"treatment"===ad_utils.weblab.get_treatment("kill ads")?"_killed":"_natural"},get_level_for_load:function(f,l){f={homepage:[1200,3600],title:[1400,4600],name:[1500,4200]}[f];var t=[1200,3600];f||(f=t);return l<f[0]?".1":l<f[1]?".2":".3"}}}();u.on_document_ready(function(f){f(w).bind("beforeunload",function(){var l=(p.location+"").split("#",2)[0];w.name="clicktoresponse:"+(new Date).getTime()+":"+l});if(u.monitoring.isTwilightActiveSample){csm.measure("csm_ready");
f(w).load(function(){csm.measure("csm_load",true)});f("div.dfp_slot").each(function(){u.monitoring.record_event("dfp_slot")});f=parseInt(f("#servertime").attr("time"),10);isNaN(f)||u.monitoring.record_metric("csm_server",f)}});(function(){if(p.location.protocol==="http:"){var f=w.name.match(/^clicktoresponse:(\d+):(.*)$/);if(f){if(p.referrer===f[2]&&j){f=j.starttime-f[1];j.clicktoresponse=f;u.monitoring.record_metric("click_to_response",f)}w.name=""}}})()})(window,document);(function(w){var p={a:{LOAD_LIMIT:4E3,CUTOFF_FACTOR:0.5},b:{LOAD_LIMIT:4E3,CUTOFF_FACTOR:0.25},c:{LOAD_LIMIT:4E3,CUTOFF_FACTOR:0}},s=w.monitoring,u=function(B){B=B.join(",");w.cookie.set("ap",B)},x=function(){var B=w.cookie.get("ap");return B?J(B.split(","),function(G){return parseInt(G,10)}):[]},j=function(){var B=s.get_metric_value("bottom_ad","load"),G=s.get_metric_value("bottom_ad","request");B=B-G;G=x();G.unshift(B);if(G.length>10)G=G.slice(0,10);u(G)},J=function(B,G){var f=[];for(i=0;i<B.length;i++)f.push(G(B[i]));
return f},z=function(B){var G,f=0;for(G=0;G<B.length;G++)f+=B[G];return f},M=x(),U,E,T;ad_utils.ad_prediction={init:function(){var B=ad_utils.weblab.get_treatment("remnant ads prediction");B=B in p?p[B]:null;if(M.length>5){U=z(M);E=Math.round(U/M.length);T=Math.round(Math.sqrt(z(J(M,function(G){return(G-E)*(G-E)}))/(M.length-1)));if(B&&E+T*B.CUTOFF_FACTOR>B.LOAD_LIMIT){s.record_event("ad_prediction_kill");custom.doubleclick.add_client_side_keyvalue("rm","n")}s.send_metrics()}ad_utils.ad_load.listen("bottom_ad",
j)}}})(window.generic);
