window.BrightTag=function(c){function n(a,c){return Object.prototype.toString.call(a)==="[object "+c+"]"}function x(a){function j(a){var b,d,a=a.split(/; ?/);h={};for(var k=0,g=a.length;k<g;k++){d=a[k];b=d.indexOf("=");var e=h,c=d.slice(0,b);b=d.slice(b+1);b=unescape(b);e[c]=b}}function i(f,b,d){if(f){d=d||{};f=[f+"="+c.Escaper.cookie(b||"")];if((b=d.expires)||0===b)l.isNumber(b)&&(b=(new Date(b)).toGMTString()),f.push("expires="+b);(b=d.path)&&f.push("path="+b);(b=d.domain)&&f.push("domain="+b);
!0===d.secure&&f.push("Secure");!0===d.httponly&&f.push("HttpOnly");d=f.join(";");if(d.length<g)a.cookie=d;else throw{name:"CookieTooLongError",message:"Cookie reached 4096 byte limit"};j(a.cookie)}}function e(a,b){i(a,"",r(b||{},{expires:1}))}var h={},g=4096;j(a.cookie||"");return{get:function(a){return h[a]},set:i,remove:e,findEach:function(a,b){for(key in h)h.hasOwnProperty(key)&&key.match(a)&&b(key,h[key])},clear:function(a){var b=r({},h);for(key in b)e(key,a)}}}function B(a,c){function i(b){b=
b.expires;return 0!==b&&b<=+new Date}function e(b,d){a.setItem(b,d)}function h(b,a,d){a={value:a,expires:d};i(a)||c.setItem(b,JSON.stringify(a))}function g(b){return a.getItem(b)}function f(b){b=c.getItem(b);try{return b?JSON.parse(b):void 0}catch(a){}}function b(b){return(b=f(b))&&(b.hasOwnProperty("value")&&b.hasOwnProperty("expires"))&&!i(b)?b.value:void 0}function d(b,a,d,f,g){for(var c,e,h=0,i=f.length;h<i;h++)if(c=f.key(h),!d[c]&&(d[c]=c.match(b)))void 0!=(e=g(c))&&a(c,e)}return{set:function(b,
a,d){b&&void 0!=a&&(d=d||{},(void 0!=d.expires?h:e)(b,a,d.expires))},get:function(a){return g(a)||b(a)},findEach:function(f,e){var h={};d(f,e,h,a,g);d(f,e,h,c,b)},remove:function(b){a.removeItem(b);c.removeItem(b)},purge:function(){for(var b,a,d=c.length;d--;)b=c.key(d),(a=f(b))&&(a.hasOwnProperty("value")&&a.hasOwnProperty("expires"))&&i(a)&&c.removeItem(b)}}}function D(a){var a=x(a),c=a.set,i=a.remove;a.set=function(a,h,g){g=r(g||{},{path:"/"});0===g.expires&&(g.expires=+new Date("1/1/2038"));c(a,
h,g)};a.remove=function(a,c){i(a,r(c||{},{path:"/"}))};a.purge=function(){};return a}if(c)return bt_log("tried to load tag.js again"),c;var c={pushIfDefined:function(a,c,i){a&&(a.constructor==Array&&null!=c)&&a.push(i||c)},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},Escaper:{cookie:function(a){return!l.isString(a)?a:a.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&/g,"%26").replace(/'/g,"%27").replace(/;/g,"%3B").replace(/</g,"%3C").replace(/>/g,"%3E")},javascript:function(a){return!l.isString(a)?
a:a.replace(/\\/g,"\\\\").replace(/'/g,"\\x27").replace(/"/g,"\\x22").replace(/\n/g,"\\n").replace(/\r/g,"\\r")}},Random:{integer:function(a){return Math.floor(Math.random()*(a||1E8))}},defaultConfig:function(a){var j=D(document),a=a||window;try{a.localStorage&&a.sessionStorage&&(j=B(sessionStorage,localStorage),j.purge())}catch(i){bt_log("Unable to access DOM storage: "+i)}return{loadOnly:!1,window:window,document:document,host:"s.thebrighttag.com",parentReferrer:top!=self&&self.window?self.window.location.href:
null,docReferrer:document.referrer,data:{},store:j,errorManager:new c.ErrorManager(j)}}},y=c.eval=function(a,c,i){try{return i&&(a+=z(i)),eval.call(window,a)}catch(e){c&&c(e)}},z=function(a){return"\n//at-sourceURL=/BrightTag/"+a.replace(/\s+/g,"_")+".js"},r=c.extend=function(a,c){for(var i in c)c.hasOwnProperty(i)&&(a[i]=c[i]);return a},l=c.Types={isString:function(a){return n(a,"String")},isArray:function(a){return n(a,"Array")},isNumber:function(a){return n(a,"Number")},isBoolean:function(a){return n(a,
"Boolean")},isFunction:function(a){return n(a,"Function")},isObject:function(a){return null===a||void 0===a?!1:n(a,"Object")}},m=c.each=function(a,c){if(a)if(l.isArray(a)||a.length)for(var i=0,e=a.length;i<e;i++)c(a[i],i);else if(l.isObject(a))for(i in a)a.hasOwnProperty(i)&&c(i,a[i])};c.Blab={};c.Blab.Engine=function(a){function c(){q=!0;o=p.length;d("engine:off")}function i(){q=!1;C=0;(p[o++]||c)()}function e(){d("block:finish");i()}function h(b,c){return function(){var f=!1,g=a.createElement("script");
g.onload=g.onreadystatechange=function(){var b;if(!(b=f)){a:{switch(g.readyState){case void 0:case "loaded":case "complete":b=!0;break a}b=!1}b=!b}b||(f=!0,e())};g.onerror=function(){d("block:error",{type:"script",exception:"Problem loading "+b});f||e()};g.src=b;g.text=c;d("block:start",b);var k=a.getElementsByTagName("script")[0];k.parentNode.insertBefore(g,k)}}function g(b){return function(){try{if(d("block:start",b),l.isString(b))if(a.defaultView){var c=z("tags/"+(w.tagId||"adhoc")+"-inline-b"+
(o-1));a.defaultView.eval.call(window,b+c)}else a.parentWindow?a.parentWindow.execScript(b):d("block:error",{type:"wait",exception:"Could not evaluate wait block ["+b+"]"});else b()}catch(f){d("block:error",{type:"wait",exception:f})}finally{e()}}}function f(b){p.push(b);q&&i();return k}function b(b){p.splice(o+C++,0,b);return k}function d(b){var a=Array.prototype.slice.call(arguments,1);m(s,function(d){var c=[k].concat(a);(d[b]||v).apply(null,c)})}var k=this,v=function(){},s=[],q=!1,w={},p=[],o=
0,C=0;k.run=function(){d("engine:on");i()};k.options=function(b){r(w,b);return k};k.option=function(b){return w[b]};k.script=function(b){return f(h(b))};k.wait=function(b){return f(g(b))};k.preemptScript=function(a,d){return b(h(a,d))};k.preemptWait=function(a){return b(g(a))};k.listen=function(b){s.push(b);(b["engine:listen"]||v).apply(null,[k]);return k}};c.Blab.Group=function(a){function c(a){h.push(a);f&&!b&&e()}function i(b){b.run()}function e(){var b=h[g];b&&(g++,b.listen(d).run())}var h=[],
g=0,f=!1,b=!1,d={"engine:on":function(){b=!0},"engine:off":function(){b=!1;e()}},k=c;this.alwaysQueue=function(){k=c};this.neverQueue=function(){k=i};this.push=function(b){k(b);return b};this.run=function(){f=!0;e()};this.applyListener=function(b){for(var a=g,d=h.length;a<d;a++)h[a].listen(b)};this.toString=function(){return"Group[name="+a+"; running="+f+"]"}};c.Blab.Manager=function(a){function j(b){return g[b]||(g[b]=new h.Group(b))}function i(b){return e.addToGroup(b,e.newEngine())}var e=this,
h=c.Blab,g={undefined:new h.Group(void 0)},f=[];g[void 0].neverQueue();e.addGlobalListener=function(b){f.push(b);m(g,function(a,c){c.applyListener(b)})};e.addToGroup=function(b,a){m(f,function(b){a.listen(b)});return j(b).push(a)};e.newEngine=function(){return new h.Engine(a)};e.group=function(b){return i(b)};e.listen=function(){return i().listen.apply(null,arguments)};e.script=function(){return i().script.apply(null,arguments)};e.wait=function(){return i().wait.apply(null,arguments)};e.run=function(b){j(b).run()};
e.alwaysQueue=function(b){j(b).alwaysQueue()};e.neverQueue=function(b){j(b).neverQueue()};e.setOptions=function(){return i()}};var t,E=[],G=function(a){t.push(a)};c.Blab.SwapwriteListener=function(a){function c(a){a.src?e.preemptScript(a.src,a.innerHTML):a.innerHTML&&e.preemptWait(a.innerHTML)}function i(c){try{a.body.appendChild(c.cloneNode(!0))}catch(f){bt_log("error appending content to body: "+f)}}var e,h=a.createElement("div");this["block:start"]=function(){var c=a;E.push([t,c.write,c.writeln]);
t=[];c.write=c.writeln=G};this["block:finish"]=function(){try{if(0!=t.length){h.innerHTML="<br/>"+t.join("");for(var g=h.childNodes||[],f=1,b=g.length;f<b;f++)("SCRIPT"==g[f].tagName?c:i)(g[f])}}finally{g=a,f=E.pop(),t=f[0],g.write=f[1],g.writeln=f[2]}};this["engine:listen"]=function(a){e=a}};c.Blab.GlobalSwapwriteListener=function(a){var j=c.Blab;this["engine:listen"]=function(c){c.listen(new j.SwapwriteListener(a))}};c.EventsManager=function(){function a(){}function j(a,b,d){g(a,b,function(){(!d||
d())&&c.EventListenerOverride(a,b)})}function i(a){var b=a.readyState;if("loading"==b)return!1;if("complete"==b)return!0;if(a.addEventListener)return"interactive"==b;a:{a=a.documentElement.doScroll||function(){throw"No doScroll";};try{a("left")}catch(d){a=!1;break a}a=!0}return a}function e(a,b,d){var c=this;setTimeout(function(){a()?b.call(c):e(a,b,d)},d)}var h=this,g=h.listen=function(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent&&a.attachEvent("on"+b,d)};h.domReady=function(a,
b){i(a)?b.call(this):a.addEventListener?g(a,"DOMContentLoaded",b):e(function(){return i(a)},b,1)};h.enablePageReadyOverrides=function(f,b){h.enablePageReadyOverrides=a;"complete"==b.readyState?c.EventListenerOverride(f,"load"):j(f,"load");if(b.addEventListener){var d=b.readyState;"complete"==d||"interactive"==d?c.EventListenerOverride(b,"DOMContentLoaded"):j(b,"DOMContentLoaded")}}};c.EventListenerOverride=function(a,c){function i(a){var f=this;setTimeout(function(){try{a.call(f)}catch(b){bt_log("error overriding "+
c+" event: "+b)}},0)}var e=a.addEventListener?"addEventListener":"attachEvent",h=a[e];a[e]=function(g,f,b){if("function"==typeof f)if(g==c||g=="on"+c)i(f);else try{"addEventListener"==e?h.call(a,g,f,b):h(g,f)}catch(d){bt_log("error proxying "+g+" event: "+d)}}};c.Events=new c.EventsManager;c.EventBindingManager=function(a,j){function i(b,a){m(a,function(a,c){b[b.type+"."+a]=c});j.push(b)}function e(b){function a(b){var d=this,f=[];d.appendData=function(b){f.push(function(a){a.appendData(b)});return d};
d.appendJs=function(b){f.push(function(a){a.appendJs(b)});return d};d.postProcess=function(b){m(f,function(a){a(b)})};d.tagId=b;d.execute=c.execute;d.fire=c.fire;d.evaluate=c.evaluate}var c=this,g=[],e=[],j="true";c.execute=function(a,e){var k=r({eventName:b},e||{});if(l.isFunction(a))g.push(r(a,k));else if(l.isString(a))try{var h=z("events/"+b+"-tag-"+(k.tagId||"adhoc")),j=f.functionWithAccess(["eventObject","eventData"],a+h);g.push(r(j,k))}catch(q){i({type:"evparse",message:q.toString(),tagId:k.tagId||
-1},{eventName:b})}else bt_log("when.execute: unknown action: "+a);return c};c.evaluate=function(b){j=b;return c};c.fire=function(b){b=new a(b);e.push(b);return b};c.handler=function(b,a){var d=j;y(j,function(b){bt_log("Invalid post-event conditional fire expression: "+d+", exception = "+b)})&&(h.executeActions(g,b,a),h.fireTags(e))}}var h={},g={},f=c.jQueryLoader(a,"BrightTag.jQuery");h.Binder=function(b,a){var e=this,h=[],j={},w=(a||{}).pageId;e.data=function(b,a){h.push({name:b,dbe:a});return e};
e.bindData=function(a,e,g){m(h,function(k){var h=k.name;try{var A=j[k.dbe];if(!A){var F=k.dbe,v,l=k.dbe,s=z("event-dbes/"+h+"-page-"+(w||"adhoc")+"-event-"+b);v=f.functionWithAccess(["eventObject","eventData"],"return "+l+";"+s);A=j[F]=v}c.instance.data(h,A.call(a,e,g))}catch(m){i({type:"evdbe",message:m.toString(),pageId:w||-1},{name:h,eventName:b})}})};e.handler=function(a){var c=g[b];if(c){var f=Array.prototype.slice.call(arguments,1);e.bindData(a.target,a,f);c.handler(a,f)}}};var b=/^direct\//i;
h.bind=function(a,c,e,g){var i=new h.Binder(a,g);f.ensureJQuery(function(){var a=f.getJQuery()(c);a.live&&c.constructor===String&&!b.test(e)?a.live(e,i.handler):a.bind(e.split(b).pop(),i.handler)});return i};h.when=function(b){return g[b]||(g[b]=new e(b))};h.executeActions=function(b,a,c){m(b,function(b){try{b.call(a.target,a,c)}catch(d){i({type:"evwait",message:d.toString(),tagId:b.tagId||-1},{eventName:b.eventName})}})};h.fireTags=function(b){if(0<b.length){var a=c.instance.serverURL();m(b,function(b){a.cf(b.tagId);
b.postProcess(a)});c.Blab.script(a.asString())}};return h};c.HTTP={};c.HTTP.Cookie=x;c.HTTP.DOMStorage=B;c.HTTP.CookieStorage=D;c.HTTP.QueryString=function(a){function c(b){if(b&&l.isString(b)){var a=b.split("&"),b={};m(a,function(a){if(""!==a){var c=a.split("="),a=decodeURIComponent(c[0]),c=c[1]&&decodeURIComponent(c[1].replace(/\+/g," "));(null==b[a]?b[a]=[]:b[a]).push(c)}})}return b}function i(b,a){var c=[];m(b,function(b){if(l.isObject(b))return!1;b=null==b||""===b?a:b;(l.isString(b)||l.isNumber(b)||
l.isBoolean(b))&&c.push(b)});return c}function e(b){return!l.isArray(b)?[b]:b}function h(b,a){var c=encodeURIComponent(b),e=encodeURIComponent(a);return c+"="+e}var g=this,f={};r(f,c(a));g.param=function(b){b=f[b]||[""];return 1<b.length?b:b[0]};g.params=function(){return f};g.appendParam=function(b,a){if(b){var c=i(e(a));0<c.length&&(f[b]=(null==f[b]?f[b]=[]:f[b]).concat(c))}return this};g.replaceParam=function(b,a){if(b){var c=i(e(a));0<c.length&&(f[b]=(f[b]=[]).concat(c))}return this};g.appendParams=
function(b){m(b,g.appendParam);return this};g.alwaysAppendParam=function(b,a){if(b){var c=i(e(a),"");0<c.length&&(f[b]=(null==f[b]?f[b]=[]:f[b]).concat(c))}return this};g.alwaysReplaceParam=function(b,a){if(b){var c=i(e(a),"");0<c.length&&(f[b]=(f[b]=[]).concat(c))}return this};g.alwaysAppendParams=function(b){m(b,g.alwaysAppendParam);return this};g.appendPartialQueryString=function(b){b&&g.alwaysAppendParams(c(b));return this};g.deleteParam=function(b){delete f[b]};g.toString=function(){var b=[];
m(f,function(a,c){m(c,function(c){b.push(h(a,c))})});return b.join("&")}};c.HTTP.URL=function(a){var j=this,i,e,h,g=a.indexOf("#");-1<g&&(h=a.substring(g+1),a=a.substring(0,g));g=a.indexOf("?");-1<g&&(e=a.substring(g+1),a=a.substring(0,g));i=a;a=new c.HTTP.QueryString(e);r(j,a);j.queryString=a.toString;j.toString=function(){var a=j.queryString();return i+(a.length>0?"?"+a:"")};j.asString=j.toString;j.fragment=function(){return h}};c.ServerURL=function(a){function j(b,a){a&&a.findEach(b,function(b,
a){e.appendParam(b,a)})}function i(b,a){return function(c){bt_log("invalid "+b+" expression: "+a+", exception = "+c)}}var e=this,h=a.window,g=a.parentReferrer,f=a.referrer;c.HTTP.URL.call(this,0===a.host.length?"":(a.host.match("^[a-z0-9+.-]+://.+")?"":"//")+a.host+"/tag");e.appendParams({site:a.site,referrer:f,docReferrer:a.docReferrer,mode:a.mode});f!==g&&e.appendParam("parentReferrer",g);j(/^btps\..+/,new c.HTTP.Cookie(a.document));j(/^btpdb\..+/,a.store);e.appendData=function(b){var a=bt_data(b),
a=l.isArray(a)||l.isObject(a)?h.JSON.stringify(a):a;return e.alwaysReplaceParam("_cb_"+("bt_data('"+b+"')"),a)};e.appendJs=function(a){var c=i("client binding expression",a);return e.alwaysReplaceParam("_cb_"+a,y(a,c))};e.cf=function(a){l.isArray(a)||(a=[a]);var c=e.param("cf");c&&(a=Array(c).concat(a));e.replaceParam("cf",a.join());return e};e.addCf=function(a,c){if(!y(c,i("conditional fire",c,"tags/"+a+"-cf.js")))return!1;var f=e.param("cf");e.replaceParam("cf",f?f+","+a:a);return!0}};c.Page=function(a,
j){function i(a){m(l.isArray(a)?a:[a],function(a){l.isFunction(a)?a():q.write('<script type="text/javascript" src="'+a+'"><\/script>')})}function e(a){var b=p.group().options({tagId:-2});m(l.isArray(a)?a:[a],function(a){(l.isFunction(a)?b.wait:b.script)(a)})}function h(a){q.write(a)}function g(a,b){p.group(!t?"domready":void 0).options(b&&b.tagId?{tagId:b.tagId}:{}).wait(function(){q.write(a)})}function f(a){m(a,function(a){if(a.name){var b=r({},a);delete b.name;delete b.value;n.set(a.name,a.value,
b)}})}function b(b){o.hasErrors()&&(b.appendParam("errors",o.toJSON()),2083<b.toString().length&&(b.deleteParam("errors"),o.tooManyErrors(),b.appendParam("errors",o.toJSON())));o.reset({site:a.site,referrer:a.referrer||q.location.href})}var d=this,k=void 0,v=a.data||{},s=void 0,q=a.document||{},w=a.window||{},p=a.blab||c.Blab,o=a.errorManager,n=a.store,t=!1;d.referrer=a.referrer;d.parentReferrer=a.parentReferrer;d.docReferrer=a.docReferrer;d.site=a.site;d.host=a.host;o&&p.addGlobalListener(o);p.run("serializer");
d.load=function(){var a=Array.prototype.slice.call(arguments,0);m(a,function(a){l.isFunction(a)?p.addToGroup("serializer",p.newEngine().wait(function(){a(d)})):l.isObject(a)&&a.src?d.library(a.src,a.options):l.isString(a)&&d.library(a)})};d.library=function(a,b){p.addToGroup("serializer",p.newEngine().options(b||{}).script(a))};var u="sync"===a.mode;d.writeScript=u?i:e;d.appendContent=u?h:g;d.domReady=function(){t=!0;p.addGlobalListener(new p.GlobalSwapwriteListener(q));"sync"===a.mode&&(d.writeScript=
e,d.appendContent=g);p.run("domready")};d.parameter=function(a){void 0==k&&(k=new c.HTTP.URL(q.location.href));return k.param(a)};d.meta=function(a){s||(s={},m(q.getElementsByTagName("meta"),function(a){s[a.getAttribute("name")]=a.getAttribute("content")}));return s[a]||""};d.cookie=function(a){return(new c.HTTP.Cookie(q)).get(a)||""};d.data=function(a,b){if(void 0!==b)return v[a]=b;b=v[a];return void 0==b?"":b};d.dbe=function(a,b,c){d.data(a,y(b,function(b){o&&o.push({type:"dbe",message:b.toString(),
"dbe.name":a,pageId:(c||{}).pageId||-1})},"page-dbes/"+a+"-page-"+(c&&c.pageId||"adhoc")))};d.errors=function(a){o.configure(a)};d.store=n?f:function(){};d.serverURL=function(){return new c.ServerURL(a)};d.defaultBaseUri=function(){return("https:"==q.location.protocol?"https:":"http:")+"//s.btstatic.com/"};d.baseUri=function(){var a=/\btag(\.[^.]+|-n)?\.js(#.*)?$/;return j&&j.src&&j.src.replace(a,"")||d.defaultBaseUri()};d.primary=function(){function a(){var c=d.serverURL();o&&(o.processStoredErrors(),
b(c));return c.toString()}var c=[];w.JSON?c.push(a()):(c.push(d.baseUri()+"json2.js"),c.push(function(){d.writeScript(a())}));d.writeScript(c)};d.secondary=function(a){var c=d.serverURL(),e=c.toString();a(c);c.toString()!=e&&(o&&b(c),d.writeScript(c.toString()))}};c.ErrorManager=function(a,c){function i(b){d.push(e(b));a.set(k,h.toJSON())}function e(a){var b=l.isObject(a)?r({},a):{};b.type=b.type||"unknown";b.message=b.message||a.toString();b.timestamp=m;return b}if(!a)throw"ErrorManager requires a store";
var h={},g,f,b=!0,d=[],k="__bterr",m=+new Date,n=h.configure=function(a){a.hasOwnProperty("enabled")&&(b=a.enabled);a.hasOwnProperty("timestamp")&&(m=a.timestamp);a.hasOwnProperty("site")&&(g=a.site);a.hasOwnProperty("referrer")&&(f=a.referrer)};c&&n(c);h.reset=function(b){b&&n(b);d=[];a.remove(k)};h.hasErrors=function(){return 0<d.length};h.toArray=function(){return d};h.toJSON=function(){try{return JSON.stringify({site:g,referrer:f,errors:d})}catch(a){bt_log("problem serializing errors: "+a.message)}};
h.push=function(a){bt_log("error: "+JSON.stringify(a));if(b&&a&&!(-1>a.tagId||-1>a.pageId))try{i(a)}catch(c){if("CookieTooLongError"!=c.name)throw c;h.tooManyErrors()}};h.tooManyErrors=function(){h.reset();i({type:"runtime",message:"Too many errors"})};h["block:error"]=function(a,b){if(b){var c=b.type,d=b.exception||b,e=a.option("tagId")||-1;h.push({type:c,message:d.toString(),tagId:e})}};h.processStoredErrors=function(){var b=a.get(k);if(b)try{var c=JSON.parse(b);g=c.site;f=c.referrer;l.isArray(c.errors)&&
(d=d.concat(c.errors))}catch(e){bt_log("problem reading stored errors: "+e.message)}};return h};c.CookieSyncEngine=function(a){var j={fn:function(a){a()},next:null},i=j,e=a.document,h=function(a){if("function"!=typeof a)return!1;a={fn:a,next:null};i=i.next=a;return!0},g=function(){if(j){var a=j.fn;j=j.next;a(g)}},f=g;c.Events.listen(a,"load",f);return{sync:f,push:function(a){return h(a)},pushImage:function(b){return h(function(c){var e=new a.Image;e.onerror=e.onload=c;e.src=b})},pushIframe:function(a){return h(function(c){var f=
e.createElement("iframe");f.onerror=f.onload=c;f.width=0;f.height=0;f.style.border=0;f.src=a;e.body.appendChild(f)})}}};c.jQueryLoader=function(a,j){return new function(a,e){function h(a){j.wait(a)}function g(a){function e(){b=c.jQuery;h(a)}d="var $ = BrightTag.$; ";c.jQuery?e():j.script(c.instance.baseUri()+"BrightTag.jquery-1.5.1.js").wait(e)}var f={},b,d="",j=c.Blab.group(e);f.getJQuery=function(){return b};f.functionWithAccess=function(a,b){return new Function(a,d+b)};f.ensureJQuery=function(d){f.ensureJQuery=
h;b=a.jQuery;(b?h:g)(d);c.Blab.run(e)};return f}(a,j)};c.Main=function(a){var j=c.Events,i;a:{i=/\/tag(\.[^.]+|-n)?\.js(#.*)?$/;for(var e=a.document.getElementsByTagName("script"),h=e.length-1;-1<h;h--){var g=e[h];if(i.test(g.src)){i=g;break a}}i=void 0}if(i){if(e=(new c.HTTP.URL(i.src)).fragment())e=(new c.HTTP.QueryString(e)).params(),m(e,function(b,c){a[b]=c[0]});e=function(a){bt_log("configuration error: "+a)};h=c.trim(i.innerHTML);0!==h.length&&r(a,y("(\n"+h+"\n)",e,"site-config"))}if(void 0!=
a.site){j.enablePageReadyOverrides(a.window,a.document);try{var f=new c.Page(a,i);j.domReady(a.document,function(){f.domReady()});a.loadOnly||f.primary();return f}catch(b){bt_log("execution error: "+b)}}};var u=c.defaultConfig();r(c.Blab,new c.Blab.Manager(u.document));c.$LAB=c.Blab;c.EventBinding=c.EventBindingManager(u.window,u.errorManager);c.CookieSync=c.CookieSyncEngine(u.window);c.instance=c.Main(u);void 0==c.instance&&setTimeout(function(){void 0==c.instance&&(c.instance=c.Main(u))},0);return c}(window.BrightTag);
function bt_parameter(c){return BrightTag.instance.parameter(c)}function bt_meta(c){return BrightTag.instance.meta(c)}function bt_cookie(c){return BrightTag.instance.cookie(c)}function bt_data(c,n){return BrightTag.instance.data(c,n)}window.bt_data_escaped=bt_data;function bt_log(c){window.console&&console.log&&console.log("BrightTag: "+c)}var bt_handle_exception=bt_log,_bt_url_prefix,_bt_referrer,_bt_site,_bt_mode;
function btServe(c){if(void 0==BrightTag.instance){var n=BrightTag,x=n.extend({referrer:_bt_referrer,site:_bt_site,mode:_bt_mode},n.defaultConfig());void 0!=_bt_url_prefix&&(x.host=_bt_url_prefix);n.instance=n.Main(n.extend(x,c||{}))}};
