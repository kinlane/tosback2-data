function FormatPrice(n){return Crate.Utilities.Format.toDollars(n/100)}function GetCurrentPrice(n){if(n>0)return Crate.Utilities.Format.toDollars(n/100)}function ShowSale(n){if(n>0)return!0}function DoRender(n){return n>2?Crate.ProductCompare.config.DoRender=!0:Crate.ProductCompare.config.DoRender}function Remove(n){$(".prodComparePanel[data-sku="+n+"]").addClass("empty"),$(".prodComparePanel[data-sku="+n+"] .darea").html(""),$(".prodComparePanel[data-sku="+n+"] .prodCompareHelpMsg").show(),$(".prodCarouselLI[data-sku="+n+"]").replaceWith(""),Crate.ProductCompare.RemoveProduct(n),HideCarousel(),AutoHeight()}function AutoHeight(n){$(".prodComparePanel").each(function(){$(this).css("height","")}),$(".prodComparePanel .prodCompareDimensions").each(function(){$(this).css("height","")}),$(".prodComparePanel .prodCompareDetails").each(function(){$(this).css("height","")}),$(".prodComparePanel .prodCompareNamePriceWrap").each(function(){$(this).css("height","")}),maxHeight=-1,$(".prodComparePanel .prodCompareDimensions").each(function(){maxHeight=maxHeight>$(this).height()?maxHeight:$(this).height()}),$(".prodComparePanel .prodCompareDimensions").each(function(){$(this).height(maxHeight)}),maxHeight=-1,$(".prodComparePanel .prodCompareNamePriceWrap").each(function(){maxHeight=maxHeight>$(this).height()?maxHeight:$(this).height()}),$(".prodComparePanel .prodCompareNamePriceWrap").each(function(){$(this).height(maxHeight)}),maxHeight=-1,$(".prodComparePanel .prodCompareDetails").each(function(){maxHeight=maxHeight>$(this).height()?maxHeight:$(this).height()}),$(".prodComparePanel .prodCompareDetails").each(function(){$(this).height(maxHeight)}),maxHeight=-1,n||($(".darea").each(function(){$(this).parent().hasClass("empty")||(maxHeight=maxHeight>$(this).height()?maxHeight:$(this).height())}),$(".prodComparePanel").each(function(){$(".empty").size()==3?$(this).height(315):$(this).height(maxHeight)}))}function International(){return Crate.Utilities.Cookies.getCookie("Internationalization")!=null&&Crate.Utilities.Cookies.getCookie("Internationalization")!="US|USD"}function HideCarousel(){var t=[],n;$(".prodComparePanel").find(".prodCarouselLI").each(function(){t.push($(this).data("sku"))}),t.length>0&&($.browser.msie&&parseInt($.browser.version,10)===7||(localStorage[Crate.ProductCompare.config.SessionVariableNameLastViewed]=t)),n=0,$("#bank .prodCarouselLI").each(function(){$(this).hasClass("ui-draggable-dragging")||(n=n+1)}),Crate.ProductCompare.config.CarouselSize=n,n==0&&($("#bank").addClass("hidden"),$(".prodCompareHelpMsgCarousel").addClass("hidden"),$(".prodCompareHelpMsg").addClass("hidden")),n==8?($(".prodCompareCarouselWrap .jcarousel-next").html('<span class="outer"><\/span><span class="inner"><\/span>'),$(".prodCompareCarouselWrap .jcarousel-prev").html('<span class="outer"><\/span><span class="inner"><\/span>')):n-1<=7?($(".jcarousel-next").html(""),$(".jcarousel-prev").html("")):($(".prodCompareCarouselWrap .jcarousel-next").html('<span class="outer"><\/span><span class="inner"><\/span>'),$(".prodCompareCarouselWrap .jcarousel-prev").html('<span class="outer"><\/span><span class="inner"><\/span>'))}function ResetPrevious(){var i,r,n,t;if((!$.browser.msie||parseInt($.browser.version,10)!==7)&&Crate.Utilities.SessionStorage.isAvailable()&&window.localStorage.compareListLastViewed){for(i=window.localStorage.compareListLastViewed.split(","),r=[],n=0;n<Crate.ProductCompare.ItemList.length;n++)for(t=0;t<i.length;t++)if(Crate.ProductCompare.ItemList[n]&&Crate.ProductCompare.ItemList[n].Sku==i[t]){r.push(Crate.ProductCompare.ItemList[n]),Crate.ProductCompare.ItemList.splice(n,1);break}Crate.ProductCompare.ItemList=$.merge(r,Crate.ProductCompare.ItemList)}}function IE7IndexOfCampatability(){Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var i=this.length>>>0,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1})}function s7UEdetails(){return"Version: "+s7ue.device.version+"Device Name : "+s7ue.device.name}function s7jsonResponse(n,t){s7ue.Callback.response[t](n)}function s7jsonError(n,t){s7ue.Callback.error[t]&&s7ue.Callback.error[t](n)}var Crate=Crate||{},console,s7ue;Crate.AtoZ={config:{initialPageLoad:!0,updateFieldsComplete:!1},init:function(){$.history.init(Crate.AtoZ.pageload),Crate.AtoZ.config.initialPageLoad=!1,$("#themeList").click(function(n){var t,i;n.preventDefault(),t=$(n.target).closest("a"),t.length>0&&t.attr("href")&&(i=$.jqURL.get("letter",{win:{location:{href:t.attr("href")}}}),Crate.AtoZ.updateFields(t,!0),$.history.load(i))})},updateFields:function(n,t){var i=$(".jsAzWrap > img"),r=n.attr("rel").split("|"),e,u,f;r.length==2&&(e=r[0],u=r[1],i.attr("src")!=u&&(f=$(".jsAzShopThisItemWrap > a"),f.attr("href",e),f[0].href=="javascript:;"?$(".jsAzShopThisItemWrap").addClass("hidden"):$(".jsAzShopThisItemWrap").removeClass("hidden"),$(".jsAlphaBarNav > a").removeClass("selected"),n.addClass("selected"),i.load(function(){i.fadeIn(200)}),t&&i.fadeOut(200),i.attr("src",u),i.attr("alt",n.attr("alt")),Crate.AtoZ.config.updateFieldsComplete=!0))},pageload:function(n){if(n&&!Crate.AtoZ.config.updateFieldsComplete||!n&&!Crate.AtoZ.config.initialPageLoad&&!Crate.AtoZ.config.updateFieldsComplete){var t=$.jqURL.get("letter");!n&&t&&(n=t),n?$(".jsAlphaBarNav > a").each(function(){$(this).removeClass("a:active"),$(this).text().toLowerCase()==n.toLowerCase()&&Crate.AtoZ.updateFields($(this),!1)}):Crate.AtoZ.updateFields($(".jsAlphaBarNav > a").first(),!1)}Crate.AtoZ.config.updateFieldsComplete=!1}},Crate=Crate||{},Crate.Carousel={init:function(n,t,i,r,u,f,e,o,s,h,c){var l,v,a;return n=n||3,t=t||n,i=i||1,u=u||null,f=f||null,e=e||0,o=o||1e3,s=s||null,h=h||null,c=c||null,l=$(r||"#carousel"),v=l.children().length,v>n?(a=l.jcarousel({size:v,visible:n,scroll:t,start:i,wrap:u,initCallback:f,auto:e,animation:o,itemLastInCallback:s,itemLoadCallback:h,animationStepCallback:c}).data("jcarousel"),l.swipe({left:function(){a.funcNext()},right:function(){a.funcPrev()}}),a):null},replaceCarouselArrows:function(){$(".jcarousel-next").html('<span class="outer"><\/span><span class="inner"><\/span>'),$(".jcarousel-prev").html('<span class="outer"><\/span><span class="inner"><\/span>')}},Crate=Crate||{},Crate.CoBranding={tagOmniture:function(n){omntag&&(omntag.linkTrackVars="events",omntag.linkTrackEvents=n,omntag.events=n,omntag.tl(window,"o","Name_of_Link"))}},Crate=Crate||{},Crate.CrossSellProduct={init:function(){$("#content .jsCrossSellItems .jsCrossSellItem").hover(function(){$(this).siblings(".jsCrossSellInfo").removeClass("hidden")},function(){$(this).siblings(".jsCrossSellInfo").addClass("hidden")}),$("#content .jsViewMoreLink").click(function(){$(this).addClass("hidden"),$(this).siblings(".jsCrossSellItems").removeClass("hidden")})}},Crate=Crate||{},Crate.Family={config:{scrollToSection:""},init:function(){$("body").bind("SetSwatch",Crate.Utilities.Delegate.create(this,this.setSwatch)),$("#productItems select.jsRollup").change(Crate.Family.setVisibleItem);var n=Crate.Family.config.scrollToSection;n=="#reviews"&&Crate.Family.s(),$("#fbLike").append($("<iframe />").attr({src:"http://www.facebook.com/plugins/like.php?href=www.crateandbarrel.com"+encodeURIComponent(document.location.pathname)+"&layout=button_count&show_faces=false&width=150&action=like&font=arial&colorscheme=light&height=21",scrolling:"no",frameborder:"0",style:"overflow:hidden; width:85px; height:21px;",frameBorder:"0",allowTransparency:"true"}))},moreOpen:function(n){$(n.currentTarget).siblings().fadeIn("slow")},moreClose:function(n){$(n.currentTarget).parent().fadeOut("slow")},setSwatch:function(n,t){var f=Number(t.sku),u=t.relatedSku,e=t.swatchId,o=t.productURL,s=t.price,h=t.swatchDescFabric,c=t.swatchDescColor,l=t.availabilityMessage,i=null,r;t.lineItem?(i=$(".jsBaseSku[value='"+f+"']").closest(".jsLineLevelBlock"),i.find(".jsSwatchImage").attr("src",o),i.find(".jsSwatchedTitle a").html(t.longDesc)):i=$(".jsPIPItem"),i.find(".jsSku").val(u),i.find(".jsSwatch").val(e),i.find(".jsSwatchSku").html(u),i.find(".jsSwatchPrice").html(s),i.find(".jsSwatchTitle").html(t.longDesc),i.find(".jsSwatchDescFabric").html(h+":"),i.find(".jsSwatchDescColor").html(c),Crate.ZipCheck.updateAvailability(i,l),i.find(".jsSwatchPreviewImage").attr("src",t.swatchURL),i.find(".validation").removeClass("errorMessage").html(""),r=i.find(".jsShopBtns"),t.isAvailable?r.removeClass("hidden"):r.addClass("hidden")},scrollToReviews:function(){Crate.Product.config.newProductPage==!1?Crate.UI.Scroll.scrollTo($("#jsAsideWrap")):Crate.UI.Scroll.scrollTo($(".jsAsideWrap")),window.location.href="#reviews";var n=$(".jsTabs");n.find("li").removeClass("tabSelected"),n.find(".jsReviews").addClass("tabSelected"),n.siblings("div").addClass("hidden"),n.siblings(".jsReviewContent").removeClass("hidden")},setVisibleItem:function(){var n=$(":selected",this).val();$("#productItems .listView").each(function(t,i){var r=$(i),e=n==$(".jsSku",r).val(),u=!1,f=$("select.jsRollup",r);$("option",f).each(function(t,i){u||$(i).val()!=n||(u=!0)}),u&&(e?r.removeClass("hidden"):r.addClass("hidden"),$('option[value="'+n+'"]',f).attr("selected","selected"))})}},Crate=Crate||{},Crate.FurnitureDesign={initPopup:function(){$(".jsBtnZipCodeChange").click(function(){Crate.FurnitureDesign.zipCodeChange()}),$("#txtNearestZIP").keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t==13&&Crate.FurnitureDesign.zipCodeChange()}),$(function(){$("input.jsDatePicker").datepicker({minDate:0,maxDate:"+1y"})}),$(function(){$(".jsTimePicker").buttonset()}),$(function(){$("input:submit").button(),$("#showDetails").button()})},zipCodeChange:function(n){var i=new Crate.Val.Form(Crate.Val.Form.CollectiveError,Crate.Val.Form.CollectiveSuccess),t;(i.register({obj:$("#txtNearestZIP").val(),errorMsg:Crate.Messages.InvalidZip,onValidate:Crate.Val.$.IsValidZipCode,domObj:$("#txtNearestZIP")}),i.validate())&&(t=new Crate.AJAX.Request("ClosestStoresProcedure|ClosestStoresRequest"),t.Zipcode=$("#txtNearestZIP").val(),t.submit(n,function(n){$(".jsFormContent #divEnterZip").addClass("hidden"),$(".jsFormContent #divResetZip").removeClass("hidden"),$(".jsFormContent #divResetZip #spanStoreZip").html($("#txtNearestZIP").val()),$("#divStoresCarousel").removeClass("hidden"),Crate.FurnitureDesign.StoresList=n.Stores,$("#ulStoreCarousel li").remove(),$("#ulStoreCarousel").remove(),$("#divStoresCarousel div").remove(),$("#divStoresCarousel").append('<ul id="ulStoreCarousel"><\/ul>');for(var i=0;i<n.Stores.length;i++)$("#ulStoreCarousel").append(Crate.FurnitureDesign.CarouselItemHtml(n.Stores[i]));Crate.Carousel.init(3,3,1,"#ulStoreCarousel"),Crate.Utilities.Cookies.setCookie("zip",t.Zipcode)}))},CarouselItemHtml:function(n){return arrHtml=[],arrHtml.push("<li>"),arrHtml.push("<input type='radio' name='optStoreNumber' value='"+n.StoreNumber+"'/>"),arrHtml.push("<span class='StoreName'>"),arrHtml.push(n.Name),arrHtml.push("<\/span>"),arrHtml.push("<span class='StoreCityState'>"),arrHtml.push(n.City+", "+n.State),arrHtml.push("<\/span>"),arrHtml.push("<span class='StorePhone'>"),arrHtml.push("("+n.PhoneAreacode+") "+n.PhonePrefix+"-"+n.PhoneSuffix),arrHtml.push("<\/span>"),arrHtml.push("<span class='StoreEmail' style='display: none;'>"),arrHtml.push(n.RSVPEmail),arrHtml.push("<\/span>"),arrHtml.push("<a class='lnkMapHours' href=/Stores/Store.aspx?storeNumber="+n.StoreNumber+">Map and Hours<\/a>"),arrHtml.push("<\/li>"),arrHtml.join("")},zipCodeReset:function(){$(".jsFormContent #divEnterZip").removeClass("hidden"),$(".jsFormContent #divResetZip").addClass("hidden"),$("#divStoresCarousel").addClass("hidden")},moreStores:function(){},submit:function(n,t){var r,i,u;if(Crate.Omniture.tagCrossSell(n,"eVar66","prop21","lead-gen-send","lead-gen-send"),r=new Crate.Val.Form(Crate.Val.Form.CollectiveError,Crate.Val.Form.CollectiveSuccess),r.register({obj:$(".jsFormContent input:radio[name=optStoreNumber]:checked").val(),errorMsg:"Select store",onValidate:Crate.Val.$.IsPositiveNumeric,domObj:$("#ulStoreCarousel")}),r.register({obj:$("#txtCustomerName").val(),errorMsg:Crate.Messages.InvalidName,onValidate:Crate.Val.$.IsText,domObj:$("#txtCustomerName")}),r.register({obj:$("#txtCustomerEmail").val(),errorMsg:Crate.Messages.InvalidEmail,onValidate:Crate.Val.$.IsValidEmailAddress,domObj:$("#txtCustomerEmail")}),r.register({obj:$("#txtCustomerPhone").val(),errorMsg:Crate.Messages.InvalidPhone,onValidate:Crate.Val.$.IsValidPhoneEx,domObj:$("#txtCustomerPhone")}),r.register({obj:$("#txtRequestedDate").val(),errorMsg:Crate.Messages.InvalidDate,onValidate:Crate.Val.$.IsValidAppointmentDate,domObj:$("#txtRequestedDate")}),!r.validate()){Crate.Omniture.tagClear(n,"eVar66","prop21");return}i=new Crate.AJAX.Request("FurnitureDesignProcedure|FurnitureDesignRequest"),i.Zipcode=$("#txtNearestZIP").val(),i.StoreNumber=$(".jsFormContent input:radio[name=optStoreNumber]:checked").val(),i.CustomerName=$("#txtCustomerName").val(),i.PhoneNumber=Crate.Val.$.CleanPhone($("#txtCustomerPhone").val()),i.EmailAddress=$("#txtCustomerEmail").val(),i.RequestedDate=$("#txtRequestedDate").val(),i.RequestedTimeslot=$("#ddlRequestedTime").val(),i.CustomerInterests=$("#txtCustomerInterests").val(),i.Item=$("#txtItem").val(),i.Url=$("#hidUrl").val(),i.Description=$("#hidDescription").val(),Crate.Omniture.tagEvars([{Name:"eVar66",Value:"lead-gen-appt:lead-gen-send"},{Name:"prop21",Value:"lead-gen-appt:lead-gen-send"}]),u=function(){i.submit(t,function(i,r){Crate.Val.$.replaceFormContent(t,r.SuccessMessage),Crate.Omniture.tagClear(n,"eVar66","prop21"),Crate.Omniture.recordPageOpen(n,"lead-gen-confirm")})},u()},regenerateMailTo:function(){var l=$("#txtNearestZIP").val(),i=$(".jsFormContent input:radio[name=optStoreNumber]:checked"),r=i.val(),a=i.siblings(".StoreName").text(),u=i.siblings(".StoreEmail").text(),v=i.siblings(".StoreCityState").text(),y=$("#txtCustomerName").val(),p=$("#txtCustomerPhone").val(),w=$("#txtCustomerEmail").val(),b=$("#txtRequestedDate").val(),k=$("#ddlRequestedTime").val(),d=$("#txtCustomerInterests").val(),g=$("#txtItem").val(),f=$("#hidUrl").val(),e=$("#hidDescription").val(),n="",o="StoreEventRSVP@crateandbarrel.com",s=o,t=" \r \n \r\n",h,c;r&&(n+="Requested Store:"+a+" ("+r+") in "+v+t,s=u?o:u),n+="  Customer Name: "+y+t,n+="  Phone Number: "+p+t,n+="  Email Address: "+w+t,n+="  Requested Date: "+b+t,n+="  Requested Time: "+k+t,n+="  Customer Interests: "+d+t,n+="  Customer Zipcode: "+l+t,e.length>0&&f.length>0&&(n+="  Last Browsed: qa.crateandbarrel.com"+f+"/"+e+t),h="mailto:"+s+"?subject=Design Consultation Web Lead&body="+n,c=$(".jsDesignRequestMailTo"),c.attr("href",h)}},Crate=Crate||{},Crate.Gallery={init:function(){$("#content div.gallery").find("input.jsQty").change(function(){Crate.Gallery.computeTotals()}),Crate.UI.Browser.isIE6()&&$("#content .jsImgMapHotspot").hide(),$(".jsFamilyDescription").css("left",$(".jsH2Length").width()+12+"px")},revealDescription:function(){$(".jsFamilyDescription").toggleClass("hidden")},computeTotals:function(){var t=0,i=0,n=!1;$("#content div.gallery > div.jsItemRow").each(function(){var r=parseInt($(this).find("input.jsQty").val()||0,10),f=parseInt($(this).find("input.jsPriceItem").val()||0,10),u;n||(u=parseInt($(this).find("input.jsDefaultQty").val()||0,10),r!=u&&(n=!0)),t+=r,i+=r*f}),$("#content span.itemsCount").text(t),$("#content span.priceTotal").text(Crate.Utilities.Format.toDollars(i)),n&&!$(".jsRestoreWrap").hasClass("visibilityVisible")&&$(".jsRestoreWrap").removeClass("hide"),n||$(".jsRestoreWrap").addClass("hide")},restore:function(){$("#content div.jsItemRow:hidden").fadeIn("slow"),$("#content div.gallery > div.jsItemRow").each(function(){var n=parseInt($(this).find("input.jsDefaultQty").val()||0,10);$(this).find("input.jsQty").val(n),$(this).find(".jsQtyAdded").addClass("hidden"),$(this).find(".jsAddedToCartText").addClass("hidden"),$(this).find(".jsQty").removeClass("hidden"),$(this).find(".jsAddToCart").removeClass("hidden"),$(this).find(".jsRegistryItem").removeClass("hidden"),$(this).find(".jsRegistryItem").removeClass("jsRegistryAdded")}),Crate.Gallery.computeTotals()},remove:function(n){var t=$(n.currentTarget).closest(".jsItemRow");t.find("input.jsQty").val(""),t.fadeOut("slow"),Crate.Gallery.computeTotals()},prepareQuantitiesAndSubmit:function(n,t){$("#content input.qty").each(function(){parseInt($(this).val(),10)===0&&$(this).val("")}),Crate.Shopping.AddItems(n,t),$("#content input.qty").val(""),Crate.Gallery.computeTotals()}},Crate.GiftTables=function(){return{init:function(){var t=$("#giftTablesContainer"),n=$("#giftTables"),i=$("#scrollBar").slider({slide:function(i,r){n.width()>t.width()?n.css("left",Math.round(r.value/100*(t.width()-n.width()))+"px"):n.css("left",0)}})},giftTableMainCarousel_initCallback:function(n){Modernizr.touch?(n.clip.bind("mouseover",function(){n.stopAuto(),$("#giftTables").stop(!0),clearInterval(window.CrateGiftTablesTimer)}),$("#scrollBar").bind("touchmove",function(){n.stopAuto(),$("#giftTables").stop(!0),clearInterval(window.CrateGiftTablesTimer)})):(n.clip.hover(function(){n.stopAuto(),$("#giftTables").stop(!0),clearInterval(window.CrateGiftTablesTimer)}),$("#scrollBar").bind("mousedown",function(){n.stopAuto(),$("#giftTables").stop(!0),clearInterval(window.CrateGiftTablesTimer)}))},giftTableMainCarousel_animationStepCallback:function(){CrateGiftTablesTimer=setInterval(function(){var t=$("#giftTablesContainer"),n=$("#giftTables"),i=t.width()-n.width(),r=parseInt(n.css("left")),u=Math.round(r/i*100);$("#scrollBar").slider("value",u)},1)}}}(),Crate.HomePage=function(){function o(){var f=Math.max(i.width(),1e3),e=Math.max(i.height()*.7,570),r="scrollHorz";$("#themes").children().length>1?(Modernizr.touch!==!0&&(r="fade"),t.cycle("destroy").cycle({fx:r,easing:"swing",delay:1e3,timeout:5700,speed:1500,prev:"#prev",next:"#next",fit:1,width:f,startingSlide:u,before:v,pager:"#pager",pagerAnchorBuilder:function(){return'<li class="pagerListItem"><a class="pagerLink" href="#"><span class="outer"><span class="inner"><\/span><\/span><\/a><\/li>'}})):($("#themes").children("li").css({opacity:1,display:"block"}),$("#themeTitles").children("li").show()),$("#themeContainer").length>0&&(n.topOffSet=$("#themeContainer").offset().top),s(),i.bind("resize",s)}function s(){var e,t,r,u,f;n.winWidth=i.width(),n.winHeight=i.height(),n.slideHeight=n.winHeight*.8-n.topOffSet,n.slideWidth=n.winWidth>n.minSlideWidth?n.winWidth:n.minSlideWidth,e=n.slideHeight/n.slideWidth,t=n.slideWidth*n.imgRatio,n.slideHeight<n.minSlideHeight?n.slideHeight=n.minSlideHeight:n.slideHeight>t&&(n.slideHeight=t),$("#themes").height(n.slideHeight),$("#themeContainer").height(n.slideHeight),r=0,n.winWidth>n.winHeight&&n.winWidth>n.minSlideWidth?(r=Math.abs((t-n.slideHeight)/2)*-1,$("#themes img").css({marginTop:r,marginLeft:0,width:n.slideWidth,height:"auto"})):(u=n.slideHeight/n.imgRatio,f=(u-n.slideWidth)/-2,$("#themes img").css({width:u,marginTop:0,marginLeft:f,height:n.slideHeight}))}function v(n,t,i){r==!1&&(u=i.nextSlide,f.cycle("resume").cycle(u).cycle("pause"))}function y(){$("#mainContainer").animate({top:"146px"},1e3),$("#promoContainer").animate({height:"30px",marginTop:"0px"},1e3)}var r,i,t,f,h,c,u,e,l,a={init:function(){r=!0,t=$("#themes"),f=$("#themeTitles"),h=$("#divHomeThemes"),c=$(".slideImg"),e=$(".arrowWrap"),l=$("div.arrows",e),u=0,i=$(window),f.cycle({fx:"fade"}).cycle("pause"),o(!0),$("body").swipe({left:function(){t.cycle("next")},right:function(){t.cycle("prev")}}),t.swipe({left:function(){t.cycle("next")},right:function(){t.cycle("prev")}}),$(window).bind("resize",function(){r=!0,o(!1),r=!1}),y(),r=!1}},n={minSlideWidth:1e3,imgRatio:1100/1920,minSlideHeight:11e5/1920,topOffSet:undefined};return a}(),Crate=Crate||{},Crate.Product={config:{scrollToSection:"",newProductPage:!1},init:function(){$("body").bind("SetSwatch",Crate.Product.setSwatch);var n=Crate.Product.config.scrollToSection;n=="#reviews"&&Crate.Product.scrollToReviews(),$("#fbLike").append($("<iframe />").attr({src:document.location.protocol+"//www.facebook.com/plugins/like.php?href=www.crateandbarrel.com"+encodeURIComponent(document.location.pathname)+"&layout=button_count&show_faces=false&width=150&action=like&font=arial&colorscheme=light&height=21",scrolling:"no",frameborder:"0",style:"overflow:hidden; width:85px; height:21px;",frameBorder:"0",allowTransparency:"true"}))},setSwatch:function(n,t){var o=Number(t.sku),r=t.relatedSku,u=t.swatchId,e=t.productURL,s=t.price,a=t.title,h=t.swatchDescFabric,c=t.swatchDescColor,l=t.availabilityMessage,i=null,f;t.lineItem?(i=$(".jsBaseSku[value='"+o+"']").closest(".jsLineLevelBlock"),i.find(".jsSwatchImage").attr("src",e),i.find(".jsSwatchedTitle a").html(t.longDesc)):(i=$(".jsPIPItem"),$(".jsCurrSwatchLabel").addClass("hidden"),$(".jsSWID"+u).find(".jsCurrSwatchLabel").removeClass("hidden"),$("#jsUI").children().length>0?$(".jsQuickLookImage").attr("src",e):(Crate.SocialShare.setIdAndSwatch(r,u),Crate.Zoom.replaceFirstImage(t.rawImageName,{showDisclaimer:t.json.ShowDisclaimer}))),i.find(".jsSku").val(r),i.find(".jsSwatch").val(u),i.find(".jsSwatchSku").html(r),i.find(".jsSwatchPrice").html(s),i.find(".jsSwatchDescFabric").html(h+":"),i.find(".jsSwatchDescColor").html(c),Crate.ZipCheck.updateAvailability(i,l),i.find(".jsSwatchPreviewImage").attr("src",t.swatchURL),i.find(".validation").removeClass("errorMessage").html(""),f=i.find(".jsShopBtns"),t.isAvailable?f.removeClass("hidden"):f.addClass("hidden"),$("body").trigger("SetSwatchComplete")},readFullDescriptionCategory:function(){$(".jsTagCarouselCategoryDesc").addClass("hidden"),$(".jsTagCarouselCategoryDescLong").removeClass("hidden")},readLessDescriptionCategory:function(){$(".jsTagCarouselCategoryDescLong").addClass("hidden"),$(".jsTagCarouselCategoryDesc").removeClass("hidden")},scrollToReviews:function(){Crate.Product.config.newProductPage==!1?Crate.UI.Scroll.scrollTo($(".jsAsideWrap")):Crate.UI.Scroll.scrollTo($(".jsAsideWrap")),window.location.href="#reviews";var n=$(".jsTabs");n.find("li").removeClass("tabSelected"),n.find(".jsReviews").addClass("tabSelected"),n.siblings("div").addClass("hidden"),n.siblings(".jsReviewContent").removeClass("hidden")}},$(document).ready(function(){Crate.ProductCompare.InitSpill()}),Crate=Crate||{},Crate.ProductCompare={config:{DoRender:!0,SkuArrayVariableName:"compareList",SessionVariableNameLastViewed:"compareListLastViewed",CarouselSize:0},init:function(){var n=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);$.views.helpers({FormatPrice:FormatPrice,GetCurrentPrice:GetCurrentPrice,ShowSale:ShowSale,DoRender:DoRender,Remove:Remove,International:International}),$(window).scroll(function(){n||($(".prodComparePanelWrap").position().top-$(window).scrollTop()<=0?($(".prodCompareImg").addClass("fixit"),$(".prodCompareNamePriceWrap").addClass("wrapFixit")):($(".prodCompareImg").removeClass("fixit"),$(".prodCompareNamePriceWrap").removeClass("wrapFixit")))}),ResetPrevious(),Crate.ProductCompare.ItemList&&Crate.ProductCompare.ItemList.length>3&&(Crate.ProductCompare.config.DoRender=!1,Crate.ProductCompare.RenderCarousel(),$(".prodCompareCarouselWrap").removeClass("hidden")),Crate.ProductCompare.RenderTemplate(),Crate.Carousel.init(7,1,1,"#carousel"),AutoHeight(!0),$("input.jsNumeric").numeric(),$(".draggable").each(function(n,t){$(t).draggable({stop:function(){$(".droppable").droppable("option","disabled",!1)},helper:"clone",connectToSortable:"#ProductCompareData",cursor:"move",appendTo:"body",start:function(n,t){$(t.helper).addClass("hoverDrag"),$(this).addClass("dragPlaceholder")},revert:function(n){return $(this).removeClass("dragPlaceholder"),$(this).data("uiDraggable").originalPosition={top:0,left:0},!n}})}),$(".prodCompareCarouselWrap").droppable({tolerance:"touch",drop:function(n,t){var r,i;if(Crate.ProductCompare.config.CarouselSize>0&&n.handleObj.namespace=="sortable"&&$(n.target).hasClass("prodCompareCarouselWrap")){for(r="",Crate.ProductCompare.config.DoRender=!0,i=0;i<Crate.ProductCompare.ItemList.length;i++)if(Crate.ProductCompare.ItemList[i].Sku==$(t.draggable).find(".prodCarouselLI").data("sku")){r=$("#ProductCompareCarouselTemplate").render(Crate.ProductCompare.ItemList[i]);break}$("#carousel").append(r),$(this).find(".draggable").each(function(n,t){$(t).draggable({stop:function(){$(".droppable").droppable("option","disabled",!1)},helper:"clone",connectToSortable:"#ProductCompareData",cursor:"move",appendTo:"body",start:function(n,t){$(t.helper).addClass("hoverDrag"),$(this).addClass("dragPlaceholder")},revert:function(n){return $(this).removeClass("dragPlaceholder"),$(this).data("uiDraggable").originalPosition={top:0,left:0},!n}})}),$(t.draggable).find(".prodCompareHelpMsg").show(),$(t.draggable).addClass("empty"),$(t.draggable).children(".darea").html(""),$(t.draggable).find(".prodCarouselLI").replaceWith(""),Crate.Carousel.init(7,1,1,"#carousel"),HideCarousel(!0)}}}),$("#ProductCompareData").sortable({sort:function(){},handle:n?".prodComparePanelDragIcon":"",receive:function(n,t){t.item.remove()},update:function(){HideCarousel(!1)}}),$(".droppable").droppable({cursor:"move",helper:"clone",scroll:!1,appendTo:"#ProductCompareData",start:function(){},connectWith:"#ProductCompareData",stop:function(){},over:function(n){$(".prodComparePanelWrap div").removeClass("prodCompareBorder"),$(this).attr("id")=="jsdropCompareArea"&&$(n.target).addClass("prodCompareBorder")},drop:function(n,t){var r,i;if(Crate.ProductCompare.config.CarouselSize>0&&(r="",n.handleObj.namespace=="draggable"&&$(n.target).attr("id")=="jsdropCompareArea")){for($(this).find(".prodCompareHelpMsg").hide(),$(this).removeClass("empty"),$(this).find(".ui-draggable .jsItemLi").removeClass("hidden"),$("#bank #carousel").append($(".ui-draggable",this)),$(this).append(t.draggable),Crate.ProductCompare.config.DoRender=!1,i=0;i<Crate.ProductCompare.ItemList.length;i++)if(Crate.ProductCompare.ItemList[i].Sku==$(t.draggable).data("sku")){r=$("#ProductCompareTemplate").render(Crate.ProductCompare.ItemList[i]),$(this).attr("data-sku",$(t.draggable).data("sku"));break}$(this).children(".darea").html(r),$(this).find(".ui-draggable .jsItemLi").addClass("hidden"),$(".prodComparePanelWrap div").removeClass("prodCompareBorder"),AutoHeight(),HideCarousel(!0)}}})},RenderTemplate:function(){for(var t="",n=0;n<=2;n++)n<=2&&Crate.ProductCompare.ItemList[n]&&(t+=$("#ProductCompareTemplate").render(Crate.ProductCompare.ItemList[n]).replace("currentItem",Crate.ProductCompare.ItemList.length-n));HideCarousel(),$("#ProductCompareData").html(t)},RenderCarousel:function(){var n=$("#ProductCompareCarouselTemplate").render(Crate.ProductCompare.ItemList);$("#carousel").html(n)},GetSkuCompareArray:function(){var n=null;return(n=Crate.Utilities.SessionStorage.getItem(Crate.ProductCompare.config.SkuArrayVariableName),Crate.Utilities.SessionStorage.isAvailable()&&n!=null&&n!="")?n.split(","):(n=Crate.Utilities.Cookies.getCookie(Crate.ProductCompare.config.SkuArrayVariableName),n!=null&&n!="")?n.split(","):null},SetSkuCompareArray:function(n){var t=Crate.Utilities.SessionStorage.getItem(Crate.ProductCompare.config.SkuArrayVariableName);return Crate.Utilities.SessionStorage.isAvailable()?Crate.Utilities.SessionStorage.setItem(Crate.ProductCompare.config.SkuArrayVariableName,n):Crate.Utilities.Cookies.setCookie(Crate.ProductCompare.config.SkuArrayVariableName,n),null},RemoveSkuCompareArray:function(){Crate.Utilities.SessionStorage.removeItem(Crate.ProductCompare.config.SkuArrayVariableName),Crate.Utilities.Cookies.deleteCookie(Crate.ProductCompare.config.SkuArrayVariableName)},InitSpill:function(){var n=Crate.ProductCompare.GetSkuCompareArray();n!=null&&$.each(n,function(n,t){$miniSetWrap=$("#MiniSetWrapper"+t),$miniSetWrap.find(".jsCompareAdd").hide(),$miniSetWrap.find(".jsCompareView").show()})},AddProduct:function(n){var r=$(n.target).closest(".jsItemRow").find(".jsCompareSku"),i,t;r.length>0&&(i=r.val(),t=Crate.ProductCompare.GetSkuCompareArray(),($.browser.msie&&parseInt($.browser.version,10)===7||$.browser.msie&&parseInt($.browser.version,10)===8)&&IE7IndexOfCampatability(),t!=null?t.indexOf(i)<0&&t.push(i):t=i,Crate.ProductCompare.SetSkuCompareArray(t),$(n.target).hide(),$(n.target).parent().find(".jsCompareView").show())},AddToCart:function(n,t){$(".prodComparePanel[data-sku="+$(n.target).data("sku")+"]").addClass("jsItemRow"),Crate.Shopping.AddItems(n,t,!0),$(".prodComparePanel[data-sku="+$(n.target).data("sku")+"]").removeClass("jsItemRow"),AutoHeight()},RemoveProduct:function(n){var t=Crate.ProductCompare.GetSkuCompareArray(),i;if(t!=null&&(($.browser.msie&&parseInt($.browser.version,10)===7||$.browser.msie&&parseInt($.browser.version,10)===8)&&IE7IndexOfCampatability(),i=t.indexOf(n.toString()),i>=0)){if(t.length===1){Crate.ProductCompare.RemoveSkuCompareArray();return}t.splice(i,1),Crate.ProductCompare.SetSkuCompareArray(t)}},ViewComparePage:function(){var n="/Product-Compare/",t=Crate.ProductCompare.GetSkuCompareArray();t!=null&&(n=n+"?itms="+Crate.ProductCompare.GetSkuCompareArray()),window.location=n}},Crate=Crate||{},Crate.QuickLook={init:function(){Modernizr.touch||$("#content .jsQuickLook").hover(function(){$(this).children(".jsQuickLookOverlay").removeClass("hidden")},function(){$(this).children(".jsQuickLookOverlay").addClass("hidden")})}},Crate.QuickLook.ChangeItemImage=function(n){var t=$("#imgFamilyImage");t.attr("src",n)},Crate.QuickLook.SetZipCode=function(n,t){var i=t.find("input.zipCode"),u=new Crate.Val.LineItem,r;(u.register({obj:i.val(),errorMsg:LON.Messages.Zip,onValidate:Crate.Val.$.IsValidZipCode,domObj:t.closest(".itemRow")}),u.validate())&&(r=new Crate.AJAX.ItemRouteUpdate("GetItemRouteUpdate|ItemRouteUpdate"),r.Route.PostalCode=i.val(),r.FamilyID=parseInt($("#hiddenFamilyId").val()||0,10),r.submit(t,function(n){Crate.Utilities.Cookies.setCookie("zip",i.val()),Crate.Utilities.Cookies.setCookie("zipRemember",i.val(),null,null,45),$(".jsCheckoutButton").fadeIn("fast"),$("#familyItemsContainer tr.itemRow").each(function(t,i){var f,r,u;i=$(i),f=i.find(".sku").val(),r=n.Availability["SKU_"+f],r!==null&&(i.find("div.shippingLocation").slideUp("slow"),i.find("div.shippingLocation form input.zipCode").attr("value",""),i.find(".itemAddToQty").slideDown("slow"),i.find("a.anotherZIP").slideDown("slow"),u=i.find("div.availability"),u.html(r),u.slideDown("slow"),i.find("div.validation").hide(),i.removeClass("error"))})}))},Crate.QuickLook.AnotherZipCode=function(n,t){var i=t.closest(".itemRow");i.find("div.shippingLocation").slideDown("slow"),i.find(".itemAddToQty").slideUp("slow"),i.find("a.anotherZIP").slideUp("slow"),i.find("div.availability").slideUp("slow")},Crate.QuickLook.closePopup=function(){try{tb_remove_multiple()}catch(n){}},(typeof console=="undefined"||typeof console.log=="undefined")&&(console={log:function(){}}),s7ue={},typeof s7js=="undefined"&&(s7js={}),typeof s7js.flyout=="undefined"&&(s7js.flyout={});var sj_codebase="http://4.59.112.158/is-viewersDEV/dhtml/",isFlyoutLibLoaded=[!1],changelistNumber="161985",buildTimeToolVersion="4.6.2";s7ue.MASTER_PRESET_TYPES={UNIVERSAL_VIDEO:"VIDEO",UNIVERSAL_ZOOM:"ZOOM",UNIVERSAL_IMAGE_SET:"IMAGE_SET",UNIVERSAL_SWATCH_SET:"RENDER_SET",UNIVERSAL_SPIN_SET:"SPIN_SET_2D",UNIVERSAL_E_CAT:"ECATALOG"},s7ue.ZOOM_VIEWER_LINKS={ZOOM_VIEWER_LINKS_FLYOUT:"advancedFlyout",ZOOM_VIEWER_LINKS_SPIN:"genericSpinMobile",ZOOM_VIEWER_LINKS_BASIC_ZOOM:"genericZoomMobile",ZOOM_VIEWER_LINKS_E_CATALOG:"genericBrochureMobile"},s7ue.DEVICE=[[/iPhone/i,"iphone",[[/OS 3/i,"3"],[/OS 4/i,"4"]],""],[/iPod/i,"ipod",[],""],[/iPad/i,"ipad",[],""],[/Android/i,"android",[[/Android 3/i,"3"]],"2"],[/Symbian/i,"symbian",[],""],[/BlackBerry/i,"blackberry",[],""],[/Palm/i,"palm",[],""],[/Windows CE; PPC/i,"pocketpc",[],""]],s7ue.device={name:"",version:"",pixelratio:1,init:function(){for(var f="desktop",i="",r,t,u,n=0;n<s7ue.DEVICE.length;n++)if(navigator.userAgent.match(s7ue.DEVICE[n][0])){for(f=s7ue.DEVICE[n][1],i=s7ue.DEVICE[n][3],r=s7ue.DEVICE[n][2],t=0;t<r.length;t++)if(u=r[t],navigator.userAgent.match(u[0])){i=u[1];break}break}this.name=f,s7ue.browser.detectScreen(),this.version=i,this.name=="iphone"&&this.fixiphone(),typeof window.devicePixelRatio!="undefined"&&(this.pixelratio=window.devicePixelRatio)},fixiphone:function(){window.devicePixelRatio<2&&(s7ue.device.version=3)},isIOS:function(){return this.name=="iphone"||this.name=="ipod"||this.name=="ipad"},isAndroid:function(){return this.name=="android"}},s7ue.configOptions={_config:null,_viewerConfig:"",setOptions:function(n){if(n!=null){this._config=n;var t=this.getRootUrls();t.length>1&&s7ue.viewer.setRoots(t[0],t[1]),this._config.flyoutLibraryPath!=null&&(sj_codebase=this._config.flyoutLibraryPath)}},getConfig:function(){return this._config},getOptionByKey:function(n){return this.getConfig()[n]},getCompany:function(){return this.getConfig().company},getCompanyNameOnly:function(){try{return this.getConfig().company.split("/")[0]}catch(n){return this.getConfig().company}},getViewerConfig:function(){return this.getCompany()+"/"+s7ue.viewer.masterPresetType},getISR:function(){return this.getConfig().isr},getRootUrls:function(){return this.getConfig().roots},getDefaultImg:function(){return this.getConfig().defaultImg},getCSSRoot:function(){return this.getConfig().cssRoot},getStreamingRoot:function(){return this.getConfig().streamingRoot},getProgressiveRoot:function(){var n=this.getConfig().progressiveRoot;return this.normalizeFullURL(n)},getServerUrl:function(){var n=this.getConfig().serverurl;return this.normalizeFullURL(n)},normalizeFullURL:function(n){var i=n.split("//"),r=i.shift(),t;return r+="//",t=r+=i.join("/"),t.indexOf("http")>-1?t:this.getISR()+t},getContentRoot:function(){return this.getConfig().contentRoot},getAsset:function(){return this.getCompany()+this.getConfig().asset},getLocale:function(){return this.getConfig().locale},getUseDivSize:function(){return this.getConfig().useDivSize},getThumbnailSize:function(){return this.getConfig().basicThumbnailSize},getEmbedAssetCompany:function(){return"Scene7SharedAssets/"},setViewerConfig:function(n){this._viewerConfig=n}},s7ue.browser={raw:{ua:navigator.userAgent.toLowerCase(),ver:navigator.appVersion.toLowerCase()},name:"undefined",version:{major:"0",minor:"0",js:"0"},screensize:{w:0,h:0},supportflash:function(){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash"])return!0}else if(this.name=="msie"&&navigator.appVersion.toLowerCase().indexOf("win")!=-1)try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(n)return!0}catch(t){}return!1},init:function(){var n=this.raw.ua,r=this.raw.ver,u,t,f,i;this.version.minor=parseFloat(r),this.version.major=parseInt(this.version.minor),n.indexOf("opera")>-1?(this.name="opera",this.version.js=this.version.major==5||this.version.major==6?"1.3":this.version.major>=7?"1.5":"1.1"):n.indexOf("chrome")>-1?(this.name="chrome",this.version.js="1.5"):n.indexOf("safari")>-1&&n.indexOf("mac")?(this.name="safari",this.version.js="1.5"):n.indexOf("konqueror")>-1?(u=n.indexOf("konqueror"),this.name="konquerer",this.version.minor=parseFloat(n.substring(u+10,n.indexOf(";",u))),this.version.major=parseInt(this.version.minor),this.version.js="1.5"):navigator.product&&navigator.product.toLowerCase()=="gecko"?n.indexOf("mozilla/5")>-1&&n.indexOf("spoofer")==-1&&n.indexOf("compatible")==-1&&n.indexOf("webtv")==-1&&n.indexOf("hotjava")==-1&&(navigator.vendor=="Firebird"?this.name="firebird":n.indexOf("navigator")>-1?this.name="netscape":navigator.vendor=="Firefox"||n.indexOf("firefox")>-1?this.name="firefox":(navigator.vendor==""||navigator.vendor=="Mozilla"||navigator.vendor=="Debian")&&(this.name="mozilla"),this.name!="undefined"&&this.name!="netscape"?(t=navigator.vendorSub?navigator.vendorSub:0,this.name!="firefox"||t?t||(t=n.substring(n.substring("rv:")+3),mozVerEnd=t.indexOf(")"),t=parseFloat(t.substring(0,mozVerEnd))):t=parseFloat(n.substring(n.indexOf("firefox/")+8)),this.version.minor=t,this.version.major=parseInt(t),this.version.js="1.5"):this.name=="netscape"&&(f=n.indexOf("navigator"),this.version.minor=parseFloat(n.substring(f+10,f+13)),this.version.major=parseInt(this.version.minor),this.version.js="1.5")):n.indexOf("mozilla")>-1&&n.indexOf("spoofer")==-1&&n.indexOf("compatible")==-1&&n.indexOf("webtv")==-1&&n.indexOf("hotjava")==-1?(this.name="netscape",navigator.vendor&&(navigator.vendor=="Netscape6"||navigator.vendor=="Netscape")&&(this.version.minor=parseFloat(navigator.vendorSub),this.version.major=parseInt(navigator.vendorSub)),this.version.major==2?this.version.js="1.0":this.version.major==3?this.version.js="1.1":this.version.major==4?this.version.js=this.version.minor<=4.05?"1.2":"1.3":this.version.major==5?this.version.js="1.4":this.version.major>=6&&(this.version.js="1.5")):n.indexOf("msie")>-1?(this.name="ie",n.indexOf("mac")>-1?(i=n.indexOf("msie"),this.version.minor=parseFloat(n.substring(i+5,n.indexOf(";",i)))):(i=r.indexOf("msie"),this.version.minor=parseFloat(r.substring(i+5,r.indexOf(";",i)))),this.version.major=parseInt(this.version.minor),this.version.major<4?this.version.js="1.0":this.version.major==4?this.version.js="1.2":this.version.major>=5&&n.indexOf("mac")>-1?this.version.js="1.4":this.version.major>=5&&(this.version.js="1.3")):n.indexOf("aol")>-1?this.name="aol":n.indexOf("webtv")>-1?this.name="webtv":n.indexOf("hotjava")>-1&&(this.name="hotjava",this.version.major>=3&&(this.version.js="1.4")),this.detectScreen()},detectScreen:function(){var n={w:0,h:0};window.innerHeight?(n.w=window.innerWidth,n.h=window.innerHeight):document.documentElement&&document.documentElement.clientHeight?(n.w=document.documentElement.clientWidth,n.h=document.documentElement.clientHeight):document.body&&(n.w=document.body.scrollWidth+document.body.offsetWidth-document.body.clientWidth,n.h=document.body.scrollHeight+document.body.offsetHeight-document.body.clientHeight),s7ue.device.name!="desktop"&&s7ue.device.name!=""&&(n.w=screen.width,n.h=screen.height),this.screensize=n}},s7ue.browser.init(),s7ue.device.init(),s7ue.page={url:null,qStrings:{},init:function(){var i,t,n;for(this.url=window.location.href,i=this.url.indexOf("?")>0?this.url.split("?")[1]:"",t=i.split("&"),n=0;n<t.length;n++)this.qStrings[t[n].substring(0,t[n].indexOf("="))]=t[n].substring(t[n].indexOf("=")+1)},get:function(n){return this.qStrings[n]},addQS:function(n,t){this.qStrings[n]||(this.qStrings[n]=t)}},s7ue.page.init(),s7ue.Callback||(s7ue.Callback={},s7ue.Callback.response={},s7ue.Callback.error={},s7ue.Callback.createCall=function(n,t,i,r){var u=document.createElement("script");u.setAttribute("type","text/javascript"),u.setAttribute("language","javascript"),u.setAttribute("src",n+"&id="+t),document.getElementsByTagName("head")[0].appendChild(u),s7ue.Callback.response[t]=i,s7ue.Callback.error[t]=r}),s7ue.flyout={},s7ue.viewer={viewer:{path:"",type:"",size:{w:0,h:0,custom:!0}},config:"",asset:"",company:"",modifiers:"",divID:"s7ViewerContainer",viewerList:{},isroot:"/",coderoot:"s7viewers/",assetcontext:"is/image/",video:{proot:"",sroot:"",method:"",comServerUrl:"",vidServerUrl:""},videoroot:"",contentroot:"",container:null,currentPresetStyle:"",currentViewerSetup:"",setImageList:[],currentViewerConfig:"",targetdiv:null,isFlyout:!1,isSpinViewer:!1,isECatalog:!1,isImageSet:!1,masterPresetType:s7ue.MASTER_PRESET_TYPES.UNIVERSAL_IMAGE_SET,DEFAULT_OVERLAY_SIZE:55,iframe:null,flash:{cont:null},noViewer:!1,defaultImg:"",locale:"",enabledTrack:!1,init:function(){var n,t;this.container=document.body,this.modifiers="",this.video.sroot=s7ue.configOptions.getStreamingRoot(),this.video.proot=s7ue.configOptions.getProgressiveRoot(),this.video.sroot!=""&&(this.video.method="stream"),n=s7ue.configOptions,n==null&&console.log("There is no configuration for this embedded viewer - please check the configuration file in the JS includes"),this.config=n.getViewerConfig(),this.isroot=n.getISR(),this.locale=n.getLocale(),this.company=n.getCompany(),t=n.getOptionByKey("assetContext"),t!=""&&typeof t!="undefined"&&(this.assetcontext=t),s7ue.Callback.createCall(this.isroot+"is/image/"+this.config+"?req=userdata,json",this.randId(),this.responsePreset,null),this.buildMessaging()},buildMessaging:function(){var n=new Image;n.src=this.isroot+"is/image/"+this.company+"?req=message&message=s7embed,"+buildTimeToolVersion},setTargetDiv:function(n){var t,i,r;this.divID=n,t=document.getElementById(n),t==null?(t=document.createElement("div"),t.setAttribute("id",n),document.body.appendChild(t),this.targetdiv=t):(this.targetdiv=t,i=parseInt(t.offsetWidth),r=parseInt(t.offsetHeight),isNaN(i)||isNaN(r)||(this.viewer.size.w=i,this.viewer.size.h=r))},startImageViewer:function(n,t){s7ue.viewer.startViewer(s7ue.MASTER_PRESET_TYPES.UNIVERSAL_ZOOM,t,n)},startImageSetViewer:function(n,t){s7ue.viewer.startViewer(s7ue.MASTER_PRESET_TYPES.UNIVERSAL_IMAGE_SET,t,n)},startECatalogViewer:function(n,t){s7ue.viewer.startViewer(s7ue.MASTER_PRESET_TYPES.UNIVERSAL_E_CAT,t,n)},startImageSwatchViewer:function(n,t){s7ue.viewer.startViewer(s7ue.MASTER_PRESET_TYPES.UNIVERSAL_SWATCH_SET,t,n)},startVideoViewer:function(n,t){s7ue.viewer.startViewer(s7ue.MASTER_PRESET_TYPES.UNIVERSAL_VIDEO,t,n)},startSpinSetViewer:function(n,t){s7ue.viewer.startViewer(s7ue.MASTER_PRESET_TYPES.UNIVERSAL_SPIN_SET,t,n)},startViewer:function(n,t){s7ue.configOptions.setOptions(n),t!=""&&(this.asset=t),this.setStartDelay()},setEmbedType:function(n){this.embedType=n},setAssetType:function(n){this.assetType=n},setUniversalURLConfig:function(n){this.masterPresetType=n},setStartDelay:function(){setTimeout(s7ue.viewer.delayInit,200)},randId:function(){var n=new Date;return n.getTime()},parseMovieUrl:function(n){var i=null,t;return n!=null&&(i=n.replace(/[\\]/g,"/"),t=i.split("."),t.length>1&&(i=t[0]),t=i.split(":"),t.length>1&&(i=t[1]),t=i.split("/"),i=t.length>1?t[0]+"/"+t[t.length-1]:i),i},loadMbrSet:function(n){var t=null,f=0,i,r,u;if(this.viewer.bitrate=="infinite")t=this.getMaxBitRate(n);else if(n.length){for(i=0;i<n.length;i++)r=parseInt(n[i].v.bitrate),u=n[i].v.path,r<=this.viewer.bitrate*1e3&&r>f&&(/flv$/.test(u)||(t=u,f=r));t==null&&(t=this.getMinBitRate(n))}else t=n.v.path;return t},getMaxBitRate:function(n){var u=-1,i="",t,r;if(n.length)for(t=0;t<n.length;t++)r=parseInt(n[t].v.bitrate),u<r&&(u=r,i=n[t].v.path);else i=n.v.path;return i},getMinBitRate:function(n){var i=-1,r="",t,u,f;if(n.length)for(t=0;t<n.length;t++)u=parseInt(n[t].v.bitrate),f=n[t].v.path,(i==-1||i>u)&&(/flv$/.test(f)||(i=u,r=f));else r=n.v.path;return r},viewerImageSetResponse:function(n){n.set.item.length>1&&(s7ue.viewer.isImageSet=!0),n.set.item&&(s7ue.viewer.setImageList=s7ue.viewer.getListOfImages(n),s7ue.viewer.prepareViewer())},getImageForListJSON:function(n){n.set.item.length>1&&(s7ue.viewer.isImageSet=!0),n.set.item&&(s7ue.viewer.setImageList=s7ue.viewer.getListOfImages(n),s7ue.viewer.prepareViewer())},getImageForNoPreset:function(n){var t=n,i="",r={w:0,h:0};t.set&&(t.set.type&&t.set.type=="img"?t.set.item&&(i=t.set.item.i.n):t.set.item&&t.set.item.length>0&&(i=typeof t.set.item[0].set!="undefined"?t.set.item[0].set.item[0].i.n:t.set.item[0].i.n),r.w=s7ue.viewer.viewer.size.w,r.h=s7ue.viewer.viewer.size.h,s7ue.viewer.buildNoViewer(i,r))},getListOfImages:function(n){var r=[],t=n.set.item,i,u;if(t.length>0)for(i=0;i<t.length;i++)if(t[i].set){for(u=0;u<t[i].set.item.length;u++)r.push(t[i].set.item[u].i.n);break}else r.push(t[i].i.n);else img=t.i.n,r.push(img);return r},responsePreset:function(n){if(n!=undefined){var t=n.defaultImage;if(s7ue.viewer.defaultImg=typeof t=="undefined"?"":t,s7ue.viewer.viewerList=n,s7ue.viewer.jsonIsEmpty(n))s7ue.Callback.createCall(s7ue.viewer.isroot+"is/image/"+s7ue.configOptions.getCompany()+"/"+s7ue.viewer.asset+"?req=set,json",s7ue.viewer.randId(),s7ue.viewer.getImageForNoPreset,null);else{n.locale&&s7ue.viewer.locale==""&&(s7ue.viewer.locale=n.locale),s7ue.viewer.locale==""&&(s7ue.viewer.locale="en"),s7ue.browser.detectScreen();switch(s7ue.viewer.assetType){case s7ue.MASTER_PRESET_TYPES.UNIVERSAL_VIDEO:s7ue.viewer.buildVideo();break;case s7ue.MASTER_PRESET_TYPES.UNIVERSAL_ZOOM:case s7ue.MASTER_PRESET_TYPES.UNIVERSAL_SWATCH_SET:case s7ue.MASTER_PRESET_TYPES.UNIVERSAL_IMAGE_SET:case s7ue.MASTER_PRESET_TYPES.UNIVERSAL_E_CAT:case s7ue.MASTER_PRESET_TYPES.UNIVERSAL_SPIN_SET:s7ue.viewer.buildZoom();break;default:s7ue.viewer.buildNoViewer("","")}}}},jsonIsEmpty:function(){if(s7ue.device.name=="ipad"||s7ue.device.name=="iphone")return!1;var n=s7ue.viewer.viewerList[s7ue.device.name+s7ue.device.version];return typeof n=="undefined"&&(n=s7ue.viewer.viewerList[s7ue.device.name]),typeof n=="undefined"},responseSetIphone:function(n){var t="";t=s7ue.viewer.getImageNameFromJSON(n),s7ue.viewer.buildVideoPageLink(t)},responseSetAndroid:function(n){var i=n.set.item,u=s7ue.viewer.loadMbrSet(i),i=n.set.item,t=s7ue.viewer.loadMbrSet(i),r;/^\.\//.test(t)&&(t=t.substring(2)),s7ue.viewer.path=(s7ue.viewer.video.proot.indexOf("http:")>=0?"":s7ue.viewer.isroot)+s7ue.viewer.video.proot+t,s7ue.viewer.path.indexOf("http:")<0&&(r=window.location.href,s7ue.viewer.path="http://"+r.split("/")[2]+s7ue.viewer.path),imgName=s7ue.viewer.getImageNameFromJSON(n),s7ue.viewer.buildVideoPageLink(imgName)},getImageNameFromJSON:function(n){return n.set.item.length?n.set.item[0].i.n:n.set.item.i.n},responseSetRedirect:function(n){var r=n.set.item,t=s7ue.viewer.loadMbrSet(r),i;/^\.\//.test(t)&&(t=t.substring(2)),s7ue.viewer.path=(s7ue.viewer.video.proot.indexOf("http:")>=0?"":s7ue.viewer.isroot)+s7ue.viewer.video.proot+t,s7ue.viewer.path.indexOf("http:")<0&&(i=window.location.href,s7ue.viewer.path="http://"+i.split("/")[2]+s7ue.viewer.path),s7ue.viewer.buildVideoPageLink(s7ue.viewer.path)},responseSetViewer:function(n){var i=n.set.item,t=s7ue.viewer.loadMbrSet(i);/^\.\//.test(t)&&(t=t.substring(2)),s7ue.viewer.asset=t,s7ue.viewer.buildFlashVideo()},buildFlashVideo:function(){var n,t;this.flash.cont==null&&(n=this.targetdiv,this.flash.cont=n),this.flash.cont.style.width=this.viewer.size.w+"px",this.flash.cont.style.height=this.viewer.size.h+"px",t='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"  id="s7ueobj" width="'+this.viewer.size.w+'" height="'+this.viewer.size.h+'" align=""> <param name="movie" value="'+this.getViewerPath()+(this.getViewerPath().indexOf("?")>=0?"&":"?")+this.buildVideoParams()+'"> <param name="menu" value="false"> <param name="quality" value="high"> <param name="salign" value="LT"> <param name="allowScriptAccess" value="always"> <param name="allowFullScreen" value="true"> <embed src="'+this.getViewerPath()+(this.getViewerPath().indexOf("?")>=0?"&":"?")+this.buildVideoParams()+'" quality="high" width="'+this.viewer.size.w+'" height="'+this.viewer.size.h+'" SWLIVECONNECT="true" allowScriptAccess="always"  name="s7uuembed"  id="s7uuembed" type="application/x-shockwave-flash" allowFullScreen="true" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"> <\/embed> <\/object>',this.flash.cont.innerHTML=t},responseImg:function(n){var t=n,i="",r={w:0,h:0};t.set&&(t.set.type&&t.set.type=="video"?t.set.item&&(i=t.set.item.i.n):t.set.item&&t.set.item.length>0&&(i=t.set.item[0].i.n)),r.w=s7ue.viewer.viewer.size.w,r.h=s7ue.viewer.viewer.size.h,s7ue.viewer.buildNoViewer(i,r)},buildVideoParams:function(){var n="";return n=this.viewer.type=="flashas2"?"movie="+(this.video.method=="stream"?"":this.video.proot)+this.asset:"asset="+this.asset,n+=this.video.method=="stream"?"&comServerUrl="+this.video.sroot+"&method=stream":"",n+=this.viewer.type!="flashas3x"?"&videoserverurl="+(this.video.method=="stream"?this.video.sroot:this.video.proot):"&videoserverurl="+(this.video.method=="stream"?this.isroot+this.assetcontext:this.video.proot),n+=(this.modifiers!=""?"&":"")+this.modifiers,n+(this.viewer.type=="flashas2"?"&contentRoot=/"+this.contentroot+"/":"")},setRoots:function(n,t){this.coderoot=t!=""?this.stripLeadingAndTrailingSlash(t):this.coderoot,this.contentroot=n!=""?this.stripLeadingAndTrailingSlash(n):this.isroot},stripLeadingAndTrailingSlash:function(n){var t=n,i;return n.indexOf("/")==0&&n.length>1&&(t=n.substring(1,n.length)),i=t.lastIndexOf("/"),i>-1&&(t=t.substring(0,i)),t},delayInit:function(){s7ue.viewer.init()},getViewerPath:function(){var n="",s="",u=this.viewer.path,r,f,i,e,t,o;if(this.viewer.type=="flashas2"&&(s=this.locale!="en"?this.locale+"/":"",u=u.replace("flash/","flash/"+s)),this.viewer.path&&this.viewer.path!=""&&(this.viewer.path.indexOf("$codeRoot$")<0&&this.viewer.path.indexOf("$contentRoot$")<0?n=this.contentroot+u:(n=u.replace("$codeRoot$",this.coderoot),n=n.replace("$contentRoot$",this.contentroot)),n.indexOf("http:")!=0&&(n=(this.isroot=="/"?"":this.isroot)+n)),r="",f="",s7ue.configOptions.getUseDivSize()&&(i=n.split("&"),i.length>1))for(e="",t=0;t<i.length;t++)i[t].indexOf("stageSize=")>-1?(e=i[t].split("="),f=e[0],f+="="+this.viewer.size.w+"%2C"+this.viewer.size.h,r+="&"+f):(o="",t>0&&(o="&"),r+=o+i[t]);return r==""?n:r},buildParams:function(){return(this.viewer.type=="flashas2"?"image":"asset")+"="+this.company+"/"+this.asset+(this.modifiers!=""?"&":"")+this.modifiers+"&locale="+this.locale+(this.viewer.type=="flashas2"?"&contentRoot=/"+this.contentroot+"/":this.viewer.type=="flashas3"?"":"&contentRoot="+s7ue.configOptions.getCSSRoot())+"&serverUrl="+s7ue.configOptions.getServerUrl()},buildTrack:function(){return this.enabledTrack?"&eventLog=javascript:s7Tag(%22$1$%22)":""},getConfigFromViewerSetup:function(n){var f=n.split("?"),e="",o,t,r,i,u;for(o in f)for(t=f[o],t=unescape(t),r=t.split("&"),i=0;i<r.length;i++)try{u=r[i],u.indexOf("config=")>-1&&(e=u.split("=")[1])}catch(s){}return e},buildZoom:function(){var n=s7ue.viewer.viewerList[s7ue.device.name+s7ue.device.version],t,i,r;if((typeof n=="undefined"||n=="")&&(n=s7ue.viewer.viewerList[s7ue.device.name]),typeof n!="undefined"&&n!=""){for(t=n.split(","),this.viewer.type=t[0],i=1;i<t.length;i++)this.viewer.path+=(this.viewer.path!=""?",":"")+t[i];this.currentViewerSetup=n;try{this.isFlyout=n.indexOf(s7ue.ZOOM_VIEWER_LINKS.ZOOM_VIEWER_LINKS_FLYOUT)>-1}catch(u){}r=this.getConfigFromViewerSetup(n),this.currentViewerConfig=r,s7ue.device.name=="desktop"||this.viewer.type!="dhtml"&&this.viewer.type!="html5"?this.prepareViewer():s7ue.Callback.createCall(this.isroot+"is/image/"+s7ue.configOptions.getCompany()+"/"+this.asset+"?req=set,json",this.randId(),this.viewerImageSetResponse,null)}else s7ue.Callback.createCall(this.isroot+"is/image/"+s7ue.configOptions.getCompany()+"/"+this.asset+"?req=set,json",this.randId(),this.getImageForNoPreset,null)},prepareViewer:function(){for(var i=this.viewer.path.split("&"),f=!1,r,u,t,n=0;n<i.length;n++)if(i[n].toLowerCase().indexOf("stagesize")>=0&&(f=!0,r=i[n].split("="),!s7ue.configOptions.getUseDivSize()&&r.length>0&&(u=unescape(r[1]),t=u.split(","),t.length>1))){this.viewer.size.w=t[0],this.viewer.size.h=t[1];break}this.viewer.size.w<=0&&(this.viewer.size.w=s7ue.browser.screensize.w,this.viewer.size.custom=!1),this.viewer.size.h<=0&&(this.viewer.size.h=s7ue.browser.screensize.h,this.viewer.size.custom=!1),this.viewer.type=="dhtml"||this.viewer.type=="html5"?this.isFlyout&&s7ue.device.name=="desktop"?this.loadFlyoutSupport():s7ue.device.name=="desktop"?this.buildIframe():this.buildTabletAndMobileViewerLink():(this.viewer.type=="flashas2"||this.viewer.type=="flashas3")&&this.buildFlash(!0)},loadFlyoutSupport:function(){var n=document.createElement("script");n.setAttribute("src",s7ue.configOptions.getOptionByKey("flyoutLibraryPath")+"sj_advancedflyout_embed.js"),document.getElementsByTagName("head")[0].appendChild(n)},createFlyoutViewer:function(){escr=document.createElement("script"),escr.setAttribute("src",s7ue.configOptions.getOptionByKey("flyoutInitFilePath")+"JavaScript/flyoutLibrary.js"),s7ue.browser.name!="ie"?escr.onload=s7ue.viewer.initializeFlyout:escr.onreadystatechange=function(){this.readyState=="loaded"&&s7ue.viewer.initializeFlyout()},document.getElementsByTagName("head")[0].appendChild(escr)},loadedFlyoutCallback:function(){s7ue.viewer.createFlyoutViewer()},markFlyout:function(n){var t,i;for(isFlyoutLibLoaded[n]=!0,t=!0,i=0;i<isFlyoutLibLoaded.length;i++)t=t&&isFlyoutLibLoaded[i];t&&s7ue.viewer.createFlyoutViewer()},initializeFlyout:function(){flyout.init()},buildVideo:function(){var o=this.parseMovieUrl(this.asset),n,t,r,u,i,e,f;if(s7ue.device.isIOS())this.viewer.path=this.isroot+this.assetcontext+this.company+"/"+this.asset+".m3u8",s7ue.Callback.createCall(this.isroot+"is/image/"+this.company+"/"+this.asset+"?req=set,json",this.randId(),this.responseSetIphone,null);else{if(n=s7ue.viewer.viewerList[s7ue.device.name+s7ue.device.version],n||(n=s7ue.viewer.viewerList[s7ue.device.name]),typeof n!="undefined"&&n!=""){if(t=n.split(","),this.viewer.bitrate=parseInt(t[0]),isNaN(this.viewer.bitrate+0)&&(this.viewer.bitrate=-1,this.viewer.type=t[0]),t.length>1)for(r=1;r<t.length;r++)this.viewer.path+=(this.viewer.path!=""?",":"")+t[r];if(this.stageSize)this.viewer.size.w=this.stageSize.w,this.viewer.size.h=this.stageSize.h;else for(u=this.viewer.path.split("&"),i=0;i<u.length;i++)if(u[i].toLowerCase().indexOf("stagesize")>=0&&(e=u[i].split("="),e.length>0&&(f=e[1].split(","),f.length>1))){this.viewer.size.w=f[0],this.viewer.size.h=f[1];break}this.viewer.size.w<=0&&(this.viewer.size.w=s7ue.browser.screensize.w,this.viewer.size.custom=!1),this.viewer.size.h<=0&&(this.viewer.size.h=s7ue.browser.screensize.h,this.viewer.size.custom=!1)}s7ue.device.isAndroid()&&this.viewer.bitrate>0?s7ue.Callback.createCall(this.isroot+"is/image/"+this.company+"/"+this.asset+"?req=set,json",this.randId(),this.responseSetAndroid,null):this.getViewerPath()==""?s7ue.Callback.createCall(this.isroot+"is/image/"+this.company+"/"+this.asset+"?req=set,json",this.randId(),this.responseImg,null):this.viewer.type=="flashas3x"&&this.video.method=="stream"?(this.asset=this.company+"/"+(this.asset+=".f4m"),this.buildFlashVideo()):(s7ue.device.name=="desktop"&&(this.viewer.bitrate="infinite"),s7ue.Callback.createCall(this.isroot+"is/image/"+this.company+"/"+this.asset+"?req=set,json",this.randId(),this.responseSetViewer,null))}},buildNoViewer:function(n,t){var e,i,r,u,f;n==""?(e=this.targetdiv,e.style.lineHeight=s7ue.browser.screensize.h+"px",e.setAttribute("align","center"),e.appendChild(document.createTextNode("No Viewer for your device")),document.body.appendChild(e)):(i="",i=this.defaultImg.indexOf("?")==0?this.isroot+"is/image/"+n+this.defaultImg:this.defaultImg!=""?this.isroot+"is/image/"+n+"?"+this.defaultImg:this.isroot+"/is/image/"+n,r={w:0,h:0},r.w=t.w,r.h=t.h,(i.indexOf("hei=")<0||i.indexOf("wid=")<0)&&(i+=(i.indexOf("?")>0?"&":"?")+"hei="+parseInt(r.h)+"&wid="+parseInt(r.w)),u=document.createElement("div"),u.style.lineHeight=s7ue.viewer.viewer.size.h+"px",u.style.height=s7ue.viewer.viewer.size.h+"px",u.style.width=s7ue.viewer.viewer.size.w+"px",u.setAttribute("align","left"),f=document.createElement("img"),f.setAttribute("src",i),f.setAttribute("height",r.h),f.setAttribute("width",r.w),f.setAttribute("alt",""),u.appendChild(f),this.targetdiv.appendChild(u))},buildFlash:function(n){this.flash.cont==null&&(this.flash.cont=this.targetdiv),this.flash.cont.style.width=this.viewer.size.w+"px",this.flash.cont.style.height=this.viewer.size.h+"px";var t='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"  id="s7ueobj" width="'+this.viewer.size.w+'" height="'+this.viewer.size.h+'" align=""> <param name="movie" value="'+this.getViewerPath()+(this.getViewerPath().indexOf("?")>=0?"&":"?")+this.buildParams()+this.buildTrack()+'"> <param name="menu" value="false"> <param name="quality" value="high"> <param name="salign" value="LT"> <param name="allowScriptAccess" value="always"> <param name="allowFullScreen" value="true"> <embed src="'+this.getViewerPath()+(this.getViewerPath().indexOf("?")>=0?"&":"?")+this.buildParams()+this.buildTrack()+'" quality="high" width="'+this.viewer.size.w+'" height="'+this.viewer.size.h+'" SWLIVECONNECT="true" allowScriptAccess="always"  name="s7ueembed"  id="s7ueobj" type="application/x-shockwave-flash" allowFullScreen="true" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"> <\/embed> <\/object>';return n?(this.flash.cont.innerHTML=t,""):t},buildIframe:function(){this.iframe=document.createElement("iframe"),this.iframe.setAttribute("width",this.viewer.size.w),this.iframe.setAttribute("height",this.viewer.size.h),this.iframe.setAttribute("allowTransparency","true"),this.iframe.setAttribute("frameBorder","0"),this.iframe.setAttribute("scrolling","no"),this.targetdiv.appendChild(this.iframe),this.targetdiv.setAttribute("style","width:"+this.viewer.size.w+";height:"+this.viewer.size.h);var i=this.getViewerPath(),n="?",t=this.getViewerPath();n=t.indexOf("?")>-1?"&":"?",this.iframe.setAttribute("src",this.getViewerPath()+n+this.buildParams())},buildTabletAndMobileViewerLink:function(){var n=this.getViewerPath(),t=this.getViewerPath()+((n.indexOf("?")>=0?"&":"?")+this.buildParams());this.buildMobilePageLink(t)},buildFlashIframe:function(){this.iframe=document.createElement("iframe"),this.iframe.id="contentIFrame",this.iframe.setAttribute("width",this.viewer.size.w),this.iframe.setAttribute("height",this.viewer.size.h),this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("scrolling","no"),this.container.appendChild(this.iframe);var n=s7ue.viewer.buildFlash(!1),t=document.getElementById("contentIFrame");t.contentDocument.write(n)},buildHTML5Content:function(){buildIframe()},buildDHTMLContent:function(){},getViewerImage:function(){return s7ue.viewer.setImageList[0]},buildOverlayImage:function(){return mURL=s7ue.configOptions.getServerUrl()+s7ue.configOptions.getCompanyNameOnly()+"?layer=comp&size=55,55&layer=1&src=/Scene7SharedAssets/tap-for-more&size=55,55&fmt=png-alpha"},buildPosterImage:function(n){var i=s7ue.viewer.viewer.size.w,r=s7ue.viewer.viewer.size.h,t=s7ue.configOptions.getServerUrl()+"$IMG$_th?fit=constrain,1&wid=$WIDTH$&hei=$HEI$";return t=t.replace("$WIDTH$",i),t=t.replace("$HEI$",r),t.replace("$IMG$",n)},buildISCommandsForThumbnail:function(){var n=s7ue.configOptions.getThumbnailSize();return"?size="+n.w+","+n.h},buildMobilePageLink:function(n){var t=s7ue.viewer.viewer.size.w,i=s7ue.viewer.viewer.size.h,u=this.buildPosterImage(this.getViewerImage()),f=this.buildOverlayImage(this.getViewerImage()),e=(i-this.DEFAULT_OVERLAY_SIZE*.5)*.5,o=(t-this.DEFAULT_OVERLAY_SIZE*.5)*.5,r=this.targetdiv.style.top,s=this.createDivImage(t,i,r,0,u,10,"center",n,"relative"),h=this.createDivImage(this.DEFAULT_OVERLAY_SIZE,this.DEFAULT_OVERLAY_SIZE,e+r,o,f,1001,"center",n,"absolute");this.targetdiv.appendChild(h),this.targetdiv.appendChild(s)},createDivImage:function(n,t,i,r,u,f,e,o,s){var c=document.createElement("div"),l=document.createElement("img"),h,a;return l.setAttribute("src",u),h=document.createElement("a"),typeof o!="undefined"?(h.appendChild(l),h.setAttribute("href",o),h.setAttribute("target","_self"),c.appendChild(h)):c.appendChild(l),a="position:"+s+"; text-align:"+e+"; left:"+r+"px; top:"+i+"px; width:"+n+"px; height:"+t+"px;display: table-cell; vertical-align: middle"+(null==f?"":"; z-index:"+f),c.setAttribute("style",a),c},buildVideoPageLink:function(n){var i=s7ue.viewer.viewer.size.w,r=s7ue.viewer.viewer.size.h,f=this.buildPosterImage(n),e=this.buildOverlayImage(n),o=(r-this.DEFAULT_OVERLAY_SIZE*.5)*.5,s=(i-this.DEFAULT_OVERLAY_SIZE*.5)*.5,t=s7ue.viewer.path;t==undefined&&(t=s7ue.viewer.viewer.path);var u=this.targetdiv.style.top,h=this.createDivImage(i,r,u,0,f,10,"center",t,"relative"),c=this.createDivImage(this.DEFAULT_OVERLAY_SIZE,this.DEFAULT_OVERLAY_SIZE,o+u,s,e,1001,"center",t,"absolute");this.targetdiv.appendChild(c),this.targetdiv.appendChild(h)},resize:function(n,t){this.iframe!=null?(this.iframe.setAttribute("width",n),this.iframe.setAttribute("height",t)):this.flash.cont!=null&&(this.viewer.size.w=s7ue.browser.screensize.w,this.viewer.size.h=s7ue.browser.screensize.h,this.buildFlash())},delayResize:function(){s7ue.viewer.viewer.size.custom||(s7ue.browser.detectScreen(),s7ue.viewer.resize(s7ue.browser.screensize.w,s7ue.browser.screensize.h))}},Crate=Crate||{},Crate.SocialShare={init:function(n){Crate.SocialShare.setTwitter(n),Crate.SocialShare.setPinterest(),$("#content a.jsFacebookLink:first").attr("href",Crate.SocialShare.config.facebookPreamble+window.location.href)},initVideo:function(){Crate.SocialShare.setFacebookVideo(),Crate.SocialShare.setGooglePlusVideo(),Crate.SocialShare.setTwitterVideo(),Crate.SocialShare.setPinterestVideo(),$("#content a.jsFacebookLink:first").attr("href",Crate.SocialShare.config.facebookPreamble+Crate.SocialShare.config.shortUrl)},initCustom:function(){Crate.SocialShare.setFacebookHub(),Crate.SocialShare.setGooglePlusHub(),Crate.SocialShare.setTwitterHub(),Crate.SocialShare.setPinterestHub(),$("#content a.jsFacebookLink:first").attr("href",Crate.SocialShare.config.facebookPreamble+Crate.SocialShare.config.shortUrl)},config:{twitterPreamble:"http://twitter.com/home?status=Look what I found at Crate and Barrel: {$product} - {$url}",facebookPreamble:"http://www.facebook.com/sharer.php?u=",shortUrl:"",itemId:0,swatchId:"",videoThumbUrl:"",videoUrl:"",title:"",iTunesUrl:"",summary:"",img:"",desc:""},setIdAndSwatch:function(n,t){Crate.SocialShare.config.itemId=n,Crate.SocialShare.config.swatchId=t,Crate.SocialShare.setTwitter()},setTwitter:function(n){var t=window.location.href,i="%3fsw=",r;Crate.SocialShare.config.shortUrl&&(t=Crate.SocialShare.config.shortUrl+Crate.SocialShare.config.itemId,i="%26sw="),Crate.SocialShare.config.swatchId&&(t=t+i+Crate.SocialShare.config.swatchId),n==null&&(n=$("#content .jsShareTitle:first, #jsUI .jsShareTitle:first").html()),r=Crate.SocialShare.config.twitterPreamble.replace("{$product}",encodeURIComponent(n)).replace("{$url}",encodeURIComponent(t)),$("#content a.jsTwitterLink:first, #jsUI a.jsTwitterLink").attr("href",r)},PinIt:function(n){var t,f;n.preventDefault();var i=$(n.currentTarget).data(),r="http://pinterest.com/pin/create/button/",u="?";for(t in i)f=i[t],r+=u+t+"="+encodeURIComponent(f),u="&";window.open(r,"signin","width=665,height=600")},setTwitterVideo:function(){var n=Crate.SocialShare.config.twitterPreamble.replace("{$product}",encodeURIComponent(Crate.SocialShare.config.title)).replace("{$url}",encodeURIComponent(Crate.SocialShare.config.videoUrl));$("#twitterLink").attr("href",n)},setPinterest:function(){var t=window.location.href,n;$(".productImageWrap .jsZoomLarge").attr("src").indexOf("http://")==-1&&$(".productImageWrap .jsZoomLarge").attr("src","http:"+$(".productImageWrap .jsZoomLarge").attr("src")),n=$(".productImageWrap .jsZoomLarge").attr("src"),n.indexOf("?")!=-1&&(n=n.substring(0,n.indexOf("?")));var i=document.title,r="http://pinterest.com/pin/create/button/?url={$url}&media={$media}&description={$description}".replace("{$url}",encodeURIComponent(t)).replace("{$media}",encodeURIComponent(n)).replace("{$description}",encodeURIComponent(i));$(".toolButtons #fml_pinit .pin-it-button").attr({href:r,"data-pin-config":"none"})},setGooglePlusVideo:function(){var n="https://plus.google.com/share?url={$url}".replace("{$url}",encodeURIComponent(Crate.SocialShare.config.videoUrl));$("#googlePlusLink").attr("data-href",n)},setPinterestVideo:function(){var n="http://pinterest.com/pin/create/button/?url={$url}&media={$media}&is_video=true&title={$title}&description={$description}".replace("{$url}",encodeURIComponent(Crate.SocialShare.config.videoUrl)).replace("{$media}",encodeURIComponent(Crate.SocialShare.config.videoThumbUrl)).replace("{$title}",encodeURIComponent(Crate.SocialShare.config.title)).replace("{$description}",encodeURIComponent(Crate.SocialShare.config.title));$(".VidSocialBar #fml_pinit .pin-it-button").attr({href:n,"data-pin-config":"none"})},setFacebookVideo:function(){var n="http://www.facebook.com/sharer.php?u={$url}&t={$title}&is_video=true".replace("{$url}",encodeURIComponent(Crate.SocialShare.config.videoUrl)).replace("{$title}",encodeURIComponent(Crate.SocialShare.config.title));$("#lnkFacebookShare").attr("href",n)},setGooglePlusHub:function(){var n="https://plus.google.com/share?url={$url}".replace("{$url}",encodeURIComponent(Crate.SocialShare.config.shortUrl));$("#googlePlusLink").attr("data-href",n)},setFacebookHub:function(){var n="http://www.facebook.com/sharer.php?s=100&p[title]={$title}&p[summary]={$summary}&p[url]={$url}&p[images][0]={$img}".replace("{$url}",encodeURIComponent(Crate.SocialShare.config.shortUrl)).replace("{$title}",encodeURIComponent(Crate.SocialShare.config.title)).replace("{$summary}",encodeURIComponent(Crate.SocialShare.config.summary)).replace("{$img}",encodeURIComponent(Crate.SocialShare.config.img));$("#lnkFacebookShare").attr("href",n)},setTwitterHub:function(){var n="http://twitter.com/home?status={$desc} - {$url}".replace("{$desc}",Crate.SocialShare.config.desc),t=n.replace("{$url}",encodeURIComponent(Crate.SocialShare.config.shortUrl));$("#twitterLink").attr("href",t)},setPinterestHub:function(){var n="http://pinterest.com/pin/create/button/?url={$url}&media={$media}&is_video=true&title={$title}&description={$description}".replace("{$url}",encodeURIComponent(Crate.SocialShare.config.videoUrl)).replace("{$media}",encodeURIComponent(Crate.SocialShare.config.videoThumbUrl)).replace("{$title}",encodeURIComponent(Crate.SocialShare.config.title)).replace("{$description}",encodeURIComponent(Crate.SocialShare.config.title));$("#pinItButton").attr({href:n,"count-layout":"none"})}},Crate.Spill={config:{categoryId:-1,isFamily:!1,isRoot:!1,maxResultCount:300,currentRefinement:"",isTablet:!1,validRoot:!1,validNode:!1,loaded:!1,showCat:!0,currentSort:"sequence",searchTerm:null,awaitingScrollRequest:!1,spillComplete:!1},data:null,checkHash:function(){var i=window.location.hash,t,e,r;if(i&&i.length>1){i=window.location.hash.substring(1);var u=i.split("~"),n=u[0],f="sequence";u.length>1&&(f=u[1]),Crate.Spill.config.searchTerm=($.jqURL.get("query")||"").split("#")[0],Crate.Spill.config.searchTerm?t=$.jqURL.get("refinements"):(e=window.location.pathname.split("/"),t=e[e.length-1]),t=="1"&&(t=""),n=="1"&&(n=""),n!=t&&(r=null,r=Crate.Spill.config.searchTerm?"/Search.aspx?query="+Crate.Spill.config.searchTerm+"&refinements="+n:"./"+n,f!="sequence"&&(r+="#"+n+"~"+f),window.location=r)}},init:function(){Crate.Spill.data=Crate.Spill.data||[],Crate.Spill.config.categoryId<=0&&!Crate.Spill.config.searchTerm&&(Crate.Spill.config.searchTerm=($.jqURL.get("query")||"").split("#")[0]),$.history.init(function(n){var r,t,i,f,u;if(n.slice(0,6)==="#Crate")return!1;if(r=n.split("~"),t=r[0],t=="1"&&(t=""),i="sequence",r.length>1&&(i=r[1]),Crate.Spill.config.loaded){if(f=!1,t!=Crate.Spill.config.currentRefinement&&(f=Crate.Spill.refine(t,Crate.Spill.config.categoryId,Crate.Spill.config.searchTerm)),f){u=null,u=Crate.Spill.config.categoryId>0?t?"./"+t:"./1":"/Search.aspx?query="+Crate.Spill.config.searchTerm+"&refinements="+t,i!="sequence"&&(u+="#"+t+"~"+i),window.location=u;return}}else Crate.Spill.config.loaded=!0;i!=Crate.Spill.config.currentSort&&Crate.Spill.sort(i)}),Crate.Spill.validate(Crate.Spill.config.isRoot),Crate.Spill.initHover()},hasMoreRefinement:function(n){var t=n.split("_"),r=t[t.length-1],i=r.split("-");return Crate.Utilities.String.startsWith(i[i.length-1],"e")},isUpTheTree:function(n){var t=n.split("_"),i=n?t.length:0,r=Crate.Spill.config.currentRefinement?Crate.Spill.config.currentRefinement.split("_").length:0;return i<r},refine:function(n,t,i){var u,f,r;return(Crate.Debug.trace("Refine: "+n+", "+t+", "+i),u=Crate.Spill.isUpTheTree(n),u&&!Crate.Spill.config.validRoot)?!0:(Crate.Spill.config.currentRefinement=n,f=Crate.Spill.hasMoreRefinement(n),f||Crate.UI.backToTop(),r=new Crate.AJAX.Base("GuidedNavigation|GuidedSearch"),t>0?r.CategoryId=t:r.SearchTerm=i,r.IsProductNeeded=u?!Crate.Spill.config.validRoot:!Crate.Spill.config.validNode,r.RefinementsString=n,r.submit(null,function(n){var r,t,i,u;Crate.Spill.HideThemes(),r=Crate.Spill.config.validNode,Crate.Spill.validate(!n.RefinementsString),Crate.Spill.hasMoreRefinement(n.RefinementsString)&&(Crate.Spill.config.validNode=r),Crate.UI.Browser.isIE6()?($("#guidedNavigation").empty().append(n.LeftNav),$("#guidedNavigation:first").children().attr("id",null).attr("class",null)):$("#guidedNavigation").fadeOut(function(){$(this).empty().append(n.LeftNav),$(this).children().attr("id",null).attr("class",null)}).fadeIn(Crate.Spill.postRefinement),n.Data&&(Crate.Spill.data=n.Data),n.Products?(t=$("div.jsSortContainer").hide(),i=$("<div/>"),i.append(t.find(".jsSaveTop")),i.append(n.Products),i.append(t.find(".jsSaveBottom")),t.empty().append(i.children()),Crate.UI.Browser.isIE6()?t.show():t.fadeIn("slow"),Crate.Spill.config.currentSort!="sequence"&&Crate.Spill.sort(Crate.Spill.config.currentSort)):n.Skus&&(u=$("#content div.jsItemRow").attr("rel","inactive"),$.each(n.Skus,function(n,t){var i=$("#MiniSetItem"+t).attr("rel","active");i.is(":hidden")&&(Crate.UI.Browser.isIE6()?i.fadeIn():i.show())}),u.filter("[rel!='active']:visible").attr("rel","inactive").fadeOut()),n.Count&&$("#content .searchHeading .jsCount").html(n.Count)}),!1)},postRefinement:function(){Crate.QuickLook.init(),Crate.Spill.initHover(),Crate.UI.LazyLoad.init()},validate:function(n){n&&(Crate.Spill.config.validRoot=Crate.Spill.data.length<Crate.Spill.config.maxResultCount&&!Crate.Spill.config.isFamily),Crate.Spill.config.validNode=Crate.Spill.data.length<Crate.Spill.config.maxResultCount&&!(Crate.Spill.config.isFamily&&n)},initHover:function(){$("#guidedNavigation li.parentNavItem").hover(function(){$(this).children("span.parentNavItem").addClass("hover"),$(this).children(".childNavItem:first").show()},function(){$(this).children("span.parentNavItem").removeClass("hover"),$(this).children(".childNavItem").hide()})},HideThemes:function(){$(".jsThemeItem").hide()},ShowThemes:function(){$(".jsThemeItem").show()},showAllRefinements:function(){$("#leftNav").removeClass("hidden").hide().show(),$("#showAllRefinementsLink").hide(),$("#showLessRefinementsLink").removeClass("hidden").show()},showLessRefinements:function(){$("#leftNav").hide(),$("#showAllRefinementsLink").removeClass("hidden").show(),$("#showLessRefinementsLink").hide()},sortClick:function(n){var t=$(n.target).attr("rel"),i=Crate.Spill.config.currentRefinement;t&&t!="sequence"&&(i+="~"+t),$.history.load(i)},sort:function(n){var i,r,t,u,f,e;Crate.Spill.HideThemes(),Crate.Spill.config.currentSort=n,Crate.UI.DropDown.select("#content div.jsDropDown:first",n),i=$("#content div.jsSortContainer:first").hide(),n&&(Crate.Spill.data=$.sortBy(Crate.Spill.data,this.sortOptions[n]),Crate.Omniture.tagEvarEvent("event64","eVar39",Crate.Spill.sortOptionDescription(n))),r=Crate.Spill.config.categoryId<=0,t=$("<div/>"),r?(t=$("<div/>"),u=$("<div/>")):u=t,r||t.append(i.find(".jsSaveTop")),$.each(Crate.Spill.data,function(n,i){var f=i.Id,r=$("#MiniSetWrapper"+f);i.IsOutlet?u.append(r):t.append(r)}),r?(f=i.children(".jsSearchProduct").empty(),e=i.children(".jsSearchOutlet").empty(),i.show(),f.append(t.children()).fadeIn("slow"),e.append(u.children()).fadeIn("slow")):(t.append(i.find(".jsSaveBottom")),i.empty().append(t.children()).fadeIn("slow")),Crate.QuickLook.init(),Crate.UI.LazyLoad.Reload()},sortOptions:{none:function(){return 0},title:function(n){return n.Name},sequence:function(n){return n.Sequence},priceHighToLow:function(n){return-n.CurrentPriceMax},priceLowToHigh:function(n){return n.CurrentPriceMin},sale:function(n){return!n.IsOnSale}},sortOptionDescription:function(n){switch(n){case"sequence":return"Sort (default)";case"title":return"by A to Z";case"priceLowToHigh":return"Price, low to high";case"priceHighToLow":return"Price, high to low";default:return n}}},Crate=Crate||{},Crate.SpillCollections={init:function(){var i=$("#content div.jsSpillCollectionRow").find("select.jsSize"),n,t;i.change(function(){var n=$(this);Crate.SpillCollections.refine(n,"jsSize",$(this).val())}).each(function(){this.selectedIndex!=0&&(this.selectedIndex=0)}),n=$("#content div.jsSpillCollectionRow").find("select.jsSeating"),n.change(function(){var n=$(this);Crate.SpillCollections.refine(n,"jsSeating",$(this).val())}).each(function(){this.selectedIndex!=0&&(this.selectedIndex=0)}),t=$("#content div.jsSpillCollectionRow").find("a.jsColor"),t.click(function(){if($(this).closest("#selColor").find(".jsColor").length>1){var n=$(this);$(".jsColor").removeClass("selected"),$(this).addClass("selected"),Crate.SpillCollections.refine(n,"jsColor",$(this).children(".jsColorId").text())}}),$(".jsRoomView").hover(function(){$(this).find("img.jsProductImg").addClass("hidden"),$(this).find("img.jsRoomViewImg").removeClass("hidden")},function(){$(this).find("img.jsProductImg").removeClass("hidden"),$(this).find("img.jsRoomViewImg").addClass("hidden")}),$(".jsColor").hover(function(){$(this).find("span.jsColorHover").removeClass("inv hidden").addClass("hoverText")},function(){$(this).find("span.jsColorHover").addClass("inv hidden").removeClass("hoverText")}),$(".jsSpillCollectionRow").each(function(){var n=$(this).find("#liSpillCollectionContent"),t=$(this).find("#divSpillCollectionsCount");n.size()>1?t.html(n.size()+" items"):n.size()==1?t.html(n.size()+" item"):n.size()==0&&t.html("")})},refine:function(n,t,i){var tt=$(t),r=n.closest(".jsSpillCollectionRow"),d=r.find(".jsSpillCollectionContent li:not(.hidden) #tagValWrap ."+t),f=r.find("#divSpillCollectionContent"),e,v,k;d.each(function(){this.innerHTML==i?$(this).closest("li").addClass("jsRefMatch"):$(this).closest("li").addClass("hidden")}),f.find("li.jsRefMatch").each(function(){$(this).removeClass("hidden").removeClass("jsRefMatch")}),f.find("ul li").length>3&&f.find("ul").jcarousel("scroll",1),e=f.find("li:not(.hidden)"),e.size()<=3&&(f.find(".jcarousel-prev").addClass("hidden"),f.find(".jcarousel-next").addClass("hidden")),v=r.find("#divSpillCollectionsCount"),e.size()>1?v.html(e.size()+" items"):e.size()==1?v.html(e.size()+" item"):e.size()==0&&v.html(""),n.siblings(".jsClear").removeClass("hidden"),n.parent().siblings(".jsClear").removeClass("hidden");var s=f.find("li:not(.hidden)"),b=s.find("#tagValWrap span"),u=r.find(".jsSingleSize"),y,o,p,w,g,nt,h=[],c=[],l=[],a=[];r.find("select.jsSize option").each(function(){var t=!1,i=$(this).val(),n=$(this).text();b.each(function(){this.innerHTML==i&&(t=!0)}),t?n.indexOf("Please")==-1&&(n.indexOf("Wid")!=-1?l.push(this):n.indexOf("Hig")!=-1?a.push(this):n.indexOf("Dia")!=-1?c.push(this):h.push(this)):$(this).addClass("hidden")}),h.length==1&&($(h[0]).addClass("hidden"),r.find("#soloDiameter").text(h[0].text),w=h[0].text),c.length==1&&($(c[0]).addClass("hidden"),r.find("#soloDiameter").text(c[0].text),p=c[0].text),l.length==1&&($(l[0]).addClass("hidden"),r.find("#soloDiameter").text(l[0].text),y=l[0].text),a.length==1&&($(a[0]).addClass("hidden"),r.find("#soloDiameter").text(a[0].text),o=a[0].text),r.find(".soloShape").text()&&(w=r.find(".soloShape").text()),r.find(".soloDiameter").text()&&(p=r.find(".soloDiameter").text()),r.find(".soloWidth").text()&&(y=r.find(".soloWidth").text()),r.find(".soloHeight").text()&&(o=r.find(".soloHeight").text()),(s.length==1||h.length<=1&&c.length<=1&&l.length<=1&&a.length<=1)&&(u.removeClass("hidden"),r.find("select.jsSize").addClass("hidden"),u.html(""),p&&o?u.html(p+" x "+o+"<br/>"):o&&(y?u.html(u.html()+y+" x "+o+"<br/>"):u.html(u.html()+o+"<br/>")),w&&u.html(u.html()+w+"<br/>")),r.find("select.jsSeating option").each(function(){var n=r.find(".jsSingleCapacity"),t=!1,u=$(this).val(),i=$(this).text();b.each(function(){this.innerHTML==u&&(t=!0,s.length==1&&(g=i))}),t?s.length==1&&(n.removeClass("hidden"),r.find("select.jsSeating").addClass("hidden"),n.html(i)):$(this).addClass("hidden")}),r.find("select.jsSeating option:not(.hidden)").length-1==1&&(k=r.find(".jsSingleCapacity"),k.removeClass("hidden"),r.find("select.jsSeating").addClass("hidden"),k.html(r.find("select.jsSeating option:not(.hidden)")[1].text)),r.find("#selColor .jsColorId").each(function(){var i=r.find(".jsSingleColor"),t=!1,n=$(this).text();b.each(function(){this.innerHTML==n&&(t=!0,s.length==1&&(nt=n))}),t||$(this).closest("a").addClass("hidden"),s.length==1&&(r.find("select.jsSeating").addClass("hidden"),i.html(n))})},ClearSelectionInit:function(){$("#content .jsClear").click(function(){var n=$(this).closest(".jsSpillCollectionRow"),r=n.find("#divSpillCollectionContent"),t=r.find("li"),i;t.removeClass("hidden"),r.find(".jcarousel-prev").removeClass("hidden"),r.find(".jcarousel-next").removeClass("hidden"),$(this).addClass("hidden"),i=n.find("#divSpillCollectionsCount"),t.size()>1?i.html(t.size()+" items"):t.size()==1?i.html(t.size()+" item"):t.size()==0&&i.html(""),n.find(".jsSize").val(""),n.find(".jsSeating").val(""),n.find(".jsColor").removeClass("selected"),n.find("select.jsSize").removeClass("hidden"),n.find("select.jsSeating").removeClass("hidden"),n.find("#selColor").removeClass("hidden"),n.find(".jsSingleSize").addClass("hidden"),n.find(".jsSingleCapacity").addClass("hidden"),n.find(".jsSingleColor").addClass("hidden"),n.find("select.jsSize option").each(function(){$(this).removeClass("hidden")}),n.find("select.jsSeating option").each(function(){$(this).removeClass("hidden")}),n.find("#selColor a").each(function(){$(this).removeClass("hidden")})})}},Crate.StoriesAnimation=function(){function f(i,r){var f=$slideShowElement.width(),o=$slideShowElement.height(),u="fade";Modernizr.touch==!0&&(u="scrollHorz"),n.cycle("destroy").cycle({fx:u,easing:"swing",delay:1e3,timeout:7e3,speed:1500,prev:"#prev",next:"#next",fit:1,width:f,startingSlide:t,before:e,pager:r,pagerAnchorBuilder:function(){return'<li class="pagerListItem"><a class="pagerLink" href="javascript:;"><span class="outer"><span class="inner"><\/span><\/span><\/a><\/li>'}})}function e(n,u,f){i==!1&&(t=f.nextSlide,r.cycle("resume").cycle(t).cycle("pause"))}var i,n,r,u,t;return{init:function(e,o,s){i=!0,n=$("#"+e),$slideShowElement=$(".themesli"),r=$("#"+o),u=$(".themeImg"),t=0,r.cycle({fx:"fade"}).cycle("pause"),f(!0,s),n.swipe({left:function(){n.cycle("next")},right:function(){n.cycle("prev")}}),i=!1}}}(),Crate.Stories=function(){return{init:function(){Modernizr.touch?$(".jsHotLinkArea").bind("mouseover",function(n){var t=$(n.currentTarget);t.find(".jsHotLink").removeClass("hidden")}).bind("mouseout",function(n){var t=$(n.currentTarget);t.find(".jsHotLink").addClass("hidden")}):$(".jsHotLinkArea").hover(function(n){var t=$(n.currentTarget);t.find(".jsHotLink").removeClass("hidden")},function(n){var t=$(n.currentTarget);t.find(".jsHotLink").addClass("hidden")})}}}(),Crate.StoriesRecipe=function(){var n="";return{init:function(){$(".jsRecipeButton").click(function(){var t=$(this),i;t.html().toLowerCase()=="<span>hide<\/span>"?(i=t.parent().siblings(".jsRecipeContainer").data("width"),t.parent().siblings(".jsRecipeContainer").length>0?(t.parent().siblings(".jsRecipeContainer").animate({opacity:"0"}),t.parent().siblings(".jsRecipeContainer").children(".jsRecipeDiv").hide(),n==""?t.html("<span>View Recipes<\/span>"):t.html(n)):(t.parent().parent().parent().siblings(".jsRecipeContainer").animate({opacity:"0"}),t.parent().parent().parent().siblings(".jsRecipeContainer").children(".jsRecipeDiv").hide(),n==""?t.html("<span>View Recipes<\/span>").parent().siblings().children(".jsRecipeButton").html("<span>View Recipes<\/span>"):t.html(n).parent().siblings().children(".jsRecipeButton").html(n)),$("#topNavWrap").removeClass("noPrint"),$("#normalFooter").removeClass("noPrint"),$("#printFooter").removeClass("noPrint"),$(".wiki").removeClass("noPrint"),$(".storiesFooters").removeClass("noPrint"),$(".width1000").removeClass("noPrint"),$(".jsRecipePrint").removeClass("noPrint"),$(".jsRecipeClose").removeClass("noPrint"),$(".jsRecipeContainer").siblings().removeClass("noPrint"),$(".jsRecipeContainer").parent().siblings(".jsHotLinkArea").removeClass("noPrint"),$(".jsRecipeContainer").removeClass("printRecipe"),$(".jsRecipeDiv").removeClass("printRecipe"),$(".themesul").cycle("resume")):(t.parent().siblings(".jsRecipeContainer").length>0?(selector=t.parent().siblings(".jsRecipeContainer"),n=t.html(),t.html("<span>Hide<\/span>")):(selector=t.parent().parent().parent().siblings(".jsRecipeContainer"),n=t.html(),t.html("<span>Hide<\/span>").parent().siblings().children(".jsRecipeButton").html("<span>Hide<\/span>")),selector.animate({opacity:"1"}),selector.children(".jsRecipeDiv").show(),$("#topNavWrap").addClass("noPrint"),$("#normalFooter").addClass("noPrint"),$("#printFooter").addClass("noPrint"),$(".wiki").addClass("noPrint"),$(".storiesFooters").addClass("noPrint"),$(".width1000").addClass("noPrint"),$(".jsRecipePrint").addClass("noPrint"),$(".jsRecipeClose").addClass("noPrint"),$(".jsRecipeContainer").siblings().addClass("noPrint"),$(".jsRecipeContainer").parent().removeClass("noPrint"),$(".jsRecipeContainer").parent().siblings(".jsHotLinkArea").addClass("noPrint"),$(".jsRecipeContainer").parent().parent().removeClass("noPrint"),$(".jsRecipeContainer").addClass("printRecipe"),$(".jsRecipeDiv").addClass("printRecipe"),$(".themesul").cycle("pause"))}),$(".jsRecipeClose").click(function(){var t=$(this);t.parent(".jsRecipeContainer").animate({opacity:"0"}),$(".jsRecipeDiv").hide(),t.parent(".jsRecipeContainer").siblings().children(".jsRecipeButton").length>0?n==""?t.parent(".jsRecipeContainer").siblings().children(".jsRecipeButton").html("<span>View Recipes<\/span>"):t.parent(".jsRecipeContainer").siblings().children(".jsRecipeButton").html(n):n==""?t.parent(".jsRecipeContainer").siblings().children().children().children(".jsRecipeButton").html("<span>View Recipes<\/span>"):t.parent(".jsRecipeContainer").siblings().children().children().children(".jsRecipeButton").html(n),$("#topNavWrap").removeClass("noPrint"),$("#normalFooter").removeClass("noPrint"),$("#printFooter").removeClass("noPrint"),$(".wiki").removeClass("noPrint"),$(".storiesFooters").removeClass("noPrint"),$(".width1000").removeClass("noPrint"),$(".jsRecipePrint").removeClass("noPrint"),$(".jsRecipeClose").removeClass("noPrint"),$(".jsRecipeContainer").siblings().removeClass("noPrint"),$(".jsRecipeContainer").removeClass("printRecipe"),$(".jsRecipeDiv").removeClass("printRecipe")}),$(".jsRecipePrint").click(function(){var i=$(this),t='<img src="/assets/logo/cratelogo.png" alt="Crate&Barrel">'+i.parent(".jsRecipeContainer").html(),n;t=t.replace("style=",""),n=document.createElement("iframe"),n.style.visibility="hidden",n.style.height="0px",n.style.width="100%",document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write('<style type="text/css">body{font-family:Helvetica, Arial, sans-serif;width:100%;font-size:12px;}ol, ul, li {list-style: none outside none;margin: 5px 0 0;padding:0;}.b {font-weight: bold;margin: 5px 0 0;padding:0;}<\/style>'),n.contentWindow.document.write(t),navigator.appName.toUpperCase()=="MICROSOFT INTERNET EXPLORER"?n.contentWindow.document.execCommand("print",!1,null):n.contentWindow.print(),n.contentWindow.document.close()})}}}(),Crate=Crate||{},Crate.SuperCategory={config:{currentIndex:0,currentThemeImg:0},init:function(){$.history.init(Crate.SuperCategory.hashChange),$("#carousel").click(function(n){var t,i;n.preventDefault(),t=$(n.target).closest("a").attr("href"),t&&(i=t.indexOf("#"),i>=0&&(t=t.substring(i+1),$.history.load(parseInt(t,10))))});var n=0,t=setInterval(function(){n++,n==2&&(clearInterval(n),$(".jcarousel-prev-horizontal").addClass("hidden"),$(".jcarousel-next-horizontal").addClass("hidden"))},1e3);$(".theme2large .carouselWrap").hover(function(){Crate.SuperCategory.config.currentThemeImg<3&&($(".jcarousel-prev-horizontal").removeClass("hidden"),$(".jcarousel-next-horizontal").removeClass("hidden"))},function(){$(".jcarousel-prev-horizontal").addClass("hidden"),$(".jcarousel-next-horizontal").addClass("hidden")})},mainCarousel_initCallback:function(n){n.buttonNext.bind("click",function(){n.startAuto(0)}),n.buttonPrev.bind("click",function(){n.startAuto(0)}),n.clip.hover(function(){n.stopAuto()},function(){n.startAuto()})},mainCarousel_afterAnimation:function(n){n.AutoStopped&&n.startAuto(0)},secondCarousel_afterAnimation:function(n){Crate.SuperCategory.config.currentThemeImg++,n.AutoStopped&&n.startAuto(0),Crate.SuperCategory.config.currentThemeImg>=3&&($("#specialOffersThemesPost").removeClass("hidden"),$("#specialOffersThemes").addClass("hidden"))},secondCarousel_afterAnimation:function(n){Crate.SuperCategory.config.currentThemeImg++,n.AutoStopped&&n.startAuto(0)},updateFields:function(n){var i=$(".jsLarge"),r=$(".jsLargeAnchor"),t=n.attr("rel").split("|");if(t.length==3){var u=t[0],e=t[1],f=t[2];i.attr("src")!=u&&(i.attr("src",u),i.attr("alt",f),r.attr("href",e),r.attr("title",f))}},hashChange:function(n){var t=parseInt("0"+n,10),i;isNaN(t)||t==Crate.SuperCategory.config.currentIndex||(Crate.SuperCategory.config.currentIndex=t,i=$("#carousel > li:eq("+t+") > a"),i.length>0&&Crate.SuperCategory.updateFields(i))},nextImage:function(){$("#btnPrev").css("display","block");var n=$(".mainCarousel");for(i=0;i<n.length;i++)if($(n[i]).css("display")=="block"&&i<n.length-1){$(n[i]).css("display","none"),$(n[i+1]).css("display","block"),i+1==n.length-1&&$("#btnNext").css("display","none");break}},previousImage:function(){$("#btnNext").css("display","block");var n=$(".mainCarousel");for(i=0;i<n.length;i++)if($(n[i]).css("display")=="block"&&i>0){$(n[i]).css("display","none"),$(n[i-1]).css("display","block"),i-1==0&&$("#btnPrev").css("display","none");break}}},Crate.TabletSlideShow=function(){function u(){var n="scrollHorz";Modernizr.touch!==!0&&(n="fade"),t.cycle({fx:n,easing:"swing",timeout:0,speed:1e3,fit:1,width:331,before:f})}function f(){var i,u,r;if(n===!1){var f=$(this).data("index"),e=Crate.Spill.data[f],t=$(this);t.hasClass("jsProductDescriptionWrapper")&&(Crate.Omniture.tagEvar("eVar32","QuickLook Swipe: ("+t.find(".jsSku").val()+") "+t.find("#_productTitle").text()),i=t.find("#_tagOnlineAvailMsg").html(),i&&(u=/\d{5}(-\d{4})?/,r=Crate.Utilities.Cookies.getCookie("zip"),Crate.ZipCheck.updateAvailability(t,i.replace(u,r),r)))}}var n,t,i,r={init:function(){t=$(".jsSlideShowWrapper"),n=!0,i=0,Crate.Spill.config.isTablet&&(u(!0),t.swipe({left:function(){$(event.target).closest(".jsSlideShowWrapper").cycle("next")},right:function(){$(event.target).closest(".jsSlideShowWrapper").cycle("prev")}})),n=!1}};return $.templates({dimensionTemplate:'<p class="dimensions mB15" id="_productDimension">{{:dimension}}<\/p>',priceTemplate:'<p class="productPrice jsSwatchPrice" id="_productPrice">{{:formattedPrice}}<\/p>',reviewStarsTemplate:'<div class="shopSizeReviewStars mB10 pB10 fL">    <p class="reviewRatingStars">   <a id="lnkProductStarRatings" href="{{:starlinklocation}}">   <img id="_imgStarRatings" alt="{{:starimagealt}}" src="{{:starimagesrc}}" />    <span id="_totalStarRatings">{{:totalratingcount}}<\/span>    <\/a>    <\/p>    <\/div>',productDescriptionTemplate:'{{if Name}} <h1 class="jsSwatchedTitle jsShareTitle" id="_productTitle">{{:Name}}<\/h1>    {{/if}}            {{if PriceFormatted}} <p class="productPrice jsSwatchPrice" id="_productPrice">{{:PriceFormatted}}<\/p>   {{/if}}',productDimensionsTemplate:' {{if dimension}}  <p class="dimensions mB15" id="_productDimension">{{:dimension}}<\/p>  {{/if}}  {{if Sku}}  <p class="productDescriptionShortCopy" id="_productSKU">SKU {{:Sku}}<\/p>  {{/if}}'}),r}(),Crate=Crate||{},Crate.Video={config:{s7BaseURL:"http://s7d5.scene7.com/"},s7ViewerConfig:{flyoutLibraryPath:"",flyoutInitFilePath:"",assetContext:"is/content/",locale:"en",company:"",useDivSize:!1,roots:["/skins/","/s7viewers/"],cssRoot:"/skins/",serverurl:"http://s7d5.scene7.com//is/image/",isr:"http://s7d5.scene7.com/",streamingRoot:"",progressiveRoot:"http://s7d5.scene7.com//e2/"},s7EmbedInit:function(n){s7ue.viewer.viewer.path="",Crate.Video.s7ViewerConfig.company=Crate.VideoSiteSpecific.settings.VideoViewerCompany,s7ue.viewer.setTargetDiv("s7ViewerContainer"),s7ue.viewer.setAssetType("VIDEO"),s7ue.viewer.setUniversalURLConfig("Universal_Video1"),s7ue.viewer.startViewer(Crate.Video.s7ViewerConfig,n)}},Crate=Crate||{},Crate.VideoSiteSpecific={settings:{VideoViewerCompany:"Crate"}}