var Prototype={Version:"1.7_rc3",Browser:function(){var a=navigator.userAgent,b=Object.prototype.toString.call(window.opera)=="[object Opera]";return{IE:!!window.attachEvent&&!b,Opera:b,WebKit:a.indexOf("AppleWebKit/")>-1,Gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile/.test(a)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var a=window.Element||window.HTMLElement;return!!(a&&a.prototype)}(),SpecificElementExtensions:function(){if(typeof window.HTMLDivElement!==
"undefined")return true;var a=document.createElement("div"),b=document.createElement("form"),d=false;if(a.__proto__&&a.__proto__!==b.__proto__)d=true;return d}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};if(Prototype.Browser.MobileSafari)Prototype.BrowserFeatures.SpecificElementExtensions=false;
var Abstract={},Try={these:function(){for(var a,b=0,d=arguments.length;b<d;b++){var h=arguments[b];try{a=h();break}catch(m){}}return a}},Class=function(){function a(){}function b(){function m(){this.initialize.apply(this,arguments)}var q=null,w=$A(arguments);if(Object.isFunction(w[0]))q=w.shift();Object.extend(m,Class.Methods);m.superclass=q;m.subclasses=[];if(q){a.prototype=q.prototype;m.prototype=new a;q.subclasses.push(m)}q=0;for(var B=w.length;q<B;q++)m.addMethods(w[q]);if(!m.prototype.initialize)m.prototype.initialize=
Prototype.emptyFunction;return m.prototype.constructor=m}function d(m){var q=this.superclass&&this.superclass.prototype,w=Object.keys(m);if(h){m.toString!=Object.prototype.toString&&w.push("toString");m.valueOf!=Object.prototype.valueOf&&w.push("valueOf")}for(var B=0,C=w.length;B<C;B++){var X=w[B],ga=m[X];if(q&&Object.isFunction(ga)&&ga.argumentNames()[0]=="$super"){var H=ga;ga=function(N){return function(){return q[N].apply(this,arguments)}}(X).wrap(H);ga.valueOf=H.valueOf.bind(H);ga.toString=H.toString.bind(H)}this.prototype[X]=
ga}return this}var h=function(){for(var m in{toString:1})if(m==="toString")return false;return true}();return{create:b,Methods:{addMethods:d}}}();
(function(){function a(W){switch(W){case null:return s;case void 0:return x}switch(typeof W){case "boolean":return I;case "number":return z;case "string":return J}return P}function b(W,ea){for(var V in ea)W[V]=ea[V];return W}function d(W){try{if(j(W))return"undefined";if(W===null)return"null";return W.inspect?W.inspect():String(W)}catch(ea){if(ea instanceof RangeError)return"...";throw ea;}}function h(W){return m("",{"":W},[])}function m(W,ea,V){ea=ea[W];var aa=typeof ea;if(a(ea)===P&&typeof ea.toJSON===
"function")ea=ea.toJSON(W);W=o.call(ea);switch(W){case K:case v:case T:ea=ea.valueOf()}switch(ea){case null:return"null";case true:return"true";case false:return"false"}aa=typeof ea;switch(aa){case "string":return ea.inspect(true);case "number":return isFinite(ea)?String(ea):"null";case "object":aa=0;for(var oa=V.length;aa<oa;aa++)if(V[aa]===ea)throw new TypeError;V.push(ea);var qa=[];if(W===la){aa=0;for(oa=ea.length;aa<oa;aa++){var za=m(aa,ea,V);qa.push(typeof za==="undefined"?"null":za)}qa="["+
qa.join(",")+"]"}else{var cb=Object.keys(ea);aa=0;for(oa=cb.length;aa<oa;aa++){W=cb[aa];za=m(W,ea,V);typeof za!=="undefined"&&qa.push(W.inspect(true)+":"+za)}qa="{"+qa.join(",")+"}"}V.pop();return qa}}function q(W){return JSON.stringify(W)}function w(W){return $H(W).toQueryString()}function B(W){return W&&W.toHTML?W.toHTML():String.interpret(W)}function C(W){if(a(W)!==P)throw new TypeError;var ea=[];for(var V in W)W.hasOwnProperty(V)&&ea.push(V);return ea}function X(W){var ea=[];for(var V in W)ea.push(W[V]);
return ea}function ga(W){return b({},W)}function H(W){return!!(W&&W.nodeType==1)}function N(W){return o.call(W)===la}function fa(W){return W instanceof Hash}function ka(W){return typeof W==="function"}function D(W){return o.call(W)===T}function O(W){return o.call(W)===K}function j(W){return typeof W==="undefined"}var o=Object.prototype.toString,s="Null",x="Undefined",I="Boolean",z="Number",J="String",P="Object",v="[object Boolean]",K="[object Number]",T="[object String]",la="[object Array]",ra=window.JSON&&
typeof JSON.stringify==="function"&&JSON.stringify(0)==="0"&&typeof JSON.stringify(Prototype.K)==="undefined";if(typeof Array.isArray=="function"&&Array.isArray([])&&!Array.isArray({}))N=Array.isArray;b(Object,{extend:b,inspect:d,toJSON:ra?q:h,toQueryString:w,toHTML:B,keys:Object.keys||C,values:X,clone:ga,isElement:H,isArray:N,isHash:fa,isFunction:ka,isString:D,isNumber:O,isUndefined:j})})();
Object.extend(Function.prototype,function(){function a(H,N){for(var fa=H.length,ka=N.length;ka--;)H[fa+ka]=N[ka];return H}function b(H,N){H=ga.call(H,0);return a(H,N)}function d(){var H=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return H.length==1&&!H[0]?[]:H}function h(H){if(arguments.length<2&&Object.isUndefined(arguments[0]))return this;var N=this,fa=ga.call(arguments,1);return function(){var ka=
b(fa,arguments);return N.apply(H,ka)}}function m(H){var N=this,fa=ga.call(arguments,1);return function(ka){ka=a([ka||window.event],fa);return N.apply(H,ka)}}function q(){if(!arguments.length)return this;var H=this,N=ga.call(arguments,0);return function(){var fa=b(N,arguments);return H.apply(this,fa)}}function w(H){var N=this,fa=ga.call(arguments,1);H*=1E3;return window.setTimeout(function(){return N.apply(N,fa)},H)}function B(){return this.delay.apply(this,a([0.01],arguments))}function C(H){var N=
this;return function(){var fa=a([N.bind(this)],arguments);return H.apply(this,fa)}}function X(){if(this._methodized)return this._methodized;var H=this;return this._methodized=function(){var N=a([this],arguments);return H.apply(null,N)}}var ga=Array.prototype.slice;return{argumentNames:d,bind:h,bindAsEventListener:m,curry:q,delay:w,defer:B,wrap:C,methodize:X}}());
(function(a){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function d(){return this.toISOString()}if(!a.toISOString)a.toISOString=b;if(!a.toJSON)a.toJSON=d})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;
RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};
var PeriodicalExecuter=Class.create({initialize:function(a,b){this.callback=a;this.frequency=b;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1E3)},execute:function(){this.callback(this)},stop:function(){if(this.timer){clearInterval(this.timer);this.timer=null}},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=true;this.execute();this.currentlyExecuting=false}catch(a){this.currentlyExecuting=
false;throw a;}}});Object.extend(String,{interpret:function(a){return a==null?"":String(a)},specialChar:{"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,function(){function a(V){if(Object.isFunction(V))return V;var aa=new Template(V);return function(oa){return aa.evaluate(oa)}}function b(V,aa){var oa="",qa=this,za;aa=a(aa);if(Object.isString(V))V=RegExp.escape(V);if(!(V.length||V.source)){aa=aa("");return aa+qa.split("").join(aa)+aa}for(;qa.length>0;)if(za=qa.match(V)){oa+=qa.slice(0,za.index);oa+=String.interpret(aa(za));qa=qa.slice(za.index+za[0].length)}else{oa+=qa;qa=""}return oa}function d(V,aa,oa){aa=a(aa);oa=
Object.isUndefined(oa)?1:oa;return this.gsub(V,function(qa){if(--oa<0)return qa[0];return aa(qa)})}function h(V,aa){this.gsub(V,aa);return String(this)}function m(V,aa){V=V||30;aa=Object.isUndefined(aa)?"...":aa;return this.length>V?this.slice(0,V-aa.length)+aa:String(this)}function q(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function w(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function B(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}
function C(){var V=new RegExp(Prototype.ScriptFragment,"img"),aa=new RegExp(Prototype.ScriptFragment,"im");return(this.match(V)||[]).map(function(oa){return(oa.match(aa)||["",""])[1]})}function X(){return this.extractScripts().map(function(V){return eval(V)})}function ga(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function H(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function N(V){var aa=this.strip().match(/([^?#]*)(#.*)?$/);
if(!aa)return{};return aa[1].split(V||"&").inject({},function(oa,qa){if((qa=qa.split("="))[0]){var za=decodeURIComponent(qa.shift());qa=qa.length>1?qa.join("="):qa[0];if(qa!=undefined)qa=decodeURIComponent(qa);if(za in oa){Object.isArray(oa[za])||(oa[za]=[oa[za]]);oa[za].push(qa)}else oa[za]=qa}return oa})}function fa(){return this.split("")}function ka(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function D(V){return V<1?"":(new Array(V+1)).join(this)}
function O(){return this.replace(/-+(.)?/g,function(V,aa){return aa?aa.toUpperCase():""})}function j(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function o(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function s(){return this.replace(/_/g,"-")}function x(V){var aa=this.replace(/[\x00-\x1f\\]/g,function(oa){if(oa in String.specialChar)return String.specialChar[oa];return"\\u00"+
oa.charCodeAt().toPaddedString(2,16)});if(V)return'"'+aa.replace(/"/g,'\\"')+'"';return"'"+aa.replace(/'/g,"\\'")+"'"}function I(V){return this.replace(V||Prototype.JSONFilter,"$1")}function z(){var V=this;if(V.blank())return false;V=V.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");V=V.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");V=V.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(V)}function J(V){var aa=this.unfilterJSON(),oa=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
if(oa.test(aa))aa=aa.replace(oa,function(za){return"\\u"+("0000"+za.charCodeAt(0).toString(16)).slice(-4)});try{if(!V||aa.isJSON())return eval("("+aa+")")}catch(qa){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());}function P(){var V=this.unfilterJSON();return JSON.parse(V)}function v(V){return this.indexOf(V)>-1}function K(V){return this.lastIndexOf(V,0)===0}function T(V){var aa=this.length-V.length;return aa>=0&&this.indexOf(V,aa)===aa}function la(){return this==""}function ra(){return/^\s*$/.test(this)}
function W(V,aa){return(new Template(this,aa)).evaluate(V)}var ea=window.JSON&&typeof JSON.parse==="function"&&JSON.parse('{"test": true}').test;return{gsub:b,sub:d,scan:h,truncate:m,strip:String.prototype.trim||q,stripTags:w,stripScripts:B,extractScripts:C,evalScripts:X,escapeHTML:ga,unescapeHTML:H,toQueryParams:N,parseQuery:N,toArray:fa,succ:ka,times:D,camelize:O,capitalize:j,underscore:o,dasherize:s,inspect:x,unfilterJSON:I,isJSON:z,evalJSON:ea?P:J,include:v,startsWith:K,endsWith:T,empty:la,blank:ra,
interpolate:W}}());
var Template=Class.create({initialize:function(a,b){this.template=a.toString();this.pattern=b||Template.Pattern},evaluate:function(a){if(a&&Object.isFunction(a.toTemplateReplacements))a=a.toTemplateReplacements();return this.template.gsub(this.pattern,function(b){if(a==null)return b[1]+"";var d=b[1]||"";if(d=="\\")return b[2];var h=a,m=b[3],q=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;b=q.exec(m);if(b==null)return d;for(;b!=null;){var w=b[1].startsWith("[")?b[2].replace(/\\\\]/g,"]"):b[1];h=h[w];if(null==
h||""==b[3])break;m=m.substring("["==b[3]?b[1].length:b[0].length);b=q.exec(m)}return d+String.interpret(h)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;
var $break={},Enumerable=function(){function a(z,J){var P=0;try{this._each(function(K){z.call(J,K,P++)})}catch(v){if(v!=$break)throw v;}return this}function b(z,J,P){var v=-z,K=[],T=this.toArray();if(z<1)return T;for(;(v+=z)<T.length;)K.push(T.slice(v,v+z));return K.collect(J,P)}function d(z,J){z=z||Prototype.K;var P=true;this.each(function(v,K){P=P&&!!z.call(J,v,K);if(!P)throw $break;});return P}function h(z,J){z=z||Prototype.K;var P=false;this.each(function(v,K){if(P=!!z.call(J,v,K))throw $break;
});return P}function m(z,J){z=z||Prototype.K;var P=[];this.each(function(v,K){P.push(z.call(J,v,K))});return P}function q(z,J){var P;this.each(function(v,K){if(z.call(J,v,K)){P=v;throw $break;}});return P}function w(z,J){var P=[];this.each(function(v,K){z.call(J,v,K)&&P.push(v)});return P}function B(z,J,P){J=J||Prototype.K;var v=[];if(Object.isString(z))z=new RegExp(RegExp.escape(z));this.each(function(K,T){z.match(K)&&v.push(J.call(P,K,T))});return v}function C(z){if(Object.isFunction(this.indexOf))if(this.indexOf(z)!=
-1)return true;var J=false;this.each(function(P){if(P==z){J=true;throw $break;}});return J}function X(z,J){J=Object.isUndefined(J)?null:J;return this.eachSlice(z,function(P){for(;P.length<z;)P.push(J);return P})}function ga(z,J,P){this.each(function(v,K){z=J.call(P,z,v,K)});return z}function H(z){var J=$A(arguments).slice(1);return this.map(function(P){return P[z].apply(P,J)})}function N(z,J){z=z||Prototype.K;var P;this.each(function(v,K){v=z.call(J,v,K);if(P==null||v>=P)P=v});return P}function fa(z,
J){z=z||Prototype.K;var P;this.each(function(v,K){v=z.call(J,v,K);if(P==null||v<P)P=v});return P}function ka(z,J){z=z||Prototype.K;var P=[],v=[];this.each(function(K,T){(z.call(J,K,T)?P:v).push(K)});return[P,v]}function D(z){var J=[];this.each(function(P){J.push(P[z])});return J}function O(z,J){var P=[];this.each(function(v,K){z.call(J,v,K)||P.push(v)});return P}function j(z,J){return this.map(function(P,v){return{value:P,criteria:z.call(J,P,v)}}).sort(function(P,v){P=P.criteria;v=v.criteria;return P<
v?-1:P>v?1:0}).pluck("value")}function o(){return this.map()}function s(){var z=Prototype.K,J=$A(arguments);if(Object.isFunction(J.last()))z=J.pop();var P=[this].concat(J).map($A);return this.map(function(v,K){return z(P.pluck(K))})}function x(){return this.toArray().length}function I(){return"#<Enumerable:"+this.toArray().inspect()+">"}return{each:a,eachSlice:b,all:d,every:d,any:h,some:h,collect:m,map:m,detect:q,findAll:w,select:w,filter:w,grep:B,include:C,member:C,inGroupsOf:X,inject:ga,invoke:H,
max:N,min:fa,partition:ka,pluck:D,reject:O,sortBy:j,toArray:o,entries:o,zip:s,size:x,inspect:I,find:q}}();function $A(a){if(!a)return[];if("toArray"in Object(a))return a.toArray();for(var b=a.length||0,d=new Array(b);b--;)d[b]=a[b];return d}function $w(a){if(!Object.isString(a))return[];return(a=a.strip())?a.split(/\s+/):[]}Array.from=$A;
(function(){function a(s){for(var x=0,I=this.length;x<I;x++)s(this[x])}function b(){this.length=0;return this}function d(){return this[0]}function h(){return this[this.length-1]}function m(){return this.select(function(s){return s!=null})}function q(){return this.inject([],function(s,x){if(Object.isArray(x))return s.concat(x.flatten());s.push(x);return s})}function w(){var s=j.call(arguments,0);return this.select(function(x){return!s.include(x)})}function B(s){return(s===false?this.toArray():this)._reverse()}
function C(s){return this.inject([],function(x,I,z){if(0==z||(s?x.last()!=I:!x.include(I)))x.push(I);return x})}function X(s){return this.uniq().findAll(function(x){return s.detect(function(I){return x===I})})}function ga(){return j.call(this,0)}function H(){return this.length}function N(){return"["+this.map(Object.inspect).join(", ")+"]"}function fa(s,x){x||(x=0);var I=this.length;if(x<0)x=I+x;for(;x<I;x++)if(this[x]===s)return x;return-1}function ka(s,x){x=isNaN(x)?this.length:(x<0?this.length+
x:x)+1;s=this.slice(0,x).reverse().indexOf(s);return s<0?s:x-s-1}function D(){for(var s=j.call(this,0),x,I=0,z=arguments.length;I<z;I++){x=arguments[I];if(Object.isArray(x)&&!("callee"in x))for(var J=0,P=x.length;J<P;J++)s.push(x[J]);else s.push(x)}return s}var O=Array.prototype,j=O.slice,o=O.forEach;o||(o=a);Object.extend(O,Enumerable);if(!O._reverse)O._reverse=O.reverse;Object.extend(O,{_each:o,clear:b,first:d,last:h,compact:m,flatten:q,without:w,reverse:B,uniq:C,intersect:X,clone:ga,toArray:ga,
size:H,inspect:N});if(function(){return[].concat(arguments)[0][0]!==1}(1,2))O.concat=D;if(!O.indexOf)O.indexOf=fa;if(!O.lastIndexOf)O.lastIndexOf=ka})();function $H(a){return new Hash(a)}
var Hash=Class.create(Enumerable,function(){function a(D){this._object=Object.isHash(D)?D.toObject():Object.clone(D)}function b(D){for(var O in this._object){var j=this._object[O],o=[O,j];o.key=O;o.value=j;D(o)}}function d(D,O){return this._object[D]=O}function h(D){if(this._object[D]!==Object.prototype[D])return this._object[D]}function m(D){var O=this._object[D];delete this._object[D];return O}function q(){return Object.clone(this._object)}function w(){return this.pluck("key")}function B(){return this.pluck("value")}
function C(D){var O=this.detect(function(j){return j.value===D});return O&&O.key}function X(D){return this.clone().update(D)}function ga(D){return(new Hash(D)).inject(this,function(O,j){O.set(j.key,j.value);return O})}function H(D,O){if(Object.isUndefined(O))return D;return D+"="+encodeURIComponent(String.interpret(O))}function N(){return this.inject([],function(D,O){var j=encodeURIComponent(O.key);if((O=O.value)&&typeof O=="object"){if(Object.isArray(O))return D.concat(O.map(H.curry(j)))}else D.push(H(j,
O));return D}).join("&")}function fa(){return"#<Hash:{"+this.map(function(D){return D.map(Object.inspect).join(": ")}).join(", ")+"}>"}function ka(){return new Hash(this)}return{initialize:a,_each:b,set:d,get:h,unset:m,toObject:q,toTemplateReplacements:q,keys:w,values:B,index:C,merge:X,update:ga,toQueryString:N,inspect:fa,toJSON:q,clone:ka}}());Hash.from=$H;
Object.extend(Number.prototype,function(){function a(){return this.toPaddedString(2,16)}function b(){return this+1}function d(C,X){$R(0,this,true).each(C,X);return this}function h(C,X){X=this.toString(X||10);return"0".times(C-X.length)+X}function m(){return Math.abs(this)}function q(){return Math.round(this)}function w(){return Math.ceil(this)}function B(){return Math.floor(this)}return{toColorPart:a,succ:b,times:d,toPaddedString:h,abs:m,round:q,ceil:w,floor:B}}());
function $R(a,b,d){return new ObjectRange(a,b,d)}
var ObjectRange=Class.create(Enumerable,function(){function a(h,m,q){this.start=h;this.end=m;this.exclusive=q}function b(h){for(var m=this.start;this.include(m);){h(m);m=m.succ()}}function d(h){if(h<this.start)return false;if(this.exclusive)return h<this.end;return h<=this.end}return{initialize:a,_each:b,include:d}}()),Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||
false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(a){this.responders._each(a)},register:function(a){this.include(a)||this.responders.push(a)},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(a,b,d,h){this.each(function(m){if(Object.isFunction(m[a]))try{m[a].apply(m,[b,d,h])}catch(q){}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});
Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:true,evalJS:true};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();if(Object.isHash(this.options.parameters))this.options.parameters=this.options.parameters.toObject()}});
Ajax.Request=Class.create(Ajax.Base,{_complete:false,initialize:function($super,b,d){$super(d);this.transport=Ajax.getTransport();this.request(b)},request:function(a){this.url=a;this.method=this.options.method;a=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);if(!["get","post"].include(this.method)){a+=(a?"&":"")+"_method="+this.method;this.method="post"}if(a)if(this.method=="get")this.url+=(this.url.include("?")?"&":"?")+a;else if(/Konqueror|Safari|KHTML/.test(navigator.userAgent))a+=
"&_=";this.parameters=a.toQueryParams();try{var b=new Ajax.Response(this);this.options.onCreate&&this.options.onCreate(b);Ajax.Responders.dispatch("onCreate",this,b);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?this.options.postBody||a:null;this.transport.send(this.body);!this.options.asynchronous&&
this.transport.overrideMimeType&&this.onStateChange()}catch(d){this.dispatchException(d)}},onStateChange:function(){var a=this.transport.readyState;a>1&&!(a==4&&this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var a={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){a["Content-type"]=this.options.contentType+(this.options.encoding?
"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005)a.Connection="close"}if(typeof this.options.requestHeaders=="object"){var b=this.options.requestHeaders;if(Object.isFunction(b.push))for(var d=0,h=b.length;d<h;d+=2)a[b[d]]=b[d+1];else $H(b).each(function(q){a[q.key]=q.value})}for(var m in a)this.transport.setRequestHeader(m,a[m])},success:function(){var a=this.getStatus();return!a||a>=200&&a<300},getStatus:function(){try{return this.transport.status||
0}catch(a){return 0}},respondToReadyState:function(a){a=Ajax.Request.Events[a];var b=new Ajax.Response(this);if(a=="Complete"){try{this._complete=true;(this.options["on"+b.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(b,b.headerJSON)}catch(d){this.dispatchException(d)}var h=b.getHeader("Content-type");if(this.options.evalJS=="force"||this.options.evalJS&&this.isSameOrigin()&&h&&h.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))this.evalResponse()}try{(this.options["on"+
a]||Prototype.emptyFunction)(b,b.headerJSON);Ajax.Responders.dispatch("on"+a,this,b,b.headerJSON)}catch(m){this.dispatchException(m)}if(a=="Complete")this.transport.onreadystatechange=Prototype.emptyFunction},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return!a||a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(a){try{return this.transport.getResponseHeader(a)||
null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(a){this.dispatchException(a)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];
Ajax.Response=Class.create({initialize:function(a){this.request=a;a=this.transport=a.transport;var b=this.readyState=a.readyState;if(b>2&&!Prototype.Browser.IE||b==4){this.status=this.getStatus();this.statusText=this.getStatusText();this.responseText=String.interpret(a.responseText);this.headerJSON=this._getHeaderJSON()}if(b==4){a=a.responseXML;this.responseXML=Object.isUndefined(a)?null:a;this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,
getStatusText:function(){try{return this.transport.statusText||""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a)return null;a=decodeURIComponent(escape(a));try{return a.evalJSON(this.request.options.sanitizeJSON||
!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}},_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||a.evalJSON!="force"&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}});
Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,b,d,h){this.container={success:b.success||b,failure:b.failure||(b.success?null:b)};h=Object.clone(h);var m=h.onComplete;h.onComplete=function(q,w){this.updateContent(q.responseText);Object.isFunction(m)&&m(q,w)}.bind(this);$super(d,h)},updateContent:function(a){var b=this.container[this.success()?"success":"failure"],d=this.options;d.evalScripts||(a=a.stripScripts());if(b=$(b))if(d.insertion)if(Object.isString(d.insertion)){var h=
{};h[d.insertion]=a;b.insert(h)}else d.insertion(b,a);else b.update(a)}});
Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,b,d,h){$super(h);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=b;this.url=d;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},
updateComplete:function(a){if(this.options.decay){this.decay=a.responseText==this.lastText?this.decay*this.options.decay:1;this.lastText=a.responseText}this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});
function $(a){if(arguments.length>1){for(var b=0,d=[],h=arguments.length;b<h;b++)d.push($(arguments[b]));return d}if(Object.isString(a))a=document.getElementById(a);return Element.extend(a)}if(Prototype.BrowserFeatures.XPath)document._getElementsByXPath=function(a,b){var d=[];a=document.evaluate(a,$(b)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);b=0;for(var h=a.snapshotLength;b<h;b++)d.push(Element.extend(a.snapshotItem(b)));return d};if(!Node)var Node={};
Node.ELEMENT_NODE||Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});
(function(a){var b=function(){try{var h=document.createElement('<input name="x">');return h.tagName.toLowerCase()==="input"&&h.name==="x"}catch(m){return false}}(),d=a.Element;a.Element=function(h,m){m=m||{};h=h.toLowerCase();var q=Element.cache;if(b&&m.name){h="<"+h+' name="'+m.name+'">';delete m.name;return Element.writeAttribute(document.createElement(h),m)}q[h]||(q[h]=Element.extend(document.createElement(h)));h="type"in m?document.createElement(h):q[h].cloneNode(false);return Element.writeAttribute(h,
m)};Object.extend(a.Element,d||{});if(d)a.Element.prototype=d.prototype})(this);Element.idCounter=1;Element.cache={};Element._purgeElement=function(a){var b=a._prototypeUID;if(b){Element.stopObserving(a);a._prototypeUID=void 0;delete Element.Storage[b]}};
Element.Methods={visible:function(a){return $(a).style.display!="none"},toggle:function(a){a=$(a);Element[Element.visible(a)?"hide":"show"](a);return a},hide:function(a){a=$(a);a.style.display="none";return a},show:function(a){a=$(a);a.style.display="";return a},remove:function(a){a=$(a);a.parentNode.removeChild(a);return a},update:function(){function a(m,q){m=$(m);for(var w=Element._purgeElement,B=m.getElementsByTagName("*"),C=B.length;C--;)w(B[C]);if(q&&q.toElement)q=q.toElement();if(Object.isElement(q))return m.update().insert(q);
q=Object.toHTML(q);w=m.tagName.toUpperCase();if(w==="SCRIPT"&&h){m.text=q;return m}if(b||d)if(w in Element._insertionTranslations.tags){for(;m.firstChild;)m.removeChild(m.firstChild);Element._getContentFromAnonymousElement(w,q.stripScripts()).each(function(X){m.appendChild(X)})}else m.innerHTML=q.stripScripts();else m.innerHTML=q.stripScripts();q.evalScripts.bind(q).defer();return m}var b=function(){var m=document.createElement("select"),q=true;m.innerHTML='<option value="test">test</option>';if(m.options&&
m.options[0])q=m.options[0].nodeName.toUpperCase()!=="OPTION";return q}(),d=function(){try{var m=document.createElement("table");if(m&&m.tBodies){m.innerHTML="<tbody><tr><td>test</td></tr></tbody>";return typeof m.tBodies[0]=="undefined"}}catch(q){return true}}(),h=function(){var m=document.createElement("script"),q=false;try{m.appendChild(document.createTextNode(""));q=!m.firstChild||m.firstChild&&m.firstChild.nodeType!==3}catch(w){q=true}return q}();return a}(),replace:function(a,b){a=$(a);if(b&&
b.toElement)b=b.toElement();else if(!Object.isElement(b)){b=Object.toHTML(b);var d=a.ownerDocument.createRange();d.selectNode(a);b.evalScripts.bind(b).defer();b=d.createContextualFragment(b.stripScripts())}a.parentNode.replaceChild(b,a);return a},insert:function(a,b){a=$(a);if(Object.isString(b)||Object.isNumber(b)||Object.isElement(b)||b&&(b.toElement||b.toHTML))b={bottom:b};var d,h,m;for(var q in b){d=b[q];q=q.toLowerCase();h=Element._insertionTranslations[q];if(d&&d.toElement)d=d.toElement();if(Object.isElement(d))h(a,
d);else{d=Object.toHTML(d);m=(q=="before"||q=="after"?a.parentNode:a).tagName.toUpperCase();m=Element._getContentFromAnonymousElement(m,d.stripScripts());if(q=="top"||q=="after")m.reverse();m.each(h.curry(a));d.evalScripts.bind(d).defer()}}return a},wrap:function(a,b,d){a=$(a);if(Object.isElement(b))$(b).writeAttribute(d||{});else b=Object.isString(b)?new Element(b,d):new Element("div",b);a.parentNode&&a.parentNode.replaceChild(b,a);b.appendChild(a);return b},inspect:function(a){a=$(a);var b="<"+
a.tagName.toLowerCase();$H({id:"id",className:"class"}).each(function(d){var h=d.first();d=d.last();if(h=(a[h]||"").toString())b+=" "+d+"="+h.inspect(true)});return b+">"},recursivelyCollect:function(a,b,d){a=$(a);d=d||-1;for(var h=[];a=a[b];){a.nodeType==1&&h.push(Element.extend(a));if(h.length==d)break}return h},ancestors:function(a){return Element.recursivelyCollect(a,"parentNode")},descendants:function(a){return Element.select(a,"*")},firstDescendant:function(a){for(a=$(a).firstChild;a&&a.nodeType!=
1;)a=a.nextSibling;return $(a)},immediateDescendants:function(a){var b=[];for(a=$(a).firstChild;a;){a.nodeType===1&&b.push(Element.extend(a));a=a.nextSibling}return b},previousSiblings:function(a){return Element.recursivelyCollect(a,"previousSibling")},nextSiblings:function(a){return Element.recursivelyCollect(a,"nextSibling")},siblings:function(a){a=$(a);return Element.previousSiblings(a).reverse().concat(Element.nextSiblings(a))},match:function(a,b){a=$(a);if(Object.isString(b))return Prototype.Selector.match(a,
b);return b.match(a)},up:function(a,b,d){a=$(a);if(arguments.length==1)return $(a.parentNode);var h=Element.ancestors(a);return Object.isNumber(b)?h[b]:Prototype.Selector.find(h,b,d)},down:function(a,b,d){a=$(a);if(arguments.length==1)return Element.firstDescendant(a);return Object.isNumber(b)?Element.descendants(a)[b]:Element.select(a,b)[d||0]},previous:function(a,b,d){a=$(a);if(Object.isNumber(b)){d=b;b=false}Object.isNumber(d)||(d=0);return b?Prototype.Selector.find(a.previousSiblings(),b,d):a.recursivelyCollect("previousSibling",
d+1)[d]},next:function(a,b,d){a=$(a);if(Object.isNumber(b)){d=b;b=false}Object.isNumber(d)||(d=0);if(b)return Prototype.Selector.find(a.nextSiblings(),b,d);else{Object.isNumber(d);return a.recursivelyCollect("nextSibling",d+1)[d]}},select:function(a){a=$(a);var b=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(b,a)},adjacent:function(a){a=$(a);var b=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(b,a.parentNode).without(a)},identify:function(a){a=
$(a);var b=Element.readAttribute(a,"id");if(b)return b;do b="anonymous_element_"+Element.idCounter++;while($(b));Element.writeAttribute(a,"id",b);return b},readAttribute:function(a,b){a=$(a);if(Prototype.Browser.IE){var d=Element._attributeTranslations.read;if(d.values[b])return d.values[b](a,b);if(d.names[b])b=d.names[b];if(b.include(":"))return!a.attributes||!a.attributes[b]?null:a.attributes[b].value}return a.getAttribute(b)},writeAttribute:function(a,b,d){a=$(a);var h={},m=Element._attributeTranslations.write;
if(typeof b=="object")h=b;else h[b]=Object.isUndefined(d)?true:d;for(var q in h){b=m.names[q]||q;d=h[q];if(m.values[q])b=m.values[q](a,d);if(d===false||d===null)a.removeAttribute(b);else d===true?a.setAttribute(b,b):a.setAttribute(b,d)}return a},getHeight:function(a){return Element.getDimensions(a).height},getWidth:function(a){return Element.getDimensions(a).width},classNames:function(a){return new Element.ClassNames(a)},hasClassName:function(a,b){if(a=$(a)){a=a.className;return a.length>0&&(a==b||
(new RegExp("(^|\\s)"+b+"(\\s|$)")).test(a))}},addClassName:function(a,b){if(a=$(a)){Element.hasClassName(a,b)||(a.className+=(a.className?" ":"")+b);return a}},removeClassName:function(a,b){if(a=$(a)){a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," ").strip();return a}},toggleClassName:function(a,b){if(a=$(a))return Element[Element.hasClassName(a,b)?"removeClassName":"addClassName"](a,b)},cleanWhitespace:function(a){a=$(a);for(var b=a.firstChild;b;){var d=b.nextSibling;b.nodeType==
3&&!/\S/.test(b.nodeValue)&&a.removeChild(b);b=d}return a},empty:function(a){return $(a).innerHTML.blank()},descendantOf:function(a,b){a=$(a);b=$(b);if(a.compareDocumentPosition)return(a.compareDocumentPosition(b)&8)===8;if(b.contains)return b.contains(a)&&b!==a;for(;a=a.parentNode;)if(a==b)return true;return false},scrollTo:function(a){a=$(a);var b=Element.cumulativeOffset(a);window.scrollTo(b[0],b[1]);return a},getStyle:function(a,b){a=$(a);b=b=="float"?"cssFloat":b.camelize();var d=a.style[b];
if(!d||d=="auto")d=(a=document.defaultView.getComputedStyle(a,null))?a[b]:null;if(b=="opacity")return d?parseFloat(d):1;return d=="auto"?null:d},getOpacity:function(a){return $(a).getStyle("opacity")},setStyle:function(a,b){a=$(a);var d=a.style;if(Object.isString(b)){a.style.cssText+=";"+b;return b.include("opacity")?a.setOpacity(b.match(/opacity:\s*(\d?\.?\d*)/)[1]):a}for(var h in b)if(h=="opacity")a.setOpacity(b[h]);else d[h=="float"||h=="cssFloat"?Object.isUndefined(d.styleFloat)?"cssFloat":"styleFloat":
h]=b[h];return a},setOpacity:function(a,b){a=$(a);a.style.opacity=b==1||b===""?"":b<1.0E-5?0:b;return a},makePositioned:function(a){a=$(a);var b=Element.getStyle(a,"position");if(b=="static"||!b){a._madePositioned=true;a.style.position="relative";if(Prototype.Browser.Opera){a.style.top=0;a.style.left=0}}return a},undoPositioned:function(a){a=$(a);if(a._madePositioned){a._madePositioned=undefined;a.style.position=a.style.top=a.style.left=a.style.bottom=a.style.right=""}return a},makeClipping:function(a){a=
$(a);if(a._overflow)return a;a._overflow=Element.getStyle(a,"overflow")||"auto";if(a._overflow!=="hidden")a.style.overflow="hidden";return a},undoClipping:function(a){a=$(a);if(!a._overflow)return a;a.style.overflow=a._overflow=="auto"?"":a._overflow;a._overflow=null;return a},clonePosition:function(a,b,d){d=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},d||{});b=$(b);var h=Element.viewportOffset(b),m=[0,0],q=null;a=$(a);if(Element.getStyle(a,"position")==
"absolute"){q=Element.getOffsetParent(a);m=Element.viewportOffset(q)}if(q==document.body){m[0]-=document.body.offsetLeft;m[1]-=document.body.offsetTop}if(d.setLeft)a.style.left=h[0]-m[0]+d.offsetLeft+"px";if(d.setTop)a.style.top=h[1]-m[1]+d.offsetTop+"px";if(d.setWidth)a.style.width=b.offsetWidth+"px";if(d.setHeight)a.style.height=b.offsetHeight+"px";return a}};Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants});
Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}};
if(Prototype.Browser.Opera){Element.Methods.getStyle=Element.Methods.getStyle.wrap(function(a,b,d){switch(d){case "left":case "top":case "right":case "bottom":if(a(b,"position")==="static")return null;case "height":case "width":if(!Element.visible(b))return null;var h=parseInt(a(b,d),10);if(h!==b["offset"+d.capitalize()])return h+"px";return(d==="height"?["border-top-width","padding-top","padding-bottom","border-bottom-width"]:["border-left-width","padding-left","padding-right","border-right-width"]).inject(h,
function(m,q){q=a(b,q);return q===null?m:m-parseInt(q,10)})+"px";default:return a(b,d)}});Element.Methods.readAttribute=Element.Methods.readAttribute.wrap(function(a,b,d){if(d==="title")return b.title;return a(b,d)})}else if(Prototype.Browser.IE){Element.Methods.getStyle=function(a,b){a=$(a);b=b=="float"||b=="cssFloat"?"styleFloat":b.camelize();var d=a.style[b];if(!d&&a.currentStyle)d=a.currentStyle[b];if(b=="opacity"){if(d=(a.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/))if(d[1])return parseFloat(d[1])/
100;return 1}if(d=="auto"){if((b=="width"||b=="height")&&a.getStyle("display")!="none")return a["offset"+b.capitalize()]+"px";return null}return d};Element.Methods.setOpacity=function(a,b){function d(q){return q.replace(/alpha\([^\)]*\)/gi,"")}a=$(a);var h=a.currentStyle;if(h&&!h.hasLayout||!h&&a.style.zoom=="normal")a.style.zoom=1;h=a.getStyle("filter");var m=a.style;if(b==1||b===""){(h=d(h))?(m.filter=h):m.removeAttribute("filter");return a}else if(b<1.0E-5)b=0;m.filter=d(h)+"alpha(opacity="+b*
100+")";return a};Element._attributeTranslations=function(){var a="className",b="for",d=document.createElement("div");d.setAttribute(a,"x");if(d.className!=="x"){d.setAttribute("class","x");if(d.className==="x")a="class"}d=null;d=document.createElement("label");d.setAttribute(b,"x");if(d.htmlFor!=="x"){d.setAttribute("htmlFor","x");if(d.htmlFor==="x")b="htmlFor"}d=null;return{read:{names:{"class":a,className:a,"for":b,htmlFor:b},values:{_getAttr:function(h,m){return h.getAttribute(m)},_getAttr2:function(h,
m){return h.getAttribute(m,2)},_getAttrNode:function(h,m){return(h=h.getAttributeNode(m))?h.value:""},_getEv:function(){var h=document.createElement("div"),m;h.onclick=Prototype.emptyFunction;h=h.getAttribute("onclick");if(String(h).indexOf("{")>-1)m=function(q,w){w=q.getAttribute(w);if(!w)return null;w=w.toString();w=w.split("{")[1];w=w.split("}")[0];return w.strip()};else if(h==="")m=function(q,w){w=q.getAttribute(w);if(!w)return null;return w.strip()};h=null;return m}(),_flag:function(h,m){return $(h).hasAttribute(m)?
m:null},style:function(h){return h.style.cssText.toLowerCase()},title:function(h){return h.title}}}}}();Element._attributeTranslations.write={names:Object.extend({cellpadding:"cellPadding",cellspacing:"cellSpacing"},Element._attributeTranslations.read.names),values:{checked:function(a,b){a.checked=!!b},style:function(a,b){a.style.cssText=b?b:""}}};Element._attributeTranslations.has={};$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder").each(function(a){Element._attributeTranslations.write.names[a.toLowerCase()]=
a;Element._attributeTranslations.has[a.toLowerCase()]=a});(function(a){Object.extend(a,{href:a._getAttr2,src:a._getAttr2,type:a._getAttr,action:a._getAttrNode,disabled:a._flag,checked:a._flag,readonly:a._flag,multiple:a._flag,onload:a._getEv,onunload:a._getEv,onclick:a._getEv,ondblclick:a._getEv,onmousedown:a._getEv,onmouseup:a._getEv,onmouseover:a._getEv,onmousemove:a._getEv,onmouseout:a._getEv,onfocus:a._getEv,onblur:a._getEv,onkeypress:a._getEv,onkeydown:a._getEv,onkeyup:a._getEv,onsubmit:a._getEv,
onreset:a._getEv,onselect:a._getEv,onchange:a._getEv})})(Element._attributeTranslations.read.values);Prototype.BrowserFeatures.ElementExtensions&&function(){function a(b){b=b.getElementsByTagName("*");for(var d=[],h=0,m;m=b[h];h++)m.tagName!=="!"&&d.push(m);return d}Element.Methods.down=function(b,d,h){b=$(b);if(arguments.length==1)return b.firstDescendant();return Object.isNumber(d)?a(b)[d]:Element.select(b,d)[h||0]}}()}else if(Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent))Element.Methods.setOpacity=
function(a,b){a=$(a);a.style.opacity=b==1?0.999999:b===""?"":b<1.0E-5?0:b;return a};else if(Prototype.Browser.WebKit)Element.Methods.setOpacity=function(a,b){a=$(a);a.style.opacity=b==1||b===""?"":b<1.0E-5?0:b;if(b==1)if(a.tagName.toUpperCase()=="IMG"&&a.width){a.width++;a.width--}else try{var d=document.createTextNode(" ");a.appendChild(d);a.removeChild(d)}catch(h){}return a};
if("outerHTML"in document.documentElement)Element.Methods.replace=function(a,b){a=$(a);if(b&&b.toElement)b=b.toElement();if(Object.isElement(b)){a.parentNode.replaceChild(b,a);return a}b=Object.toHTML(b);var d=a.parentNode,h=d.tagName.toUpperCase();if(Element._insertionTranslations.tags[h]){var m=a.next();h=Element._getContentFromAnonymousElement(h,b.stripScripts());d.removeChild(a);m?h.each(function(q){d.insertBefore(q,m)}):h.each(function(q){d.appendChild(q)})}else a.outerHTML=b.stripScripts();
b.evalScripts.bind(b).defer();return a};Element._returnOffset=function(a,b){var d=[a,b];d.left=a;d.top=b;return d};Element._getContentFromAnonymousElement=function(a,b){var d=new Element("div");if(a=Element._insertionTranslations.tags[a]){d.innerHTML=a[0]+b+a[1];for(b=a[2];b--;)d=d.firstChild}else d.innerHTML=b;return $A(d.childNodes)};
Element._insertionTranslations={before:function(a,b){a.parentNode.insertBefore(b,a)},top:function(a,b){a.insertBefore(b,a.firstChild)},bottom:function(a,b){a.appendChild(b)},after:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};
(function(){var a=Element._insertionTranslations.tags;Object.extend(a,{THEAD:a.TBODY,TFOOT:a.TBODY,TH:a.TD})})();Element.Methods.Simulated={hasAttribute:function(a,b){b=Element._attributeTranslations.has[b]||b;a=$(a).getAttributeNode(b);return!!(a&&a.specified)}};Element.Methods.ByTag={};Object.extend(Element,Element.Methods);
(function(a){if(!Prototype.BrowserFeatures.ElementExtensions&&a.__proto__){window.HTMLElement={};window.HTMLElement.prototype=a.__proto__;Prototype.BrowserFeatures.ElementExtensions=true}})(document.createElement("div"));
Element.extend=function(){function a(q){if(typeof window.Element!="undefined"){var w=window.Element.prototype;if(w){var B="_"+(Math.random()+"").slice(2);q=document.createElement(q);w[B]="x";q=q[B]!=="x";delete w[B];return q}}return false}function b(q,w){for(var B in w){var C=w[B];if(Object.isFunction(C)&&!(B in q))q[B]=C.methodize()}}var d=a("object");if(Prototype.BrowserFeatures.SpecificElementExtensions){if(d)return function(q){if(q&&typeof q._extendedByPrototype=="undefined"){var w=q.tagName;
if(w&&/^(?:object|applet|embed)$/i.test(w)){b(q,Element.Methods);b(q,Element.Methods.Simulated);b(q,Element.Methods.ByTag[w.toUpperCase()])}}return q};return Prototype.K}var h={},m=Element.Methods.ByTag;d=Object.extend(function(q){if(!q||typeof q._extendedByPrototype!="undefined"||q.nodeType!=1||q==window)return q;var w=Object.clone(h),B=q.tagName.toUpperCase();m[B]&&Object.extend(w,m[B]);b(q,w);q._extendedByPrototype=Prototype.emptyFunction;return q},{refresh:function(){if(!Prototype.BrowserFeatures.ElementExtensions){Object.extend(h,
Element.Methods);Object.extend(h,Element.Methods.Simulated)}}});d.refresh();return d}();Element.hasAttribute=document.documentElement.hasAttribute?function(a,b){return a.hasAttribute(b)}:Element.Methods.Simulated.hasAttribute;
Element.addMethods=function(a){function b(C){C=C.toUpperCase();Element.Methods.ByTag[C]||(Element.Methods.ByTag[C]={});Object.extend(Element.Methods.ByTag[C],a)}function d(C,X,ga){ga=ga||false;for(var H in C){var N=C[H];if(Object.isFunction(N))if(!ga||!(H in X))X[H]=N.methodize()}}function h(C){var X,ga={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",
Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(ga[C])X="HTML"+ga[C]+"Element";if(window[X])return window[X];X="HTML"+C+"Element";if(window[X])return window[X];X="HTML"+C.capitalize()+"Element";if(window[X])return window[X];C=document.createElement(C);return C.__proto__||C.constructor.prototype}
var m=Prototype.BrowserFeatures,q=Element.Methods.ByTag;if(!a){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods)})}if(arguments.length==2){var w=a;a=arguments[1]}if(w)Object.isArray(w)?w.each(b):b(w);else Object.extend(Element.Methods,a||{});w=window.HTMLElement?HTMLElement.prototype:
Element.prototype;if(m.ElementExtensions){d(Element.Methods,w);d(Element.Methods.Simulated,w,true)}if(m.SpecificElementExtensions)for(var B in Element.Methods.ByTag){m=h(B);Object.isUndefined(m)||d(q[B],m.prototype)}Object.extend(Element,Element.Methods);delete Element.ByTag;Element.extend.refresh&&Element.extend.refresh();Element.cache={}};
document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}};
(function(a){function b(){if(h.WebKit&&!m.evaluate)return document;if(h.Opera&&window.parseFloat(window.opera.version())<9.5)return document.body;return document.documentElement}function d(B){q||(q=b());w[B]="client"+B;a["get"+B]=function(){return q[w[B]]};return a["get"+B]()}var h=Prototype.Browser,m=document,q,w={};a.getWidth=d.curry("Width");a.getHeight=d.curry("Height")})(document.viewport);Element.Storage={UID:1};
Element.addMethods({getStorage:function(a){if(a=$(a)){if(a===window)a=0;else{if(typeof a._prototypeUID==="undefined")a._prototypeUID=Element.Storage.UID++;a=a._prototypeUID}Element.Storage[a]||(Element.Storage[a]=$H());return Element.Storage[a]}},store:function(a,b,d){if(a=$(a)){arguments.length===2?Element.getStorage(a).update(b):Element.getStorage(a).set(b,d);return a}},retrieve:function(a,b,d){if(a=$(a)){a=Element.getStorage(a);var h=a.get(b);if(Object.isUndefined(h)){a.set(b,d);h=d}return h}},
clone:function(a,b){if(a=$(a)){a=a.cloneNode(b);a._prototypeUID=void 0;if(b){b=Element.select(a,"*");for(var d=b.length;d--;)b[d]._prototypeUID=void 0}return Element.extend(a)}},purge:function(a){if(a=$(a)){var b=Element._purgeElement;b(a);a=a.getElementsByTagName("*");for(var d=a.length;d--;)b(a[d]);return null}}});
(function(){function a(j){j=j.match(/^(\d+)%?$/i);if(!j)return null;return Number(j[1])/100}function b(j,o,s){var x=null;if(Object.isElement(j)){x=j;j=x.getStyle(o)}if(j===null)return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(j))return window.parseFloat(j);var I=j.include("%"),z=s===document.viewport;if(/\d/.test(j)&&x&&x.runtimeStyle&&!(I&&z)){s=x.style.left;o=x.runtimeStyle.left;x.runtimeStyle.left=x.currentStyle.left;x.style.left=j||0;j=x.style.pixelLeft;x.style.left=s;x.runtimeStyle.left=o;return j}if(x&&
I){s=s||x.parentNode;j=a(j);I=null;x.getStyle("position");x=o.include("left")||o.include("right")||o.include("width");o=o.include("top")||o.include("bottom")||o.include("height");if(s===document.viewport)if(x)I=document.viewport.getWidth();else{if(o)I=document.viewport.getHeight()}else if(x)I=$(s).measure("width");else if(o)I=$(s).measure("height");return I===null?0:I*j}return 0}function d(j){for(;j&&j.parentNode;){if(j.getStyle("display")==="none")return false;j=$(j.parentNode)}return true}function h(j){if(j.include("border"))j+=
"-width";return j.camelize()}function m(j,o){return new Element.Layout(j,o)}function q(j,o){return $(j).getLayout().get(o)}function w(j){j=$(j);var o=Element.getStyle(j,"display");if(o&&o!=="none")return{width:j.offsetWidth,height:j.offsetHeight};o=j.style;o={visibility:o.visibility,position:o.position,display:o.display};var s={visibility:"hidden",display:"block"};if(o.position!=="fixed")s.position="absolute";Element.setStyle(j,s);s={width:j.offsetWidth,height:j.offsetHeight};Element.setStyle(j,o);
return s}function B(j){if(D(j))return $(document.body);if(Element.getStyle(j,"display")!=="inline"&&j.offsetParent)return $(j.offsetParent);if(j===document.body)return $(j);for(;(j=j.parentNode)&&j!==document.body;)if(Element.getStyle(j,"position")!=="static")return j.nodeName==="HTML"?$(document.body):$(j);return $(document.body)}function C(j){var o=0,s=0;if(j.parentNode){do{o+=j.offsetTop||0;s+=j.offsetLeft||0;j=j.offsetParent}while(j)}return new Element.Offset(s,o)}function X(j){var o=j.getLayout(),
s=0,x=0;do{s+=j.offsetTop||0;x+=j.offsetLeft||0;if(j=j.offsetParent){if(ka(j))break;if(Element.getStyle(j,"position")!=="static")break}}while(j);x-=o.get("margin-top");s-=o.get("margin-left");return new Element.Offset(x,s)}function ga(j){var o=0,s=0;do{o+=j.scrollTop||0;s+=j.scrollLeft||0;j=j.parentNode}while(j);return new Element.Offset(s,o)}function H(j){var o=0,s=0,x=document.body,I=j;do{o+=I.offsetTop||0;s+=I.offsetLeft||0;if(I.offsetParent==x&&Element.getStyle(I,"position")=="absolute")break}while(I=
I.offsetParent);I=j;do if(I!=x){o-=I.scrollTop||0;s-=I.scrollLeft||0}while(I=I.parentNode);return new Element.Offset(s,o)}function N(j){j=$(j);if(Element.getStyle(j,"position")==="absolute")return j;var o=B(j),s=j.viewportOffset();o=o.viewportOffset();s=s.relativeTo(o);o=j.getLayout();j.store("prototype_absolutize_original_styles",{left:j.getStyle("left"),top:j.getStyle("top"),width:j.getStyle("width"),height:j.getStyle("height")});j.setStyle({position:"absolute",top:s.top+"px",left:s.left+"px",width:o.get("width")+
"px",height:o.get("height")+"px"});return j}function fa(j){j=$(j);if(Element.getStyle(j,"position")==="relative")return j;var o=j.retrieve("prototype_absolutize_original_styles");o&&j.setStyle(o);return j}function ka(j){return j.nodeName.toUpperCase()==="BODY"}function D(j){return j!==document.body&&!Element.descendantOf(j,document.body)}var O=Prototype.K;if("currentStyle"in document.documentElement)O=function(j){if(!j.currentStyle.hasLayout)j.style.zoom=1;return j};Element.Layout=Class.create(Hash,
{initialize:function($super,o,s){$super();this.element=$(o);Element.Layout.PROPERTIES.each(function(x){this._set(x,null)},this);if(s){this._preComputing=true;this._begin();Element.Layout.PROPERTIES.each(this._compute,this);this._end();this._preComputing=false}},_set:function(j,o){return Hash.prototype.set.call(this,j,o)},set:function(){throw"Properties of Element.Layout are read-only.";},get:function($super,o){var s=$super(o);return s===null?this._compute(o):s},_begin:function(){if(!this._prepared){var j=
this.element;if(!d(j)){j.store("prototype_original_styles",{position:j.style.position||"",width:j.style.width||"",visibility:j.style.visibility||"",display:j.style.display||""});var o=j.getStyle("position"),s=j.getStyle("width"),x=o==="fixed"?document.viewport:j.parentNode;j.setStyle({position:"absolute",visibility:"hidden",display:"block"});var I=j.getStyle("width");o=s&&I===s?b(j,"width",x):o==="absolute"||o==="fixed"?b(j,"width",x):$(j.parentNode).getLayout().get("width")-this.get("margin-left")-
this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right");j.setStyle({width:o+"px"})}this._prepared=true}},_end:function(){var j=this.element,o=j.retrieve("prototype_original_styles");j.store("prototype_original_styles",null);j.setStyle(o);this._prepared=false},_compute:function(j){var o=Element.Layout.COMPUTATIONS;if(!(j in o))throw"Property not found.";return this._set(j,o[j].call(this,this.element))},toObject:function(){var j=$A(arguments),
o={};(j.length===0?Element.Layout.PROPERTIES:j.join(" ").split(" ")).each(function(s){if(Element.Layout.PROPERTIES.include(s)){var x=this.get(s);if(x!=null)o[s]=x}},this);return o},toHash:function(){var j=this.toObject.apply(this,arguments);return new Hash(j)},toCSS:function(){var j=$A(arguments),o={};(j.length===0?Element.Layout.PROPERTIES:j.join(" ").split(" ")).each(function(s){if(Element.Layout.PROPERTIES.include(s))if(!Element.Layout.COMPOSITE_PROPERTIES.include(s)){var x=this.get(s);if(x!=null)o[h(s)]=
x+"px"}},this);return o},inspect:function(){return"#<Element.Layout>"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),
COMPUTATIONS:{height:function(){this._preComputing||this._begin();var j=this.get("border-box-height");if(j<=0){this._preComputing||this._end();return 0}var o=this.get("border-top"),s=this.get("border-bottom"),x=this.get("padding-top"),I=this.get("padding-bottom");this._preComputing||this._end();return j-o-s-x-I},width:function(){this._preComputing||this._begin();var j=this.get("border-box-width");if(j<=0){this._preComputing||this._end();return 0}var o=this.get("border-left"),s=this.get("border-right"),
x=this.get("padding-left"),I=this.get("padding-right");this._preComputing||this._end();return j-o-s-x-I},"padding-box-height":function(){var j=this.get("height"),o=this.get("padding-top"),s=this.get("padding-bottom");return j+o+s},"padding-box-width":function(){var j=this.get("width"),o=this.get("padding-left"),s=this.get("padding-right");return j+o+s},"border-box-height":function(j){this._preComputing||this._begin();j=j.offsetHeight;this._preComputing||this._end();return j},"border-box-width":function(j){this._preComputing||
this._begin();j=j.offsetWidth;this._preComputing||this._end();return j},"margin-box-height":function(){var j=this.get("border-box-height"),o=this.get("margin-top"),s=this.get("margin-bottom");if(j<=0)return 0;return j+o+s},"margin-box-width":function(){var j=this.get("border-box-width"),o=this.get("margin-left"),s=this.get("margin-right");if(j<=0)return 0;return j+o+s},top:function(j){return j.positionedOffset().top},bottom:function(j){var o=j.positionedOffset();j=j.getOffsetParent().measure("height");
var s=this.get("border-box-height");return j-s-o.top},left:function(j){return j.positionedOffset().left},right:function(j){var o=j.positionedOffset();j=j.getOffsetParent().measure("width");var s=this.get("border-box-width");return j-s-o.left},"padding-top":function(j){return b(j,"paddingTop")},"padding-bottom":function(j){return b(j,"paddingBottom")},"padding-left":function(j){return b(j,"paddingLeft")},"padding-right":function(j){return b(j,"paddingRight")},"border-top":function(j){return b(j,"borderTopWidth")},
"border-bottom":function(j){return b(j,"borderBottomWidth")},"border-left":function(j){return b(j,"borderLeftWidth")},"border-right":function(j){return b(j,"borderRightWidth")},"margin-top":function(j){return b(j,"marginTop")},"margin-bottom":function(j){return b(j,"marginBottom")},"margin-left":function(j){return b(j,"marginLeft")},"margin-right":function(j){return b(j,"marginRight")}}});"getBoundingClientRect"in document.documentElement&&Object.extend(Element.Layout.COMPUTATIONS,{right:function(j){var o=
O(j.getOffsetParent());j=j.getBoundingClientRect();return(o.getBoundingClientRect().right-j.right).round()},bottom:function(j){var o=O(j.getOffsetParent());j=j.getBoundingClientRect();return(o.getBoundingClientRect().bottom-j.bottom).round()}});Element.Offset=Class.create({initialize:function(j,o){this.left=j.round();this.top=o.round();this[0]=this.left;this[1]=this.top},relativeTo:function(j){return new Element.Offset(this.left-j.left,this.top-j.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},
toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});if(Prototype.Browser.IE){B=B.wrap(function(j,o){o=$(o);if(D(o))return $(document.body);var s=o.getStyle("position");if(s!=="static")return j(o);o.setStyle({position:"relative"});j=j(o);o.setStyle({position:s});return j});X=X.wrap(function(j,o){o=$(o);if(!o.parentNode)return new Element.Offset(0,0);var s=o.getStyle("position");if(s!=="static")return j(o);var x=o.getOffsetParent();x&&x.getStyle("position")===
"fixed"&&O(x);o.setStyle({position:"relative"});j=j(o);o.setStyle({position:s});return j})}else if(Prototype.Browser.Webkit)C=function(j){var o=0,s=0;do{o+=j.offsetTop||0;s+=j.offsetLeft||0;if(j.offsetParent==document.body)if(Element.getStyle(j,"position")=="absolute")break;j=j.offsetParent}while(j);return new Element.Offset(s,o)};Element.addMethods({getLayout:m,measure:q,getDimensions:w,getOffsetParent:B,cumulativeOffset:C,positionedOffset:X,cumulativeScrollOffset:ga,viewportOffset:H,absolutize:N,
relativize:fa});"getBoundingClientRect"in document.documentElement&&Element.addMethods({viewportOffset:function(j){j=$(j);if(D(j))return new Element.Offset(0,0);j=j.getBoundingClientRect();var o=document.documentElement;return new Element.Offset(j.left-o.clientLeft,j.top-o.clientTop)}})})();window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)};
Prototype.Selector=function(){function a(){throw new Error('Method "Prototype.Selector.select" must be defined.');}function b(){throw new Error('Method "Prototype.Selector.match" must be defined.');}function d(q,w,B){B=B||0;var C=Prototype.Selector.match,X=q.length,ga=0,H;for(H=0;H<X;H++)if(C(q[H],w)&&B==ga++)return Element.extend(q[H])}function h(q){for(var w=0,B=q.length;w<B;w++)Element.extend(q[w]);return q}var m=Prototype.K;return{select:a,match:b,find:d,extendElements:Element.extend===m?m:h,
extendElement:Element.extend}}();Prototype._original_property=window.Sizzle;
(function(){function a(j,o,s,x,I,z){I=j=="previousSibling"&&!z;for(var J=0,P=x.length;J<P;J++){var v=x[J];if(v){if(I&&v.nodeType===1){v.sizcache=s;v.sizset=J}v=v[j];for(var K=false;v;){if(v.sizcache===s){K=x[v.sizset];break}if(v.nodeType===1&&!z){v.sizcache=s;v.sizset=J}if(v.nodeName===o){K=v;break}v=v[j]}x[J]=K}}}function b(j,o,s,x,I,z){I=j=="previousSibling"&&!z;for(var J=0,P=x.length;J<P;J++){var v=x[J];if(v){if(I&&v.nodeType===1){v.sizcache=s;v.sizset=J}v=v[j];for(var K=false;v;){if(v.sizcache===
s){K=x[v.sizset];break}if(v.nodeType===1){if(!z){v.sizcache=s;v.sizset=J}if(typeof o!=="string"){if(v===o){K=true;break}}else if(B.filter(o,[v]).length>0){K=v;break}}v=v[j]}x[J]=K}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,h=0,m=Object.prototype.toString,q=false,w=true;[0,0].sort(function(){w=false;return 0});var B=function(j,o,s,x){s=s||[];var I=o=o||document;if(o.nodeType!==1&&o.nodeType!==9)return[];
if(!j||typeof j!=="string")return s;for(var z=[],J,P,v,K,T=true,la=D(o),ra=j;(d.exec(""),J=d.exec(ra))!==null;){ra=J[3];z.push(J[1]);if(J[2]){K=J[3];break}}if(z.length>1&&X.exec(j))if(z.length===2&&C.relative[z[0]])P=O(z[0]+z[1],o);else for(P=C.relative[z[0]]?[o]:B(z.shift(),o);z.length;){j=z.shift();if(C.relative[j])j+=z.shift();P=O(j,P)}else{if(!x&&z.length>1&&o.nodeType===9&&!la&&C.match.ID.test(z[0])&&!C.match.ID.test(z[z.length-1])){J=B.find(z.shift(),o,la);o=J.expr?B.filter(J.expr,J.set)[0]:
J.set[0]}if(o){J=x?{expr:z.pop(),set:H(x)}:B.find(z.pop(),z.length===1&&(z[0]==="~"||z[0]==="+")&&o.parentNode?o.parentNode:o,la);P=J.expr?B.filter(J.expr,J.set):J.set;if(z.length>0)v=H(P);else T=false;for(;z.length;){var W=z.pop();J=W;if(C.relative[W])J=z.pop();else W="";if(J==null)J=o;C.relative[W](v,J,la)}}else v=[]}v||(v=P);if(!v)throw"Syntax error, unrecognized expression: "+(W||j);if(m.call(v)==="[object Array]")if(T)if(o&&o.nodeType===1)for(j=0;v[j]!=null;j++){if(v[j]&&(v[j]===true||v[j].nodeType===
1&&ka(o,v[j])))s.push(P[j])}else for(j=0;v[j]!=null;j++)v[j]&&v[j].nodeType===1&&s.push(P[j]);else s.push.apply(s,v);else H(v,s);if(K){B(K,I,s,x);B.uniqueSort(s)}return s};B.uniqueSort=function(j){if(fa){q=w;j.sort(fa);if(q)for(var o=1;o<j.length;o++)j[o]===j[o-1]&&j.splice(o--,1)}return j};B.matches=function(j,o){return B(j,null,null,o)};B.find=function(j,o,s){var x,I;if(!j)return[];for(var z=0,J=C.order.length;z<J;z++){var P=C.order[z];if(I=C.leftMatch[P].exec(j)){var v=I[1];I.splice(1,1);if(v.substr(v.length-
1)!=="\\"){I[1]=(I[1]||"").replace(/\\/g,"");x=C.find[P](I,o,s);if(x!=null){j=j.replace(C.match[P],"");break}}}}x||(x=o.getElementsByTagName("*"));return{set:x,expr:j}};B.filter=function(j,o,s,x){for(var I=j,z=[],J=o,P,v,K=o&&o[0]&&D(o[0]);j&&o.length;){for(var T in C.filter)if((P=C.match[T].exec(j))!=null){var la=C.filter[T],ra,W;v=false;if(J==z)z=[];if(C.preFilter[T])if(P=C.preFilter[T](P,J,s,z,x,K)){if(P===true)continue}else v=ra=true;if(P)for(var ea=0;(W=J[ea])!=null;ea++)if(W){ra=la(W,P,ea,J);
var V=x^!!ra;if(s&&ra!=null)if(V)v=true;else J[ea]=false;else if(V){z.push(W);v=true}}if(ra!==undefined){s||(J=z);j=j.replace(C.match[T],"");if(!v)return[];break}}if(j==I)if(v==null)throw"Syntax error, unrecognized expression: "+j;else break;I=j}return J};var C=B.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(j){return j.getAttribute("href")}},relative:{"+":function(j,o,s){var x=typeof o==="string",I=x&&!/\W/.test(o);x=x&&!I;if(I&&!s)o=o.toUpperCase();s=0;I=j.length;
for(var z;s<I;s++)if(z=j[s]){for(;(z=z.previousSibling)&&z.nodeType!==1;);j[s]=x||z&&z.nodeName===o?z||false:z===o}x&&B.filter(o,j,true)},">":function(j,o,s){var x=typeof o==="string";if(x&&!/\W/.test(o)){o=s?o:o.toUpperCase();s=0;for(var I=j.length;s<I;s++){var z=j[s];if(z){x=z.parentNode;j[s]=x.nodeName===o?x:false}}}else{s=0;for(I=j.length;s<I;s++)if(z=j[s])j[s]=x?z.parentNode:z.parentNode===o;x&&B.filter(o,j,true)}},"":function(j,o,s){var x=h++,I=b;if(!/\W/.test(o)){var z=o=s?o:o.toUpperCase();
I=a}I("parentNode",o,x,j,z,s)},"~":function(j,o,s){var x=h++,I=b;if(typeof o==="string"&&!/\W/.test(o)){var z=o=s?o:o.toUpperCase();I=a}I("previousSibling",o,x,j,z,s)}},find:{ID:function(j,o,s){if(typeof o.getElementById!=="undefined"&&!s)return(j=o.getElementById(j[1]))?[j]:[]},NAME:function(j,o){if(typeof o.getElementsByName!=="undefined"){var s=[];o=o.getElementsByName(j[1]);for(var x=0,I=o.length;x<I;x++)o[x].getAttribute("name")===j[1]&&s.push(o[x]);return s.length===0?null:s}},TAG:function(j,
o){return o.getElementsByTagName(j[1])}},preFilter:{CLASS:function(j,o,s,x,I,z){j=" "+j[1].replace(/\\/g,"")+" ";if(z)return j;z=0;for(var J;(J=o[z])!=null;z++)if(J)if(I^(J.className&&(" "+J.className+" ").indexOf(j)>=0))s||x.push(J);else if(s)o[z]=false;return false},ID:function(j){return j[1].replace(/\\/g,"")},TAG:function(j,o){for(var s=0;o[s]===false;s++);return o[s]&&D(o[s])?j[1]:j[1].toUpperCase()},CHILD:function(j){if(j[1]=="nth"){var o=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(j[2]=="even"&&"2n"||
j[2]=="odd"&&"2n+1"||!/\D/.test(j[2])&&"0n+"+j[2]||j[2]);j[2]=o[1]+(o[2]||1)-0;j[3]=o[3]-0}j[0]=h++;return j},ATTR:function(j,o,s,x,I,z){o=j[1].replace(/\\/g,"");if(!z&&C.attrMap[o])j[1]=C.attrMap[o];if(j[2]==="~=")j[4]=" "+j[4]+" ";return j},PSEUDO:function(j,o,s,x,I){if(j[1]==="not")if((d.exec(j[3])||"").length>1||/^\w/.test(j[3]))j[3]=B(j[3],null,null,o);else{j=B.filter(j[3],o,s,true^I);s||x.push.apply(x,j);return false}else if(C.match.POS.test(j[0])||C.match.CHILD.test(j[0]))return true;return j},
POS:function(j){j.unshift(true);return j}},filters:{enabled:function(j){return j.disabled===false&&j.type!=="hidden"},disabled:function(j){return j.disabled===true},checked:function(j){return j.checked===true},selected:function(j){return j.selected===true},parent:function(j){return!!j.firstChild},empty:function(j){return!j.firstChild},has:function(j,o,s){return!!B(s[3],j).length},header:function(j){return/h\d/i.test(j.nodeName)},text:function(j){return"text"===j.type},radio:function(j){return"radio"===
j.type},checkbox:function(j){return"checkbox"===j.type},file:function(j){return"file"===j.type},password:function(j){return"password"===j.type},submit:function(j){return"submit"===j.type},image:function(j){return"image"===j.type},reset:function(j){return"reset"===j.type},button:function(j){return"button"===j.type||j.nodeName.toUpperCase()==="BUTTON"},input:function(j){return/input|select|textarea|button/i.test(j.nodeName)}},setFilters:{first:function(j,o){return o===0},last:function(j,o,s,x){return o===
x.length-1},even:function(j,o){return o%2===0},odd:function(j,o){return o%2===1},lt:function(j,o,s){return o<s[3]-0},gt:function(j,o,s){return o>s[3]-0},nth:function(j,o,s){return s[3]-0==o},eq:function(j,o,s){return s[3]-0==o}},filter:{PSEUDO:function(j,o,s,x){var I=o[1],z=C.filters[I];if(z)return z(j,s,o,x);else if(I==="contains")return(j.textContent||j.innerText||"").indexOf(o[3])>=0;else if(I==="not"){o=o[3];s=0;for(x=o.length;s<x;s++)if(o[s]===j)return false;return true}},CHILD:function(j,o){var s=
o[1],x=j;switch(s){case "only":case "first":for(;x=x.previousSibling;)if(x.nodeType===1)return false;if(s=="first")return true;x=j;case "last":for(;x=x.nextSibling;)if(x.nodeType===1)return false;return true;case "nth":s=o[2];var I=o[3];if(s==1&&I==0)return true;o=o[0];var z=j.parentNode;if(z&&(z.sizcache!==o||!j.nodeIndex)){var J=0;for(x=z.firstChild;x;x=x.nextSibling)if(x.nodeType===1)x.nodeIndex=++J;z.sizcache=o}j=j.nodeIndex-I;return s==0?j==0:j%s==0&&j/s>=0}},ID:function(j,o){return j.nodeType===
1&&j.getAttribute("id")===o},TAG:function(j,o){return o==="*"&&j.nodeType===1||j.nodeName===o},CLASS:function(j,o){return(" "+(j.className||j.getAttribute("class"))+" ").indexOf(o)>-1},ATTR:function(j,o){var s=o[1];j=C.attrHandle[s]?C.attrHandle[s](j):j[s]!=null?j[s]:j.getAttribute(s);s=j+"";var x=o[2];o=o[4];return j==null?x==="!=":x==="="?s===o:x==="*="?s.indexOf(o)>=0:x==="~="?(" "+s+" ").indexOf(o)>=0:!o?s&&j!==false:x==="!="?s!=o:x==="^="?s.indexOf(o)===0:x==="$="?s.substr(s.length-o.length)===
o:x==="|="?s===o||s.substr(0,o.length+1)===o+"-":false},POS:function(j,o,s,x){var I=C.setFilters[o[2]];if(I)return I(j,s,o,x)}}},X=C.match.POS;for(var ga in C.match){C.match[ga]=new RegExp(C.match[ga].source+/(?![^\[]*\])(?![^\(]*\))/.source);C.leftMatch[ga]=new RegExp(/(^(?:.|\r|\n)*?)/.source+C.match[ga].source)}var H=function(j,o){j=Array.prototype.slice.call(j,0);if(o){o.push.apply(o,j);return o}return j};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(N){H=function(j,
o){o=o||[];if(m.call(j)==="[object Array]")Array.prototype.push.apply(o,j);else if(typeof j.length==="number")for(var s=0,x=j.length;s<x;s++)o.push(j[s]);else for(s=0;j[s];s++)o.push(j[s]);return o}}var fa;if(document.documentElement.compareDocumentPosition)fa=function(j,o){if(!j.compareDocumentPosition||!o.compareDocumentPosition){if(j==o)q=true;return 0}j=j.compareDocumentPosition(o)&4?-1:j===o?0:1;if(j===0)q=true;return j};else if("sourceIndex"in document.documentElement)fa=function(j,o){if(!j.sourceIndex||
!o.sourceIndex){if(j==o)q=true;return 0}j=j.sourceIndex-o.sourceIndex;if(j===0)q=true;return j};else if(document.createRange)fa=function(j,o){if(!j.ownerDocument||!o.ownerDocument){if(j==o)q=true;return 0}var s=j.ownerDocument.createRange(),x=o.ownerDocument.createRange();s.setStart(j,0);s.setEnd(j,0);x.setStart(o,0);x.setEnd(o,0);j=s.compareBoundaryPoints(Range.START_TO_END,x);if(j===0)q=true;return j};(function(){var j=document.createElement("div"),o="script"+(new Date).getTime();j.innerHTML="<a name='"+
o+"'/>";var s=document.documentElement;s.insertBefore(j,s.firstChild);if(document.getElementById(o)){C.find.ID=function(x,I,z){if(typeof I.getElementById!=="undefined"&&!z)return(I=I.getElementById(x[1]))?I.id===x[1]||typeof I.getAttributeNode!=="undefined"&&I.getAttributeNode("id").nodeValue===x[1]?[I]:undefined:[]};C.filter.ID=function(x,I){var z=typeof x.getAttributeNode!=="undefined"&&x.getAttributeNode("id");return x.nodeType===1&&z&&z.nodeValue===I}}s.removeChild(j);s=j=null})();(function(){var j=
document.createElement("div");j.appendChild(document.createComment(""));if(j.getElementsByTagName("*").length>0)C.find.TAG=function(o,s){s=s.getElementsByTagName(o[1]);if(o[1]==="*"){o=[];for(var x=0;s[x];x++)s[x].nodeType===1&&o.push(s[x]);s=o}return s};j.innerHTML="<a href='#'></a>";if(j.firstChild&&typeof j.firstChild.getAttribute!=="undefined"&&j.firstChild.getAttribute("href")!=="#")C.attrHandle.href=function(o){return o.getAttribute("href",2)};j=null})();document.querySelectorAll&&function(){var j=
B,o=document.createElement("div");o.innerHTML="<p class='TEST'></p>";if(!(o.querySelectorAll&&o.querySelectorAll(".TEST").length===0)){B=function(x,I,z,J){I=I||document;if(!J&&I.nodeType===9&&!D(I))try{return H(I.querySelectorAll(x),z)}catch(P){}return j(x,I,z,J)};for(var s in j)B[s]=j[s];o=null}}();document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var j=document.createElement("div");j.innerHTML="<div class='test e'></div><div class='test'></div>";if(j.getElementsByClassName("e").length!==
0){j.lastChild.className="e";if(j.getElementsByClassName("e").length!==1){C.order.splice(1,0,"CLASS");C.find.CLASS=function(o,s,x){if(typeof s.getElementsByClassName!=="undefined"&&!x)return s.getElementsByClassName(o[1])};j=null}}}();var ka=document.compareDocumentPosition?function(j,o){return j.compareDocumentPosition(o)&16}:function(j,o){return j!==o&&(j.contains?j.contains(o):true)},D=function(j){return j.nodeType===9&&j.documentElement.nodeName!=="HTML"||!!j.ownerDocument&&j.ownerDocument.documentElement.nodeName!==
"HTML"},O=function(j,o){var s=[],x="",I;for(o=o.nodeType?[o]:o;I=C.match.PSEUDO.exec(j);){x+=I[0];j=j.replace(C.match.PSEUDO,"")}j=C.relative[j]?j+"*":j;I=0;for(var z=o.length;I<z;I++)B(j,o[I],s);return B.filter(x,s)};window.Sizzle=B})();(function(a){function b(m,q){return h(a(m,q||document))}function d(m,q){return a.matches(q,[m]).length==1}var h=Prototype.Selector.extendElements;Prototype.Selector.engine=a;Prototype.Selector.select=b;Prototype.Selector.match=d})(Sizzle);window.Sizzle=Prototype._original_property;
delete Prototype._original_property;
var Form={reset:function(a){a=$(a);a.reset();return a},serializeElements:function(a,b){if(typeof b!="object")b={hash:!!b};else if(Object.isUndefined(b.hash))b.hash=true;var d,h,m=false,q=b.submit,w;if(b.hash){b={};w=function(B,C,X){if(C in B){Object.isArray(B[C])||(B[C]=[B[C]]);B[C].push(X)}else B[C]=X;return B}}else{b="";w=function(B,C,X){return B+(B?"&":"")+encodeURIComponent(C)+"="+encodeURIComponent(X)}}return a.inject(b,function(B,C){if(!C.disabled&&C.name){d=C.name;h=$(C).getValue();if(h!=null&&
C.type!="file"&&(C.type!="submit"||!m&&q!==false&&(!q||d==q)&&(m=true)))B=w(B,d,h)}return B})}};
Form.Methods={serialize:function(a,b){return Form.serializeElements(Form.getElements(a),b)},getElements:function(a){a=$(a).getElementsByTagName("*");for(var b,d=[],h=Form.Element.Serializers,m=0;b=a[m];m++)d.push(b);return d.inject([],function(q,w){h[w.tagName.toLowerCase()]&&q.push(Element.extend(w));return q})},getInputs:function(a,b,d){a=$(a);a=a.getElementsByTagName("input");if(!b&&!d)return $A(a).map(Element.extend);for(var h=0,m=[],q=a.length;h<q;h++){var w=a[h];b&&w.type!=b||d&&w.name!=d||
m.push(Element.extend(w))}return m},disable:function(a){a=$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(a){a=$(a).getElements().findAll(function(d){return"hidden"!=d.type&&!d.disabled});var b=a.findAll(function(d){return d.hasAttribute("tabIndex")&&d.tabIndex>=0}).sortBy(function(d){return d.tabIndex}).first();return b?b:a.find(function(d){return/^(?:input|select|textarea)$/i.test(d.tagName)})},
focusFirstElement:function(a){a=$(a);a.findFirstElement().activate();return a},request:function(a,b){a=$(a);b=Object.clone(b||{});var d=b.parameters,h=a.readAttribute("action")||"";if(h.blank())h=window.location.href;b.parameters=a.serialize(true);if(d){if(Object.isString(d))d=d.toQueryParams();Object.extend(b.parameters,d)}if(a.hasAttribute("method")&&!b.method)b.method=a.method;return new Ajax.Request(h,b)}};
Form.Element={focus:function(a){$(a).focus();return a},select:function(a){$(a).select();return a}};
Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var b=a.getValue();if(b!=undefined){var d={};d[a.name]=b;return Object.toQueryString(d)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var d=a.tagName.toLowerCase();Form.Element.Serializers[d](a,b);return a},clear:function(a){$(a).value="";return a},present:function(a){return $(a).value!=""},activate:function(a){a=$(a);try{a.focus();
if(a.select&&(a.tagName.toLowerCase()!="input"||!/^(?:button|reset|submit)$/i.test(a.type)))a.select()}catch(b){}return a},disable:function(a){a=$(a);a.disabled=true;return a},enable:function(a){a=$(a);a.disabled=false;return a}};var Field=Form.Element,$F=Form.Element.Methods.getValue;
Form.Element.Serializers={input:function(a,b){switch(a.type.toLowerCase()){case "checkbox":case "radio":return Form.Element.Serializers.inputSelector(a,b);default:return Form.Element.Serializers.textarea(a,b)}},inputSelector:function(a,b){if(Object.isUndefined(b))return a.checked?a.value:null;else a.checked=!!b},textarea:function(a,b){if(Object.isUndefined(b))return a.value;else a.value=b},select:function(a,b){if(Object.isUndefined(b))return this[a.type=="select-one"?"selectOne":"selectMany"](a);
else for(var d,h,m=!Object.isArray(b),q=0,w=a.length;q<w;q++){d=a.options[q];h=this.optionValue(d);if(m){if(h==b){d.selected=true;return}}else d.selected=b.include(h)}},selectOne:function(a){var b=a.selectedIndex;return b>=0?this.optionValue(a.options[b]):null},selectMany:function(a){var b,d=a.length;if(!d)return null;var h=0;for(b=[];h<d;h++){var m=a.options[h];m.selected&&b.push(this.optionValue(m))}return b},optionValue:function(a){return Element.extend(a).hasAttribute("value")?a.value:a.text}};
Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,b,d,h){$super(h,d);this.element=$(b);this.lastValue=this.getValue()},execute:function(){var a=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a)){this.callback(this.element,a);this.lastValue=a}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});
Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});
Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a);this.callback=b;this.lastValue=this.getValue();this.element.tagName.toLowerCase()=="form"?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var a=this.getValue();if(this.lastValue!=a){this.callback(this.element,a);this.lastValue=a}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type)switch(a.type.toLowerCase()){case "checkbox":case "radio":Event.observe(a,
"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this));break}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});
(function(){function a(v){return o(v,0)}function b(v){return o(v,1)}function d(v){return o(v,2)}function h(v){v=D.extend(v);var K=v.target,T=v.type;if((v=v.currentTarget)&&v.tagName)if(T==="load"||T==="error"||T==="click"&&v.tagName.toLowerCase()==="input"&&v.type==="radio")K=v;if(K.nodeType==Node.TEXT_NODE)K=K.parentNode;return Element.extend(K)}function m(v,K){v=D.element(v);if(!K)return v;for(;v;){if(Object.isElement(v)&&Prototype.Selector.match(v,K))return Element.extend(v);v=v.parentNode}}function q(v){return{x:w(v),
y:B(v)}}function w(v){var K=document.documentElement,T=document.body||{scrollLeft:0};return v.pageX||v.clientX+(K.scrollLeft||T.scrollLeft)-(K.clientLeft||0)}function B(v){var K=document.documentElement,T=document.body||{scrollTop:0};return v.pageY||v.clientY+(K.scrollTop||T.scrollTop)-(K.clientTop||0)}function C(v){D.extend(v);v.preventDefault();v.stopPropagation();v.stopped=true}function X(v,K,T){var la=Element.retrieve(v,"prototype_event_registry");if(Object.isUndefined(la)){z.push(v);la=Element.retrieve(v,
"prototype_event_registry",$H())}var ra=la.get(K);if(Object.isUndefined(ra)){ra=[];la.set(K,ra)}if(ra.pluck("handler").include(T))return false;var W;if(K.include(":"))W=function(ea){if(Object.isUndefined(ea.eventName))return false;if(ea.eventName!==K)return false;D.extend(ea,v);T.call(v,ea)};else if(!j&&(K==="mouseenter"||K==="mouseleave")){if(K==="mouseenter"||K==="mouseleave")W=function(ea){D.extend(ea,v);for(var V=ea.relatedTarget;V&&V!==v;)try{V=V.parentNode}catch(aa){V=v}V!==v&&T.call(v,ea)}}else W=
function(ea){D.extend(ea,v);T.call(v,ea)};W.handler=T;ra.push(W);return W}function ga(){for(var v=0,K=z.length;v<K;v++){D.stopObserving(z[v]);z[v]=null}}function H(v,K,T){v=$(v);T=X(v,K,T);if(!T)return v;if(K.include(":"))if(v.addEventListener)v.addEventListener("dataavailable",T,false);else{v.attachEvent("ondataavailable",T);v.attachEvent("onlosecapture",T)}else{K=J(K);v.addEventListener?v.addEventListener(K,T,false):v.attachEvent("on"+K,T)}return v}function N(v,K,T){v=$(v);var la=Element.retrieve(v,
"prototype_event_registry");if(!la)return v;if(!K){la.each(function(V){N(v,V.key)});return v}var ra=la.get(K);if(!ra)return v;if(!T){ra.each(function(V){N(v,K,V.handler)});return v}var W=ra.find(function(V){return V.handler===T});if(!W)return v;if(K.include(":"))if(v.removeEventListener)v.removeEventListener("dataavailable",W,false);else{v.detachEvent("ondataavailable",W);v.detachEvent("onlosecapture",W)}else{var ea=J(K);v.removeEventListener?v.removeEventListener(ea,W,false):v.detachEvent("on"+ea,
W)}la.set(K,ra.without(W));return v}function fa(v,K,T,la){v=$(v);if(Object.isUndefined(la))la=true;if(v==document&&document.createEvent&&!v.dispatchEvent)v=document.documentElement;var ra;if(document.createEvent){ra=document.createEvent("HTMLEvents");ra.initEvent("dataavailable",la,true)}else{ra=document.createEventObject();ra.eventType=la?"ondataavailable":"onlosecapture"}ra.eventName=K;ra.memo=T||{};document.createEvent?v.dispatchEvent(ra):v.fireEvent(ra.eventType,ra);return D.extend(ra)}function ka(v,
K,T,la){v=$(v);if(Object.isFunction(T)&&Object.isUndefined(la)){la=T;T=null}return(new D.Handler(v,K,T,la)).start()}var D={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{}},O=document.documentElement,j="onmouseenter"in O&&"onmouseleave"in O;O=window.attachEvent&&!window.addEventListener;var o;if(O){var s={0:1,1:4,2:2};o=function(v,K){return v.button===s[K]}}else o=
Prototype.Browser.WebKit?function(v,K){switch(K){case 0:return v.which==1&&!v.metaKey;case 1:return v.which==1&&v.metaKey;default:return false}}:function(v,K){return v.which?v.which===K+1:v.button===K};D.Methods={isLeftClick:a,isMiddleClick:b,isRightClick:d,element:h,findElement:m,pointer:q,pointerX:w,pointerY:B,stop:C};var x=Object.keys(D.Methods).inject({},function(v,K){v[K]=D.Methods[K].methodize();return v});if(O){var I=function(v){switch(v.type){case "mouseover":v=v.fromElement;break;case "mouseout":v=
v.toElement;break;default:return null}return Element.extend(v)};Object.extend(x,{stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},inspect:function(){return"[object Event]"}});D.extend=function(v,K){if(!v)return false;if(v._extendedByPrototype)return v;v._extendedByPrototype=Prototype.emptyFunction;var T=D.pointer(v);Object.extend(v,{target:v.srcElement||K,relatedTarget:I(v),pageX:T.x,pageY:T.y});return Object.extend(v,x)}}else{D.prototype=window.Event.prototype||
document.createEvent("HTMLEvents").__proto__;Object.extend(D.prototype,x);D.extend=Prototype.K}var z=[];Prototype.Browser.IE&&window.attachEvent("onunload",ga);Prototype.Browser.WebKit&&window.addEventListener("unload",Prototype.emptyFunction,false);var J=Prototype.K,P={mouseenter:"mouseover",mouseleave:"mouseout"};j||(J=function(v){return P[v]||v});D.Handler=Class.create({initialize:function(v,K,T,la){this.element=$(v);this.eventName=K;this.selector=T;this.callback=la;this.handler=this.handleEvent.bind(this)},
start:function(){D.observe(this.element,this.eventName,this.handler);return this},stop:function(){D.stopObserving(this.element,this.eventName,this.handler);return this},handleEvent:function(v){var K=v.findElement(this.selector);K&&this.callback.call(this.element,v,K)}});Object.extend(D,D.Methods);Object.extend(D,{fire:fa,observe:H,stopObserving:N,on:ka});Element.addMethods({fire:fa,observe:H,stopObserving:N,on:ka});Object.extend(document,{fire:fa.methodize(),observe:H.methodize(),stopObserving:N.methodize(),
on:ka.methodize(),loaded:false});if(window.Event)Object.extend(window.Event,D);else window.Event=D})();
(function(){function a(){if(!document.loaded){h&&window.clearTimeout(h);document.loaded=true;document.fire("dom:loaded")}}function b(){if(document.readyState==="complete"){document.stopObserving("readystatechange",b);a()}}function d(){try{document.documentElement.doScroll("left")}catch(m){h=d.defer();return}a()}var h;if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,false);else{document.observe("readystatechange",b);if(window==top)h=d.defer()}Event.observe(window,"load",
a)})();Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;
var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}},$continue=new Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||
document.documentElement.scrollTop||document.body.scrollTop||0},within:function(a,b,d){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(a,b,d);this.xcomp=b;this.ycomp=d;this.offset=Element.cumulativeOffset(a);return d>=this.offset[1]&&d<this.offset[1]+a.offsetHeight&&b>=this.offset[0]&&b<this.offset[0]+a.offsetWidth},withinIncludingScrolloffsets:function(a,b,d){var h=Element.cumulativeScrollOffset(a);this.xcomp=b+h[0]-this.deltaX;this.ycomp=d+h[1]-this.deltaY;this.offset=Element.cumulativeOffset(a);
return this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+a.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+a.offsetWidth},overlap:function(a,b){if(!a)return 0;if(a=="vertical")return(this.offset[1]+b.offsetHeight-this.ycomp)/b.offsetHeight;if(a=="horizontal")return(this.offset[0]+b.offsetWidth-this.xcomp)/b.offsetWidth},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){Position.prepare();return Element.absolutize(a)},
relativize:function(a){Position.prepare();return Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(a,b,d){d=d||{};return Element.clonePosition(b,a,d)}};
if(!document.getElementsByClassName)document.getElementsByClassName=function(a){function b(d){return d.blank()?null:"[contains(concat(' ', @class, ' '), ' "+d+" ')]"}a.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(d,h){h=h.toString().strip();return(h=/\s/.test(h)?$w(h).map(b).join(""):b(h))?document._getElementsByXPath(".//*"+h,d):[]}:function(d,h){h=h.toString().strip();var m=[],q=/\s/.test(h)?$w(h):null;if(!q&&!h)return m;d=$(d).getElementsByTagName("*");h=" "+h+" ";for(var w=
0,B,C;B=d[w];w++)if(B.className&&(C=" "+B.className+" ")&&(C.include(h)||q&&q.all(function(X){return!X.toString().blank()&&C.include(" "+X+" ")})))m.push(Element.extend(B));return m};return function(d,h){return $(h||document.body).getElementsByClassName(d)}}(Element.Methods);Element.ClassNames=Class.create();
Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(a){this.element.className.split(/\s+/).select(function(b){return b.length>0})._each(a)},set:function(a){this.element.className=a},add:function(a){this.include(a)||this.set($A(this).concat(a).join(" "))},remove:function(a){this.include(a)&&this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);
(function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}});Object.extend(Selector,{matchElements:function(a,b){for(var d=Prototype.Selector.match,h=[],m=0,q=a.length;m<q;m++){var w=a[m];d(w,b)&&h.push(Element.extend(w))}return h},
findElement:function(a,b,d){d=d||0;for(var h=0,m,q=0,w=a.length;q<w;q++){m=a[q];if(Prototype.Selector.match(m,b)&&d===h++)return Element.extend(m)}},findChildElements:function(a,b){b=b.toArray().join(", ");return Prototype.Selector.select(b,a||document)}})})();(function(a,b){function d(c){var e=c.length,g=f.type(c);if(f.isWindow(c))return false;if(c.nodeType===1&&e)return true;return g==="array"||g!=="function"&&(e===0||typeof e==="number"&&e>0&&e-1 in c)}function h(c){var e=ic[c]={};f.each(c.match(Za)||[],function(g,k){e[k]=true});return e}function m(c,e,g,k){if(f.acceptData(c)){var l=f.expando,n=typeof e==="string",p=c.nodeType,t=p?f.cache:c,A=p?c[l]:c[l]&&l;if(!((!A||!t[A]||!k&&!t[A].data)&&n&&g===b)){if(!A)if(p)c[l]=A=Ra.pop()||f.guid++;else A=l;if(!t[A]){t[A]=
{};if(!p)t[A].toJSON=f.noop}if(typeof e==="object"||typeof e==="function")if(k)t[A]=f.extend(t[A],e);else t[A].data=f.extend(t[A].data,e);c=t[A];if(!k){if(!c.data)c.data={};c=c.data}if(g!==b)c[f.camelCase(e)]=g;if(n){g=c[e];if(g==null)g=c[f.camelCase(e)]}else g=c;return g}}}function q(c,e,g){if(f.acceptData(c)){var k,l,n,p=c.nodeType,t=p?f.cache:c,A=p?c[f.expando]:f.expando;if(t[A]){if(e)if(n=g?t[A]:t[A].data){if(f.isArray(e))e=e.concat(f.map(e,f.camelCase));else if(e in n)e=[e];else{e=f.camelCase(e);
e=e in n?[e]:e.split(" ")}k=0;for(l=e.length;k<l;k++)delete n[e[k]];if(!(g?B:f.isEmptyObject)(n))return}if(!g){delete t[A].data;if(!B(t[A]))return}if(p)f.cleanData([c],true);else if(f.support.deleteExpando||t!=t.window)delete t[A];else t[A]=null}}}function w(c,e,g){if(g===b&&c.nodeType===1){g="data-"+e.replace(Oc,"-$1").toLowerCase();g=c.getAttribute(g);if(typeof g==="string"){try{g=g==="true"?true:g==="false"?false:g==="null"?null:+g+""===g?+g:Pc.test(g)?f.parseJSON(g):g}catch(k){}f.data(c,e,g)}else g=
b}return g}function B(c){var e;for(e in c)if(!(e==="data"&&f.isEmptyObject(c[e])))if(e!=="toJSON")return false;return true}function C(){return true}function X(){return false}function ga(c,e){do c=c[e];while(c&&c.nodeType!==1);return c}function H(c,e,g){e=e||0;if(f.isFunction(e))return f.grep(c,function(l,n){return!!e.call(l,n,l)===g});else if(e.nodeType)return f.grep(c,function(l){return l===e===g});else if(typeof e==="string"){var k=f.grep(c,function(l){return l.nodeType===1});if(Qc.test(e))return f.filter(e,
k,!g);else e=f.filter(e,k)}return f.grep(c,function(l){return f.inArray(l,e)>=0===g})}function N(c){var e=jc.split("|");c=c.createDocumentFragment();if(c.createElement)for(;e.length;)c.createElement(e.pop());return c}function fa(c,e){return c.getElementsByTagName(e)[0]||c.appendChild(c.ownerDocument.createElement(e))}function ka(c){var e=c.getAttributeNode("type");c.type=(e&&e.specified)+"/"+c.type;return c}function D(c){var e=Rc.exec(c.type);if(e)c.type=e[1];else c.removeAttribute("type");return c}
function O(c,e){for(var g,k=0;(g=c[k])!=null;k++)f._data(g,"globalEval",!e||f._data(e[k],"globalEval"))}function j(c,e){if(!(e.nodeType!==1||!f.hasData(c))){var g,k,l;k=f._data(c);c=f._data(e,k);var n=k.events;if(n){delete c.handle;c.events={};for(g in n){k=0;for(l=n[g].length;k<l;k++)f.event.add(e,g,n[g][k])}}if(c.data)c.data=f.extend({},c.data)}}function o(c,e){var g,k,l;if(e.nodeType===1){g=e.nodeName.toLowerCase();if(!f.support.noCloneEvent&&e[f.expando]){l=f._data(e);for(k in l.events)f.removeEvent(e,
k,l.handle);e.removeAttribute(f.expando)}if(g==="script"&&e.text!==c.text){ka(e).text=c.text;D(e)}else if(g==="object"){if(e.parentNode)e.outerHTML=c.outerHTML;if(f.support.html5Clone&&c.innerHTML&&!f.trim(e.innerHTML))e.innerHTML=c.innerHTML}else if(g==="input"&&Rb.test(c.type)){e.defaultChecked=e.checked=c.checked;if(e.value!==c.value)e.value=c.value}else if(g==="option")e.defaultSelected=e.selected=c.defaultSelected;else if(g==="input"||g==="textarea")e.defaultValue=c.defaultValue}}function s(c,
e){var g,k,l=0,n=typeof c.getElementsByTagName!==ca?c.getElementsByTagName(e||"*"):typeof c.querySelectorAll!==ca?c.querySelectorAll(e||"*"):b;if(!n){n=[];for(g=c.childNodes||c;(k=g[l])!=null;l++)!e||f.nodeName(k,e)?n.push(k):f.merge(n,s(k,e))}return e===b||e&&f.nodeName(c,e)?f.merge([c],n):n}function x(c){if(Rb.test(c.type))c.defaultChecked=c.checked}function I(c,e){if(e in c)return e;for(var g=e.charAt(0).toUpperCase()+e.slice(1),k=e,l=kc.length;l--;){e=kc[l]+g;if(e in c)return e}return k}function z(c,
e){c=e||c;return f.css(c,"display")==="none"||!f.contains(c.ownerDocument,c)}function J(c,e){for(var g,k,l,n=[],p=0,t=c.length;p<t;p++){k=c[p];if(k.style){n[p]=f._data(k,"olddisplay");g=k.style.display;if(e){if(!n[p]&&g==="none")k.style.display="";if(k.style.display===""&&z(k))n[p]=f._data(k,"olddisplay",T(k.nodeName))}else if(!n[p]){l=z(k);if(g&&g!=="none"||!l)f._data(k,"olddisplay",l?g:f.css(k,"display"))}}}for(p=0;p<t;p++){k=c[p];if(k.style)if(!e||k.style.display==="none"||k.style.display==="")k.style.display=
e?n[p]||"":"none"}return c}function P(c,e,g){return(c=Sc.exec(e))?Math.max(0,c[1]-(g||0))+(c[2]||"px"):e}function v(c,e,g,k,l){e=g===(k?"border":"content")?4:e==="width"?1:0;for(var n=0;e<4;e+=2){if(g==="margin")n+=f.css(c,g+hb[e],true,l);if(k){if(g==="content")n-=f.css(c,"padding"+hb[e],true,l);if(g!=="margin")n-=f.css(c,"border"+hb[e]+"Width",true,l)}else{n+=f.css(c,"padding"+hb[e],true,l);if(g!=="padding")n+=f.css(c,"border"+hb[e]+"Width",true,l)}}return n}function K(c,e,g){var k=true,l=e==="width"?
c.offsetWidth:c.offsetHeight,n=ib(c),p=f.support.boxSizing&&f.css(c,"boxSizing",false,n)==="border-box";if(l<=0||l==null){l=jb(c,e,n);if(l<0||l==null)l=c.style[e];if(Jb.test(l))return l;k=p&&(f.support.boxSizingReliable||l===c.style[e]);l=parseFloat(l)||0}return l+v(c,e,g||(p?"border":"content"),k,n)+"px"}function T(c){var e=Q,g=lc[c];if(!g){g=la(c,e);if(g==="none"||!g){Db=(Db||f("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement);
e=(Db[0].contentWindow||Db[0].contentDocument).document;e.write("<!doctype html><html><body>");e.close();g=la(c,e);Db.detach()}lc[c]=g}return g}function la(c,e){c=f(e.createElement(c)).appendTo(e.body);e=f.css(c[0],"display");c.remove();return e}function ra(c,e,g,k){var l;if(f.isArray(e))f.each(e,function(n,p){g||Tc.test(c)?k(c,p):ra(c+"["+(typeof p==="object"?n:"")+"]",p,g,k)});else if(!g&&f.type(e)==="object")for(l in e)ra(c+"["+l+"]",e[l],g,k);else k(c,e)}function W(c){return function(e,g){if(typeof e!==
"string"){g=e;e="*"}var k=0,l=e.toLowerCase().match(Za)||[];if(f.isFunction(g))for(;e=l[k++];)if(e[0]==="+"){e=e.slice(1)||"*";(c[e]=c[e]||[]).unshift(g)}else(c[e]=c[e]||[]).push(g)}}function ea(c,e,g,k){function l(t){var A;n[t]=true;f.each(c[t]||[],function(M,F){M=F(e,g,k);if(typeof M==="string"&&!p&&!n[M]){e.dataTypes.unshift(M);l(M);return false}else if(p)return!(A=M)});return A}var n={},p=c===Sb;return l(e.dataTypes[0])||!n["*"]&&l("*")}function V(c,e){var g,k,l=f.ajaxSettings.flatOptions||{};
for(k in e)if(e[k]!==b)(l[k]?c:g||(g={}))[k]=e[k];g&&f.extend(true,c,g);return c}function aa(c,e,g){var k,l,n,p,t=c.contents,A=c.dataTypes,M=c.responseFields;for(p in M)if(p in g)e[M[p]]=g[p];for(;A[0]==="*";){A.shift();if(l===b)l=c.mimeType||e.getResponseHeader("Content-Type")}if(l)for(p in t)if(t[p]&&t[p].test(l)){A.unshift(p);break}if(A[0]in g)n=A[0];else{for(p in g){if(!A[0]||c.converters[p+" "+A[0]]){n=p;break}k||(k=p)}n=n||k}if(n){n!==A[0]&&A.unshift(n);return g[n]}}function oa(c,e){var g,k,
l,n,p={},t=0,A=c.dataTypes.slice(),M=A[0];if(c.dataFilter)e=c.dataFilter(e,c.dataType);if(A[1])for(l in c.converters)p[l.toLowerCase()]=c.converters[l];for(;k=A[++t];)if(k!=="*"){if(M!=="*"&&M!==k){l=p[M+" "+k]||p["* "+k];if(!l)for(g in p){n=g.split(" ");if(n[1]===k)if(l=p[M+" "+n[0]]||p["* "+n[0]]){if(l===true)l=p[g];else if(p[g]!==true){k=n[0];A.splice(t--,0,k)}break}}if(l!==true)if(l&&c["throws"])e=l(e);else try{e=l(e)}catch(F){return{state:"parsererror",error:l?F:"No conversion from "+M+" to "+
k}}}M=k}return{state:"success",data:e}}function qa(){try{return new a.XMLHttpRequest}catch(c){}}function za(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}function cb(){setTimeout(function(){ub=b});return ub=f.now()}function $a(c,e){f.each(e,function(g,k){for(var l=(Eb[g]||[]).concat(Eb["*"]),n=0,p=l.length;n<p;n++)if(l[n].call(c,g,k))return})}function kb(c,e,g){var k,l=0,n=Kb.length,p=f.Deferred().always(function(){delete t.elem}),t=function(){if(k)return false;var M=ub||cb();M=
Math.max(0,A.startTime+A.duration-M);for(var F=1-(M/A.duration||0),U=0,da=A.tweens.length;U<da;U++)A.tweens[U].run(F);p.notifyWith(c,[A,F,M]);if(F<1&&da)return M;else{p.resolveWith(c,[A]);return false}},A=p.promise({elem:c,props:f.extend({},e),opts:f.extend(true,{specialEasing:{}},g),originalProperties:e,originalOptions:g,startTime:ub||cb(),duration:g.duration,tweens:[],createTween:function(M,F){M=f.Tween(c,A.opts,M,F,A.opts.specialEasing[M]||A.opts.easing);A.tweens.push(M);return M},stop:function(M){var F=
0,U=M?A.tweens.length:0;if(k)return this;for(k=true;F<U;F++)A.tweens[F].run(1);M?p.resolveWith(c,[A,M]):p.rejectWith(c,[A,M]);return this}});g=A.props;for(Wa(g,A.opts.specialEasing);l<n;l++)if(e=Kb[l].call(A,c,g,A.opts))return e;$a(A,g);f.isFunction(A.opts.start)&&A.opts.start.call(c,A);f.fx.timer(f.extend(t,{elem:c,anim:A,queue:A.opts.queue}));return A.progress(A.opts.progress).done(A.opts.done,A.opts.complete).fail(A.opts.fail).always(A.opts.always)}function Wa(c,e){var g,k,l,n,p;for(l in c){k=
f.camelCase(l);n=e[k];g=c[l];if(f.isArray(g)){n=g[1];g=c[l]=g[0]}if(l!==k){c[k]=g;delete c[l]}if((p=f.cssHooks[k])&&"expand"in p){g=p.expand(g);delete c[k];for(l in g)if(!(l in c)){c[l]=g[l];e[l]=n}}else e[k]=n}}function Fb(c,e,g){var k,l,n,p,t,A,M=this,F=c.style,U={},da=[],ja=c.nodeType&&z(c);if(!g.queue){t=f._queueHooks(c,"fx");if(t.unqueued==null){t.unqueued=0;A=t.empty.fire;t.empty.fire=function(){t.unqueued||A()}}t.unqueued++;M.always(function(){M.always(function(){t.unqueued--;f.queue(c,"fx").length||
t.empty.fire()})})}if(c.nodeType===1&&("height"in e||"width"in e)){g.overflow=[F.overflow,F.overflowX,F.overflowY];if(f.css(c,"display")==="inline"&&f.css(c,"float")==="none")if(!f.support.inlineBlockNeedsLayout||T(c.nodeName)==="inline")F.display="inline-block";else F.zoom=1}if(g.overflow){F.overflow="hidden";f.support.shrinkWrapBlocks||M.always(function(){F.overflow=g.overflow[0];F.overflowX=g.overflow[1];F.overflowY=g.overflow[2]})}for(l in e){n=e[l];if(Uc.exec(n)){delete e[l];k=k||n==="toggle";
if(n!==(ja?"hide":"show"))da.push(l)}}if(e=da.length){n=f._data(c,"fxshow")||f._data(c,"fxshow",{});if("hidden"in n)ja=n.hidden;if(k)n.hidden=!ja;ja?f(c).show():M.done(function(){f(c).hide()});M.done(function(){var Aa;f._removeData(c,"fxshow");for(Aa in U)f.style(c,Aa,U[Aa])});for(l=0;l<e;l++){k=da[l];p=M.createTween(k,ja?n[k]:0);U[k]=n[k]||f.style(c,k);if(!(k in n)){n[k]=p.start;if(ja){p.end=p.start;p.start=k==="width"||k==="height"?1:0}}}}}function Ja(c,e,g,k,l){return new Ja.prototype.init(c,e,
g,k,l)}function ia(c,e){var g,k={height:c},l=0;for(e=e?1:0;l<4;l+=2-e){g=hb[l];k["margin"+g]=k["padding"+g]=c}if(e)k.opacity=k.width=c;return k}function G(c){return f.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var L,Y,ca=typeof b,Q=a.document,pa=a.location,sa=a.jQuery,Ca=a.$,Da={},Ra=[],lb=Ra.concat,Sa=Ra.push,Ka=Ra.slice,mb=Ra.indexOf,vb=Da.toString,Gb=Da.hasOwnProperty,Tb="1.9.1".trim,f=function(c,e){return new f.fn.init(c,e,Y)},Lb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
Za=/\S+/g,Vc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Wc=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,mc=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Xc=/^[\],:{}\s]*$/,Yc=/(?:^|:|,)(?:\s*\[)+/g,Zc=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,$c=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ad=/^-ms-/,bd=/-([\da-z])/gi,cd=function(c,e){return e.toUpperCase()},db=function(c){if(Q.addEventListener||c.type==="load"||Q.readyState==="complete"){nc();f.ready()}},nc=function(){if(Q.addEventListener){Q.removeEventListener("DOMContentLoaded",
db,false);a.removeEventListener("load",db,false)}else{Q.detachEvent("onreadystatechange",db);a.detachEvent("onload",db)}};f.fn=f.prototype={jquery:"1.9.1",constructor:f,init:function(c,e,g){var k;if(!c)return this;if(typeof c==="string")if((k=c.charAt(0)==="<"&&c.charAt(c.length-1)===">"&&c.length>=3?[null,c,null]:Wc.exec(c))&&(k[1]||!e)){if(k[1]){e=e instanceof f?e[0]:e;f.merge(this,f.parseHTML(k[1],e&&e.nodeType?e.ownerDocument||e:Q,true));if(mc.test(k[1])&&f.isPlainObject(e))for(k in e)f.isFunction(this[k])?
this[k](e[k]):this.attr(k,e[k])}else{if((e=Q.getElementById(k[2]))&&e.parentNode){if(e.id!==k[2])return g.find(c);this.length=1;this[0]=e}this.context=Q;this.selector=c}return this}else return!e||e.jquery?(e||g).find(c):this.constructor(e).find(c);else if(c.nodeType){this.context=this[0]=c;this.length=1;return this}else if(f.isFunction(c))return g.ready(c);if(c.selector!==b){this.selector=c.selector;this.context=c.context}return f.makeArray(c,this)},selector:"",length:0,size:function(){return this.length},
toArray:function(){return Ka.call(this)},get:function(c){return c==null?this.toArray():c<0?this[this.length+c]:this[c]},pushStack:function(c){c=f.merge(this.constructor(),c);c.prevObject=this;c.context=this.context;return c},each:function(c,e){return f.each(this,c,e)},ready:function(c){f.ready.promise().done(c);return this},slice:function(){return this.pushStack(Ka.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(c){var e=this.length;c=+c+
(c<0?e:0);return this.pushStack(c>=0&&c<e?[this[c]]:[])},map:function(c){return this.pushStack(f.map(this,function(e,g){return c.call(e,g,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:Sa,sort:[].sort,splice:[].splice};f.fn.init.prototype=f.fn;f.extend=f.fn.extend=function(){var c,e,g,k,l,n=arguments[0]||{},p=1,t=arguments.length,A=false;if(typeof n==="boolean"){A=n;n=arguments[1]||{};p=2}if(typeof n!=="object"&&!f.isFunction(n))n={};if(t===p){n=this;--p}for(;p<t;p++)if((l=
arguments[p])!=null)for(k in l){c=n[k];g=l[k];if(n!==g)if(A&&g&&(f.isPlainObject(g)||(e=f.isArray(g)))){if(e){e=false;c=c&&f.isArray(c)?c:[]}else c=c&&f.isPlainObject(c)?c:{};n[k]=f.extend(A,c,g)}else if(g!==b)n[k]=g}return n};f.extend({noConflict:function(c){if(a.$===f)a.$=Ca;if(c&&a.jQuery===f)a.jQuery=sa;return f},isReady:false,readyWait:1,holdReady:function(c){if(c)f.readyWait++;else f.ready(true)},ready:function(c){if(!(c===true?--f.readyWait:f.isReady)){if(!Q.body)return setTimeout(f.ready);
f.isReady=true;if(!(c!==true&&--f.readyWait>0)){L.resolveWith(Q,[f]);f.fn.trigger&&f(Q).trigger("ready").off("ready")}}},isFunction:function(c){return f.type(c)==="function"},isArray:Array.isArray||function(c){return f.type(c)==="array"},isWindow:function(c){return c!=null&&c==c.window},isNumeric:function(c){return!isNaN(parseFloat(c))&&isFinite(c)},type:function(c){if(c==null)return String(c);return typeof c==="object"||typeof c==="function"?Da[vb.call(c)]||"object":typeof c},isPlainObject:function(c){if(!c||
f.type(c)!=="object"||c.nodeType||f.isWindow(c))return false;try{if(c.constructor&&!Gb.call(c,"constructor")&&!Gb.call(c.constructor.prototype,"isPrototypeOf"))return false}catch(e){return false}var g;for(g in c);return g===b||Gb.call(c,g)},isEmptyObject:function(c){var e;for(e in c)return false;return true},error:function(c){throw new Error(c);},parseHTML:function(c,e,g){if(!c||typeof c!=="string")return null;if(typeof e==="boolean"){g=e;e=false}e=e||Q;var k=mc.exec(c);g=!g&&[];if(k)return[e.createElement(k[1])];
k=f.buildFragment([c],e,g);g&&f(g).remove();return f.merge([],k.childNodes)},parseJSON:function(c){if(a.JSON&&a.JSON.parse)return a.JSON.parse(c);if(c===null)return c;if(typeof c==="string")if(c=f.trim(c))if(Xc.test(c.replace(Zc,"@").replace($c,"]").replace(Yc,"")))return(new Function("return "+c))();f.error("Invalid JSON: "+c)},parseXML:function(c){var e,g;if(!c||typeof c!=="string")return null;try{if(a.DOMParser){g=new DOMParser;e=g.parseFromString(c,"text/xml")}else{e=new ActiveXObject("Microsoft.XMLDOM");
e.async="false";e.loadXML(c)}}catch(k){e=b}if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)f.error("Invalid XML: "+c);return e},noop:function(){},globalEval:function(c){if(c&&f.trim(c))(a.execScript||function(e){a.eval.call(a,e)})(c)},camelCase:function(c){return c.replace(ad,"ms-").replace(bd,cd)},nodeName:function(c,e){return c.nodeName&&c.nodeName.toLowerCase()===e.toLowerCase()},each:function(c,e,g){var k,l=0,n=c.length;k=d(c);if(g)if(k)for(;l<n;l++){k=e.apply(c[l],g);
if(k===false)break}else for(l in c){k=e.apply(c[l],g);if(k===false)break}else if(k)for(;l<n;l++){k=e.call(c[l],l,c[l]);if(k===false)break}else for(l in c){k=e.call(c[l],l,c[l]);if(k===false)break}return c},trim:Tb&&!Tb.call("\ufeff\u00a0")?function(c){return c==null?"":Tb.call(c)}:function(c){return c==null?"":(c+"").replace(Vc,"")},makeArray:function(c,e){e=e||[];if(c!=null)d(Object(c))?f.merge(e,typeof c==="string"?[c]:c):Sa.call(e,c);return e},inArray:function(c,e,g){var k;if(e){if(mb)return mb.call(e,
c,g);k=e.length;for(g=g?g<0?Math.max(0,k+g):g:0;g<k;g++)if(g in e&&e[g]===c)return g}return-1},merge:function(c,e){var g=e.length,k=c.length,l=0;if(typeof g==="number")for(;l<g;l++)c[k++]=e[l];else for(;e[l]!==b;)c[k++]=e[l++];c.length=k;return c},grep:function(c,e,g){var k,l=[],n=0,p=c.length;for(g=!!g;n<p;n++){k=!!e(c[n],n);g!==k&&l.push(c[n])}return l},map:function(c,e,g){var k,l=0,n=c.length,p=[];if(d(c))for(;l<n;l++){k=e(c[l],l,g);if(k!=null)p[p.length]=k}else for(l in c){k=e(c[l],l,g);if(k!=
null)p[p.length]=k}return lb.apply([],p)},guid:1,proxy:function(c,e){var g,k;if(typeof e==="string"){k=c[e];e=c;c=k}if(!f.isFunction(c))return b;g=Ka.call(arguments,2);k=function(){return c.apply(e||this,g.concat(Ka.call(arguments)))};k.guid=c.guid=c.guid||f.guid++;return k},access:function(c,e,g,k,l,n,p){var t=0,A=c.length,M=g==null;if(f.type(g)==="object"){l=true;for(t in g)f.access(c,e,t,g[t],true,n,p)}else if(k!==b){l=true;f.isFunction(k)||(p=true);if(M)if(p){e.call(c,k);e=null}else{M=e;e=function(F,
U,da){return M.call(f(F),da)}}if(e)for(;t<A;t++)e(c[t],g,p?k:k.call(c[t],t,e(c[t],g)))}return l?c:M?e.call(c):A?e(c[0],g):n},now:function(){return(new Date).getTime()}});f.ready.promise=function(c){if(!L){L=f.Deferred();if(Q.readyState==="complete")setTimeout(f.ready);else if(Q.addEventListener){Q.addEventListener("DOMContentLoaded",db,false);a.addEventListener("load",db,false)}else{Q.attachEvent("onreadystatechange",db);a.attachEvent("onload",db);var e=false;try{e=a.frameElement==null&&Q.documentElement}catch(g){}e&&
e.doScroll&&function k(){if(!f.isReady){try{e.doScroll("left")}catch(l){return setTimeout(k,50)}nc();f.ready()}}()}}return L.promise(c)};f.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(c,e){Da["[object "+e+"]"]=e.toLowerCase()});Y=f(Q);var ic={};f.Callbacks=function(c){c=typeof c==="string"?ic[c]||h(c):f.extend({},c);var e,g,k,l,n,p,t=[],A=!c.once&&[],M=function(U){g=c.memory&&U;k=true;n=p||0;p=0;l=t.length;for(e=true;t&&n<l;n++)if(t[n].apply(U[0],U[1])===
false&&c.stopOnFalse){g=false;break}e=false;if(t)if(A)A.length&&M(A.shift());else if(g)t=[];else F.disable()},F={add:function(){if(t){var U=t.length;(function da(ja){f.each(ja,function(Aa,Ga){Aa=f.type(Ga);if(Aa==="function"){if(!c.unique||!F.has(Ga))t.push(Ga)}else Ga&&Ga.length&&Aa!=="string"&&da(Ga)})})(arguments);if(e)l=t.length;else if(g){p=U;M(g)}}return this},remove:function(){t&&f.each(arguments,function(U,da){for(var ja;(ja=f.inArray(da,t,ja))>-1;){t.splice(ja,1);if(e){ja<=l&&l--;ja<=n&&
n--}}});return this},has:function(U){return U?f.inArray(U,t)>-1:!!(t&&t.length)},empty:function(){t=[];return this},disable:function(){t=A=g=b;return this},disabled:function(){return!t},lock:function(){A=b;g||F.disable();return this},locked:function(){return!A},fireWith:function(U,da){da=da||[];da=[U,da.slice?da.slice():da];if(t&&(!k||A))e?A.push(da):M(da);return this},fire:function(){F.fireWith(this,arguments);return this},fired:function(){return!!k}};return F};f.extend({Deferred:function(c){var e=
[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],g="pending",k={state:function(){return g},always:function(){l.done(arguments).fail(arguments);return this},then:function(){var n=arguments;return f.Deferred(function(p){f.each(e,function(t,A){var M=A[0],F=f.isFunction(n[t])&&n[t];l[A[1]](function(){var U=F&&F.apply(this,arguments);U&&f.isFunction(U.promise)?U.promise().done(p.resolve).fail(p.reject).progress(p.notify):
p[M+"With"](this===k?p.promise():this,F?[U]:arguments)})});n=null}).promise()},promise:function(n){return n!=null?f.extend(n,k):k}},l={};k.pipe=k.then;f.each(e,function(n,p){var t=p[2],A=p[3];k[p[1]]=t.add;A&&t.add(function(){g=A},e[n^1][2].disable,e[2][2].lock);l[p[0]]=function(){l[p[0]+"With"](this===l?k:this,arguments);return this};l[p[0]+"With"]=t.fireWith});k.promise(l);c&&c.call(l,l);return l},when:function(c){var e=0,g=Ka.call(arguments),k=g.length,l=k!==1||c&&f.isFunction(c.promise)?k:0,n=
l===1?c:f.Deferred(),p=function(F,U,da){return function(ja){U[F]=this;da[F]=arguments.length>1?Ka.call(arguments):ja;if(da===t)n.notifyWith(U,da);else--l||n.resolveWith(U,da)}},t,A,M;if(k>1){t=new Array(k);A=new Array(k);for(M=new Array(k);e<k;e++)if(g[e]&&f.isFunction(g[e].promise))g[e].promise().done(p(e,M,g)).fail(n.reject).progress(p(e,A,t));else--l}l||n.resolveWith(M,g);return n.promise()}});f.support=function(){var c,e,g,k,l,n,p,t=Q.createElement("div");t.setAttribute("className","t");t.innerHTML=
"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";e=t.getElementsByTagName("*");g=t.getElementsByTagName("a")[0];if(!e||!g||!e.length)return{};k=Q.createElement("select");l=k.appendChild(Q.createElement("option"));e=t.getElementsByTagName("input")[0];g.style.cssText="top:1px;float:left;opacity:.5";c={getSetAttribute:t.className!=="t",leadingWhitespace:t.firstChild.nodeType===3,tbody:!t.getElementsByTagName("tbody").length,htmlSerialize:!!t.getElementsByTagName("link").length,style:/top/.test(g.getAttribute("style")),
hrefNormalized:g.getAttribute("href")==="/a",opacity:/^0.5/.test(g.style.opacity),cssFloat:!!g.style.cssFloat,checkOn:!!e.value,optSelected:l.selected,enctype:!!Q.createElement("form").enctype,html5Clone:Q.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:Q.compatMode==="CSS1Compat",deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};e.checked=true;c.noCloneChecked=e.cloneNode(true).checked;
k.disabled=true;c.optDisabled=!l.disabled;try{delete t.test}catch(A){c.deleteExpando=false}e=Q.createElement("input");e.setAttribute("value","");c.input=e.getAttribute("value")==="";e.value="t";e.setAttribute("type","radio");c.radioValue=e.value==="t";e.setAttribute("checked","t");e.setAttribute("name","t");g=Q.createDocumentFragment();g.appendChild(e);c.appendChecked=e.checked;c.checkClone=g.cloneNode(true).cloneNode(true).lastChild.checked;if(t.attachEvent){t.attachEvent("onclick",function(){c.noCloneEvent=
false});t.cloneNode(true).click()}for(p in{submit:true,change:true,focusin:true}){t.setAttribute(g="on"+p,"t");c[p+"Bubbles"]=g in a||t.attributes[g].expando===false}t.style.backgroundClip="content-box";t.cloneNode(true).style.backgroundClip="";c.clearCloneStyle=t.style.backgroundClip==="content-box";f(function(){var M,F,U=Q.getElementsByTagName("body")[0];if(U){M=Q.createElement("div");M.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";U.appendChild(M).appendChild(t);
t.innerHTML="<table><tr><td></td><td>t</td></tr></table>";F=t.getElementsByTagName("td");F[0].style.cssText="padding:0;margin:0;border:0;display:none";n=F[0].offsetHeight===0;F[0].style.display="";F[1].style.display="none";c.reliableHiddenOffsets=n&&F[0].offsetHeight===0;t.innerHTML="";t.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";c.boxSizing=t.offsetWidth===4;
c.doesNotIncludeMarginInBodyOffset=U.offsetTop!==1;if(a.getComputedStyle){c.pixelPosition=(a.getComputedStyle(t,null)||{}).top!=="1%";c.boxSizingReliable=(a.getComputedStyle(t,null)||{width:"4px"}).width==="4px";F=t.appendChild(Q.createElement("div"));F.style.cssText=t.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;";F.style.marginRight=F.style.width="0";t.style.width="1px";c.reliableMarginRight=!parseFloat((a.getComputedStyle(F,
null)||{}).marginRight)}if(typeof t.style.zoom!==ca){t.innerHTML="";t.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1";c.inlineBlockNeedsLayout=t.offsetWidth===3;t.style.display="block";t.innerHTML="<div></div>";t.firstChild.style.width="5px";c.shrinkWrapBlocks=t.offsetWidth!==3;if(c.inlineBlockNeedsLayout)U.style.zoom=1}U.removeChild(M);t=null}});e=k=g=l=g=e=null;
return c}();var Pc=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Oc=/([A-Z])/g;f.extend({cache:{},expando:"jQuery"+("1.9.1"+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(c){c=c.nodeType?f.cache[c[f.expando]]:c[f.expando];return!!c&&!B(c)},data:function(c,e,g){return m(c,e,g)},removeData:function(c,e){return q(c,e)},_data:function(c,e,g){return m(c,e,g,true)},_removeData:function(c,e){return q(c,e,true)},acceptData:function(c){if(c.nodeType&&
c.nodeType!==1&&c.nodeType!==9)return false;var e=c.nodeName&&f.noData[c.nodeName.toLowerCase()];return!e||e!==true&&c.getAttribute("classid")===e}});f.fn.extend({data:function(c,e){var g,k,l=this[0],n=0,p=null;if(c===b){if(this.length){p=f.data(l);if(l.nodeType===1&&!f._data(l,"parsedAttrs")){for(g=l.attributes;n<g.length;n++){k=g[n].name;if(!k.indexOf("data-")){k=f.camelCase(k.slice(5));w(l,k,p[k])}}f._data(l,"parsedAttrs",true)}}return p}if(typeof c==="object")return this.each(function(){f.data(this,
c)});return f.access(this,function(t){if(t===b)return l?w(l,c,f.data(l,c)):null;this.each(function(){f.data(this,c,t)})},null,e,arguments.length>1,null,true)},removeData:function(c){return this.each(function(){f.removeData(this,c)})}});f.extend({queue:function(c,e,g){var k;if(c){e=(e||"fx")+"queue";k=f._data(c,e);if(g)if(!k||f.isArray(g))k=f._data(c,e,f.makeArray(g));else k.push(g);return k||[]}},dequeue:function(c,e){e=e||"fx";var g=f.queue(c,e),k=g.length,l=g.shift(),n=f._queueHooks(c,e),p=function(){f.dequeue(c,
e)};if(l==="inprogress"){l=g.shift();k--}if(n.cur=l){e==="fx"&&g.unshift("inprogress");delete n.stop;l.call(c,p,n)}!k&&n&&n.empty.fire()},_queueHooks:function(c,e){var g=e+"queueHooks";return f._data(c,g)||f._data(c,g,{empty:f.Callbacks("once memory").add(function(){f._removeData(c,e+"queue");f._removeData(c,g)})})}});f.fn.extend({queue:function(c,e){var g=2;if(typeof c!=="string"){e=c;c="fx";g--}if(arguments.length<g)return f.queue(this[0],c);return e===b?this:this.each(function(){var k=f.queue(this,
c,e);f._queueHooks(this,c);c==="fx"&&k[0]!=="inprogress"&&f.dequeue(this,c)})},dequeue:function(c){return this.each(function(){f.dequeue(this,c)})},delay:function(c,e){c=f.fx?f.fx.speeds[c]||c:c;e=e||"fx";return this.queue(e,function(g,k){var l=setTimeout(g,c);k.stop=function(){clearTimeout(l)}})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,e){var g,k=1,l=f.Deferred(),n=this,p=this.length,t=function(){--k||l.resolveWith(n,[n])};if(typeof c!=="string"){e=c;c=b}for(c=c||
"fx";p--;)if((g=f._data(n[p],c+"queueHooks"))&&g.empty){k++;g.empty.add(t)}t();return l.promise(e)}});var wb,oc,Ub=/[\t\r\n]/g,dd=/\r/g,ed=/^(?:input|select|textarea|button|object)$/i,fd=/^(?:a|area)$/i,pc=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Vb=/^(?:checked|selected)$/i,nb=f.support.getSetAttribute,Wb=f.support.input;f.fn.extend({attr:function(c,e){return f.access(this,f.attr,c,e,arguments.length>1)},removeAttr:function(c){return this.each(function(){f.removeAttr(this,
c)})},prop:function(c,e){return f.access(this,f.prop,c,e,arguments.length>1)},removeProp:function(c){c=f.propFix[c]||c;return this.each(function(){try{this[c]=b;delete this[c]}catch(e){}})},addClass:function(c){var e,g,k,l,n,p=0,t=this.length;e=typeof c==="string"&&c;if(f.isFunction(c))return this.each(function(A){f(this).addClass(c.call(this,A,this.className))});if(e)for(e=(c||"").match(Za)||[];p<t;p++){g=this[p];if(k=g.nodeType===1&&(g.className?(" "+g.className+" ").replace(Ub," "):" ")){for(n=
0;l=e[n++];)if(k.indexOf(" "+l+" ")<0)k+=l+" ";g.className=f.trim(k)}}return this},removeClass:function(c){var e,g,k,l,n,p=0,t=this.length;e=arguments.length===0||typeof c==="string"&&c;if(f.isFunction(c))return this.each(function(A){f(this).removeClass(c.call(this,A,this.className))});if(e)for(e=(c||"").match(Za)||[];p<t;p++){g=this[p];if(k=g.nodeType===1&&(g.className?(" "+g.className+" ").replace(Ub," "):"")){for(n=0;l=e[n++];)for(;k.indexOf(" "+l+" ")>=0;)k=k.replace(" "+l+" "," ");g.className=
c?f.trim(k):""}}return this},toggleClass:function(c,e){var g=typeof c,k=typeof e==="boolean";if(f.isFunction(c))return this.each(function(l){f(this).toggleClass(c.call(this,l,this.className,e),e)});return this.each(function(){if(g==="string")for(var l,n=0,p=f(this),t=e,A=c.match(Za)||[];l=A[n++];){t=k?t:!p.hasClass(l);p[t?"addClass":"removeClass"](l)}else if(g===ca||g==="boolean"){this.className&&f._data(this,"__className__",this.className);this.className=this.className||c===false?"":f._data(this,
"__className__")||""}})},hasClass:function(c){c=" "+c+" ";for(var e=0,g=this.length;e<g;e++)if(this[e].nodeType===1&&(" "+this[e].className+" ").replace(Ub," ").indexOf(c)>=0)return true;return false},val:function(c){var e,g,k,l=this[0];if(arguments.length){k=f.isFunction(c);return this.each(function(n){var p=f(this);if(this.nodeType===1){n=k?c.call(this,n,p.val()):c;if(n==null)n="";else if(typeof n==="number")n+="";else if(f.isArray(n))n=f.map(n,function(t){return t==null?"":t+""});g=f.valHooks[this.type]||
f.valHooks[this.nodeName.toLowerCase()];if(!g||!("set"in g)||g.set(this,n,"value")===b)this.value=n}})}else if(l){if((g=f.valHooks[l.type]||f.valHooks[l.nodeName.toLowerCase()])&&"get"in g&&(e=g.get(l,"value"))!==b)return e;e=l.value;return typeof e==="string"?e.replace(dd,""):e==null?"":e}}});f.extend({valHooks:{option:{get:function(c){var e=c.attributes.value;return!e||e.specified?c.value:c.text}},select:{get:function(c){for(var e,g=c.options,k=c.selectedIndex,l=(c=c.type==="select-one"||k<0)?null:
[],n=c?k+1:g.length,p=k<0?n:c?k:0;p<n;p++){e=g[p];if((e.selected||p===k)&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){e=f(e).val();if(c)return e;l.push(e)}}return l},set:function(c,e){var g=f.makeArray(e);f(c).find("option").each(function(){this.selected=f.inArray(f(this).val(),g)>=0});if(!g.length)c.selectedIndex=-1;return g}}},attr:function(c,e,g){var k,l,n;l=c.nodeType;if(!(!c||l===3||l===8||l===2)){if(typeof c.getAttribute===
ca)return f.prop(c,e,g);if(l=l!==1||!f.isXMLDoc(c)){e=e.toLowerCase();k=f.attrHooks[e]||(pc.test(e)?oc:wb)}if(g!==b)if(g===null)f.removeAttr(c,e);else if(k&&l&&"set"in k&&(n=k.set(c,g,e))!==b)return n;else{c.setAttribute(e,g+"");return g}else if(k&&l&&"get"in k&&(n=k.get(c,e))!==null)return n;else{if(typeof c.getAttribute!==ca)n=c.getAttribute(e);return n==null?b:n}}},removeAttr:function(c,e){var g,k=0,l=e&&e.match(Za);if(l&&c.nodeType===1)for(;e=l[k++];){g=f.propFix[e]||e;if(pc.test(e))if(!nb&&Vb.test(e))c[f.camelCase("default-"+
e)]=c[g]=false;else c[g]=false;else f.attr(c,e,"");c.removeAttribute(nb?e:g)}},attrHooks:{type:{set:function(c,e){if(!f.support.radioValue&&e==="radio"&&f.nodeName(c,"input")){var g=c.value;c.setAttribute("type",e);if(g)c.value=g;return e}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},
prop:function(c,e,g){var k,l,n=c.nodeType;if(!(!c||n===3||n===8||n===2)){if(n!==1||!f.isXMLDoc(c)){e=f.propFix[e]||e;l=f.propHooks[e]}return g!==b?l&&"set"in l&&(k=l.set(c,g,e))!==b?k:(c[e]=g):l&&"get"in l&&(k=l.get(c,e))!==null?k:c[e]}},propHooks:{tabIndex:{get:function(c){var e=c.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):ed.test(c.nodeName)||fd.test(c.nodeName)&&c.href?0:b}}}});oc={get:function(c,e){var g=f.prop(c,e),k=typeof g==="boolean"&&c.getAttribute(e);return(c=
typeof g==="boolean"?Wb&&nb?k!=null:Vb.test(e)?c[f.camelCase("default-"+e)]:!!k:c.getAttributeNode(e))&&c.value!==false?e.toLowerCase():b},set:function(c,e,g){if(e===false)f.removeAttr(c,g);else if(Wb&&nb||!Vb.test(g))c.setAttribute(!nb&&f.propFix[g]||g,g);else c[f.camelCase("default-"+g)]=c[g]=true;return g}};if(!Wb||!nb)f.attrHooks.value={get:function(c,e){e=c.getAttributeNode(e);return f.nodeName(c,"input")?c.defaultValue:e&&e.specified?e.value:b},set:function(c,e,g){if(f.nodeName(c,"input"))c.defaultValue=
e;else return wb&&wb.set(c,e,g)}};if(!nb){wb=f.valHooks.button={get:function(c,e){return(c=c.getAttributeNode(e))&&(e==="id"||e==="name"||e==="coords"?c.value!=="":c.specified)?c.value:b},set:function(c,e,g){var k=c.getAttributeNode(g);k||c.setAttributeNode(k=c.ownerDocument.createAttribute(g));k.value=e+="";return g==="value"||e===c.getAttribute(g)?e:b}};f.attrHooks.contenteditable={get:wb.get,set:function(c,e,g){wb.set(c,e===""?false:e,g)}};f.each(["width","height"],function(c,e){f.attrHooks[e]=
f.extend(f.attrHooks[e],{set:function(g,k){if(k===""){g.setAttribute(e,"auto");return k}}})})}if(!f.support.hrefNormalized){f.each(["href","src","width","height"],function(c,e){f.attrHooks[e]=f.extend(f.attrHooks[e],{get:function(g){g=g.getAttribute(e,2);return g==null?b:g}})});f.each(["href","src"],function(c,e){f.propHooks[e]={get:function(g){return g.getAttribute(e,4)}}})}if(!f.support.style)f.attrHooks.style={get:function(c){return c.style.cssText||b},set:function(c,e){return c.style.cssText=
e+""}};if(!f.support.optSelected)f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(){return null}});if(!f.support.enctype)f.propFix.enctype="encoding";f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(c){return c.getAttribute("value")===null?"on":c.value}}});f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(c,e){if(f.isArray(e))return c.checked=f.inArray(f(c).val(),e)>=0}})});var Xb=/^(?:input|select|textarea)$/i,
gd=/^key/,hd=/^(?:mouse|contextmenu)|click/,qc=/^(?:focusinfocus|focusoutblur)$/,rc=/^([^.]*)(?:\.(.+)|)$/;f.event={global:{},add:function(c,e,g,k,l){var n,p,t,A,M,F,U,da,ja;if(t=f._data(c)){if(g.handler){A=g;g=A.handler;l=A.selector}if(!g.guid)g.guid=f.guid++;if(!(p=t.events))p=t.events={};if(!(M=t.handle)){M=t.handle=function(Aa){return typeof f!==ca&&(!Aa||f.event.triggered!==Aa.type)?f.event.dispatch.apply(M.elem,arguments):b};M.elem=c}e=(e||"").match(Za)||[""];for(t=e.length;t--;){n=rc.exec(e[t])||
[];da=F=n[1];ja=(n[2]||"").split(".").sort();n=f.event.special[da]||{};da=(l?n.delegateType:n.bindType)||da;n=f.event.special[da]||{};F=f.extend({type:da,origType:F,data:k,handler:g,guid:g.guid,selector:l,needsContext:l&&f.expr.match.needsContext.test(l),namespace:ja.join(".")},A);if(!(U=p[da])){U=p[da]=[];U.delegateCount=0;if(!n.setup||n.setup.call(c,k,ja,M)===false)if(c.addEventListener)c.addEventListener(da,M,false);else c.attachEvent&&c.attachEvent("on"+da,M)}if(n.add){n.add.call(c,F);if(!F.handler.guid)F.handler.guid=
g.guid}l?U.splice(U.delegateCount++,0,F):U.push(F);f.event.global[da]=true}c=null}},remove:function(c,e,g,k,l){var n,p,t,A,M,F,U,da,ja,Aa,Ga,Ta=f.hasData(c)&&f._data(c);if(Ta&&(F=Ta.events)){e=(e||"").match(Za)||[""];for(M=e.length;M--;){t=rc.exec(e[M])||[];ja=Ga=t[1];Aa=(t[2]||"").split(".").sort();if(ja){U=f.event.special[ja]||{};ja=(k?U.delegateType:U.bindType)||ja;da=F[ja]||[];t=t[2]&&new RegExp("(^|\\.)"+Aa.join("\\.(?:.*\\.|)")+"(\\.|$)");for(A=n=da.length;n--;){p=da[n];if((l||Ga===p.origType)&&
(!g||g.guid===p.guid)&&(!t||t.test(p.namespace))&&(!k||k===p.selector||k==="**"&&p.selector)){da.splice(n,1);p.selector&&da.delegateCount--;U.remove&&U.remove.call(c,p)}}if(A&&!da.length){if(!U.teardown||U.teardown.call(c,Aa,Ta.handle)===false)f.removeEvent(c,ja,Ta.handle);delete F[ja]}}else for(ja in F)f.event.remove(c,ja+e[M],g,k,true)}if(f.isEmptyObject(F)){delete Ta.handle;f._removeData(c,"events")}}},trigger:function(c,e,g,k){var l,n,p,t,A,M,F=[g||Q],U=Gb.call(c,"type")?c.type:c;A=Gb.call(c,
"namespace")?c.namespace.split("."):[];p=l=g=g||Q;if(!(g.nodeType===3||g.nodeType===8))if(!qc.test(U+f.event.triggered)){if(U.indexOf(".")>=0){A=U.split(".");U=A.shift();A.sort()}n=U.indexOf(":")<0&&"on"+U;c=c[f.expando]?c:new f.Event(U,typeof c==="object"&&c);c.isTrigger=true;c.namespace=A.join(".");c.namespace_re=c.namespace?new RegExp("(^|\\.)"+A.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;c.result=b;if(!c.target)c.target=g;e=e==null?[c]:f.makeArray(e,[c]);A=f.event.special[U]||{};if(!(!k&&A.trigger&&
A.trigger.apply(g,e)===false)){if(!k&&!A.noBubble&&!f.isWindow(g)){t=A.delegateType||U;if(!qc.test(t+U))p=p.parentNode;for(;p;p=p.parentNode){F.push(p);l=p}if(l===(g.ownerDocument||Q))F.push(l.defaultView||l.parentWindow||a)}for(M=0;(p=F[M++])&&!c.isPropagationStopped();){c.type=M>1?t:A.bindType||U;(l=(f._data(p,"events")||{})[c.type]&&f._data(p,"handle"))&&l.apply(p,e);(l=n&&p[n])&&f.acceptData(p)&&l.apply&&l.apply(p,e)===false&&c.preventDefault()}c.type=U;if(!k&&!c.isDefaultPrevented())if((!A._default||
A._default.apply(g.ownerDocument,e)===false)&&!(U==="click"&&f.nodeName(g,"a"))&&f.acceptData(g))if(n&&g[U]&&!f.isWindow(g)){if(l=g[n])g[n]=null;f.event.triggered=U;try{g[U]()}catch(da){}f.event.triggered=b;if(l)g[n]=l}return c.result}}},dispatch:function(c){c=f.event.fix(c);var e,g,k,l,n=[],p=Ka.call(arguments);e=(f._data(this,"events")||{})[c.type]||[];var t=f.event.special[c.type]||{};p[0]=c;c.delegateTarget=this;if(!(t.preDispatch&&t.preDispatch.call(this,c)===false)){n=f.event.handlers.call(this,
c,e);for(e=0;(k=n[e++])&&!c.isPropagationStopped();){c.currentTarget=k.elem;for(l=0;(g=k.handlers[l++])&&!c.isImmediatePropagationStopped();)if(!c.namespace_re||c.namespace_re.test(g.namespace)){c.handleObj=g;c.data=g.data;g=((f.event.special[g.origType]||{}).handle||g.handler).apply(k.elem,p);if(g!==b)if((c.result=g)===false){c.preventDefault();c.stopPropagation()}}}t.postDispatch&&t.postDispatch.call(this,c);return c.result}},handlers:function(c,e){var g,k,l,n,p=[],t=e.delegateCount,A=c.target;
if(t&&A.nodeType&&(!c.button||c.type!=="click"))for(;A!=this;A=A.parentNode||this)if(A.nodeType===1&&(A.disabled!==true||c.type!=="click")){l=[];for(n=0;n<t;n++){k=e[n];g=k.selector+" ";if(l[g]===b)l[g]=k.needsContext?f(g,this).index(A)>=0:f.find(g,this,null,[A]).length;l[g]&&l.push(k)}l.length&&p.push({elem:A,handlers:l})}t<e.length&&p.push({elem:this,handlers:e.slice(t)});return p},fix:function(c){if(c[f.expando])return c;var e,g,k;e=c.type;var l=c,n=this.fixHooks[e];n||(this.fixHooks[e]=n=hd.test(e)?
this.mouseHooks:gd.test(e)?this.keyHooks:{});k=n.props?this.props.concat(n.props):this.props;c=new f.Event(l);for(e=k.length;e--;){g=k[e];c[g]=l[g]}if(!c.target)c.target=l.srcElement||Q;if(c.target.nodeType===3)c.target=c.target.parentNode;c.metaKey=!!c.metaKey;return n.filter?n.filter(c,l):c},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(c,
e){if(c.which==null)c.which=e.charCode!=null?e.charCode:e.keyCode;return c}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(c,e){var g,k,l=e.button,n=e.fromElement;if(c.pageX==null&&e.clientX!=null){g=c.target.ownerDocument||Q;k=g.documentElement;g=g.body;c.pageX=e.clientX+(k&&k.scrollLeft||g&&g.scrollLeft||0)-(k&&k.clientLeft||g&&g.clientLeft||0);c.pageY=e.clientY+(k&&k.scrollTop||g&&g.scrollTop||0)-
(k&&k.clientTop||g&&g.clientTop||0)}if(!c.relatedTarget&&n)c.relatedTarget=n===c.target?e.toElement:n;if(!c.which&&l!==b)c.which=l&1?1:l&2?3:l&4?2:0;return c}},special:{load:{noBubble:true},click:{trigger:function(){if(f.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}}},focus:{trigger:function(){if(this!==Q.activeElement&&this.focus)try{this.focus();return false}catch(c){}},delegateType:"focusin"},blur:{trigger:function(){if(this===Q.activeElement&&this.blur){this.blur();
return false}},delegateType:"focusout"},beforeunload:{postDispatch:function(c){if(c.result!==b)c.originalEvent.returnValue=c.result}}},simulate:function(c,e,g,k){c=f.extend(new f.Event,g,{type:c,isSimulated:true,originalEvent:{}});k?f.event.trigger(c,null,e):f.event.dispatch.call(e,c);c.isDefaultPrevented()&&g.preventDefault()}};f.removeEvent=Q.removeEventListener?function(c,e,g){c.removeEventListener&&c.removeEventListener(e,g,false)}:function(c,e,g){e="on"+e;if(c.detachEvent){if(typeof c[e]===ca)c[e]=
null;c.detachEvent(e,g)}};f.Event=function(c,e){if(!(this instanceof f.Event))return new f.Event(c,e);if(c&&c.type){this.originalEvent=c;this.type=c.type;this.isDefaultPrevented=c.defaultPrevented||c.returnValue===false||c.getPreventDefault&&c.getPreventDefault()?C:X}else this.type=c;e&&f.extend(this,e);this.timeStamp=c&&c.timeStamp||f.now();this[f.expando]=true};f.Event.prototype={isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X,preventDefault:function(){var c=this.originalEvent;
this.isDefaultPrevented=C;if(c)if(c.preventDefault)c.preventDefault();else c.returnValue=false},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=C;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=C;this.stopPropagation()}};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(c,e){f.event.special[c]={delegateType:e,bindType:e,handle:function(g){var k,l=g.relatedTarget,n=g.handleObj;
if(!l||l!==this&&!f.contains(this,l)){g.type=n.origType;k=n.handler.apply(this,arguments);g.type=e}return k}}});if(!f.support.submitBubbles)f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return false;f.event.add(this,"click._submit keypress._submit",function(c){c=c.target;if((c=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b)&&!f._data(c,"submitBubbles")){f.event.add(c,"submit._submit",function(e){e._submit_bubble=true});f._data(c,"submitBubbles",true)}})},postDispatch:function(c){if(c._submit_bubble){delete c._submit_bubble;
this.parentNode&&!c.isTrigger&&f.event.simulate("submit",this.parentNode,c,true)}},teardown:function(){if(f.nodeName(this,"form"))return false;f.event.remove(this,"._submit")}};if(!f.support.changeBubbles)f.event.special.change={setup:function(){if(Xb.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(c){if(c.originalEvent.propertyName==="checked")this._just_changed=true});f.event.add(this,"click._change",function(c){if(this._just_changed&&
!c.isTrigger)this._just_changed=false;f.event.simulate("change",this,c,true)})}return false}f.event.add(this,"beforeactivate._change",function(c){c=c.target;if(Xb.test(c.nodeName)&&!f._data(c,"changeBubbles")){f.event.add(c,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&f.event.simulate("change",this.parentNode,e,true)});f._data(c,"changeBubbles",true)}})},handle:function(c){var e=c.target;if(this!==e||c.isSimulated||c.isTrigger||e.type!=="radio"&&e.type!=="checkbox")return c.handleObj.handler.apply(this,
arguments)},teardown:function(){f.event.remove(this,"._change");return!Xb.test(this.nodeName)}};f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(c,e){var g=0,k=function(l){f.event.simulate(e,l.target,f.event.fix(l),true)};f.event.special[e]={setup:function(){g++===0&&Q.addEventListener(c,k,true)},teardown:function(){--g===0&&Q.removeEventListener(c,k,true)}}});f.fn.extend({on:function(c,e,g,k,l){var n,p;if(typeof c==="object"){if(typeof e!=="string"){g=g||e;e=b}for(n in c)this.on(n,
e,g,c[n],l);return this}if(g==null&&k==null){k=e;g=e=b}else if(k==null)if(typeof e==="string"){k=g;g=b}else{k=g;g=e;e=b}if(k===false)k=X;else if(!k)return this;if(l===1){p=k;k=function(t){f().off(t);return p.apply(this,arguments)};k.guid=p.guid||(p.guid=f.guid++)}return this.each(function(){f.event.add(this,c,k,g,e)})},one:function(c,e,g,k){return this.on(c,e,g,k,1)},off:function(c,e,g){var k;if(c&&c.preventDefault&&c.handleObj){k=c.handleObj;f(c.delegateTarget).off(k.namespace?k.origType+"."+k.namespace:
k.origType,k.selector,k.handler);return this}if(typeof c==="object"){for(k in c)this.off(k,e,c[k]);return this}if(e===false||typeof e==="function"){g=e;e=b}if(g===false)g=X;return this.each(function(){f.event.remove(this,c,g,e)})},bind:function(c,e,g){return this.on(c,null,e,g)},unbind:function(c,e){return this.off(c,null,e)},delegate:function(c,e,g,k){return this.on(e,c,g,k)},undelegate:function(c,e,g){return arguments.length===1?this.off(c,"**"):this.off(e,c||"**",g)},trigger:function(c,e){return this.each(function(){f.event.trigger(c,
e,this)})},triggerHandler:function(c,e){var g=this[0];if(g)return f.event.trigger(c,e,g,true)}});(function(c,e){function g(r){return id.test(r+"")}function k(){var r,y=[];return r=function(u,E){if(y.push(u+=" ")>ma.cacheLength)delete r[y.shift()];return r[u]=E}}function l(r){r[Ea]=true;return r}function n(r){var y=Na.createElement("div");try{return r(y)}catch(u){return false}finally{}}function p(r,y,u,E){var R,Z,S,ha,ba;if((y?y.ownerDocument||y:ob)!==Na)La(y);y=y||Na;u=u||[];if(!r||typeof r!=="string")return u;
if((ha=y.nodeType)!==1&&ha!==9)return[];if(!Xa&&!E){if(R=jd.exec(r))if(S=R[1])if(ha===9)if((Z=y.getElementById(S))&&Z.parentNode){if(Z.id===S){u.push(Z);return u}}else return u;else{if(y.ownerDocument&&(Z=y.ownerDocument.getElementById(S))&&Hb(y,Z)&&Z.id===S){u.push(Z);return u}}else if(R[2]){xb.apply(u,yb.call(y.getElementsByTagName(r),0));return u}else if((S=R[3])&&Ia.getByClassName&&y.getElementsByClassName){xb.apply(u,yb.call(y.getElementsByClassName(S),0));return u}if(Ia.qsa&&!Ya.test(r)){R=
true;Z=Ea;S=y;ba=ha===9&&r;if(ha===1&&y.nodeName.toLowerCase()!=="object"){ha=U(r);if(R=y.getAttribute("id"))Z=R.replace(kd,"\\$&");else y.setAttribute("id",Z);Z="[id='"+Z+"'] ";for(S=ha.length;S--;)ha[S]=Z+da(ha[S]);S=Yb.test(r)&&y.parentNode||y;ba=ha.join(",")}if(ba)try{xb.apply(u,yb.call(S.querySelectorAll(ba),0));return u}catch(wa){}finally{R||y.removeAttribute("id")}}}return ta(r.replace(Mb,"$1"),y,u,E)}function t(r,y){var u=y&&r,E=u&&(~y.sourceIndex||sc)-(~r.sourceIndex||sc);if(E)return E;if(u)for(;u=
u.nextSibling;)if(u===y)return-1;return r?1:-1}function A(r){return function(y){return y.nodeName.toLowerCase()==="input"&&y.type===r}}function M(r){return function(y){var u=y.nodeName.toLowerCase();return(u==="input"||u==="button")&&y.type===r}}function F(r){return l(function(y){y=+y;return l(function(u,E){for(var R,Z=r([],u.length,y),S=Z.length;S--;)if(u[R=Z[S]])u[R]=!(E[R]=u[R])})})}function U(r,y){var u,E,R,Z,S,ha,ba;if(S=tc[r+" "])return y?0:S.slice(0);S=r;ha=[];for(ba=ma.preFilter;S;){if(!u||
(E=ld.exec(S))){if(E)S=S.slice(E[0].length)||S;ha.push(R=[])}u=false;if(E=md.exec(S)){u=E.shift();R.push({value:u,type:E[0].replace(Mb," ")});S=S.slice(u.length)}for(Z in ma.filter)if((E=Nb[Z].exec(S))&&(!ba[Z]||(E=ba[Z](E)))){u=E.shift();R.push({value:u,type:Z,matches:E});S=S.slice(u.length)}if(!u)break}return y?S.length:S?p.error(r):tc(r,ha).slice(0)}function da(r){for(var y=0,u=r.length,E="";y<u;y++)E+=r[y].value;return E}function ja(r,y,u){var E=y.dir,R=u&&E==="parentNode",Z=nd++;return y.first?
function(S,ha,ba){for(;S=S[E];)if(S.nodeType===1||R)return r(S,ha,ba)}:function(S,ha,ba){var wa,na,xa,va=ab+" "+Z;if(ba)for(;S=S[E];){if(S.nodeType===1||R)if(r(S,ha,ba))return true}else for(;S=S[E];)if(S.nodeType===1||R){xa=S[Ea]||(S[Ea]={});if((na=xa[E])&&na[0]===va){if((wa=na[1])===true||wa===Ha)return wa===true}else{na=xa[E]=[va];na[1]=r(S,ha,ba)||Ha;if(na[1]===true)return true}}}}function Aa(r){return r.length>1?function(y,u,E){for(var R=r.length;R--;)if(!r[R](y,u,E))return false;return true}:
r[0]}function Ga(r,y,u,E,R){for(var Z,S=[],ha=0,ba=r.length,wa=y!=null;ha<ba;ha++)if(Z=r[ha])if(!u||u(Z,E,R)){S.push(Z);wa&&y.push(ha)}return S}function Ta(r,y,u,E,R,Z){if(E&&!E[Ea])E=Ta(E);if(R&&!R[Ea])R=Ta(R,Z);return l(function(S,ha,ba,wa){var na,xa,va=[],Ba=[],Ma=ha.length,Fa=S||Ob(y||"*",ba.nodeType?[ba]:ba,[]);Fa=r&&(S||!y)?Ga(Fa,va,r,ba,wa):Fa;var ya=u?R||(S?r:Ma||E)?[]:ha:Fa;u&&u(Fa,ya,ba,wa);if(E){na=Ga(ya,Ba);E(na,[],ba,wa);for(ba=na.length;ba--;)if(xa=na[ba])ya[Ba[ba]]=!(Fa[Ba[ba]]=xa)}if(S){if(R||
r){if(R){na=[];for(ba=ya.length;ba--;)if(xa=ya[ba])na.push(Fa[ba]=xa);R(null,ya=[],na,wa)}for(ba=ya.length;ba--;)if((xa=ya[ba])&&(na=R?Zb.call(S,xa):va[ba])>-1)S[na]=!(ha[na]=xa)}}else{ya=Ga(ya===ha?ya.splice(Ma,ya.length):ya);R?R(null,ha,ya,wa):xb.apply(ha,ya)}})}function zb(r){var y,u,E,R=r.length,Z=ma.relative[r[0].type];u=Z||ma.relative[" "];for(var S=Z?1:0,ha=ja(function(na){return na===y},u,true),ba=ja(function(na){return Zb.call(y,na)>-1},u,true),wa=[function(na,xa,va){return!Z&&(va||xa!==
pb)||((y=xa).nodeType?ha(na,xa,va):ba(na,xa,va))}];S<R;S++)if(u=ma.relative[r[S].type])wa=[ja(Aa(wa),u)];else{u=ma.filter[r[S].type].apply(null,r[S].matches);if(u[Ea]){for(E=++S;E<R;E++)if(ma.relative[r[E].type])break;return Ta(S>1&&Aa(wa),S>1&&da(r.slice(0,S-1)).replace(Mb,"$1"),u,S<E&&zb(r.slice(S,E)),E<R&&zb(r=r.slice(E)),E<R&&da(r))}wa.push(u)}return Aa(wa)}function Oa(r,y){var u=0,E=y.length>0,R=r.length>0,Z=function(S,ha,ba,wa,na){var xa,va,Ba=[],Ma=0,Fa="0",ya=S&&[],qb=na!=null,uc=pb,od=S||
R&&ma.find.TAG("*",na&&ha.parentNode||ha),vc=ab+=uc==null?1:Math.random()||0.1;if(qb){pb=ha!==Na&&ha;Ha=u}for(;(na=od[Fa])!=null;Fa++){if(R&&na){for(xa=0;va=r[xa++];)if(va(na,ha,ba)){wa.push(na);break}if(qb){ab=vc;Ha=++u}}if(E){if(na=!va&&na)Ma--;S&&ya.push(na)}}Ma+=Fa;if(E&&Fa!==Ma){for(xa=0;va=y[xa++];)va(ya,Ba,ha,ba);if(S){if(Ma>0)for(;Fa--;)ya[Fa]||Ba[Fa]||(Ba[Fa]=pd.call(wa));Ba=Ga(Ba)}xb.apply(wa,Ba);qb&&!S&&Ba.length>0&&Ma+y.length>1&&p.uniqueSort(wa)}if(qb){ab=vc;pb=uc}return ya};return E?
l(Z):Z}function Ob(r,y,u){for(var E=0,R=y.length;E<R;E++)p(r,y[E],u);return u}function ta(r,y,u,E){var R,Z,S,ha,ba=U(r);if(!E)if(ba.length===1){Z=ba[0]=ba[0].slice(0);if(Z.length>2&&(S=Z[0]).type==="ID"&&y.nodeType===9&&!Xa&&ma.relative[Z[1].type]){y=ma.find.ID(S.matches[0].replace(eb,fb),y)[0];if(!y)return u;r=r.slice(Z.shift().value.length)}for(R=Nb.needsContext.test(r)?0:Z.length;R--;){S=Z[R];if(ma.relative[ha=S.type])break;if(ha=ma.find[ha])if(E=ha(S.matches[0].replace(eb,fb),Yb.test(Z[0].type)&&
y.parentNode||y)){Z.splice(R,1);r=E.length&&da(Z);if(!r){xb.apply(u,yb.call(E,0));return u}break}}}rb(r,ba)(E,y,Xa,u,Yb.test(r));return u}function Ib(){}var ua,Ha,ma,Ab,Pa,rb,Ua,pb,La,Na,Qa,Xa,Ya,Bb,Pb,Hb,$b,Ea="sizzle"+-new Date,ob=c.document,Ia={},ab=0,nd=0,wc=k(),tc=k(),xc=k(),bb=typeof e,sc=-2147483648,sb=[],pd=sb.pop,xb=sb.push,yb=sb.slice,Zb=sb.indexOf||function(r){for(var y=0,u=this.length;y<u;y++)if(this[y]===r)return y;return-1};sb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#");var yc=
"\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+sb+")|)|)[\\x20\\t\\r\\n\\f]*\\]",ac=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+yc.replace(3,8)+")*)|.*)\\)|)",Mb=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),ld=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,md=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,
qd=new RegExp(ac),rd=new RegExp("^"+sb+"$"),Nb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[\w-]|[^\x00-\xa0])+)['"]?\]/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+yc),PSEUDO:new RegExp("^"+ac),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Yb=/[\x20\t\r\n\f]*[+~]/,id=/^[^{]+\{\s*\[native code/,jd=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sd=/^(?:input|select|textarea|button)$/i,td=/^h\d$/i,kd=/'|\\/g,ud=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,eb=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,fb=function(r,y){r="0x"+y-65536;return r!==r?y:r<0?String.fromCharCode(r+65536):
String.fromCharCode(r>>10|55296,r&1023|56320)};try{yb.call(ob.documentElement.childNodes,0)}catch(Sd){yb=function(r){for(var y,u=[];y=this[r++];)u.push(y);return u}}Pa=p.isXML=function(r){return(r=r&&(r.ownerDocument||r).documentElement)?r.nodeName!=="HTML":false};La=p.setDocument=function(r){var y=r?r.ownerDocument||r:ob;if(y===Na||y.nodeType!==9||!y.documentElement)return Na;Na=y;Qa=y.documentElement;Xa=Pa(y);Ia.tagNameNoComments=n(function(u){u.appendChild(y.createComment(""));return!u.getElementsByTagName("*").length});
Ia.attributes=n(function(u){u.innerHTML="<select></select>";u=typeof u.lastChild.getAttribute("multiple");return u!=="boolean"&&u!=="string"});Ia.getByClassName=n(function(u){u.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!u.getElementsByClassName||!u.getElementsByClassName("e").length)return false;u.lastChild.className="e";return u.getElementsByClassName("e").length===2});Ia.getByName=n(function(u){u.id=Ea+0;u.innerHTML="<a name='"+Ea+"'></a><div name='"+Ea+"'></div>";Qa.insertBefore(u,
Qa.firstChild);var E=y.getElementsByName&&y.getElementsByName(Ea).length===2+y.getElementsByName(Ea+0).length;Ia.getIdNotName=!y.getElementById(Ea);Qa.removeChild(u);return E});ma.attrHandle=n(function(u){u.innerHTML="<a href='#'></a>";return u.firstChild&&typeof u.firstChild.getAttribute!==bb&&u.firstChild.getAttribute("href")==="#"})?{}:{href:function(u){return u.getAttribute("href",2)},type:function(u){return u.getAttribute("type")}};if(Ia.getIdNotName){ma.find.ID=function(u,E){if(typeof E.getElementById!==
bb&&!Xa)return(u=E.getElementById(u))&&u.parentNode?[u]:[]};ma.filter.ID=function(u){var E=u.replace(eb,fb);return function(R){return R.getAttribute("id")===E}}}else{ma.find.ID=function(u,E){if(typeof E.getElementById!==bb&&!Xa)return(E=E.getElementById(u))?E.id===u||typeof E.getAttributeNode!==bb&&E.getAttributeNode("id").value===u?[E]:e:[]};ma.filter.ID=function(u){var E=u.replace(eb,fb);return function(R){return(R=typeof R.getAttributeNode!==bb&&R.getAttributeNode("id"))&&R.value===E}}}ma.find.TAG=
Ia.tagNameNoComments?function(u,E){if(typeof E.getElementsByTagName!==bb)return E.getElementsByTagName(u)}:function(u,E){var R=[],Z=0;E=E.getElementsByTagName(u);if(u==="*"){for(;u=E[Z++];)u.nodeType===1&&R.push(u);return R}return E};ma.find.NAME=Ia.getByName&&function(u,E){if(typeof E.getElementsByName!==bb)return E.getElementsByName(name)};ma.find.CLASS=Ia.getByClassName&&function(u,E){if(typeof E.getElementsByClassName!==bb&&!Xa)return E.getElementsByClassName(u)};Bb=[];Ya=[":focus"];if(Ia.qsa=
g(y.querySelectorAll)){n(function(u){u.innerHTML="<select><option selected=''></option></select>";u.querySelectorAll("[selected]").length||Ya.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");u.querySelectorAll(":checked").length||Ya.push(":checked")});n(function(u){u.innerHTML="<input type='hidden' i=''/>";u.querySelectorAll("[i^='']").length&&Ya.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");u.querySelectorAll(":enabled").length||Ya.push(":enabled",":disabled");
u.querySelectorAll("*,:x");Ya.push(",.*:")})}if(Ia.matchesSelector=g(Pb=Qa.matchesSelector||Qa.mozMatchesSelector||Qa.webkitMatchesSelector||Qa.oMatchesSelector||Qa.msMatchesSelector))n(function(u){Ia.disconnectedMatch=Pb.call(u,"div");Pb.call(u,"[s!='']:x");Bb.push("!=",ac)});Ya=new RegExp(Ya.join("|"));Bb=new RegExp(Bb.join("|"));Hb=g(Qa.contains)||Qa.compareDocumentPosition?function(u,E){var R=u.nodeType===9?u.documentElement:u;E=E&&E.parentNode;return u===E||!!(E&&E.nodeType===1&&(R.contains?
R.contains(E):u.compareDocumentPosition&&u.compareDocumentPosition(E)&16))}:function(u,E){if(E)for(;E=E.parentNode;)if(E===u)return true;return false};$b=Qa.compareDocumentPosition?function(u,E){var R;if(u===E){Ua=true;return 0}if(R=E.compareDocumentPosition&&u.compareDocumentPosition&&u.compareDocumentPosition(E)){if(R&1||u.parentNode&&u.parentNode.nodeType===11){if(u===y||Hb(ob,u))return-1;if(E===y||Hb(ob,E))return 1;return 0}return R&4?-1:1}return u.compareDocumentPosition?-1:1}:function(u,E){var R=
0,Z=u.parentNode,S=E.parentNode,ha=[u],ba=[E];if(u===E){Ua=true;return 0}else if(!Z||!S)return u===y?-1:E===y?1:Z?-1:S?1:0;else if(Z===S)return t(u,E);for(u=u;u=u.parentNode;)ha.unshift(u);for(u=E;u=u.parentNode;)ba.unshift(u);for(;ha[R]===ba[R];)R++;return R?t(ha[R],ba[R]):ha[R]===ob?-1:ba[R]===ob?1:0};Ua=false;[0,0].sort($b);Ia.detectDuplicates=Ua;return Na};p.matches=function(r,y){return p(r,null,null,y)};p.matchesSelector=function(r,y){if((r.ownerDocument||r)!==Na)La(r);y=y.replace(ud,"='$1']");
if(Ia.matchesSelector&&!Xa&&(!Bb||!Bb.test(y))&&!Ya.test(y))try{var u=Pb.call(r,y);if(u||Ia.disconnectedMatch||r.document&&r.document.nodeType!==11)return u}catch(E){}return p(y,Na,null,[r]).length>0};p.contains=function(r,y){if((r.ownerDocument||r)!==Na)La(r);return Hb(r,y)};p.attr=function(r,y){var u;if((r.ownerDocument||r)!==Na)La(r);Xa||(y=y.toLowerCase());if(u=ma.attrHandle[y])return u(r);if(Xa||Ia.attributes)return r.getAttribute(y);return((u=r.getAttributeNode(y))||r.getAttribute(y))&&r[y]===
true?y:u&&u.specified?u.value:null};p.error=function(r){throw new Error("Syntax error, unrecognized expression: "+r);};p.uniqueSort=function(r){var y,u=[],E=1,R=0;Ua=!Ia.detectDuplicates;r.sort($b);if(Ua){for(;y=r[E];E++)if(y===r[E-1])R=u.push(E);for(;R--;)r.splice(u[R],1)}return r};Ab=p.getText=function(r){var y,u="",E=0;if(y=r.nodeType)if(y===1||y===9||y===11)if(typeof r.textContent==="string")return r.textContent;else for(r=r.firstChild;r;r=r.nextSibling)u+=Ab(r);else{if(y===3||y===4)return r.nodeValue}else for(;y=
r[E];E++)u+=Ab(y);return u};ma=p.selectors={cacheLength:50,createPseudo:l,match:Nb,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(r){r[1]=r[1].replace(eb,fb);r[3]=(r[4]||r[5]||"").replace(eb,fb);if(r[2]==="~=")r[3]=" "+r[3]+" ";return r.slice(0,4)},CHILD:function(r){r[1]=r[1].toLowerCase();if(r[1].slice(0,3)==="nth"){r[3]||p.error(r[0]);r[4]=+(r[4]?r[5]+(r[6]||1):2*(r[3]==="even"||
r[3]==="odd"));r[5]=+(r[7]+r[8]||r[3]==="odd")}else r[3]&&p.error(r[0]);return r},PSEUDO:function(r){var y,u=!r[5]&&r[2];if(Nb.CHILD.test(r[0]))return null;if(r[4])r[2]=r[4];else if(u&&qd.test(u)&&(y=U(u,true))&&(y=u.indexOf(")",u.length-y)-u.length)){r[0]=r[0].slice(0,y);r[2]=u.slice(0,y)}return r.slice(0,3)}},filter:{TAG:function(r){if(r==="*")return function(){return true};r=r.replace(eb,fb).toLowerCase();return function(y){return y.nodeName&&y.nodeName.toLowerCase()===r}},CLASS:function(r){var y=
wc[r+" "];return y||(y=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+r+"([\\x20\\t\\r\\n\\f]|$)"))&&wc(r,function(u){return y.test(u.className||typeof u.getAttribute!==bb&&u.getAttribute("class")||"")})},ATTR:function(r,y,u){return function(E){E=p.attr(E,r);if(E==null)return y==="!=";if(!y)return true;E+="";return y==="="?E===u:y==="!="?E!==u:y==="^="?u&&E.indexOf(u)===0:y==="*="?u&&E.indexOf(u)>-1:y==="$="?u&&E.slice(-u.length)===u:y==="~="?(" "+E+" ").indexOf(u)>-1:y==="|="?E===u||E.slice(0,u.length+1)===
u+"-":false}},CHILD:function(r,y,u,E,R){var Z=r.slice(0,3)!=="nth",S=r.slice(-4)!=="last",ha=y==="of-type";return E===1&&R===0?function(ba){return!!ba.parentNode}:function(ba,wa,na){var xa,va,Ba,Ma,Fa;wa=Z!==S?"nextSibling":"previousSibling";var ya=ba.parentNode,qb=ha&&ba.nodeName.toLowerCase();na=!na&&!ha;if(ya){if(Z){for(;wa;){for(va=ba;va=va[wa];)if(ha?va.nodeName.toLowerCase()===qb:va.nodeType===1)return false;Fa=wa=r==="only"&&!Fa&&"nextSibling"}return true}Fa=[S?ya.firstChild:ya.lastChild];
if(S&&na){na=ya[Ea]||(ya[Ea]={});xa=na[r]||[];Ma=xa[0]===ab&&xa[1];Ba=xa[0]===ab&&xa[2];for(va=Ma&&ya.childNodes[Ma];va=++Ma&&va&&va[wa]||(Ba=Ma=0)||Fa.pop();)if(va.nodeType===1&&++Ba&&va===ba){na[r]=[ab,Ma,Ba];break}}else if(na&&(xa=(ba[Ea]||(ba[Ea]={}))[r])&&xa[0]===ab)Ba=xa[1];else for(;va=++Ma&&va&&va[wa]||(Ba=Ma=0)||Fa.pop();)if((ha?va.nodeName.toLowerCase()===qb:va.nodeType===1)&&++Ba){if(na)(va[Ea]||(va[Ea]={}))[r]=[ab,Ba];if(va===ba)break}Ba-=R;return Ba===E||Ba%E===0&&Ba/E>=0}}},PSEUDO:function(r,
y){var u,E=ma.pseudos[r]||ma.setFilters[r.toLowerCase()]||p.error("unsupported pseudo: "+r);if(E[Ea])return E(y);if(E.length>1){u=[r,r,"",y];return ma.setFilters.hasOwnProperty(r.toLowerCase())?l(function(R,Z){for(var S,ha=E(R,y),ba=ha.length;ba--;){S=Zb.call(R,ha[ba]);R[S]=!(Z[S]=ha[ba])}}):function(R){return E(R,0,u)}}return E}},pseudos:{not:l(function(r){var y=[],u=[],E=rb(r.replace(Mb,"$1"));return E[Ea]?l(function(R,Z,S,ha){ha=E(R,null,ha,[]);for(var ba=R.length;ba--;)if(S=ha[ba])R[ba]=!(Z[ba]=
S)}):function(R,Z,S){y[0]=R;E(y,null,S,u);return!u.pop()}}),has:l(function(r){return function(y){return p(r,y).length>0}}),contains:l(function(r){return function(y){return(y.textContent||y.innerText||Ab(y)).indexOf(r)>-1}}),lang:l(function(r){rd.test(r||"")||p.error("unsupported lang: "+r);r=r.replace(eb,fb).toLowerCase();return function(y){var u;do if(u=Xa?y.getAttribute("xml:lang")||y.getAttribute("lang"):y.lang){u=u.toLowerCase();return u===r||u.indexOf(r+"-")===0}while((y=y.parentNode)&&y.nodeType===
1);return false}}),target:function(r){var y=c.location&&c.location.hash;return y&&y.slice(1)===r.id},root:function(r){return r===Qa},focus:function(r){return r===Na.activeElement&&(!Na.hasFocus||Na.hasFocus())&&!!(r.type||r.href||~r.tabIndex)},enabled:function(r){return r.disabled===false},disabled:function(r){return r.disabled===true},checked:function(r){var y=r.nodeName.toLowerCase();return y==="input"&&!!r.checked||y==="option"&&!!r.selected},selected:function(r){return r.selected===true},empty:function(r){for(r=
r.firstChild;r;r=r.nextSibling)if(r.nodeName>"@"||r.nodeType===3||r.nodeType===4)return false;return true},parent:function(r){return!ma.pseudos.empty(r)},header:function(r){return td.test(r.nodeName)},input:function(r){return sd.test(r.nodeName)},button:function(r){var y=r.nodeName.toLowerCase();return y==="input"&&r.type==="button"||y==="button"},text:function(r){var y;return r.nodeName.toLowerCase()==="input"&&r.type==="text"&&((y=r.getAttribute("type"))==null||y.toLowerCase()===r.type)},first:F(function(){return[0]}),
last:F(function(r,y){return[y-1]}),eq:F(function(r,y,u){return[u<0?u+y:u]}),even:F(function(r,y){for(var u=0;u<y;u+=2)r.push(u);return r}),odd:F(function(r,y){for(var u=1;u<y;u+=2)r.push(u);return r}),lt:F(function(r,y,u){for(y=u<0?u+y:u;--y>=0;)r.push(y);return r}),gt:F(function(r,y,u){for(u=u<0?u+y:u;++u<y;)r.push(u);return r})}};for(ua in{radio:true,checkbox:true,file:true,password:true,image:true})ma.pseudos[ua]=A(ua);for(ua in{submit:true,reset:true})ma.pseudos[ua]=M(ua);rb=p.compile=function(r,
y){var u,E=[],R=[],Z=xc[r+" "];if(!Z){y||(y=U(r));for(u=y.length;u--;){Z=zb(y[u]);Z[Ea]?E.push(Z):R.push(Z)}Z=xc(r,Oa(R,E))}return Z};ma.pseudos.nth=ma.pseudos.eq;ma.filters=Ib.prototype=ma.pseudos;ma.setFilters=new Ib;La();p.attr=f.attr;f.find=p;f.expr=p.selectors;f.expr[":"]=f.expr.pseudos;f.unique=p.uniqueSort;f.text=p.getText;f.isXMLDoc=p.isXML;f.contains=p.contains})(a);var vd=/Until$/,wd=/^(?:parents|prev(?:Until|All))/,Qc=/^.[^:#\[\.,]*$/,zc=f.expr.match.needsContext,xd={children:true,contents:true,
next:true,prev:true};f.fn.extend({find:function(c){var e,g,k,l=this.length;if(typeof c!=="string"){k=this;return this.pushStack(f(c).filter(function(){for(e=0;e<l;e++)if(f.contains(k[e],this))return true}))}g=[];for(e=0;e<l;e++)f.find(c,this[e],g);g=this.pushStack(l>1?f.unique(g):g);g.selector=(this.selector?this.selector+" ":"")+c;return g},has:function(c){var e,g=f(c,this),k=g.length;return this.filter(function(){for(e=0;e<k;e++)if(f.contains(this,g[e]))return true})},not:function(c){return this.pushStack(H(this,
c,false))},filter:function(c){return this.pushStack(H(this,c,true))},is:function(c){return!!c&&(typeof c==="string"?zc.test(c)?f(c,this.context).index(this[0])>=0:f.filter(c,this).length>0:this.filter(c).length>0)},closest:function(c,e){for(var g,k=0,l=this.length,n=[],p=zc.test(c)||typeof c!=="string"?f(c,e||this.context):0;k<l;k++)for(g=this[k];g&&g.ownerDocument&&g!==e&&g.nodeType!==11;){if(p?p.index(g)>-1:f.find.matchesSelector(g,c)){n.push(g);break}g=g.parentNode}return this.pushStack(n.length>
1?f.unique(n):n)},index:function(c){if(!c)return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;if(typeof c==="string")return f.inArray(this[0],f(c));return f.inArray(c.jquery?c[0]:c,this)},add:function(c,e){c=typeof c==="string"?f(c,e):f.makeArray(c&&c.nodeType?[c]:c);c=f.merge(this.get(),c);return this.pushStack(f.unique(c))},addBack:function(c){return this.add(c==null?this.prevObject:this.prevObject.filter(c))}});f.fn.andSelf=f.fn.addBack;f.each({parent:function(c){return(c=c.parentNode)&&
c.nodeType!==11?c:null},parents:function(c){return f.dir(c,"parentNode")},parentsUntil:function(c,e,g){return f.dir(c,"parentNode",g)},next:function(c){return ga(c,"nextSibling")},prev:function(c){return ga(c,"previousSibling")},nextAll:function(c){return f.dir(c,"nextSibling")},prevAll:function(c){return f.dir(c,"previousSibling")},nextUntil:function(c,e,g){return f.dir(c,"nextSibling",g)},prevUntil:function(c,e,g){return f.dir(c,"previousSibling",g)},siblings:function(c){return f.sibling((c.parentNode||
{}).firstChild,c)},children:function(c){return f.sibling(c.firstChild)},contents:function(c){return f.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:f.merge([],c.childNodes)}},function(c,e){f.fn[c]=function(g,k){var l=f.map(this,e,g);vd.test(c)||(k=g);if(k&&typeof k==="string")l=f.filter(k,l);l=this.length>1&&!xd[c]?f.unique(l):l;if(this.length>1&&wd.test(c))l=l.reverse();return this.pushStack(l)}});f.extend({filter:function(c,e,g){if(g)c=":not("+c+")";return e.length===1?f.find.matchesSelector(e[0],
c)?[e[0]]:[]:f.find.matches(c,e)},dir:function(c,e,g){var k=[];for(c=c[e];c&&c.nodeType!==9&&(g===b||c.nodeType!==1||!f(c).is(g));){c.nodeType===1&&k.push(c);c=c[e]}return k},sibling:function(c,e){for(var g=[];c;c=c.nextSibling)c.nodeType===1&&c!==e&&g.push(c);return g}});var jc="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",yd=/ jQuery\d+="(?:null|\d+)"/g,Ac=new RegExp("<(?:"+jc+")[\\s/>]",
"i"),bc=/^\s+/,Bc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Cc=/<([\w:]+)/,Dc=/<tbody/i,zd=/<|&#?\w+;/,Ad=/<(?:script|style|link)/i,Rb=/^(?:checkbox|radio)$/i,Bd=/checked\s*(?:[^=]|=\s*.checked.)/i,Ec=/^$|\/(?:java|ecma)script/i,Rc=/^true\/(.*)/,Cd=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Va={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:f.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},cc=N(Q).appendChild(Q.createElement("div"));Va.optgroup=Va.option;Va.tbody=Va.tfoot=Va.colgroup=Va.caption=Va.thead;Va.th=Va.td;f.fn.extend({text:function(c){return f.access(this,function(e){return e===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Q).createTextNode(e))},
null,c,arguments.length)},wrapAll:function(c){if(f.isFunction(c))return this.each(function(g){f(this).wrapAll(c.call(this,g))});if(this[0]){var e=f(c,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&e.insertBefore(this[0]);e.map(function(){for(var g=this;g.firstChild&&g.firstChild.nodeType===1;)g=g.firstChild;return g}).append(this)}return this},wrapInner:function(c){if(f.isFunction(c))return this.each(function(e){f(this).wrapInner(c.call(this,e))});return this.each(function(){var e=f(this),
g=e.contents();g.length?g.wrapAll(c):e.append(c)})},wrap:function(c){var e=f.isFunction(c);return this.each(function(g){f(this).wrapAll(e?c.call(this,g):c)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){if(this.nodeType===1||this.nodeType===11||this.nodeType===9)this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){if(this.nodeType===
1||this.nodeType===11||this.nodeType===9)this.insertBefore(c,this.firstChild)})},before:function(){return this.domManip(arguments,false,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return this.domManip(arguments,false,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},remove:function(c,e){for(var g,k=0;(g=this[k])!=null;k++)if(!c||f.filter(c,[g]).length>0){!e&&g.nodeType===1&&f.cleanData(s(g));if(g.parentNode){e&&f.contains(g.ownerDocument,
g)&&O(s(g,"script"));g.parentNode.removeChild(g)}}return this},empty:function(){for(var c,e=0;(c=this[e])!=null;e++){for(c.nodeType===1&&f.cleanData(s(c,false));c.firstChild;)c.removeChild(c.firstChild);if(c.options&&f.nodeName(c,"select"))c.options.length=0}return this},clone:function(c,e){c=c==null?false:c;e=e==null?c:e;return this.map(function(){return f.clone(this,c,e)})},html:function(c){return f.access(this,function(e){var g=this[0]||{},k=0,l=this.length;if(e===b)return g.nodeType===1?g.innerHTML.replace(yd,
""):b;if(typeof e==="string"&&!Ad.test(e)&&(f.support.htmlSerialize||!Ac.test(e))&&(f.support.leadingWhitespace||!bc.test(e))&&!Va[(Cc.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Bc,"<$1></$2>");try{for(;k<l;k++){g=this[k]||{};if(g.nodeType===1){f.cleanData(s(g,false));g.innerHTML=e}}g=0}catch(n){}}g&&this.empty().append(e)},null,c,arguments.length)},replaceWith:function(c){if(!f.isFunction(c)&&typeof c!=="string")c=f(c).not(this).detach();return this.domManip([c],true,function(e){var g=this.nextSibling,
k=this.parentNode;if(k){f(this).remove();k.insertBefore(e,g)}})},detach:function(c){return this.remove(c,true)},domManip:function(c,e,g){c=lb.apply([],c);var k,l,n,p,t=0,A=this.length,M=this,F=A-1,U=c[0],da=f.isFunction(U);if(da||!(A<=1||typeof U!=="string"||f.support.checkClone||!Bd.test(U)))return this.each(function(ja){var Aa=M.eq(ja);if(da)c[0]=U.call(this,ja,e?Aa.html():b);Aa.domManip(c,e,g)});if(A){p=f.buildFragment(c,this[0].ownerDocument,false,this);k=p.firstChild;if(p.childNodes.length===
1)p=k;if(k){e=e&&f.nodeName(k,"tr");n=f.map(s(p,"script"),ka);for(l=n.length;t<A;t++){k=p;if(t!==F){k=f.clone(k,true,true);l&&f.merge(n,s(k,"script"))}g.call(e&&f.nodeName(this[t],"table")?fa(this[t],"tbody"):this[t],k,t)}if(l){p=n[n.length-1].ownerDocument;f.map(n,D);for(t=0;t<l;t++){k=n[t];if(Ec.test(k.type||"")&&!f._data(k,"globalEval")&&f.contains(p,k))k.src?f.ajax({url:k.src,type:"GET",dataType:"script",async:false,global:false,"throws":true}):f.globalEval((k.text||k.textContent||k.innerHTML||
"").replace(Cd,""))}}p=k=null}}return this}});f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,e){f.fn[c]=function(g){for(var k=0,l=[],n=f(g),p=n.length-1;k<=p;k++){g=k===p?this:this.clone(true);f(n[k])[e](g);Sa.apply(l,g.get())}return this.pushStack(l)}});f.extend({clone:function(c,e,g){var k,l,n,p,t,A=f.contains(c.ownerDocument,c);if(f.support.html5Clone||f.isXMLDoc(c)||!Ac.test("<"+c.nodeName+">"))n=c.cloneNode(true);else{cc.innerHTML=
c.outerHTML;cc.removeChild(n=cc.firstChild)}if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(c.nodeType===1||c.nodeType===11)&&!f.isXMLDoc(c)){k=s(n);t=s(c);for(p=0;(l=t[p])!=null;++p)k[p]&&o(l,k[p])}if(e)if(g){t=t||s(c);k=k||s(n);for(p=0;(l=t[p])!=null;p++)j(l,k[p])}else j(c,n);k=s(n,"script");k.length>0&&O(k,!A&&s(c,"script"));return n},buildFragment:function(c,e,g,k){for(var l,n,p,t,A,M,F=c.length,U=N(e),da=[],ja=0;ja<F;ja++)if((n=c[ja])||n===0)if(f.type(n)==="object")f.merge(da,n.nodeType?
[n]:n);else if(zd.test(n)){p=p||U.appendChild(e.createElement("div"));t=(Cc.exec(n)||["",""])[1].toLowerCase();M=Va[t]||Va._default;p.innerHTML=M[1]+n.replace(Bc,"<$1></$2>")+M[2];for(l=M[0];l--;)p=p.lastChild;!f.support.leadingWhitespace&&bc.test(n)&&da.push(e.createTextNode(bc.exec(n)[0]));if(!f.support.tbody)for(l=(n=t==="table"&&!Dc.test(n)?p.firstChild:M[1]==="<table>"&&!Dc.test(n)?p:0)&&n.childNodes.length;l--;)if(f.nodeName(A=n.childNodes[l],"tbody")&&!A.childNodes.length)n.removeChild(A);
f.merge(da,p.childNodes);for(p.textContent="";p.firstChild;)p.removeChild(p.firstChild);p=U.lastChild}else da.push(e.createTextNode(n));p&&U.removeChild(p);f.support.appendChecked||f.grep(s(da,"input"),x);for(ja=0;n=da[ja++];)if(!(k&&f.inArray(n,k)!==-1)){c=f.contains(n.ownerDocument,n);p=s(U.appendChild(n),"script");c&&O(p);if(g)for(l=0;n=p[l++];)if(Ec.test(n.type||""))g.push(n)}return U},cleanData:function(c,e){for(var g,k,l,n,p=0,t=f.expando,A=f.cache,M=f.support.deleteExpando,F=f.event.special;(g=
c[p])!=null;p++)if(e||f.acceptData(g))if(n=(l=g[t])&&A[l]){if(n.events)for(k in n.events)F[k]?f.event.remove(g,k):f.removeEvent(g,k,n.handle);if(A[l]){delete A[l];if(M)delete g[t];else if(typeof g.removeAttribute!==ca)g.removeAttribute(t);else g[t]=null;Ra.push(l)}}}});var Db,ib,jb,dc=/alpha\([^)]*\)/i,Dd=/opacity\s*=\s*([^)]*)/,Ed=/^(top|right|bottom|left)$/,Fd=/^(none|table(?!-c[ea]).+)/,Fc=/^margin/,Sc=new RegExp("^("+Lb+")(.*)$","i"),Jb=new RegExp("^("+Lb+")(?!px)[a-z%]+$","i"),Gd=new RegExp("^([+-])=("+
Lb+")","i"),lc={BODY:"block"},Hd={position:"absolute",visibility:"hidden",display:"block"},Gc={letterSpacing:0,fontWeight:400},hb=["Top","Right","Bottom","Left"],kc=["Webkit","O","Moz","ms"];f.fn.extend({css:function(c,e){return f.access(this,function(g,k,l){var n,p={},t=0;if(f.isArray(k)){n=ib(g);for(l=k.length;t<l;t++)p[k[t]]=f.css(g,k[t],false,n);return p}return l!==b?f.style(g,k,l):f.css(g,k)},c,e,arguments.length>1)},show:function(){return J(this,true)},hide:function(){return J(this)},toggle:function(c){var e=
typeof c==="boolean";return this.each(function(){(e?c:z(this))?f(this).show():f(this).hide()})}});f.extend({cssHooks:{opacity:{get:function(c,e){if(e){c=jb(c,"opacity");return c===""?"1":c}}}},cssNumber:{columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(c,e,g,k){if(!(!c||c.nodeType===3||c.nodeType===8||!c.style)){var l,n,p,t=f.camelCase(e),A=c.style;
e=f.cssProps[t]||(f.cssProps[t]=I(A,t));p=f.cssHooks[e]||f.cssHooks[t];if(g!==b){n=typeof g;if(n==="string"&&(l=Gd.exec(g))){g=(l[1]+1)*l[2]+parseFloat(f.css(c,e));n="number"}if(!(g==null||n==="number"&&isNaN(g))){if(n==="number"&&!f.cssNumber[t])g+="px";if(!f.support.clearCloneStyle&&g===""&&e.indexOf("background")===0)A[e]="inherit";if(!p||!("set"in p)||(g=p.set(c,g,k))!==b)try{A[e]=g}catch(M){}}}else{if(p&&"get"in p&&(l=p.get(c,false,k))!==b)return l;return A[e]}}},css:function(c,e,g,k){var l,
n;n=f.camelCase(e);e=f.cssProps[n]||(f.cssProps[n]=I(c.style,n));if((n=f.cssHooks[e]||f.cssHooks[n])&&"get"in n)l=n.get(c,true,g);if(l===b)l=jb(c,e,k);if(l==="normal"&&e in Gc)l=Gc[e];if(g===""||g){c=parseFloat(l);return g===true||f.isNumeric(c)?c||0:l}return l},swap:function(c,e,g,k){var l,n={};for(l in e){n[l]=c.style[l];c.style[l]=e[l]}g=g.apply(c,k||[]);for(l in e)c.style[l]=n[l];return g}});if(a.getComputedStyle){ib=function(c){return a.getComputedStyle(c,null)};jb=function(c,e,g){var k;var l=
(g=g||ib(c))?g.getPropertyValue(e)||g[e]:b,n=c.style;if(g){if(l===""&&!f.contains(c.ownerDocument,c))l=f.style(c,e);if(Jb.test(l)&&Fc.test(e)){c=n.width;e=n.minWidth;k=n.maxWidth;n.minWidth=n.maxWidth=n.width=l;l=g.width;n.width=c;n.minWidth=e;n.maxWidth=k}}return l}}else if(Q.documentElement.currentStyle){ib=function(c){return c.currentStyle};jb=function(c,e,g){var k,l,n=(g=g||ib(c))?g[e]:b,p=c.style;if(n==null&&p&&p[e])n=p[e];if(Jb.test(n)&&!Ed.test(e)){g=p.left;if(l=(k=c.runtimeStyle)&&k.left)k.left=
c.currentStyle.left;p.left=e==="fontSize"?"1em":n;n=p.pixelLeft+"px";p.left=g;if(l)k.left=l}return n===""?"auto":n}}f.each(["height","width"],function(c,e){f.cssHooks[e]={get:function(g,k,l){if(k)return g.offsetWidth===0&&Fd.test(f.css(g,"display"))?f.swap(g,Hd,function(){return K(g,e,l)}):K(g,e,l)},set:function(g,k,l){var n=l&&ib(g);return P(g,k,l?v(g,e,l,f.support.boxSizing&&f.css(g,"boxSizing",false,n)==="border-box",n):0)}}});if(!f.support.opacity)f.cssHooks.opacity={get:function(c,e){return Dd.test((e&&
c.currentStyle?c.currentStyle.filter:c.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(c,e){var g=c.style;c=c.currentStyle;var k=f.isNumeric(e)?"alpha(opacity="+e*100+")":"",l=c&&c.filter||g.filter||"";g.zoom=1;if((e>=1||e==="")&&f.trim(l.replace(dc,""))===""&&g.removeAttribute){g.removeAttribute("filter");if(e===""||c&&!c.filter)return}g.filter=dc.test(l)?l.replace(dc,k):l+" "+k}};f(function(){if(!f.support.reliableMarginRight)f.cssHooks.marginRight={get:function(c,e){if(e)return f.swap(c,
{display:"inline-block"},jb,[c,"marginRight"])}};!f.support.pixelPosition&&f.fn.position&&f.each(["top","left"],function(c,e){f.cssHooks[e]={get:function(g,k){if(k){k=jb(g,e);return Jb.test(k)?f(g).position()[e]+"px":k}}}})});if(f.expr&&f.expr.filters){f.expr.filters.hidden=function(c){return c.offsetWidth<=0&&c.offsetHeight<=0||!f.support.reliableHiddenOffsets&&(c.style&&c.style.display||f.css(c,"display"))==="none"};f.expr.filters.visible=function(c){return!f.expr.filters.hidden(c)}}f.each({margin:"",
padding:"",border:"Width"},function(c,e){f.cssHooks[c+e]={expand:function(g){var k=0,l={};for(g=typeof g==="string"?g.split(" "):[g];k<4;k++)l[c+hb[k]+e]=g[k]||g[k-2]||g[0];return l}};if(!Fc.test(c))f.cssHooks[c+e].set=P});var Id=/%20/g,Tc=/\[\]$/,Hc=/\r?\n/g,Jd=/^(?:submit|button|image|reset|file)$/i,Kd=/^(?:input|select|textarea|keygen)/i;f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=f.prop(this,"elements");return c?
f.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!f(this).is(":disabled")&&Kd.test(this.nodeName)&&!Jd.test(c)&&(this.checked||!Rb.test(c))}).map(function(c,e){c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(g){return{name:e.name,value:g.replace(Hc,"\r\n")}}):{name:e.name,value:c.replace(Hc,"\r\n")}}).get()}});f.param=function(c,e){var g,k=[],l=function(n,p){p=f.isFunction(p)?p():p==null?"":p;k[k.length]=encodeURIComponent(n)+"="+encodeURIComponent(p)};if(e===
b)e=f.ajaxSettings&&f.ajaxSettings.traditional;if(f.isArray(c)||c.jquery&&!f.isPlainObject(c))f.each(c,function(){l(this.name,this.value)});else for(g in c)ra(g,c[g],e,l);return k.join("&").replace(Id,"+")};f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(c,e){f.fn[e]=function(g,k){return arguments.length>0?this.on(e,null,
g,k):this.trigger(e)}});f.fn.hover=function(c,e){return this.mouseenter(c).mouseleave(e||c)};var tb,gb,ec=f.now(),fc=/\?/,Ld=/#.*$/,Ic=/([?&])_=[^&]*/,Md=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Nd=/^(?:GET|HEAD)$/,Od=/^\/\//,Jc=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Kc=f.fn.load,Lc={},Sb={},Mc="*/".concat("*");try{gb=pa.href}catch(Td){gb=Q.createElement("a");gb.href="";gb=gb.href}tb=Jc.exec(gb.toLowerCase())||[];f.fn.load=function(c,e,g){if(typeof c!=="string"&&Kc)return Kc.apply(this,arguments);var k,
l,n,p=this,t=c.indexOf(" ");if(t>=0){k=c.slice(t,c.length);c=c.slice(0,t)}if(f.isFunction(e)){g=e;e=b}else if(e&&typeof e==="object")n="POST";p.length>0&&f.ajax({url:c,type:n,dataType:"html",data:e}).done(function(A){l=arguments;p.html(k?f("<div>").append(f.parseHTML(A)).find(k):A)}).complete(g&&function(A,M){p.each(g,l||[A.responseText,M,A])});return this};f.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(c,e){f.fn[e]=function(g){return this.on(e,g)}});
f.each(["get","post"],function(c,e){f[e]=function(g,k,l,n){if(f.isFunction(k)){n=n||l;l=k;k=b}return f.ajax({url:g,type:e,dataType:n,data:k,success:l})}});f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gb,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(tb[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},
contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":true,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(c,e){return e?V(V(c,f.ajaxSettings),e):V(f.ajaxSettings,c)},ajaxPrefilter:W(Lc),ajaxTransport:W(Sb),ajax:function(c,e){function g(ua,Ha,ma,Ab){var Pa,rb,Ua,pb,La=Ha;if(Oa!==2){Oa=2;p&&clearTimeout(p);A=b;n=Ab||"";ta.readyState=ua>0?4:0;if(ma)pb=aa(F,ta,
ma);if(ua>=200&&ua<300||ua===304){if(F.ifModified){if(ma=ta.getResponseHeader("Last-Modified"))f.lastModified[l]=ma;if(ma=ta.getResponseHeader("etag"))f.etag[l]=ma}if(ua===204){Pa=true;La="nocontent"}else if(ua===304){Pa=true;La="notmodified"}else{Pa=oa(F,pb);La=Pa.state;rb=Pa.data;Ua=Pa.error;Pa=!Ua}}else{Ua=La;if(ua||!La){La="error";if(ua<0)ua=0}}ta.status=ua;ta.statusText=(Ha||La)+"";Pa?ja.resolveWith(U,[rb,La,ta]):ja.rejectWith(U,[ta,La,Ua]);ta.statusCode(Ga);Ga=b;if(t)da.trigger(Pa?"ajaxSuccess":
"ajaxError",[ta,F,Pa?rb:Ua]);Aa.fireWith(U,[ta,La]);if(t){da.trigger("ajaxComplete",[ta,F]);--f.active||f.event.trigger("ajaxStop")}}}if(typeof c==="object"){e=c;c=b}e=e||{};var k,l,n,p,t,A,M,F=f.ajaxSetup({},e),U=F.context||F,da=F.context&&(U.nodeType||U.jquery)?f(U):f.event,ja=f.Deferred(),Aa=f.Callbacks("once memory"),Ga=F.statusCode||{},Ta={},zb={},Oa=0,Ob="canceled",ta={readyState:0,getResponseHeader:function(ua){var Ha;if(Oa===2){if(!M)for(M={};Ha=Md.exec(n);)M[Ha[1].toLowerCase()]=Ha[2];Ha=
M[ua.toLowerCase()]}return Ha==null?null:Ha},getAllResponseHeaders:function(){return Oa===2?n:null},setRequestHeader:function(ua,Ha){var ma=ua.toLowerCase();if(!Oa){ua=zb[ma]=zb[ma]||ua;Ta[ua]=Ha}return this},overrideMimeType:function(ua){if(!Oa)F.mimeType=ua;return this},statusCode:function(ua){var Ha;if(ua)if(Oa<2)for(Ha in ua)Ga[Ha]=[Ga[Ha],ua[Ha]];else ta.always(ua[ta.status]);return this},abort:function(ua){ua=ua||Ob;A&&A.abort(ua);g(0,ua);return this}};ja.promise(ta).complete=Aa.add;ta.success=
ta.done;ta.error=ta.fail;F.url=((c||F.url||gb)+"").replace(Ld,"").replace(Od,tb[1]+"//");F.type=e.method||e.type||F.method||F.type;F.dataTypes=f.trim(F.dataType||"*").toLowerCase().match(Za)||[""];if(F.crossDomain==null){c=Jc.exec(F.url.toLowerCase());F.crossDomain=!!(c&&(c[1]!==tb[1]||c[2]!==tb[2]||(c[3]||(c[1]==="http:"?80:443))!=(tb[3]||(tb[1]==="http:"?80:443))))}if(F.data&&F.processData&&typeof F.data!=="string")F.data=f.param(F.data,F.traditional);ea(Lc,F,e,ta);if(Oa===2)return ta;(t=F.global)&&
f.active++===0&&f.event.trigger("ajaxStart");F.type=F.type.toUpperCase();F.hasContent=!Nd.test(F.type);l=F.url;if(!F.hasContent){if(F.data){l=F.url+=(fc.test(l)?"&":"?")+F.data;delete F.data}if(F.cache===false)F.url=Ic.test(l)?l.replace(Ic,"$1_="+ec++):l+(fc.test(l)?"&":"?")+"_="+ec++}if(F.ifModified){f.lastModified[l]&&ta.setRequestHeader("If-Modified-Since",f.lastModified[l]);f.etag[l]&&ta.setRequestHeader("If-None-Match",f.etag[l])}if(F.data&&F.hasContent&&F.contentType!==false||e.contentType)ta.setRequestHeader("Content-Type",
F.contentType);ta.setRequestHeader("Accept",F.dataTypes[0]&&F.accepts[F.dataTypes[0]]?F.accepts[F.dataTypes[0]]+(F.dataTypes[0]!=="*"?", "+Mc+"; q=0.01":""):F.accepts["*"]);for(k in F.headers)ta.setRequestHeader(k,F.headers[k]);if(F.beforeSend&&(F.beforeSend.call(U,ta,F)===false||Oa===2))return ta.abort();Ob="abort";for(k in{success:1,error:1,complete:1})ta[k](F[k]);if(A=ea(Sb,F,e,ta)){ta.readyState=1;t&&da.trigger("ajaxSend",[ta,F]);if(F.async&&F.timeout>0)p=setTimeout(function(){ta.abort("timeout")},
F.timeout);try{Oa=1;A.send(Ta,g)}catch(Ib){if(Oa<2)g(-1,Ib);else throw Ib;}}else g(-1,"No Transport");return ta},getScript:function(c,e){return f.get(c,b,e,"script")},getJSON:function(c,e,g){return f.get(c,e,g,"json")}});f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(c){f.globalEval(c);return c}}});f.ajaxPrefilter("script",function(c){if(c.cache===b)c.cache=
false;if(c.crossDomain){c.type="GET";c.global=false}});f.ajaxTransport("script",function(c){if(c.crossDomain){var e,g=Q.head||f("head")[0]||Q.documentElement;return{send:function(k,l){e=Q.createElement("script");e.async=true;if(c.scriptCharset)e.charset=c.scriptCharset;e.src=c.url;e.onload=e.onreadystatechange=function(n,p){if(p||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;e.parentNode&&e.parentNode.removeChild(e);e=null;p||l(200,"success")}};g.insertBefore(e,
g.firstChild)},abort:function(){e&&e.onload(b,true)}}}});var Nc=[],gc=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var c=Nc.pop()||f.expando+"_"+ec++;this[c]=true;return c}});f.ajaxPrefilter("json jsonp",function(c,e,g){var k,l,n,p=c.jsonp!==false&&(gc.test(c.url)?"url":typeof c.data==="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&gc.test(c.data)&&"data");if(p||c.dataTypes[0]==="jsonp"){k=c.jsonpCallback=f.isFunction(c.jsonpCallback)?c.jsonpCallback():
c.jsonpCallback;if(p)c[p]=c[p].replace(gc,"$1"+k);else if(c.jsonp!==false)c.url+=(fc.test(c.url)?"&":"?")+c.jsonp+"="+k;c.converters["script json"]=function(){n||f.error(k+" was not called");return n[0]};c.dataTypes[0]="json";l=a[k];a[k]=function(){n=arguments};g.always(function(){a[k]=l;if(c[k]){c.jsonpCallback=e.jsonpCallback;Nc.push(k)}n&&f.isFunction(l)&&l(n[0]);n=l=b});return"script"}});var Cb,Pd=0,hc=a.ActiveXObject&&function(){var c;for(c in Cb)Cb[c](b,true)};f.ajaxSettings.xhr=a.ActiveXObject?
function(){return!this.isLocal&&qa()||za()}:qa;pa=f.ajaxSettings.xhr();f.support.cors=!!pa&&"withCredentials"in pa;(pa=f.support.ajax=!!pa)&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var e;return{send:function(g,k){var l,n,p=c.xhr();c.username?p.open(c.type,c.url,c.async,c.username,c.password):p.open(c.type,c.url,c.async);if(c.xhrFields)for(n in c.xhrFields)p[n]=c.xhrFields[n];c.mimeType&&p.overrideMimeType&&p.overrideMimeType(c.mimeType);if(!c.crossDomain&&!g["X-Requested-With"])g["X-Requested-With"]=
"XMLHttpRequest";try{for(n in g)p.setRequestHeader(n,g[n])}catch(t){}p.send(c.hasContent&&c.data||null);e=function(A,M){var F,U,da,ja;try{if(e&&(M||p.readyState===4)){e=b;if(l){p.onreadystatechange=f.noop;hc&&delete Cb[l]}if(M)p.readyState!==4&&p.abort();else{ja={};F=p.status;U=p.getAllResponseHeaders();if(typeof p.responseText==="string")ja.text=p.responseText;try{da=p.statusText}catch(Aa){da=""}if(!F&&c.isLocal&&!c.crossDomain)F=ja.text?200:404;else if(F===1223)F=204}}}catch(Ga){M||k(-1,Ga)}ja&&
k(F,da,ja,U)};if(c.async)if(p.readyState===4)setTimeout(e);else{l=++Pd;if(hc){if(!Cb){Cb={};f(a).unload(hc)}Cb[l]=e}p.onreadystatechange=e}else e()},abort:function(){e&&e(b,true)}}}});var ub,Qb,Uc=/^(?:toggle|show|hide)$/,Qd=new RegExp("^(?:([+-])=|)("+Lb+")([a-z%]*)$","i"),Rd=/queueHooks$/,Kb=[Fb],Eb={"*":[function(c,e){var g,k=this.createTween(c,e),l=Qd.exec(e),n=k.cur(),p=+n||0,t=1,A=20;if(l){e=+l[2];g=l[3]||(f.cssNumber[c]?"":"px");if(g!=="px"&&p){p=f.css(k.elem,c,true)||e||1;do{t=t||".5";p/=
t;f.style(k.elem,c,p+g)}while(t!==(t=k.cur()/n)&&t!==1&&--A)}k.unit=g;k.start=p;k.end=l[1]?p+(l[1]+1)*e:e}return k}]};f.Animation=f.extend(kb,{tweener:function(c,e){if(f.isFunction(c)){e=c;c=["*"]}else c=c.split(" ");for(var g,k=0,l=c.length;k<l;k++){g=c[k];Eb[g]=Eb[g]||[];Eb[g].unshift(e)}},prefilter:function(c,e){e?Kb.unshift(c):Kb.push(c)}});f.Tween=Ja;Ja.prototype={constructor:Ja,init:function(c,e,g,k,l,n){this.elem=c;this.prop=g;this.easing=l||"swing";this.options=e;this.start=this.now=this.cur();
this.end=k;this.unit=n||(f.cssNumber[g]?"":"px")},cur:function(){var c=Ja.propHooks[this.prop];return c&&c.get?c.get(this):Ja.propHooks._default.get(this)},run:function(c){var e,g=Ja.propHooks[this.prop];this.pos=this.options.duration?(e=f.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration)):(e=c);this.now=(this.end-this.start)*e+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);g&&g.set?g.set(this):Ja.propHooks._default.set(this);return this}};Ja.prototype.init.prototype=
Ja.prototype;Ja.propHooks={_default:{get:function(c){if(c.elem[c.prop]!=null&&(!c.elem.style||c.elem.style[c.prop]==null))return c.elem[c.prop];c=f.css(c.elem,c.prop,"");return!c||c==="auto"?0:c},set:function(c){if(f.fx.step[c.prop])f.fx.step[c.prop](c);else if(c.elem.style&&(c.elem.style[f.cssProps[c.prop]]!=null||f.cssHooks[c.prop]))f.style(c.elem,c.prop,c.now+c.unit);else c.elem[c.prop]=c.now}}};Ja.propHooks.scrollTop=Ja.propHooks.scrollLeft={set:function(c){if(c.elem.nodeType&&c.elem.parentNode)c.elem[c.prop]=
c.now}};f.each(["toggle","show","hide"],function(c,e){var g=f.fn[e];f.fn[e]=function(k,l,n){return k==null||typeof k==="boolean"?g.apply(this,arguments):this.animate(ia(e,true),k,l,n)}});f.fn.extend({fadeTo:function(c,e,g,k){return this.filter(z).css("opacity",0).show().end().animate({opacity:e},c,g,k)},animate:function(c,e,g,k){var l=f.isEmptyObject(c),n=f.speed(e,g,k),p=function(){var t=kb(this,f.extend({},c),n);p.finish=function(){t.stop(true)};if(l||f._data(this,"finish"))t.stop(true)};p.finish=
p;return l||n.queue===false?this.each(p):this.queue(n.queue,p)},stop:function(c,e,g){var k=function(l){var n=l.stop;delete l.stop;n(g)};if(typeof c!=="string"){g=e;e=c;c=b}if(e&&c!==false)this.queue(c||"fx",[]);return this.each(function(){var l=true,n=c!=null&&c+"queueHooks",p=f.timers,t=f._data(this);if(n)t[n]&&t[n].stop&&k(t[n]);else for(n in t)t[n]&&t[n].stop&&Rd.test(n)&&k(t[n]);for(n=p.length;n--;)if(p[n].elem===this&&(c==null||p[n].queue===c)){p[n].anim.stop(g);l=false;p.splice(n,1)}if(l||!g)f.dequeue(this,
c)})},finish:function(c){if(c!==false)c=c||"fx";return this.each(function(){var e,g=f._data(this),k=g[c+"queue"];e=g[c+"queueHooks"];var l=f.timers,n=k?k.length:0;g.finish=true;f.queue(this,c,[]);e&&e.cur&&e.cur.finish&&e.cur.finish.call(this);for(e=l.length;e--;)if(l[e].elem===this&&l[e].queue===c){l[e].anim.stop(true);l.splice(e,1)}for(e=0;e<n;e++)k[e]&&k[e].finish&&k[e].finish.call(this);delete g.finish})}});f.each({slideDown:ia("show"),slideUp:ia("hide"),slideToggle:ia("toggle"),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,e){f.fn[c]=function(g,k,l){return this.animate(e,g,k,l)}});f.speed=function(c,e,g){var k=c&&typeof c==="object"?f.extend({},c):{complete:g||!g&&e||f.isFunction(c)&&c,duration:c,easing:g&&e||e&&!f.isFunction(e)&&e};k.duration=f.fx.off?0:typeof k.duration==="number"?k.duration:k.duration in f.fx.speeds?f.fx.speeds[k.duration]:f.fx.speeds._default;if(k.queue==null||k.queue===true)k.queue="fx";k.old=k.complete;k.complete=function(){f.isFunction(k.old)&&
k.old.call(this);k.queue&&f.dequeue(this,k.queue)};return k};f.easing={linear:function(c){return c},swing:function(c){return 0.5-Math.cos(c*Math.PI)/2}};f.timers=[];f.fx=Ja.prototype.init;f.fx.tick=function(){var c,e=f.timers,g=0;for(ub=f.now();g<e.length;g++){c=e[g];!c()&&e[g]===c&&e.splice(g--,1)}e.length||f.fx.stop();ub=b};f.fx.timer=function(c){c()&&f.timers.push(c)&&f.fx.start()};f.fx.interval=13;f.fx.start=function(){Qb||(Qb=setInterval(f.fx.tick,f.fx.interval))};f.fx.stop=function(){clearInterval(Qb);
Qb=null};f.fx.speeds={slow:600,fast:200,_default:400};f.fx.step={};if(f.expr&&f.expr.filters)f.expr.filters.animated=function(c){return f.grep(f.timers,function(e){return c===e.elem}).length};f.fn.offset=function(c){if(arguments.length)return c===b?this:this.each(function(n){f.offset.setOffset(this,c,n)});var e,g,k={top:0,left:0},l=(g=this[0])&&g.ownerDocument;if(l){e=l.documentElement;if(!f.contains(e,g))return k;if(typeof g.getBoundingClientRect!==ca)k=g.getBoundingClientRect();g=G(l);return{top:k.top+
(g.pageYOffset||e.scrollTop)-(e.clientTop||0),left:k.left+(g.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}}};f.offset={setOffset:function(c,e,g){var k=f.css(c,"position");if(k==="static")c.style.position="relative";var l=f(c),n=l.offset(),p=f.css(c,"top"),t=f.css(c,"left"),A={},M={};if((k==="absolute"||k==="fixed")&&f.inArray("auto",[p,t])>-1){M=l.position();k=M.top;t=M.left}else{k=parseFloat(p)||0;t=parseFloat(t)||0}if(f.isFunction(e))e=e.call(c,g,n);if(e.top!=null)A.top=e.top-n.top+k;if(e.left!=
null)A.left=e.left-n.left+t;"using"in e?e.using.call(c,A):l.css(A)}};f.fn.extend({position:function(){if(this[0]){var c,e,g={top:0,left:0},k=this[0];if(f.css(k,"position")==="fixed")e=k.getBoundingClientRect();else{c=this.offsetParent();e=this.offset();f.nodeName(c[0],"html")||(g=c.offset());g.top+=f.css(c[0],"borderTopWidth",true);g.left+=f.css(c[0],"borderLeftWidth",true)}return{top:e.top-g.top-f.css(k,"marginTop",true),left:e.left-g.left-f.css(k,"marginLeft",true)}}},offsetParent:function(){return this.map(function(){for(var c=
this.offsetParent||Q.documentElement;c&&!f.nodeName(c,"html")&&f.css(c,"position")==="static";)c=c.offsetParent;return c||Q.documentElement})}});f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,e){var g=/Y/.test(e);f.fn[c]=function(k){return f.access(this,function(l,n,p){var t=G(l);if(p===b)return t?e in t?t[e]:t.document.documentElement[n]:l[n];if(t)t.scrollTo(!g?p:f(t).scrollLeft(),g?p:f(t).scrollTop());else l[n]=p},c,k,arguments.length,null)}});f.each({Height:"height",Width:"width"},
function(c,e){f.each({padding:"inner"+c,content:e,"":"outer"+c},function(g,k){f.fn[k]=function(l,n){var p=arguments.length&&(g||typeof l!=="boolean"),t=g||(l===true||n===true?"margin":"border");return f.access(this,function(A,M,F){if(f.isWindow(A))return A.document.documentElement["client"+c];if(A.nodeType===9){M=A.documentElement;return Math.max(A.body["scroll"+c],M["scroll"+c],A.body["offset"+c],M["offset"+c],M["client"+c])}return F===b?f.css(A,M,t):f.style(A,M,F,t)},e,p?l:b,p,null)}})});a.jQuery=
a.$=f;typeof define==="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);jQuery.noConflict();var $j=jQuery;String.prototype.parseColor=function(a){var b="#";if(this.slice(0,4)=="rgb("){var d=this.slice(4,this.length-1).split(","),h=0;do b+=parseInt(d[h]).toColorPart();while(++h<3)}else if(this.slice(0,1)=="#"){if(this.length==4)for(h=1;h<4;h++)b+=(this.charAt(h)+this.charAt(h)).toLowerCase();if(this.length==7)b=this.toLowerCase()}return b.length==7?b:a||this};
Element.collectTextNodes=function(a){return $A($(a).childNodes).collect(function(b){return b.nodeType==3?b.nodeValue:b.hasChildNodes()?Element.collectTextNodes(b):""}).flatten().join("")};Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(d){return d.nodeType==3?d.nodeValue:d.hasChildNodes()&&!Element.hasClassName(d,b)?Element.collectTextNodesIgnoreClass(d,b):""}).flatten().join("")};
Element.setContentZoom=function(a,b){a=$(a);a.setStyle({fontSize:b/100+"em"});Prototype.Browser.WebKit&&window.scrollBy(0,0);return a};Element.getInlineOpacity=function(a){return $(a).style.opacity||""};Element.forceRerendering=function(a){try{a=$(a);var b=document.createTextNode(" ");a.appendChild(b);a.removeChild(b)}catch(d){}};
var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(a){return-Math.cos(a*Math.PI)/2+0.5},reverse:function(a){return 1-a},flicker:function(a){a=-Math.cos(a*Math.PI)/4+0.75+Math.random()/4;return a>1?1:a},wobble:function(a){return-Math.cos(a*Math.PI*9*a)/2+0.5},pulse:function(a,b){return-Math.cos(a*((b||5)-0.5)*2*Math.PI)/2+0.5},spring:function(a){return 1-
Math.cos(a*4.5*Math.PI)*Math.exp(-a*6)},none:function(){return 0},full:function(){return 1}},DefaultOptions:{duration:1,fps:100,sync:false,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(a){var b="position:relative";if(Prototype.Browser.IE)b+=";zoom:1";a=$(a);$A(a.childNodes).each(function(d){if(d.nodeType==3){d.nodeValue.toArray().each(function(h){a.insertBefore((new Element("span",{style:b})).update(h==" "?String.fromCharCode(160):h),d)});Element.remove(d)}})},multiple:function(a,b,d){a=
(typeof a=="object"||Object.isFunction(a))&&a.length?a:$(a).childNodes;var h=Object.extend({speed:0.1,delay:0},d||{}),m=h.delay;$A(a).each(function(q,w){new b(q,Object.extend(h,{delay:w*h.speed+m}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(a,b,d){a=$(a);b=(b||"appear").toLowerCase();d=Object.extend({queue:{position:"end",scope:a.id||"global",limit:1}},d||{});Effect[a.visible()?Effect.PAIRS[b][1]:Effect.PAIRS[b][0]](a,d)}};
Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;
Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null},_each:function(a){this.effects._each(a)},add:function(a){var b=(new Date).getTime();switch(Object.isString(a.options.queue)?a.options.queue:a.options.queue.position){case "front":this.effects.findAll(function(d){return d.state=="idle"}).each(function(d){d.startOn+=a.finishOn;d.finishOn+=a.finishOn});break;case "with-last":b=this.effects.pluck("startOn").max()||b;break;case "end":b=this.effects.pluck("finishOn").max()||
b;break}a.startOn+=b;a.finishOn+=b;if(!a.options.queue.limit||this.effects.length<a.options.queue.limit)this.effects.push(a);if(!this.interval)this.interval=setInterval(this.loop.bind(this),15)},remove:function(a){this.effects=this.effects.reject(function(b){return b==a});if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){for(var a=(new Date).getTime(),b=0,d=this.effects.length;b<d;b++)this.effects[b]&&this.effects[b].loop(a)}});
Effect.Queues={instances:$H(),get:function(a){if(!Object.isString(a))return a;return this.instances.get(a)||this.instances.set(a,new Effect.ScopedQueue)}};Effect.Queue=Effect.Queues.get("global");
Effect.Base=Class.create({position:null,start:function(a){if(a&&a.transition===false)a.transition=Effect.Transitions.linear;this.options=Object.extend(Object.extend({},Effect.DefaultOptions),a||{});this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1E3;this.finishOn=this.startOn+this.options.duration*1E3;this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;this.render=function(){function b(d,
h){d.options[h+"Internal"]&&d.options[h+"Internal"](d);d.options[h]&&d.options[h](d)}return function(d){if(this.state==="idle"){this.state="running";b(this,"beforeSetup");this.setup&&this.setup();b(this,"afterSetup")}if(this.state==="running"){this.position=d=this.options.transition(d)*this.fromToDelta+this.options.from;b(this,"beforeUpdate");this.update&&this.update(d);b(this,"afterUpdate")}}}();this.event("beforeStart");this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":
this.options.queue.scope).add(this)},loop:function(a){if(a>=this.startOn)if(a>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");this.finish&&this.finish();this.event("afterFinish")}else{a=(a-this.startOn)/this.totalTime;var b=(a*this.totalFrames).round();if(b>this.currentFrame){this.render(a);this.currentFrame=b}}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this);this.state="finished"},
event:function(a){this.options[a+"Internal"]&&this.options[a+"Internal"](this);this.options[a]&&this.options[a](this)},inspect:function(){var a=$H();for(property in this)Object.isFunction(this[property])||a.set(property,this[property]);return"#<Effect:"+a.inspect()+",options:"+$H(this.options).inspect()+">"}});
Effect.Parallel=Class.create(Effect.Base,{initialize:function(a,b){this.effects=a||[];this.start(b)},update:function(a){this.effects.invoke("render",a)},finish:function(a){this.effects.each(function(b){b.render(1);b.cancel();b.event("beforeFinish");b.finish&&b.finish(a);b.event("afterFinish")})}});
Effect.Tween=Class.create(Effect.Base,{initialize:function(a,b,d){a=Object.isString(a)?$(a):a;var h=$A(arguments),m=h.last();h=h.length==5?h[3]:null;this.method=Object.isFunction(m)?m.bind(a):Object.isFunction(a[m])?a[m].bind(a):function(q){a[m]=q};this.start(Object.extend({from:b,to:d},h||{}))},update:function(a){this.method(a)}});Effect.Event=Class.create(Effect.Base,{initialize:function(a){this.start(Object.extend({duration:0},a||{}))},update:Prototype.emptyFunction});
Effect.Opacity=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});this.start(Object.extend({from:this.element.getOpacity()||0,to:1},b||{}))},update:function(a){this.element.setOpacity(a)}});
Effect.Move=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;this.start(Object.extend({x:0,y:0,mode:"relative"},b||{}))},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");if(this.options.mode=="absolute"){this.options.x-=this.originalLeft;this.options.y-=this.originalTop}},update:function(a){this.element.setStyle({left:(this.options.x*
a+this.originalLeft).round()+"px",top:(this.options.y*a+this.originalTop).round()+"px"})}});Effect.MoveBy=function(a,b,d,h){return new Effect.Move(a,Object.extend({x:d,y:b},h||{}))};
Effect.Scale=Class.create(Effect.Base,{initialize:function(a,b,d){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;this.start(Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:b},d||{}))},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(b){this.originalStyle[b]=
this.element.style[b]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var a=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(b){if(a.indexOf(b)>0){this.fontSize=parseFloat(a);this.fontSizeType=b}}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box")this.dims=[this.element.offsetHeight,this.element.offsetWidth];if(/^content/.test(this.options.scaleMode))this.dims=
[this.element.scrollHeight,this.element.scrollWidth];if(!this.dims)this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]},update:function(a){a=this.options.scaleFrom/100+this.factor*a;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*a+this.fontSizeType});this.setDimensions(this.dims[0]*a,this.dims[1]*a)},finish:function(){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(a,b){var d={};
if(this.options.scaleX)d.width=b.round()+"px";if(this.options.scaleY)d.height=a.round()+"px";if(this.options.scaleFromCenter){a=(a-this.dims[0])/2;b=(b-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY)d.top=this.originalTop-a+"px";if(this.options.scaleX)d.left=this.originalLeft-b+"px"}else{if(this.options.scaleY)d.top=-a+"px";if(this.options.scaleX)d.left=-b+"px"}}this.element.setStyle(d)}});
Effect.Highlight=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;this.start(Object.extend({startcolor:"#fffae2"},b||{}))},setup:function(){if(this.element.getStyle("display")=="none")this.cancel();else{this.oldStyle={};if(!this.options.keepBackgroundImage){this.oldStyle.backgroundImage=this.element.getStyle("background-image");this.element.setStyle({backgroundImage:"none"})}if(!this.options.endcolor)this.options.endcolor=
this.element.getStyle("background-color").parseColor("#ffffff");if(!this.options.restorecolor)this.options.restorecolor=this.element.getStyle("background-color");this._base=$R(0,2).map(function(a){return parseInt(this.options.startcolor.slice(a*2+1,a*2+3),16)}.bind(this));this._delta=$R(0,2).map(function(a){return parseInt(this.options.endcolor.slice(a*2+1,a*2+3),16)-this._base[a]}.bind(this))}},update:function(a){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(b,d,h){return b+
(this._base[h]+this._delta[h]*a).round().toColorPart()}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}});Effect.ScrollTo=function(a,b){b=b||{};var d=document.viewport.getScrollOffsets();a=$(a).cumulativeOffset();if(b.offset)a[1]+=b.offset;return new Effect.Tween(null,d.top,a[1],b,function(h){scrollTo(d.left,h.round())})};
Effect.Fade=function(a,b){a=$(a);var d=a.getInlineOpacity();b=Object.extend({from:a.getOpacity()||1,to:0,afterFinishInternal:function(h){h.options.to==0&&h.element.hide().setStyle({opacity:d})}},b||{});return new Effect.Opacity(a,b)};
Effect.Appear=function(a,b){a=$(a);b=Object.extend({from:a.getStyle("display")=="none"?0:a.getOpacity()||0,to:1,afterFinishInternal:function(d){d.element.forceRerendering()},beforeSetup:function(d){d.element.setOpacity(d.options.from).show()}},b||{});return new Effect.Opacity(a,b)};
Effect.Puff=function(a,b){a=$(a);var d={opacity:a.getInlineOpacity(),position:a.getStyle("position"),top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};return new Effect.Parallel([new Effect.Scale(a,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(a,{sync:true,to:0})],Object.extend({duration:1,beforeSetupInternal:function(h){Position.absolutize(h.effects[0].element)},afterFinishInternal:function(h){h.effects[0].element.hide().setStyle(d)}},
b||{}))};Effect.BlindUp=function(a,b){a=$(a);a.makeClipping();return new Effect.Scale(a,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(d){d.element.hide().undoClipping()}},b||{}))};
Effect.BlindDown=function(a,b){a=$(a);var d=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:d.height,originalWidth:d.width},restoreAfterFinish:true,afterSetup:function(h){h.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(h){h.element.undoClipping()}},b||{}))};
Effect.SwitchOff=function(a,b){a=$(a);var d=a.getInlineOpacity();return new Effect.Appear(a,Object.extend({duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(h){new Effect.Scale(h.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(m){m.element.makePositioned().makeClipping()},afterFinishInternal:function(m){m.element.hide().undoClipping().undoPositioned().setStyle({opacity:d})}})}},b||{}))};
Effect.DropOut=function(a,b){a=$(a);var d={top:a.getStyle("top"),left:a.getStyle("left"),opacity:a.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(a,{x:0,y:100,sync:true}),new Effect.Opacity(a,{sync:true,to:0})],Object.extend({duration:0.5,beforeSetup:function(h){h.effects[0].element.makePositioned()},afterFinishInternal:function(h){h.effects[0].element.hide().undoPositioned().setStyle(d)}},b||{}))};
Effect.Shake=function(a,b){a=$(a);b=Object.extend({distance:20,duration:0.5},b||{});var d=parseFloat(b.distance),h=parseFloat(b.duration)/10,m={top:a.getStyle("top"),left:a.getStyle("left")};return new Effect.Move(a,{x:d,y:0,duration:h,afterFinishInternal:function(q){new Effect.Move(q.element,{x:-d*2,y:0,duration:h*2,afterFinishInternal:function(w){new Effect.Move(w.element,{x:d*2,y:0,duration:h*2,afterFinishInternal:function(B){new Effect.Move(B.element,{x:-d*2,y:0,duration:h*2,afterFinishInternal:function(C){new Effect.Move(C.element,
{x:d*2,y:0,duration:h*2,afterFinishInternal:function(X){new Effect.Move(X.element,{x:-d,y:0,duration:h,afterFinishInternal:function(ga){ga.element.undoPositioned().setStyle(m)}})}})}})}})}})}})};
Effect.SlideDown=function(a,b){a=$(a).cleanWhitespace();var d=a.down().getStyle("bottom"),h=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:h.height,originalWidth:h.width},restoreAfterFinish:true,afterSetup:function(m){m.element.makePositioned();m.element.down().makePositioned();window.opera&&m.element.setStyle({top:""});m.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(m){m.element.down().setStyle({bottom:m.dims[0]-
m.element.clientHeight+"px"})},afterFinishInternal:function(m){m.element.undoClipping().undoPositioned();m.element.down().undoPositioned().setStyle({bottom:d})}},b||{}))};
Effect.SlideUp=function(a,b){a=$(a).cleanWhitespace();var d=a.down().getStyle("bottom"),h=a.getDimensions();return new Effect.Scale(a,window.opera?0:1,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:h.height,originalWidth:h.width},restoreAfterFinish:true,afterSetup:function(m){m.element.makePositioned();m.element.down().makePositioned();window.opera&&m.element.setStyle({top:""});m.element.makeClipping().show()},afterUpdateInternal:function(m){m.element.down().setStyle({bottom:m.dims[0]-
m.element.clientHeight+"px"})},afterFinishInternal:function(m){m.element.hide().undoClipping().undoPositioned();m.element.down().undoPositioned().setStyle({bottom:d})}},b||{}))};Effect.Squish=function(a){return new Effect.Scale(a,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(b){b.element.makeClipping()},afterFinishInternal:function(b){b.element.hide().undoClipping()}})};
Effect.Grow=function(a,b){a=$(a);var d=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},b||{}),h={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},m=a.getDimensions(),q,w,B,C;switch(d.direction){case "top-left":q=w=B=C=0;break;case "top-right":q=m.width;w=C=0;B=-m.width;break;case "bottom-left":q=B=0;w=m.height;C=-m.height;break;
case "bottom-right":q=m.width;w=m.height;B=-m.width;C=-m.height;break;case "center":q=m.width/2;w=m.height/2;B=-m.width/2;C=-m.height/2;break}return new Effect.Move(a,{x:q,y:w,duration:0.01,beforeSetup:function(X){X.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(X){new Effect.Parallel([new Effect.Opacity(X.element,{sync:true,to:1,from:0,transition:d.opacityTransition}),new Effect.Move(X.element,{x:B,y:C,sync:true,transition:d.moveTransition}),new Effect.Scale(X.element,
100,{scaleMode:{originalHeight:m.height,originalWidth:m.width},sync:true,scaleFrom:window.opera?1:0,transition:d.scaleTransition,restoreAfterFinish:true})],Object.extend({beforeSetup:function(ga){ga.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(ga){ga.effects[0].element.undoClipping().undoPositioned().setStyle(h)}},d))}})};
Effect.Shrink=function(a,b){a=$(a);b=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},b||{});var d={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},h=a.getDimensions(),m,q;switch(b.direction){case "top-left":m=q=0;break;case "top-right":m=h.width;q=0;break;case "bottom-left":m=0;q=h.height;break;case "bottom-right":m=h.width;q=
h.height;break;case "center":m=h.width/2;q=h.height/2;break}return new Effect.Parallel([new Effect.Opacity(a,{sync:true,to:0,from:1,transition:b.opacityTransition}),new Effect.Scale(a,window.opera?1:0,{sync:true,transition:b.scaleTransition,restoreAfterFinish:true}),new Effect.Move(a,{x:m,y:q,sync:true,transition:b.moveTransition})],Object.extend({beforeStartInternal:function(w){w.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(w){w.effects[0].element.hide().undoClipping().undoPositioned().setStyle(d)}},
b))};Effect.Pulsate=function(a,b){a=$(a);var d=b||{},h=a.getInlineOpacity(),m=d.transition||Effect.Transitions.linear;return new Effect.Opacity(a,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(q){q.element.setStyle({opacity:h})}},d),{transition:function(q){return 1-m(-Math.cos(q*(d.pulses||5)*2*Math.PI)/2+0.5)}}))};
Effect.Fold=function(a,b){a=$(a);var d={top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};a.makeClipping();return new Effect.Scale(a,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(){new Effect.Scale(a,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(h){h.element.hide().undoClipping().setStyle(d)}})}},b||{}))};
Effect.Morph=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;a=Object.extend({style:{}},b||{});if(Object.isString(a.style))if(a.style.include(":"))this.style=a.style.parseStyle();else{this.element.addClassName(a.style);this.style=$H(this.element.getStyles());this.element.removeClassName(a.style);var d=this.element.getStyles();this.style=this.style.reject(function(h){return h.value==d[h.key]});a.afterFinishInternal=function(h){h.element.addClassName(h.options.style);
h.transforms.each(function(m){h.element.style[m.style]=""})}}else this.style=$H(a.style);this.start(a)},setup:function(){function a(b){if(!b||["rgba(0, 0, 0, 0)","transparent"].include(b))b="#ffffff";b=b.parseColor();return $R(0,2).map(function(d){return parseInt(b.slice(d*2+1,d*2+3),16)})}this.transforms=this.style.map(function(b){var d=b[0];b=b[1];var h=null;if(b.parseColor("#zzzzzz")!="#zzzzzz"){b=b.parseColor();h="color"}else if(d=="opacity"){b=parseFloat(b);Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&
this.element.setStyle({zoom:1})}else if(Element.CSS_LENGTH.test(b)){h=b.match(/^([\+\-]?[0-9\.]+)(.*)$/);b=parseFloat(h[1]);h=h.length==3?h[2]:null}var m=this.element.getStyle(d);return{style:d.camelize(),originalValue:h=="color"?a(m):parseFloat(m||0),targetValue:h=="color"?a(b):b,unit:h}}.bind(this)).reject(function(b){return b.originalValue==b.targetValue||b.unit!="color"&&(isNaN(b.originalValue)||isNaN(b.targetValue))})},update:function(a){for(var b={},d,h=this.transforms.length;h--;)b[(d=this.transforms[h]).style]=
d.unit=="color"?"#"+Math.round(d.originalValue[0]+(d.targetValue[0]-d.originalValue[0])*a).toColorPart()+Math.round(d.originalValue[1]+(d.targetValue[1]-d.originalValue[1])*a).toColorPart()+Math.round(d.originalValue[2]+(d.targetValue[2]-d.originalValue[2])*a).toColorPart():(d.originalValue+(d.targetValue-d.originalValue)*a).toFixed(3)+(d.unit===null?"":d.unit);this.element.setStyle(b,true)}});
Effect.Transform=Class.create({initialize:function(a,b){this.tracks=[];this.options=b||{};this.addTracks(a)},addTracks:function(a){a.each(function(b){b=$H(b);var d=b.values().first();this.tracks.push($H({ids:b.keys().first(),effect:Effect.Morph,options:{style:d}}))}.bind(this));return this},play:function(){return new Effect.Parallel(this.tracks.map(function(a){var b=a.get("ids"),d=a.get("effect"),h=a.get("options");return[$(b)||$$(b)].flatten().map(function(m){return new d(m,Object.extend({sync:true},
h))})}).flatten(),this.options)}});Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex");
Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/;String.__parseStyleElement=document.createElement("div");
String.prototype.parseStyle=function(){var a,b=$H();if(Prototype.Browser.WebKit)a=(new Element("div",{style:this})).style;else{String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>';a=String.__parseStyleElement.childNodes[0].style}Element.CSS_PROPERTIES.each(function(d){a[d]&&b.set(d,a[d])});Prototype.Browser.IE&&this.include("opacity")&&b.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]);return b};
Element.getStyles=document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=document.defaultView.getComputedStyle($(a),null);return Element.CSS_PROPERTIES.inject({},function(d,h){d[h]=b[h];return d})}:function(a){a=$(a);var b=a.currentStyle,d;d=Element.CSS_PROPERTIES.inject({},function(h,m){h[m]=b[m];return h});if(!d.opacity)d.opacity=a.getOpacity();return d};
Effect.Methods={morph:function(a,b,d){a=$(a);new Effect.Morph(a,Object.extend({style:b},d||{}));return a},visualEffect:function(a,b,d){a=$(a);b=b.dasherize().camelize();b=b.charAt(0).toUpperCase()+b.substring(1);new Effect[b](a,d);return a},highlight:function(a,b){a=$(a);new Effect.Highlight(a,b);return a}};
$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(a){Effect.Methods[a]=function(b,d){b=$(b);Effect[a.charAt(0).toUpperCase()+a.substring(1)](b,d);return b}});$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(a){Effect.Methods[a]=Element[a]});Element.addMethods(Effect.Methods);if(typeof Effect=="undefined")throw"controls.js requires including script.aculo.us' effects.js library";var Autocompleter={};
Autocompleter.Base=Class.create({baseInitialize:function(a,b,d){this.element=a=$(a);this.update=$(b);this.active=this.changed=this.hasFocus=false;this.entryCount=this.index=0;this.oldElementValue=this.element.value;if(this.setOptions)this.setOptions(d);else this.options=d||{};this.options.paramName=this.options.paramName||this.element.name;this.options.tokens=this.options.tokens||[];this.options.frequency=this.options.frequency||0.4;this.options.minChars=this.options.minChars||1;this.options.onShow=
this.options.onShow||function(h,m){if(!m.style.position||m.style.position=="absolute"){m.style.position="absolute";Position.clone(h,m,{setHeight:false,offsetTop:h.offsetHeight})}Effect.Appear(m,{duration:0.15})};this.options.onHide=this.options.onHide||function(h,m){new Effect.Fade(m,{duration:0.15})};if(typeof this.options.tokens=="string")this.options.tokens=new Array(this.options.tokens);this.options.tokens.include("\n")||this.options.tokens.push("\n");this.observer=null;this.element.setAttribute("autocomplete",
"off");Element.hide(this.update);Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this));Event.observe(this.element,"keydown",this.onKeyPress.bindAsEventListener(this))},show:function(){Element.getStyle(this.update,"display")=="none"&&this.options.onShow(this.element,this.update);if(!this.iefix&&Prototype.Browser.IE&&Element.getStyle(this.update,"position")=="absolute"){new Insertion.After(this.update,'<iframe id="'+this.update.id+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>');
this.iefix=$(this.update.id+"_iefix")}this.iefix&&setTimeout(this.fixIEOverlapping.bind(this),50)},fixIEOverlapping:function(){Position.clone(this.update,this.iefix,{setTop:!this.update.style.height});this.iefix.style.zIndex=1;this.update.style.zIndex=2;Element.show(this.iefix)},hide:function(){this.stopIndicator();Element.getStyle(this.update,"display")!="none"&&this.options.onHide(this.element,this.update);this.iefix&&Element.hide(this.iefix)},startIndicator:function(){this.options.indicator&&Element.show(this.options.indicator)},
stopIndicator:function(){this.options.indicator&&Element.hide(this.options.indicator)},onKeyPress:function(a){if(this.active)switch(a.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry();Event.stop(a);case Event.KEY_ESC:this.hide();this.active=false;Event.stop(a);return;case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:this.markPrevious();this.render();Event.stop(a);return;case Event.KEY_DOWN:this.markNext();this.render();Event.stop(a);return}else if(a.keyCode==Event.KEY_TAB||
a.keyCode==Event.KEY_RETURN||Prototype.Browser.WebKit>0&&a.keyCode==0)return;this.hasFocus=this.changed=true;this.observer&&clearTimeout(this.observer);this.observer=setTimeout(this.onObserverEvent.bind(this),this.options.frequency*1E3)},activate:function(){this.changed=false;this.hasFocus=true;this.getUpdatedChoices()},onHover:function(a){var b=Event.findElement(a,"LI");if(this.index!=b.autocompleteIndex){this.index=b.autocompleteIndex;this.render()}Event.stop(a)},onClick:function(a){this.index=
Event.findElement(a,"LI").autocompleteIndex;this.selectEntry();this.hide()},onBlur:function(){setTimeout(this.hide.bind(this),250);this.active=this.hasFocus=false},render:function(){if(this.entryCount>0){for(var a=0;a<this.entryCount;a++)this.index==a?Element.addClassName(this.getEntry(a),"selected"):Element.removeClassName(this.getEntry(a),"selected");if(this.hasFocus){this.show();this.active=true}}else{this.active=false;this.hide()}},markPrevious:function(){if(this.index>0)this.index--;else this.index=
this.entryCount-1;this.getEntry(this.index).scrollIntoView(true)},markNext:function(){if(this.index<this.entryCount-1)this.index++;else this.index=0;this.getEntry(this.index).scrollIntoView(false)},getEntry:function(a){return this.update.firstChild.childNodes[a]},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){this.active=false;this.updateElement(this.getCurrentEntry())},updateElement:function(a){if(this.options.updateElement)this.options.updateElement(a);else{var b=
"";if(this.options.select){var d=$(a).select("."+this.options.select)||[];if(d.length>0)b=Element.collectTextNodes(d[0],this.options.select)}else b=Element.collectTextNodesIgnoreClass(a,"informal");d=this.getTokenBounds();if(d[0]!=-1){var h=this.element.value.substr(0,d[0]),m=this.element.value.substr(d[0]).match(/^\s+/);if(m)h+=m[0];this.element.value=h+b+this.element.value.substr(d[1])}else this.element.value=b;this.oldElementValue=this.element.value;this.element.focus();this.options.afterUpdateElement&&
this.options.afterUpdateElement(this.element,a)}},updateChoices:function(a){if(!this.changed&&this.hasFocus){this.update.innerHTML=a;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.down());if(this.update.firstChild&&this.update.down().childNodes){this.entryCount=this.update.down().childNodes.length;for(a=0;a<this.entryCount;a++){var b=this.getEntry(a);b.autocompleteIndex=a;this.addObservers(b)}}else this.entryCount=0;this.stopIndicator();this.index=0;if(this.entryCount==1&&
this.options.autoSelect){this.selectEntry();this.hide()}else this.render()}},addObservers:function(a){Event.observe(a,"mouseover",this.onHover.bindAsEventListener(this));Event.observe(a,"click",this.onClick.bindAsEventListener(this))},onObserverEvent:function(){this.changed=false;this.tokenBounds=null;if(this.getToken().length>=this.options.minChars)this.getUpdatedChoices();else{this.active=false;this.hide()}this.oldElementValue=this.element.value},getToken:function(){var a=this.getTokenBounds();
return this.element.value.substring(a[0],a[1]).strip()},getTokenBounds:function(){if(null!=this.tokenBounds)return this.tokenBounds;var a=this.element.value;if(a.strip().empty())return[-1,0];for(var b=arguments.callee.getFirstDifferencePos(a,this.oldElementValue),d=b==this.oldElementValue.length?1:0,h=-1,m=a.length,q,w=0,B=this.options.tokens.length;w<B;++w){q=a.lastIndexOf(this.options.tokens[w],b+d-1);if(q>h)h=q;q=a.indexOf(this.options.tokens[w],b+d);if(-1!=q&&q<m)m=q}return this.tokenBounds=[h+
1,m]}});Autocompleter.Base.prototype.getTokenBounds.getFirstDifferencePos=function(a,b){for(var d=Math.min(a.length,b.length),h=0;h<d;++h)if(a[h]!=b[h])return h;return d};
Ajax.Autocompleter=Class.create(Autocompleter.Base,{initialize:function(a,b,d,h){this.baseInitialize(a,b,h);this.options.asynchronous=true;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=d},getUpdatedChoices:function(){this.startIndicator();var a=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,a):a;if(this.options.defaultParams)this.options.parameters+=
"&"+this.options.defaultParams;new Ajax.Request(this.url,this.options)},onComplete:function(a){this.updateChoices(a.responseText)}});
Autocompleter.Local=Class.create(Autocompleter.Base,{initialize:function(a,b,d,h){this.baseInitialize(a,b,h);this.options.array=d},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this))},setOptions:function(a){this.options=Object.extend({choices:10,partialSearch:true,partialChars:2,ignoreCase:true,fullSearch:false,selector:function(b){for(var d=[],h=[],m=b.getToken(),q=0;q<b.options.array.length&&d.length<b.options.choices;q++)for(var w=b.options.array[q],B=b.options.ignoreCase?
w.toLowerCase().indexOf(m.toLowerCase()):w.indexOf(m);B!=-1;){if(B==0&&w.length!=m.length){d.push("<li><strong>"+w.substr(0,m.length)+"</strong>"+w.substr(m.length)+"</li>");break}else if(m.length>=b.options.partialChars&&b.options.partialSearch&&B!=-1)if(b.options.fullSearch||/\s/.test(w.substr(B-1,1))){h.push("<li>"+w.substr(0,B)+"<strong>"+w.substr(B,m.length)+"</strong>"+w.substr(B+m.length)+"</li>");break}B=b.options.ignoreCase?w.toLowerCase().indexOf(m.toLowerCase(),B+1):w.indexOf(m,B+1)}if(h.length)d=
d.concat(h.slice(0,b.options.choices-d.length));return"<ul>"+d.join("")+"</ul>"}},a||{})}});Field.scrollFreeActivate=function(a){setTimeout(function(){Field.activate(a)},1)};
Ajax.InPlaceEditor=Class.create({initialize:function(a,b,d){this.url=b;this.element=a=$(a);this.prepareOptions();this._controls={};arguments.callee.dealWithDeprecatedOptions(d);Object.extend(this.options,d||{});if(!this.options.formId&&this.element.id){this.options.formId=this.element.id+"-inplaceeditor";if($(this.options.formId))this.options.formId=""}if(this.options.externalControl)this.options.externalControl=$(this.options.externalControl);if(!this.options.externalControl)this.options.externalControlOnly=
false;this._originalBackground=this.element.getStyle("background-color")||"transparent";this.element.title=this.options.clickToEditText;this._boundCancelHandler=this.handleFormCancellation.bind(this);this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this);this._boundFailureHandler=this.handleAJAXFailure.bind(this);this._boundSubmitHandler=this.handleFormSubmission.bind(this);this._boundWrapperHandler=this.wrapUp.bind(this);this.registerListeners()},checkForEscapeOrReturn:function(a){if(!(!this._editing||
a.ctrlKey||a.altKey||a.shiftKey))if(Event.KEY_ESC==a.keyCode)this.handleFormCancellation(a);else Event.KEY_RETURN==a.keyCode&&this.handleFormSubmission(a)},createControl:function(a,b,d){var h=this.options[a+"Control"];b=this.options[a+"Text"];if("button"==h){d=document.createElement("input");d.type="submit";d.value=b;d.className="editor_"+a+"_button";if("cancel"==a)d.onclick=this._boundCancelHandler;this._form.appendChild(d);this._controls[a]=d}else if("link"==h){h=document.createElement("a");h.href=
"#";h.appendChild(document.createTextNode(b));h.onclick="cancel"==a?this._boundCancelHandler:this._boundSubmitHandler;h.className="editor_"+a+"_link";if(d)h.className+=" "+d;this._form.appendChild(h);this._controls[a]=h}},createEditField:function(){var a=this.options.loadTextURL?this.options.loadingText:this.getText(),b;if(1>=this.options.rows&&!/\r|\n/.test(this.getText())){b=document.createElement("input");b.type="text";var d=this.options.size||this.options.cols||0;if(0<d)b.size=d}else{b=document.createElement("textarea");
b.rows=1>=this.options.rows?this.options.autoRows:this.options.rows;b.cols=this.options.cols||40}b.name=this.options.paramName;b.value=a;b.className="editor_field";if(this.options.submitOnBlur)b.onblur=this._boundSubmitHandler;this._controls.editor=b;this.options.loadTextURL&&this.loadExternalText();this._form.appendChild(this._controls.editor)},createForm:function(){function a(d,h){d=b.options["text"+d+"Controls"];!d||h===false||b._form.appendChild(document.createTextNode(d))}var b=this;this._form=
$(document.createElement("form"));this._form.id=this.options.formId;this._form.addClassName(this.options.formClassName);this._form.onsubmit=this._boundSubmitHandler;this.createEditField();"textarea"==this._controls.editor.tagName.toLowerCase()&&this._form.appendChild(document.createElement("br"));this.options.onFormCustomization&&this.options.onFormCustomization(this,this._form);a("Before",this.options.okControl||this.options.cancelControl);this.createControl("ok",this._boundSubmitHandler);a("Between",
this.options.okControl&&this.options.cancelControl);this.createControl("cancel",this._boundCancelHandler,"editor_cancel");a("After",this.options.okControl||this.options.cancelControl)},destroy:function(){if(this._oldInnerHTML)this.element.innerHTML=this._oldInnerHTML;this.leaveEditMode();this.unregisterListeners()},enterEditMode:function(a){if(!(this._saving||this._editing)){this._editing=true;this.triggerCallback("onEnterEditMode");this.options.externalControl&&this.options.externalControl.hide();
this.element.hide();this.createForm();this.element.parentNode.insertBefore(this._form,this.element);this.options.loadTextURL||this.postProcessEditField();a&&Event.stop(a)}},enterHover:function(){this.options.hoverClassName&&this.element.addClassName(this.options.hoverClassName);this._saving||this.triggerCallback("onEnterHover")},getText:function(){return this.element.innerHTML.unescapeHTML()},handleAJAXFailure:function(a){this.triggerCallback("onFailure",a);if(this._oldInnerHTML){this.element.innerHTML=
this._oldInnerHTML;this._oldInnerHTML=null}},handleFormCancellation:function(a){this.wrapUp();a&&Event.stop(a)},handleFormSubmission:function(a){var b=this._form,d=$F(this._controls.editor);this.prepareSubmission();b=this.options.callback(b,d)||"";if(Object.isString(b))b=b.toQueryParams();b.editorId=this.element.id;if(this.options.htmlResponse){d=Object.extend({evalScripts:true},this.options.ajaxOptions);Object.extend(d,{parameters:b,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler});
new Ajax.Updater({success:this.element},this.url,d)}else{d=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(d,{parameters:b,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler});new Ajax.Request(this.url,d)}a&&Event.stop(a)},leaveEditMode:function(){this.element.removeClassName(this.options.savingClassName);this.removeForm();this.leaveHover();this.element.style.backgroundColor=this._originalBackground;this.element.show();this.options.externalControl&&this.options.externalControl.show();
this._editing=this._saving=false;this._oldInnerHTML=null;this.triggerCallback("onLeaveEditMode")},leaveHover:function(){this.options.hoverClassName&&this.element.removeClassName(this.options.hoverClassName);this._saving||this.triggerCallback("onLeaveHover")},loadExternalText:function(){this._form.addClassName(this.options.loadingClassName);this._controls.editor.disabled=true;var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),
onComplete:Prototype.emptyFunction,onSuccess:function(b){this._form.removeClassName(this.options.loadingClassName);b=b.responseText;if(this.options.stripLoadedTextTags)b=b.stripTags();this._controls.editor.value=b;this._controls.editor.disabled=false;this.postProcessEditField()}.bind(this),onFailure:this._boundFailureHandler});new Ajax.Request(this.options.loadTextURL,a)},postProcessEditField:function(){var a=this.options.fieldPostCreation;if(a)$(this._controls.editor)["focus"==a?"focus":"activate"]()},
prepareOptions:function(){this.options=Object.clone(Ajax.InPlaceEditor.DefaultOptions);Object.extend(this.options,Ajax.InPlaceEditor.DefaultCallbacks);[this._extraDefaultOptions].flatten().compact().each(function(a){Object.extend(this.options,a)}.bind(this))},prepareSubmission:function(){this._saving=true;this.removeForm();this.leaveHover();this.showSaving()},registerListeners:function(){this._listeners={};var a;$H(Ajax.InPlaceEditor.Listeners).each(function(b){a=this[b.value].bind(this);this._listeners[b.key]=
a;this.options.externalControlOnly||this.element.observe(b.key,a);this.options.externalControl&&this.options.externalControl.observe(b.key,a)}.bind(this))},removeForm:function(){if(this._form){this._form.remove();this._form=null;this._controls={}}},showSaving:function(){this._oldInnerHTML=this.element.innerHTML;this.element.innerHTML=this.options.savingText;this.element.addClassName(this.options.savingClassName);this.element.style.backgroundColor=this._originalBackground;this.element.show()},triggerCallback:function(a,
b){"function"==typeof this.options[a]&&this.options[a](this,b)},unregisterListeners:function(){$H(this._listeners).each(function(a){this.options.externalControlOnly||this.element.stopObserving(a.key,a.value);this.options.externalControl&&this.options.externalControl.stopObserving(a.key,a.value)}.bind(this))},wrapUp:function(a){this.leaveEditMode();this._boundComplete(a,this.element)}});Object.extend(Ajax.InPlaceEditor.prototype,{dispose:Ajax.InPlaceEditor.prototype.destroy});
Ajax.InPlaceCollectionEditor=Class.create(Ajax.InPlaceEditor,{initialize:function($super,b,d,h){this._extraDefaultOptions=Ajax.InPlaceCollectionEditor.DefaultOptions;$super(b,d,h)},createEditField:function(){var a=document.createElement("select");a.name=this.options.paramName;a.size=1;this._controls.editor=a;this._collection=this.options.collection||[];this.options.loadCollectionURL?this.loadCollection():this.checkForExternalText();this._form.appendChild(this._controls.editor)},loadCollection:function(){this._form.addClassName(this.options.loadingClassName);
this.showLoadingText(this.options.loadingCollectionText);var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(b){b=b.responseText.strip();if(!/^\[.*\]$/.test(b))throw"Server returned an invalid collection representation.";this._collection=eval(b);this.checkForExternalText()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadCollectionURL,a)},
showLoadingText:function(a){this._controls.editor.disabled=true;var b=this._controls.editor.firstChild;if(!b){b=document.createElement("option");b.value="";this._controls.editor.appendChild(b);b.selected=true}b.update((a||"").stripScripts().stripTags())},checkForExternalText:function(){this._text=this.getText();this.options.loadTextURL?this.loadExternalText():this.buildOptionList()},loadExternalText:function(){this.showLoadingText(this.options.loadingText);var a=Object.extend({method:"get"},this.options.ajaxOptions);
Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(b){this._text=b.responseText.strip();this.buildOptionList()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadTextURL,a)},buildOptionList:function(){this._form.removeClassName(this.options.loadingClassName);this._collection=this._collection.map(function(h){return 2===h.length?h:[h,h].flatten()});var a="value"in this.options?this.options.value:this._text,
b=this._collection.any(function(h){return h[0]==a}.bind(this));this._controls.editor.update("");var d;this._collection.each(function(h,m){d=document.createElement("option");d.value=h[0];d.selected=b?h[0]==a:0==m;d.appendChild(document.createTextNode(h[1]));this._controls.editor.appendChild(d)}.bind(this));this._controls.editor.disabled=false;Field.scrollFreeActivate(this._controls.editor)}});
Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions=function(a){function b(d,h){d in a||h===undefined||(a[d]=h)}if(a){b("cancelControl",a.cancelLink?"link":a.cancelButton?"button":a.cancelLink==a.cancelButton==false?false:undefined);b("okControl",a.okLink?"link":a.okButton?"button":a.okLink==a.okButton==false?false:undefined);b("highlightColor",a.highlightcolor);b("highlightEndColor",a.highlightendcolor)}};
Object.extend(Ajax.InPlaceEditor,{DefaultOptions:{ajaxOptions:{},autoRows:3,cancelControl:"link",cancelText:"cancel",clickToEditText:"Click to edit",externalControl:null,externalControlOnly:false,fieldPostCreation:"activate",formClassName:"inplaceeditor-form",formId:null,highlightColor:"#ffff99",highlightEndColor:"#ffffff",hoverClassName:"",htmlResponse:true,loadingClassName:"inplaceeditor-loading",loadingText:"Loading...",okControl:"button",okText:"ok",paramName:"value",rows:1,savingClassName:"inplaceeditor-saving",
savingText:"Saving...",size:0,stripLoadedTextTags:false,submitOnBlur:false,textAfterControls:"",textBeforeControls:"",textBetweenControls:""},DefaultCallbacks:{callback:function(a){return Form.serialize(a)},onComplete:function(a,b){new Effect.Highlight(b,{startcolor:this.options.highlightColor,keepBackgroundImage:true})},onEnterEditMode:null,onEnterHover:function(a){a.element.style.backgroundColor=a.options.highlightColor;a._effect&&a._effect.cancel()},onFailure:function(a){alert("Error communication with the server: "+
a.responseText.stripTags())},onFormCustomization:null,onLeaveEditMode:null,onLeaveHover:function(a){a._effect=new Effect.Highlight(a.element,{startcolor:a.options.highlightColor,endcolor:a.options.highlightEndColor,restorecolor:a._originalBackground,keepBackgroundImage:true})}},Listeners:{click:"enterEditMode",keydown:"checkForEscapeOrReturn",mouseover:"enterHover",mouseout:"leaveHover"}});Ajax.InPlaceCollectionEditor.DefaultOptions={loadingCollectionText:"Loading options..."};
Form.Element.DelayedObserver=Class.create({initialize:function(a,b,d){this.delay=b||0.5;this.element=$(a);this.callback=d;this.timer=null;this.lastValue=$F(this.element);Event.observe(this.element,"keyup",this.delayedListener.bindAsEventListener(this))},delayedListener:function(){if(this.lastValue!=$F(this.element)){this.timer&&clearTimeout(this.timer);this.timer=setTimeout(this.onTimerEvent.bind(this),this.delay*1E3);this.lastValue=$F(this.element)}},onTimerEvent:function(){this.timer=null;this.callback(this.element,
$F(this.element))}});var RFC822SingleEmailRegex=/^(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x22(?:[^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(?:\x2e(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x22(?:[^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x5b(?:[^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(?:\x2e(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x5b(?:[^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))+$/;
if(!document.onunload)document.onunload=function(){};function makeDynamicFrameTarget(a){var b="dynamic_frame_"+ +new Date,d=(new Element("iframe",{name:b})).setStyle({display:"none"});$(document.body).insert(d);a.target=b}function makeDynamicFrameTargetForUrl(a){a=(new Element("form",{action:a,method:"post"})).setStyle({display:"none"});$(document.body).insert(a);makeDynamicFrameTarget(a);return a}var lastFacebookStatus="unknown";
function requestAdditionalPermissions(){disableFacebookButtons();FB.login(function(a){FacebookApiLoader.updateLoginStatus();setTimeout(function(){window.location.reload()},2E3)},{scope:"email, user_birthday, publish_actions"})}function disableFacebookButtons(){$$("a.sprite_facebook").each(function(a){var b;a.hide();if(!a.next(".spinner")){b=a.hasClassName("no_inverse");a.insert({after:'<span class="spinner facebook_spinner'+(b?"":" spinner_inverse")+'">loading&hellip;</span>'})}})}
function reenableFacebookButtons(){$$("a.sprite_facebook").each(function(a){a.show();(a=a.next(".spinner"))&&a.remove()})}
function showFacebookErrorLightbox(){var a,b;if(active_user.isAuthenticated())a='<h1 class="phl">There\'s been an error!</h1><p class="regtext mhl mvm">The connection with Facebook\'s servers has timed out. Please refresh your page and try the linking process again.</p>';else{a='<h1 class="phl">There\'s been an error!</h1><p class="regtext mhl mvm">We were unable to create a Kongregate account with Facebook.</p><p class="regtext mhl mvm">Click on "Create My Account" below to create a Kongregate account using your email address instead.</p><a id="error_signup_link" href="#" class="submission_button mhl mvm">Create My Account</a>';b=
function(){$("error_signup_link").observe("click",function(h){h.preventDefault();try{lightbox.prototype.shutdown()}catch(m){}lightbox.prototype.initializeKongregateLightboxFromAjax("/accounts/new/behind_login?no_facebook_connect=true&game_id="+active_user.gameId(),{afterStaticContentLoad:function(){lightbox.prototype.toggleRegistration();$("lightbox_email_register").show();$("lightbox_facebook_register").hide();$("lightbox").removeClassName("lightbox_login")}})})}}try{lightbox.prototype.shutdown()}catch(d){}lightbox.prototype.initializeKongregateLightboxFromContent(a,
{done_class_name:"lightbox_login",afterStaticContentLoad:b});reenableFacebookButtons()}function showMatchingUserForm(a,b,d){a="/facebook_connection/login_lightbox?username="+a+"&matched_on="+b;if(active_user.gameId())a+="&game_id="+active_user.gameId();try{lightbox.prototype.shutdown()}catch(h){}lightbox.prototype.initializeKongregateLightboxFromAjax(a,{done_class_name:"lightbox_login"})}function write_to_document(a){document.write(a)}
function toggleTabs(a,b){Element.show(a);Element.show(a+"_title");Element.show(b+"_link");Element.hide(b);Element.hide(b+"_title");Element.hide(a+"_link");$(a+"_tab").className="tab current";$(b+"_tab").className="tab"}
var TopicForm={editNewTitle:function(a){$("new_topic").innerHTML=a.value.length>5?a.value:"New Topic"}},EditForm={init:function(a){$("edit-post-"+a+"_spinner").show();this.clearReplyId()},setReplyId:function(a){$("edit").setAttribute("post_id",a.toString());$("posts-"+a+"-row").addClassName("editing");$("reply")&&$("reply").hide()},clearReplyId:function(){var a=this.currentReplyId();if(!(!a||a==="")){(a=$("posts-"+a+"-row"))&&a.removeClassName("editing");$("edit").setAttribute("post_id","")}},currentReplyId:function(){return $("edit").getAttribute("post_id")},
isEditing:function(a){if(this.currentReplyId()==a.toString()){$("edit").show();$("edit_post_body").focus();return true}return false},cancel:function(){this.clearReplyId();$("edit").hide()}},ReplyForm={init:function(){EditForm.cancel();$("reply").toggle();$("post_body").focus()}};function showChatSelector(a,b){new lightbox("/rooms/change?game_rooms="+a+"&game_id="+b)}function limitText(a,b){if(a.value.length>b)a.value=a.value.substring(0,b)}
function limitCheckedBoxes(a,b,d){for(var h=0,m=0;m<a.length;m++)h+=a[m].checked?1:0;if(h>b)a[d].checked=false}function observePopup(a,b,d,h){var m=window.open(a,"",d||""),q=setInterval(function(){try{if(m.closed){clearInterval(q);h()}}catch(w){clearInterval(q)}},100);return m}Prototype.Platform={Windows:!!navigator.platform.match(/Win/),Macintosh:!!navigator.platform.match(/Mac/),Linux:!!navigator.platform.match(/Linux/)};
Hash.prototype.getWithDefault=function(a,b){var d=this.get(a);return undefined==d?this.set(a,b()):d};Hash.prototype.getOrSet=function(a,b){var d=this.get(a);return undefined==d?this.set(a,b):d};Element.addMethods("textarea",{positionCaretAtEnd:function(a){a=$(a);if(a.createTextRange){var b=a.createTextRange();b.move("character",a.value.length);b.select()}else if(a.selectionStart!==null){b=a.value.length;a.focus();a.setSelectionRange(b,b)}else{a.focus();a.value+=""}return a}});
Element.addMethods({ieHappyHide:function(a){a=$(a);a.style.display="none";a.style.visibility="hidden";return a},ieHappyShow:function(a){a=$(a);a.style.display="";a.style.visibility="visible";return a},setText:function(a,b){a=$(a);a[Prototype.Browser.Gecko?"textContent":"innerText"]=b;return a}});
function autoTruncate(a,b){b||(b=1);$$("."+a).each(function(d){var h=d.down("a"),m=h.getStyle("font-size");d=d.getWidth();var q=11;if(m)q=parseInt(m.sub("px",""),10);m=h.innerHTML;d=Math.round(d/(q-4.5)*b);h.update(m.truncate(d))})}function insertTrackingPixelWithTimestamp(a){stamp=+new Date;document.write('<img src="'+a+stamp+'?"/>')}
Prototype.Browser.Gecko&&function(){Event.observe(document,"keypress",function(a){if(a.keyCode==Event.KEY_TAB)if("select,input,button,textarea".indexOf(a.target.nodeName.toLowerCase())>-1){var b=$(a.target),d=b.up("form").getElements().findAll(function(m){return"hidden"!=m.type&&!m.disabled});b=d.indexOf(b);var h=null;if(h=a.shiftKey?b-1>=0?d[b-1]:null:b+1<d.length?d[b+1]:null){a.stop();h.focus()}}})}();function CommentsController(a){this.initialize(a)}
CommentsController.prototype={initialize:function(a){this._comments_path=a.comments_path;this._hidden_threshold=a.hidden_threshold;this._active_user=a.active_user;this._comment_ids=a.comment_ids;this._top_comments=a.top_comments;this._show_blog_comment=a.show_blog_comment;this._call_to_action=a.call_to_action},showNewCommentForm:function(a){if(a==undefined)a="";if(this._call_to_action||this._active_user.isAuthenticated()){try{holodeck.recordAnalyticsEvent("Comments","Add")}catch(b){}$("commentutility")&&
Element.hide("commentutility"+a);Element.show("comment_new"+a)}},showReplyToCommentForm:function(a){$("reply_to_comment").show();$("comment_"+a).insert($("reply_to_comment"));$("response_content").value="";a=a;$("reply_to_comment_submit").stopObserving("click");$("reply_to_comment_submit").on("click",function(){comments_controller.replyToComment(a)})},showEditReplyToCommentForm:function(a){$("reply_to_comment").show();$("comment_response_"+a).insert($("reply_to_comment"));$("response_content").value=
$("comment_response_content_"+a).innerHTML;a=a;$("reply_to_comment_submit").stopObserving("click");$("reply_to_comment_submit").on("click",function(){comments_controller.replyToComment(a)})},resetNewCommentForm:function(a){if(a==undefined)a="";$("comment_content"+a).value="";$("comment_errors"+a).hide();Element.hide("comment_new"+a);this.reenableNewCommentForm(a);$("commentutility")&&$("commentutility"+a).show()},reenableNewCommentForm:function(a){if(a==undefined)a="";Element.hide("comment_indicator"+
a);$("post_comment_submit"+a).disabled=false},submitNewCommentForm:function(a,b){if(b==undefined)b="";var d=this;Element.show("comment_indicator"+b);$("post_comment_submit"+b).disabled=true;d._call_to_action&&$("post_comment_submit"+b).hide();$(a).request({method:"post",onSuccess:function(h){var m;if(d._call_to_action){(m=$("added_comments_list"))&&m.insert({top:h.responseText});window.location.hash="_";window.location.hash="recent_comments";h=m.down();new Effect.Highlight(h,{});active_user.isFacebookConnected()||
h.insert({after:$("facebook_comment_upsell").show()})}else(m=$$(".comment_list").first())&&m.insert(h.responseText);$("no_comments").hide();d.resetNewCommentForm(b);if(d._call_to_action){$("comment_indicator"+b).hide();$("post_comment_submit"+b).show();d.showNewCommentForm(b)}urchinTracker("/new_comment")},on400:function(h){d.showNewCommentErrors(h.responseText,b)},on500:function(){d.showNewCommentErrors("A server error occured.",b)}})},showNewCommentErrors:function(a,b){if(b==undefined)b="";var d=
$("comment_errors"+b);d.show();d.update(a);if(this._call_to_action){$("comment_indicator"+b).hide();$("post_comment_submit"+b).show()}this.reenableNewCommentForm(b)},userSilenced:function(){var a=$("comment_user_silenced");$("comment_add_a_comment").hide();a.update(this._active_user.silencedMessage());a.show()},checkUserSilenced:function(){this._active_user.isSilenced()&&this.userSilenced()},lightUpSingleComment:function(a,b){a=$("comment_"+a);a.removeClassName("rated_negative");a.removeClassName("rated_positive");
a.addClassName(b?"rated_positive":"rated_negative")},currentRating:function(a){var b=$("comment_current_rating_"+a).innerHTML;return isNaN(b)?NaN:parseInt($("comment_current_rating_"+a).innerHTML,10)},opinionForComment:function(a){a=$("comment_"+a);return a.hasClassName("rated_negative")?false:a.hasClassName("rated_positive")?true:null},rateComment:function(a,b){var d=this.opinionForComment(a);if(d!==b){var h=this.currentRating(a);if(d===true)h-=1;else if(d===false)h+=1;if(b===true)h+=1;else if(b===
false)h-=1;d=$("comment_"+a);$("comment_rating_area_"+a);var m=this;this.hideRatingLinks(a);isNaN(h)||$("comment_current_rating_"+a).update(h);d.removeClassName("below_threshold");d.removeClassName("above_threshold");d.addClassName(h>this._hidden_threshold||isNaN(h)?"above_threshold":"below_threshold");this.lightUpSingleComment(a,b);new Ajax.Request(this._comments_path+"/"+a+"/ratings.js",{parameters:{opinion:b},onComplete:function(){m.showRatingLinks(a)}})}},flagComment:function(a){var b=this;this.hideRatingLinks(a);
new Ajax.Request(this._comments_path+"/"+a+"/flaggings.js",{onComplete:function(){b.showRatingLinks(a);$("comment_flagged_"+a).show();$("comment_flagged_"+a).update("<span>This comment has been flagged for review.</span>")}})},hideRatingLinks:function(a){var b=$("comment_rating_links_"+a),d=$("flag_indicator_"+a);a=$("comment_status_"+a);d.show();a.hide();b.hide()},showRatingLinks:function(a){var b=$("comment_rating_links_"+a),d=$("flag_indicator_"+a);a=$("comment_status_"+a);d.hide();b.show();a.show()},
showCommentContent:function(a){Element.hide("show_comment_content_"+a);Element.show("hide_comment_content_"+a);Element.show("comment_content_"+a)},hideCommentContent:function(a){Element.show("show_comment_content_"+a);Element.hide("hide_comment_content_"+a);Element.hide("comment_content_"+a)},removeComment:function(a){var b=this._comments_path+"/"+a+".js",d=$("flag_indicator_"+a),h=$("remove_comment_"+a),m=$("comment_"+a);d.show();h.hide();new Ajax.Request(b,{method:"delete",onSuccess:function(){m.remove()}})},
spamComment:function(a){var b=this._comments_path+"/"+a+"/spam.js",d=$("flag_indicator_"+a),h=$("spam_comment_"+a),m=$("comment_"+a);d.show();h.hide();new Ajax.Request(b,{method:"post",onSuccess:function(){m.remove()}})},replyToComment:function(a){var b=this._comments_path+"/"+a+"/reply",d=$("flag_indicator_"+a),h=$("reply_to_comment_"+a),m=$("comment_"+a);d.show();h&&h.hide();new Ajax.Request(b,{method:"post",parameters:{response_content:$("response_content").value,show_blog_comment:this._show_blog_comment},
onSuccess:function(q){var w=$("reply_to_comment");w.hide();$$(".user_message").last().insert({after:w});m.replace(q.responseText);comments_controller.showAdminControls();d.hide()}})},cancelReply:function(){$("reply_to_comment").hide();$("response_content").value=""},checkUserRatingStatus:function(){var a=this;(function(){new Ajax.Request(this._active_user.accountUrl()+"/comment_ratings.json",{method:"get",parameters:{comment_ids:Object.toJSON(this._comment_ids),game_id:this._active_user.gameId(),
top_comments:this._top_comments?true:""},onSuccess:function(b){a.lightUpComments(b.responseJSON)}})}).bind(this).runWhenDomLoaded(true)},clearReply:function(a){var b=this._comments_path+"/"+a+"/clear_reply",d=$("flag_indicator_"+a),h=$("clear_reply_to_comment_"+a),m=$("reply_to_comment_"+a),q=$("comment_"+a);d.show();h.hide();new Ajax.Request(b,{method:"post",onSuccess:function(){d.hide();m.show();q.down(".comment_reply").remove()}})},lightUpComments:function(a){var b=this;$H(a).each(function(d){b.lightUpSingleComment(d.key,
d.value)})},showAdminControls:function(){if(active_user.isAdmin()){$$(".admin_controls").each(Element.show);$$(".developer_controls").each(Element.show)}else active_user.isDeveloperOfGame()&&$$(".developer_controls").each(Element.show)}};Function.prototype.runWhenDomLoaded=function(a){if(a&&window.gameLoadObserver)this.runWhenGameLoaded();else if(document.loaded)this.defer();else{var b=this;document.observe("dom:loaded",function(){b()})}};Function.prototype.runWhenReady=function(){var a=function(d){document.loaded&&document.javascript_loaded&&d.defer()};if(document.loaded&&document.javascript_loaded)this.defer();else{var b=this;document.observe("dom:loaded",function(){a(b)});document.observe("dom:javascript_loaded",function(){a(b)})}};Cookie={set:function(a,b,d,h){a=encodeURIComponent(a)+"="+encodeURIComponent(b||"");if(d!==undefined){b=new Date;b.setTime(b.getTime()+864E5*parseFloat(d));a+="; expires="+b.toGMTString()}a+=h?"; path="+h:"; path=/";return document.cookie=a},setWithDate:function(a,b,d){a=encodeURIComponent(a)+"="+encodeURIComponent(b||"");if(d!==undefined)a+="; expires="+d.toGMTString();a+="; path=/";return document.cookie=a},get:function(a){return(a=document.cookie.match(new RegExp("(^|;)\\s*"+encodeURIComponent(a)+
"=([^;\\s]*)")))?decodeURIComponent(a[2].gsub(/\+/," ")):null},erase:function(a,b){var d=Cookie.get(a)||true;Cookie.set(a,"",-1,b);return d},accept:function(){if(typeof navigator.cookieEnabled=="boolean")return navigator.cookieEnabled;Cookie.set("_test","1");return Cookie.erase("_test")==="1"}};var swfobject=function(){function a(){if(!$a){try{var G=T.getElementsByTagName("body")[0].appendChild(O("span"));G.parentNode.removeChild(G)}catch(L){return}$a=true;G=W.length;for(var Y=0;Y<G;Y++)W[Y]()}}function b(G){if($a)G();else W[W.length]=G}function d(G){if(typeof K.addEventListener!=z)K.addEventListener("load",G,false);else if(typeof T.addEventListener!=z)T.addEventListener("load",G,false);else if(typeof K.attachEvent!=z)j(K,"onload",G);else if(typeof K.onload=="function"){var L=K.onload;K.onload=
function(){L();G()}}else K.onload=G}function h(){ra?m():q()}function m(){var G=T.getElementsByTagName("body")[0],L=O(J);L.setAttribute("type",P);var Y=G.appendChild(L);if(Y){var ca=0;(function(){if(typeof Y.GetVariable!=z){var Q=Y.GetVariable("$version");if(Q){Q=Q.split(" ")[1].split(",");ia.pv=[parseInt(Q[0],10),parseInt(Q[1],10),parseInt(Q[2],10)]}}else if(ca<10){ca++;setTimeout(arguments.callee,10);return}G.removeChild(L);Y=null;q()})()}else q()}function q(){var G=ea.length;if(G>0)for(var L=0;L<
G;L++){var Y=ea[L].id,ca=ea[L].callbackFn,Q={success:false,id:Y};if(ia.pv[0]>0){var pa=D(Y);if(pa)if(o(ea[L].swfVersion)&&!(ia.wk&&ia.wk<312)){x(Y,true);if(ca){Q.success=true;Q.ref=w(Y);ca(Q)}}else if(ea[L].expressInstall&&B()){Q={};Q.data=ea[L].expressInstall;Q.width=pa.getAttribute("width")||"0";Q.height=pa.getAttribute("height")||"0";if(pa.getAttribute("class"))Q.styleclass=pa.getAttribute("class");if(pa.getAttribute("align"))Q.align=pa.getAttribute("align");var sa={};pa=pa.getElementsByTagName("param");
for(var Ca=pa.length,Da=0;Da<Ca;Da++)if(pa[Da].getAttribute("name").toLowerCase()!="movie")sa[pa[Da].getAttribute("name")]=pa[Da].getAttribute("value");C(Q,sa,Y,ca)}else{X(pa);ca&&ca(Q)}}else{x(Y,true);if(ca){if((Y=w(Y))&&typeof Y.SetVariable!=z){Q.success=true;Q.ref=Y}ca(Q)}}}}function w(G){var L=null;if((G=D(G))&&G.nodeName=="OBJECT")if(typeof G.SetVariable!=z)L=G;else if(G=G.getElementsByTagName(J)[0])L=G;return L}function B(){return!kb&&o("6.0.65")&&(ia.win||ia.mac)&&!(ia.wk&&ia.wk<312)}function C(G,
L,Y,ca){kb=true;za=ca||null;cb={success:false,id:Y};var Q=D(Y);if(Q){if(Q.nodeName=="OBJECT"){oa=ga(Q);qa=null}else{oa=Q;qa=Y}G.id=v;if(typeof G.width==z||!/%$/.test(G.width)&&parseInt(G.width,10)<310)G.width="310";if(typeof G.height==z||!/%$/.test(G.height)&&parseInt(G.height,10)<137)G.height="137";T.title=T.title.slice(0,47)+" - Flash Player Installation";ca=ia.ie&&ia.win?"ActiveX":"PlugIn";ca="MMredirectURL="+encodeURI(K.location).toString().replace(/&/g,"%26")+"&MMplayerType="+ca+"&MMdoctitle="+
T.title;if(typeof L.flashvars!=z)L.flashvars+="&"+ca;else L.flashvars=ca;if(ia.ie&&ia.win&&Q.readyState!=4){ca=O("div");Y+="SWFObjectNew";ca.setAttribute("id",Y);Q.parentNode.insertBefore(ca,Q);Q.style.display="none";(function(){Q.readyState==4?Q.parentNode.removeChild(Q):setTimeout(arguments.callee,10)})()}H(G,L,Y)}}function X(G){if(ia.ie&&ia.win&&G.readyState!=4){var L=O("div");G.parentNode.insertBefore(L,G);L.parentNode.replaceChild(ga(G),L);G.style.display="none";(function(){G.readyState==4?G.parentNode.removeChild(G):
setTimeout(arguments.callee,10)})()}else G.parentNode.replaceChild(ga(G),G)}function ga(G){var L=O("div");if(ia.win&&ia.ie)L.innerHTML=G.innerHTML;else if(G=G.getElementsByTagName(J)[0])if(G=G.childNodes)for(var Y=G.length,ca=0;ca<Y;ca++)!(G[ca].nodeType==1&&G[ca].nodeName=="PARAM")&&G[ca].nodeType!=8&&L.appendChild(G[ca].cloneNode(true));return L}function H(G,L,Y){var ca,Q=D(Y);if(ia.wk&&ia.wk<312)return ca;if(Q){if(typeof G.id==z)G.id=Y;if(ia.ie&&ia.win){var pa="";for(var sa in G)if(G[sa]!=Object.prototype[sa])if(sa.toLowerCase()==
"data")L.movie=G[sa];else if(sa.toLowerCase()=="styleclass")pa+=' class="'+G[sa]+'"';else if(sa.toLowerCase()!="classid")pa+=" "+sa+'="'+G[sa]+'"';sa="";for(var Ca in L)if(L[Ca]!=Object.prototype[Ca])sa+='<param name="'+Ca+'" value="'+L[Ca]+'" />';Q.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+pa+">"+sa+"</object>";V[V.length]=G.id;ca=D(G.id)}else{Ca=O(J);Ca.setAttribute("type",P);for(pa in G)if(G[pa]!=Object.prototype[pa])if(pa.toLowerCase()=="styleclass")Ca.setAttribute("class",
G[pa]);else pa.toLowerCase()!="classid"&&Ca.setAttribute(pa,G[pa]);for(var Da in L)L[Da]!=Object.prototype[Da]&&Da.toLowerCase()!="movie"&&N(Ca,Da,L[Da]);Q.parentNode.replaceChild(Ca,Q);ca=Ca}}return ca}function N(G,L,Y){var ca=O("param");ca.setAttribute("name",L);ca.setAttribute("value",Y);G.appendChild(ca)}function fa(G){var L=D(G);if(L&&L.nodeName=="OBJECT")if(ia.ie&&ia.win){L.style.display="none";(function(){L.readyState==4?ka(G):setTimeout(arguments.callee,10)})()}else L.parentNode.removeChild(L)}
function ka(G){if(G=D(G)){for(var L in G)if(typeof G[L]=="function")G[L]=null;G.parentNode.removeChild(G)}}function D(G){var L=null;try{L=T.getElementById(G)}catch(Y){}return L}function O(G){return T.createElement(G)}function j(G,L,Y){G.attachEvent(L,Y);aa[aa.length]=[G,L,Y]}function o(G){var L=ia.pv;G=G.split(".");G[0]=parseInt(G[0],10);G[1]=parseInt(G[1],10)||0;G[2]=parseInt(G[2],10)||0;return L[0]>G[0]||L[0]==G[0]&&L[1]>G[1]||L[0]==G[0]&&L[1]==G[1]&&L[2]>=G[2]?true:false}function s(G,L,Y,ca){if(!(ia.ie&&
ia.mac)){var Q=T.getElementsByTagName("head")[0];if(Q){Y=Y&&typeof Y=="string"?Y:"screen";if(ca)Fb=Wa=null;if(!Wa||Fb!=Y){ca=O("style");ca.setAttribute("type","text/css");ca.setAttribute("media",Y);Wa=Q.appendChild(ca);if(ia.ie&&ia.win&&typeof T.styleSheets!=z&&T.styleSheets.length>0)Wa=T.styleSheets[T.styleSheets.length-1];Fb=Y}if(ia.ie&&ia.win)Wa&&typeof Wa.addRule==J&&Wa.addRule(G,L);else Wa&&typeof T.createTextNode!=z&&Wa.appendChild(T.createTextNode(G+" {"+L+"}"))}}}function x(G,L){if(Ja){L=
L?"visible":"hidden";if($a&&D(G))D(G).style.visibility=L;else s("#"+G,"visibility:"+L)}}function I(G){return/[\\\"<>\.;]/.exec(G)!=null&&typeof encodeURIComponent!=z?encodeURIComponent(G):G}var z="undefined",J="object",P="application/x-shockwave-flash",v="SWFObjectExprInst",K=window,T=document,la=navigator,ra=false,W=[h],ea=[],V=[],aa=[],oa,qa,za,cb,$a=false,kb=false,Wa,Fb,Ja=true,ia=function(){var G=typeof T.getElementById!=z&&typeof T.getElementsByTagName!=z&&typeof T.createElement!=z,L=la.userAgent.toLowerCase(),
Y=la.platform.toLowerCase(),ca=Y?/win/.test(Y):/win/.test(L);Y=Y?/mac/.test(Y):/mac/.test(L);L=/webkit/.test(L)?parseFloat(L.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false;var Q=!+"\u000b1",pa=[0,0,0],sa=null;if(typeof la.plugins!=z&&typeof la.plugins["Shockwave Flash"]==J){if((sa=la.plugins["Shockwave Flash"].description)&&!(typeof la.mimeTypes!=z&&la.mimeTypes[P]&&!la.mimeTypes[P].enabledPlugin)){ra=true;Q=false;sa=sa.replace(/^.*\s+(\S+\s+\S+$)/,"$1");pa[0]=parseInt(sa.replace(/^(.*)\..*$/,
"$1"),10);pa[1]=parseInt(sa.replace(/^.*\.(.*)\s.*$/,"$1"),10);pa[2]=/[a-zA-Z]/.test(sa)?parseInt(sa.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof K.ActiveXObject!=z)try{var Ca=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(Ca)if(sa=Ca.GetVariable("$version")){Q=true;sa=sa.split(" ")[1].split(",");pa=[parseInt(sa[0],10),parseInt(sa[1],10),parseInt(sa[2],10)]}}catch(Da){}return{w3:G,pv:pa,wk:L,ie:Q,win:ca,mac:Y}}();(function(){if(ia.w3){if(typeof T.readyState!=z&&T.readyState=="complete"||
typeof T.readyState==z&&(T.getElementsByTagName("body")[0]||T.body))a();if(!$a){typeof T.addEventListener!=z&&T.addEventListener("DOMContentLoaded",a,false);if(ia.ie&&ia.win){T.attachEvent("onreadystatechange",function(){if(T.readyState=="complete"){T.detachEvent("onreadystatechange",arguments.callee);a()}});K==top&&function(){if(!$a){try{T.documentElement.doScroll("left")}catch(G){setTimeout(arguments.callee,0);return}a()}}()}ia.wk&&function(){$a||(/loaded|complete/.test(T.readyState)?a():setTimeout(arguments.callee,
0))}();d(a)}}})();(function(){ia.ie&&ia.win&&window.attachEvent("onunload",function(){for(var G=aa.length,L=0;L<G;L++)aa[L][0].detachEvent(aa[L][1],aa[L][2]);G=V.length;for(L=0;L<G;L++)fa(V[L]);for(var Y in ia)ia[Y]=null;ia=null;for(var ca in swfobject)swfobject[ca]=null;swfobject=null})})();return{registerObject:function(G,L,Y,ca){if(ia.w3&&G&&L){var Q={};Q.id=G;Q.swfVersion=L;Q.expressInstall=Y;Q.callbackFn=ca;ea[ea.length]=Q;x(G,false)}else ca&&ca({success:false,id:G})},getObjectById:function(G){if(ia.w3)return w(G)},
embedSWF:function(G,L,Y,ca,Q,pa,sa,Ca,Da,Ra){var lb={success:false,id:L};if(ia.w3&&!(ia.wk&&ia.wk<312)&&G&&L&&Y&&ca&&Q){x(L,false);b(function(){Y+="";ca+="";var Sa={};if(Da&&typeof Da===J)for(var Ka in Da)Sa[Ka]=Da[Ka];Sa.data=G;Sa.width=Y;Sa.height=ca;Ka={};if(Ca&&typeof Ca===J)for(var mb in Ca)Ka[mb]=Ca[mb];if(sa&&typeof sa===J)for(var vb in sa)if(typeof Ka.flashvars!=z)Ka.flashvars+="&"+vb+"="+sa[vb];else Ka.flashvars=vb+"="+sa[vb];if(o(Q)){mb=H(Sa,Ka,L);Sa.id==L&&x(L,true);lb.success=true;lb.ref=
mb}else if(pa&&B()){Sa.data=pa;C(Sa,Ka,L,Ra);return}else x(L,true);Ra&&Ra(lb)})}else Ra&&Ra(lb)},switchOffAutoHideShow:function(){Ja=false},ua:ia,getFlashPlayerVersion:function(){return{major:ia.pv[0],minor:ia.pv[1],release:ia.pv[2]}},hasFlashPlayerVersion:o,createSWF:function(G,L,Y){if(ia.w3)return H(G,L,Y)},showExpressInstall:function(G,L,Y,ca){ia.w3&&B()&&C(G,L,Y,ca)},removeSWF:function(G){ia.w3&&fa(G)},createCSS:function(G,L,Y,ca){ia.w3&&s(G,L,Y,ca)},addDomLoadEvent:b,addLoadEvent:d,getQueryParamValue:function(G){var L=
T.location.search||T.location.hash;if(L){if(/\?/.test(L))L=L.split("?")[1];if(G==null)return I(L);L=L.split("&");for(var Y=0;Y<L.length;Y++)if(L[Y].substring(0,L[Y].indexOf("="))==G)return I(L[Y].substring(L[Y].indexOf("=")+1))}return""},expressInstallCallback:function(){if(kb){var G=D(v);if(G&&oa){G.parentNode.replaceChild(oa,G);if(qa){x(qa,true);if(ia.ie&&ia.win)oa.style.display="block"}za&&za(cb)}kb=false}}}}();HandlerQueue=function(){function a(h){d.push(h)}function b(){for(var h=d.length-1;h>=0;h--)d[h].apply(this,arguments)}var d=[];return{add:a,handle:b}};ActiveUser=function(a){this.initialize(a)};ActiveUser.UPDATE_FREQUENCY=1200;ActiveUser.SILENCED_TEMPLATE=new Template('You have been silenced for #{until}. Click <a href="/pages/silenced">here</a> to read about silences.');ActiveUser.ADMIN_LOAD_TOOLS_PATH="/admin/load_toolbar";ActiveUser.USER_DATA_LS_KEY="kong_user_data";ActiveUser.SEEN_SHARED_CONTENT_WELCOME_LS_KEY="kong_seen_shared_content";
ActiveUser.prototype={initialize:function(a){var b=this;this._dynamic_style_ele=this._holodeck=null;this._attributes=$H();this._game_attributes=$H();this._attribute_observer_handler=new HandlerQueue;this._on_authenticated_handler=new HandlerQueue;this._captured_inline_selectors=[];this._domain=a.domain;this._cdn_domain=a.cdn_domain;this._load_toolbar=a.load_toolbar;this._game_page=a.game_page;this._redirect_capture=a.redirect_capture;this._new_session_url=a.new_session_url;this.updateAttributes(a.kong_user_data);
this.split_treatments=this.getAttributes().split_treatments;this._more_game_tab_page=2;this._user_progress_bar=null;this._showing_blue_bar_message=false;this.isAuthenticated()&&this.createUpdater();this.addRunWhenAuthenticatedObserver(function(d){d.populateUserSpecificLinks();d.loadAdminToolbar();d.lightPowerupRewardsUpsell();d.initializeUserProgressBar.bind(b).runWhenReady()});this.lightUpBadgeOfTheDayOverlay();this.lightPowerupRewardsUpsell();this._splitTreatmentPermalinks=(this._splitTreatmentPermalinks=
Cookie.get("splitTreatmentPermalinks"))?this._splitTreatmentPermalinks.evalJSON():{}},setHolodeck:function(a){this._holodeck=a},createUpdater:function(){var a=this;new PeriodicalExecuter(function(){a.pullUserData(true)},ActiveUser.UPDATE_FREQUENCY)},isShowingBlueBar:function(){return this._showing_blue_bar_message},showingBlueBar:function(){this._showing_blue_bar_message=true;this._user_progress_bar&&this._user_progress_bar.hideForBlueBar()},initializeUserProgressBar:function(){if(this.getsUserProgressBar()&&
!this.isShowingBlueBar())this._user_progress_bar=new UserProgressBar(this)},getsUserProgressBar:function(){return(this.onOwnProfilePage()||!this._attributes.get("progress_bar_opt_out"))&&this._attributes.get("gets_progress_bar")},showProgressBarCompletionMessage:function(){return this._attributes.get("show_progress_completion_message")},inItemProgressBarTest:function(){return this.split_treatments.user_progress_bar.match("item")},onOwnProfilePage:function(){return this.isAuthenticated()&&"/accounts/"+
this.username().toLowerCase()==window.location.pathname.toLowerCase()},availableProgressBarSteps:function(){return this._attributes.get("available_progress_bar_steps")},progressBarPercentComplete:function(){return this._attributes.get("progress_bar_percent_complete")},pullUserData:function(a){var b=this;a="/accounts/"+this.username()+(a?"/info_update.json":"/info.json");new Ajax.Request(a,{method:"get",onSuccess:function(d){b.updateAttributes(d.responseJSON)}})},addAttributesObserver:function(a){this._attribute_observer_handler.add(a)},
addOnAuthenticatedObserver:function(a){this._on_authenticated_handler.add(a)},addRunWhenAuthenticatedObserver:function(a){this.isAuthenticated()?function(){a(this)}.bind(this).runWhenDomLoaded(true):this.addOnAuthenticatedObserver(a)},updateAttributes:function(a){var b=$.jStorage.get(ActiveUser.USER_DATA_LS_KEY),d=this._attributes.get("username");if(b&&(b.version>a.version||b.generated_at>a.generated_at))a=b;this._attributes.update(a);this._attribute_observer_handler.handle(this);a.username&&a.username!=
d&&this.usernameUpdated();$.jStorage.set(ActiveUser.USER_DATA_LS_KEY,this._attributes.toObject());this.updateNativeAppAttributes()},isNativeAppUser:function(){return!!window.kongNativeApp},sendNativeAppMessage:function(a,b){this.isNativeAppUser()&&kongNativeApp.sendMessage(Object.toJSON({opcode:a,params:b}))},closeNativeAppWindow:function(){this.sendNativeAppMessage("close",{})},updateNativeAppAttributes:function(){this.sendNativeAppMessage("user_info",this._attributes)},updateGameAttributes:function(a){this._game_attributes.update(a)},
gameCookieName:function(){if(this._game_id)return"kong_game_"+this._game_id},getAttributes:function(){return this._attributes.toObject()},getGameAttributes:function(){return this._game_attributes.toObject()},username:function(){return this._attributes.get("username")},siteVisitorUID:function(){return Cookie.get("kong_svid")},advertiserGender:function(a,b){var d=this._attributes.get("gender");if(/^m/i.match(d))return a;else if(/^f/i.match(d))return b},videoEggGender:function(){return this.advertiserGender("m",
"f")},googleGender:function(){return this.advertiserGender(1,2)},googleAgeBracket:function(){var a=this._attributes.get("age");return a<=17?undefined:a<=24?1001:a<=34?1002:a<=44?1003:a<=54?1004:a<=64?1005:1006},avatarPath:function(){var a=this._attributes.get("avatar_url");if(!a)return"";if((a=a.match(/http:\/\/[a-z\.:0-9]*(.*)$/))&&a.length==2)return a[1]},id:function(){return this._attributes.get("id")},facebook_uid:function(){return this._attributes.get("facebook_uid")},solvedCaptcha:function(){return this._attributes.get("solved_captcha")},
chatUsername:function(){return this._attributes.get("chat_username")||this._attributes.get("username")},chatPassword:function(){return this._attributes.get("chat_password")},gameAuthToken:function(){return this._game_attributes.get("game_auth_token")},userVars:function(){return this._game_attributes.get("user_vars")},userVarsSig:function(){return this._game_attributes.get("user_vars_sig")},specialChatVars:function(){return this._attributes.get("special_chat_vars")},gameplaysCount:function(){return this._attributes.get("gameplays_count")},
ratingsCount:function(){return this._attributes.get("ratings_count")},gameplaysCountFromCookie:function(){try{return parseInt(Cookie.get(Holodeck.KONG_GAMEPLAYS_COOKIE_NAME)||1,10)}catch(a){return 0}},duelingGroup:function(){var a=this.specialChatVars();if(a)if(a=a.dueling_quest_data)return a.dueling_quest_slug||"";return""},age:function(){return this._attributes.get("age")},points:function(){return this._attributes.get("points")},pointsAway:function(){return this._attributes.get("points_away")},
friendsOnlineCount:function(){return this._attributes.get("friends_online_count")},friendsOnlineNames:function(){return this._attributes.get("friends_online_names")},unreadShoutsCount:function(){return this._attributes.get("unread_shouts_count")},unreadWhispersCount:function(){return this._attributes.get("unread_whispers_count")},pointsForLastLevel:function(){return this._attributes.get("points_for_last_level")},pointsAfterLastLevel:function(){return active_user.points()-active_user.pointsForLastLevel()},
level:function(){return this._attributes.get("level")},lastLevelupAt:function(){var a=this._attributes.get("last_levelup_at");return a?new Date(a):undefined},recentLevelup:function(){return this.lastLevelupAt()>new Date((new Date).getTime()-864E5)},senderNameOrEmail:function(){return this._attributes.get("sender_name_or_email")},boshEnabled:function(){return this._game_attributes.get("bosh_enabled")},compressionEnabled:function(){return this._game_attributes.get("compression_enabled")},usernameUpdated:function(){var a=
this;(function(){if(a.isAuthenticated()){a.createUpdater(a);a._on_authenticated_handler.handle(a)}}).runWhenDomLoaded(true)},isAuthenticated:function(){return!!(this.username()&&!/^Guest/.match(this.username()))},isAdmin:function(){return this.isAuthenticated()&&this._attributes.get("admin")},isPremium:function(){return!Cookie.get("admin_premium_off")&&this.isAuthenticated()&&this._attributes.get("premium")},hasPreroll:function(){return this.gameplaysCount()>0&&(this.split_treatments.split_killing_prerolls2==
undefined||this.split_treatments.split_killing_prerolls2=="control")},premiumizeUpsellNode:function(a,b,d){this.isPremium()||a.addClassName("clickable").observe("click",function(h){lightbox.prototype.initializePremiumMembershipPurchase(b,d);Event.stop(h);return false});return a},isDeveloperOfGame:function(){return document.location.pathname.split("/")[2].toLowerCase()==this.username().toLowerCase()},isDeveloper:function(){return this.isAuthenticated()&&this._attributes.get("developer")},isChatModerator:function(){return this.isAuthenticated()&&
this._attributes.get("moderator")},isSuperChatModerator:function(){return this.isAuthenticated()&&this._attributes.get("super_chat_moderator")},isCurator:function(){return this.isAuthenticated()&&this._attributes.get("curator")},isForumModerator:function(){return this.isAuthenticated()&&this._attributes.get("forum_moderator")},isGamestopEmployee:function(){return this.isAuthenticated()&&this._attributes.get("gamestop_employee")},getsAdminBar:function(){if(!this._load_toolbar)return false;return this.isChatModerator()||
this.isCurator()||this.isForumModerator()||this.isGamestopEmployee()},silencedUntil:function(){var a=this._attributes.get("silenced_until");return a?new Date(a):undefined},isSilenced:function(){var a=this.silencedUntil();return Boolean(a&&a>new Date)},silencedMessage:function(){return ActiveUser.SILENCED_TEMPLATE.evaluate({until:TimeInWordsHelper.distanceInWords(new Date,this.silencedUntil())})},populateUserSpecificLinks:function(a){var b=this.username();(a?a.select("a"):$$("a.user_specific")).each(function(d){d.href=
d.href.replace("Guest",b).replace("KongregateHolodeckTemplateUsername",b)})},addCapturedSelector:function(a,b){this._captured_inline_selectors.push(a);var d=this,h=function(m){var q=m.onclick;if(q)m.onclick=d.capturedSelectorWrapper.bindAsEventListener(d,q.bind(m),b)};$$(a).each(function(m){m.match("a, input[type=button]")?h(m):m.getElementsBySelector("a, input[type=button]").each(h);m.addClassName("lbOn")})},capturedSelectorWrapper:function(a,b,d){var h="function"==typeof b;if(this.isAuthenticated()){if(h)return b(a)}else{this._redirect_capture?
this.redirectToLogin():this.activateInlineLogin({},d);"function"==typeof b&&this.saveCapturedFunction(b.curry(a));a.preventDefault!=undefined&&Event.stop(a);return false}},activateInlineLogin:function(a,b){a||(a={});a=$H(a);var d="/accounts/new/behind_login";this._holodeck&&this._holodeck.recordAnalyticsEvent("Lightbox","Signin");this._game_id&&a.set("game_id",this._game_id);if(a.size()>0)d=d+"?"+a.toQueryString();b?lightbox.prototype.initializeKongregateLightboxFromAjax(d,{afterStaticContentLoad:function(){lightbox.prototype.toggleRegistration();
active_user.focusFormField("username")}}):lightbox.prototype.initializeKongregateLightboxFromAjax(d,{done_class_name:"lightbox_login",afterStaticContentLoad:function(){active_user.focusFormField("username")}})},focusFormField:function(a){var b=$(a);b&&setTimeout(function(){b.focus()},0)},activateKredPurchase:function(a){this.isAuthenticated()&&lightbox.prototype.initializeKredPurchase(a)},activatePasswordRecovery:function(){if(this.isGamePage())this.activateInlineLogin({recover:true});else document.location=
"/session/new?recover=true"},redirectToLogin:function(){top.location=this._new_session_url},debugLevel:function(){if(!this._debug_level)this._debug_level=this.documentLocationSearchQuery().debug_level;return this._debug_level},documentLocationSearchQuery:function(){if(!this._document_location_search_query)this._document_location_search_query=document.location.search.parseQuery();return this._document_location_search_query},seenSharedContentWelcomeKey:function(){return ActiveUser.SEEN_SHARED_CONTENT_WELCOME_LS_KEY+
"_"+this.gameId()},seenSharedContentWelcome:function(){return!!$.jStorage.get(this.seenSharedContentWelcomeKey())},setSeenSharedContentWelcome:function(a){a?$.jStorage.set(this.seenSharedContentWelcomeKey(),a):$.jStorage.deleteKey(this.seenSharedContentWelcomeKey())},saveCapturedFunction:function(a){this._capturedFunction=a},runCapturedFunction:function(){"function"==typeof this._capturedFunction&&this._capturedFunction.defer();this._capturedFunction=null},gameId:function(){return this._game_id},
setGame:function(a,b,d){this._game_id=a;this._game_resource_path=b;if(d){this.updateGameAttributes(d);Cookie.erase(this.gameCookieName(),this.gameCookiePath())}},gamePath:function(){if(!this._game_path){var a=document.location.pathname.match(/(.*)\/$/);this._game_path=a?a[1]:document.location.pathname}return this._game_path},gameResourcePath:function(){return this._game_resource_path},gameCookiePath:function(){if(!this._game_cookie_path)this._game_cookie_path=this.gamePath().match(/(.*)\/.*/)[1];
return this._game_cookie_path},referrerUrl:function(a){if(!this.isAuthenticated())return a;var b=a.match(/\?/)?"&":"?";return a+b+"referrer="+encodeURIComponent(this.username())},gameType:function(){return this._game_attributes.get("game_type")},hasRequiredPlugins:function(){return this.hasRequiredPluginsFor(this.gameType())},hasRequiredPluginsFor:function(a){if(a=="unity"){var b=false;unityObject.detectUnity(function(d){b=d=="installed"||d=="running"});return b}else return true},accountUrl:function(){return"/accounts/"+
this.username()},isGamePage:function(){return!!this._game_page},domain:function(){return this._domain},cdnDomain:function(){return this._cdn_domain},isMobileUserAgent:function(){return this._attributes.get("mobile_user_agent")},countryCode:function(){return this.valueOfSearchParameter("force_country_code")||this._attributes.get("country_code")},loadAdminToolbar:function(){this.getsAdminBar()&&new Ajax.Updater({success:"admin_links_placeholder"},ActiveUser.ADMIN_LOAD_TOOLS_PATH,{method:"get",evalScripts:true})},
recordTreatments:function(a){a&&this._attributes.get("treatments")&&this._attributes.get("treatments").each(function(b){b.analytics_slot&&a._setCustomVar(b.analytics_slot,b.group_permalink,b.treatment_permalink,2)})},valueOfSearchParameter:function(a){return location.search.parseQuery()[a]},powerupRewardsUser:function(){return this._attributes.get("powerup_rewards_user")},powerupRewardsProUser:function(){return!!this.powerupRewardsBonus()},powerupRewardsBonus:function(){return this._attributes.get("powerup_rewards_bonus")},
powerupRewardsBonusFor:function(a){a=parseInt(a,10);var b=this.powerupRewardsBonus();return a>0&&b?(a*b).ceil():a},showPowerupRewardsUpsell:function(){return"US"==this.countryCode()},occasionallyShowRegistrationLightbox:function(){!this.isAuthenticated()&&this.gameplaysCount()-1>=0&&(this.gameplaysCount()-1)%7==0&&this.activateInlineLogin({},true)},lightPowerupRewardsUpsell:function(){if(this.showPowerupRewardsUpsell()){this.createCSS(".powerup_rewards_upsell","display:block");this.createCSS(".powerup_rewards_botd_upsell",
"display:inline")}},lightUpBadgeOfTheDayOverlay:function(){var a=this._attributes.get("botd_badge_id");a&&this.createCSS(".badge_of_the_day_overlay span.botd_badge_id_"+a,"display:block")},createCSS:function(a,b){var d;if(!this._dynamic_style_ele){var h=$$("head")[0];d=new Element("style",{type:"text/css",media:"screen"});h.appendChild(d)}if(!this._dynamic_style_ele)if(Prototype.Browser.IE&&!Prototype.Browser.IE9){if((d=document.styleSheets)&&d.length>0)this._dynamic_style_ele=d[d.length-1]}else this._dynamic_style_ele=
d;if(Prototype.Browser.IE&&!Prototype.Browser.IE9)this._dynamic_style_ele&&typeof this._dynamic_style_ele.addRule=="object"&&this._dynamic_style_ele.addRule(a,b);else this._dynamic_style_ele&&typeof document.createTextNode!="undefined"&&this._dynamic_style_ele.appendChild(document.createTextNode(a+" {"+b+"}"))},invokeConversionIframe:function(){Cookie.erase("_kong_acct_created","/");try{$("conversion_dynamic_iframe_target").update((new Template($("conversion_dynamic_iframe").innerHTML)).evaluate())}catch(a){}},
ignoreBounceMessage:function(a,b){$(a).up(".sitemessage").hide();new Ajax.Request(b)},shoutForGame:function(a,b){a="/accounts/"+this.username()+"/permissions_for_game.json?game_id="+a;new Ajax.Request(a,{method:"get",onSuccess:function(d){json=d.responseJSON;allow=json!=null&&json.always_allow_shouts;b(allow)}})},kredBuyerType:function(){return this._attributes.get("kred_buyer_type")},isFacebookConnected:function(){return!!this._attributes.get("facebook_uid")},facebookAccessTokenNeedsUpdate:function(){return!!this._attributes.get("access_token_needs_update")},
facebookStatus:function(){return this._attributes.get("facebook_status")},facebookLoginUrl:function(){return this._attributes.get("facebook_url")},gameTagTreatment:function(){return this.split_treatments.tags_replace_description},hasGoogleADayForToday:function(){if(!this.isAuthenticated())return false;return!!this._attributes.get("gad_earned")},updateMoreGames:function(){if(!this.isAuthenticated())if(holodeck._permissions.microtransaction_api)holodeck.showSignupTab();else{holodeck.showMoreGamesTab();
holodeck.showSignupTab();new Ajax.Updater({success:"replace_more_games"},"/recommended_games/show_more_tab",{parameters:{game_id:this.gameId(),show_more_tab:true},method:"get",onSuccess:function(){$("main_tab_set").select("a").each(function(a){$("more_games_tab")==undefined&&a.observe("click",function(){$("more_games_tab_pane").hide();clearTimeout(active_user.changeTabTimeout)})});holodeck.showSignupTab();active_user.changeTabTimeout=setTimeout(function(){holodeck.showMoreGamesTab()},3E5)},onFailure:function(){holodeck.showSignupTab()}})}},
moreGamesNextPage:function(){new Ajax.Request("/recommended_games/show_more_tab",{parameters:{game_id:this.gameId(),show_more_tab:true,page:this._more_game_tab_page},method:"get",onSuccess:function(a){active_user._more_game_tab_page+=1;$$(".more_games_load_btn")[0].insert({before:a.responseText});if(active_user._more_game_tab_page*4<48)$("load_more_games_button").restore();else{$("load_more_games_button").hide();$$(".more_games_load_btn").each(Element.hide)}}})},getSplitTreatmentPermalink:function(a,
b,d){if(this._splitTreatmentPermalinks[a])b(this._splitTreatmentPermalinks[a]);else new Ajax.Request("/site_visitor_split_treatments/"+a,{method:"get",onSuccess:function(h){b(h.responseText);active_user._splitTreatmentPermalinks[a]=h.responseText;Cookie.set("splitTreatmentPermalinks",Object.toJSON(active_user._splitTreatmentPermalinks))},onFailure:d})},favoritesCount:function(){return this._attributes.get("favorites_count")},playLatersCount:function(){return this._attributes.get("play_laters_count")},
getsImprovedBrowsing:function(){return this._attributes.get("gets_improved_browsing")},src:function(){return this._attributes.get("src")},crazyEggSplitTreatment:function(){return this._attributes.get("crazy_egg_split_treatment")},showFacebookRegistrationTab:function(){return this._attributes.get("show_facebook_registration")||false},gameSplitTreatments:function(a){var b=[];$H(this.split_treatments).each(function(d){d.key.substring(0,a.length)===a&&b.push(d.key+","+d.value)});return b.size()==0?"none":
b.join("|")}};Ajax.CachedAutocompleter=Class.create();
Object.extend(Object.extend(Ajax.CachedAutocompleter.prototype,Autocompleter.Base.prototype),{initialize:function(a,b,d,h){this.baseInitialize(a,b,h);this.options.asynchronous=true;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=d;this.cache={};if(this.options.forceActivation){Event.stopObserving(this.element,"keydown");Event.observe(this.element,"keydown",this.onKeyPressWithForcedActivation.bindAsEventListener(this));Event.observe(this.element,
"focus",this.onFocus.bindAsEventListener(this))}},getUpdatedChoices:function(){var a=this.getToken().toLowerCase();if(this.cache[a])this.updateChoices(this.cache[a]);else{this.startIndicator();entry=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(a);this.options.parameters=this.options.callback?this.options.callback(this.element,entry):entry;if(this.options.defaultParams)this.options.parameters+="&"+this.options.defaultParams;new Ajax.Request(this.url,this.options)}},onComplete:function(a){this.updateChoices(this.cache[a.request.parameters.search]=
a.responseText)},markPrevious:function(){if(this.index>0)this.index--;else{this.index=this.entryCount-1;this.update.scrollTop=this.update.scrollHeight}selection=this.getEntry(this.index);selection_top=selection.offsetTop;if(selection_top<this.update.scrollTop)this.update.scrollTop-=selection.offsetHeight},markNext:function(){if(this.index<this.entryCount-1)this.index++;else{this.index=0;this.update.scrollTop=0}selection=this.getEntry(this.index);selection_bottom=selection.offsetTop+selection.offsetHeight;
if(selection_bottom>this.update.scrollTop+this.update.offsetHeight)this.update.scrollTop+=selection.offsetHeight},selectEntry:function(){if(this.index>=0){this.active=false;this.updateElement(this.getCurrentEntry())}else{try{this.element.form.onsubmit()}catch(a){}this.element.form.submit()}},onFocus:function(){this.hasFocus=true;if(this.oldElementValue==this.element.value&&this.element.value.length>=this.options.minChars)this.entryCount>0?this.render():this.show()},onKeyPressWithForcedActivation:function(a){var b=
a.keyCode==Event.KEY_TAB||a.keyCode==Event.KEY_RETURN||Prototype.Browser.WebKit>0&&a.keyCode==0,d=this.element.value.length>=this.options.minChars;if(!this.active&&b&&d){Event.stop(a);this.observer&&clearTimeout(this.observer);this.changed=false;this.hasFocus=true;this.getUpdatedChoices()}else this.onKeyPress(a)},updateChoices:function(a){if(!this.changed&&this.hasFocus){this.update.innerHTML=a;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.down());if(this.update.firstChild&&
this.update.down().childNodes){this.entryCount=this.update.down().childNodes.length;for(a=0;a<this.entryCount;a++){var b=this.getEntry(a);b.autocompleteIndex=a;this.addObservers(b)}}else this.entryCount=0;this.stopIndicator();this.update.scrollTop=0;this.index=this.options.noAutoDefault?-1:0;if(this.entryCount==1&&this.options.autoSelect){this.selectEntry();this.hide()}else this.render()}}});Number.prototype.withDelimiters=function(a,b){a||(a=",");b||(b=1E3);for(var d=[],h=Math.floor(this);h;){d.unshift(h%b);h=Math.floor(h/b)}return[d.shift()].concat(d.map(function(m){return m.toPaddedString((b-1+"").length)})).join(a)};Ajax.Poller=function(a,b,d,h){this.initialize(a,b,d,h)};
Ajax.Poller.prototype={initialize:function(a,b,d,h){this._stopped=true;d=d||5E3;h=h||3E4;var m=this,q=Object.extend(Object.extend({method:"get"},b),{on202:function(){if(!m._stopped){setTimeout(m._poll,d);b.on202&&b.on202.apply(b,arguments)}},onFailure:function(){if(!m._stopped){setTimeout(m._poll,h);b.onFailure&&b.onFailure.apply(b,arguments)}}});this._poll=function(){new Ajax.Request(a,q)}},start:function(a){this._stopped=false;setTimeout(this._poll.bind(this),a||0)},stop:function(){this._stopped=
true}};(function(a,b){var d=0;b.prototype.toGlobalReference=function(){var h=this,m;m="_tgrFn"+d++;a[m]=function(){try{delete a[m]}catch(q){a[m]=undefined}h()};return m}})(this,Function);Prototype.Browser.IE6=navigator.userAgent.indexOf("MSIE 6.")>-1;Prototype.Browser.IE7=navigator.userAgent.indexOf("MSIE 7.")>-1;Prototype.Browser.IE8=navigator.userAgent.indexOf("MSIE 8.")>-1;Prototype.Browser.IE9=navigator.userAgent.indexOf("MSIE 9.")>-1;if(Prototype.Browser.IE8)Element._attributeTranslations.write.names["class"]=undefined;
if(Prototype.Browser.WebKit){var indexOfVersion=navigator.userAgent.indexOf("Version");if(indexOfVersion>-1){var versionString=navigator.userAgent.substr(indexOfVersion,13),version=versionString.split("/")[1];if(version){version=parseInt(version.gsub(".",""));if(version>=503)Prototype.Browser.Safari503=true}}};Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(d){return d.nodeType==3?d.nodeValue:d.hasChildNodes()&&!Element.hasClassName(d,b)?Element.collectTextNodesIgnoreClass(d,b):""}).flatten().join("").strip()};Element.Methods.collectTextNodesIgnoreClass=Element.collectTextNodesIgnoreClass;Element.addMethods(Element.Methods);Element.Methods.selectedOptionValue=function(a){a=$(a);if("SELECT"===a.tagName)return(a=a.select("option")[a.selectedIndex])&&a.readAttribute("value")};Element.Methods.selectOptionValue=function(a,b){a=$(a);if("SELECT"==a.tagName)a.selectedIndex=a.select("option").pluck("value").indexOf(b)};Element.addMethods(Element.Methods);(function(){function a(H){var N=document.createElement("div");H="on"+H;var fa=H in N;if(!fa){N.setAttribute(H,"return;");fa=typeof N[H]=="function"}return fa}function b(H){return Object.isElement(H)&&H.nodeName.toUpperCase()=="FORM"}function d(H){if(Object.isElement(H)){H=H.nodeName.toUpperCase();return H=="INPUT"||H=="SELECT"||H=="TEXTAREA"}else return false}function h(H){var N,fa,ka;if(H.fire("ajax:before").stopped)return false;if(H.tagName.toLowerCase()==="form"){N=H.readAttribute("method")||"post";
fa=H.readAttribute("action");ka=H.serialize({submit:H.retrieve("rails:submit-button")});H.store("rails:submit-button",null)}else{N=H.readAttribute("data-method")||"get";fa=H.readAttribute("href");ka={}}new Ajax.Request(fa,{method:N,parameters:ka,evalScripts:true,onCreate:function(D){H.fire("ajax:create",D)},onComplete:function(D){H.fire("ajax:complete",D)},onSuccess:function(D){H.fire("ajax:success",D)},onFailure:function(D){H.fire("ajax:failure",D)}});H.fire("ajax:after")}function m(H,N,fa){H.insert(new Element("input",
{type:"hidden",name:N,value:fa}))}function q(H){var N=H.readAttribute("data-method"),fa=H.readAttribute("href"),ka=$$("meta[name=csrf-param]")[0],D=$$("meta[name=csrf-token]")[0];fa=new Element("form",{method:"POST",action:fa,style:"display: none;"});$(H.parentNode).insert(fa);N!=="post"&&m(fa,"_method",N);ka&&m(fa,ka.readAttribute("content"),D.readAttribute("content"));fa.submit()}function w(H){H.select("input[type=submit][data-disable-with]").each(function(N){N.store("rails:original-value",N.getValue());
N.setValue(N.readAttribute("data-disable-with")).disable()})}function B(H){H.select("input[type=submit][data-disable-with]").each(function(N){N.setValue(N.retrieve("rails:original-value")).enable()})}function C(H){H=H.readAttribute("data-confirm");return!H||confirm(H)}Ajax.Responders.register({onCreate:function(H){var N=$$("meta[name=csrf-token]")[0];if(N){if(!H.options.requestHeaders)H.options.requestHeaders={};H.options.requestHeaders["X-CSRF-Token"]=N.readAttribute("content")}}});var X=a("submit"),
ga=a("change");if(!X||!ga)Event.Handler.prototype.initialize=Event.Handler.prototype.initialize.wrap(function(H,N,fa,ka,D){H(N,fa,ka,D);if(!X&&this.eventName=="submit"&&!b(this.element)||!ga&&this.eventName=="change"&&!d(this.element))this.eventName="emulated:"+this.eventName});X||document.on("focusin","form",function(H,N){if(!N.retrieve("emulated:submit")){N.on("submit",function(fa){N.fire("emulated:submit",fa,true).returnValue===false&&fa.preventDefault()});N.store("emulated:submit",true)}});ga||
document.on("focusin","input, select, textarea",function(H,N){if(!N.retrieve("emulated:change")){N.on("change",function(fa){N.fire("emulated:change",fa,true)});N.store("emulated:change",true)}});document.on("click","a[data-confirm], a[data-remote], a[data-method], input[data-confirm], button[data-confirm]",function(H,N){if(!C(N)){H.stop();return false}if(N.readAttribute("data-remote")){h(N);H.stop()}else if(N.readAttribute("data-method")){q(N);H.stop()}});document.on("click","form input[type=submit], form button[type=submit], form button:not([type])",
function(H,N){H.findElement("form").store("rails:submit-button",N.name||false)});document.on("submit",function(H){var N=H.findElement();if(!C(N)){H.stop();return false}if(N.readAttribute("data-remote")){h(N);H.stop()}else w(N)});document.on("ajax:create","form",function(H,N){N==H.findElement()&&w(N)});document.on("ajax:complete","form",function(H,N){N==H.findElement()&&B(N)})})();if(typeof Control=="undefined")Control={};var $proc=function(a){return typeof a=="function"?a:function(){return a}},$value=function(a){return typeof a=="function"?a():a};
Object.Event={extend:function(a){a._objectEventSetup=function(b){this._observers=this._observers||{};this._observers[b]=this._observers[b]||[]};a.observe=function(b,d){if(typeof b=="string"&&typeof d!="undefined"){this._objectEventSetup(b);this._observers[b].include(d)||this._observers[b].push(d)}else for(var h in b)this.observe(h,b[h])};a.stopObserving=function(b,d){this._objectEventSetup(b);if(b&&d)this._observers[b]=this._observers[b].without(d);else if(b)this._observers[b]=[];else this._observers=
{}};a.observeOnce=function(b,d){var h=function(){d.apply(this,arguments);this.stopObserving(b,h)}.bind(this);this._objectEventSetup(b);this._observers[b].push(h)};a.notify=function(b){this._objectEventSetup(b);var d=[],h=$A(arguments).slice(1);try{for(var m=0;m<this._observers[b].length;++m)d.push(this._observers[b][m].apply(this._observers[b][m],h)||null)}catch(q){if(q==$break)return false;else throw q;}return d};if(a.prototype){a.prototype._objectEventSetup=a._objectEventSetup;a.prototype.observe=
a.observe;a.prototype.stopObserving=a.stopObserving;a.prototype.observeOnce=a.observeOnce;a.prototype.notify=function(b){if(a.notify){var d=$A(arguments).slice(1);d.unshift(this);d.unshift(b);a.notify.apply(a,d)}this._objectEventSetup(b);d=$A(arguments).slice(1);var h=[];try{if(this.options&&this.options[b]&&typeof this.options[b]=="function")h.push(this.options[b].apply(this,d)||null);for(var m=0;m<this._observers[b].length;++m)h.push(this._observers[b][m].apply(this._observers[b][m],d)||null)}catch(q){if(q==
$break)return false;else throw q;}return h}}}};Element.addMethods({observeOnce:function(a,b,d){var h=function(){d.apply(this,arguments);Element.stopObserving(a,b,h)};Element.observe(a,b,h)}});(function(){function a(b){var d;if(b.wheelDelta)d=b.wheelDelta/120;else if(b.detail)d=-b.detail/3;if(d)if(b.element().fire("mouse:wheel",{delta:d}).stopped){b.stop();return false}}document.observe("mousewheel",a)})();
var IframeShim=Class.create({initialize:function(){this.element=new Element("iframe",{style:"position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);display:none",src:"javascript:void(0);",frameborder:0});$(document.body).insert(this.element)},hide:function(){this.element.hide();return this},show:function(){this.element.show();return this},positionUnder:function(a){a=$(a);var b=a.cumulativeOffset(),d=a.getDimensions();this.element.setStyle({left:b[0]+"px",top:b[1]+"px",width:d.width+
"px",height:d.height+"px",zIndex:a.getStyle("zIndex")-1}).show();return this},setBounds:function(a){for(prop in a)a[prop]+="px";this.element.setStyle(a);return this},destroy:function(){this.element&&this.element.remove();return this}});if(typeof Draggable!="undefined")Draggable.prototype.draw=function(a){var b=Position.cumulativeOffset(this.element);if(this.options.ghosting){var d=Position.realOffset(this.element);b[0]+=d[0]-Position.deltaX;b[1]+=d[1]-Position.deltaY}d=this.currentDelta();b[0]-=d[0];b[1]-=d[1];if(this.options.scroll&&this.options.scroll!=window&&this._isScrollChild){b[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft;b[1]-=this.options.scroll.scrollTop-this.originalScrollTop}d=[0,1].map(function(C){return a[C]-
b[C]-this.offset[C]}.bind(this));if(this.options.snap)d=typeof this.options.snap=="function"?this.options.snap(d[0],d[1],this):this.options.snap instanceof Array?d.map(function(C,X){return Math.round(C/this.options.snap[X])*this.options.snap[X]}.bind(this)):d.map(function(C){return Math.round(C/this.options.snap)*this.options.snap}.bind(this));if(this.options.onDraw)this.options.onDraw.bind(this)(d);else{var h=this.element.style;if(this.options.constrainToViewport){var m=document.viewport.getDimensions(),
q=this.element.getDimensions(),w=parseInt(this.element.getStyle("margin-top")),B=parseInt(this.element.getStyle("margin-left"));m=[[0-B,0-w],[m.width-q.width-B,m.height-q.height-w]];if(!this.options.constraint||this.options.constraint=="horizontal")this.element.style.left=d[0]>=m[0][0]&&d[0]<=m[1][0]?d[0]+"px":(d[0]<m[0][0]?m[0][0]:m[1][0])+"px";if(!this.options.constraint||this.options.constraint=="vertical")this.element.style.top=d[1]>=m[0][1]&&d[1]<=m[1][1]?d[1]+"px":(d[1]<=m[0][1]?m[0][1]:m[1][1])+
"px"}else{if(!this.options.constraint||this.options.constraint=="horizontal")h.left=d[0]+"px";if(!this.options.constraint||this.options.constraint=="vertical")h.top=d[1]+"px"}if(h.visibility=="hidden")h.visibility=""}};if(typeof Prototype=="undefined")throw"Control.Window requires Prototype to be loaded.";if(typeof IframeShim=="undefined")throw"Control.Window requires IframeShim to be loaded.";if(typeof Object.Event=="undefined")throw"Control.Window requires Object.Event to be loaded.";
Control.Window=Class.create({initialize:function(a,b){Control.Window.windows.push(this);this.remoteContentLoaded=this.ajaxRequest=this.sourceContainer=this.href=this.isOpen=this.container=false;this.numberInSequence=Control.Window.windows.length+1;this.indicator=false;this.effects={fade:false,appear:false};this.indicatorEffects={fade:false,appear:false};this.options=Object.extend({beforeOpen:Prototype.emptyFunction,afterOpen:Prototype.emptyFunction,beforeClose:Prototype.emptyFunction,afterClose:Prototype.emptyFunction,
height:null,width:null,className:false,position:"center",offsetLeft:0,offsetTop:0,iframe:false,hover:false,indicator:false,closeOnClick:false,iframeshim:true,fade:false,fadeDuration:0.75,draggable:false,onDrag:Prototype.emptyFunction,resizable:false,minHeight:false,minWidth:false,maxHeight:false,maxWidth:false,onResize:Prototype.emptyFunction,constrainToViewport:false,method:"post",parameters:{},onComplete:Prototype.emptyFunction,onSuccess:Prototype.emptyFunction,onFailure:Prototype.emptyFunction,
onException:Prototype.emptyFunction,onRemoteContentLoaded:Prototype.emptyFunction,insertRemoteContentAt:false},b||{});this.indicator=this.options.indicator?$(this.options.indicator):false;if(a)if(typeof a=="string"&&a.match(Control.Window.uriRegex))this.href=a;else{this.container=$(a);this.createDefaultContainer(a);if(this.container&&(this.container.readAttribute("href")&&this.container.readAttribute("href")!=""||this.options.hover&&this.options.hover!==true)){if(this.options.hover&&this.options.hover!==
true)this.sourceContainer=$(this.options.hover);else{this.sourceContainer=this.container;this.href=this.container.readAttribute("href");if((b=this.href.match(/^#(.+)$/))&&b[1]){this.container=$(b[1]);this.href=false}else this.container=false}this.sourceContainerOpenHandler=function(d){this.open(d);d.stop();return false}.bindAsEventListener(this);this.sourceContainerCloseHandler=function(d){this.close(d)}.bindAsEventListener(this);this.sourceContainerMouseMoveHandler=function(d){this.position(d)}.bindAsEventListener(this);
if(this.options.hover){this.sourceContainer.observe("mouseenter",this.sourceContainerOpenHandler);this.sourceContainer.observe("mouseleave",this.sourceContainerCloseHandler);this.options.position=="mouse"&&this.sourceContainer.observe("mousemove",this.sourceContainerMouseMoveHandler)}else this.sourceContainer.observe("click",this.sourceContainerOpenHandler)}}this.createDefaultContainer(a);if(this.options.insertRemoteContentAt===false)this.options.insertRemoteContentAt=this.container;a={margin:0,position:"absolute",
zIndex:Control.Window.initialZIndexForWindow()};if(this.options.width)a.width=$value(this.options.width)+"px";if(this.options.height)a.height=$value(this.options.height)+"px";this.container.setStyle(a);this.options.className&&this.container.addClassName(this.options.className);this.positionHandler=this.position.bindAsEventListener(this);this.outOfBoundsPositionHandler=this.ensureInBounds.bindAsEventListener(this);this.bringToFrontHandler=this.bringToFront.bindAsEventListener(this);this.container.observe("mousedown",
this.bringToFrontHandler);this.container.hide();this.closeHandler=this.close.bindAsEventListener(this);if(this.options.iframeshim){this.iFrameShim=new IframeShim;this.iFrameShim.hide()}this.applyResizable();this.applyDraggable();Event.observe(window,"resize",this.outOfBoundsPositionHandler);this.notify("afterInitialize")},open:function(a){if(this.isOpen){this.bringToFront();return false}if(this.notify("beforeOpen")===false)return false;if(this.options.closeOnClick){if(this.options.closeOnClick===
true)this.closeOnClickContainer=$(document.body);else if(this.options.closeOnClick=="container")this.closeOnClickContainer=this.container;else if(this.options.closeOnClick=="overlay"){Control.Overlay.load();this.closeOnClickContainer=Control.Overlay.container}else this.closeOnClickContainer=$(this.options.closeOnClick);this.closeOnClickContainer.observe("click",this.closeHandler)}if(this.href&&!this.options.iframe&&!this.remoteContentLoaded){this.remoteContentLoaded=true;if(this.href.match(/\.(jpe?g|gif|png|tiff?)$/i)){a=
new Element("img");a.observe("load",function(d){this.getRemoteContentInsertionTarget().insert(d);this.position();if(this.notify("onRemoteContentLoaded")!==false){this.options.indicator&&this.hideIndicator();this.finishOpen()}}.bind(this,a));a.writeAttribute("src",this.href)}else if(!this.ajaxRequest){this.options.indicator&&this.showIndicator();this.ajaxRequest=new Ajax.Request(this.href,{method:this.options.method,parameters:this.options.parameters,onComplete:function(d){this.notify("onComplete",
d);this.ajaxRequest=false}.bind(this),onSuccess:function(d){this.getRemoteContentInsertionTarget().insert(d.responseText);this.notify("onSuccess",d);if(this.notify("onRemoteContentLoaded")!==false){this.options.indicator&&this.hideIndicator();this.finishOpen()}}.bind(this),onFailure:function(d){this.notify("onFailure",d);this.options.indicator&&this.hideIndicator()}.bind(this),onException:function(d,h){this.notify("onException",d,h);this.options.indicator&&this.hideIndicator()}.bind(this)})}return true}else if(this.options.iframe&&
!this.remoteContentLoaded){this.remoteContentLoaded=true;this.options.indicator&&this.showIndicator();this.getRemoteContentInsertionTarget().insert(Control.Window.iframeTemplate.evaluate({href:this.href}));var b=this.container.down("iframe");b.onload=function(){this.notify("onRemoteContentLoaded");this.options.indicator&&this.hideIndicator();b.onload=null}.bind(this)}this.finishOpen(a);return true},close:function(a){if(!this.isOpen||this.notify("beforeClose",a)===false)return false;this.options.closeOnClick&&
this.closeOnClickContainer.stopObserving("click",this.closeHandler);if(this.options.fade)this.effects.fade=new Effect.Fade(this.container,{queue:{position:"front",scope:"Control.Window"+this.numberInSequence},from:1,to:0,duration:this.options.fadeDuration/2,afterFinish:function(){this.iFrameShim&&this.iFrameShim.hide();this.isOpen=false;this.notify("afterClose")}.bind(this)});else{this.container.hide();this.iFrameShim&&this.iFrameShim.hide()}this.ajaxRequest&&this.ajaxRequest.transport.abort();if(!(this.options.draggable||
this.options.resizable)&&this.options.position=="center")Event.stopObserving(window,"resize",this.positionHandler);!this.options.draggable&&this.options.position=="center"&&Event.stopObserving(window,"scroll",this.positionHandler);this.options.indicator&&this.hideIndicator();if(!this.options.fade){this.isOpen=false;this.notify("afterClose")}return true},position:function(a){if(this.options.position=="mouse"){var b=[Event.pointerX(a),Event.pointerY(a)];this.container.setStyle({top:b[1]+$value(this.options.offsetTop)+
"px",left:b[0]+$value(this.options.offsetLeft)+"px"})}else{a=this.container.getDimensions();var d=document.viewport.getDimensions();Position.prepare();var h=Position.deltaX+Math.floor((d.width-a.width)/2);b=Position.deltaY+(d.height>a.height?Math.floor((d.height-a.height)/2):0);if(this.options.position=="center")this.container.setStyle({top:a.height<=d.height?(b!=null&&b>0?b:0)+"px":0,left:a.width<=d.width?(h!=null&&h>0?h:0)+"px":0});else if(this.options.position=="relative"){b=this.sourceContainer.cumulativeOffset();
h=b[1]+$value(this.options.offsetTop);b=b[0]+$value(this.options.offsetLeft);this.container.setStyle({top:a.height<=d.height?(this.options.constrainToViewport?Math.max(0,Math.min(d.height-a.height,h)):h)+"px":0,left:a.width<=d.width?(this.options.constrainToViewport?Math.max(0,Math.min(d.width-a.width,b)):b)+"px":0})}else if(this.options.position.length){h=$value(this.options.position[1])+$value(this.options.offsetTop);b=$value(this.options.position[0])+$value(this.options.offsetLeft);this.container.setStyle({top:a.height<=
d.height?(this.options.constrainToViewport?Math.max(0,Math.min(d.height-a.height,h)):h)+"px":0,left:a.width<=d.width?(this.options.constrainToViewport?Math.max(0,Math.min(d.width-a.width,b)):b)+"px":0})}this.iFrameShim&&this.updateIFrameShimZIndex()}},ensureInBounds:function(){if(this.isOpen){var a=document.viewport.getDimensions(),b=this.container.cumulativeOffset(),d=this.container.getDimensions();b.left+d.width>a.width&&this.container.setStyle({left:Math.max(0,a.width-d.width)+"px"});b.top+d.height>
a.height&&this.container.setStyle({top:Math.max(0,a.height-d.height)+"px"})}},bringToFront:function(){Control.Window.bringToFront(this);this.notify("bringToFront")},destroy:function(){this.container.stopObserving("mousedown",this.bringToFrontHandler);if(this.draggable){Resizables.removeObserver(this.container);this.draggable.handle.stopObserving("mousedown",this.bringToFrontHandler);this.draggable.destroy()}if(this.resizable){Resizables.removeObserver(this.container);this.resizable.handle.stopObserving("mousedown",
this.bringToFrontHandler);this.resizable.destroy()}this.container&&!this.sourceContainer&&this.container.remove();if(this.sourceContainer)if(this.options.hover){this.sourceContainer.stopObserving("mouseenter",this.sourceContainerOpenHandler);this.sourceContainer.stopObserving("mouseleave",this.sourceContainerCloseHandler);this.options.position=="mouse"&&this.sourceContainer.stopObserving("mousemove",this.sourceContainerMouseMoveHandler)}else this.sourceContainer.stopObserving("click",this.sourceContainerOpenHandler);
this.iFrameShim&&this.iFrameShim.destroy();Event.stopObserving(window,"resize",this.outOfBoundsPositionHandler);Control.Window.windows=Control.Window.windows.without(this);this.notify("afterDestroy")},applyResizable:function(){if(this.options.resizable){if(typeof Resizable=="undefined")throw"Control.Window requires resizable.js to be loaded.";var a=null;if(this.options.resizable===true){a=new Element("div",{className:"resizable_handle"});this.container.insert(a)}else a=$(this.options.resziable);this.resizable=
new Resizable(this.container,{handle:a,minHeight:this.options.minHeight,minWidth:this.options.minWidth,maxHeight:this.options.constrainToViewport?function(b){return document.viewport.getDimensions().height-parseInt(b.style.top||0)-(b.getHeight()-parseInt(b.style.height||0))}:this.options.maxHeight,maxWidth:this.options.constrainToViewport?function(b){return document.viewport.getDimensions().width-parseInt(b.style.left||0)-(b.getWidth()-parseInt(b.style.width||0))}:this.options.maxWidth});this.resizable.handle.observe("mousedown",
this.bringToFrontHandler);Resizables.addObserver(new Control.Window.LayoutUpdateObserver(this,function(){this.iFrameShim&&this.updateIFrameShimZIndex();this.notify("onResize")}.bind(this)))}},applyDraggable:function(){if(this.options.draggable){if(typeof Draggables=="undefined")throw"Control.Window requires dragdrop.js to be loaded.";var a=null;if(this.options.draggable===true){a=new Element("div",{className:"draggable_handle"});this.container.insert(a)}else a=$(this.options.draggable);this.draggable=
new Draggable(this.container,{handle:a,constrainToViewport:this.options.constrainToViewport,zindex:this.container.getStyle("z-index"),starteffect:function(){if(Prototype.Browser.IE){this.old_onselectstart=document.onselectstart;document.onselectstart=function(){return false}}}.bind(this),endeffect:function(){document.onselectstart=this.old_onselectstart}.bind(this)});this.draggable.handle.observe("mousedown",this.bringToFrontHandler);Draggables.addObserver(new Control.Window.LayoutUpdateObserver(this,
function(){this.iFrameShim&&this.updateIFrameShimZIndex();this.notify("onDrag")}.bind(this)))}},createDefaultContainer:function(a){if(!this.container){this.container=new Element("div",{id:"control_window_"+this.numberInSequence});$(document.body).insert(this.container);typeof a=="string"&&$(a)==null&&!a.match(/^#(.+)$/)&&!a.match(Control.Window.uriRegex)&&this.container.update(a)}},finishOpen:function(a){this.bringToFront();if(this.options.fade){if(typeof Effect=="undefined")throw"Control.Window requires effects.js to be loaded.";
this.effects.fade&&this.effects.fade.cancel();this.effects.appear=new Effect.Appear(this.container,{queue:{position:"end",scope:"Control.Window."+this.numberInSequence},from:0,to:1,duration:this.options.fadeDuration/2,afterFinish:function(){this.iFrameShim&&this.updateIFrameShimZIndex();this.isOpen=true;this.notify("afterOpen")}.bind(this)})}else this.container.show();this.position(a);if(!(this.options.draggable||this.options.resizable)&&this.options.position=="center")Event.observe(window,"resize",
this.positionHandler,false);!this.options.draggable&&this.options.position=="center"&&Event.observe(window,"scroll",this.positionHandler,false);if(!this.options.fade){this.isOpen=true;this.notify("afterOpen")}return true},showIndicator:function(){this.showIndicatorTimeout=window.setTimeout(function(){if(this.options.fade)this.indicatorEffects.appear=new Effect.Appear(this.indicator,{queue:{position:"front",scope:"Control.Window.indicator."+this.numberInSequence},from:0,to:1,duration:this.options.fadeDuration/
2});else this.indicator.show()}.bind(this),Control.Window.indicatorTimeout)},hideIndicator:function(){this.showIndicatorTimeout&&window.clearTimeout(this.showIndicatorTimeout);this.indicator.hide()},getRemoteContentInsertionTarget:function(){return typeof this.options.insertRemoteContentAt=="string"?this.container.down(this.options.insertRemoteContentAt):$(this.options.insertRemoteContentAt)},updateIFrameShimZIndex:function(){this.iFrameShim&&this.iFrameShim.positionUnder(this.container)}});
Object.extend(Control.Window,{windows:[],baseZIndex:9999,indicatorTimeout:250,iframeTemplate:new Template('<iframe src="#{href}" width="100%" height="100%" frameborder="0"></iframe>'),uriRegex:/^(\/|\#|https?\:\/\/|[\w]+\/)/,bringToFront:function(a){Control.Window.windows=Control.Window.windows.without(a);Control.Window.windows.push(a);Control.Window.windows.each(function(b,d){d=Control.Window.baseZIndex+d;b.container.setStyle({zIndex:d});b.isOpen&&b.iFrameShim&&b.updateIFrameShimZIndex();if(b.options.draggable)b.draggable.options.zindex=
d})},open:function(a,b){a=new Control.Window(a,b);a.open();return a},initialZIndexForWindow:function(){return Control.Window.baseZIndex+(Control.Window.windows.length-1)}});Object.Event.extend(Control.Window);
Control.Window.LayoutUpdateObserver=Class.create({initialize:function(a,b){this.w=a;this.element=$(a.container);this.observer=b},onStart:Prototype.emptyFunction,onEnd:function(a,b){b.element==this.element&&this.iFrameShim&&this.w.updateIFrameShimZIndex()},onResize:function(a,b){b.element==this.element&&this.observer(this.element)},onDrag:function(a,b){b.element==this.element&&this.observer(this.element)}});
Control.Overlay={id:"control_overlay",loaded:false,container:false,lastOpacity:0,styles:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9998},ieStyles:{position:"absolute",top:0,left:0,zIndex:9998},effects:{fade:false,appear:false},load:function(){if(Control.Overlay.loaded)return false;Control.Overlay.loaded=true;Control.Overlay.container=new Element("div",{id:Control.Overlay.id});$(document.body).insert(Control.Overlay.container);if(Prototype.Browser.IE){Control.Overlay.container.setStyle(Control.Overlay.ieStyles);
Event.observe(window,"scroll",Control.Overlay.positionOverlay);Event.observe(window,"resize",Control.Overlay.positionOverlay);Control.Overlay.observe("beforeShow",Control.Overlay.positionOverlay)}else Control.Overlay.container.setStyle(Control.Overlay.styles);Control.Overlay.iFrameShim=new IframeShim;Control.Overlay.iFrameShim.hide();Event.observe(window,"resize",Control.Overlay.positionIFrameShim);Control.Overlay.container.hide();return true},unload:function(){if(!Control.Overlay.loaded)return false;
Event.stopObserving(window,"resize",Control.Overlay.positionOverlay);Control.Overlay.stopObserving("beforeShow",Control.Overlay.positionOverlay);Event.stopObserving(window,"resize",Control.Overlay.positionIFrameShim);Control.Overlay.iFrameShim.destroy();Control.Overlay.container.remove();Control.Overlay.loaded=false;return true},show:function(a,b){if(Control.Overlay.notify("beforeShow")===false)return false;Control.Overlay.lastOpacity=a;Control.Overlay.positionIFrameShim();Control.Overlay.iFrameShim.show();
if(b){if(typeof Effect=="undefined")throw"Control.Window requires effects.js to be loaded.";Control.Overlay.effects.fade&&Control.Overlay.effects.fade.cancel();Control.Overlay.effects.appear=new Effect.Appear(Control.Overlay.container,{queue:{position:"end",scope:"Control.Overlay"},afterFinish:function(){Control.Overlay.notify("afterShow")},from:0,to:Control.Overlay.lastOpacity,duration:(b===true?0.75:b)/2})}else{Control.Overlay.container.setStyle({opacity:a||1});Control.Overlay.container.show();
Control.Overlay.notify("afterShow")}return true},hide:function(a){if(Control.Overlay.notify("beforeHide")===false)return false;Control.Overlay.effects.appear&&Control.Overlay.effects.appear.cancel();Control.Overlay.iFrameShim.hide();if(a)Control.Overlay.effects.fade=new Effect.Fade(Control.Overlay.container,{queue:{position:"front",scope:"Control.Overlay"},afterFinish:function(){Control.Overlay.notify("afterHide")},from:Control.Overlay.lastOpacity,to:0,duration:(a===true?0.75:a)/2});else{Control.Overlay.container.hide();
Control.Overlay.notify("afterHide")}return true},positionIFrameShim:function(){Control.Overlay.container.visible()&&Control.Overlay.iFrameShim.positionUnder(Control.Overlay.container)},positionOverlay:function(){Control.Overlay.container.setStyle({width:document.body.clientWidth+"px",height:document.body.clientHeight+"px"})}};Object.Event.extend(Control.Overlay);
Control.ToolTip=Class.create(Control.Window,{initialize:function($super,b,d,h){$super(d,Object.extend(Object.extend(Object.clone(Control.ToolTip.defaultOptions),h||{}),{position:"mouse",hover:b}))}});Object.extend(Control.ToolTip,{defaultOptions:{offsetLeft:10}});Control.Modal=Class.create(Control.Window,{initialize:function($super,b,d){Control.Modal.InstanceMethods.beforeInitialize.bind(this)();$super(b,Object.extend(Object.clone(Control.Modal.defaultOptions),d||{}))}});
Object.extend(Control.Modal,{defaultOptions:{overlayOpacity:0.5,closeOnClick:"overlay"},current:false,open:function(a,b){a=new Control.Modal(a,b);a.open();return a},close:function(){Control.Modal.current&&Control.Modal.current.close()},InstanceMethods:{beforeInitialize:function(){Control.Overlay.load();this.overlayFinishedOpening=false;this.observe("beforeOpen",Control.Modal.Observers.beforeOpen.bind(this));this.observe("afterOpen",Control.Modal.Observers.afterOpen.bind(this));this.observe("afterClose",
Control.Modal.Observers.afterClose.bind(this))}},Observers:{beforeOpen:function(){if(this.overlayFinishedOpening)Control.Window.windows.without(this).invoke("close");else{Control.Overlay.observeOnce("afterShow",function(){this.overlayFinishedOpening=true;this.open()}.bind(this));Control.Overlay.show(this.options.overlayOpacity,this.options.fade?this.options.fadeDuration:false);throw $break;}},afterOpen:function(){Control.Modal.current=this},afterClose:function(){Control.Overlay.hide(this.options.fade?
this.options.fadeDuration:false);this.overlayFinishedOpening=Control.Modal.current=false}}});
Control.LightBox=Class.create(Control.Window,{initialize:function($super,b,d){this.allImagesLoaded=false;if(d.modal){d=Object.extend(Object.clone(Control.LightBox.defaultOptions),d||{});d=Object.extend(Object.clone(Control.Modal.defaultOptions),d);d=Control.Modal.InstanceMethods.beforeInitialize.bind(this)(d);$super(b,d)}else $super(b,Object.extend(Object.clone(Control.LightBox.defaultOptions),d||{}));(this.hasRemoteContent=this.href&&!this.options.iframe)?this.observe("onRemoteContentLoaded",Control.LightBox.Observers.onRemoteContentLoaded.bind(this)):
this.applyImageObservers();this.observe("beforeOpen",Control.LightBox.Observers.beforeOpen.bind(this))},applyImageObservers:function(){var a=this.getImages();this.numberImagesToLoad=a.length;this.numberofImagesLoaded=0;a.each(function(b){b.observe("load",function(){++this.numberofImagesLoaded;if(this.numberImagesToLoad==this.numberofImagesLoaded){this.allImagesLoaded=true;this.onAllImagesLoaded()}}.bind(this,b));b.hide()}.bind(this))},onAllImagesLoaded:function(){this.getImages().each(function(a){this.showImage(a)}.bind(this));
if(this.hasRemoteContent){this.options.indicator&&this.hideIndicator();this.finishOpen()}else this.open()},getImages:function(){return this.container.select(Control.LightBox.imageSelector)},showImage:function(a){a.show()}});Object.extend(Control.LightBox,{imageSelector:"img",defaultOptions:{},Observers:{beforeOpen:function(){if(!this.hasRemoteContent&&!this.allImagesLoaded)throw $break;},onRemoteContentLoaded:function(){this.applyImageObservers();if(!this.allImagesLoaded)throw $break;}}});function AgeGate(a,b){a&&b?this.initialize(a,b):this.initialize(null,a)}AgeGate.MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"];
AgeGate.prototype={initialize:function(a,b){var d=this;this._cookie_name=b.cookie_name||"age_gate";this._active_user=b.active_user||active_user;this._required_age=b.required_age;this._age_met=false;if(this._use_form=b.use_form===undefined?true:b.use_form){this._element=$(a);this._button_text=b.button_text||"Go"}this._onSuccess=(b.onSuccess||function(){}).wrap(function(h){d._age_met=true;Cookie.set(d._cookie_name,"YES");return h()});this._onFailure=(b.onFailure||function(){}).wrap(function(h){Cookie.set(d._cookie_name,
"NO");return h()});this._onError=b.onError||function(){};this.preflight()||this._age_met||(this._use_form?this.writeForm():this._onFailure())},preflight:function(){var a=this._active_user.age();if(a){a>=this._required_age?this._onSuccess():this._onFailure();return true}a=Cookie.get(this._cookie_name);if(a=="YES"){this._onSuccess();return true}else if(a=="NO"){this._onFailure();return true}return false},writeForm:function(){var a=this,b="",d=0;b='<form action="#">';b+="<dl>";b+="<dt><label>Date of Birth</label></dt>";
b+='<dd id="date">';b+='<select id="user_month" name="user_month">';b+='<option value=""></option>';for(d=0;d<AgeGate.MONTHS.length;d++)b+='<option value="'+d+'">'+AgeGate.MONTHS[d]+"</option>";b+="</select>";b+='<select id="user_day" name="user_day">';b+='<option value=""></option>';for(d=1;d<=31;d++)b+='<option value="'+d+'">'+d+"</option>";b+="</select>";b+='<select id="user_year" name="user_year">';b+='<option value=""></option>';for(d=2005;d>=1908;d--)b+='<option value="'+d+'">'+d+"</option>";
b+="</select>";b+="</dd>";b+="</dl>";b+='<input type="submit" value="'+this._button_text+'" />';b+="</form>";this._element.innerHTML+=b;(function(){a._element.immediateDescendants()[0].onsubmit=function(){a.checkAge(this);return false}}).defer()},checkAge:function(a){var b=Number(a.user_month.getValue()),d=Number(a.user_day.getValue());a=Number(a.user_year.getValue());if(isNaN(b)||d===0||a===0)this._onError();else{b=new Date(a+this._required_age,b,d);(new Date).getTime()-b.getTime()<0?this._onFailure():
this._onSuccess()}}};var AsyncLoader={load:function(a,b,d){var h,m=document;switch(a){case "js":h=m.createElement("script");h.type="text/javascript";h.async=true;h.src=b;break;case "css":h=m.createElement("link");h.href=b;h.rel="stylesheet";break;default:return}if(d){var q=false;h.onload=h.onreadystatechange=function(w){if(!q&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){q=true;d(w);h.onload=h.onreadystatechange=null}}}a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(h,
a)}};if(Object.isUndefined(Effect))throw"dragdrop.js requires including script.aculo.us' effects.js library";
var Droppables={drops:[],remove:function(a){this.drops=this.drops.reject(function(b){return b.element==$(a)})},add:function(a,b){a=$(a);var d=Object.extend({greedy:true,hoverclass:null,tree:false},b||{});if(d.containment){d._containers=[];b=d.containment;Object.isArray(b)?b.each(function(h){d._containers.push($(h))}):d._containers.push($(b))}if(d.accept)d.accept=[d.accept].flatten();Element.makePositioned(a);d.element=a;this.drops.push(d)},findDeepestChild:function(a){deepest=a[0];for(i=1;i<a.length;++i)if(Element.isParent(a[i].element,
deepest.element))deepest=a[i];return deepest},isContained:function(a,b){var d;d=b.tree?a.treeNode:a.parentNode;return b._containers.detect(function(h){return d==h})},isAffected:function(a,b,d){return d.element!=b&&(!d._containers||this.isContained(b,d))&&(!d.accept||Element.classNames(b).detect(function(h){return d.accept.include(h)}))&&Position.within(d.element,a[0],a[1])},deactivate:function(a){a.hoverclass&&Element.removeClassName(a.element,a.hoverclass);this.last_active=null},activate:function(a){a.hoverclass&&
Element.addClassName(a.element,a.hoverclass);this.last_active=a},show:function(a,b){if(this.drops.length){var d,h=[];this.drops.each(function(m){Droppables.isAffected(a,b,m)&&h.push(m)});if(h.length>0)d=Droppables.findDeepestChild(h);this.last_active&&this.last_active!=d&&this.deactivate(this.last_active);if(d){Position.within(d.element,a[0],a[1]);d.onHover&&d.onHover(b,d.element,Position.overlap(d.overlap,d.element));d!=this.last_active&&Droppables.activate(d)}}},fire:function(a,b){if(this.last_active){Position.prepare();
if(this.isAffected([Event.pointerX(a),Event.pointerY(a)],b,this.last_active))if(this.last_active.onDrop){this.last_active.onDrop(b,this.last_active.element,a);return true}}},reset:function(){this.last_active&&this.deactivate(this.last_active)}},Draggables={drags:[],observers:[],register:function(a){if(this.drags.length==0){this.eventMouseUp=this.endDrag.bindAsEventListener(this);this.eventMouseMove=this.updateDrag.bindAsEventListener(this);this.eventKeypress=this.keyPress.bindAsEventListener(this);
Event.observe(document,"mouseup",this.eventMouseUp);Event.observe(document,"mousemove",this.eventMouseMove);Event.observe(document,"keypress",this.eventKeypress)}this.drags.push(a)},unregister:function(a){this.drags=this.drags.reject(function(b){return b==a});if(this.drags.length==0){Event.stopObserving(document,"mouseup",this.eventMouseUp);Event.stopObserving(document,"mousemove",this.eventMouseMove);Event.stopObserving(document,"keypress",this.eventKeypress)}},activate:function(a){if(a.options.delay)this._timeout=
setTimeout(function(){Draggables._timeout=null;window.focus();Draggables.activeDraggable=a}.bind(this),a.options.delay);else{window.focus();this.activeDraggable=a}},deactivate:function(){this.activeDraggable=null},updateDrag:function(a){if(this.activeDraggable){var b=[Event.pointerX(a),Event.pointerY(a)];if(!(this._lastPointer&&this._lastPointer.inspect()==b.inspect())){this._lastPointer=b;this.activeDraggable.updateDrag(a,b)}}},endDrag:function(a){if(this._timeout){clearTimeout(this._timeout);this._timeout=
null}if(this.activeDraggable){this._lastPointer=null;this.activeDraggable.endDrag(a);this.activeDraggable=null}},keyPress:function(a){this.activeDraggable&&this.activeDraggable.keyPress(a)},addObserver:function(a){this.observers.push(a);this._cacheObserverCallbacks()},removeObserver:function(a){this.observers=this.observers.reject(function(b){return b.element==a});this._cacheObserverCallbacks()},notify:function(a,b,d){this[a+"Count"]>0&&this.observers.each(function(h){h[a]&&h[a](a,b,d)});b.options[a]&&
b.options[a](b,d)},_cacheObserverCallbacks:function(){["onStart","onEnd","onDrag"].each(function(a){Draggables[a+"Count"]=Draggables.observers.select(function(b){return b[a]}).length})}},Draggable=Class.create({initialize:function(a,b){var d={handle:false,reverteffect:function(h,m,q){var w=Math.sqrt(Math.abs(m^2)+Math.abs(q^2))*0.02;new Effect.Move(h,{x:-q,y:-m,duration:w,queue:{scope:"_draggable",position:"end"}})},endeffect:function(h){var m=Object.isNumber(h._opacity)?h._opacity:1;new Effect.Opacity(h,
{duration:0.2,from:0.7,to:m,queue:{scope:"_draggable",position:"end"},afterFinish:function(){Draggable._dragging[h]=false}})},zindex:1E3,revert:false,quiet:false,scroll:false,scrollSensitivity:20,scrollSpeed:15,snap:false,delay:0};if(!b||Object.isUndefined(b.endeffect))Object.extend(d,{starteffect:function(h){h._opacity=Element.getOpacity(h);Draggable._dragging[h]=true;new Effect.Opacity(h,{duration:0.2,from:h._opacity,to:0.7})}});b=Object.extend(d,b||{});this.element=$(a);if(b.handle&&Object.isString(b.handle))this.handle=
this.element.down("."+b.handle,0);if(!this.handle)this.handle=$(b.handle);if(!this.handle)this.handle=this.element;if(b.scroll&&!b.scroll.scrollTo&&!b.scroll.outerHTML){b.scroll=$(b.scroll);this._isScrollChild=Element.childOf(this.element,b.scroll)}Element.makePositioned(this.element);this.options=b;this.dragging=false;this.eventMouseDown=this.initDrag.bindAsEventListener(this);Event.observe(this.handle,"mousedown",this.eventMouseDown);Draggables.register(this)},destroy:function(){Event.stopObserving(this.handle,
"mousedown",this.eventMouseDown);Draggables.unregister(this)},currentDelta:function(){return[parseInt(Element.getStyle(this.element,"left")||"0"),parseInt(Element.getStyle(this.element,"top")||"0")]},initDrag:function(a){if(!(!Object.isUndefined(Draggable._dragging[this.element])&&Draggable._dragging[this.element]))if(Event.isLeftClick(a))if(!((tag_name=Event.element(a).tagName.toUpperCase())&&(tag_name=="INPUT"||tag_name=="SELECT"||tag_name=="OPTION"||tag_name=="BUTTON"||tag_name=="TEXTAREA"))){var b=
[Event.pointerX(a),Event.pointerY(a)],d=Position.cumulativeOffset(this.element);this.offset=[0,1].map(function(h){return b[h]-d[h]});Draggables.activate(this);Event.stop(a)}},startDrag:function(a){this.dragging=true;if(!this.delta)this.delta=this.currentDelta();if(this.options.zindex){this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0);this.element.style.zIndex=this.options.zindex}if(this.options.ghosting){this._clone=this.element.cloneNode(true);(this._originallyAbsolute=this.element.getStyle("position")==
"absolute")||Position.absolutize(this.element);this.element.parentNode.insertBefore(this._clone,this.element)}if(this.options.scroll)if(this.options.scroll==window){var b=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=b.left;this.originalScrollTop=b.top}else{this.originalScrollLeft=this.options.scroll.scrollLeft;this.originalScrollTop=this.options.scroll.scrollTop}Draggables.notify("onStart",this,a);this.options.starteffect&&this.options.starteffect(this.element)},updateDrag:function(a,
b){this.dragging||this.startDrag(a);if(!this.options.quiet){Position.prepare();Droppables.show(b,this.element)}Draggables.notify("onDrag",this,a);this.draw(b);this.options.change&&this.options.change(this);if(this.options.scroll){this.stopScrolling();var d;if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))d=[left,top,left+width,top+height];else{d=Position.page(this.options.scroll);d[0]+=this.options.scroll.scrollLeft+Position.deltaX;d[1]+=this.options.scroll.scrollTop+
Position.deltaY;d.push(d[0]+this.options.scroll.offsetWidth);d.push(d[1]+this.options.scroll.offsetHeight)}var h=[0,0];if(b[0]<d[0]+this.options.scrollSensitivity)h[0]=b[0]-(d[0]+this.options.scrollSensitivity);if(b[1]<d[1]+this.options.scrollSensitivity)h[1]=b[1]-(d[1]+this.options.scrollSensitivity);if(b[0]>d[2]-this.options.scrollSensitivity)h[0]=b[0]-(d[2]-this.options.scrollSensitivity);if(b[1]>d[3]-this.options.scrollSensitivity)h[1]=b[1]-(d[3]-this.options.scrollSensitivity);this.startScrolling(h)}Prototype.Browser.WebKit&&
window.scrollBy(0,0);Event.stop(a)},finishDrag:function(a,b){this.dragging=false;if(this.options.quiet){Position.prepare();var d=[Event.pointerX(a),Event.pointerY(a)];Droppables.show(d,this.element)}if(this.options.ghosting){this._originallyAbsolute||Position.relativize(this.element);delete this._originallyAbsolute;Element.remove(this._clone);this._clone=null}d=false;if(b)(d=Droppables.fire(a,this.element))||(d=false);d&&this.options.onDropped&&this.options.onDropped(this.element);Draggables.notify("onEnd",
this,a);if((a=this.options.revert)&&Object.isFunction(a))a=a(this.element);b=this.currentDelta();if(a&&this.options.reverteffect){if(d==0||a!="failure")this.options.reverteffect(this.element,b[1]-this.delta[1],b[0]-this.delta[0])}else this.delta=b;if(this.options.zindex)this.element.style.zIndex=this.originalZ;this.options.endeffect&&this.options.endeffect(this.element);Draggables.deactivate(this);Droppables.reset()},keyPress:function(a){if(a.keyCode==Event.KEY_ESC){this.finishDrag(a,false);Event.stop(a)}},
endDrag:function(a){if(this.dragging){this.stopScrolling();this.finishDrag(a,true);Event.stop(a)}},draw:function(a){var b=Position.cumulativeOffset(this.element);if(this.options.ghosting){var d=Position.realOffset(this.element);b[0]+=d[0]-Position.deltaX;b[1]+=d[1]-Position.deltaY}d=this.currentDelta();b[0]-=d[0];b[1]-=d[1];if(this.options.scroll&&this.options.scroll!=window&&this._isScrollChild){b[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft;b[1]-=this.options.scroll.scrollTop-this.originalScrollTop}d=
[0,1].map(function(m){return a[m]-b[m]-this.offset[m]}.bind(this));if(this.options.snap)d=Object.isFunction(this.options.snap)?this.options.snap(d[0],d[1],this):Object.isArray(this.options.snap)?d.map(function(m,q){return(m/this.options.snap[q]).round()*this.options.snap[q]}.bind(this)):d.map(function(m){return(m/this.options.snap).round()*this.options.snap}.bind(this));var h=this.element.style;if(!this.options.constraint||this.options.constraint=="horizontal")h.left=d[0]+"px";if(!this.options.constraint||
this.options.constraint=="vertical")h.top=d[1]+"px";if(h.visibility=="hidden")h.visibility=""},stopScrolling:function(){if(this.scrollInterval){clearInterval(this.scrollInterval);this.scrollInterval=null;Draggables._lastScrollPointer=null}},startScrolling:function(a){if(a[0]||a[1]){this.scrollSpeed=[a[0]*this.options.scrollSpeed,a[1]*this.options.scrollSpeed];this.lastScrolled=new Date;this.scrollInterval=setInterval(this.scroll.bind(this),10)}},scroll:function(){var a=new Date,b=a-this.lastScrolled;
this.lastScrolled=a;if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll)){if(this.scrollSpeed[0]||this.scrollSpeed[1]){a=b/1E3;this.options.scroll.scrollTo(left+a*this.scrollSpeed[0],top+a*this.scrollSpeed[1])}}else{this.options.scroll.scrollLeft+=this.scrollSpeed[0]*b/1E3;this.options.scroll.scrollTop+=this.scrollSpeed[1]*b/1E3}Position.prepare();Droppables.show(Draggables._lastPointer,this.element);Draggables.notify("onDrag",this);if(this._isScrollChild){Draggables._lastScrollPointer=
Draggables._lastScrollPointer||$A(Draggables._lastPointer);Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*b/1E3;Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*b/1E3;if(Draggables._lastScrollPointer[0]<0)Draggables._lastScrollPointer[0]=0;if(Draggables._lastScrollPointer[1]<0)Draggables._lastScrollPointer[1]=0;this.draw(Draggables._lastScrollPointer)}this.options.change&&this.options.change(this)},_getWindowScroll:function(a){var b,d,h;with(a.document){if(a.document.documentElement&&
documentElement.scrollTop){b=documentElement.scrollTop;d=documentElement.scrollLeft}else if(a.document.body){b=body.scrollTop;d=body.scrollLeft}if(a.innerWidth){h=a.innerWidth;a=a.innerHeight}else if(a.document.documentElement&&documentElement.clientWidth){h=documentElement.clientWidth;a=documentElement.clientHeight}else{h=body.offsetWidth;a=body.offsetHeight}}return{top:b,left:d,width:h,height:a}}});Draggable._dragging={};
var SortableObserver=Class.create({initialize:function(a,b){this.element=$(a);this.observer=b;this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark();this.lastValue!=Sortable.serialize(this.element)&&this.observer(this.element)}}),Sortable={SERIALIZE_RULE:/^[^_\-](?:[A-Za-z0-9\-\_]*)[_](.*)$/,sortables:{},_findRootElement:function(a){for(;a.tagName.toUpperCase()!="BODY";){if(a.id&&Sortable.sortables[a.id])return a;
a=a.parentNode}},options:function(a){if(a=Sortable._findRootElement($(a)))return Sortable.sortables[a.id]},destroy:function(a){a=$(a);if(a=Sortable.sortables[a.id]){Draggables.removeObserver(a.element);a.droppables.each(function(b){Droppables.remove(b)});a.draggables.invoke("destroy");delete Sortable.sortables[a.element.id]}},create:function(a,b){a=$(a);var d=Object.extend({element:a,tag:"li",dropOnEmpty:false,tree:false,treeTag:"ul",overlap:"vertical",constraint:"vertical",containment:a,handle:false,
only:false,delay:0,hoverclass:null,ghosting:false,quiet:false,scroll:false,scrollSensitivity:20,scrollSpeed:15,format:this.SERIALIZE_RULE,elements:false,handles:false,onChange:Prototype.emptyFunction,onUpdate:Prototype.emptyFunction},b||{});this.destroy(a);var h={revert:true,quiet:d.quiet,scroll:d.scroll,scrollSpeed:d.scrollSpeed,scrollSensitivity:d.scrollSensitivity,delay:d.delay,ghosting:d.ghosting,constraint:d.constraint,handle:d.handle};if(d.starteffect)h.starteffect=d.starteffect;if(d.reverteffect)h.reverteffect=
d.reverteffect;else if(d.ghosting)h.reverteffect=function(w){w.style.top=0;w.style.left=0};if(d.endeffect)h.endeffect=d.endeffect;if(d.zindex)h.zindex=d.zindex;var m={overlap:d.overlap,containment:d.containment,tree:d.tree,hoverclass:d.hoverclass,onHover:Sortable.onHover},q={onHover:Sortable.onEmptyHover,overlap:d.overlap,containment:d.containment,hoverclass:d.hoverclass};Element.cleanWhitespace(a);d.draggables=[];d.droppables=[];if(d.dropOnEmpty||d.tree){Droppables.add(a,q);d.droppables.push(a)}(d.elements||
this.findElements(a,d)||[]).each(function(w,B){B=d.handles?$(d.handles[B]):d.handle?$(w).select("."+d.handle)[0]:w;d.draggables.push(new Draggable(w,Object.extend(h,{handle:B})));Droppables.add(w,m);if(d.tree)w.treeNode=a;d.droppables.push(w)});if(d.tree)(Sortable.findTreeElements(a,d)||[]).each(function(w){Droppables.add(w,q);w.treeNode=a;d.droppables.push(w)});this.sortables[a.id]=d;Draggables.addObserver(new SortableObserver(a,d.onUpdate))},findElements:function(a,b){return Element.findChildren(a,
b.only,b.tree?true:false,b.tag)},findTreeElements:function(a,b){return Element.findChildren(a,b.only,b.tree?true:false,b.treeTag)},onHover:function(a,b,d){if(!Element.isParent(b,a))if(!(d>0.33&&d<0.66&&Sortable.options(b).tree))if(d>0.5){Sortable.mark(b,"before");if(b.previousSibling!=a){d=a.parentNode;a.style.visibility="hidden";b.parentNode.insertBefore(a,b);b.parentNode!=d&&Sortable.options(d).onChange(a);Sortable.options(b.parentNode).onChange(a)}}else{Sortable.mark(b,"after");var h=b.nextSibling||
null;if(h!=a){d=a.parentNode;a.style.visibility="hidden";b.parentNode.insertBefore(a,h);b.parentNode!=d&&Sortable.options(d).onChange(a);Sortable.options(b.parentNode).onChange(a)}}},onEmptyHover:function(a,b,d){var h=a.parentNode,m=Sortable.options(b);if(!Element.isParent(b,a)){var q=Sortable.findElements(b,{tag:m.tag,only:m.only}),w=null;if(q){var B=Element.offsetSize(b,m.overlap)*(1-d);for(d=0;d<q.length;d+=1)if(B-Element.offsetSize(q[d],m.overlap)>=0)B-=Element.offsetSize(q[d],m.overlap);else{w=
B-Element.offsetSize(q[d],m.overlap)/2>=0?d+1<q.length?q[d+1]:null:q[d];break}}b.insertBefore(a,w);Sortable.options(h).onChange(a);m.onChange(a)}},unmark:function(){Sortable._marker&&Sortable._marker.hide()},mark:function(a,b){var d=Sortable.options(a.parentNode);if(!(d&&!d.ghosting)){if(!Sortable._marker){Sortable._marker=($("dropmarker")||Element.extend(document.createElement("DIV"))).hide().addClassName("dropmarker").setStyle({position:"absolute"});document.getElementsByTagName("body").item(0).appendChild(Sortable._marker)}var h=
Position.cumulativeOffset(a);Sortable._marker.setStyle({left:h[0]+"px",top:h[1]+"px"});if(b=="after")d.overlap=="horizontal"?Sortable._marker.setStyle({left:h[0]+a.clientWidth+"px"}):Sortable._marker.setStyle({top:h[1]+a.clientHeight+"px"});Sortable._marker.show()}},_tree:function(a,b,d){for(var h=Sortable.findElements(a,b)||[],m=0;m<h.length;++m){var q=h[m].id.match(b.format);if(q){q={id:encodeURIComponent(q?q[1]:null),element:a,parent:d,children:[],position:d.children.length,container:$(h[m]).down(b.treeTag)};
q.container&&this._tree(q.container,b,q);d.children.push(q)}}return d},tree:function(a,b){a=$(a);var d=this.options(a);b=Object.extend({tag:d.tag,treeTag:d.treeTag,only:d.only,name:a.id,format:d.format},b||{});return Sortable._tree(a,b,{id:null,parent:null,children:[],container:a,position:0})},_constructIndex:function(a){var b="";do if(a.id)b="["+a.position+"]"+b;while((a=a.parent)!=null);return b},sequence:function(a,b){a=$(a);var d=Object.extend(this.options(a),b||{});return $(this.findElements(a,
d)||[]).map(function(h){return h.id.match(d.format)?h.id.match(d.format)[1]:""})},setSequence:function(a,b,d){a=$(a);var h=Object.extend(this.options(a),d||{}),m={};this.findElements(a,h).each(function(q){if(q.id.match(h.format))m[q.id.match(h.format)[1]]=[q,q.parentNode];q.parentNode.removeChild(q)});b.each(function(q){var w=m[q];if(w){w[1].appendChild(w[0]);delete m[q]}})},serialize:function(a,b){a=$(a);var d=Object.extend(Sortable.options(a),b||{}),h=encodeURIComponent(b&&b.name?b.name:a.id);return d.tree?
Sortable.tree(a,b).children.map(function(m){return[h+Sortable._constructIndex(m)+"[id]="+encodeURIComponent(m.id)].concat(m.children.map(arguments.callee))}).flatten().join("&"):Sortable.sequence(a,b).map(function(m){return h+"[]="+encodeURIComponent(m)}).join("&")}};Element.isParent=function(a,b){if(!a.parentNode||a==b)return false;if(a.parentNode==b)return true;return Element.isParent(a.parentNode,b)};
Element.findChildren=function(a,b,d,h){if(!a.hasChildNodes())return null;h=h.toUpperCase();if(b)b=[b].flatten();var m=[];$A(a.childNodes).each(function(q){if(q.tagName&&q.tagName.toUpperCase()==h&&(!b||Element.classNames(q).detect(function(w){return b.include(w)})))m.push(q);if(d)(q=Element.findChildren(q,b,d,h))&&m.push(q)});return m.length>0?m.flatten():[]};Element.offsetSize=function(a,b){return a["offset"+(b=="vertical"||b=="height"?"Height":"Width")]};FeedHandler=Class.create({_feedType:"self",_feedContainerName:"feed_items_container",_feedContainer:null,_feedItemIds:[],_offset:0,_pageSize:20,_morePath:null,_destroyPath:null,_blinking:false,initialize:function(a,b,d,h,m){this._feedType=a;this._feedContainerName=b;this._pageSize=d;this._morePath=h;this._destroyPath=m;this._self_disabling={};$(document).observe("click",this.clickHandler.bindAsEventListener(this))},setOffset:function(a){this._offset=a},addFeedItemIds:function(a){this._feedItemIds=
this._feedItemIds.concat(a||[])},updateFeedInfo:function(a,b){this.setOffset(a);this.addFeedItemIds(b);this.setFirstFeedItemClass()},container:function(){if(!this._feedContainer)this._feedContainer=$(this._feedContainerName);return this._feedContainer},indicator:function(){return this.container().select("#more_feed_items_indicator").first()},showMoreElement:function(){return this.container().select("#show_more_feed_items_label").first()},automaticallyFetchMore:function(){if(this._morePath.match(/mini_feed_items/)!=
null)$$(".mini_item").length<15&&this.requestNextPage();else $$(".feed_item").length<15&&this.requestNextPage()},setFirstFeedItemClass:function(){this.container().select(".first_feed_item").each(function(b){b.removeClassName("first_feed_item")});var a=this.container().select(".feed_item").first();a&&a.addClassName("first_feed_item")},insertMoreShoutComments:function(a){var b=a.message_id;if(a.new_url){$("show_more_comments_link_"+b).href=a.new_url;$("show_more_comments_link_"+b).show()}else $("show_more_comments_link_"+
b).hide();$("shout_indicator_"+b).hide();$("shout_short_comments_"+b).hide();$("shout_more_comments_"+b).insert({top:a.content})},requestNextPage:function(){var a=this.indicator(),b=this;if(!(!a||a.visible())){a.show();this.showMoreElement().hide();new Ajax.Request(this._morePath,{parameters:{feed_type:this._feedType,offset:this._offset,num:this._pageSize,excluded_ids:this._feedItemIds.join(","),excluded_followed_users:$$(".js_followed_username").map(function(d){return d.innerHTML}).uniq().join(","),
excluded_forum_users:$$(".js_forum_post_user").map(function(d){return d.innerHTML}).uniq().join(",")},method:"get",onSuccess:function(d){b.container().select("#additional_feed_items").first().remove();b.container().insert(d.responseText);b.setFirstFeedItemClass()},onFailure:function(){b.indicator().hide();b.showMoreElement().show()}})}},requestNextPageIfMoreItemsNeeded:function(){this.container().getHeight()<1500&&this.requestNextPage()},removeFeedItems:function(a){if(!(!(a instanceof Array)||a.length<=
0)){new Effect.DropOut("feed_item_"+a[0]);new Ajax.Request(this._destroyPath,{method:"post",parameters:{ids:a.join(","),context:this._feedType},onSuccess:function(){},onFailure:function(){}})}},unfollowUser:function(a,b){new Effect.DropOut("feed_item_"+b[0]);new Ajax.Request("/accounts/"+active_user.username()+"/friends/"+a+".json",{method:"put",parameters:{unfriend_from:"feed"},onSuccess:function(){},onFailure:function(){}})},blockGame:function(a,b,d){new Effect.DropOut("feed_item_"+d);new Ajax.Request("/games/"+
b+"/"+a+"/blocks",{method:"post",parameters:{user_game_permissions:{allow_something:false}},onSuccess:function(){},onFailure:function(){}})},isMiniFeed:function(){return this._morePath.match(/mini_feed_items/)!=null},feedItemElement:function(a){return this.isMiniFeed()?$("mini_item_"+a):$("feed_item_"+a)},observeUnlike:function(a){a=this.feedItemElement(a).down(".like_link");if(a!=null){a.observe("mouseenter",function(){this.down(".like_text").update("Unlike")});a.observe("mouseleave",function(){this.down(".like_text").update("Liked")})}},
likeFeedItem:function(a){var b=this;if(this._self_disabling[a]==null){this._self_disabling[a]=true;new Ajax.Request("/user_likes",{method:"post",parameters:{feed_item_id:a},onSuccess:function(d){if(b.isMiniFeed()){var h=$("mini_item_"+a);h.down(".like_link").removeClassName("feed_like");h.down(".like_link").addClassName("feed_unlike")}else{h=$("feed_item_"+a);h.down(".like_text").update("Liked")}h.down(".like_link").onclick=function(){feedHandler.unlikeFeedItem(a);return false};b._self_disabling[a]=
null;b.observeUnlike(a);h.down(".like_count").update("("+d.responseJSON.count+")")},onFailure:function(){b._self_disabling[a]=null}})}},unlikeFeedItem:function(a){var b=this;if(this._self_disabling[a]==null){this._self_disabling[a]=true;new Ajax.Request("/user_likes",{method:"delete",parameters:{feed_item_id:a},onSuccess:function(d){var h=b.isMiniFeed()?$("mini_item_"+a):$("feed_item_"+a);h.down(".like_link").onclick=function(){feedHandler.likeFeedItem(a);return false};b._self_disabling[a]=null;h.down(".like_text").update("Like");
h.down(".like_link").stopObserving("mouseenter");h.down(".like_link").stopObserving("mouseleave");if(b.isMiniFeed()){h.down(".like_link").removeClassName("feed_unlike");h.down(".like_link").addClassName("feed_like")}else h.down(".like_count").update("("+d.responseJSON.count+")")},onFailure:function(){b._self_disabling[a]=null}})}},clickHandler:function(a){var b=a.element();if(this.isMiniFeed()){if(a=b.hasClassName("mini_item")?b:b.up(".mini_item"))if(a=a.id.sub("mini_item_","")){b=(b=Cookie.get("feed_item_clicks"))?
b.evalJSON():{};b.mini=b.mini||[];b.mini=b.mini.concat([a]);Cookie.set("feed_item_clicks",Object.toJSON(b))}}else if(a=b.hasClassName("feed_item")?b:b.up(".feed_item")){var d=b.up("a");if("A"==b.nodeName||d){b="A"==b.nodeName?b.href:d.href;a=a.id.sub("feed_item_","");if(b&&!b.match(/#$/)){b=(b=Cookie.get("feed_item_clicks"))?b.evalJSON():{};b[this._feedType]=b[this._feedType]||[];b[this._feedType]=b[this._feedType].concat([a]);Cookie.set("feed_item_clicks",Object.toJSON(b))}}}}});function FlashMessages(a){this.initialize(a)}FlashMessages.DISPLAY_TEMPLATE=new Template('<div class="sitemessage">#{message}</div>');FlashMessages.COOKIE_NAME="kong_flash_messages";
FlashMessages.prototype={initialize:function(){this._data={};if(Cookie.accept()){this._messages_node=$("global");this._insertMessages()}},data:function(){this._getDataFromCookie();return this._data},_getDataFromCookie:function(){var a=Cookie.get(FlashMessages.COOKIE_NAME);if(a){a=a.evalJSON();if(this._data)Object.extend(this._data,a);else this._data=a}this._clearCookie()},_insertMessages:function(){var a=this.data().messages;if(this._messages_node&&a){this._messages_node.innerHTML=a.map(function(d){return FlashMessages.DISPLAY_TEMPLATE.evaluate({message:d})}).join();
try{active_user.showingBlueBar()}catch(b){}}},_clearCookie:function(){Cookie.erase(FlashMessages.COOKIE_NAME,"/")}};function FollowToggleButton(a){this.initialize(a)}FollowToggleButton.prototype={initialize:function(a){this._indicatorTag=a},mouseOver:function(a){a=Event.findElement(a);a.removeClassName("btn_alt");a.update("Unfriend")},mouseOut:function(a){a=Event.findElement(a);a.addClassName("btn_alt");a.update("Friend")},toggle:function(a){a=Event.findElement(a);a.update(this._indicatorTag);a.onmouseover="";a.onmouseout=""}};(function(a){function b(){var D=false;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval");D=true;window.localStorage.removeItem("_tmptest")}catch(O){}if(D)try{if(window.localStorage){B=window.localStorage;N="localStorage"}}catch(j){}else if("globalStorage"in window)try{if(window.globalStorage){B=window.globalStorage[window.location.hostname];N="globalStorage"}}catch(o){}else{C=document.createElement("link");if(C.addBehavior){C.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(C);
C.load("jStorage");D="{}";try{D=C.getAttribute("jStorage")}catch(s){}B.jStorage=D;N="userDataBehavior"}else{C=null;return}}d();q()}function d(){if(B.jStorage)try{w=H(String(B.jStorage))}catch(D){B.jStorage="{}"}else B.jStorage="{}";X=B.jStorage?String(B.jStorage).length:0}function h(){try{B.jStorage=ga(w);if(C){C.setAttribute("jStorage",B.jStorage);C.save("jStorage")}X=B.jStorage?String(B.jStorage).length:0}catch(D){}}function m(D){if(!D||typeof D!="string"&&typeof D!="number")throw new TypeError("Key name must be string or numeric");
if(D=="__jstorage_meta")throw new TypeError("Reserved key name");return true}function q(){var D,O,j,o=Infinity,s=false;clearTimeout(fa);if(!(!w.__jstorage_meta||typeof w.__jstorage_meta.TTL!="object")){D=+new Date;j=w.__jstorage_meta.TTL;for(O in j)if(j.hasOwnProperty(O))if(j[O]<=D){delete j[O];delete w[O];s=true}else if(j[O]<o)o=j[O];if(o!=Infinity)fa=setTimeout(q,o-D);s&&h()}}if(!a||!(a.toJSON||Object.toJSON||window.JSON))throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");
var w={},B={jStorage:"{}"},C=null,X=0,ga=a.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),H=a.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(D){return String(D).evalJSON()},N=false,fa,ka={isXML:function(D){return(D=(D?D.ownerDocument||D:0).documentElement)?D.nodeName!=="HTML":false},encode:function(D){if(!this.isXML(D))return false;try{return(new XMLSerializer).serializeToString(D)}catch(O){try{return D.xml}catch(j){}}return false},decode:function(D){var O="DOMParser"in
window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(j){var o=new ActiveXObject("Microsoft.XMLDOM");o.async="false";o.loadXML(j);return o};if(!O)return false;D=O.call("DOMParser"in window&&new DOMParser||window,D,"text/xml");return this.isXML(D)?D:false}};a.jStorage={version:"0.1.7.0",set:function(D,O,j){m(D);j=j||{};if(ka.isXML(O))O={_is_xml:true,xml:ka.encode(O)};else if(typeof O=="function")O=null;else if(O&&typeof O=="object")O=H(ga(O));w[D]=O;isNaN(j.TTL)?h():this.setTTL(D,
j.TTL);return O},get:function(D,O){m(D);if(D in w)return w[D]&&typeof w[D]=="object"&&w[D]._is_xml&&w[D]._is_xml?ka.decode(w[D].xml):w[D];return typeof O=="undefined"?null:O},deleteKey:function(D){m(D);if(D in w){delete w[D];w.__jstorage_meta&&typeof w.__jstorage_meta.TTL=="object"&&D in w.__jstorage_meta.TTL&&delete w.__jstorage_meta.TTL[D];h();return true}return false},setTTL:function(D,O){var j=+new Date;m(D);O=Number(O)||0;if(D in w){if(!w.__jstorage_meta)w.__jstorage_meta={};if(!w.__jstorage_meta.TTL)w.__jstorage_meta.TTL=
{};if(O>0)w.__jstorage_meta.TTL[D]=j+O;else delete w.__jstorage_meta.TTL[D];h();q();return true}return false},flush:function(){w={};h();return true},storageObj:function(){function D(){}D.prototype=w;return new D},index:function(){var D=[],O;for(O in w)w.hasOwnProperty(O)&&O!="__jstorage_meta"&&D.push(O);return D},storageSize:function(){return X},currentBackend:function(){return N},storageAvailable:function(){return!!N},reInit:function(){var D;if(C&&C.addBehavior){D=document.createElement("link");
C.parentNode.replaceChild(D,C);C=D;C.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(C);C.load("jStorage");D="{}";try{D=C.getAttribute("jStorage")}catch(O){}B.jStorage=D;N="userDataBehavior"}d()}};b()})($||window.jQuery);var KongAds=function(){function a(m){return m.replace(/[^a-z0-9-+_]+/gi,"_").substr(0,10)}function b(m,q){var w=[],B=[],C=a(m);if(q instanceof Array){for(m=q.length;m--;)B[m]=a(q[m]);w.push([C,B])}else w.push([C,a(q)]);return w}function d(m){var q=[];if(1==m.length)for(var w in m[0])q=q.concat(b(w,m[0][w]));else if(2==m.length)q=q.concat(b(m[0],m[1]));return q}function h(m){this.initialize(m)}h.prototype={initialize:function(m){this._network_id=m.networkId;this._publisher_id=m.publisherId;this._rendering_mode=
m.renderingMode;this._slots={}},defineAd:function(m,q,w){var B=this,C="/"+this._network_id+"/"+this._publisher_id+"/"+m;googletag.cmd.push(function(){B._slots[m]=googletag.defineSlot(C,[q,w],m+"-ad-slot").addService(googletag.pubads())});return this},setTargeting:function(){var m=arguments;googletag.cmd.push(function(){for(var q=googletag.pubads(),w=d(m),B=w.length;B--;)q.setTargeting(w[B][0],w[B][1])});return this},setGenderTargeting:function(m){googletag.cmd.push(function(){googletag.pubads().set("demographic_gender",
m)});return this},setAgeTargeting:function(m){googletag.cmd.push(function(){googletag.pubads().set("demographic_age",m)});return this},displayAd:function(m){googletag.cmd.push(function(){googletag.display(m+"-ad-slot")});return this},requestAds:function(){if(document.location.search.match(/username=/)||document.referrer.match(/username=/))return this;googletag.cmd.push(function(){var m=googletag.pubads();m[renderingMode]();m.enableSingleRequest();googletag.enableServices()});return this},getSlot:function(m){return this._slots[m]},
onDealspotOfferUnavailable:function(){$("dealspot_banner_holder").remove();$("game_leaderboad_banner_holder").show()},onDealspotOfferAvailable:function(){$("game_leaderboad_banner_holder").remove();$("dealspot_target").update($("dealspot_banner_holder").addClassName("horizontal_ad").setStyle({top:"",left:""}))},onDealspotOpen:function(){$("game").setStyle({top:"-10000px",left:"-10000px"})},onDealspotClose:function(){$("game").setStyle({top:"",left:""})}};return{KongDFPAds:h}}(),KongDFPAds=KongAds.KongDFPAds;var NativeApp=function(){var a={};a.isInstalled=function(b){return a.isNativeApp()?kongNativeApp.isInstalled(b):false};a.isNativeApp=function(){return typeof kongNativeApp!="undefined"};a.downloadGame=function(b){if(a.isNativeApp())window.open(b);else window.location=b};a.launchGame=function(b){a.isNativeApp()&&kongNativeApp.sendMessage(JSON.stringify({opcode:"launch_game",params:{game_id:b}}))};a.browseGames=function(){window.location=a.isNativeApp()?"/games/index_native?installed="+kongNativeApp.getInstalledGameIds():
"/games/index_native"};return a}();var PaymentHelpText={showHelpText:function(a,b){var d=$("help_wrapper");b=$(b);if(!(a==""||a==null))if(b.className!="error_msg"){b.appendChild(d);$("help_text").innerHTML=a;d.show()}},hideHelpText:function(){$("help_wrapper").hide()}};function PostMessageHandler(a){function b(){return w}function d(B){var C;w.find(function(ga){return C=ga(B)});if(C)C();else try{bumper.embedAd(B)}catch(X){}}function h(B){d.defer(B.evalJSON())}function m(B){w.push(B)}function q(B){if(B.origin==window.location.protocol+"//"+window.location.host)try{h(B.data)}catch(C){}}var w=[];window.attachEvent?window.attachEvent("onmessage",q):window.addEventListener("message",q,false);return{addCallback:m,getHandlers:b,runCallbackForUnparsedPayload:h}};TimeInWordsHelper={distanceInWords:function(a,b,d){a=a.getTime();b=b.getTime();b=Math.round(Math.abs(a-b)/1E3);a=Math.round(b/60);if(a<=1){if(!d)return 0==a?"less than a minute":"1 minute";if(b<5)return"less than 5 seconds";if(b<10)return"less than 10 seconds";if(b<20)return"less than 20 seconds";if(b<40)return"half a minute";if(b<60)return"less than a minute";return"1 minute"}if(a<45)return a+" minutes";if(a<90)return"1 hour";if(a<1440)return Math.round(a/60)+" hours";if(a<2880)return"1 day";if(a<
43200)return Math.round(a/1440)+" days";if(a<86400)return"about 1 month";if(a<525600)return Math.round(a/43200)+" months";if(a<1051200)return"about 1 year";return"over "+Math.round(a/525600)+" years"},distanceInWordsFromNow:function(a,b){return TimeInWordsHelper.distanceInWords(new Date,a,b)}};
