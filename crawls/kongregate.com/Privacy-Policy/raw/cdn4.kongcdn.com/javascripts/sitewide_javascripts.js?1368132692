var Prototype={Version:"1.7_rc3",Browser:function(){var a=navigator.userAgent,b=Object.prototype.toString.call(window.opera)=="[object Opera]";return{IE:!!window.attachEvent&&!b,Opera:b,WebKit:a.indexOf("AppleWebKit/")>-1,Gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile/.test(a)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var a=window.Element||window.HTMLElement;return!!(a&&a.prototype)}(),SpecificElementExtensions:function(){if(typeof window.HTMLDivElement!==
"undefined")return true;var a=document.createElement("div"),b=document.createElement("form"),d=false;if(a.__proto__&&a.__proto__!==b.__proto__)d=true;return d}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};if(Prototype.Browser.MobileSafari)Prototype.BrowserFeatures.SpecificElementExtensions=false;
var Abstract={},Try={these:function(){for(var a,b=0,d=arguments.length;b<d;b++){var f=arguments[b];try{a=f();break}catch(j){}}return a}},Class=function(){function a(){}function b(){function j(){this.initialize.apply(this,arguments)}var n=null,r=$A(arguments);if(Object.isFunction(r[0]))n=r.shift();Object.extend(j,Class.Methods);j.superclass=n;j.subclasses=[];if(n){a.prototype=n.prototype;j.prototype=new a;n.subclasses.push(j)}n=0;for(var x=r.length;n<x;n++)j.addMethods(r[n]);if(!j.prototype.initialize)j.prototype.initialize=
Prototype.emptyFunction;return j.prototype.constructor=j}function d(j){var n=this.superclass&&this.superclass.prototype,r=Object.keys(j);if(f){j.toString!=Object.prototype.toString&&r.push("toString");j.valueOf!=Object.prototype.valueOf&&r.push("valueOf")}for(var x=0,y=r.length;x<y;x++){var O=r[x],Y=j[O];if(n&&Object.isFunction(Y)&&Y.argumentNames()[0]=="$super"){var H=Y;Y=function(M){return function(){return n[M].apply(this,arguments)}}(O).wrap(H);Y.valueOf=H.valueOf.bind(H);Y.toString=H.toString.bind(H)}this.prototype[O]=
Y}return this}var f=function(){for(var j in{toString:1})if(j==="toString")return false;return true}();return{create:b,Methods:{addMethods:d}}}();
(function(){function a(X){switch(X){case null:return t;case void 0:return z}switch(typeof X){case "boolean":return I;case "number":return B;case "string":return J}return Q}function b(X,ga){for(var W in ga)X[W]=ga[W];return X}function d(X){try{if(k(X))return"undefined";if(X===null)return"null";return X.inspect?X.inspect():String(X)}catch(ga){if(ga instanceof RangeError)return"...";throw ga;}}function f(X){return j("",{"":X},[])}function j(X,ga,W){ga=ga[X];var ba=typeof ga;if(a(ga)===Q&&typeof ga.toJSON===
"function")ga=ga.toJSON(X);X=p.call(ga);switch(X){case K:case w:case U:ga=ga.valueOf()}switch(ga){case null:return"null";case true:return"true";case false:return"false"}ba=typeof ga;switch(ba){case "string":return ga.inspect(true);case "number":return isFinite(ga)?String(ga):"null";case "object":ba=0;for(var oa=W.length;ba<oa;ba++)if(W[ba]===ga)throw new TypeError;W.push(ga);var qa=[];if(X===la){ba=0;for(oa=ga.length;ba<oa;ba++){var za=j(ba,ga,W);qa.push(typeof za==="undefined"?"null":za)}qa="["+
qa.join(",")+"]"}else{var cb=Object.keys(ga);ba=0;for(oa=cb.length;ba<oa;ba++){X=cb[ba];za=j(X,ga,W);typeof za!=="undefined"&&qa.push(X.inspect(true)+":"+za)}qa="{"+qa.join(",")+"}"}W.pop();return qa}}function n(X){return JSON.stringify(X)}function r(X){return $H(X).toQueryString()}function x(X){return X&&X.toHTML?X.toHTML():String.interpret(X)}function y(X){if(a(X)!==Q)throw new TypeError;var ga=[];for(var W in X)X.hasOwnProperty(W)&&ga.push(W);return ga}function O(X){var ga=[];for(var W in X)ga.push(X[W]);
return ga}function Y(X){return b({},X)}function H(X){return!!(X&&X.nodeType==1)}function M(X){return p.call(X)===la}function da(X){return X instanceof Hash}function ka(X){return typeof X==="function"}function D(X){return p.call(X)===U}function P(X){return p.call(X)===K}function k(X){return typeof X==="undefined"}var p=Object.prototype.toString,t="Null",z="Undefined",I="Boolean",B="Number",J="String",Q="Object",w="[object Boolean]",K="[object Number]",U="[object String]",la="[object Array]",ra=window.JSON&&
typeof JSON.stringify==="function"&&JSON.stringify(0)==="0"&&typeof JSON.stringify(Prototype.K)==="undefined";if(typeof Array.isArray=="function"&&Array.isArray([])&&!Array.isArray({}))M=Array.isArray;b(Object,{extend:b,inspect:d,toJSON:ra?n:f,toQueryString:r,toHTML:x,keys:Object.keys||y,values:O,clone:Y,isElement:H,isArray:M,isHash:da,isFunction:ka,isString:D,isNumber:P,isUndefined:k})})();
Object.extend(Function.prototype,function(){function a(H,M){for(var da=H.length,ka=M.length;ka--;)H[da+ka]=M[ka];return H}function b(H,M){H=Y.call(H,0);return a(H,M)}function d(){var H=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return H.length==1&&!H[0]?[]:H}function f(H){if(arguments.length<2&&Object.isUndefined(arguments[0]))return this;var M=this,da=Y.call(arguments,1);return function(){var ka=b(da,
arguments);return M.apply(H,ka)}}function j(H){var M=this,da=Y.call(arguments,1);return function(ka){ka=a([ka||window.event],da);return M.apply(H,ka)}}function n(){if(!arguments.length)return this;var H=this,M=Y.call(arguments,0);return function(){var da=b(M,arguments);return H.apply(this,da)}}function r(H){var M=this,da=Y.call(arguments,1);H*=1E3;return window.setTimeout(function(){return M.apply(M,da)},H)}function x(){return this.delay.apply(this,a([0.01],arguments))}function y(H){var M=this;return function(){var da=
a([M.bind(this)],arguments);return H.apply(this,da)}}function O(){if(this._methodized)return this._methodized;var H=this;return this._methodized=function(){var M=a([this],arguments);return H.apply(null,M)}}var Y=Array.prototype.slice;return{argumentNames:d,bind:f,bindAsEventListener:j,curry:n,delay:r,defer:x,wrap:y,methodize:O}}());
(function(a){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function d(){return this.toISOString()}if(!a.toISOString)a.toISOString=b;if(!a.toJSON)a.toJSON=d})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;
RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};
var PeriodicalExecuter=Class.create({initialize:function(a,b){this.callback=a;this.frequency=b;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1E3)},execute:function(){this.callback(this)},stop:function(){if(this.timer){clearInterval(this.timer);this.timer=null}},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=true;this.execute();this.currentlyExecuting=false}catch(a){this.currentlyExecuting=
false;throw a;}}});Object.extend(String,{interpret:function(a){return a==null?"":String(a)},specialChar:{"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,function(){function a(W){if(Object.isFunction(W))return W;var ba=new Template(W);return function(oa){return ba.evaluate(oa)}}function b(W,ba){var oa="",qa=this,za;ba=a(ba);if(Object.isString(W))W=RegExp.escape(W);if(!(W.length||W.source)){ba=ba("");return ba+qa.split("").join(ba)+ba}for(;qa.length>0;)if(za=qa.match(W)){oa+=qa.slice(0,za.index);oa+=String.interpret(ba(za));qa=qa.slice(za.index+za[0].length)}else{oa+=qa;qa=""}return oa}function d(W,ba,oa){ba=a(ba);oa=
Object.isUndefined(oa)?1:oa;return this.gsub(W,function(qa){if(--oa<0)return qa[0];return ba(qa)})}function f(W,ba){this.gsub(W,ba);return String(this)}function j(W,ba){W=W||30;ba=Object.isUndefined(ba)?"...":ba;return this.length>W?this.slice(0,W-ba.length)+ba:String(this)}function n(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function r(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function x(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}
function y(){var W=new RegExp(Prototype.ScriptFragment,"img"),ba=new RegExp(Prototype.ScriptFragment,"im");return(this.match(W)||[]).map(function(oa){return(oa.match(ba)||["",""])[1]})}function O(){return this.extractScripts().map(function(W){return eval(W)})}function Y(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function H(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function M(W){var ba=this.strip().match(/([^?#]*)(#.*)?$/);
if(!ba)return{};return ba[1].split(W||"&").inject({},function(oa,qa){if((qa=qa.split("="))[0]){var za=decodeURIComponent(qa.shift());qa=qa.length>1?qa.join("="):qa[0];if(qa!=undefined)qa=decodeURIComponent(qa);if(za in oa){Object.isArray(oa[za])||(oa[za]=[oa[za]]);oa[za].push(qa)}else oa[za]=qa}return oa})}function da(){return this.split("")}function ka(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function D(W){return W<1?"":(new Array(W+1)).join(this)}
function P(){return this.replace(/-+(.)?/g,function(W,ba){return ba?ba.toUpperCase():""})}function k(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function p(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function t(){return this.replace(/_/g,"-")}function z(W){var ba=this.replace(/[\x00-\x1f\\]/g,function(oa){if(oa in String.specialChar)return String.specialChar[oa];return"\\u00"+
oa.charCodeAt().toPaddedString(2,16)});if(W)return'"'+ba.replace(/"/g,'\\"')+'"';return"'"+ba.replace(/'/g,"\\'")+"'"}function I(W){return this.replace(W||Prototype.JSONFilter,"$1")}function B(){var W=this;if(W.blank())return false;W=W.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");W=W.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");W=W.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(W)}function J(W){var ba=this.unfilterJSON(),oa=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
if(oa.test(ba))ba=ba.replace(oa,function(za){return"\\u"+("0000"+za.charCodeAt(0).toString(16)).slice(-4)});try{if(!W||ba.isJSON())return eval("("+ba+")")}catch(qa){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());}function Q(){var W=this.unfilterJSON();return JSON.parse(W)}function w(W){return this.indexOf(W)>-1}function K(W){return this.lastIndexOf(W,0)===0}function U(W){var ba=this.length-W.length;return ba>=0&&this.indexOf(W,ba)===ba}function la(){return this==""}function ra(){return/^\s*$/.test(this)}
function X(W,ba){return(new Template(this,ba)).evaluate(W)}var ga=window.JSON&&typeof JSON.parse==="function"&&JSON.parse('{"test": true}').test;return{gsub:b,sub:d,scan:f,truncate:j,strip:String.prototype.trim||n,stripTags:r,stripScripts:x,extractScripts:y,evalScripts:O,escapeHTML:Y,unescapeHTML:H,toQueryParams:M,parseQuery:M,toArray:da,succ:ka,times:D,camelize:P,capitalize:k,underscore:p,dasherize:t,inspect:z,unfilterJSON:I,isJSON:B,evalJSON:ga?Q:J,include:w,startsWith:K,endsWith:U,empty:la,blank:ra,
interpolate:X}}());
var Template=Class.create({initialize:function(a,b){this.template=a.toString();this.pattern=b||Template.Pattern},evaluate:function(a){if(a&&Object.isFunction(a.toTemplateReplacements))a=a.toTemplateReplacements();return this.template.gsub(this.pattern,function(b){if(a==null)return b[1]+"";var d=b[1]||"";if(d=="\\")return b[2];var f=a,j=b[3],n=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;b=n.exec(j);if(b==null)return d;for(;b!=null;){var r=b[1].startsWith("[")?b[2].replace(/\\\\]/g,"]"):b[1];f=f[r];if(null==
f||""==b[3])break;j=j.substring("["==b[3]?b[1].length:b[0].length);b=n.exec(j)}return d+String.interpret(f)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;
var $break={},Enumerable=function(){function a(B,J){var Q=0;try{this._each(function(K){B.call(J,K,Q++)})}catch(w){if(w!=$break)throw w;}return this}function b(B,J,Q){var w=-B,K=[],U=this.toArray();if(B<1)return U;for(;(w+=B)<U.length;)K.push(U.slice(w,w+B));return K.collect(J,Q)}function d(B,J){B=B||Prototype.K;var Q=true;this.each(function(w,K){Q=Q&&!!B.call(J,w,K);if(!Q)throw $break;});return Q}function f(B,J){B=B||Prototype.K;var Q=false;this.each(function(w,K){if(Q=!!B.call(J,w,K))throw $break;
});return Q}function j(B,J){B=B||Prototype.K;var Q=[];this.each(function(w,K){Q.push(B.call(J,w,K))});return Q}function n(B,J){var Q;this.each(function(w,K){if(B.call(J,w,K)){Q=w;throw $break;}});return Q}function r(B,J){var Q=[];this.each(function(w,K){B.call(J,w,K)&&Q.push(w)});return Q}function x(B,J,Q){J=J||Prototype.K;var w=[];if(Object.isString(B))B=new RegExp(RegExp.escape(B));this.each(function(K,U){B.match(K)&&w.push(J.call(Q,K,U))});return w}function y(B){if(Object.isFunction(this.indexOf))if(this.indexOf(B)!=
-1)return true;var J=false;this.each(function(Q){if(Q==B){J=true;throw $break;}});return J}function O(B,J){J=Object.isUndefined(J)?null:J;return this.eachSlice(B,function(Q){for(;Q.length<B;)Q.push(J);return Q})}function Y(B,J,Q){this.each(function(w,K){B=J.call(Q,B,w,K)});return B}function H(B){var J=$A(arguments).slice(1);return this.map(function(Q){return Q[B].apply(Q,J)})}function M(B,J){B=B||Prototype.K;var Q;this.each(function(w,K){w=B.call(J,w,K);if(Q==null||w>=Q)Q=w});return Q}function da(B,
J){B=B||Prototype.K;var Q;this.each(function(w,K){w=B.call(J,w,K);if(Q==null||w<Q)Q=w});return Q}function ka(B,J){B=B||Prototype.K;var Q=[],w=[];this.each(function(K,U){(B.call(J,K,U)?Q:w).push(K)});return[Q,w]}function D(B){var J=[];this.each(function(Q){J.push(Q[B])});return J}function P(B,J){var Q=[];this.each(function(w,K){B.call(J,w,K)||Q.push(w)});return Q}function k(B,J){return this.map(function(Q,w){return{value:Q,criteria:B.call(J,Q,w)}}).sort(function(Q,w){Q=Q.criteria;w=w.criteria;return Q<
w?-1:Q>w?1:0}).pluck("value")}function p(){return this.map()}function t(){var B=Prototype.K,J=$A(arguments);if(Object.isFunction(J.last()))B=J.pop();var Q=[this].concat(J).map($A);return this.map(function(w,K){return B(Q.pluck(K))})}function z(){return this.toArray().length}function I(){return"#<Enumerable:"+this.toArray().inspect()+">"}return{each:a,eachSlice:b,all:d,every:d,any:f,some:f,collect:j,map:j,detect:n,findAll:r,select:r,filter:r,grep:x,include:y,member:y,inGroupsOf:O,inject:Y,invoke:H,
max:M,min:da,partition:ka,pluck:D,reject:P,sortBy:k,toArray:p,entries:p,zip:t,size:z,inspect:I,find:n}}();function $A(a){if(!a)return[];if("toArray"in Object(a))return a.toArray();for(var b=a.length||0,d=new Array(b);b--;)d[b]=a[b];return d}function $w(a){if(!Object.isString(a))return[];return(a=a.strip())?a.split(/\s+/):[]}Array.from=$A;
(function(){function a(t){for(var z=0,I=this.length;z<I;z++)t(this[z])}function b(){this.length=0;return this}function d(){return this[0]}function f(){return this[this.length-1]}function j(){return this.select(function(t){return t!=null})}function n(){return this.inject([],function(t,z){if(Object.isArray(z))return t.concat(z.flatten());t.push(z);return t})}function r(){var t=k.call(arguments,0);return this.select(function(z){return!t.include(z)})}function x(t){return(t===false?this.toArray():this)._reverse()}
function y(t){return this.inject([],function(z,I,B){if(0==B||(t?z.last()!=I:!z.include(I)))z.push(I);return z})}function O(t){return this.uniq().findAll(function(z){return t.detect(function(I){return z===I})})}function Y(){return k.call(this,0)}function H(){return this.length}function M(){return"["+this.map(Object.inspect).join(", ")+"]"}function da(t,z){z||(z=0);var I=this.length;if(z<0)z=I+z;for(;z<I;z++)if(this[z]===t)return z;return-1}function ka(t,z){z=isNaN(z)?this.length:(z<0?this.length+z:
z)+1;t=this.slice(0,z).reverse().indexOf(t);return t<0?t:z-t-1}function D(){for(var t=k.call(this,0),z,I=0,B=arguments.length;I<B;I++){z=arguments[I];if(Object.isArray(z)&&!("callee"in z))for(var J=0,Q=z.length;J<Q;J++)t.push(z[J]);else t.push(z)}return t}var P=Array.prototype,k=P.slice,p=P.forEach;p||(p=a);Object.extend(P,Enumerable);if(!P._reverse)P._reverse=P.reverse;Object.extend(P,{_each:p,clear:b,first:d,last:f,compact:j,flatten:n,without:r,reverse:x,uniq:y,intersect:O,clone:Y,toArray:Y,size:H,
inspect:M});if(function(){return[].concat(arguments)[0][0]!==1}(1,2))P.concat=D;if(!P.indexOf)P.indexOf=da;if(!P.lastIndexOf)P.lastIndexOf=ka})();function $H(a){return new Hash(a)}
var Hash=Class.create(Enumerable,function(){function a(D){this._object=Object.isHash(D)?D.toObject():Object.clone(D)}function b(D){for(var P in this._object){var k=this._object[P],p=[P,k];p.key=P;p.value=k;D(p)}}function d(D,P){return this._object[D]=P}function f(D){if(this._object[D]!==Object.prototype[D])return this._object[D]}function j(D){var P=this._object[D];delete this._object[D];return P}function n(){return Object.clone(this._object)}function r(){return this.pluck("key")}function x(){return this.pluck("value")}
function y(D){var P=this.detect(function(k){return k.value===D});return P&&P.key}function O(D){return this.clone().update(D)}function Y(D){return(new Hash(D)).inject(this,function(P,k){P.set(k.key,k.value);return P})}function H(D,P){if(Object.isUndefined(P))return D;return D+"="+encodeURIComponent(String.interpret(P))}function M(){return this.inject([],function(D,P){var k=encodeURIComponent(P.key);if((P=P.value)&&typeof P=="object"){if(Object.isArray(P))return D.concat(P.map(H.curry(k)))}else D.push(H(k,
P));return D}).join("&")}function da(){return"#<Hash:{"+this.map(function(D){return D.map(Object.inspect).join(": ")}).join(", ")+"}>"}function ka(){return new Hash(this)}return{initialize:a,_each:b,set:d,get:f,unset:j,toObject:n,toTemplateReplacements:n,keys:r,values:x,index:y,merge:O,update:Y,toQueryString:M,inspect:da,toJSON:n,clone:ka}}());Hash.from=$H;
Object.extend(Number.prototype,function(){function a(){return this.toPaddedString(2,16)}function b(){return this+1}function d(y,O){$R(0,this,true).each(y,O);return this}function f(y,O){O=this.toString(O||10);return"0".times(y-O.length)+O}function j(){return Math.abs(this)}function n(){return Math.round(this)}function r(){return Math.ceil(this)}function x(){return Math.floor(this)}return{toColorPart:a,succ:b,times:d,toPaddedString:f,abs:j,round:n,ceil:r,floor:x}}());
function $R(a,b,d){return new ObjectRange(a,b,d)}
var ObjectRange=Class.create(Enumerable,function(){function a(f,j,n){this.start=f;this.end=j;this.exclusive=n}function b(f){for(var j=this.start;this.include(j);){f(j);j=j.succ()}}function d(f){if(f<this.start)return false;if(this.exclusive)return f<this.end;return f<=this.end}return{initialize:a,_each:b,include:d}}()),Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||
false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(a){this.responders._each(a)},register:function(a){this.include(a)||this.responders.push(a)},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(a,b,d,f){this.each(function(j){if(Object.isFunction(j[a]))try{j[a].apply(j,[b,d,f])}catch(n){}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});
Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:true,evalJS:true};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();if(Object.isHash(this.options.parameters))this.options.parameters=this.options.parameters.toObject()}});
Ajax.Request=Class.create(Ajax.Base,{_complete:false,initialize:function($super,b,d){$super(d);this.transport=Ajax.getTransport();this.request(b)},request:function(a){this.url=a;this.method=this.options.method;a=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);if(!["get","post"].include(this.method)){a+=(a?"&":"")+"_method="+this.method;this.method="post"}if(a)if(this.method=="get")this.url+=(this.url.include("?")?"&":"?")+a;else if(/Konqueror|Safari|KHTML/.test(navigator.userAgent))a+=
"&_=";this.parameters=a.toQueryParams();try{var b=new Ajax.Response(this);this.options.onCreate&&this.options.onCreate(b);Ajax.Responders.dispatch("onCreate",this,b);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?this.options.postBody||a:null;this.transport.send(this.body);!this.options.asynchronous&&
this.transport.overrideMimeType&&this.onStateChange()}catch(d){this.dispatchException(d)}},onStateChange:function(){var a=this.transport.readyState;a>1&&!(a==4&&this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var a={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){a["Content-type"]=this.options.contentType+(this.options.encoding?
"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005)a.Connection="close"}if(typeof this.options.requestHeaders=="object"){var b=this.options.requestHeaders;if(Object.isFunction(b.push))for(var d=0,f=b.length;d<f;d+=2)a[b[d]]=b[d+1];else $H(b).each(function(n){a[n.key]=n.value})}for(var j in a)this.transport.setRequestHeader(j,a[j])},success:function(){var a=this.getStatus();return!a||a>=200&&a<300},getStatus:function(){try{return this.transport.status||
0}catch(a){return 0}},respondToReadyState:function(a){a=Ajax.Request.Events[a];var b=new Ajax.Response(this);if(a=="Complete"){try{this._complete=true;(this.options["on"+b.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(b,b.headerJSON)}catch(d){this.dispatchException(d)}var f=b.getHeader("Content-type");if(this.options.evalJS=="force"||this.options.evalJS&&this.isSameOrigin()&&f&&f.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))this.evalResponse()}try{(this.options["on"+
a]||Prototype.emptyFunction)(b,b.headerJSON);Ajax.Responders.dispatch("on"+a,this,b,b.headerJSON)}catch(j){this.dispatchException(j)}if(a=="Complete")this.transport.onreadystatechange=Prototype.emptyFunction},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return!a||a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(a){try{return this.transport.getResponseHeader(a)||
null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(a){this.dispatchException(a)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];
Ajax.Response=Class.create({initialize:function(a){this.request=a;a=this.transport=a.transport;var b=this.readyState=a.readyState;if(b>2&&!Prototype.Browser.IE||b==4){this.status=this.getStatus();this.statusText=this.getStatusText();this.responseText=String.interpret(a.responseText);this.headerJSON=this._getHeaderJSON()}if(b==4){a=a.responseXML;this.responseXML=Object.isUndefined(a)?null:a;this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,
getStatusText:function(){try{return this.transport.statusText||""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a)return null;a=decodeURIComponent(escape(a));try{return a.evalJSON(this.request.options.sanitizeJSON||
!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}},_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||a.evalJSON!="force"&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}});
Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,b,d,f){this.container={success:b.success||b,failure:b.failure||(b.success?null:b)};f=Object.clone(f);var j=f.onComplete;f.onComplete=function(n,r){this.updateContent(n.responseText);Object.isFunction(j)&&j(n,r)}.bind(this);$super(d,f)},updateContent:function(a){var b=this.container[this.success()?"success":"failure"],d=this.options;d.evalScripts||(a=a.stripScripts());if(b=$(b))if(d.insertion)if(Object.isString(d.insertion)){var f=
{};f[d.insertion]=a;b.insert(f)}else d.insertion(b,a);else b.update(a)}});
Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,b,d,f){$super(f);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=b;this.url=d;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},
updateComplete:function(a){if(this.options.decay){this.decay=a.responseText==this.lastText?this.decay*this.options.decay:1;this.lastText=a.responseText}this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});
function $(a){if(arguments.length>1){for(var b=0,d=[],f=arguments.length;b<f;b++)d.push($(arguments[b]));return d}if(Object.isString(a))a=document.getElementById(a);return Element.extend(a)}if(Prototype.BrowserFeatures.XPath)document._getElementsByXPath=function(a,b){var d=[];a=document.evaluate(a,$(b)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);b=0;for(var f=a.snapshotLength;b<f;b++)d.push(Element.extend(a.snapshotItem(b)));return d};if(!Node)var Node={};
Node.ELEMENT_NODE||Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});
(function(a){var b=function(){try{var f=document.createElement('<input name="x">');return f.tagName.toLowerCase()==="input"&&f.name==="x"}catch(j){return false}}(),d=a.Element;a.Element=function(f,j){j=j||{};f=f.toLowerCase();var n=Element.cache;if(b&&j.name){f="<"+f+' name="'+j.name+'">';delete j.name;return Element.writeAttribute(document.createElement(f),j)}n[f]||(n[f]=Element.extend(document.createElement(f)));f="type"in j?document.createElement(f):n[f].cloneNode(false);return Element.writeAttribute(f,
j)};Object.extend(a.Element,d||{});if(d)a.Element.prototype=d.prototype})(this);Element.idCounter=1;Element.cache={};Element._purgeElement=function(a){var b=a._prototypeUID;if(b){Element.stopObserving(a);a._prototypeUID=void 0;delete Element.Storage[b]}};
Element.Methods={visible:function(a){return $(a).style.display!="none"},toggle:function(a){a=$(a);Element[Element.visible(a)?"hide":"show"](a);return a},hide:function(a){a=$(a);a.style.display="none";return a},show:function(a){a=$(a);a.style.display="";return a},remove:function(a){a=$(a);a.parentNode.removeChild(a);return a},update:function(){function a(j,n){j=$(j);for(var r=Element._purgeElement,x=j.getElementsByTagName("*"),y=x.length;y--;)r(x[y]);if(n&&n.toElement)n=n.toElement();if(Object.isElement(n))return j.update().insert(n);
n=Object.toHTML(n);r=j.tagName.toUpperCase();if(r==="SCRIPT"&&f){j.text=n;return j}if(b||d)if(r in Element._insertionTranslations.tags){for(;j.firstChild;)j.removeChild(j.firstChild);Element._getContentFromAnonymousElement(r,n.stripScripts()).each(function(O){j.appendChild(O)})}else j.innerHTML=n.stripScripts();else j.innerHTML=n.stripScripts();n.evalScripts.bind(n).defer();return j}var b=function(){var j=document.createElement("select"),n=true;j.innerHTML='<option value="test">test</option>';if(j.options&&
j.options[0])n=j.options[0].nodeName.toUpperCase()!=="OPTION";return n}(),d=function(){try{var j=document.createElement("table");if(j&&j.tBodies){j.innerHTML="<tbody><tr><td>test</td></tr></tbody>";return typeof j.tBodies[0]=="undefined"}}catch(n){return true}}(),f=function(){var j=document.createElement("script"),n=false;try{j.appendChild(document.createTextNode(""));n=!j.firstChild||j.firstChild&&j.firstChild.nodeType!==3}catch(r){n=true}return n}();return a}(),replace:function(a,b){a=$(a);if(b&&
b.toElement)b=b.toElement();else if(!Object.isElement(b)){b=Object.toHTML(b);var d=a.ownerDocument.createRange();d.selectNode(a);b.evalScripts.bind(b).defer();b=d.createContextualFragment(b.stripScripts())}a.parentNode.replaceChild(b,a);return a},insert:function(a,b){a=$(a);if(Object.isString(b)||Object.isNumber(b)||Object.isElement(b)||b&&(b.toElement||b.toHTML))b={bottom:b};var d,f,j;for(var n in b){d=b[n];n=n.toLowerCase();f=Element._insertionTranslations[n];if(d&&d.toElement)d=d.toElement();if(Object.isElement(d))f(a,
d);else{d=Object.toHTML(d);j=(n=="before"||n=="after"?a.parentNode:a).tagName.toUpperCase();j=Element._getContentFromAnonymousElement(j,d.stripScripts());if(n=="top"||n=="after")j.reverse();j.each(f.curry(a));d.evalScripts.bind(d).defer()}}return a},wrap:function(a,b,d){a=$(a);if(Object.isElement(b))$(b).writeAttribute(d||{});else b=Object.isString(b)?new Element(b,d):new Element("div",b);a.parentNode&&a.parentNode.replaceChild(b,a);b.appendChild(a);return b},inspect:function(a){a=$(a);var b="<"+
a.tagName.toLowerCase();$H({id:"id",className:"class"}).each(function(d){var f=d.first();d=d.last();if(f=(a[f]||"").toString())b+=" "+d+"="+f.inspect(true)});return b+">"},recursivelyCollect:function(a,b,d){a=$(a);d=d||-1;for(var f=[];a=a[b];){a.nodeType==1&&f.push(Element.extend(a));if(f.length==d)break}return f},ancestors:function(a){return Element.recursivelyCollect(a,"parentNode")},descendants:function(a){return Element.select(a,"*")},firstDescendant:function(a){for(a=$(a).firstChild;a&&a.nodeType!=
1;)a=a.nextSibling;return $(a)},immediateDescendants:function(a){var b=[];for(a=$(a).firstChild;a;){a.nodeType===1&&b.push(Element.extend(a));a=a.nextSibling}return b},previousSiblings:function(a){return Element.recursivelyCollect(a,"previousSibling")},nextSiblings:function(a){return Element.recursivelyCollect(a,"nextSibling")},siblings:function(a){a=$(a);return Element.previousSiblings(a).reverse().concat(Element.nextSiblings(a))},match:function(a,b){a=$(a);if(Object.isString(b))return Prototype.Selector.match(a,
b);return b.match(a)},up:function(a,b,d){a=$(a);if(arguments.length==1)return $(a.parentNode);var f=Element.ancestors(a);return Object.isNumber(b)?f[b]:Prototype.Selector.find(f,b,d)},down:function(a,b,d){a=$(a);if(arguments.length==1)return Element.firstDescendant(a);return Object.isNumber(b)?Element.descendants(a)[b]:Element.select(a,b)[d||0]},previous:function(a,b,d){a=$(a);if(Object.isNumber(b)){d=b;b=false}Object.isNumber(d)||(d=0);return b?Prototype.Selector.find(a.previousSiblings(),b,d):a.recursivelyCollect("previousSibling",
d+1)[d]},next:function(a,b,d){a=$(a);if(Object.isNumber(b)){d=b;b=false}Object.isNumber(d)||(d=0);if(b)return Prototype.Selector.find(a.nextSiblings(),b,d);else{Object.isNumber(d);return a.recursivelyCollect("nextSibling",d+1)[d]}},select:function(a){a=$(a);var b=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(b,a)},adjacent:function(a){a=$(a);var b=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(b,a.parentNode).without(a)},identify:function(a){a=
$(a);var b=Element.readAttribute(a,"id");if(b)return b;do b="anonymous_element_"+Element.idCounter++;while($(b));Element.writeAttribute(a,"id",b);return b},readAttribute:function(a,b){a=$(a);if(Prototype.Browser.IE){var d=Element._attributeTranslations.read;if(d.values[b])return d.values[b](a,b);if(d.names[b])b=d.names[b];if(b.include(":"))return!a.attributes||!a.attributes[b]?null:a.attributes[b].value}return a.getAttribute(b)},writeAttribute:function(a,b,d){a=$(a);var f={},j=Element._attributeTranslations.write;
if(typeof b=="object")f=b;else f[b]=Object.isUndefined(d)?true:d;for(var n in f){b=j.names[n]||n;d=f[n];if(j.values[n])b=j.values[n](a,d);if(d===false||d===null)a.removeAttribute(b);else d===true?a.setAttribute(b,b):a.setAttribute(b,d)}return a},getHeight:function(a){return Element.getDimensions(a).height},getWidth:function(a){return Element.getDimensions(a).width},classNames:function(a){return new Element.ClassNames(a)},hasClassName:function(a,b){if(a=$(a)){a=a.className;return a.length>0&&(a==b||
(new RegExp("(^|\\s)"+b+"(\\s|$)")).test(a))}},addClassName:function(a,b){if(a=$(a)){Element.hasClassName(a,b)||(a.className+=(a.className?" ":"")+b);return a}},removeClassName:function(a,b){if(a=$(a)){a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," ").strip();return a}},toggleClassName:function(a,b){if(a=$(a))return Element[Element.hasClassName(a,b)?"removeClassName":"addClassName"](a,b)},cleanWhitespace:function(a){a=$(a);for(var b=a.firstChild;b;){var d=b.nextSibling;b.nodeType==
3&&!/\S/.test(b.nodeValue)&&a.removeChild(b);b=d}return a},empty:function(a){return $(a).innerHTML.blank()},descendantOf:function(a,b){a=$(a);b=$(b);if(a.compareDocumentPosition)return(a.compareDocumentPosition(b)&8)===8;if(b.contains)return b.contains(a)&&b!==a;for(;a=a.parentNode;)if(a==b)return true;return false},scrollTo:function(a){a=$(a);var b=Element.cumulativeOffset(a);window.scrollTo(b[0],b[1]);return a},getStyle:function(a,b){a=$(a);b=b=="float"?"cssFloat":b.camelize();var d=a.style[b];
if(!d||d=="auto")d=(a=document.defaultView.getComputedStyle(a,null))?a[b]:null;if(b=="opacity")return d?parseFloat(d):1;return d=="auto"?null:d},getOpacity:function(a){return $(a).getStyle("opacity")},setStyle:function(a,b){a=$(a);var d=a.style;if(Object.isString(b)){a.style.cssText+=";"+b;return b.include("opacity")?a.setOpacity(b.match(/opacity:\s*(\d?\.?\d*)/)[1]):a}for(var f in b)if(f=="opacity")a.setOpacity(b[f]);else d[f=="float"||f=="cssFloat"?Object.isUndefined(d.styleFloat)?"cssFloat":"styleFloat":
f]=b[f];return a},setOpacity:function(a,b){a=$(a);a.style.opacity=b==1||b===""?"":b<1.0E-5?0:b;return a},makePositioned:function(a){a=$(a);var b=Element.getStyle(a,"position");if(b=="static"||!b){a._madePositioned=true;a.style.position="relative";if(Prototype.Browser.Opera){a.style.top=0;a.style.left=0}}return a},undoPositioned:function(a){a=$(a);if(a._madePositioned){a._madePositioned=undefined;a.style.position=a.style.top=a.style.left=a.style.bottom=a.style.right=""}return a},makeClipping:function(a){a=
$(a);if(a._overflow)return a;a._overflow=Element.getStyle(a,"overflow")||"auto";if(a._overflow!=="hidden")a.style.overflow="hidden";return a},undoClipping:function(a){a=$(a);if(!a._overflow)return a;a.style.overflow=a._overflow=="auto"?"":a._overflow;a._overflow=null;return a},clonePosition:function(a,b,d){d=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},d||{});b=$(b);var f=Element.viewportOffset(b),j=[0,0],n=null;a=$(a);if(Element.getStyle(a,"position")==
"absolute"){n=Element.getOffsetParent(a);j=Element.viewportOffset(n)}if(n==document.body){j[0]-=document.body.offsetLeft;j[1]-=document.body.offsetTop}if(d.setLeft)a.style.left=f[0]-j[0]+d.offsetLeft+"px";if(d.setTop)a.style.top=f[1]-j[1]+d.offsetTop+"px";if(d.setWidth)a.style.width=b.offsetWidth+"px";if(d.setHeight)a.style.height=b.offsetHeight+"px";return a}};Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants});
Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}};
if(Prototype.Browser.Opera){Element.Methods.getStyle=Element.Methods.getStyle.wrap(function(a,b,d){switch(d){case "left":case "top":case "right":case "bottom":if(a(b,"position")==="static")return null;case "height":case "width":if(!Element.visible(b))return null;var f=parseInt(a(b,d),10);if(f!==b["offset"+d.capitalize()])return f+"px";return(d==="height"?["border-top-width","padding-top","padding-bottom","border-bottom-width"]:["border-left-width","padding-left","padding-right","border-right-width"]).inject(f,
function(j,n){n=a(b,n);return n===null?j:j-parseInt(n,10)})+"px";default:return a(b,d)}});Element.Methods.readAttribute=Element.Methods.readAttribute.wrap(function(a,b,d){if(d==="title")return b.title;return a(b,d)})}else if(Prototype.Browser.IE){Element.Methods.getStyle=function(a,b){a=$(a);b=b=="float"||b=="cssFloat"?"styleFloat":b.camelize();var d=a.style[b];if(!d&&a.currentStyle)d=a.currentStyle[b];if(b=="opacity"){if(d=(a.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/))if(d[1])return parseFloat(d[1])/
100;return 1}if(d=="auto"){if((b=="width"||b=="height")&&a.getStyle("display")!="none")return a["offset"+b.capitalize()]+"px";return null}return d};Element.Methods.setOpacity=function(a,b){function d(n){return n.replace(/alpha\([^\)]*\)/gi,"")}a=$(a);var f=a.currentStyle;if(f&&!f.hasLayout||!f&&a.style.zoom=="normal")a.style.zoom=1;f=a.getStyle("filter");var j=a.style;if(b==1||b===""){(f=d(f))?(j.filter=f):j.removeAttribute("filter");return a}else if(b<1.0E-5)b=0;j.filter=d(f)+"alpha(opacity="+b*
100+")";return a};Element._attributeTranslations=function(){var a="className",b="for",d=document.createElement("div");d.setAttribute(a,"x");if(d.className!=="x"){d.setAttribute("class","x");if(d.className==="x")a="class"}d=null;d=document.createElement("label");d.setAttribute(b,"x");if(d.htmlFor!=="x"){d.setAttribute("htmlFor","x");if(d.htmlFor==="x")b="htmlFor"}d=null;return{read:{names:{"class":a,className:a,"for":b,htmlFor:b},values:{_getAttr:function(f,j){return f.getAttribute(j)},_getAttr2:function(f,
j){return f.getAttribute(j,2)},_getAttrNode:function(f,j){return(f=f.getAttributeNode(j))?f.value:""},_getEv:function(){var f=document.createElement("div"),j;f.onclick=Prototype.emptyFunction;f=f.getAttribute("onclick");if(String(f).indexOf("{")>-1)j=function(n,r){r=n.getAttribute(r);if(!r)return null;r=r.toString();r=r.split("{")[1];r=r.split("}")[0];return r.strip()};else if(f==="")j=function(n,r){r=n.getAttribute(r);if(!r)return null;return r.strip()};f=null;return j}(),_flag:function(f,j){return $(f).hasAttribute(j)?
j:null},style:function(f){return f.style.cssText.toLowerCase()},title:function(f){return f.title}}}}}();Element._attributeTranslations.write={names:Object.extend({cellpadding:"cellPadding",cellspacing:"cellSpacing"},Element._attributeTranslations.read.names),values:{checked:function(a,b){a.checked=!!b},style:function(a,b){a.style.cssText=b?b:""}}};Element._attributeTranslations.has={};$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder").each(function(a){Element._attributeTranslations.write.names[a.toLowerCase()]=
a;Element._attributeTranslations.has[a.toLowerCase()]=a});(function(a){Object.extend(a,{href:a._getAttr2,src:a._getAttr2,type:a._getAttr,action:a._getAttrNode,disabled:a._flag,checked:a._flag,readonly:a._flag,multiple:a._flag,onload:a._getEv,onunload:a._getEv,onclick:a._getEv,ondblclick:a._getEv,onmousedown:a._getEv,onmouseup:a._getEv,onmouseover:a._getEv,onmousemove:a._getEv,onmouseout:a._getEv,onfocus:a._getEv,onblur:a._getEv,onkeypress:a._getEv,onkeydown:a._getEv,onkeyup:a._getEv,onsubmit:a._getEv,
onreset:a._getEv,onselect:a._getEv,onchange:a._getEv})})(Element._attributeTranslations.read.values);Prototype.BrowserFeatures.ElementExtensions&&function(){function a(b){b=b.getElementsByTagName("*");for(var d=[],f=0,j;j=b[f];f++)j.tagName!=="!"&&d.push(j);return d}Element.Methods.down=function(b,d,f){b=$(b);if(arguments.length==1)return b.firstDescendant();return Object.isNumber(d)?a(b)[d]:Element.select(b,d)[f||0]}}()}else if(Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent))Element.Methods.setOpacity=
function(a,b){a=$(a);a.style.opacity=b==1?0.999999:b===""?"":b<1.0E-5?0:b;return a};else if(Prototype.Browser.WebKit)Element.Methods.setOpacity=function(a,b){a=$(a);a.style.opacity=b==1||b===""?"":b<1.0E-5?0:b;if(b==1)if(a.tagName.toUpperCase()=="IMG"&&a.width){a.width++;a.width--}else try{var d=document.createTextNode(" ");a.appendChild(d);a.removeChild(d)}catch(f){}return a};
if("outerHTML"in document.documentElement)Element.Methods.replace=function(a,b){a=$(a);if(b&&b.toElement)b=b.toElement();if(Object.isElement(b)){a.parentNode.replaceChild(b,a);return a}b=Object.toHTML(b);var d=a.parentNode,f=d.tagName.toUpperCase();if(Element._insertionTranslations.tags[f]){var j=a.next();f=Element._getContentFromAnonymousElement(f,b.stripScripts());d.removeChild(a);j?f.each(function(n){d.insertBefore(n,j)}):f.each(function(n){d.appendChild(n)})}else a.outerHTML=b.stripScripts();
b.evalScripts.bind(b).defer();return a};Element._returnOffset=function(a,b){var d=[a,b];d.left=a;d.top=b;return d};Element._getContentFromAnonymousElement=function(a,b){var d=new Element("div");if(a=Element._insertionTranslations.tags[a]){d.innerHTML=a[0]+b+a[1];for(b=a[2];b--;)d=d.firstChild}else d.innerHTML=b;return $A(d.childNodes)};
Element._insertionTranslations={before:function(a,b){a.parentNode.insertBefore(b,a)},top:function(a,b){a.insertBefore(b,a.firstChild)},bottom:function(a,b){a.appendChild(b)},after:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};
(function(){var a=Element._insertionTranslations.tags;Object.extend(a,{THEAD:a.TBODY,TFOOT:a.TBODY,TH:a.TD})})();Element.Methods.Simulated={hasAttribute:function(a,b){b=Element._attributeTranslations.has[b]||b;a=$(a).getAttributeNode(b);return!!(a&&a.specified)}};Element.Methods.ByTag={};Object.extend(Element,Element.Methods);
(function(a){if(!Prototype.BrowserFeatures.ElementExtensions&&a.__proto__){window.HTMLElement={};window.HTMLElement.prototype=a.__proto__;Prototype.BrowserFeatures.ElementExtensions=true}})(document.createElement("div"));
Element.extend=function(){function a(n){if(typeof window.Element!="undefined"){var r=window.Element.prototype;if(r){var x="_"+(Math.random()+"").slice(2);n=document.createElement(n);r[x]="x";n=n[x]!=="x";delete r[x];return n}}return false}function b(n,r){for(var x in r){var y=r[x];if(Object.isFunction(y)&&!(x in n))n[x]=y.methodize()}}var d=a("object");if(Prototype.BrowserFeatures.SpecificElementExtensions){if(d)return function(n){if(n&&typeof n._extendedByPrototype=="undefined"){var r=n.tagName;
if(r&&/^(?:object|applet|embed)$/i.test(r)){b(n,Element.Methods);b(n,Element.Methods.Simulated);b(n,Element.Methods.ByTag[r.toUpperCase()])}}return n};return Prototype.K}var f={},j=Element.Methods.ByTag;d=Object.extend(function(n){if(!n||typeof n._extendedByPrototype!="undefined"||n.nodeType!=1||n==window)return n;var r=Object.clone(f),x=n.tagName.toUpperCase();j[x]&&Object.extend(r,j[x]);b(n,r);n._extendedByPrototype=Prototype.emptyFunction;return n},{refresh:function(){if(!Prototype.BrowserFeatures.ElementExtensions){Object.extend(f,
Element.Methods);Object.extend(f,Element.Methods.Simulated)}}});d.refresh();return d}();Element.hasAttribute=document.documentElement.hasAttribute?function(a,b){return a.hasAttribute(b)}:Element.Methods.Simulated.hasAttribute;
Element.addMethods=function(a){function b(y){y=y.toUpperCase();Element.Methods.ByTag[y]||(Element.Methods.ByTag[y]={});Object.extend(Element.Methods.ByTag[y],a)}function d(y,O,Y){Y=Y||false;for(var H in y){var M=y[H];if(Object.isFunction(M))if(!Y||!(H in O))O[H]=M.methodize()}}function f(y){var O,Y={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",
Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(Y[y])O="HTML"+Y[y]+"Element";if(window[O])return window[O];O="HTML"+y+"Element";if(window[O])return window[O];O="HTML"+y.capitalize()+"Element";if(window[O])return window[O];y=document.createElement(y);return y.__proto__||y.constructor.prototype}
var j=Prototype.BrowserFeatures,n=Element.Methods.ByTag;if(!a){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods)})}if(arguments.length==2){var r=a;a=arguments[1]}if(r)Object.isArray(r)?r.each(b):b(r);else Object.extend(Element.Methods,a||{});r=window.HTMLElement?HTMLElement.prototype:
Element.prototype;if(j.ElementExtensions){d(Element.Methods,r);d(Element.Methods.Simulated,r,true)}if(j.SpecificElementExtensions)for(var x in Element.Methods.ByTag){j=f(x);Object.isUndefined(j)||d(n[x],j.prototype)}Object.extend(Element,Element.Methods);delete Element.ByTag;Element.extend.refresh&&Element.extend.refresh();Element.cache={}};
document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}};
(function(a){function b(){if(f.WebKit&&!j.evaluate)return document;if(f.Opera&&window.parseFloat(window.opera.version())<9.5)return document.body;return document.documentElement}function d(x){n||(n=b());r[x]="client"+x;a["get"+x]=function(){return n[r[x]]};return a["get"+x]()}var f=Prototype.Browser,j=document,n,r={};a.getWidth=d.curry("Width");a.getHeight=d.curry("Height")})(document.viewport);Element.Storage={UID:1};
Element.addMethods({getStorage:function(a){if(a=$(a)){if(a===window)a=0;else{if(typeof a._prototypeUID==="undefined")a._prototypeUID=Element.Storage.UID++;a=a._prototypeUID}Element.Storage[a]||(Element.Storage[a]=$H());return Element.Storage[a]}},store:function(a,b,d){if(a=$(a)){arguments.length===2?Element.getStorage(a).update(b):Element.getStorage(a).set(b,d);return a}},retrieve:function(a,b,d){if(a=$(a)){a=Element.getStorage(a);var f=a.get(b);if(Object.isUndefined(f)){a.set(b,d);f=d}return f}},
clone:function(a,b){if(a=$(a)){a=a.cloneNode(b);a._prototypeUID=void 0;if(b){b=Element.select(a,"*");for(var d=b.length;d--;)b[d]._prototypeUID=void 0}return Element.extend(a)}},purge:function(a){if(a=$(a)){var b=Element._purgeElement;b(a);a=a.getElementsByTagName("*");for(var d=a.length;d--;)b(a[d]);return null}}});
(function(){function a(k){k=k.match(/^(\d+)%?$/i);if(!k)return null;return Number(k[1])/100}function b(k,p,t){var z=null;if(Object.isElement(k)){z=k;k=z.getStyle(p)}if(k===null)return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(k))return window.parseFloat(k);var I=k.include("%"),B=t===document.viewport;if(/\d/.test(k)&&z&&z.runtimeStyle&&!(I&&B)){t=z.style.left;p=z.runtimeStyle.left;z.runtimeStyle.left=z.currentStyle.left;z.style.left=k||0;k=z.style.pixelLeft;z.style.left=t;z.runtimeStyle.left=p;return k}if(z&&
I){t=t||z.parentNode;k=a(k);I=null;z.getStyle("position");z=p.include("left")||p.include("right")||p.include("width");p=p.include("top")||p.include("bottom")||p.include("height");if(t===document.viewport)if(z)I=document.viewport.getWidth();else{if(p)I=document.viewport.getHeight()}else if(z)I=$(t).measure("width");else if(p)I=$(t).measure("height");return I===null?0:I*k}return 0}function d(k){for(;k&&k.parentNode;){if(k.getStyle("display")==="none")return false;k=$(k.parentNode)}return true}function f(k){if(k.include("border"))k+=
"-width";return k.camelize()}function j(k,p){return new Element.Layout(k,p)}function n(k,p){return $(k).getLayout().get(p)}function r(k){k=$(k);var p=Element.getStyle(k,"display");if(p&&p!=="none")return{width:k.offsetWidth,height:k.offsetHeight};p=k.style;p={visibility:p.visibility,position:p.position,display:p.display};var t={visibility:"hidden",display:"block"};if(p.position!=="fixed")t.position="absolute";Element.setStyle(k,t);t={width:k.offsetWidth,height:k.offsetHeight};Element.setStyle(k,p);
return t}function x(k){if(D(k))return $(document.body);if(Element.getStyle(k,"display")!=="inline"&&k.offsetParent)return $(k.offsetParent);if(k===document.body)return $(k);for(;(k=k.parentNode)&&k!==document.body;)if(Element.getStyle(k,"position")!=="static")return k.nodeName==="HTML"?$(document.body):$(k);return $(document.body)}function y(k){var p=0,t=0;if(k.parentNode){do{p+=k.offsetTop||0;t+=k.offsetLeft||0;k=k.offsetParent}while(k)}return new Element.Offset(t,p)}function O(k){var p=k.getLayout(),
t=0,z=0;do{t+=k.offsetTop||0;z+=k.offsetLeft||0;if(k=k.offsetParent){if(ka(k))break;if(Element.getStyle(k,"position")!=="static")break}}while(k);z-=p.get("margin-top");t-=p.get("margin-left");return new Element.Offset(z,t)}function Y(k){var p=0,t=0;do{p+=k.scrollTop||0;t+=k.scrollLeft||0;k=k.parentNode}while(k);return new Element.Offset(t,p)}function H(k){var p=0,t=0,z=document.body,I=k;do{p+=I.offsetTop||0;t+=I.offsetLeft||0;if(I.offsetParent==z&&Element.getStyle(I,"position")=="absolute")break}while(I=
I.offsetParent);I=k;do if(I!=z){p-=I.scrollTop||0;t-=I.scrollLeft||0}while(I=I.parentNode);return new Element.Offset(t,p)}function M(k){k=$(k);if(Element.getStyle(k,"position")==="absolute")return k;var p=x(k),t=k.viewportOffset();p=p.viewportOffset();t=t.relativeTo(p);p=k.getLayout();k.store("prototype_absolutize_original_styles",{left:k.getStyle("left"),top:k.getStyle("top"),width:k.getStyle("width"),height:k.getStyle("height")});k.setStyle({position:"absolute",top:t.top+"px",left:t.left+"px",width:p.get("width")+
"px",height:p.get("height")+"px"});return k}function da(k){k=$(k);if(Element.getStyle(k,"position")==="relative")return k;var p=k.retrieve("prototype_absolutize_original_styles");p&&k.setStyle(p);return k}function ka(k){return k.nodeName.toUpperCase()==="BODY"}function D(k){return k!==document.body&&!Element.descendantOf(k,document.body)}var P=Prototype.K;if("currentStyle"in document.documentElement)P=function(k){if(!k.currentStyle.hasLayout)k.style.zoom=1;return k};Element.Layout=Class.create(Hash,
{initialize:function($super,p,t){$super();this.element=$(p);Element.Layout.PROPERTIES.each(function(z){this._set(z,null)},this);if(t){this._preComputing=true;this._begin();Element.Layout.PROPERTIES.each(this._compute,this);this._end();this._preComputing=false}},_set:function(k,p){return Hash.prototype.set.call(this,k,p)},set:function(){throw"Properties of Element.Layout are read-only.";},get:function($super,p){var t=$super(p);return t===null?this._compute(p):t},_begin:function(){if(!this._prepared){var k=
this.element;if(!d(k)){k.store("prototype_original_styles",{position:k.style.position||"",width:k.style.width||"",visibility:k.style.visibility||"",display:k.style.display||""});var p=k.getStyle("position"),t=k.getStyle("width"),z=p==="fixed"?document.viewport:k.parentNode;k.setStyle({position:"absolute",visibility:"hidden",display:"block"});var I=k.getStyle("width");p=t&&I===t?b(k,"width",z):p==="absolute"||p==="fixed"?b(k,"width",z):$(k.parentNode).getLayout().get("width")-this.get("margin-left")-
this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right");k.setStyle({width:p+"px"})}this._prepared=true}},_end:function(){var k=this.element,p=k.retrieve("prototype_original_styles");k.store("prototype_original_styles",null);k.setStyle(p);this._prepared=false},_compute:function(k){var p=Element.Layout.COMPUTATIONS;if(!(k in p))throw"Property not found.";return this._set(k,p[k].call(this,this.element))},toObject:function(){var k=$A(arguments),
p={};(k.length===0?Element.Layout.PROPERTIES:k.join(" ").split(" ")).each(function(t){if(Element.Layout.PROPERTIES.include(t)){var z=this.get(t);if(z!=null)p[t]=z}},this);return p},toHash:function(){var k=this.toObject.apply(this,arguments);return new Hash(k)},toCSS:function(){var k=$A(arguments),p={};(k.length===0?Element.Layout.PROPERTIES:k.join(" ").split(" ")).each(function(t){if(Element.Layout.PROPERTIES.include(t))if(!Element.Layout.COMPOSITE_PROPERTIES.include(t)){var z=this.get(t);if(z!=null)p[f(t)]=
z+"px"}},this);return p},inspect:function(){return"#<Element.Layout>"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),
COMPUTATIONS:{height:function(){this._preComputing||this._begin();var k=this.get("border-box-height");if(k<=0){this._preComputing||this._end();return 0}var p=this.get("border-top"),t=this.get("border-bottom"),z=this.get("padding-top"),I=this.get("padding-bottom");this._preComputing||this._end();return k-p-t-z-I},width:function(){this._preComputing||this._begin();var k=this.get("border-box-width");if(k<=0){this._preComputing||this._end();return 0}var p=this.get("border-left"),t=this.get("border-right"),
z=this.get("padding-left"),I=this.get("padding-right");this._preComputing||this._end();return k-p-t-z-I},"padding-box-height":function(){var k=this.get("height"),p=this.get("padding-top"),t=this.get("padding-bottom");return k+p+t},"padding-box-width":function(){var k=this.get("width"),p=this.get("padding-left"),t=this.get("padding-right");return k+p+t},"border-box-height":function(k){this._preComputing||this._begin();k=k.offsetHeight;this._preComputing||this._end();return k},"border-box-width":function(k){this._preComputing||
this._begin();k=k.offsetWidth;this._preComputing||this._end();return k},"margin-box-height":function(){var k=this.get("border-box-height"),p=this.get("margin-top"),t=this.get("margin-bottom");if(k<=0)return 0;return k+p+t},"margin-box-width":function(){var k=this.get("border-box-width"),p=this.get("margin-left"),t=this.get("margin-right");if(k<=0)return 0;return k+p+t},top:function(k){return k.positionedOffset().top},bottom:function(k){var p=k.positionedOffset();k=k.getOffsetParent().measure("height");
var t=this.get("border-box-height");return k-t-p.top},left:function(k){return k.positionedOffset().left},right:function(k){var p=k.positionedOffset();k=k.getOffsetParent().measure("width");var t=this.get("border-box-width");return k-t-p.left},"padding-top":function(k){return b(k,"paddingTop")},"padding-bottom":function(k){return b(k,"paddingBottom")},"padding-left":function(k){return b(k,"paddingLeft")},"padding-right":function(k){return b(k,"paddingRight")},"border-top":function(k){return b(k,"borderTopWidth")},
"border-bottom":function(k){return b(k,"borderBottomWidth")},"border-left":function(k){return b(k,"borderLeftWidth")},"border-right":function(k){return b(k,"borderRightWidth")},"margin-top":function(k){return b(k,"marginTop")},"margin-bottom":function(k){return b(k,"marginBottom")},"margin-left":function(k){return b(k,"marginLeft")},"margin-right":function(k){return b(k,"marginRight")}}});"getBoundingClientRect"in document.documentElement&&Object.extend(Element.Layout.COMPUTATIONS,{right:function(k){var p=
P(k.getOffsetParent());k=k.getBoundingClientRect();return(p.getBoundingClientRect().right-k.right).round()},bottom:function(k){var p=P(k.getOffsetParent());k=k.getBoundingClientRect();return(p.getBoundingClientRect().bottom-k.bottom).round()}});Element.Offset=Class.create({initialize:function(k,p){this.left=k.round();this.top=p.round();this[0]=this.left;this[1]=this.top},relativeTo:function(k){return new Element.Offset(this.left-k.left,this.top-k.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},
toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});if(Prototype.Browser.IE){x=x.wrap(function(k,p){p=$(p);if(D(p))return $(document.body);var t=p.getStyle("position");if(t!=="static")return k(p);p.setStyle({position:"relative"});k=k(p);p.setStyle({position:t});return k});O=O.wrap(function(k,p){p=$(p);if(!p.parentNode)return new Element.Offset(0,0);var t=p.getStyle("position");if(t!=="static")return k(p);var z=p.getOffsetParent();z&&z.getStyle("position")===
"fixed"&&P(z);p.setStyle({position:"relative"});k=k(p);p.setStyle({position:t});return k})}else if(Prototype.Browser.Webkit)y=function(k){var p=0,t=0;do{p+=k.offsetTop||0;t+=k.offsetLeft||0;if(k.offsetParent==document.body)if(Element.getStyle(k,"position")=="absolute")break;k=k.offsetParent}while(k);return new Element.Offset(t,p)};Element.addMethods({getLayout:j,measure:n,getDimensions:r,getOffsetParent:x,cumulativeOffset:y,positionedOffset:O,cumulativeScrollOffset:Y,viewportOffset:H,absolutize:M,
relativize:da});"getBoundingClientRect"in document.documentElement&&Element.addMethods({viewportOffset:function(k){k=$(k);if(D(k))return new Element.Offset(0,0);k=k.getBoundingClientRect();var p=document.documentElement;return new Element.Offset(k.left-p.clientLeft,k.top-p.clientTop)}})})();window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)};
Prototype.Selector=function(){function a(){throw new Error('Method "Prototype.Selector.select" must be defined.');}function b(){throw new Error('Method "Prototype.Selector.match" must be defined.');}function d(n,r,x){x=x||0;var y=Prototype.Selector.match,O=n.length,Y=0,H;for(H=0;H<O;H++)if(y(n[H],r)&&x==Y++)return Element.extend(n[H])}function f(n){for(var r=0,x=n.length;r<x;r++)Element.extend(n[r]);return n}var j=Prototype.K;return{select:a,match:b,find:d,extendElements:Element.extend===j?j:f,extendElement:Element.extend}}();
Prototype._original_property=window.Sizzle;
(function(){function a(k,p,t,z,I,B){I=k=="previousSibling"&&!B;for(var J=0,Q=z.length;J<Q;J++){var w=z[J];if(w){if(I&&w.nodeType===1){w.sizcache=t;w.sizset=J}w=w[k];for(var K=false;w;){if(w.sizcache===t){K=z[w.sizset];break}if(w.nodeType===1&&!B){w.sizcache=t;w.sizset=J}if(w.nodeName===p){K=w;break}w=w[k]}z[J]=K}}}function b(k,p,t,z,I,B){I=k=="previousSibling"&&!B;for(var J=0,Q=z.length;J<Q;J++){var w=z[J];if(w){if(I&&w.nodeType===1){w.sizcache=t;w.sizset=J}w=w[k];for(var K=false;w;){if(w.sizcache===
t){K=z[w.sizset];break}if(w.nodeType===1){if(!B){w.sizcache=t;w.sizset=J}if(typeof p!=="string"){if(w===p){K=true;break}}else if(x.filter(p,[w]).length>0){K=w;break}}w=w[k]}z[J]=K}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,f=0,j=Object.prototype.toString,n=false,r=true;[0,0].sort(function(){r=false;return 0});var x=function(k,p,t,z){t=t||[];var I=p=p||document;if(p.nodeType!==1&&p.nodeType!==9)return[];
if(!k||typeof k!=="string")return t;for(var B=[],J,Q,w,K,U=true,la=D(p),ra=k;(d.exec(""),J=d.exec(ra))!==null;){ra=J[3];B.push(J[1]);if(J[2]){K=J[3];break}}if(B.length>1&&O.exec(k))if(B.length===2&&y.relative[B[0]])Q=P(B[0]+B[1],p);else for(Q=y.relative[B[0]]?[p]:x(B.shift(),p);B.length;){k=B.shift();if(y.relative[k])k+=B.shift();Q=P(k,Q)}else{if(!z&&B.length>1&&p.nodeType===9&&!la&&y.match.ID.test(B[0])&&!y.match.ID.test(B[B.length-1])){J=x.find(B.shift(),p,la);p=J.expr?x.filter(J.expr,J.set)[0]:
J.set[0]}if(p){J=z?{expr:B.pop(),set:H(z)}:x.find(B.pop(),B.length===1&&(B[0]==="~"||B[0]==="+")&&p.parentNode?p.parentNode:p,la);Q=J.expr?x.filter(J.expr,J.set):J.set;if(B.length>0)w=H(Q);else U=false;for(;B.length;){var X=B.pop();J=X;if(y.relative[X])J=B.pop();else X="";if(J==null)J=p;y.relative[X](w,J,la)}}else w=[]}w||(w=Q);if(!w)throw"Syntax error, unrecognized expression: "+(X||k);if(j.call(w)==="[object Array]")if(U)if(p&&p.nodeType===1)for(k=0;w[k]!=null;k++){if(w[k]&&(w[k]===true||w[k].nodeType===
1&&ka(p,w[k])))t.push(Q[k])}else for(k=0;w[k]!=null;k++)w[k]&&w[k].nodeType===1&&t.push(Q[k]);else t.push.apply(t,w);else H(w,t);if(K){x(K,I,t,z);x.uniqueSort(t)}return t};x.uniqueSort=function(k){if(da){n=r;k.sort(da);if(n)for(var p=1;p<k.length;p++)k[p]===k[p-1]&&k.splice(p--,1)}return k};x.matches=function(k,p){return x(k,null,null,p)};x.find=function(k,p,t){var z,I;if(!k)return[];for(var B=0,J=y.order.length;B<J;B++){var Q=y.order[B];if(I=y.leftMatch[Q].exec(k)){var w=I[1];I.splice(1,1);if(w.substr(w.length-
1)!=="\\"){I[1]=(I[1]||"").replace(/\\/g,"");z=y.find[Q](I,p,t);if(z!=null){k=k.replace(y.match[Q],"");break}}}}z||(z=p.getElementsByTagName("*"));return{set:z,expr:k}};x.filter=function(k,p,t,z){for(var I=k,B=[],J=p,Q,w,K=p&&p[0]&&D(p[0]);k&&p.length;){for(var U in y.filter)if((Q=y.match[U].exec(k))!=null){var la=y.filter[U],ra,X;w=false;if(J==B)B=[];if(y.preFilter[U])if(Q=y.preFilter[U](Q,J,t,B,z,K)){if(Q===true)continue}else w=ra=true;if(Q)for(var ga=0;(X=J[ga])!=null;ga++)if(X){ra=la(X,Q,ga,J);
var W=z^!!ra;if(t&&ra!=null)if(W)w=true;else J[ga]=false;else if(W){B.push(X);w=true}}if(ra!==undefined){t||(J=B);k=k.replace(y.match[U],"");if(!w)return[];break}}if(k==I)if(w==null)throw"Syntax error, unrecognized expression: "+k;else break;I=k}return J};var y=x.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(k){return k.getAttribute("href")}},relative:{"+":function(k,p,t){var z=typeof p==="string",I=z&&!/\W/.test(p);z=z&&!I;if(I&&!t)p=p.toUpperCase();t=0;I=k.length;
for(var B;t<I;t++)if(B=k[t]){for(;(B=B.previousSibling)&&B.nodeType!==1;);k[t]=z||B&&B.nodeName===p?B||false:B===p}z&&x.filter(p,k,true)},">":function(k,p,t){var z=typeof p==="string";if(z&&!/\W/.test(p)){p=t?p:p.toUpperCase();t=0;for(var I=k.length;t<I;t++){var B=k[t];if(B){z=B.parentNode;k[t]=z.nodeName===p?z:false}}}else{t=0;for(I=k.length;t<I;t++)if(B=k[t])k[t]=z?B.parentNode:B.parentNode===p;z&&x.filter(p,k,true)}},"":function(k,p,t){var z=f++,I=b;if(!/\W/.test(p)){var B=p=t?p:p.toUpperCase();
I=a}I("parentNode",p,z,k,B,t)},"~":function(k,p,t){var z=f++,I=b;if(typeof p==="string"&&!/\W/.test(p)){var B=p=t?p:p.toUpperCase();I=a}I("previousSibling",p,z,k,B,t)}},find:{ID:function(k,p,t){if(typeof p.getElementById!=="undefined"&&!t)return(k=p.getElementById(k[1]))?[k]:[]},NAME:function(k,p){if(typeof p.getElementsByName!=="undefined"){var t=[];p=p.getElementsByName(k[1]);for(var z=0,I=p.length;z<I;z++)p[z].getAttribute("name")===k[1]&&t.push(p[z]);return t.length===0?null:t}},TAG:function(k,
p){return p.getElementsByTagName(k[1])}},preFilter:{CLASS:function(k,p,t,z,I,B){k=" "+k[1].replace(/\\/g,"")+" ";if(B)return k;B=0;for(var J;(J=p[B])!=null;B++)if(J)if(I^(J.className&&(" "+J.className+" ").indexOf(k)>=0))t||z.push(J);else if(t)p[B]=false;return false},ID:function(k){return k[1].replace(/\\/g,"")},TAG:function(k,p){for(var t=0;p[t]===false;t++);return p[t]&&D(p[t])?k[1]:k[1].toUpperCase()},CHILD:function(k){if(k[1]=="nth"){var p=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(k[2]=="even"&&"2n"||
k[2]=="odd"&&"2n+1"||!/\D/.test(k[2])&&"0n+"+k[2]||k[2]);k[2]=p[1]+(p[2]||1)-0;k[3]=p[3]-0}k[0]=f++;return k},ATTR:function(k,p,t,z,I,B){p=k[1].replace(/\\/g,"");if(!B&&y.attrMap[p])k[1]=y.attrMap[p];if(k[2]==="~=")k[4]=" "+k[4]+" ";return k},PSEUDO:function(k,p,t,z,I){if(k[1]==="not")if((d.exec(k[3])||"").length>1||/^\w/.test(k[3]))k[3]=x(k[3],null,null,p);else{k=x.filter(k[3],p,t,true^I);t||z.push.apply(z,k);return false}else if(y.match.POS.test(k[0])||y.match.CHILD.test(k[0]))return true;return k},
POS:function(k){k.unshift(true);return k}},filters:{enabled:function(k){return k.disabled===false&&k.type!=="hidden"},disabled:function(k){return k.disabled===true},checked:function(k){return k.checked===true},selected:function(k){return k.selected===true},parent:function(k){return!!k.firstChild},empty:function(k){return!k.firstChild},has:function(k,p,t){return!!x(t[3],k).length},header:function(k){return/h\d/i.test(k.nodeName)},text:function(k){return"text"===k.type},radio:function(k){return"radio"===
k.type},checkbox:function(k){return"checkbox"===k.type},file:function(k){return"file"===k.type},password:function(k){return"password"===k.type},submit:function(k){return"submit"===k.type},image:function(k){return"image"===k.type},reset:function(k){return"reset"===k.type},button:function(k){return"button"===k.type||k.nodeName.toUpperCase()==="BUTTON"},input:function(k){return/input|select|textarea|button/i.test(k.nodeName)}},setFilters:{first:function(k,p){return p===0},last:function(k,p,t,z){return p===
z.length-1},even:function(k,p){return p%2===0},odd:function(k,p){return p%2===1},lt:function(k,p,t){return p<t[3]-0},gt:function(k,p,t){return p>t[3]-0},nth:function(k,p,t){return t[3]-0==p},eq:function(k,p,t){return t[3]-0==p}},filter:{PSEUDO:function(k,p,t,z){var I=p[1],B=y.filters[I];if(B)return B(k,t,p,z);else if(I==="contains")return(k.textContent||k.innerText||"").indexOf(p[3])>=0;else if(I==="not"){p=p[3];t=0;for(z=p.length;t<z;t++)if(p[t]===k)return false;return true}},CHILD:function(k,p){var t=
p[1],z=k;switch(t){case "only":case "first":for(;z=z.previousSibling;)if(z.nodeType===1)return false;if(t=="first")return true;z=k;case "last":for(;z=z.nextSibling;)if(z.nodeType===1)return false;return true;case "nth":t=p[2];var I=p[3];if(t==1&&I==0)return true;p=p[0];var B=k.parentNode;if(B&&(B.sizcache!==p||!k.nodeIndex)){var J=0;for(z=B.firstChild;z;z=z.nextSibling)if(z.nodeType===1)z.nodeIndex=++J;B.sizcache=p}k=k.nodeIndex-I;return t==0?k==0:k%t==0&&k/t>=0}},ID:function(k,p){return k.nodeType===
1&&k.getAttribute("id")===p},TAG:function(k,p){return p==="*"&&k.nodeType===1||k.nodeName===p},CLASS:function(k,p){return(" "+(k.className||k.getAttribute("class"))+" ").indexOf(p)>-1},ATTR:function(k,p){var t=p[1];k=y.attrHandle[t]?y.attrHandle[t](k):k[t]!=null?k[t]:k.getAttribute(t);t=k+"";var z=p[2];p=p[4];return k==null?z==="!=":z==="="?t===p:z==="*="?t.indexOf(p)>=0:z==="~="?(" "+t+" ").indexOf(p)>=0:!p?t&&k!==false:z==="!="?t!=p:z==="^="?t.indexOf(p)===0:z==="$="?t.substr(t.length-p.length)===
p:z==="|="?t===p||t.substr(0,p.length+1)===p+"-":false},POS:function(k,p,t,z){var I=y.setFilters[p[2]];if(I)return I(k,t,p,z)}}},O=y.match.POS;for(var Y in y.match){y.match[Y]=new RegExp(y.match[Y].source+/(?![^\[]*\])(?![^\(]*\))/.source);y.leftMatch[Y]=new RegExp(/(^(?:.|\r|\n)*?)/.source+y.match[Y].source)}var H=function(k,p){k=Array.prototype.slice.call(k,0);if(p){p.push.apply(p,k);return p}return k};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(M){H=function(k,p){p=
p||[];if(j.call(k)==="[object Array]")Array.prototype.push.apply(p,k);else if(typeof k.length==="number")for(var t=0,z=k.length;t<z;t++)p.push(k[t]);else for(t=0;k[t];t++)p.push(k[t]);return p}}var da;if(document.documentElement.compareDocumentPosition)da=function(k,p){if(!k.compareDocumentPosition||!p.compareDocumentPosition){if(k==p)n=true;return 0}k=k.compareDocumentPosition(p)&4?-1:k===p?0:1;if(k===0)n=true;return k};else if("sourceIndex"in document.documentElement)da=function(k,p){if(!k.sourceIndex||
!p.sourceIndex){if(k==p)n=true;return 0}k=k.sourceIndex-p.sourceIndex;if(k===0)n=true;return k};else if(document.createRange)da=function(k,p){if(!k.ownerDocument||!p.ownerDocument){if(k==p)n=true;return 0}var t=k.ownerDocument.createRange(),z=p.ownerDocument.createRange();t.setStart(k,0);t.setEnd(k,0);z.setStart(p,0);z.setEnd(p,0);k=t.compareBoundaryPoints(Range.START_TO_END,z);if(k===0)n=true;return k};(function(){var k=document.createElement("div"),p="script"+(new Date).getTime();k.innerHTML="<a name='"+
p+"'/>";var t=document.documentElement;t.insertBefore(k,t.firstChild);if(document.getElementById(p)){y.find.ID=function(z,I,B){if(typeof I.getElementById!=="undefined"&&!B)return(I=I.getElementById(z[1]))?I.id===z[1]||typeof I.getAttributeNode!=="undefined"&&I.getAttributeNode("id").nodeValue===z[1]?[I]:undefined:[]};y.filter.ID=function(z,I){var B=typeof z.getAttributeNode!=="undefined"&&z.getAttributeNode("id");return z.nodeType===1&&B&&B.nodeValue===I}}t.removeChild(k);t=k=null})();(function(){var k=
document.createElement("div");k.appendChild(document.createComment(""));if(k.getElementsByTagName("*").length>0)y.find.TAG=function(p,t){t=t.getElementsByTagName(p[1]);if(p[1]==="*"){p=[];for(var z=0;t[z];z++)t[z].nodeType===1&&p.push(t[z]);t=p}return t};k.innerHTML="<a href='#'></a>";if(k.firstChild&&typeof k.firstChild.getAttribute!=="undefined"&&k.firstChild.getAttribute("href")!=="#")y.attrHandle.href=function(p){return p.getAttribute("href",2)};k=null})();document.querySelectorAll&&function(){var k=
x,p=document.createElement("div");p.innerHTML="<p class='TEST'></p>";if(!(p.querySelectorAll&&p.querySelectorAll(".TEST").length===0)){x=function(z,I,B,J){I=I||document;if(!J&&I.nodeType===9&&!D(I))try{return H(I.querySelectorAll(z),B)}catch(Q){}return k(z,I,B,J)};for(var t in k)x[t]=k[t];p=null}}();document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var k=document.createElement("div");k.innerHTML="<div class='test e'></div><div class='test'></div>";if(k.getElementsByClassName("e").length!==
0){k.lastChild.className="e";if(k.getElementsByClassName("e").length!==1){y.order.splice(1,0,"CLASS");y.find.CLASS=function(p,t,z){if(typeof t.getElementsByClassName!=="undefined"&&!z)return t.getElementsByClassName(p[1])};k=null}}}();var ka=document.compareDocumentPosition?function(k,p){return k.compareDocumentPosition(p)&16}:function(k,p){return k!==p&&(k.contains?k.contains(p):true)},D=function(k){return k.nodeType===9&&k.documentElement.nodeName!=="HTML"||!!k.ownerDocument&&k.ownerDocument.documentElement.nodeName!==
"HTML"},P=function(k,p){var t=[],z="",I;for(p=p.nodeType?[p]:p;I=y.match.PSEUDO.exec(k);){z+=I[0];k=k.replace(y.match.PSEUDO,"")}k=y.relative[k]?k+"*":k;I=0;for(var B=p.length;I<B;I++)x(k,p[I],t);return x.filter(z,t)};window.Sizzle=x})();(function(a){function b(j,n){return f(a(j,n||document))}function d(j,n){return a.matches(n,[j]).length==1}var f=Prototype.Selector.extendElements;Prototype.Selector.engine=a;Prototype.Selector.select=b;Prototype.Selector.match=d})(Sizzle);window.Sizzle=Prototype._original_property;
delete Prototype._original_property;
var Form={reset:function(a){a=$(a);a.reset();return a},serializeElements:function(a,b){if(typeof b!="object")b={hash:!!b};else if(Object.isUndefined(b.hash))b.hash=true;var d,f,j=false,n=b.submit,r;if(b.hash){b={};r=function(x,y,O){if(y in x){Object.isArray(x[y])||(x[y]=[x[y]]);x[y].push(O)}else x[y]=O;return x}}else{b="";r=function(x,y,O){return x+(x?"&":"")+encodeURIComponent(y)+"="+encodeURIComponent(O)}}return a.inject(b,function(x,y){if(!y.disabled&&y.name){d=y.name;f=$(y).getValue();if(f!=null&&
y.type!="file"&&(y.type!="submit"||!j&&n!==false&&(!n||d==n)&&(j=true)))x=r(x,d,f)}return x})}};
Form.Methods={serialize:function(a,b){return Form.serializeElements(Form.getElements(a),b)},getElements:function(a){a=$(a).getElementsByTagName("*");for(var b,d=[],f=Form.Element.Serializers,j=0;b=a[j];j++)d.push(b);return d.inject([],function(n,r){f[r.tagName.toLowerCase()]&&n.push(Element.extend(r));return n})},getInputs:function(a,b,d){a=$(a);a=a.getElementsByTagName("input");if(!b&&!d)return $A(a).map(Element.extend);for(var f=0,j=[],n=a.length;f<n;f++){var r=a[f];b&&r.type!=b||d&&r.name!=d||
j.push(Element.extend(r))}return j},disable:function(a){a=$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(a){a=$(a).getElements().findAll(function(d){return"hidden"!=d.type&&!d.disabled});var b=a.findAll(function(d){return d.hasAttribute("tabIndex")&&d.tabIndex>=0}).sortBy(function(d){return d.tabIndex}).first();return b?b:a.find(function(d){return/^(?:input|select|textarea)$/i.test(d.tagName)})},
focusFirstElement:function(a){a=$(a);a.findFirstElement().activate();return a},request:function(a,b){a=$(a);b=Object.clone(b||{});var d=b.parameters,f=a.readAttribute("action")||"";if(f.blank())f=window.location.href;b.parameters=a.serialize(true);if(d){if(Object.isString(d))d=d.toQueryParams();Object.extend(b.parameters,d)}if(a.hasAttribute("method")&&!b.method)b.method=a.method;return new Ajax.Request(f,b)}};
Form.Element={focus:function(a){$(a).focus();return a},select:function(a){$(a).select();return a}};
Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var b=a.getValue();if(b!=undefined){var d={};d[a.name]=b;return Object.toQueryString(d)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var d=a.tagName.toLowerCase();Form.Element.Serializers[d](a,b);return a},clear:function(a){$(a).value="";return a},present:function(a){return $(a).value!=""},activate:function(a){a=$(a);try{a.focus();
if(a.select&&(a.tagName.toLowerCase()!="input"||!/^(?:button|reset|submit)$/i.test(a.type)))a.select()}catch(b){}return a},disable:function(a){a=$(a);a.disabled=true;return a},enable:function(a){a=$(a);a.disabled=false;return a}};var Field=Form.Element,$F=Form.Element.Methods.getValue;
Form.Element.Serializers={input:function(a,b){switch(a.type.toLowerCase()){case "checkbox":case "radio":return Form.Element.Serializers.inputSelector(a,b);default:return Form.Element.Serializers.textarea(a,b)}},inputSelector:function(a,b){if(Object.isUndefined(b))return a.checked?a.value:null;else a.checked=!!b},textarea:function(a,b){if(Object.isUndefined(b))return a.value;else a.value=b},select:function(a,b){if(Object.isUndefined(b))return this[a.type=="select-one"?"selectOne":"selectMany"](a);
else for(var d,f,j=!Object.isArray(b),n=0,r=a.length;n<r;n++){d=a.options[n];f=this.optionValue(d);if(j){if(f==b){d.selected=true;return}}else d.selected=b.include(f)}},selectOne:function(a){var b=a.selectedIndex;return b>=0?this.optionValue(a.options[b]):null},selectMany:function(a){var b,d=a.length;if(!d)return null;var f=0;for(b=[];f<d;f++){var j=a.options[f];j.selected&&b.push(this.optionValue(j))}return b},optionValue:function(a){return Element.extend(a).hasAttribute("value")?a.value:a.text}};
Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,b,d,f){$super(f,d);this.element=$(b);this.lastValue=this.getValue()},execute:function(){var a=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a)){this.callback(this.element,a);this.lastValue=a}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});
Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});
Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a);this.callback=b;this.lastValue=this.getValue();this.element.tagName.toLowerCase()=="form"?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var a=this.getValue();if(this.lastValue!=a){this.callback(this.element,a);this.lastValue=a}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type)switch(a.type.toLowerCase()){case "checkbox":case "radio":Event.observe(a,
"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this));break}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});
(function(){function a(w){return p(w,0)}function b(w){return p(w,1)}function d(w){return p(w,2)}function f(w){w=D.extend(w);var K=w.target,U=w.type;if((w=w.currentTarget)&&w.tagName)if(U==="load"||U==="error"||U==="click"&&w.tagName.toLowerCase()==="input"&&w.type==="radio")K=w;if(K.nodeType==Node.TEXT_NODE)K=K.parentNode;return Element.extend(K)}function j(w,K){w=D.element(w);if(!K)return w;for(;w;){if(Object.isElement(w)&&Prototype.Selector.match(w,K))return Element.extend(w);w=w.parentNode}}function n(w){return{x:r(w),
y:x(w)}}function r(w){var K=document.documentElement,U=document.body||{scrollLeft:0};return w.pageX||w.clientX+(K.scrollLeft||U.scrollLeft)-(K.clientLeft||0)}function x(w){var K=document.documentElement,U=document.body||{scrollTop:0};return w.pageY||w.clientY+(K.scrollTop||U.scrollTop)-(K.clientTop||0)}function y(w){D.extend(w);w.preventDefault();w.stopPropagation();w.stopped=true}function O(w,K,U){var la=Element.retrieve(w,"prototype_event_registry");if(Object.isUndefined(la)){B.push(w);la=Element.retrieve(w,
"prototype_event_registry",$H())}var ra=la.get(K);if(Object.isUndefined(ra)){ra=[];la.set(K,ra)}if(ra.pluck("handler").include(U))return false;var X;if(K.include(":"))X=function(ga){if(Object.isUndefined(ga.eventName))return false;if(ga.eventName!==K)return false;D.extend(ga,w);U.call(w,ga)};else if(!k&&(K==="mouseenter"||K==="mouseleave")){if(K==="mouseenter"||K==="mouseleave")X=function(ga){D.extend(ga,w);for(var W=ga.relatedTarget;W&&W!==w;)try{W=W.parentNode}catch(ba){W=w}W!==w&&U.call(w,ga)}}else X=
function(ga){D.extend(ga,w);U.call(w,ga)};X.handler=U;ra.push(X);return X}function Y(){for(var w=0,K=B.length;w<K;w++){D.stopObserving(B[w]);B[w]=null}}function H(w,K,U){w=$(w);U=O(w,K,U);if(!U)return w;if(K.include(":"))if(w.addEventListener)w.addEventListener("dataavailable",U,false);else{w.attachEvent("ondataavailable",U);w.attachEvent("onlosecapture",U)}else{K=J(K);w.addEventListener?w.addEventListener(K,U,false):w.attachEvent("on"+K,U)}return w}function M(w,K,U){w=$(w);var la=Element.retrieve(w,
"prototype_event_registry");if(!la)return w;if(!K){la.each(function(W){M(w,W.key)});return w}var ra=la.get(K);if(!ra)return w;if(!U){ra.each(function(W){M(w,K,W.handler)});return w}var X=ra.find(function(W){return W.handler===U});if(!X)return w;if(K.include(":"))if(w.removeEventListener)w.removeEventListener("dataavailable",X,false);else{w.detachEvent("ondataavailable",X);w.detachEvent("onlosecapture",X)}else{var ga=J(K);w.removeEventListener?w.removeEventListener(ga,X,false):w.detachEvent("on"+ga,
X)}la.set(K,ra.without(X));return w}function da(w,K,U,la){w=$(w);if(Object.isUndefined(la))la=true;if(w==document&&document.createEvent&&!w.dispatchEvent)w=document.documentElement;var ra;if(document.createEvent){ra=document.createEvent("HTMLEvents");ra.initEvent("dataavailable",la,true)}else{ra=document.createEventObject();ra.eventType=la?"ondataavailable":"onlosecapture"}ra.eventName=K;ra.memo=U||{};document.createEvent?w.dispatchEvent(ra):w.fireEvent(ra.eventType,ra);return D.extend(ra)}function ka(w,
K,U,la){w=$(w);if(Object.isFunction(U)&&Object.isUndefined(la)){la=U;U=null}return(new D.Handler(w,K,U,la)).start()}var D={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{}},P=document.documentElement,k="onmouseenter"in P&&"onmouseleave"in P;P=window.attachEvent&&!window.addEventListener;var p;if(P){var t={0:1,1:4,2:2};p=function(w,K){return w.button===t[K]}}else p=
Prototype.Browser.WebKit?function(w,K){switch(K){case 0:return w.which==1&&!w.metaKey;case 1:return w.which==1&&w.metaKey;default:return false}}:function(w,K){return w.which?w.which===K+1:w.button===K};D.Methods={isLeftClick:a,isMiddleClick:b,isRightClick:d,element:f,findElement:j,pointer:n,pointerX:r,pointerY:x,stop:y};var z=Object.keys(D.Methods).inject({},function(w,K){w[K]=D.Methods[K].methodize();return w});if(P){var I=function(w){switch(w.type){case "mouseover":w=w.fromElement;break;case "mouseout":w=
w.toElement;break;default:return null}return Element.extend(w)};Object.extend(z,{stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},inspect:function(){return"[object Event]"}});D.extend=function(w,K){if(!w)return false;if(w._extendedByPrototype)return w;w._extendedByPrototype=Prototype.emptyFunction;var U=D.pointer(w);Object.extend(w,{target:w.srcElement||K,relatedTarget:I(w),pageX:U.x,pageY:U.y});return Object.extend(w,z)}}else{D.prototype=window.Event.prototype||
document.createEvent("HTMLEvents").__proto__;Object.extend(D.prototype,z);D.extend=Prototype.K}var B=[];Prototype.Browser.IE&&window.attachEvent("onunload",Y);Prototype.Browser.WebKit&&window.addEventListener("unload",Prototype.emptyFunction,false);var J=Prototype.K,Q={mouseenter:"mouseover",mouseleave:"mouseout"};k||(J=function(w){return Q[w]||w});D.Handler=Class.create({initialize:function(w,K,U,la){this.element=$(w);this.eventName=K;this.selector=U;this.callback=la;this.handler=this.handleEvent.bind(this)},
start:function(){D.observe(this.element,this.eventName,this.handler);return this},stop:function(){D.stopObserving(this.element,this.eventName,this.handler);return this},handleEvent:function(w){var K=w.findElement(this.selector);K&&this.callback.call(this.element,w,K)}});Object.extend(D,D.Methods);Object.extend(D,{fire:da,observe:H,stopObserving:M,on:ka});Element.addMethods({fire:da,observe:H,stopObserving:M,on:ka});Object.extend(document,{fire:da.methodize(),observe:H.methodize(),stopObserving:M.methodize(),
on:ka.methodize(),loaded:false});if(window.Event)Object.extend(window.Event,D);else window.Event=D})();
(function(){function a(){if(!document.loaded){f&&window.clearTimeout(f);document.loaded=true;document.fire("dom:loaded")}}function b(){if(document.readyState==="complete"){document.stopObserving("readystatechange",b);a()}}function d(){try{document.documentElement.doScroll("left")}catch(j){f=d.defer();return}a()}var f;if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,false);else{document.observe("readystatechange",b);if(window==top)f=d.defer()}Event.observe(window,"load",
a)})();Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;
var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}},$continue=new Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||
document.documentElement.scrollTop||document.body.scrollTop||0},within:function(a,b,d){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(a,b,d);this.xcomp=b;this.ycomp=d;this.offset=Element.cumulativeOffset(a);return d>=this.offset[1]&&d<this.offset[1]+a.offsetHeight&&b>=this.offset[0]&&b<this.offset[0]+a.offsetWidth},withinIncludingScrolloffsets:function(a,b,d){var f=Element.cumulativeScrollOffset(a);this.xcomp=b+f[0]-this.deltaX;this.ycomp=d+f[1]-this.deltaY;this.offset=Element.cumulativeOffset(a);
return this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+a.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+a.offsetWidth},overlap:function(a,b){if(!a)return 0;if(a=="vertical")return(this.offset[1]+b.offsetHeight-this.ycomp)/b.offsetHeight;if(a=="horizontal")return(this.offset[0]+b.offsetWidth-this.xcomp)/b.offsetWidth},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){Position.prepare();return Element.absolutize(a)},
relativize:function(a){Position.prepare();return Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(a,b,d){d=d||{};return Element.clonePosition(b,a,d)}};
if(!document.getElementsByClassName)document.getElementsByClassName=function(a){function b(d){return d.blank()?null:"[contains(concat(' ', @class, ' '), ' "+d+" ')]"}a.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(d,f){f=f.toString().strip();return(f=/\s/.test(f)?$w(f).map(b).join(""):b(f))?document._getElementsByXPath(".//*"+f,d):[]}:function(d,f){f=f.toString().strip();var j=[],n=/\s/.test(f)?$w(f):null;if(!n&&!f)return j;d=$(d).getElementsByTagName("*");f=" "+f+" ";for(var r=
0,x,y;x=d[r];r++)if(x.className&&(y=" "+x.className+" ")&&(y.include(f)||n&&n.all(function(O){return!O.toString().blank()&&y.include(" "+O+" ")})))j.push(Element.extend(x));return j};return function(d,f){return $(f||document.body).getElementsByClassName(d)}}(Element.Methods);Element.ClassNames=Class.create();
Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(a){this.element.className.split(/\s+/).select(function(b){return b.length>0})._each(a)},set:function(a){this.element.className=a},add:function(a){this.include(a)||this.set($A(this).concat(a).join(" "))},remove:function(a){this.include(a)&&this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);
(function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}});Object.extend(Selector,{matchElements:function(a,b){for(var d=Prototype.Selector.match,f=[],j=0,n=a.length;j<n;j++){var r=a[j];d(r,b)&&f.push(Element.extend(r))}return f},
findElement:function(a,b,d){d=d||0;for(var f=0,j,n=0,r=a.length;n<r;n++){j=a[n];if(Prototype.Selector.match(j,b)&&d===f++)return Element.extend(j)}},findChildElements:function(a,b){b=b.toArray().join(", ");return Prototype.Selector.select(b,a||document)}})})();(function(a,b){function d(c){var e=c.length,h=g.type(c);if(g.isWindow(c))return false;if(c.nodeType===1&&e)return true;return h==="array"||h!=="function"&&(e===0||typeof e==="number"&&e>0&&e-1 in c)}function f(c){var e=ic[c]={};g.each(c.match(Za)||[],function(h,l){e[l]=true});return e}function j(c,e,h,l){if(g.acceptData(c)){var m=g.expando,o=typeof e==="string",q=c.nodeType,u=q?g.cache:c,C=q?c[m]:c[m]&&m;if(!((!C||!u[C]||!l&&!u[C].data)&&o&&h===b)){if(!C)if(q)c[m]=C=Ra.pop()||g.guid++;else C=m;if(!u[C]){u[C]=
{};if(!q)u[C].toJSON=g.noop}if(typeof e==="object"||typeof e==="function")if(l)u[C]=g.extend(u[C],e);else u[C].data=g.extend(u[C].data,e);c=u[C];if(!l){if(!c.data)c.data={};c=c.data}if(h!==b)c[g.camelCase(e)]=h;if(o){h=c[e];if(h==null)h=c[g.camelCase(e)]}else h=c;return h}}}function n(c,e,h){if(g.acceptData(c)){var l,m,o,q=c.nodeType,u=q?g.cache:c,C=q?c[g.expando]:g.expando;if(u[C]){if(e)if(o=h?u[C]:u[C].data){if(g.isArray(e))e=e.concat(g.map(e,g.camelCase));else if(e in o)e=[e];else{e=g.camelCase(e);
e=e in o?[e]:e.split(" ")}l=0;for(m=e.length;l<m;l++)delete o[e[l]];if(!(h?x:g.isEmptyObject)(o))return}if(!h){delete u[C].data;if(!x(u[C]))return}if(q)g.cleanData([c],true);else if(g.support.deleteExpando||u!=u.window)delete u[C];else u[C]=null}}}function r(c,e,h){if(h===b&&c.nodeType===1){h="data-"+e.replace(Oc,"-$1").toLowerCase();h=c.getAttribute(h);if(typeof h==="string"){try{h=h==="true"?true:h==="false"?false:h==="null"?null:+h+""===h?+h:Pc.test(h)?g.parseJSON(h):h}catch(l){}g.data(c,e,h)}else h=
b}return h}function x(c){var e;for(e in c)if(!(e==="data"&&g.isEmptyObject(c[e])))if(e!=="toJSON")return false;return true}function y(){return true}function O(){return false}function Y(c,e){do c=c[e];while(c&&c.nodeType!==1);return c}function H(c,e,h){e=e||0;if(g.isFunction(e))return g.grep(c,function(m,o){return!!e.call(m,o,m)===h});else if(e.nodeType)return g.grep(c,function(m){return m===e===h});else if(typeof e==="string"){var l=g.grep(c,function(m){return m.nodeType===1});if(Qc.test(e))return g.filter(e,
l,!h);else e=g.filter(e,l)}return g.grep(c,function(m){return g.inArray(m,e)>=0===h})}function M(c){var e=jc.split("|");c=c.createDocumentFragment();if(c.createElement)for(;e.length;)c.createElement(e.pop());return c}function da(c,e){return c.getElementsByTagName(e)[0]||c.appendChild(c.ownerDocument.createElement(e))}function ka(c){var e=c.getAttributeNode("type");c.type=(e&&e.specified)+"/"+c.type;return c}function D(c){var e=Rc.exec(c.type);if(e)c.type=e[1];else c.removeAttribute("type");return c}
function P(c,e){for(var h,l=0;(h=c[l])!=null;l++)g._data(h,"globalEval",!e||g._data(e[l],"globalEval"))}function k(c,e){if(!(e.nodeType!==1||!g.hasData(c))){var h,l,m;l=g._data(c);c=g._data(e,l);var o=l.events;if(o){delete c.handle;c.events={};for(h in o){l=0;for(m=o[h].length;l<m;l++)g.event.add(e,h,o[h][l])}}if(c.data)c.data=g.extend({},c.data)}}function p(c,e){var h,l,m;if(e.nodeType===1){h=e.nodeName.toLowerCase();if(!g.support.noCloneEvent&&e[g.expando]){m=g._data(e);for(l in m.events)g.removeEvent(e,
l,m.handle);e.removeAttribute(g.expando)}if(h==="script"&&e.text!==c.text){ka(e).text=c.text;D(e)}else if(h==="object"){if(e.parentNode)e.outerHTML=c.outerHTML;if(g.support.html5Clone&&c.innerHTML&&!g.trim(e.innerHTML))e.innerHTML=c.innerHTML}else if(h==="input"&&Rb.test(c.type)){e.defaultChecked=e.checked=c.checked;if(e.value!==c.value)e.value=c.value}else if(h==="option")e.defaultSelected=e.selected=c.defaultSelected;else if(h==="input"||h==="textarea")e.defaultValue=c.defaultValue}}function t(c,
e){var h,l,m=0,o=typeof c.getElementsByTagName!==ea?c.getElementsByTagName(e||"*"):typeof c.querySelectorAll!==ea?c.querySelectorAll(e||"*"):b;if(!o){o=[];for(h=c.childNodes||c;(l=h[m])!=null;m++)!e||g.nodeName(l,e)?o.push(l):g.merge(o,t(l,e))}return e===b||e&&g.nodeName(c,e)?g.merge([c],o):o}function z(c){if(Rb.test(c.type))c.defaultChecked=c.checked}function I(c,e){if(e in c)return e;for(var h=e.charAt(0).toUpperCase()+e.slice(1),l=e,m=kc.length;m--;){e=kc[m]+h;if(e in c)return e}return l}function B(c,
e){c=e||c;return g.css(c,"display")==="none"||!g.contains(c.ownerDocument,c)}function J(c,e){for(var h,l,m,o=[],q=0,u=c.length;q<u;q++){l=c[q];if(l.style){o[q]=g._data(l,"olddisplay");h=l.style.display;if(e){if(!o[q]&&h==="none")l.style.display="";if(l.style.display===""&&B(l))o[q]=g._data(l,"olddisplay",U(l.nodeName))}else if(!o[q]){m=B(l);if(h&&h!=="none"||!m)g._data(l,"olddisplay",m?h:g.css(l,"display"))}}}for(q=0;q<u;q++){l=c[q];if(l.style)if(!e||l.style.display==="none"||l.style.display==="")l.style.display=
e?o[q]||"":"none"}return c}function Q(c,e,h){return(c=Sc.exec(e))?Math.max(0,c[1]-(h||0))+(c[2]||"px"):e}function w(c,e,h,l,m){e=h===(l?"border":"content")?4:e==="width"?1:0;for(var o=0;e<4;e+=2){if(h==="margin")o+=g.css(c,h+hb[e],true,m);if(l){if(h==="content")o-=g.css(c,"padding"+hb[e],true,m);if(h!=="margin")o-=g.css(c,"border"+hb[e]+"Width",true,m)}else{o+=g.css(c,"padding"+hb[e],true,m);if(h!=="padding")o+=g.css(c,"border"+hb[e]+"Width",true,m)}}return o}function K(c,e,h){var l=true,m=e==="width"?
c.offsetWidth:c.offsetHeight,o=ib(c),q=g.support.boxSizing&&g.css(c,"boxSizing",false,o)==="border-box";if(m<=0||m==null){m=jb(c,e,o);if(m<0||m==null)m=c.style[e];if(Jb.test(m))return m;l=q&&(g.support.boxSizingReliable||m===c.style[e]);m=parseFloat(m)||0}return m+w(c,e,h||(q?"border":"content"),l,o)+"px"}function U(c){var e=R,h=lc[c];if(!h){h=la(c,e);if(h==="none"||!h){Db=(Db||g("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement);
e=(Db[0].contentWindow||Db[0].contentDocument).document;e.write("<!doctype html><html><body>");e.close();h=la(c,e);Db.detach()}lc[c]=h}return h}function la(c,e){c=g(e.createElement(c)).appendTo(e.body);e=g.css(c[0],"display");c.remove();return e}function ra(c,e,h,l){var m;if(g.isArray(e))g.each(e,function(o,q){h||Tc.test(c)?l(c,q):ra(c+"["+(typeof q==="object"?o:"")+"]",q,h,l)});else if(!h&&g.type(e)==="object")for(m in e)ra(c+"["+m+"]",e[m],h,l);else l(c,e)}function X(c){return function(e,h){if(typeof e!==
"string"){h=e;e="*"}var l=0,m=e.toLowerCase().match(Za)||[];if(g.isFunction(h))for(;e=m[l++];)if(e[0]==="+"){e=e.slice(1)||"*";(c[e]=c[e]||[]).unshift(h)}else(c[e]=c[e]||[]).push(h)}}function ga(c,e,h,l){function m(u){var C;o[u]=true;g.each(c[u]||[],function(N,F){N=F(e,h,l);if(typeof N==="string"&&!q&&!o[N]){e.dataTypes.unshift(N);m(N);return false}else if(q)return!(C=N)});return C}var o={},q=c===Sb;return m(e.dataTypes[0])||!o["*"]&&m("*")}function W(c,e){var h,l,m=g.ajaxSettings.flatOptions||{};
for(l in e)if(e[l]!==b)(m[l]?c:h||(h={}))[l]=e[l];h&&g.extend(true,c,h);return c}function ba(c,e,h){var l,m,o,q,u=c.contents,C=c.dataTypes,N=c.responseFields;for(q in N)if(q in h)e[N[q]]=h[q];for(;C[0]==="*";){C.shift();if(m===b)m=c.mimeType||e.getResponseHeader("Content-Type")}if(m)for(q in u)if(u[q]&&u[q].test(m)){C.unshift(q);break}if(C[0]in h)o=C[0];else{for(q in h){if(!C[0]||c.converters[q+" "+C[0]]){o=q;break}l||(l=q)}o=o||l}if(o){o!==C[0]&&C.unshift(o);return h[o]}}function oa(c,e){var h,l,
m,o,q={},u=0,C=c.dataTypes.slice(),N=C[0];if(c.dataFilter)e=c.dataFilter(e,c.dataType);if(C[1])for(m in c.converters)q[m.toLowerCase()]=c.converters[m];for(;l=C[++u];)if(l!=="*"){if(N!=="*"&&N!==l){m=q[N+" "+l]||q["* "+l];if(!m)for(h in q){o=h.split(" ");if(o[1]===l)if(m=q[N+" "+o[0]]||q["* "+o[0]]){if(m===true)m=q[h];else if(q[h]!==true){l=o[0];C.splice(u--,0,l)}break}}if(m!==true)if(m&&c["throws"])e=m(e);else try{e=m(e)}catch(F){return{state:"parsererror",error:m?F:"No conversion from "+N+" to "+
l}}}N=l}return{state:"success",data:e}}function qa(){try{return new a.XMLHttpRequest}catch(c){}}function za(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}function cb(){setTimeout(function(){ub=b});return ub=g.now()}function $a(c,e){g.each(e,function(h,l){for(var m=(Eb[h]||[]).concat(Eb["*"]),o=0,q=m.length;o<q;o++)if(m[o].call(c,h,l))return})}function kb(c,e,h){var l,m=0,o=Kb.length,q=g.Deferred().always(function(){delete u.elem}),u=function(){if(l)return false;var N=ub||cb();N=
Math.max(0,C.startTime+C.duration-N);for(var F=1-(N/C.duration||0),V=0,fa=C.tweens.length;V<fa;V++)C.tweens[V].run(F);q.notifyWith(c,[C,F,N]);if(F<1&&fa)return N;else{q.resolveWith(c,[C]);return false}},C=q.promise({elem:c,props:g.extend({},e),opts:g.extend(true,{specialEasing:{}},h),originalProperties:e,originalOptions:h,startTime:ub||cb(),duration:h.duration,tweens:[],createTween:function(N,F){N=g.Tween(c,C.opts,N,F,C.opts.specialEasing[N]||C.opts.easing);C.tweens.push(N);return N},stop:function(N){var F=
0,V=N?C.tweens.length:0;if(l)return this;for(l=true;F<V;F++)C.tweens[F].run(1);N?q.resolveWith(c,[C,N]):q.rejectWith(c,[C,N]);return this}});h=C.props;for(Wa(h,C.opts.specialEasing);m<o;m++)if(e=Kb[m].call(C,c,h,C.opts))return e;$a(C,h);g.isFunction(C.opts.start)&&C.opts.start.call(c,C);g.fx.timer(g.extend(u,{elem:c,anim:C,queue:C.opts.queue}));return C.progress(C.opts.progress).done(C.opts.done,C.opts.complete).fail(C.opts.fail).always(C.opts.always)}function Wa(c,e){var h,l,m,o,q;for(m in c){l=
g.camelCase(m);o=e[l];h=c[m];if(g.isArray(h)){o=h[1];h=c[m]=h[0]}if(m!==l){c[l]=h;delete c[m]}if((q=g.cssHooks[l])&&"expand"in q){h=q.expand(h);delete c[l];for(m in h)if(!(m in c)){c[m]=h[m];e[m]=o}}else e[l]=o}}function Fb(c,e,h){var l,m,o,q,u,C,N=this,F=c.style,V={},fa=[],ja=c.nodeType&&B(c);if(!h.queue){u=g._queueHooks(c,"fx");if(u.unqueued==null){u.unqueued=0;C=u.empty.fire;u.empty.fire=function(){u.unqueued||C()}}u.unqueued++;N.always(function(){N.always(function(){u.unqueued--;g.queue(c,"fx").length||
u.empty.fire()})})}if(c.nodeType===1&&("height"in e||"width"in e)){h.overflow=[F.overflow,F.overflowX,F.overflowY];if(g.css(c,"display")==="inline"&&g.css(c,"float")==="none")if(!g.support.inlineBlockNeedsLayout||U(c.nodeName)==="inline")F.display="inline-block";else F.zoom=1}if(h.overflow){F.overflow="hidden";g.support.shrinkWrapBlocks||N.always(function(){F.overflow=h.overflow[0];F.overflowX=h.overflow[1];F.overflowY=h.overflow[2]})}for(m in e){o=e[m];if(Uc.exec(o)){delete e[m];l=l||o==="toggle";
if(o!==(ja?"hide":"show"))fa.push(m)}}if(e=fa.length){o=g._data(c,"fxshow")||g._data(c,"fxshow",{});if("hidden"in o)ja=o.hidden;if(l)o.hidden=!ja;ja?g(c).show():N.done(function(){g(c).hide()});N.done(function(){var Aa;g._removeData(c,"fxshow");for(Aa in V)g.style(c,Aa,V[Aa])});for(m=0;m<e;m++){l=fa[m];q=N.createTween(l,ja?o[l]:0);V[l]=o[l]||g.style(c,l);if(!(l in o)){o[l]=q.start;if(ja){q.end=q.start;q.start=l==="width"||l==="height"?1:0}}}}}function Ja(c,e,h,l,m){return new Ja.prototype.init(c,e,
h,l,m)}function ia(c,e){var h,l={height:c},m=0;for(e=e?1:0;m<4;m+=2-e){h=hb[m];l["margin"+h]=l["padding"+h]=c}if(e)l.opacity=l.width=c;return l}function G(c){return g.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var L,Z,ea=typeof b,R=a.document,pa=a.location,sa=a.jQuery,Ca=a.$,Da={},Ra=[],lb=Ra.concat,Sa=Ra.push,Ka=Ra.slice,mb=Ra.indexOf,vb=Da.toString,Gb=Da.hasOwnProperty,Tb="1.9.1".trim,g=function(c,e){return new g.fn.init(c,e,Z)},Lb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
Za=/\S+/g,Vc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Wc=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,mc=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Xc=/^[\],:{}\s]*$/,Yc=/(?:^|:|,)(?:\s*\[)+/g,Zc=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,$c=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ad=/^-ms-/,bd=/-([\da-z])/gi,cd=function(c,e){return e.toUpperCase()},db=function(c){if(R.addEventListener||c.type==="load"||R.readyState==="complete"){nc();g.ready()}},nc=function(){if(R.addEventListener){R.removeEventListener("DOMContentLoaded",
db,false);a.removeEventListener("load",db,false)}else{R.detachEvent("onreadystatechange",db);a.detachEvent("onload",db)}};g.fn=g.prototype={jquery:"1.9.1",constructor:g,init:function(c,e,h){var l;if(!c)return this;if(typeof c==="string")if((l=c.charAt(0)==="<"&&c.charAt(c.length-1)===">"&&c.length>=3?[null,c,null]:Wc.exec(c))&&(l[1]||!e)){if(l[1]){e=e instanceof g?e[0]:e;g.merge(this,g.parseHTML(l[1],e&&e.nodeType?e.ownerDocument||e:R,true));if(mc.test(l[1])&&g.isPlainObject(e))for(l in e)g.isFunction(this[l])?
this[l](e[l]):this.attr(l,e[l])}else{if((e=R.getElementById(l[2]))&&e.parentNode){if(e.id!==l[2])return h.find(c);this.length=1;this[0]=e}this.context=R;this.selector=c}return this}else return!e||e.jquery?(e||h).find(c):this.constructor(e).find(c);else if(c.nodeType){this.context=this[0]=c;this.length=1;return this}else if(g.isFunction(c))return h.ready(c);if(c.selector!==b){this.selector=c.selector;this.context=c.context}return g.makeArray(c,this)},selector:"",length:0,size:function(){return this.length},
toArray:function(){return Ka.call(this)},get:function(c){return c==null?this.toArray():c<0?this[this.length+c]:this[c]},pushStack:function(c){c=g.merge(this.constructor(),c);c.prevObject=this;c.context=this.context;return c},each:function(c,e){return g.each(this,c,e)},ready:function(c){g.ready.promise().done(c);return this},slice:function(){return this.pushStack(Ka.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(c){var e=this.length;c=+c+
(c<0?e:0);return this.pushStack(c>=0&&c<e?[this[c]]:[])},map:function(c){return this.pushStack(g.map(this,function(e,h){return c.call(e,h,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:Sa,sort:[].sort,splice:[].splice};g.fn.init.prototype=g.fn;g.extend=g.fn.extend=function(){var c,e,h,l,m,o=arguments[0]||{},q=1,u=arguments.length,C=false;if(typeof o==="boolean"){C=o;o=arguments[1]||{};q=2}if(typeof o!=="object"&&!g.isFunction(o))o={};if(u===q){o=this;--q}for(;q<u;q++)if((m=
arguments[q])!=null)for(l in m){c=o[l];h=m[l];if(o!==h)if(C&&h&&(g.isPlainObject(h)||(e=g.isArray(h)))){if(e){e=false;c=c&&g.isArray(c)?c:[]}else c=c&&g.isPlainObject(c)?c:{};o[l]=g.extend(C,c,h)}else if(h!==b)o[l]=h}return o};g.extend({noConflict:function(c){if(a.$===g)a.$=Ca;if(c&&a.jQuery===g)a.jQuery=sa;return g},isReady:false,readyWait:1,holdReady:function(c){if(c)g.readyWait++;else g.ready(true)},ready:function(c){if(!(c===true?--g.readyWait:g.isReady)){if(!R.body)return setTimeout(g.ready);
g.isReady=true;if(!(c!==true&&--g.readyWait>0)){L.resolveWith(R,[g]);g.fn.trigger&&g(R).trigger("ready").off("ready")}}},isFunction:function(c){return g.type(c)==="function"},isArray:Array.isArray||function(c){return g.type(c)==="array"},isWindow:function(c){return c!=null&&c==c.window},isNumeric:function(c){return!isNaN(parseFloat(c))&&isFinite(c)},type:function(c){if(c==null)return String(c);return typeof c==="object"||typeof c==="function"?Da[vb.call(c)]||"object":typeof c},isPlainObject:function(c){if(!c||
g.type(c)!=="object"||c.nodeType||g.isWindow(c))return false;try{if(c.constructor&&!Gb.call(c,"constructor")&&!Gb.call(c.constructor.prototype,"isPrototypeOf"))return false}catch(e){return false}var h;for(h in c);return h===b||Gb.call(c,h)},isEmptyObject:function(c){var e;for(e in c)return false;return true},error:function(c){throw new Error(c);},parseHTML:function(c,e,h){if(!c||typeof c!=="string")return null;if(typeof e==="boolean"){h=e;e=false}e=e||R;var l=mc.exec(c);h=!h&&[];if(l)return[e.createElement(l[1])];
l=g.buildFragment([c],e,h);h&&g(h).remove();return g.merge([],l.childNodes)},parseJSON:function(c){if(a.JSON&&a.JSON.parse)return a.JSON.parse(c);if(c===null)return c;if(typeof c==="string")if(c=g.trim(c))if(Xc.test(c.replace(Zc,"@").replace($c,"]").replace(Yc,"")))return(new Function("return "+c))();g.error("Invalid JSON: "+c)},parseXML:function(c){var e,h;if(!c||typeof c!=="string")return null;try{if(a.DOMParser){h=new DOMParser;e=h.parseFromString(c,"text/xml")}else{e=new ActiveXObject("Microsoft.XMLDOM");
e.async="false";e.loadXML(c)}}catch(l){e=b}if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)g.error("Invalid XML: "+c);return e},noop:function(){},globalEval:function(c){if(c&&g.trim(c))(a.execScript||function(e){a.eval.call(a,e)})(c)},camelCase:function(c){return c.replace(ad,"ms-").replace(bd,cd)},nodeName:function(c,e){return c.nodeName&&c.nodeName.toLowerCase()===e.toLowerCase()},each:function(c,e,h){var l,m=0,o=c.length;l=d(c);if(h)if(l)for(;m<o;m++){l=e.apply(c[m],h);
if(l===false)break}else for(m in c){l=e.apply(c[m],h);if(l===false)break}else if(l)for(;m<o;m++){l=e.call(c[m],m,c[m]);if(l===false)break}else for(m in c){l=e.call(c[m],m,c[m]);if(l===false)break}return c},trim:Tb&&!Tb.call("\ufeff\u00a0")?function(c){return c==null?"":Tb.call(c)}:function(c){return c==null?"":(c+"").replace(Vc,"")},makeArray:function(c,e){e=e||[];if(c!=null)d(Object(c))?g.merge(e,typeof c==="string"?[c]:c):Sa.call(e,c);return e},inArray:function(c,e,h){var l;if(e){if(mb)return mb.call(e,
c,h);l=e.length;for(h=h?h<0?Math.max(0,l+h):h:0;h<l;h++)if(h in e&&e[h]===c)return h}return-1},merge:function(c,e){var h=e.length,l=c.length,m=0;if(typeof h==="number")for(;m<h;m++)c[l++]=e[m];else for(;e[m]!==b;)c[l++]=e[m++];c.length=l;return c},grep:function(c,e,h){var l,m=[],o=0,q=c.length;for(h=!!h;o<q;o++){l=!!e(c[o],o);h!==l&&m.push(c[o])}return m},map:function(c,e,h){var l,m=0,o=c.length,q=[];if(d(c))for(;m<o;m++){l=e(c[m],m,h);if(l!=null)q[q.length]=l}else for(m in c){l=e(c[m],m,h);if(l!=
null)q[q.length]=l}return lb.apply([],q)},guid:1,proxy:function(c,e){var h,l;if(typeof e==="string"){l=c[e];e=c;c=l}if(!g.isFunction(c))return b;h=Ka.call(arguments,2);l=function(){return c.apply(e||this,h.concat(Ka.call(arguments)))};l.guid=c.guid=c.guid||g.guid++;return l},access:function(c,e,h,l,m,o,q){var u=0,C=c.length,N=h==null;if(g.type(h)==="object"){m=true;for(u in h)g.access(c,e,u,h[u],true,o,q)}else if(l!==b){m=true;g.isFunction(l)||(q=true);if(N)if(q){e.call(c,l);e=null}else{N=e;e=function(F,
V,fa){return N.call(g(F),fa)}}if(e)for(;u<C;u++)e(c[u],h,q?l:l.call(c[u],u,e(c[u],h)))}return m?c:N?e.call(c):C?e(c[0],h):o},now:function(){return(new Date).getTime()}});g.ready.promise=function(c){if(!L){L=g.Deferred();if(R.readyState==="complete")setTimeout(g.ready);else if(R.addEventListener){R.addEventListener("DOMContentLoaded",db,false);a.addEventListener("load",db,false)}else{R.attachEvent("onreadystatechange",db);a.attachEvent("onload",db);var e=false;try{e=a.frameElement==null&&R.documentElement}catch(h){}e&&
e.doScroll&&function l(){if(!g.isReady){try{e.doScroll("left")}catch(m){return setTimeout(l,50)}nc();g.ready()}}()}}return L.promise(c)};g.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(c,e){Da["[object "+e+"]"]=e.toLowerCase()});Z=g(R);var ic={};g.Callbacks=function(c){c=typeof c==="string"?ic[c]||f(c):g.extend({},c);var e,h,l,m,o,q,u=[],C=!c.once&&[],N=function(V){h=c.memory&&V;l=true;o=q||0;q=0;m=u.length;for(e=true;u&&o<m;o++)if(u[o].apply(V[0],V[1])===
false&&c.stopOnFalse){h=false;break}e=false;if(u)if(C)C.length&&N(C.shift());else if(h)u=[];else F.disable()},F={add:function(){if(u){var V=u.length;(function fa(ja){g.each(ja,function(Aa,Ga){Aa=g.type(Ga);if(Aa==="function"){if(!c.unique||!F.has(Ga))u.push(Ga)}else Ga&&Ga.length&&Aa!=="string"&&fa(Ga)})})(arguments);if(e)m=u.length;else if(h){q=V;N(h)}}return this},remove:function(){u&&g.each(arguments,function(V,fa){for(var ja;(ja=g.inArray(fa,u,ja))>-1;){u.splice(ja,1);if(e){ja<=m&&m--;ja<=o&&
o--}}});return this},has:function(V){return V?g.inArray(V,u)>-1:!!(u&&u.length)},empty:function(){u=[];return this},disable:function(){u=C=h=b;return this},disabled:function(){return!u},lock:function(){C=b;h||F.disable();return this},locked:function(){return!C},fireWith:function(V,fa){fa=fa||[];fa=[V,fa.slice?fa.slice():fa];if(u&&(!l||C))e?C.push(fa):N(fa);return this},fire:function(){F.fireWith(this,arguments);return this},fired:function(){return!!l}};return F};g.extend({Deferred:function(c){var e=
[["resolve","done",g.Callbacks("once memory"),"resolved"],["reject","fail",g.Callbacks("once memory"),"rejected"],["notify","progress",g.Callbacks("memory")]],h="pending",l={state:function(){return h},always:function(){m.done(arguments).fail(arguments);return this},then:function(){var o=arguments;return g.Deferred(function(q){g.each(e,function(u,C){var N=C[0],F=g.isFunction(o[u])&&o[u];m[C[1]](function(){var V=F&&F.apply(this,arguments);V&&g.isFunction(V.promise)?V.promise().done(q.resolve).fail(q.reject).progress(q.notify):
q[N+"With"](this===l?q.promise():this,F?[V]:arguments)})});o=null}).promise()},promise:function(o){return o!=null?g.extend(o,l):l}},m={};l.pipe=l.then;g.each(e,function(o,q){var u=q[2],C=q[3];l[q[1]]=u.add;C&&u.add(function(){h=C},e[o^1][2].disable,e[2][2].lock);m[q[0]]=function(){m[q[0]+"With"](this===m?l:this,arguments);return this};m[q[0]+"With"]=u.fireWith});l.promise(m);c&&c.call(m,m);return m},when:function(c){var e=0,h=Ka.call(arguments),l=h.length,m=l!==1||c&&g.isFunction(c.promise)?l:0,o=
m===1?c:g.Deferred(),q=function(F,V,fa){return function(ja){V[F]=this;fa[F]=arguments.length>1?Ka.call(arguments):ja;if(fa===u)o.notifyWith(V,fa);else--m||o.resolveWith(V,fa)}},u,C,N;if(l>1){u=new Array(l);C=new Array(l);for(N=new Array(l);e<l;e++)if(h[e]&&g.isFunction(h[e].promise))h[e].promise().done(q(e,N,h)).fail(o.reject).progress(q(e,C,u));else--m}m||o.resolveWith(N,h);return o.promise()}});g.support=function(){var c,e,h,l,m,o,q,u=R.createElement("div");u.setAttribute("className","t");u.innerHTML=
"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";e=u.getElementsByTagName("*");h=u.getElementsByTagName("a")[0];if(!e||!h||!e.length)return{};l=R.createElement("select");m=l.appendChild(R.createElement("option"));e=u.getElementsByTagName("input")[0];h.style.cssText="top:1px;float:left;opacity:.5";c={getSetAttribute:u.className!=="t",leadingWhitespace:u.firstChild.nodeType===3,tbody:!u.getElementsByTagName("tbody").length,htmlSerialize:!!u.getElementsByTagName("link").length,style:/top/.test(h.getAttribute("style")),
hrefNormalized:h.getAttribute("href")==="/a",opacity:/^0.5/.test(h.style.opacity),cssFloat:!!h.style.cssFloat,checkOn:!!e.value,optSelected:m.selected,enctype:!!R.createElement("form").enctype,html5Clone:R.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:R.compatMode==="CSS1Compat",deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};e.checked=true;c.noCloneChecked=e.cloneNode(true).checked;
l.disabled=true;c.optDisabled=!m.disabled;try{delete u.test}catch(C){c.deleteExpando=false}e=R.createElement("input");e.setAttribute("value","");c.input=e.getAttribute("value")==="";e.value="t";e.setAttribute("type","radio");c.radioValue=e.value==="t";e.setAttribute("checked","t");e.setAttribute("name","t");h=R.createDocumentFragment();h.appendChild(e);c.appendChecked=e.checked;c.checkClone=h.cloneNode(true).cloneNode(true).lastChild.checked;if(u.attachEvent){u.attachEvent("onclick",function(){c.noCloneEvent=
false});u.cloneNode(true).click()}for(q in{submit:true,change:true,focusin:true}){u.setAttribute(h="on"+q,"t");c[q+"Bubbles"]=h in a||u.attributes[h].expando===false}u.style.backgroundClip="content-box";u.cloneNode(true).style.backgroundClip="";c.clearCloneStyle=u.style.backgroundClip==="content-box";g(function(){var N,F,V=R.getElementsByTagName("body")[0];if(V){N=R.createElement("div");N.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";V.appendChild(N).appendChild(u);
u.innerHTML="<table><tr><td></td><td>t</td></tr></table>";F=u.getElementsByTagName("td");F[0].style.cssText="padding:0;margin:0;border:0;display:none";o=F[0].offsetHeight===0;F[0].style.display="";F[1].style.display="none";c.reliableHiddenOffsets=o&&F[0].offsetHeight===0;u.innerHTML="";u.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";c.boxSizing=u.offsetWidth===4;
c.doesNotIncludeMarginInBodyOffset=V.offsetTop!==1;if(a.getComputedStyle){c.pixelPosition=(a.getComputedStyle(u,null)||{}).top!=="1%";c.boxSizingReliable=(a.getComputedStyle(u,null)||{width:"4px"}).width==="4px";F=u.appendChild(R.createElement("div"));F.style.cssText=u.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;";F.style.marginRight=F.style.width="0";u.style.width="1px";c.reliableMarginRight=!parseFloat((a.getComputedStyle(F,
null)||{}).marginRight)}if(typeof u.style.zoom!==ea){u.innerHTML="";u.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1";c.inlineBlockNeedsLayout=u.offsetWidth===3;u.style.display="block";u.innerHTML="<div></div>";u.firstChild.style.width="5px";c.shrinkWrapBlocks=u.offsetWidth!==3;if(c.inlineBlockNeedsLayout)V.style.zoom=1}V.removeChild(N);u=null}});e=l=h=m=h=e=null;
return c}();var Pc=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Oc=/([A-Z])/g;g.extend({cache:{},expando:"jQuery"+("1.9.1"+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(c){c=c.nodeType?g.cache[c[g.expando]]:c[g.expando];return!!c&&!x(c)},data:function(c,e,h){return j(c,e,h)},removeData:function(c,e){return n(c,e)},_data:function(c,e,h){return j(c,e,h,true)},_removeData:function(c,e){return n(c,e,true)},acceptData:function(c){if(c.nodeType&&
c.nodeType!==1&&c.nodeType!==9)return false;var e=c.nodeName&&g.noData[c.nodeName.toLowerCase()];return!e||e!==true&&c.getAttribute("classid")===e}});g.fn.extend({data:function(c,e){var h,l,m=this[0],o=0,q=null;if(c===b){if(this.length){q=g.data(m);if(m.nodeType===1&&!g._data(m,"parsedAttrs")){for(h=m.attributes;o<h.length;o++){l=h[o].name;if(!l.indexOf("data-")){l=g.camelCase(l.slice(5));r(m,l,q[l])}}g._data(m,"parsedAttrs",true)}}return q}if(typeof c==="object")return this.each(function(){g.data(this,
c)});return g.access(this,function(u){if(u===b)return m?r(m,c,g.data(m,c)):null;this.each(function(){g.data(this,c,u)})},null,e,arguments.length>1,null,true)},removeData:function(c){return this.each(function(){g.removeData(this,c)})}});g.extend({queue:function(c,e,h){var l;if(c){e=(e||"fx")+"queue";l=g._data(c,e);if(h)if(!l||g.isArray(h))l=g._data(c,e,g.makeArray(h));else l.push(h);return l||[]}},dequeue:function(c,e){e=e||"fx";var h=g.queue(c,e),l=h.length,m=h.shift(),o=g._queueHooks(c,e),q=function(){g.dequeue(c,
e)};if(m==="inprogress"){m=h.shift();l--}if(o.cur=m){e==="fx"&&h.unshift("inprogress");delete o.stop;m.call(c,q,o)}!l&&o&&o.empty.fire()},_queueHooks:function(c,e){var h=e+"queueHooks";return g._data(c,h)||g._data(c,h,{empty:g.Callbacks("once memory").add(function(){g._removeData(c,e+"queue");g._removeData(c,h)})})}});g.fn.extend({queue:function(c,e){var h=2;if(typeof c!=="string"){e=c;c="fx";h--}if(arguments.length<h)return g.queue(this[0],c);return e===b?this:this.each(function(){var l=g.queue(this,
c,e);g._queueHooks(this,c);c==="fx"&&l[0]!=="inprogress"&&g.dequeue(this,c)})},dequeue:function(c){return this.each(function(){g.dequeue(this,c)})},delay:function(c,e){c=g.fx?g.fx.speeds[c]||c:c;e=e||"fx";return this.queue(e,function(h,l){var m=setTimeout(h,c);l.stop=function(){clearTimeout(m)}})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,e){var h,l=1,m=g.Deferred(),o=this,q=this.length,u=function(){--l||m.resolveWith(o,[o])};if(typeof c!=="string"){e=c;c=b}for(c=c||
"fx";q--;)if((h=g._data(o[q],c+"queueHooks"))&&h.empty){l++;h.empty.add(u)}u();return m.promise(e)}});var wb,oc,Ub=/[\t\r\n]/g,dd=/\r/g,ed=/^(?:input|select|textarea|button|object)$/i,fd=/^(?:a|area)$/i,pc=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Vb=/^(?:checked|selected)$/i,nb=g.support.getSetAttribute,Wb=g.support.input;g.fn.extend({attr:function(c,e){return g.access(this,g.attr,c,e,arguments.length>1)},removeAttr:function(c){return this.each(function(){g.removeAttr(this,
c)})},prop:function(c,e){return g.access(this,g.prop,c,e,arguments.length>1)},removeProp:function(c){c=g.propFix[c]||c;return this.each(function(){try{this[c]=b;delete this[c]}catch(e){}})},addClass:function(c){var e,h,l,m,o,q=0,u=this.length;e=typeof c==="string"&&c;if(g.isFunction(c))return this.each(function(C){g(this).addClass(c.call(this,C,this.className))});if(e)for(e=(c||"").match(Za)||[];q<u;q++){h=this[q];if(l=h.nodeType===1&&(h.className?(" "+h.className+" ").replace(Ub," "):" ")){for(o=
0;m=e[o++];)if(l.indexOf(" "+m+" ")<0)l+=m+" ";h.className=g.trim(l)}}return this},removeClass:function(c){var e,h,l,m,o,q=0,u=this.length;e=arguments.length===0||typeof c==="string"&&c;if(g.isFunction(c))return this.each(function(C){g(this).removeClass(c.call(this,C,this.className))});if(e)for(e=(c||"").match(Za)||[];q<u;q++){h=this[q];if(l=h.nodeType===1&&(h.className?(" "+h.className+" ").replace(Ub," "):"")){for(o=0;m=e[o++];)for(;l.indexOf(" "+m+" ")>=0;)l=l.replace(" "+m+" "," ");h.className=
c?g.trim(l):""}}return this},toggleClass:function(c,e){var h=typeof c,l=typeof e==="boolean";if(g.isFunction(c))return this.each(function(m){g(this).toggleClass(c.call(this,m,this.className,e),e)});return this.each(function(){if(h==="string")for(var m,o=0,q=g(this),u=e,C=c.match(Za)||[];m=C[o++];){u=l?u:!q.hasClass(m);q[u?"addClass":"removeClass"](m)}else if(h===ea||h==="boolean"){this.className&&g._data(this,"__className__",this.className);this.className=this.className||c===false?"":g._data(this,
"__className__")||""}})},hasClass:function(c){c=" "+c+" ";for(var e=0,h=this.length;e<h;e++)if(this[e].nodeType===1&&(" "+this[e].className+" ").replace(Ub," ").indexOf(c)>=0)return true;return false},val:function(c){var e,h,l,m=this[0];if(arguments.length){l=g.isFunction(c);return this.each(function(o){var q=g(this);if(this.nodeType===1){o=l?c.call(this,o,q.val()):c;if(o==null)o="";else if(typeof o==="number")o+="";else if(g.isArray(o))o=g.map(o,function(u){return u==null?"":u+""});h=g.valHooks[this.type]||
g.valHooks[this.nodeName.toLowerCase()];if(!h||!("set"in h)||h.set(this,o,"value")===b)this.value=o}})}else if(m){if((h=g.valHooks[m.type]||g.valHooks[m.nodeName.toLowerCase()])&&"get"in h&&(e=h.get(m,"value"))!==b)return e;e=m.value;return typeof e==="string"?e.replace(dd,""):e==null?"":e}}});g.extend({valHooks:{option:{get:function(c){var e=c.attributes.value;return!e||e.specified?c.value:c.text}},select:{get:function(c){for(var e,h=c.options,l=c.selectedIndex,m=(c=c.type==="select-one"||l<0)?null:
[],o=c?l+1:h.length,q=l<0?o:c?l:0;q<o;q++){e=h[q];if((e.selected||q===l)&&(g.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!g.nodeName(e.parentNode,"optgroup"))){e=g(e).val();if(c)return e;m.push(e)}}return m},set:function(c,e){var h=g.makeArray(e);g(c).find("option").each(function(){this.selected=g.inArray(g(this).val(),h)>=0});if(!h.length)c.selectedIndex=-1;return h}}},attr:function(c,e,h){var l,m,o;m=c.nodeType;if(!(!c||m===3||m===8||m===2)){if(typeof c.getAttribute===
ea)return g.prop(c,e,h);if(m=m!==1||!g.isXMLDoc(c)){e=e.toLowerCase();l=g.attrHooks[e]||(pc.test(e)?oc:wb)}if(h!==b)if(h===null)g.removeAttr(c,e);else if(l&&m&&"set"in l&&(o=l.set(c,h,e))!==b)return o;else{c.setAttribute(e,h+"");return h}else if(l&&m&&"get"in l&&(o=l.get(c,e))!==null)return o;else{if(typeof c.getAttribute!==ea)o=c.getAttribute(e);return o==null?b:o}}},removeAttr:function(c,e){var h,l=0,m=e&&e.match(Za);if(m&&c.nodeType===1)for(;e=m[l++];){h=g.propFix[e]||e;if(pc.test(e))if(!nb&&Vb.test(e))c[g.camelCase("default-"+
e)]=c[h]=false;else c[h]=false;else g.attr(c,e,"");c.removeAttribute(nb?e:h)}},attrHooks:{type:{set:function(c,e){if(!g.support.radioValue&&e==="radio"&&g.nodeName(c,"input")){var h=c.value;c.setAttribute("type",e);if(h)c.value=h;return e}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},
prop:function(c,e,h){var l,m,o=c.nodeType;if(!(!c||o===3||o===8||o===2)){if(o!==1||!g.isXMLDoc(c)){e=g.propFix[e]||e;m=g.propHooks[e]}return h!==b?m&&"set"in m&&(l=m.set(c,h,e))!==b?l:(c[e]=h):m&&"get"in m&&(l=m.get(c,e))!==null?l:c[e]}},propHooks:{tabIndex:{get:function(c){var e=c.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):ed.test(c.nodeName)||fd.test(c.nodeName)&&c.href?0:b}}}});oc={get:function(c,e){var h=g.prop(c,e),l=typeof h==="boolean"&&c.getAttribute(e);return(c=
typeof h==="boolean"?Wb&&nb?l!=null:Vb.test(e)?c[g.camelCase("default-"+e)]:!!l:c.getAttributeNode(e))&&c.value!==false?e.toLowerCase():b},set:function(c,e,h){if(e===false)g.removeAttr(c,h);else if(Wb&&nb||!Vb.test(h))c.setAttribute(!nb&&g.propFix[h]||h,h);else c[g.camelCase("default-"+h)]=c[h]=true;return h}};if(!Wb||!nb)g.attrHooks.value={get:function(c,e){e=c.getAttributeNode(e);return g.nodeName(c,"input")?c.defaultValue:e&&e.specified?e.value:b},set:function(c,e,h){if(g.nodeName(c,"input"))c.defaultValue=
e;else return wb&&wb.set(c,e,h)}};if(!nb){wb=g.valHooks.button={get:function(c,e){return(c=c.getAttributeNode(e))&&(e==="id"||e==="name"||e==="coords"?c.value!=="":c.specified)?c.value:b},set:function(c,e,h){var l=c.getAttributeNode(h);l||c.setAttributeNode(l=c.ownerDocument.createAttribute(h));l.value=e+="";return h==="value"||e===c.getAttribute(h)?e:b}};g.attrHooks.contenteditable={get:wb.get,set:function(c,e,h){wb.set(c,e===""?false:e,h)}};g.each(["width","height"],function(c,e){g.attrHooks[e]=
g.extend(g.attrHooks[e],{set:function(h,l){if(l===""){h.setAttribute(e,"auto");return l}}})})}if(!g.support.hrefNormalized){g.each(["href","src","width","height"],function(c,e){g.attrHooks[e]=g.extend(g.attrHooks[e],{get:function(h){h=h.getAttribute(e,2);return h==null?b:h}})});g.each(["href","src"],function(c,e){g.propHooks[e]={get:function(h){return h.getAttribute(e,4)}}})}if(!g.support.style)g.attrHooks.style={get:function(c){return c.style.cssText||b},set:function(c,e){return c.style.cssText=
e+""}};if(!g.support.optSelected)g.propHooks.selected=g.extend(g.propHooks.selected,{get:function(){return null}});if(!g.support.enctype)g.propFix.enctype="encoding";g.support.checkOn||g.each(["radio","checkbox"],function(){g.valHooks[this]={get:function(c){return c.getAttribute("value")===null?"on":c.value}}});g.each(["radio","checkbox"],function(){g.valHooks[this]=g.extend(g.valHooks[this],{set:function(c,e){if(g.isArray(e))return c.checked=g.inArray(g(c).val(),e)>=0}})});var Xb=/^(?:input|select|textarea)$/i,
gd=/^key/,hd=/^(?:mouse|contextmenu)|click/,qc=/^(?:focusinfocus|focusoutblur)$/,rc=/^([^.]*)(?:\.(.+)|)$/;g.event={global:{},add:function(c,e,h,l,m){var o,q,u,C,N,F,V,fa,ja;if(u=g._data(c)){if(h.handler){C=h;h=C.handler;m=C.selector}if(!h.guid)h.guid=g.guid++;if(!(q=u.events))q=u.events={};if(!(N=u.handle)){N=u.handle=function(Aa){return typeof g!==ea&&(!Aa||g.event.triggered!==Aa.type)?g.event.dispatch.apply(N.elem,arguments):b};N.elem=c}e=(e||"").match(Za)||[""];for(u=e.length;u--;){o=rc.exec(e[u])||
[];fa=F=o[1];ja=(o[2]||"").split(".").sort();o=g.event.special[fa]||{};fa=(m?o.delegateType:o.bindType)||fa;o=g.event.special[fa]||{};F=g.extend({type:fa,origType:F,data:l,handler:h,guid:h.guid,selector:m,needsContext:m&&g.expr.match.needsContext.test(m),namespace:ja.join(".")},C);if(!(V=q[fa])){V=q[fa]=[];V.delegateCount=0;if(!o.setup||o.setup.call(c,l,ja,N)===false)if(c.addEventListener)c.addEventListener(fa,N,false);else c.attachEvent&&c.attachEvent("on"+fa,N)}if(o.add){o.add.call(c,F);if(!F.handler.guid)F.handler.guid=
h.guid}m?V.splice(V.delegateCount++,0,F):V.push(F);g.event.global[fa]=true}c=null}},remove:function(c,e,h,l,m){var o,q,u,C,N,F,V,fa,ja,Aa,Ga,Ta=g.hasData(c)&&g._data(c);if(Ta&&(F=Ta.events)){e=(e||"").match(Za)||[""];for(N=e.length;N--;){u=rc.exec(e[N])||[];ja=Ga=u[1];Aa=(u[2]||"").split(".").sort();if(ja){V=g.event.special[ja]||{};ja=(l?V.delegateType:V.bindType)||ja;fa=F[ja]||[];u=u[2]&&new RegExp("(^|\\.)"+Aa.join("\\.(?:.*\\.|)")+"(\\.|$)");for(C=o=fa.length;o--;){q=fa[o];if((m||Ga===q.origType)&&
(!h||h.guid===q.guid)&&(!u||u.test(q.namespace))&&(!l||l===q.selector||l==="**"&&q.selector)){fa.splice(o,1);q.selector&&fa.delegateCount--;V.remove&&V.remove.call(c,q)}}if(C&&!fa.length){if(!V.teardown||V.teardown.call(c,Aa,Ta.handle)===false)g.removeEvent(c,ja,Ta.handle);delete F[ja]}}else for(ja in F)g.event.remove(c,ja+e[N],h,l,true)}if(g.isEmptyObject(F)){delete Ta.handle;g._removeData(c,"events")}}},trigger:function(c,e,h,l){var m,o,q,u,C,N,F=[h||R],V=Gb.call(c,"type")?c.type:c;C=Gb.call(c,
"namespace")?c.namespace.split("."):[];q=m=h=h||R;if(!(h.nodeType===3||h.nodeType===8))if(!qc.test(V+g.event.triggered)){if(V.indexOf(".")>=0){C=V.split(".");V=C.shift();C.sort()}o=V.indexOf(":")<0&&"on"+V;c=c[g.expando]?c:new g.Event(V,typeof c==="object"&&c);c.isTrigger=true;c.namespace=C.join(".");c.namespace_re=c.namespace?new RegExp("(^|\\.)"+C.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;c.result=b;if(!c.target)c.target=h;e=e==null?[c]:g.makeArray(e,[c]);C=g.event.special[V]||{};if(!(!l&&C.trigger&&
C.trigger.apply(h,e)===false)){if(!l&&!C.noBubble&&!g.isWindow(h)){u=C.delegateType||V;if(!qc.test(u+V))q=q.parentNode;for(;q;q=q.parentNode){F.push(q);m=q}if(m===(h.ownerDocument||R))F.push(m.defaultView||m.parentWindow||a)}for(N=0;(q=F[N++])&&!c.isPropagationStopped();){c.type=N>1?u:C.bindType||V;(m=(g._data(q,"events")||{})[c.type]&&g._data(q,"handle"))&&m.apply(q,e);(m=o&&q[o])&&g.acceptData(q)&&m.apply&&m.apply(q,e)===false&&c.preventDefault()}c.type=V;if(!l&&!c.isDefaultPrevented())if((!C._default||
C._default.apply(h.ownerDocument,e)===false)&&!(V==="click"&&g.nodeName(h,"a"))&&g.acceptData(h))if(o&&h[V]&&!g.isWindow(h)){if(m=h[o])h[o]=null;g.event.triggered=V;try{h[V]()}catch(fa){}g.event.triggered=b;if(m)h[o]=m}return c.result}}},dispatch:function(c){c=g.event.fix(c);var e,h,l,m,o=[],q=Ka.call(arguments);e=(g._data(this,"events")||{})[c.type]||[];var u=g.event.special[c.type]||{};q[0]=c;c.delegateTarget=this;if(!(u.preDispatch&&u.preDispatch.call(this,c)===false)){o=g.event.handlers.call(this,
c,e);for(e=0;(l=o[e++])&&!c.isPropagationStopped();){c.currentTarget=l.elem;for(m=0;(h=l.handlers[m++])&&!c.isImmediatePropagationStopped();)if(!c.namespace_re||c.namespace_re.test(h.namespace)){c.handleObj=h;c.data=h.data;h=((g.event.special[h.origType]||{}).handle||h.handler).apply(l.elem,q);if(h!==b)if((c.result=h)===false){c.preventDefault();c.stopPropagation()}}}u.postDispatch&&u.postDispatch.call(this,c);return c.result}},handlers:function(c,e){var h,l,m,o,q=[],u=e.delegateCount,C=c.target;
if(u&&C.nodeType&&(!c.button||c.type!=="click"))for(;C!=this;C=C.parentNode||this)if(C.nodeType===1&&(C.disabled!==true||c.type!=="click")){m=[];for(o=0;o<u;o++){l=e[o];h=l.selector+" ";if(m[h]===b)m[h]=l.needsContext?g(h,this).index(C)>=0:g.find(h,this,null,[C]).length;m[h]&&m.push(l)}m.length&&q.push({elem:C,handlers:m})}u<e.length&&q.push({elem:this,handlers:e.slice(u)});return q},fix:function(c){if(c[g.expando])return c;var e,h,l;e=c.type;var m=c,o=this.fixHooks[e];o||(this.fixHooks[e]=o=hd.test(e)?
this.mouseHooks:gd.test(e)?this.keyHooks:{});l=o.props?this.props.concat(o.props):this.props;c=new g.Event(m);for(e=l.length;e--;){h=l[e];c[h]=m[h]}if(!c.target)c.target=m.srcElement||R;if(c.target.nodeType===3)c.target=c.target.parentNode;c.metaKey=!!c.metaKey;return o.filter?o.filter(c,m):c},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(c,
e){if(c.which==null)c.which=e.charCode!=null?e.charCode:e.keyCode;return c}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(c,e){var h,l,m=e.button,o=e.fromElement;if(c.pageX==null&&e.clientX!=null){h=c.target.ownerDocument||R;l=h.documentElement;h=h.body;c.pageX=e.clientX+(l&&l.scrollLeft||h&&h.scrollLeft||0)-(l&&l.clientLeft||h&&h.clientLeft||0);c.pageY=e.clientY+(l&&l.scrollTop||h&&h.scrollTop||0)-
(l&&l.clientTop||h&&h.clientTop||0)}if(!c.relatedTarget&&o)c.relatedTarget=o===c.target?e.toElement:o;if(!c.which&&m!==b)c.which=m&1?1:m&2?3:m&4?2:0;return c}},special:{load:{noBubble:true},click:{trigger:function(){if(g.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}}},focus:{trigger:function(){if(this!==R.activeElement&&this.focus)try{this.focus();return false}catch(c){}},delegateType:"focusin"},blur:{trigger:function(){if(this===R.activeElement&&this.blur){this.blur();
return false}},delegateType:"focusout"},beforeunload:{postDispatch:function(c){if(c.result!==b)c.originalEvent.returnValue=c.result}}},simulate:function(c,e,h,l){c=g.extend(new g.Event,h,{type:c,isSimulated:true,originalEvent:{}});l?g.event.trigger(c,null,e):g.event.dispatch.call(e,c);c.isDefaultPrevented()&&h.preventDefault()}};g.removeEvent=R.removeEventListener?function(c,e,h){c.removeEventListener&&c.removeEventListener(e,h,false)}:function(c,e,h){e="on"+e;if(c.detachEvent){if(typeof c[e]===ea)c[e]=
null;c.detachEvent(e,h)}};g.Event=function(c,e){if(!(this instanceof g.Event))return new g.Event(c,e);if(c&&c.type){this.originalEvent=c;this.type=c.type;this.isDefaultPrevented=c.defaultPrevented||c.returnValue===false||c.getPreventDefault&&c.getPreventDefault()?y:O}else this.type=c;e&&g.extend(this,e);this.timeStamp=c&&c.timeStamp||g.now();this[g.expando]=true};g.Event.prototype={isDefaultPrevented:O,isPropagationStopped:O,isImmediatePropagationStopped:O,preventDefault:function(){var c=this.originalEvent;
this.isDefaultPrevented=y;if(c)if(c.preventDefault)c.preventDefault();else c.returnValue=false},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=y;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=y;this.stopPropagation()}};g.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(c,e){g.event.special[c]={delegateType:e,bindType:e,handle:function(h){var l,m=h.relatedTarget,o=h.handleObj;
if(!m||m!==this&&!g.contains(this,m)){h.type=o.origType;l=o.handler.apply(this,arguments);h.type=e}return l}}});if(!g.support.submitBubbles)g.event.special.submit={setup:function(){if(g.nodeName(this,"form"))return false;g.event.add(this,"click._submit keypress._submit",function(c){c=c.target;if((c=g.nodeName(c,"input")||g.nodeName(c,"button")?c.form:b)&&!g._data(c,"submitBubbles")){g.event.add(c,"submit._submit",function(e){e._submit_bubble=true});g._data(c,"submitBubbles",true)}})},postDispatch:function(c){if(c._submit_bubble){delete c._submit_bubble;
this.parentNode&&!c.isTrigger&&g.event.simulate("submit",this.parentNode,c,true)}},teardown:function(){if(g.nodeName(this,"form"))return false;g.event.remove(this,"._submit")}};if(!g.support.changeBubbles)g.event.special.change={setup:function(){if(Xb.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){g.event.add(this,"propertychange._change",function(c){if(c.originalEvent.propertyName==="checked")this._just_changed=true});g.event.add(this,"click._change",function(c){if(this._just_changed&&
!c.isTrigger)this._just_changed=false;g.event.simulate("change",this,c,true)})}return false}g.event.add(this,"beforeactivate._change",function(c){c=c.target;if(Xb.test(c.nodeName)&&!g._data(c,"changeBubbles")){g.event.add(c,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&g.event.simulate("change",this.parentNode,e,true)});g._data(c,"changeBubbles",true)}})},handle:function(c){var e=c.target;if(this!==e||c.isSimulated||c.isTrigger||e.type!=="radio"&&e.type!=="checkbox")return c.handleObj.handler.apply(this,
arguments)},teardown:function(){g.event.remove(this,"._change");return!Xb.test(this.nodeName)}};g.support.focusinBubbles||g.each({focus:"focusin",blur:"focusout"},function(c,e){var h=0,l=function(m){g.event.simulate(e,m.target,g.event.fix(m),true)};g.event.special[e]={setup:function(){h++===0&&R.addEventListener(c,l,true)},teardown:function(){--h===0&&R.removeEventListener(c,l,true)}}});g.fn.extend({on:function(c,e,h,l,m){var o,q;if(typeof c==="object"){if(typeof e!=="string"){h=h||e;e=b}for(o in c)this.on(o,
e,h,c[o],m);return this}if(h==null&&l==null){l=e;h=e=b}else if(l==null)if(typeof e==="string"){l=h;h=b}else{l=h;h=e;e=b}if(l===false)l=O;else if(!l)return this;if(m===1){q=l;l=function(u){g().off(u);return q.apply(this,arguments)};l.guid=q.guid||(q.guid=g.guid++)}return this.each(function(){g.event.add(this,c,l,h,e)})},one:function(c,e,h,l){return this.on(c,e,h,l,1)},off:function(c,e,h){var l;if(c&&c.preventDefault&&c.handleObj){l=c.handleObj;g(c.delegateTarget).off(l.namespace?l.origType+"."+l.namespace:
l.origType,l.selector,l.handler);return this}if(typeof c==="object"){for(l in c)this.off(l,e,c[l]);return this}if(e===false||typeof e==="function"){h=e;e=b}if(h===false)h=O;return this.each(function(){g.event.remove(this,c,h,e)})},bind:function(c,e,h){return this.on(c,null,e,h)},unbind:function(c,e){return this.off(c,null,e)},delegate:function(c,e,h,l){return this.on(e,c,h,l)},undelegate:function(c,e,h){return arguments.length===1?this.off(c,"**"):this.off(e,c||"**",h)},trigger:function(c,e){return this.each(function(){g.event.trigger(c,
e,this)})},triggerHandler:function(c,e){var h=this[0];if(h)return g.event.trigger(c,e,h,true)}});(function(c,e){function h(s){return id.test(s+"")}function l(){var s,A=[];return s=function(v,E){if(A.push(v+=" ")>ma.cacheLength)delete s[A.shift()];return s[v]=E}}function m(s){s[Ea]=true;return s}function o(s){var A=Na.createElement("div");try{return s(A)}catch(v){return false}finally{}}function q(s,A,v,E){var S,aa,T,ha,ca;if((A?A.ownerDocument||A:ob)!==Na)La(A);A=A||Na;v=v||[];if(!s||typeof s!=="string")return v;
if((ha=A.nodeType)!==1&&ha!==9)return[];if(!Xa&&!E){if(S=jd.exec(s))if(T=S[1])if(ha===9)if((aa=A.getElementById(T))&&aa.parentNode){if(aa.id===T){v.push(aa);return v}}else return v;else{if(A.ownerDocument&&(aa=A.ownerDocument.getElementById(T))&&Hb(A,aa)&&aa.id===T){v.push(aa);return v}}else if(S[2]){xb.apply(v,yb.call(A.getElementsByTagName(s),0));return v}else if((T=S[3])&&Ia.getByClassName&&A.getElementsByClassName){xb.apply(v,yb.call(A.getElementsByClassName(T),0));return v}if(Ia.qsa&&!Ya.test(s)){S=
true;aa=Ea;T=A;ca=ha===9&&s;if(ha===1&&A.nodeName.toLowerCase()!=="object"){ha=V(s);if(S=A.getAttribute("id"))aa=S.replace(kd,"\\$&");else A.setAttribute("id",aa);aa="[id='"+aa+"'] ";for(T=ha.length;T--;)ha[T]=aa+fa(ha[T]);T=Yb.test(s)&&A.parentNode||A;ca=ha.join(",")}if(ca)try{xb.apply(v,yb.call(T.querySelectorAll(ca),0));return v}catch(wa){}finally{S||A.removeAttribute("id")}}}return ta(s.replace(Mb,"$1"),A,v,E)}function u(s,A){var v=A&&s,E=v&&(~A.sourceIndex||sc)-(~s.sourceIndex||sc);if(E)return E;
if(v)for(;v=v.nextSibling;)if(v===A)return-1;return s?1:-1}function C(s){return function(A){return A.nodeName.toLowerCase()==="input"&&A.type===s}}function N(s){return function(A){var v=A.nodeName.toLowerCase();return(v==="input"||v==="button")&&A.type===s}}function F(s){return m(function(A){A=+A;return m(function(v,E){for(var S,aa=s([],v.length,A),T=aa.length;T--;)if(v[S=aa[T]])v[S]=!(E[S]=v[S])})})}function V(s,A){var v,E,S,aa,T,ha,ca;if(T=tc[s+" "])return A?0:T.slice(0);T=s;ha=[];for(ca=ma.preFilter;T;){if(!v||
(E=ld.exec(T))){if(E)T=T.slice(E[0].length)||T;ha.push(S=[])}v=false;if(E=md.exec(T)){v=E.shift();S.push({value:v,type:E[0].replace(Mb," ")});T=T.slice(v.length)}for(aa in ma.filter)if((E=Nb[aa].exec(T))&&(!ca[aa]||(E=ca[aa](E)))){v=E.shift();S.push({value:v,type:aa,matches:E});T=T.slice(v.length)}if(!v)break}return A?T.length:T?q.error(s):tc(s,ha).slice(0)}function fa(s){for(var A=0,v=s.length,E="";A<v;A++)E+=s[A].value;return E}function ja(s,A,v){var E=A.dir,S=v&&E==="parentNode",aa=nd++;return A.first?
function(T,ha,ca){for(;T=T[E];)if(T.nodeType===1||S)return s(T,ha,ca)}:function(T,ha,ca){var wa,na,xa,va=ab+" "+aa;if(ca)for(;T=T[E];){if(T.nodeType===1||S)if(s(T,ha,ca))return true}else for(;T=T[E];)if(T.nodeType===1||S){xa=T[Ea]||(T[Ea]={});if((na=xa[E])&&na[0]===va){if((wa=na[1])===true||wa===Ha)return wa===true}else{na=xa[E]=[va];na[1]=s(T,ha,ca)||Ha;if(na[1]===true)return true}}}}function Aa(s){return s.length>1?function(A,v,E){for(var S=s.length;S--;)if(!s[S](A,v,E))return false;return true}:
s[0]}function Ga(s,A,v,E,S){for(var aa,T=[],ha=0,ca=s.length,wa=A!=null;ha<ca;ha++)if(aa=s[ha])if(!v||v(aa,E,S)){T.push(aa);wa&&A.push(ha)}return T}function Ta(s,A,v,E,S,aa){if(E&&!E[Ea])E=Ta(E);if(S&&!S[Ea])S=Ta(S,aa);return m(function(T,ha,ca,wa){var na,xa,va=[],Ba=[],Ma=ha.length,Fa=T||Ob(A||"*",ca.nodeType?[ca]:ca,[]);Fa=s&&(T||!A)?Ga(Fa,va,s,ca,wa):Fa;var ya=v?S||(T?s:Ma||E)?[]:ha:Fa;v&&v(Fa,ya,ca,wa);if(E){na=Ga(ya,Ba);E(na,[],ca,wa);for(ca=na.length;ca--;)if(xa=na[ca])ya[Ba[ca]]=!(Fa[Ba[ca]]=
xa)}if(T){if(S||s){if(S){na=[];for(ca=ya.length;ca--;)if(xa=ya[ca])na.push(Fa[ca]=xa);S(null,ya=[],na,wa)}for(ca=ya.length;ca--;)if((xa=ya[ca])&&(na=S?Zb.call(T,xa):va[ca])>-1)T[na]=!(ha[na]=xa)}}else{ya=Ga(ya===ha?ya.splice(Ma,ya.length):ya);S?S(null,ha,ya,wa):xb.apply(ha,ya)}})}function zb(s){var A,v,E,S=s.length,aa=ma.relative[s[0].type];v=aa||ma.relative[" "];for(var T=aa?1:0,ha=ja(function(na){return na===A},v,true),ca=ja(function(na){return Zb.call(A,na)>-1},v,true),wa=[function(na,xa,va){return!aa&&
(va||xa!==pb)||((A=xa).nodeType?ha(na,xa,va):ca(na,xa,va))}];T<S;T++)if(v=ma.relative[s[T].type])wa=[ja(Aa(wa),v)];else{v=ma.filter[s[T].type].apply(null,s[T].matches);if(v[Ea]){for(E=++T;E<S;E++)if(ma.relative[s[E].type])break;return Ta(T>1&&Aa(wa),T>1&&fa(s.slice(0,T-1)).replace(Mb,"$1"),v,T<E&&zb(s.slice(T,E)),E<S&&zb(s=s.slice(E)),E<S&&fa(s))}wa.push(v)}return Aa(wa)}function Oa(s,A){var v=0,E=A.length>0,S=s.length>0,aa=function(T,ha,ca,wa,na){var xa,va,Ba=[],Ma=0,Fa="0",ya=T&&[],qb=na!=null,
uc=pb,od=T||S&&ma.find.TAG("*",na&&ha.parentNode||ha),vc=ab+=uc==null?1:Math.random()||0.1;if(qb){pb=ha!==Na&&ha;Ha=v}for(;(na=od[Fa])!=null;Fa++){if(S&&na){for(xa=0;va=s[xa++];)if(va(na,ha,ca)){wa.push(na);break}if(qb){ab=vc;Ha=++v}}if(E){if(na=!va&&na)Ma--;T&&ya.push(na)}}Ma+=Fa;if(E&&Fa!==Ma){for(xa=0;va=A[xa++];)va(ya,Ba,ha,ca);if(T){if(Ma>0)for(;Fa--;)ya[Fa]||Ba[Fa]||(Ba[Fa]=pd.call(wa));Ba=Ga(Ba)}xb.apply(wa,Ba);qb&&!T&&Ba.length>0&&Ma+A.length>1&&q.uniqueSort(wa)}if(qb){ab=vc;pb=uc}return ya};
return E?m(aa):aa}function Ob(s,A,v){for(var E=0,S=A.length;E<S;E++)q(s,A[E],v);return v}function ta(s,A,v,E){var S,aa,T,ha,ca=V(s);if(!E)if(ca.length===1){aa=ca[0]=ca[0].slice(0);if(aa.length>2&&(T=aa[0]).type==="ID"&&A.nodeType===9&&!Xa&&ma.relative[aa[1].type]){A=ma.find.ID(T.matches[0].replace(eb,fb),A)[0];if(!A)return v;s=s.slice(aa.shift().value.length)}for(S=Nb.needsContext.test(s)?0:aa.length;S--;){T=aa[S];if(ma.relative[ha=T.type])break;if(ha=ma.find[ha])if(E=ha(T.matches[0].replace(eb,fb),
Yb.test(aa[0].type)&&A.parentNode||A)){aa.splice(S,1);s=E.length&&fa(aa);if(!s){xb.apply(v,yb.call(E,0));return v}break}}}rb(s,ca)(E,A,Xa,v,Yb.test(s));return v}function Ib(){}var ua,Ha,ma,Ab,Pa,rb,Ua,pb,La,Na,Qa,Xa,Ya,Bb,Pb,Hb,$b,Ea="sizzle"+-new Date,ob=c.document,Ia={},ab=0,nd=0,wc=l(),tc=l(),xc=l(),bb=typeof e,sc=-2147483648,sb=[],pd=sb.pop,xb=sb.push,yb=sb.slice,Zb=sb.indexOf||function(s){for(var A=0,v=this.length;A<v;A++)if(this[A]===s)return A;return-1};sb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w",
"w#");var yc="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+sb+")|)|)[\\x20\\t\\r\\n\\f]*\\]",ac=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+yc.replace(3,8)+")*)|.*)\\)|)",Mb=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),ld=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,md=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,
qd=new RegExp(ac),rd=new RegExp("^"+sb+"$"),Nb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[\w-]|[^\x00-\xa0])+)['"]?\]/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+yc),PSEUDO:new RegExp("^"+ac),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Yb=/[\x20\t\r\n\f]*[+~]/,id=/^[^{]+\{\s*\[native code/,jd=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sd=/^(?:input|select|textarea|button)$/i,td=/^h\d$/i,kd=/'|\\/g,ud=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,eb=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,fb=function(s,A){s="0x"+A-65536;return s!==s?A:s<0?String.fromCharCode(s+65536):
String.fromCharCode(s>>10|55296,s&1023|56320)};try{yb.call(ob.documentElement.childNodes,0)}catch(Sd){yb=function(s){for(var A,v=[];A=this[s++];)v.push(A);return v}}Pa=q.isXML=function(s){return(s=s&&(s.ownerDocument||s).documentElement)?s.nodeName!=="HTML":false};La=q.setDocument=function(s){var A=s?s.ownerDocument||s:ob;if(A===Na||A.nodeType!==9||!A.documentElement)return Na;Na=A;Qa=A.documentElement;Xa=Pa(A);Ia.tagNameNoComments=o(function(v){v.appendChild(A.createComment(""));return!v.getElementsByTagName("*").length});
Ia.attributes=o(function(v){v.innerHTML="<select></select>";v=typeof v.lastChild.getAttribute("multiple");return v!=="boolean"&&v!=="string"});Ia.getByClassName=o(function(v){v.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!v.getElementsByClassName||!v.getElementsByClassName("e").length)return false;v.lastChild.className="e";return v.getElementsByClassName("e").length===2});Ia.getByName=o(function(v){v.id=Ea+0;v.innerHTML="<a name='"+Ea+"'></a><div name='"+Ea+"'></div>";Qa.insertBefore(v,
Qa.firstChild);var E=A.getElementsByName&&A.getElementsByName(Ea).length===2+A.getElementsByName(Ea+0).length;Ia.getIdNotName=!A.getElementById(Ea);Qa.removeChild(v);return E});ma.attrHandle=o(function(v){v.innerHTML="<a href='#'></a>";return v.firstChild&&typeof v.firstChild.getAttribute!==bb&&v.firstChild.getAttribute("href")==="#"})?{}:{href:function(v){return v.getAttribute("href",2)},type:function(v){return v.getAttribute("type")}};if(Ia.getIdNotName){ma.find.ID=function(v,E){if(typeof E.getElementById!==
bb&&!Xa)return(v=E.getElementById(v))&&v.parentNode?[v]:[]};ma.filter.ID=function(v){var E=v.replace(eb,fb);return function(S){return S.getAttribute("id")===E}}}else{ma.find.ID=function(v,E){if(typeof E.getElementById!==bb&&!Xa)return(E=E.getElementById(v))?E.id===v||typeof E.getAttributeNode!==bb&&E.getAttributeNode("id").value===v?[E]:e:[]};ma.filter.ID=function(v){var E=v.replace(eb,fb);return function(S){return(S=typeof S.getAttributeNode!==bb&&S.getAttributeNode("id"))&&S.value===E}}}ma.find.TAG=
Ia.tagNameNoComments?function(v,E){if(typeof E.getElementsByTagName!==bb)return E.getElementsByTagName(v)}:function(v,E){var S=[],aa=0;E=E.getElementsByTagName(v);if(v==="*"){for(;v=E[aa++];)v.nodeType===1&&S.push(v);return S}return E};ma.find.NAME=Ia.getByName&&function(v,E){if(typeof E.getElementsByName!==bb)return E.getElementsByName(name)};ma.find.CLASS=Ia.getByClassName&&function(v,E){if(typeof E.getElementsByClassName!==bb&&!Xa)return E.getElementsByClassName(v)};Bb=[];Ya=[":focus"];if(Ia.qsa=
h(A.querySelectorAll)){o(function(v){v.innerHTML="<select><option selected=''></option></select>";v.querySelectorAll("[selected]").length||Ya.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");v.querySelectorAll(":checked").length||Ya.push(":checked")});o(function(v){v.innerHTML="<input type='hidden' i=''/>";v.querySelectorAll("[i^='']").length&&Ya.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");v.querySelectorAll(":enabled").length||Ya.push(":enabled",":disabled");
v.querySelectorAll("*,:x");Ya.push(",.*:")})}if(Ia.matchesSelector=h(Pb=Qa.matchesSelector||Qa.mozMatchesSelector||Qa.webkitMatchesSelector||Qa.oMatchesSelector||Qa.msMatchesSelector))o(function(v){Ia.disconnectedMatch=Pb.call(v,"div");Pb.call(v,"[s!='']:x");Bb.push("!=",ac)});Ya=new RegExp(Ya.join("|"));Bb=new RegExp(Bb.join("|"));Hb=h(Qa.contains)||Qa.compareDocumentPosition?function(v,E){var S=v.nodeType===9?v.documentElement:v;E=E&&E.parentNode;return v===E||!!(E&&E.nodeType===1&&(S.contains?
S.contains(E):v.compareDocumentPosition&&v.compareDocumentPosition(E)&16))}:function(v,E){if(E)for(;E=E.parentNode;)if(E===v)return true;return false};$b=Qa.compareDocumentPosition?function(v,E){var S;if(v===E){Ua=true;return 0}if(S=E.compareDocumentPosition&&v.compareDocumentPosition&&v.compareDocumentPosition(E)){if(S&1||v.parentNode&&v.parentNode.nodeType===11){if(v===A||Hb(ob,v))return-1;if(E===A||Hb(ob,E))return 1;return 0}return S&4?-1:1}return v.compareDocumentPosition?-1:1}:function(v,E){var S=
0,aa=v.parentNode,T=E.parentNode,ha=[v],ca=[E];if(v===E){Ua=true;return 0}else if(!aa||!T)return v===A?-1:E===A?1:aa?-1:T?1:0;else if(aa===T)return u(v,E);for(v=v;v=v.parentNode;)ha.unshift(v);for(v=E;v=v.parentNode;)ca.unshift(v);for(;ha[S]===ca[S];)S++;return S?u(ha[S],ca[S]):ha[S]===ob?-1:ca[S]===ob?1:0};Ua=false;[0,0].sort($b);Ia.detectDuplicates=Ua;return Na};q.matches=function(s,A){return q(s,null,null,A)};q.matchesSelector=function(s,A){if((s.ownerDocument||s)!==Na)La(s);A=A.replace(ud,"='$1']");
if(Ia.matchesSelector&&!Xa&&(!Bb||!Bb.test(A))&&!Ya.test(A))try{var v=Pb.call(s,A);if(v||Ia.disconnectedMatch||s.document&&s.document.nodeType!==11)return v}catch(E){}return q(A,Na,null,[s]).length>0};q.contains=function(s,A){if((s.ownerDocument||s)!==Na)La(s);return Hb(s,A)};q.attr=function(s,A){var v;if((s.ownerDocument||s)!==Na)La(s);Xa||(A=A.toLowerCase());if(v=ma.attrHandle[A])return v(s);if(Xa||Ia.attributes)return s.getAttribute(A);return((v=s.getAttributeNode(A))||s.getAttribute(A))&&s[A]===
true?A:v&&v.specified?v.value:null};q.error=function(s){throw new Error("Syntax error, unrecognized expression: "+s);};q.uniqueSort=function(s){var A,v=[],E=1,S=0;Ua=!Ia.detectDuplicates;s.sort($b);if(Ua){for(;A=s[E];E++)if(A===s[E-1])S=v.push(E);for(;S--;)s.splice(v[S],1)}return s};Ab=q.getText=function(s){var A,v="",E=0;if(A=s.nodeType)if(A===1||A===9||A===11)if(typeof s.textContent==="string")return s.textContent;else for(s=s.firstChild;s;s=s.nextSibling)v+=Ab(s);else{if(A===3||A===4)return s.nodeValue}else for(;A=
s[E];E++)v+=Ab(A);return v};ma=q.selectors={cacheLength:50,createPseudo:m,match:Nb,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(s){s[1]=s[1].replace(eb,fb);s[3]=(s[4]||s[5]||"").replace(eb,fb);if(s[2]==="~=")s[3]=" "+s[3]+" ";return s.slice(0,4)},CHILD:function(s){s[1]=s[1].toLowerCase();if(s[1].slice(0,3)==="nth"){s[3]||q.error(s[0]);s[4]=+(s[4]?s[5]+(s[6]||1):2*(s[3]==="even"||
s[3]==="odd"));s[5]=+(s[7]+s[8]||s[3]==="odd")}else s[3]&&q.error(s[0]);return s},PSEUDO:function(s){var A,v=!s[5]&&s[2];if(Nb.CHILD.test(s[0]))return null;if(s[4])s[2]=s[4];else if(v&&qd.test(v)&&(A=V(v,true))&&(A=v.indexOf(")",v.length-A)-v.length)){s[0]=s[0].slice(0,A);s[2]=v.slice(0,A)}return s.slice(0,3)}},filter:{TAG:function(s){if(s==="*")return function(){return true};s=s.replace(eb,fb).toLowerCase();return function(A){return A.nodeName&&A.nodeName.toLowerCase()===s}},CLASS:function(s){var A=
wc[s+" "];return A||(A=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+s+"([\\x20\\t\\r\\n\\f]|$)"))&&wc(s,function(v){return A.test(v.className||typeof v.getAttribute!==bb&&v.getAttribute("class")||"")})},ATTR:function(s,A,v){return function(E){E=q.attr(E,s);if(E==null)return A==="!=";if(!A)return true;E+="";return A==="="?E===v:A==="!="?E!==v:A==="^="?v&&E.indexOf(v)===0:A==="*="?v&&E.indexOf(v)>-1:A==="$="?v&&E.slice(-v.length)===v:A==="~="?(" "+E+" ").indexOf(v)>-1:A==="|="?E===v||E.slice(0,v.length+1)===
v+"-":false}},CHILD:function(s,A,v,E,S){var aa=s.slice(0,3)!=="nth",T=s.slice(-4)!=="last",ha=A==="of-type";return E===1&&S===0?function(ca){return!!ca.parentNode}:function(ca,wa,na){var xa,va,Ba,Ma,Fa;wa=aa!==T?"nextSibling":"previousSibling";var ya=ca.parentNode,qb=ha&&ca.nodeName.toLowerCase();na=!na&&!ha;if(ya){if(aa){for(;wa;){for(va=ca;va=va[wa];)if(ha?va.nodeName.toLowerCase()===qb:va.nodeType===1)return false;Fa=wa=s==="only"&&!Fa&&"nextSibling"}return true}Fa=[T?ya.firstChild:ya.lastChild];
if(T&&na){na=ya[Ea]||(ya[Ea]={});xa=na[s]||[];Ma=xa[0]===ab&&xa[1];Ba=xa[0]===ab&&xa[2];for(va=Ma&&ya.childNodes[Ma];va=++Ma&&va&&va[wa]||(Ba=Ma=0)||Fa.pop();)if(va.nodeType===1&&++Ba&&va===ca){na[s]=[ab,Ma,Ba];break}}else if(na&&(xa=(ca[Ea]||(ca[Ea]={}))[s])&&xa[0]===ab)Ba=xa[1];else for(;va=++Ma&&va&&va[wa]||(Ba=Ma=0)||Fa.pop();)if((ha?va.nodeName.toLowerCase()===qb:va.nodeType===1)&&++Ba){if(na)(va[Ea]||(va[Ea]={}))[s]=[ab,Ba];if(va===ca)break}Ba-=S;return Ba===E||Ba%E===0&&Ba/E>=0}}},PSEUDO:function(s,
A){var v,E=ma.pseudos[s]||ma.setFilters[s.toLowerCase()]||q.error("unsupported pseudo: "+s);if(E[Ea])return E(A);if(E.length>1){v=[s,s,"",A];return ma.setFilters.hasOwnProperty(s.toLowerCase())?m(function(S,aa){for(var T,ha=E(S,A),ca=ha.length;ca--;){T=Zb.call(S,ha[ca]);S[T]=!(aa[T]=ha[ca])}}):function(S){return E(S,0,v)}}return E}},pseudos:{not:m(function(s){var A=[],v=[],E=rb(s.replace(Mb,"$1"));return E[Ea]?m(function(S,aa,T,ha){ha=E(S,null,ha,[]);for(var ca=S.length;ca--;)if(T=ha[ca])S[ca]=!(aa[ca]=
T)}):function(S,aa,T){A[0]=S;E(A,null,T,v);return!v.pop()}}),has:m(function(s){return function(A){return q(s,A).length>0}}),contains:m(function(s){return function(A){return(A.textContent||A.innerText||Ab(A)).indexOf(s)>-1}}),lang:m(function(s){rd.test(s||"")||q.error("unsupported lang: "+s);s=s.replace(eb,fb).toLowerCase();return function(A){var v;do if(v=Xa?A.getAttribute("xml:lang")||A.getAttribute("lang"):A.lang){v=v.toLowerCase();return v===s||v.indexOf(s+"-")===0}while((A=A.parentNode)&&A.nodeType===
1);return false}}),target:function(s){var A=c.location&&c.location.hash;return A&&A.slice(1)===s.id},root:function(s){return s===Qa},focus:function(s){return s===Na.activeElement&&(!Na.hasFocus||Na.hasFocus())&&!!(s.type||s.href||~s.tabIndex)},enabled:function(s){return s.disabled===false},disabled:function(s){return s.disabled===true},checked:function(s){var A=s.nodeName.toLowerCase();return A==="input"&&!!s.checked||A==="option"&&!!s.selected},selected:function(s){return s.selected===true},empty:function(s){for(s=
s.firstChild;s;s=s.nextSibling)if(s.nodeName>"@"||s.nodeType===3||s.nodeType===4)return false;return true},parent:function(s){return!ma.pseudos.empty(s)},header:function(s){return td.test(s.nodeName)},input:function(s){return sd.test(s.nodeName)},button:function(s){var A=s.nodeName.toLowerCase();return A==="input"&&s.type==="button"||A==="button"},text:function(s){var A;return s.nodeName.toLowerCase()==="input"&&s.type==="text"&&((A=s.getAttribute("type"))==null||A.toLowerCase()===s.type)},first:F(function(){return[0]}),
last:F(function(s,A){return[A-1]}),eq:F(function(s,A,v){return[v<0?v+A:v]}),even:F(function(s,A){for(var v=0;v<A;v+=2)s.push(v);return s}),odd:F(function(s,A){for(var v=1;v<A;v+=2)s.push(v);return s}),lt:F(function(s,A,v){for(A=v<0?v+A:v;--A>=0;)s.push(A);return s}),gt:F(function(s,A,v){for(v=v<0?v+A:v;++v<A;)s.push(v);return s})}};for(ua in{radio:true,checkbox:true,file:true,password:true,image:true})ma.pseudos[ua]=C(ua);for(ua in{submit:true,reset:true})ma.pseudos[ua]=N(ua);rb=q.compile=function(s,
A){var v,E=[],S=[],aa=xc[s+" "];if(!aa){A||(A=V(s));for(v=A.length;v--;){aa=zb(A[v]);aa[Ea]?E.push(aa):S.push(aa)}aa=xc(s,Oa(S,E))}return aa};ma.pseudos.nth=ma.pseudos.eq;ma.filters=Ib.prototype=ma.pseudos;ma.setFilters=new Ib;La();q.attr=g.attr;g.find=q;g.expr=q.selectors;g.expr[":"]=g.expr.pseudos;g.unique=q.uniqueSort;g.text=q.getText;g.isXMLDoc=q.isXML;g.contains=q.contains})(a);var vd=/Until$/,wd=/^(?:parents|prev(?:Until|All))/,Qc=/^.[^:#\[\.,]*$/,zc=g.expr.match.needsContext,xd={children:true,
contents:true,next:true,prev:true};g.fn.extend({find:function(c){var e,h,l,m=this.length;if(typeof c!=="string"){l=this;return this.pushStack(g(c).filter(function(){for(e=0;e<m;e++)if(g.contains(l[e],this))return true}))}h=[];for(e=0;e<m;e++)g.find(c,this[e],h);h=this.pushStack(m>1?g.unique(h):h);h.selector=(this.selector?this.selector+" ":"")+c;return h},has:function(c){var e,h=g(c,this),l=h.length;return this.filter(function(){for(e=0;e<l;e++)if(g.contains(this,h[e]))return true})},not:function(c){return this.pushStack(H(this,
c,false))},filter:function(c){return this.pushStack(H(this,c,true))},is:function(c){return!!c&&(typeof c==="string"?zc.test(c)?g(c,this.context).index(this[0])>=0:g.filter(c,this).length>0:this.filter(c).length>0)},closest:function(c,e){for(var h,l=0,m=this.length,o=[],q=zc.test(c)||typeof c!=="string"?g(c,e||this.context):0;l<m;l++)for(h=this[l];h&&h.ownerDocument&&h!==e&&h.nodeType!==11;){if(q?q.index(h)>-1:g.find.matchesSelector(h,c)){o.push(h);break}h=h.parentNode}return this.pushStack(o.length>
1?g.unique(o):o)},index:function(c){if(!c)return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;if(typeof c==="string")return g.inArray(this[0],g(c));return g.inArray(c.jquery?c[0]:c,this)},add:function(c,e){c=typeof c==="string"?g(c,e):g.makeArray(c&&c.nodeType?[c]:c);c=g.merge(this.get(),c);return this.pushStack(g.unique(c))},addBack:function(c){return this.add(c==null?this.prevObject:this.prevObject.filter(c))}});g.fn.andSelf=g.fn.addBack;g.each({parent:function(c){return(c=c.parentNode)&&
c.nodeType!==11?c:null},parents:function(c){return g.dir(c,"parentNode")},parentsUntil:function(c,e,h){return g.dir(c,"parentNode",h)},next:function(c){return Y(c,"nextSibling")},prev:function(c){return Y(c,"previousSibling")},nextAll:function(c){return g.dir(c,"nextSibling")},prevAll:function(c){return g.dir(c,"previousSibling")},nextUntil:function(c,e,h){return g.dir(c,"nextSibling",h)},prevUntil:function(c,e,h){return g.dir(c,"previousSibling",h)},siblings:function(c){return g.sibling((c.parentNode||
{}).firstChild,c)},children:function(c){return g.sibling(c.firstChild)},contents:function(c){return g.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:g.merge([],c.childNodes)}},function(c,e){g.fn[c]=function(h,l){var m=g.map(this,e,h);vd.test(c)||(l=h);if(l&&typeof l==="string")m=g.filter(l,m);m=this.length>1&&!xd[c]?g.unique(m):m;if(this.length>1&&wd.test(c))m=m.reverse();return this.pushStack(m)}});g.extend({filter:function(c,e,h){if(h)c=":not("+c+")";return e.length===1?g.find.matchesSelector(e[0],
c)?[e[0]]:[]:g.find.matches(c,e)},dir:function(c,e,h){var l=[];for(c=c[e];c&&c.nodeType!==9&&(h===b||c.nodeType!==1||!g(c).is(h));){c.nodeType===1&&l.push(c);c=c[e]}return l},sibling:function(c,e){for(var h=[];c;c=c.nextSibling)c.nodeType===1&&c!==e&&h.push(c);return h}});var jc="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",yd=/ jQuery\d+="(?:null|\d+)"/g,Ac=new RegExp("<(?:"+jc+")[\\s/>]",
"i"),bc=/^\s+/,Bc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Cc=/<([\w:]+)/,Dc=/<tbody/i,zd=/<|&#?\w+;/,Ad=/<(?:script|style|link)/i,Rb=/^(?:checkbox|radio)$/i,Bd=/checked\s*(?:[^=]|=\s*.checked.)/i,Ec=/^$|\/(?:java|ecma)script/i,Rc=/^true\/(.*)/,Cd=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Va={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:g.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},cc=M(R).appendChild(R.createElement("div"));Va.optgroup=Va.option;Va.tbody=Va.tfoot=Va.colgroup=Va.caption=Va.thead;Va.th=Va.td;g.fn.extend({text:function(c){return g.access(this,function(e){return e===b?g.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(e))},
null,c,arguments.length)},wrapAll:function(c){if(g.isFunction(c))return this.each(function(h){g(this).wrapAll(c.call(this,h))});if(this[0]){var e=g(c,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&e.insertBefore(this[0]);e.map(function(){for(var h=this;h.firstChild&&h.firstChild.nodeType===1;)h=h.firstChild;return h}).append(this)}return this},wrapInner:function(c){if(g.isFunction(c))return this.each(function(e){g(this).wrapInner(c.call(this,e))});return this.each(function(){var e=g(this),
h=e.contents();h.length?h.wrapAll(c):e.append(c)})},wrap:function(c){var e=g.isFunction(c);return this.each(function(h){g(this).wrapAll(e?c.call(this,h):c)})},unwrap:function(){return this.parent().each(function(){g.nodeName(this,"body")||g(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){if(this.nodeType===1||this.nodeType===11||this.nodeType===9)this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){if(this.nodeType===
1||this.nodeType===11||this.nodeType===9)this.insertBefore(c,this.firstChild)})},before:function(){return this.domManip(arguments,false,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return this.domManip(arguments,false,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},remove:function(c,e){for(var h,l=0;(h=this[l])!=null;l++)if(!c||g.filter(c,[h]).length>0){!e&&h.nodeType===1&&g.cleanData(t(h));if(h.parentNode){e&&g.contains(h.ownerDocument,
h)&&P(t(h,"script"));h.parentNode.removeChild(h)}}return this},empty:function(){for(var c,e=0;(c=this[e])!=null;e++){for(c.nodeType===1&&g.cleanData(t(c,false));c.firstChild;)c.removeChild(c.firstChild);if(c.options&&g.nodeName(c,"select"))c.options.length=0}return this},clone:function(c,e){c=c==null?false:c;e=e==null?c:e;return this.map(function(){return g.clone(this,c,e)})},html:function(c){return g.access(this,function(e){var h=this[0]||{},l=0,m=this.length;if(e===b)return h.nodeType===1?h.innerHTML.replace(yd,
""):b;if(typeof e==="string"&&!Ad.test(e)&&(g.support.htmlSerialize||!Ac.test(e))&&(g.support.leadingWhitespace||!bc.test(e))&&!Va[(Cc.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Bc,"<$1></$2>");try{for(;l<m;l++){h=this[l]||{};if(h.nodeType===1){g.cleanData(t(h,false));h.innerHTML=e}}h=0}catch(o){}}h&&this.empty().append(e)},null,c,arguments.length)},replaceWith:function(c){if(!g.isFunction(c)&&typeof c!=="string")c=g(c).not(this).detach();return this.domManip([c],true,function(e){var h=this.nextSibling,
l=this.parentNode;if(l){g(this).remove();l.insertBefore(e,h)}})},detach:function(c){return this.remove(c,true)},domManip:function(c,e,h){c=lb.apply([],c);var l,m,o,q,u=0,C=this.length,N=this,F=C-1,V=c[0],fa=g.isFunction(V);if(fa||!(C<=1||typeof V!=="string"||g.support.checkClone||!Bd.test(V)))return this.each(function(ja){var Aa=N.eq(ja);if(fa)c[0]=V.call(this,ja,e?Aa.html():b);Aa.domManip(c,e,h)});if(C){q=g.buildFragment(c,this[0].ownerDocument,false,this);l=q.firstChild;if(q.childNodes.length===
1)q=l;if(l){e=e&&g.nodeName(l,"tr");o=g.map(t(q,"script"),ka);for(m=o.length;u<C;u++){l=q;if(u!==F){l=g.clone(l,true,true);m&&g.merge(o,t(l,"script"))}h.call(e&&g.nodeName(this[u],"table")?da(this[u],"tbody"):this[u],l,u)}if(m){q=o[o.length-1].ownerDocument;g.map(o,D);for(u=0;u<m;u++){l=o[u];if(Ec.test(l.type||"")&&!g._data(l,"globalEval")&&g.contains(q,l))l.src?g.ajax({url:l.src,type:"GET",dataType:"script",async:false,global:false,"throws":true}):g.globalEval((l.text||l.textContent||l.innerHTML||
"").replace(Cd,""))}}q=l=null}}return this}});g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,e){g.fn[c]=function(h){for(var l=0,m=[],o=g(h),q=o.length-1;l<=q;l++){h=l===q?this:this.clone(true);g(o[l])[e](h);Sa.apply(m,h.get())}return this.pushStack(m)}});g.extend({clone:function(c,e,h){var l,m,o,q,u,C=g.contains(c.ownerDocument,c);if(g.support.html5Clone||g.isXMLDoc(c)||!Ac.test("<"+c.nodeName+">"))o=c.cloneNode(true);else{cc.innerHTML=
c.outerHTML;cc.removeChild(o=cc.firstChild)}if((!g.support.noCloneEvent||!g.support.noCloneChecked)&&(c.nodeType===1||c.nodeType===11)&&!g.isXMLDoc(c)){l=t(o);u=t(c);for(q=0;(m=u[q])!=null;++q)l[q]&&p(m,l[q])}if(e)if(h){u=u||t(c);l=l||t(o);for(q=0;(m=u[q])!=null;q++)k(m,l[q])}else k(c,o);l=t(o,"script");l.length>0&&P(l,!C&&t(c,"script"));return o},buildFragment:function(c,e,h,l){for(var m,o,q,u,C,N,F=c.length,V=M(e),fa=[],ja=0;ja<F;ja++)if((o=c[ja])||o===0)if(g.type(o)==="object")g.merge(fa,o.nodeType?
[o]:o);else if(zd.test(o)){q=q||V.appendChild(e.createElement("div"));u=(Cc.exec(o)||["",""])[1].toLowerCase();N=Va[u]||Va._default;q.innerHTML=N[1]+o.replace(Bc,"<$1></$2>")+N[2];for(m=N[0];m--;)q=q.lastChild;!g.support.leadingWhitespace&&bc.test(o)&&fa.push(e.createTextNode(bc.exec(o)[0]));if(!g.support.tbody)for(m=(o=u==="table"&&!Dc.test(o)?q.firstChild:N[1]==="<table>"&&!Dc.test(o)?q:0)&&o.childNodes.length;m--;)if(g.nodeName(C=o.childNodes[m],"tbody")&&!C.childNodes.length)o.removeChild(C);
g.merge(fa,q.childNodes);for(q.textContent="";q.firstChild;)q.removeChild(q.firstChild);q=V.lastChild}else fa.push(e.createTextNode(o));q&&V.removeChild(q);g.support.appendChecked||g.grep(t(fa,"input"),z);for(ja=0;o=fa[ja++];)if(!(l&&g.inArray(o,l)!==-1)){c=g.contains(o.ownerDocument,o);q=t(V.appendChild(o),"script");c&&P(q);if(h)for(m=0;o=q[m++];)if(Ec.test(o.type||""))h.push(o)}return V},cleanData:function(c,e){for(var h,l,m,o,q=0,u=g.expando,C=g.cache,N=g.support.deleteExpando,F=g.event.special;(h=
c[q])!=null;q++)if(e||g.acceptData(h))if(o=(m=h[u])&&C[m]){if(o.events)for(l in o.events)F[l]?g.event.remove(h,l):g.removeEvent(h,l,o.handle);if(C[m]){delete C[m];if(N)delete h[u];else if(typeof h.removeAttribute!==ea)h.removeAttribute(u);else h[u]=null;Ra.push(m)}}}});var Db,ib,jb,dc=/alpha\([^)]*\)/i,Dd=/opacity\s*=\s*([^)]*)/,Ed=/^(top|right|bottom|left)$/,Fd=/^(none|table(?!-c[ea]).+)/,Fc=/^margin/,Sc=new RegExp("^("+Lb+")(.*)$","i"),Jb=new RegExp("^("+Lb+")(?!px)[a-z%]+$","i"),Gd=new RegExp("^([+-])=("+
Lb+")","i"),lc={BODY:"block"},Hd={position:"absolute",visibility:"hidden",display:"block"},Gc={letterSpacing:0,fontWeight:400},hb=["Top","Right","Bottom","Left"],kc=["Webkit","O","Moz","ms"];g.fn.extend({css:function(c,e){return g.access(this,function(h,l,m){var o,q={},u=0;if(g.isArray(l)){o=ib(h);for(m=l.length;u<m;u++)q[l[u]]=g.css(h,l[u],false,o);return q}return m!==b?g.style(h,l,m):g.css(h,l)},c,e,arguments.length>1)},show:function(){return J(this,true)},hide:function(){return J(this)},toggle:function(c){var e=
typeof c==="boolean";return this.each(function(){(e?c:B(this))?g(this).show():g(this).hide()})}});g.extend({cssHooks:{opacity:{get:function(c,e){if(e){c=jb(c,"opacity");return c===""?"1":c}}}},cssNumber:{columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":g.support.cssFloat?"cssFloat":"styleFloat"},style:function(c,e,h,l){if(!(!c||c.nodeType===3||c.nodeType===8||!c.style)){var m,o,q,u=g.camelCase(e),C=c.style;
e=g.cssProps[u]||(g.cssProps[u]=I(C,u));q=g.cssHooks[e]||g.cssHooks[u];if(h!==b){o=typeof h;if(o==="string"&&(m=Gd.exec(h))){h=(m[1]+1)*m[2]+parseFloat(g.css(c,e));o="number"}if(!(h==null||o==="number"&&isNaN(h))){if(o==="number"&&!g.cssNumber[u])h+="px";if(!g.support.clearCloneStyle&&h===""&&e.indexOf("background")===0)C[e]="inherit";if(!q||!("set"in q)||(h=q.set(c,h,l))!==b)try{C[e]=h}catch(N){}}}else{if(q&&"get"in q&&(m=q.get(c,false,l))!==b)return m;return C[e]}}},css:function(c,e,h,l){var m,
o;o=g.camelCase(e);e=g.cssProps[o]||(g.cssProps[o]=I(c.style,o));if((o=g.cssHooks[e]||g.cssHooks[o])&&"get"in o)m=o.get(c,true,h);if(m===b)m=jb(c,e,l);if(m==="normal"&&e in Gc)m=Gc[e];if(h===""||h){c=parseFloat(m);return h===true||g.isNumeric(c)?c||0:m}return m},swap:function(c,e,h,l){var m,o={};for(m in e){o[m]=c.style[m];c.style[m]=e[m]}h=h.apply(c,l||[]);for(m in e)c.style[m]=o[m];return h}});if(a.getComputedStyle){ib=function(c){return a.getComputedStyle(c,null)};jb=function(c,e,h){var l;var m=
(h=h||ib(c))?h.getPropertyValue(e)||h[e]:b,o=c.style;if(h){if(m===""&&!g.contains(c.ownerDocument,c))m=g.style(c,e);if(Jb.test(m)&&Fc.test(e)){c=o.width;e=o.minWidth;l=o.maxWidth;o.minWidth=o.maxWidth=o.width=m;m=h.width;o.width=c;o.minWidth=e;o.maxWidth=l}}return m}}else if(R.documentElement.currentStyle){ib=function(c){return c.currentStyle};jb=function(c,e,h){var l,m,o=(h=h||ib(c))?h[e]:b,q=c.style;if(o==null&&q&&q[e])o=q[e];if(Jb.test(o)&&!Ed.test(e)){h=q.left;if(m=(l=c.runtimeStyle)&&l.left)l.left=
c.currentStyle.left;q.left=e==="fontSize"?"1em":o;o=q.pixelLeft+"px";q.left=h;if(m)l.left=m}return o===""?"auto":o}}g.each(["height","width"],function(c,e){g.cssHooks[e]={get:function(h,l,m){if(l)return h.offsetWidth===0&&Fd.test(g.css(h,"display"))?g.swap(h,Hd,function(){return K(h,e,m)}):K(h,e,m)},set:function(h,l,m){var o=m&&ib(h);return Q(h,l,m?w(h,e,m,g.support.boxSizing&&g.css(h,"boxSizing",false,o)==="border-box",o):0)}}});if(!g.support.opacity)g.cssHooks.opacity={get:function(c,e){return Dd.test((e&&
c.currentStyle?c.currentStyle.filter:c.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(c,e){var h=c.style;c=c.currentStyle;var l=g.isNumeric(e)?"alpha(opacity="+e*100+")":"",m=c&&c.filter||h.filter||"";h.zoom=1;if((e>=1||e==="")&&g.trim(m.replace(dc,""))===""&&h.removeAttribute){h.removeAttribute("filter");if(e===""||c&&!c.filter)return}h.filter=dc.test(m)?m.replace(dc,l):m+" "+l}};g(function(){if(!g.support.reliableMarginRight)g.cssHooks.marginRight={get:function(c,e){if(e)return g.swap(c,
{display:"inline-block"},jb,[c,"marginRight"])}};!g.support.pixelPosition&&g.fn.position&&g.each(["top","left"],function(c,e){g.cssHooks[e]={get:function(h,l){if(l){l=jb(h,e);return Jb.test(l)?g(h).position()[e]+"px":l}}}})});if(g.expr&&g.expr.filters){g.expr.filters.hidden=function(c){return c.offsetWidth<=0&&c.offsetHeight<=0||!g.support.reliableHiddenOffsets&&(c.style&&c.style.display||g.css(c,"display"))==="none"};g.expr.filters.visible=function(c){return!g.expr.filters.hidden(c)}}g.each({margin:"",
padding:"",border:"Width"},function(c,e){g.cssHooks[c+e]={expand:function(h){var l=0,m={};for(h=typeof h==="string"?h.split(" "):[h];l<4;l++)m[c+hb[l]+e]=h[l]||h[l-2]||h[0];return m}};if(!Fc.test(c))g.cssHooks[c+e].set=Q});var Id=/%20/g,Tc=/\[\]$/,Hc=/\r?\n/g,Jd=/^(?:submit|button|image|reset|file)$/i,Kd=/^(?:input|select|textarea|keygen)/i;g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=g.prop(this,"elements");return c?
g.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!g(this).is(":disabled")&&Kd.test(this.nodeName)&&!Jd.test(c)&&(this.checked||!Rb.test(c))}).map(function(c,e){c=g(this).val();return c==null?null:g.isArray(c)?g.map(c,function(h){return{name:e.name,value:h.replace(Hc,"\r\n")}}):{name:e.name,value:c.replace(Hc,"\r\n")}}).get()}});g.param=function(c,e){var h,l=[],m=function(o,q){q=g.isFunction(q)?q():q==null?"":q;l[l.length]=encodeURIComponent(o)+"="+encodeURIComponent(q)};if(e===
b)e=g.ajaxSettings&&g.ajaxSettings.traditional;if(g.isArray(c)||c.jquery&&!g.isPlainObject(c))g.each(c,function(){m(this.name,this.value)});else for(h in c)ra(h,c[h],e,m);return l.join("&").replace(Id,"+")};g.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(c,e){g.fn[e]=function(h,l){return arguments.length>0?this.on(e,null,
h,l):this.trigger(e)}});g.fn.hover=function(c,e){return this.mouseenter(c).mouseleave(e||c)};var tb,gb,ec=g.now(),fc=/\?/,Ld=/#.*$/,Ic=/([?&])_=[^&]*/,Md=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Nd=/^(?:GET|HEAD)$/,Od=/^\/\//,Jc=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Kc=g.fn.load,Lc={},Sb={},Mc="*/".concat("*");try{gb=pa.href}catch(Td){gb=R.createElement("a");gb.href="";gb=gb.href}tb=Jc.exec(gb.toLowerCase())||[];g.fn.load=function(c,e,h){if(typeof c!=="string"&&Kc)return Kc.apply(this,arguments);var l,
m,o,q=this,u=c.indexOf(" ");if(u>=0){l=c.slice(u,c.length);c=c.slice(0,u)}if(g.isFunction(e)){h=e;e=b}else if(e&&typeof e==="object")o="POST";q.length>0&&g.ajax({url:c,type:o,dataType:"html",data:e}).done(function(C){m=arguments;q.html(l?g("<div>").append(g.parseHTML(C)).find(l):C)}).complete(h&&function(C,N){q.each(h,m||[C.responseText,N,C])});return this};g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(c,e){g.fn[e]=function(h){return this.on(e,h)}});
g.each(["get","post"],function(c,e){g[e]=function(h,l,m,o){if(g.isFunction(l)){o=o||m;m=l;l=b}return g.ajax({url:h,type:e,dataType:o,data:l,success:m})}});g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gb,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(tb[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},
contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":true,"text json":g.parseJSON,"text xml":g.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(c,e){return e?W(W(c,g.ajaxSettings),e):W(g.ajaxSettings,c)},ajaxPrefilter:X(Lc),ajaxTransport:X(Sb),ajax:function(c,e){function h(ua,Ha,ma,Ab){var Pa,rb,Ua,pb,La=Ha;if(Oa!==2){Oa=2;q&&clearTimeout(q);C=b;o=Ab||"";ta.readyState=ua>0?4:0;if(ma)pb=ba(F,ta,
ma);if(ua>=200&&ua<300||ua===304){if(F.ifModified){if(ma=ta.getResponseHeader("Last-Modified"))g.lastModified[m]=ma;if(ma=ta.getResponseHeader("etag"))g.etag[m]=ma}if(ua===204){Pa=true;La="nocontent"}else if(ua===304){Pa=true;La="notmodified"}else{Pa=oa(F,pb);La=Pa.state;rb=Pa.data;Ua=Pa.error;Pa=!Ua}}else{Ua=La;if(ua||!La){La="error";if(ua<0)ua=0}}ta.status=ua;ta.statusText=(Ha||La)+"";Pa?ja.resolveWith(V,[rb,La,ta]):ja.rejectWith(V,[ta,La,Ua]);ta.statusCode(Ga);Ga=b;if(u)fa.trigger(Pa?"ajaxSuccess":
"ajaxError",[ta,F,Pa?rb:Ua]);Aa.fireWith(V,[ta,La]);if(u){fa.trigger("ajaxComplete",[ta,F]);--g.active||g.event.trigger("ajaxStop")}}}if(typeof c==="object"){e=c;c=b}e=e||{};var l,m,o,q,u,C,N,F=g.ajaxSetup({},e),V=F.context||F,fa=F.context&&(V.nodeType||V.jquery)?g(V):g.event,ja=g.Deferred(),Aa=g.Callbacks("once memory"),Ga=F.statusCode||{},Ta={},zb={},Oa=0,Ob="canceled",ta={readyState:0,getResponseHeader:function(ua){var Ha;if(Oa===2){if(!N)for(N={};Ha=Md.exec(o);)N[Ha[1].toLowerCase()]=Ha[2];Ha=
N[ua.toLowerCase()]}return Ha==null?null:Ha},getAllResponseHeaders:function(){return Oa===2?o:null},setRequestHeader:function(ua,Ha){var ma=ua.toLowerCase();if(!Oa){ua=zb[ma]=zb[ma]||ua;Ta[ua]=Ha}return this},overrideMimeType:function(ua){if(!Oa)F.mimeType=ua;return this},statusCode:function(ua){var Ha;if(ua)if(Oa<2)for(Ha in ua)Ga[Ha]=[Ga[Ha],ua[Ha]];else ta.always(ua[ta.status]);return this},abort:function(ua){ua=ua||Ob;C&&C.abort(ua);h(0,ua);return this}};ja.promise(ta).complete=Aa.add;ta.success=
ta.done;ta.error=ta.fail;F.url=((c||F.url||gb)+"").replace(Ld,"").replace(Od,tb[1]+"//");F.type=e.method||e.type||F.method||F.type;F.dataTypes=g.trim(F.dataType||"*").toLowerCase().match(Za)||[""];if(F.crossDomain==null){c=Jc.exec(F.url.toLowerCase());F.crossDomain=!!(c&&(c[1]!==tb[1]||c[2]!==tb[2]||(c[3]||(c[1]==="http:"?80:443))!=(tb[3]||(tb[1]==="http:"?80:443))))}if(F.data&&F.processData&&typeof F.data!=="string")F.data=g.param(F.data,F.traditional);ga(Lc,F,e,ta);if(Oa===2)return ta;(u=F.global)&&
g.active++===0&&g.event.trigger("ajaxStart");F.type=F.type.toUpperCase();F.hasContent=!Nd.test(F.type);m=F.url;if(!F.hasContent){if(F.data){m=F.url+=(fc.test(m)?"&":"?")+F.data;delete F.data}if(F.cache===false)F.url=Ic.test(m)?m.replace(Ic,"$1_="+ec++):m+(fc.test(m)?"&":"?")+"_="+ec++}if(F.ifModified){g.lastModified[m]&&ta.setRequestHeader("If-Modified-Since",g.lastModified[m]);g.etag[m]&&ta.setRequestHeader("If-None-Match",g.etag[m])}if(F.data&&F.hasContent&&F.contentType!==false||e.contentType)ta.setRequestHeader("Content-Type",
F.contentType);ta.setRequestHeader("Accept",F.dataTypes[0]&&F.accepts[F.dataTypes[0]]?F.accepts[F.dataTypes[0]]+(F.dataTypes[0]!=="*"?", "+Mc+"; q=0.01":""):F.accepts["*"]);for(l in F.headers)ta.setRequestHeader(l,F.headers[l]);if(F.beforeSend&&(F.beforeSend.call(V,ta,F)===false||Oa===2))return ta.abort();Ob="abort";for(l in{success:1,error:1,complete:1})ta[l](F[l]);if(C=ga(Sb,F,e,ta)){ta.readyState=1;u&&fa.trigger("ajaxSend",[ta,F]);if(F.async&&F.timeout>0)q=setTimeout(function(){ta.abort("timeout")},
F.timeout);try{Oa=1;C.send(Ta,h)}catch(Ib){if(Oa<2)h(-1,Ib);else throw Ib;}}else h(-1,"No Transport");return ta},getScript:function(c,e){return g.get(c,b,e,"script")},getJSON:function(c,e,h){return g.get(c,e,h,"json")}});g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(c){g.globalEval(c);return c}}});g.ajaxPrefilter("script",function(c){if(c.cache===b)c.cache=
false;if(c.crossDomain){c.type="GET";c.global=false}});g.ajaxTransport("script",function(c){if(c.crossDomain){var e,h=R.head||g("head")[0]||R.documentElement;return{send:function(l,m){e=R.createElement("script");e.async=true;if(c.scriptCharset)e.charset=c.scriptCharset;e.src=c.url;e.onload=e.onreadystatechange=function(o,q){if(q||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;e.parentNode&&e.parentNode.removeChild(e);e=null;q||m(200,"success")}};h.insertBefore(e,
h.firstChild)},abort:function(){e&&e.onload(b,true)}}}});var Nc=[],gc=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var c=Nc.pop()||g.expando+"_"+ec++;this[c]=true;return c}});g.ajaxPrefilter("json jsonp",function(c,e,h){var l,m,o,q=c.jsonp!==false&&(gc.test(c.url)?"url":typeof c.data==="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&gc.test(c.data)&&"data");if(q||c.dataTypes[0]==="jsonp"){l=c.jsonpCallback=g.isFunction(c.jsonpCallback)?c.jsonpCallback():
c.jsonpCallback;if(q)c[q]=c[q].replace(gc,"$1"+l);else if(c.jsonp!==false)c.url+=(fc.test(c.url)?"&":"?")+c.jsonp+"="+l;c.converters["script json"]=function(){o||g.error(l+" was not called");return o[0]};c.dataTypes[0]="json";m=a[l];a[l]=function(){o=arguments};h.always(function(){a[l]=m;if(c[l]){c.jsonpCallback=e.jsonpCallback;Nc.push(l)}o&&g.isFunction(m)&&m(o[0]);o=m=b});return"script"}});var Cb,Pd=0,hc=a.ActiveXObject&&function(){var c;for(c in Cb)Cb[c](b,true)};g.ajaxSettings.xhr=a.ActiveXObject?
function(){return!this.isLocal&&qa()||za()}:qa;pa=g.ajaxSettings.xhr();g.support.cors=!!pa&&"withCredentials"in pa;(pa=g.support.ajax=!!pa)&&g.ajaxTransport(function(c){if(!c.crossDomain||g.support.cors){var e;return{send:function(h,l){var m,o,q=c.xhr();c.username?q.open(c.type,c.url,c.async,c.username,c.password):q.open(c.type,c.url,c.async);if(c.xhrFields)for(o in c.xhrFields)q[o]=c.xhrFields[o];c.mimeType&&q.overrideMimeType&&q.overrideMimeType(c.mimeType);if(!c.crossDomain&&!h["X-Requested-With"])h["X-Requested-With"]=
"XMLHttpRequest";try{for(o in h)q.setRequestHeader(o,h[o])}catch(u){}q.send(c.hasContent&&c.data||null);e=function(C,N){var F,V,fa,ja;try{if(e&&(N||q.readyState===4)){e=b;if(m){q.onreadystatechange=g.noop;hc&&delete Cb[m]}if(N)q.readyState!==4&&q.abort();else{ja={};F=q.status;V=q.getAllResponseHeaders();if(typeof q.responseText==="string")ja.text=q.responseText;try{fa=q.statusText}catch(Aa){fa=""}if(!F&&c.isLocal&&!c.crossDomain)F=ja.text?200:404;else if(F===1223)F=204}}}catch(Ga){N||l(-1,Ga)}ja&&
l(F,fa,ja,V)};if(c.async)if(q.readyState===4)setTimeout(e);else{m=++Pd;if(hc){if(!Cb){Cb={};g(a).unload(hc)}Cb[m]=e}q.onreadystatechange=e}else e()},abort:function(){e&&e(b,true)}}}});var ub,Qb,Uc=/^(?:toggle|show|hide)$/,Qd=new RegExp("^(?:([+-])=|)("+Lb+")([a-z%]*)$","i"),Rd=/queueHooks$/,Kb=[Fb],Eb={"*":[function(c,e){var h,l=this.createTween(c,e),m=Qd.exec(e),o=l.cur(),q=+o||0,u=1,C=20;if(m){e=+m[2];h=m[3]||(g.cssNumber[c]?"":"px");if(h!=="px"&&q){q=g.css(l.elem,c,true)||e||1;do{u=u||".5";q/=
u;g.style(l.elem,c,q+h)}while(u!==(u=l.cur()/o)&&u!==1&&--C)}l.unit=h;l.start=q;l.end=m[1]?q+(m[1]+1)*e:e}return l}]};g.Animation=g.extend(kb,{tweener:function(c,e){if(g.isFunction(c)){e=c;c=["*"]}else c=c.split(" ");for(var h,l=0,m=c.length;l<m;l++){h=c[l];Eb[h]=Eb[h]||[];Eb[h].unshift(e)}},prefilter:function(c,e){e?Kb.unshift(c):Kb.push(c)}});g.Tween=Ja;Ja.prototype={constructor:Ja,init:function(c,e,h,l,m,o){this.elem=c;this.prop=h;this.easing=m||"swing";this.options=e;this.start=this.now=this.cur();
this.end=l;this.unit=o||(g.cssNumber[h]?"":"px")},cur:function(){var c=Ja.propHooks[this.prop];return c&&c.get?c.get(this):Ja.propHooks._default.get(this)},run:function(c){var e,h=Ja.propHooks[this.prop];this.pos=this.options.duration?(e=g.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration)):(e=c);this.now=(this.end-this.start)*e+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);h&&h.set?h.set(this):Ja.propHooks._default.set(this);return this}};Ja.prototype.init.prototype=
Ja.prototype;Ja.propHooks={_default:{get:function(c){if(c.elem[c.prop]!=null&&(!c.elem.style||c.elem.style[c.prop]==null))return c.elem[c.prop];c=g.css(c.elem,c.prop,"");return!c||c==="auto"?0:c},set:function(c){if(g.fx.step[c.prop])g.fx.step[c.prop](c);else if(c.elem.style&&(c.elem.style[g.cssProps[c.prop]]!=null||g.cssHooks[c.prop]))g.style(c.elem,c.prop,c.now+c.unit);else c.elem[c.prop]=c.now}}};Ja.propHooks.scrollTop=Ja.propHooks.scrollLeft={set:function(c){if(c.elem.nodeType&&c.elem.parentNode)c.elem[c.prop]=
c.now}};g.each(["toggle","show","hide"],function(c,e){var h=g.fn[e];g.fn[e]=function(l,m,o){return l==null||typeof l==="boolean"?h.apply(this,arguments):this.animate(ia(e,true),l,m,o)}});g.fn.extend({fadeTo:function(c,e,h,l){return this.filter(B).css("opacity",0).show().end().animate({opacity:e},c,h,l)},animate:function(c,e,h,l){var m=g.isEmptyObject(c),o=g.speed(e,h,l),q=function(){var u=kb(this,g.extend({},c),o);q.finish=function(){u.stop(true)};if(m||g._data(this,"finish"))u.stop(true)};q.finish=
q;return m||o.queue===false?this.each(q):this.queue(o.queue,q)},stop:function(c,e,h){var l=function(m){var o=m.stop;delete m.stop;o(h)};if(typeof c!=="string"){h=e;e=c;c=b}if(e&&c!==false)this.queue(c||"fx",[]);return this.each(function(){var m=true,o=c!=null&&c+"queueHooks",q=g.timers,u=g._data(this);if(o)u[o]&&u[o].stop&&l(u[o]);else for(o in u)u[o]&&u[o].stop&&Rd.test(o)&&l(u[o]);for(o=q.length;o--;)if(q[o].elem===this&&(c==null||q[o].queue===c)){q[o].anim.stop(h);m=false;q.splice(o,1)}if(m||!h)g.dequeue(this,
c)})},finish:function(c){if(c!==false)c=c||"fx";return this.each(function(){var e,h=g._data(this),l=h[c+"queue"];e=h[c+"queueHooks"];var m=g.timers,o=l?l.length:0;h.finish=true;g.queue(this,c,[]);e&&e.cur&&e.cur.finish&&e.cur.finish.call(this);for(e=m.length;e--;)if(m[e].elem===this&&m[e].queue===c){m[e].anim.stop(true);m.splice(e,1)}for(e=0;e<o;e++)l[e]&&l[e].finish&&l[e].finish.call(this);delete h.finish})}});g.each({slideDown:ia("show"),slideUp:ia("hide"),slideToggle:ia("toggle"),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,e){g.fn[c]=function(h,l,m){return this.animate(e,h,l,m)}});g.speed=function(c,e,h){var l=c&&typeof c==="object"?g.extend({},c):{complete:h||!h&&e||g.isFunction(c)&&c,duration:c,easing:h&&e||e&&!g.isFunction(e)&&e};l.duration=g.fx.off?0:typeof l.duration==="number"?l.duration:l.duration in g.fx.speeds?g.fx.speeds[l.duration]:g.fx.speeds._default;if(l.queue==null||l.queue===true)l.queue="fx";l.old=l.complete;l.complete=function(){g.isFunction(l.old)&&
l.old.call(this);l.queue&&g.dequeue(this,l.queue)};return l};g.easing={linear:function(c){return c},swing:function(c){return 0.5-Math.cos(c*Math.PI)/2}};g.timers=[];g.fx=Ja.prototype.init;g.fx.tick=function(){var c,e=g.timers,h=0;for(ub=g.now();h<e.length;h++){c=e[h];!c()&&e[h]===c&&e.splice(h--,1)}e.length||g.fx.stop();ub=b};g.fx.timer=function(c){c()&&g.timers.push(c)&&g.fx.start()};g.fx.interval=13;g.fx.start=function(){Qb||(Qb=setInterval(g.fx.tick,g.fx.interval))};g.fx.stop=function(){clearInterval(Qb);
Qb=null};g.fx.speeds={slow:600,fast:200,_default:400};g.fx.step={};if(g.expr&&g.expr.filters)g.expr.filters.animated=function(c){return g.grep(g.timers,function(e){return c===e.elem}).length};g.fn.offset=function(c){if(arguments.length)return c===b?this:this.each(function(o){g.offset.setOffset(this,c,o)});var e,h,l={top:0,left:0},m=(h=this[0])&&h.ownerDocument;if(m){e=m.documentElement;if(!g.contains(e,h))return l;if(typeof h.getBoundingClientRect!==ea)l=h.getBoundingClientRect();h=G(m);return{top:l.top+
(h.pageYOffset||e.scrollTop)-(e.clientTop||0),left:l.left+(h.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}}};g.offset={setOffset:function(c,e,h){var l=g.css(c,"position");if(l==="static")c.style.position="relative";var m=g(c),o=m.offset(),q=g.css(c,"top"),u=g.css(c,"left"),C={},N={};if((l==="absolute"||l==="fixed")&&g.inArray("auto",[q,u])>-1){N=m.position();l=N.top;u=N.left}else{l=parseFloat(q)||0;u=parseFloat(u)||0}if(g.isFunction(e))e=e.call(c,h,o);if(e.top!=null)C.top=e.top-o.top+l;if(e.left!=
null)C.left=e.left-o.left+u;"using"in e?e.using.call(c,C):m.css(C)}};g.fn.extend({position:function(){if(this[0]){var c,e,h={top:0,left:0},l=this[0];if(g.css(l,"position")==="fixed")e=l.getBoundingClientRect();else{c=this.offsetParent();e=this.offset();g.nodeName(c[0],"html")||(h=c.offset());h.top+=g.css(c[0],"borderTopWidth",true);h.left+=g.css(c[0],"borderLeftWidth",true)}return{top:e.top-h.top-g.css(l,"marginTop",true),left:e.left-h.left-g.css(l,"marginLeft",true)}}},offsetParent:function(){return this.map(function(){for(var c=
this.offsetParent||R.documentElement;c&&!g.nodeName(c,"html")&&g.css(c,"position")==="static";)c=c.offsetParent;return c||R.documentElement})}});g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,e){var h=/Y/.test(e);g.fn[c]=function(l){return g.access(this,function(m,o,q){var u=G(m);if(q===b)return u?e in u?u[e]:u.document.documentElement[o]:m[o];if(u)u.scrollTo(!h?q:g(u).scrollLeft(),h?q:g(u).scrollTop());else m[o]=q},c,l,arguments.length,null)}});g.each({Height:"height",Width:"width"},
function(c,e){g.each({padding:"inner"+c,content:e,"":"outer"+c},function(h,l){g.fn[l]=function(m,o){var q=arguments.length&&(h||typeof m!=="boolean"),u=h||(m===true||o===true?"margin":"border");return g.access(this,function(C,N,F){if(g.isWindow(C))return C.document.documentElement["client"+c];if(C.nodeType===9){N=C.documentElement;return Math.max(C.body["scroll"+c],N["scroll"+c],C.body["offset"+c],N["offset"+c],N["client"+c])}return F===b?g.css(C,N,u):g.style(C,N,F,u)},e,q?m:b,q,null)}})});a.jQuery=
a.$=g;typeof define==="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return g})})(window);jQuery.noConflict();var $j=jQuery;String.prototype.parseColor=function(a){var b="#";if(this.slice(0,4)=="rgb("){var d=this.slice(4,this.length-1).split(","),f=0;do b+=parseInt(d[f]).toColorPart();while(++f<3)}else if(this.slice(0,1)=="#"){if(this.length==4)for(f=1;f<4;f++)b+=(this.charAt(f)+this.charAt(f)).toLowerCase();if(this.length==7)b=this.toLowerCase()}return b.length==7?b:a||this};
Element.collectTextNodes=function(a){return $A($(a).childNodes).collect(function(b){return b.nodeType==3?b.nodeValue:b.hasChildNodes()?Element.collectTextNodes(b):""}).flatten().join("")};Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(d){return d.nodeType==3?d.nodeValue:d.hasChildNodes()&&!Element.hasClassName(d,b)?Element.collectTextNodesIgnoreClass(d,b):""}).flatten().join("")};
Element.setContentZoom=function(a,b){a=$(a);a.setStyle({fontSize:b/100+"em"});Prototype.Browser.WebKit&&window.scrollBy(0,0);return a};Element.getInlineOpacity=function(a){return $(a).style.opacity||""};Element.forceRerendering=function(a){try{a=$(a);var b=document.createTextNode(" ");a.appendChild(b);a.removeChild(b)}catch(d){}};
var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(a){return-Math.cos(a*Math.PI)/2+0.5},reverse:function(a){return 1-a},flicker:function(a){a=-Math.cos(a*Math.PI)/4+0.75+Math.random()/4;return a>1?1:a},wobble:function(a){return-Math.cos(a*Math.PI*9*a)/2+0.5},pulse:function(a,b){return-Math.cos(a*((b||5)-0.5)*2*Math.PI)/2+0.5},spring:function(a){return 1-
Math.cos(a*4.5*Math.PI)*Math.exp(-a*6)},none:function(){return 0},full:function(){return 1}},DefaultOptions:{duration:1,fps:100,sync:false,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(a){var b="position:relative";if(Prototype.Browser.IE)b+=";zoom:1";a=$(a);$A(a.childNodes).each(function(d){if(d.nodeType==3){d.nodeValue.toArray().each(function(f){a.insertBefore((new Element("span",{style:b})).update(f==" "?String.fromCharCode(160):f),d)});Element.remove(d)}})},multiple:function(a,b,d){a=
(typeof a=="object"||Object.isFunction(a))&&a.length?a:$(a).childNodes;var f=Object.extend({speed:0.1,delay:0},d||{}),j=f.delay;$A(a).each(function(n,r){new b(n,Object.extend(f,{delay:r*f.speed+j}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(a,b,d){a=$(a);b=(b||"appear").toLowerCase();d=Object.extend({queue:{position:"end",scope:a.id||"global",limit:1}},d||{});Effect[a.visible()?Effect.PAIRS[b][1]:Effect.PAIRS[b][0]](a,d)}};
Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;
Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null},_each:function(a){this.effects._each(a)},add:function(a){var b=(new Date).getTime();switch(Object.isString(a.options.queue)?a.options.queue:a.options.queue.position){case "front":this.effects.findAll(function(d){return d.state=="idle"}).each(function(d){d.startOn+=a.finishOn;d.finishOn+=a.finishOn});break;case "with-last":b=this.effects.pluck("startOn").max()||b;break;case "end":b=this.effects.pluck("finishOn").max()||
b;break}a.startOn+=b;a.finishOn+=b;if(!a.options.queue.limit||this.effects.length<a.options.queue.limit)this.effects.push(a);if(!this.interval)this.interval=setInterval(this.loop.bind(this),15)},remove:function(a){this.effects=this.effects.reject(function(b){return b==a});if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){for(var a=(new Date).getTime(),b=0,d=this.effects.length;b<d;b++)this.effects[b]&&this.effects[b].loop(a)}});
Effect.Queues={instances:$H(),get:function(a){if(!Object.isString(a))return a;return this.instances.get(a)||this.instances.set(a,new Effect.ScopedQueue)}};Effect.Queue=Effect.Queues.get("global");
Effect.Base=Class.create({position:null,start:function(a){if(a&&a.transition===false)a.transition=Effect.Transitions.linear;this.options=Object.extend(Object.extend({},Effect.DefaultOptions),a||{});this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1E3;this.finishOn=this.startOn+this.options.duration*1E3;this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;this.render=function(){function b(d,
f){d.options[f+"Internal"]&&d.options[f+"Internal"](d);d.options[f]&&d.options[f](d)}return function(d){if(this.state==="idle"){this.state="running";b(this,"beforeSetup");this.setup&&this.setup();b(this,"afterSetup")}if(this.state==="running"){this.position=d=this.options.transition(d)*this.fromToDelta+this.options.from;b(this,"beforeUpdate");this.update&&this.update(d);b(this,"afterUpdate")}}}();this.event("beforeStart");this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":
this.options.queue.scope).add(this)},loop:function(a){if(a>=this.startOn)if(a>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");this.finish&&this.finish();this.event("afterFinish")}else{a=(a-this.startOn)/this.totalTime;var b=(a*this.totalFrames).round();if(b>this.currentFrame){this.render(a);this.currentFrame=b}}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this);this.state="finished"},
event:function(a){this.options[a+"Internal"]&&this.options[a+"Internal"](this);this.options[a]&&this.options[a](this)},inspect:function(){var a=$H();for(property in this)Object.isFunction(this[property])||a.set(property,this[property]);return"#<Effect:"+a.inspect()+",options:"+$H(this.options).inspect()+">"}});
Effect.Parallel=Class.create(Effect.Base,{initialize:function(a,b){this.effects=a||[];this.start(b)},update:function(a){this.effects.invoke("render",a)},finish:function(a){this.effects.each(function(b){b.render(1);b.cancel();b.event("beforeFinish");b.finish&&b.finish(a);b.event("afterFinish")})}});
Effect.Tween=Class.create(Effect.Base,{initialize:function(a,b,d){a=Object.isString(a)?$(a):a;var f=$A(arguments),j=f.last();f=f.length==5?f[3]:null;this.method=Object.isFunction(j)?j.bind(a):Object.isFunction(a[j])?a[j].bind(a):function(n){a[j]=n};this.start(Object.extend({from:b,to:d},f||{}))},update:function(a){this.method(a)}});Effect.Event=Class.create(Effect.Base,{initialize:function(a){this.start(Object.extend({duration:0},a||{}))},update:Prototype.emptyFunction});
Effect.Opacity=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});this.start(Object.extend({from:this.element.getOpacity()||0,to:1},b||{}))},update:function(a){this.element.setOpacity(a)}});
Effect.Move=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;this.start(Object.extend({x:0,y:0,mode:"relative"},b||{}))},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");if(this.options.mode=="absolute"){this.options.x-=this.originalLeft;this.options.y-=this.originalTop}},update:function(a){this.element.setStyle({left:(this.options.x*
a+this.originalLeft).round()+"px",top:(this.options.y*a+this.originalTop).round()+"px"})}});Effect.MoveBy=function(a,b,d,f){return new Effect.Move(a,Object.extend({x:d,y:b},f||{}))};
Effect.Scale=Class.create(Effect.Base,{initialize:function(a,b,d){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;this.start(Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:b},d||{}))},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(b){this.originalStyle[b]=
this.element.style[b]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var a=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(b){if(a.indexOf(b)>0){this.fontSize=parseFloat(a);this.fontSizeType=b}}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box")this.dims=[this.element.offsetHeight,this.element.offsetWidth];if(/^content/.test(this.options.scaleMode))this.dims=
[this.element.scrollHeight,this.element.scrollWidth];if(!this.dims)this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]},update:function(a){a=this.options.scaleFrom/100+this.factor*a;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*a+this.fontSizeType});this.setDimensions(this.dims[0]*a,this.dims[1]*a)},finish:function(){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(a,b){var d={};
if(this.options.scaleX)d.width=b.round()+"px";if(this.options.scaleY)d.height=a.round()+"px";if(this.options.scaleFromCenter){a=(a-this.dims[0])/2;b=(b-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY)d.top=this.originalTop-a+"px";if(this.options.scaleX)d.left=this.originalLeft-b+"px"}else{if(this.options.scaleY)d.top=-a+"px";if(this.options.scaleX)d.left=-b+"px"}}this.element.setStyle(d)}});
Effect.Highlight=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;this.start(Object.extend({startcolor:"#fffae2"},b||{}))},setup:function(){if(this.element.getStyle("display")=="none")this.cancel();else{this.oldStyle={};if(!this.options.keepBackgroundImage){this.oldStyle.backgroundImage=this.element.getStyle("background-image");this.element.setStyle({backgroundImage:"none"})}if(!this.options.endcolor)this.options.endcolor=
this.element.getStyle("background-color").parseColor("#ffffff");if(!this.options.restorecolor)this.options.restorecolor=this.element.getStyle("background-color");this._base=$R(0,2).map(function(a){return parseInt(this.options.startcolor.slice(a*2+1,a*2+3),16)}.bind(this));this._delta=$R(0,2).map(function(a){return parseInt(this.options.endcolor.slice(a*2+1,a*2+3),16)-this._base[a]}.bind(this))}},update:function(a){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(b,d,f){return b+
(this._base[f]+this._delta[f]*a).round().toColorPart()}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}});Effect.ScrollTo=function(a,b){b=b||{};var d=document.viewport.getScrollOffsets();a=$(a).cumulativeOffset();if(b.offset)a[1]+=b.offset;return new Effect.Tween(null,d.top,a[1],b,function(f){scrollTo(d.left,f.round())})};
Effect.Fade=function(a,b){a=$(a);var d=a.getInlineOpacity();b=Object.extend({from:a.getOpacity()||1,to:0,afterFinishInternal:function(f){f.options.to==0&&f.element.hide().setStyle({opacity:d})}},b||{});return new Effect.Opacity(a,b)};
Effect.Appear=function(a,b){a=$(a);b=Object.extend({from:a.getStyle("display")=="none"?0:a.getOpacity()||0,to:1,afterFinishInternal:function(d){d.element.forceRerendering()},beforeSetup:function(d){d.element.setOpacity(d.options.from).show()}},b||{});return new Effect.Opacity(a,b)};
Effect.Puff=function(a,b){a=$(a);var d={opacity:a.getInlineOpacity(),position:a.getStyle("position"),top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};return new Effect.Parallel([new Effect.Scale(a,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(a,{sync:true,to:0})],Object.extend({duration:1,beforeSetupInternal:function(f){Position.absolutize(f.effects[0].element)},afterFinishInternal:function(f){f.effects[0].element.hide().setStyle(d)}},
b||{}))};Effect.BlindUp=function(a,b){a=$(a);a.makeClipping();return new Effect.Scale(a,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(d){d.element.hide().undoClipping()}},b||{}))};
Effect.BlindDown=function(a,b){a=$(a);var d=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:d.height,originalWidth:d.width},restoreAfterFinish:true,afterSetup:function(f){f.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(f){f.element.undoClipping()}},b||{}))};
Effect.SwitchOff=function(a,b){a=$(a);var d=a.getInlineOpacity();return new Effect.Appear(a,Object.extend({duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(f){new Effect.Scale(f.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(j){j.element.makePositioned().makeClipping()},afterFinishInternal:function(j){j.element.hide().undoClipping().undoPositioned().setStyle({opacity:d})}})}},b||{}))};
Effect.DropOut=function(a,b){a=$(a);var d={top:a.getStyle("top"),left:a.getStyle("left"),opacity:a.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(a,{x:0,y:100,sync:true}),new Effect.Opacity(a,{sync:true,to:0})],Object.extend({duration:0.5,beforeSetup:function(f){f.effects[0].element.makePositioned()},afterFinishInternal:function(f){f.effects[0].element.hide().undoPositioned().setStyle(d)}},b||{}))};
Effect.Shake=function(a,b){a=$(a);b=Object.extend({distance:20,duration:0.5},b||{});var d=parseFloat(b.distance),f=parseFloat(b.duration)/10,j={top:a.getStyle("top"),left:a.getStyle("left")};return new Effect.Move(a,{x:d,y:0,duration:f,afterFinishInternal:function(n){new Effect.Move(n.element,{x:-d*2,y:0,duration:f*2,afterFinishInternal:function(r){new Effect.Move(r.element,{x:d*2,y:0,duration:f*2,afterFinishInternal:function(x){new Effect.Move(x.element,{x:-d*2,y:0,duration:f*2,afterFinishInternal:function(y){new Effect.Move(y.element,
{x:d*2,y:0,duration:f*2,afterFinishInternal:function(O){new Effect.Move(O.element,{x:-d,y:0,duration:f,afterFinishInternal:function(Y){Y.element.undoPositioned().setStyle(j)}})}})}})}})}})}})};
Effect.SlideDown=function(a,b){a=$(a).cleanWhitespace();var d=a.down().getStyle("bottom"),f=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:f.height,originalWidth:f.width},restoreAfterFinish:true,afterSetup:function(j){j.element.makePositioned();j.element.down().makePositioned();window.opera&&j.element.setStyle({top:""});j.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(j){j.element.down().setStyle({bottom:j.dims[0]-
j.element.clientHeight+"px"})},afterFinishInternal:function(j){j.element.undoClipping().undoPositioned();j.element.down().undoPositioned().setStyle({bottom:d})}},b||{}))};
Effect.SlideUp=function(a,b){a=$(a).cleanWhitespace();var d=a.down().getStyle("bottom"),f=a.getDimensions();return new Effect.Scale(a,window.opera?0:1,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:f.height,originalWidth:f.width},restoreAfterFinish:true,afterSetup:function(j){j.element.makePositioned();j.element.down().makePositioned();window.opera&&j.element.setStyle({top:""});j.element.makeClipping().show()},afterUpdateInternal:function(j){j.element.down().setStyle({bottom:j.dims[0]-
j.element.clientHeight+"px"})},afterFinishInternal:function(j){j.element.hide().undoClipping().undoPositioned();j.element.down().undoPositioned().setStyle({bottom:d})}},b||{}))};Effect.Squish=function(a){return new Effect.Scale(a,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(b){b.element.makeClipping()},afterFinishInternal:function(b){b.element.hide().undoClipping()}})};
Effect.Grow=function(a,b){a=$(a);var d=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},b||{}),f={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},j=a.getDimensions(),n,r,x,y;switch(d.direction){case "top-left":n=r=x=y=0;break;case "top-right":n=j.width;r=y=0;x=-j.width;break;case "bottom-left":n=x=0;r=j.height;y=-j.height;break;
case "bottom-right":n=j.width;r=j.height;x=-j.width;y=-j.height;break;case "center":n=j.width/2;r=j.height/2;x=-j.width/2;y=-j.height/2;break}return new Effect.Move(a,{x:n,y:r,duration:0.01,beforeSetup:function(O){O.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(O){new Effect.Parallel([new Effect.Opacity(O.element,{sync:true,to:1,from:0,transition:d.opacityTransition}),new Effect.Move(O.element,{x:x,y:y,sync:true,transition:d.moveTransition}),new Effect.Scale(O.element,
100,{scaleMode:{originalHeight:j.height,originalWidth:j.width},sync:true,scaleFrom:window.opera?1:0,transition:d.scaleTransition,restoreAfterFinish:true})],Object.extend({beforeSetup:function(Y){Y.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(Y){Y.effects[0].element.undoClipping().undoPositioned().setStyle(f)}},d))}})};
Effect.Shrink=function(a,b){a=$(a);b=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},b||{});var d={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},f=a.getDimensions(),j,n;switch(b.direction){case "top-left":j=n=0;break;case "top-right":j=f.width;n=0;break;case "bottom-left":j=0;n=f.height;break;case "bottom-right":j=f.width;n=
f.height;break;case "center":j=f.width/2;n=f.height/2;break}return new Effect.Parallel([new Effect.Opacity(a,{sync:true,to:0,from:1,transition:b.opacityTransition}),new Effect.Scale(a,window.opera?1:0,{sync:true,transition:b.scaleTransition,restoreAfterFinish:true}),new Effect.Move(a,{x:j,y:n,sync:true,transition:b.moveTransition})],Object.extend({beforeStartInternal:function(r){r.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(r){r.effects[0].element.hide().undoClipping().undoPositioned().setStyle(d)}},
b))};Effect.Pulsate=function(a,b){a=$(a);var d=b||{},f=a.getInlineOpacity(),j=d.transition||Effect.Transitions.linear;return new Effect.Opacity(a,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(n){n.element.setStyle({opacity:f})}},d),{transition:function(n){return 1-j(-Math.cos(n*(d.pulses||5)*2*Math.PI)/2+0.5)}}))};
Effect.Fold=function(a,b){a=$(a);var d={top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};a.makeClipping();return new Effect.Scale(a,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(){new Effect.Scale(a,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(f){f.element.hide().undoClipping().setStyle(d)}})}},b||{}))};
Effect.Morph=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;a=Object.extend({style:{}},b||{});if(Object.isString(a.style))if(a.style.include(":"))this.style=a.style.parseStyle();else{this.element.addClassName(a.style);this.style=$H(this.element.getStyles());this.element.removeClassName(a.style);var d=this.element.getStyles();this.style=this.style.reject(function(f){return f.value==d[f.key]});a.afterFinishInternal=function(f){f.element.addClassName(f.options.style);
f.transforms.each(function(j){f.element.style[j.style]=""})}}else this.style=$H(a.style);this.start(a)},setup:function(){function a(b){if(!b||["rgba(0, 0, 0, 0)","transparent"].include(b))b="#ffffff";b=b.parseColor();return $R(0,2).map(function(d){return parseInt(b.slice(d*2+1,d*2+3),16)})}this.transforms=this.style.map(function(b){var d=b[0];b=b[1];var f=null;if(b.parseColor("#zzzzzz")!="#zzzzzz"){b=b.parseColor();f="color"}else if(d=="opacity"){b=parseFloat(b);Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&
this.element.setStyle({zoom:1})}else if(Element.CSS_LENGTH.test(b)){f=b.match(/^([\+\-]?[0-9\.]+)(.*)$/);b=parseFloat(f[1]);f=f.length==3?f[2]:null}var j=this.element.getStyle(d);return{style:d.camelize(),originalValue:f=="color"?a(j):parseFloat(j||0),targetValue:f=="color"?a(b):b,unit:f}}.bind(this)).reject(function(b){return b.originalValue==b.targetValue||b.unit!="color"&&(isNaN(b.originalValue)||isNaN(b.targetValue))})},update:function(a){for(var b={},d,f=this.transforms.length;f--;)b[(d=this.transforms[f]).style]=
d.unit=="color"?"#"+Math.round(d.originalValue[0]+(d.targetValue[0]-d.originalValue[0])*a).toColorPart()+Math.round(d.originalValue[1]+(d.targetValue[1]-d.originalValue[1])*a).toColorPart()+Math.round(d.originalValue[2]+(d.targetValue[2]-d.originalValue[2])*a).toColorPart():(d.originalValue+(d.targetValue-d.originalValue)*a).toFixed(3)+(d.unit===null?"":d.unit);this.element.setStyle(b,true)}});
Effect.Transform=Class.create({initialize:function(a,b){this.tracks=[];this.options=b||{};this.addTracks(a)},addTracks:function(a){a.each(function(b){b=$H(b);var d=b.values().first();this.tracks.push($H({ids:b.keys().first(),effect:Effect.Morph,options:{style:d}}))}.bind(this));return this},play:function(){return new Effect.Parallel(this.tracks.map(function(a){var b=a.get("ids"),d=a.get("effect"),f=a.get("options");return[$(b)||$$(b)].flatten().map(function(j){return new d(j,Object.extend({sync:true},
f))})}).flatten(),this.options)}});Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex");
Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/;String.__parseStyleElement=document.createElement("div");
String.prototype.parseStyle=function(){var a,b=$H();if(Prototype.Browser.WebKit)a=(new Element("div",{style:this})).style;else{String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>';a=String.__parseStyleElement.childNodes[0].style}Element.CSS_PROPERTIES.each(function(d){a[d]&&b.set(d,a[d])});Prototype.Browser.IE&&this.include("opacity")&&b.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]);return b};
Element.getStyles=document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=document.defaultView.getComputedStyle($(a),null);return Element.CSS_PROPERTIES.inject({},function(d,f){d[f]=b[f];return d})}:function(a){a=$(a);var b=a.currentStyle,d;d=Element.CSS_PROPERTIES.inject({},function(f,j){f[j]=b[j];return f});if(!d.opacity)d.opacity=a.getOpacity();return d};
Effect.Methods={morph:function(a,b,d){a=$(a);new Effect.Morph(a,Object.extend({style:b},d||{}));return a},visualEffect:function(a,b,d){a=$(a);b=b.dasherize().camelize();b=b.charAt(0).toUpperCase()+b.substring(1);new Effect[b](a,d);return a},highlight:function(a,b){a=$(a);new Effect.Highlight(a,b);return a}};
$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(a){Effect.Methods[a]=function(b,d){b=$(b);Effect[a.charAt(0).toUpperCase()+a.substring(1)](b,d);return b}});$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(a){Effect.Methods[a]=Element[a]});Element.addMethods(Effect.Methods);if(typeof Effect=="undefined")throw"controls.js requires including script.aculo.us' effects.js library";var Autocompleter={};
Autocompleter.Base=Class.create({baseInitialize:function(a,b,d){this.element=a=$(a);this.update=$(b);this.active=this.changed=this.hasFocus=false;this.entryCount=this.index=0;this.oldElementValue=this.element.value;if(this.setOptions)this.setOptions(d);else this.options=d||{};this.options.paramName=this.options.paramName||this.element.name;this.options.tokens=this.options.tokens||[];this.options.frequency=this.options.frequency||0.4;this.options.minChars=this.options.minChars||1;this.options.onShow=
this.options.onShow||function(f,j){if(!j.style.position||j.style.position=="absolute"){j.style.position="absolute";Position.clone(f,j,{setHeight:false,offsetTop:f.offsetHeight})}Effect.Appear(j,{duration:0.15})};this.options.onHide=this.options.onHide||function(f,j){new Effect.Fade(j,{duration:0.15})};if(typeof this.options.tokens=="string")this.options.tokens=new Array(this.options.tokens);this.options.tokens.include("\n")||this.options.tokens.push("\n");this.observer=null;this.element.setAttribute("autocomplete",
"off");Element.hide(this.update);Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this));Event.observe(this.element,"keydown",this.onKeyPress.bindAsEventListener(this))},show:function(){Element.getStyle(this.update,"display")=="none"&&this.options.onShow(this.element,this.update);if(!this.iefix&&Prototype.Browser.IE&&Element.getStyle(this.update,"position")=="absolute"){new Insertion.After(this.update,'<iframe id="'+this.update.id+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>');
this.iefix=$(this.update.id+"_iefix")}this.iefix&&setTimeout(this.fixIEOverlapping.bind(this),50)},fixIEOverlapping:function(){Position.clone(this.update,this.iefix,{setTop:!this.update.style.height});this.iefix.style.zIndex=1;this.update.style.zIndex=2;Element.show(this.iefix)},hide:function(){this.stopIndicator();Element.getStyle(this.update,"display")!="none"&&this.options.onHide(this.element,this.update);this.iefix&&Element.hide(this.iefix)},startIndicator:function(){this.options.indicator&&Element.show(this.options.indicator)},
stopIndicator:function(){this.options.indicator&&Element.hide(this.options.indicator)},onKeyPress:function(a){if(this.active)switch(a.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry();Event.stop(a);case Event.KEY_ESC:this.hide();this.active=false;Event.stop(a);return;case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:this.markPrevious();this.render();Event.stop(a);return;case Event.KEY_DOWN:this.markNext();this.render();Event.stop(a);return}else if(a.keyCode==Event.KEY_TAB||
a.keyCode==Event.KEY_RETURN||Prototype.Browser.WebKit>0&&a.keyCode==0)return;this.hasFocus=this.changed=true;this.observer&&clearTimeout(this.observer);this.observer=setTimeout(this.onObserverEvent.bind(this),this.options.frequency*1E3)},activate:function(){this.changed=false;this.hasFocus=true;this.getUpdatedChoices()},onHover:function(a){var b=Event.findElement(a,"LI");if(this.index!=b.autocompleteIndex){this.index=b.autocompleteIndex;this.render()}Event.stop(a)},onClick:function(a){this.index=
Event.findElement(a,"LI").autocompleteIndex;this.selectEntry();this.hide()},onBlur:function(){setTimeout(this.hide.bind(this),250);this.active=this.hasFocus=false},render:function(){if(this.entryCount>0){for(var a=0;a<this.entryCount;a++)this.index==a?Element.addClassName(this.getEntry(a),"selected"):Element.removeClassName(this.getEntry(a),"selected");if(this.hasFocus){this.show();this.active=true}}else{this.active=false;this.hide()}},markPrevious:function(){if(this.index>0)this.index--;else this.index=
this.entryCount-1;this.getEntry(this.index).scrollIntoView(true)},markNext:function(){if(this.index<this.entryCount-1)this.index++;else this.index=0;this.getEntry(this.index).scrollIntoView(false)},getEntry:function(a){return this.update.firstChild.childNodes[a]},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){this.active=false;this.updateElement(this.getCurrentEntry())},updateElement:function(a){if(this.options.updateElement)this.options.updateElement(a);else{var b=
"";if(this.options.select){var d=$(a).select("."+this.options.select)||[];if(d.length>0)b=Element.collectTextNodes(d[0],this.options.select)}else b=Element.collectTextNodesIgnoreClass(a,"informal");d=this.getTokenBounds();if(d[0]!=-1){var f=this.element.value.substr(0,d[0]),j=this.element.value.substr(d[0]).match(/^\s+/);if(j)f+=j[0];this.element.value=f+b+this.element.value.substr(d[1])}else this.element.value=b;this.oldElementValue=this.element.value;this.element.focus();this.options.afterUpdateElement&&
this.options.afterUpdateElement(this.element,a)}},updateChoices:function(a){if(!this.changed&&this.hasFocus){this.update.innerHTML=a;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.down());if(this.update.firstChild&&this.update.down().childNodes){this.entryCount=this.update.down().childNodes.length;for(a=0;a<this.entryCount;a++){var b=this.getEntry(a);b.autocompleteIndex=a;this.addObservers(b)}}else this.entryCount=0;this.stopIndicator();this.index=0;if(this.entryCount==1&&
this.options.autoSelect){this.selectEntry();this.hide()}else this.render()}},addObservers:function(a){Event.observe(a,"mouseover",this.onHover.bindAsEventListener(this));Event.observe(a,"click",this.onClick.bindAsEventListener(this))},onObserverEvent:function(){this.changed=false;this.tokenBounds=null;if(this.getToken().length>=this.options.minChars)this.getUpdatedChoices();else{this.active=false;this.hide()}this.oldElementValue=this.element.value},getToken:function(){var a=this.getTokenBounds();
return this.element.value.substring(a[0],a[1]).strip()},getTokenBounds:function(){if(null!=this.tokenBounds)return this.tokenBounds;var a=this.element.value;if(a.strip().empty())return[-1,0];for(var b=arguments.callee.getFirstDifferencePos(a,this.oldElementValue),d=b==this.oldElementValue.length?1:0,f=-1,j=a.length,n,r=0,x=this.options.tokens.length;r<x;++r){n=a.lastIndexOf(this.options.tokens[r],b+d-1);if(n>f)f=n;n=a.indexOf(this.options.tokens[r],b+d);if(-1!=n&&n<j)j=n}return this.tokenBounds=[f+
1,j]}});Autocompleter.Base.prototype.getTokenBounds.getFirstDifferencePos=function(a,b){for(var d=Math.min(a.length,b.length),f=0;f<d;++f)if(a[f]!=b[f])return f;return d};
Ajax.Autocompleter=Class.create(Autocompleter.Base,{initialize:function(a,b,d,f){this.baseInitialize(a,b,f);this.options.asynchronous=true;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=d},getUpdatedChoices:function(){this.startIndicator();var a=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,a):a;if(this.options.defaultParams)this.options.parameters+=
"&"+this.options.defaultParams;new Ajax.Request(this.url,this.options)},onComplete:function(a){this.updateChoices(a.responseText)}});
Autocompleter.Local=Class.create(Autocompleter.Base,{initialize:function(a,b,d,f){this.baseInitialize(a,b,f);this.options.array=d},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this))},setOptions:function(a){this.options=Object.extend({choices:10,partialSearch:true,partialChars:2,ignoreCase:true,fullSearch:false,selector:function(b){for(var d=[],f=[],j=b.getToken(),n=0;n<b.options.array.length&&d.length<b.options.choices;n++)for(var r=b.options.array[n],x=b.options.ignoreCase?
r.toLowerCase().indexOf(j.toLowerCase()):r.indexOf(j);x!=-1;){if(x==0&&r.length!=j.length){d.push("<li><strong>"+r.substr(0,j.length)+"</strong>"+r.substr(j.length)+"</li>");break}else if(j.length>=b.options.partialChars&&b.options.partialSearch&&x!=-1)if(b.options.fullSearch||/\s/.test(r.substr(x-1,1))){f.push("<li>"+r.substr(0,x)+"<strong>"+r.substr(x,j.length)+"</strong>"+r.substr(x+j.length)+"</li>");break}x=b.options.ignoreCase?r.toLowerCase().indexOf(j.toLowerCase(),x+1):r.indexOf(j,x+1)}if(f.length)d=
d.concat(f.slice(0,b.options.choices-d.length));return"<ul>"+d.join("")+"</ul>"}},a||{})}});Field.scrollFreeActivate=function(a){setTimeout(function(){Field.activate(a)},1)};
Ajax.InPlaceEditor=Class.create({initialize:function(a,b,d){this.url=b;this.element=a=$(a);this.prepareOptions();this._controls={};arguments.callee.dealWithDeprecatedOptions(d);Object.extend(this.options,d||{});if(!this.options.formId&&this.element.id){this.options.formId=this.element.id+"-inplaceeditor";if($(this.options.formId))this.options.formId=""}if(this.options.externalControl)this.options.externalControl=$(this.options.externalControl);if(!this.options.externalControl)this.options.externalControlOnly=
false;this._originalBackground=this.element.getStyle("background-color")||"transparent";this.element.title=this.options.clickToEditText;this._boundCancelHandler=this.handleFormCancellation.bind(this);this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this);this._boundFailureHandler=this.handleAJAXFailure.bind(this);this._boundSubmitHandler=this.handleFormSubmission.bind(this);this._boundWrapperHandler=this.wrapUp.bind(this);this.registerListeners()},checkForEscapeOrReturn:function(a){if(!(!this._editing||
a.ctrlKey||a.altKey||a.shiftKey))if(Event.KEY_ESC==a.keyCode)this.handleFormCancellation(a);else Event.KEY_RETURN==a.keyCode&&this.handleFormSubmission(a)},createControl:function(a,b,d){var f=this.options[a+"Control"];b=this.options[a+"Text"];if("button"==f){d=document.createElement("input");d.type="submit";d.value=b;d.className="editor_"+a+"_button";if("cancel"==a)d.onclick=this._boundCancelHandler;this._form.appendChild(d);this._controls[a]=d}else if("link"==f){f=document.createElement("a");f.href=
"#";f.appendChild(document.createTextNode(b));f.onclick="cancel"==a?this._boundCancelHandler:this._boundSubmitHandler;f.className="editor_"+a+"_link";if(d)f.className+=" "+d;this._form.appendChild(f);this._controls[a]=f}},createEditField:function(){var a=this.options.loadTextURL?this.options.loadingText:this.getText(),b;if(1>=this.options.rows&&!/\r|\n/.test(this.getText())){b=document.createElement("input");b.type="text";var d=this.options.size||this.options.cols||0;if(0<d)b.size=d}else{b=document.createElement("textarea");
b.rows=1>=this.options.rows?this.options.autoRows:this.options.rows;b.cols=this.options.cols||40}b.name=this.options.paramName;b.value=a;b.className="editor_field";if(this.options.submitOnBlur)b.onblur=this._boundSubmitHandler;this._controls.editor=b;this.options.loadTextURL&&this.loadExternalText();this._form.appendChild(this._controls.editor)},createForm:function(){function a(d,f){d=b.options["text"+d+"Controls"];!d||f===false||b._form.appendChild(document.createTextNode(d))}var b=this;this._form=
$(document.createElement("form"));this._form.id=this.options.formId;this._form.addClassName(this.options.formClassName);this._form.onsubmit=this._boundSubmitHandler;this.createEditField();"textarea"==this._controls.editor.tagName.toLowerCase()&&this._form.appendChild(document.createElement("br"));this.options.onFormCustomization&&this.options.onFormCustomization(this,this._form);a("Before",this.options.okControl||this.options.cancelControl);this.createControl("ok",this._boundSubmitHandler);a("Between",
this.options.okControl&&this.options.cancelControl);this.createControl("cancel",this._boundCancelHandler,"editor_cancel");a("After",this.options.okControl||this.options.cancelControl)},destroy:function(){if(this._oldInnerHTML)this.element.innerHTML=this._oldInnerHTML;this.leaveEditMode();this.unregisterListeners()},enterEditMode:function(a){if(!(this._saving||this._editing)){this._editing=true;this.triggerCallback("onEnterEditMode");this.options.externalControl&&this.options.externalControl.hide();
this.element.hide();this.createForm();this.element.parentNode.insertBefore(this._form,this.element);this.options.loadTextURL||this.postProcessEditField();a&&Event.stop(a)}},enterHover:function(){this.options.hoverClassName&&this.element.addClassName(this.options.hoverClassName);this._saving||this.triggerCallback("onEnterHover")},getText:function(){return this.element.innerHTML.unescapeHTML()},handleAJAXFailure:function(a){this.triggerCallback("onFailure",a);if(this._oldInnerHTML){this.element.innerHTML=
this._oldInnerHTML;this._oldInnerHTML=null}},handleFormCancellation:function(a){this.wrapUp();a&&Event.stop(a)},handleFormSubmission:function(a){var b=this._form,d=$F(this._controls.editor);this.prepareSubmission();b=this.options.callback(b,d)||"";if(Object.isString(b))b=b.toQueryParams();b.editorId=this.element.id;if(this.options.htmlResponse){d=Object.extend({evalScripts:true},this.options.ajaxOptions);Object.extend(d,{parameters:b,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler});
new Ajax.Updater({success:this.element},this.url,d)}else{d=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(d,{parameters:b,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler});new Ajax.Request(this.url,d)}a&&Event.stop(a)},leaveEditMode:function(){this.element.removeClassName(this.options.savingClassName);this.removeForm();this.leaveHover();this.element.style.backgroundColor=this._originalBackground;this.element.show();this.options.externalControl&&this.options.externalControl.show();
this._editing=this._saving=false;this._oldInnerHTML=null;this.triggerCallback("onLeaveEditMode")},leaveHover:function(){this.options.hoverClassName&&this.element.removeClassName(this.options.hoverClassName);this._saving||this.triggerCallback("onLeaveHover")},loadExternalText:function(){this._form.addClassName(this.options.loadingClassName);this._controls.editor.disabled=true;var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),
onComplete:Prototype.emptyFunction,onSuccess:function(b){this._form.removeClassName(this.options.loadingClassName);b=b.responseText;if(this.options.stripLoadedTextTags)b=b.stripTags();this._controls.editor.value=b;this._controls.editor.disabled=false;this.postProcessEditField()}.bind(this),onFailure:this._boundFailureHandler});new Ajax.Request(this.options.loadTextURL,a)},postProcessEditField:function(){var a=this.options.fieldPostCreation;if(a)$(this._controls.editor)["focus"==a?"focus":"activate"]()},
prepareOptions:function(){this.options=Object.clone(Ajax.InPlaceEditor.DefaultOptions);Object.extend(this.options,Ajax.InPlaceEditor.DefaultCallbacks);[this._extraDefaultOptions].flatten().compact().each(function(a){Object.extend(this.options,a)}.bind(this))},prepareSubmission:function(){this._saving=true;this.removeForm();this.leaveHover();this.showSaving()},registerListeners:function(){this._listeners={};var a;$H(Ajax.InPlaceEditor.Listeners).each(function(b){a=this[b.value].bind(this);this._listeners[b.key]=
a;this.options.externalControlOnly||this.element.observe(b.key,a);this.options.externalControl&&this.options.externalControl.observe(b.key,a)}.bind(this))},removeForm:function(){if(this._form){this._form.remove();this._form=null;this._controls={}}},showSaving:function(){this._oldInnerHTML=this.element.innerHTML;this.element.innerHTML=this.options.savingText;this.element.addClassName(this.options.savingClassName);this.element.style.backgroundColor=this._originalBackground;this.element.show()},triggerCallback:function(a,
b){"function"==typeof this.options[a]&&this.options[a](this,b)},unregisterListeners:function(){$H(this._listeners).each(function(a){this.options.externalControlOnly||this.element.stopObserving(a.key,a.value);this.options.externalControl&&this.options.externalControl.stopObserving(a.key,a.value)}.bind(this))},wrapUp:function(a){this.leaveEditMode();this._boundComplete(a,this.element)}});Object.extend(Ajax.InPlaceEditor.prototype,{dispose:Ajax.InPlaceEditor.prototype.destroy});
Ajax.InPlaceCollectionEditor=Class.create(Ajax.InPlaceEditor,{initialize:function($super,b,d,f){this._extraDefaultOptions=Ajax.InPlaceCollectionEditor.DefaultOptions;$super(b,d,f)},createEditField:function(){var a=document.createElement("select");a.name=this.options.paramName;a.size=1;this._controls.editor=a;this._collection=this.options.collection||[];this.options.loadCollectionURL?this.loadCollection():this.checkForExternalText();this._form.appendChild(this._controls.editor)},loadCollection:function(){this._form.addClassName(this.options.loadingClassName);
this.showLoadingText(this.options.loadingCollectionText);var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(b){b=b.responseText.strip();if(!/^\[.*\]$/.test(b))throw"Server returned an invalid collection representation.";this._collection=eval(b);this.checkForExternalText()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadCollectionURL,a)},
showLoadingText:function(a){this._controls.editor.disabled=true;var b=this._controls.editor.firstChild;if(!b){b=document.createElement("option");b.value="";this._controls.editor.appendChild(b);b.selected=true}b.update((a||"").stripScripts().stripTags())},checkForExternalText:function(){this._text=this.getText();this.options.loadTextURL?this.loadExternalText():this.buildOptionList()},loadExternalText:function(){this.showLoadingText(this.options.loadingText);var a=Object.extend({method:"get"},this.options.ajaxOptions);
Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(b){this._text=b.responseText.strip();this.buildOptionList()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadTextURL,a)},buildOptionList:function(){this._form.removeClassName(this.options.loadingClassName);this._collection=this._collection.map(function(f){return 2===f.length?f:[f,f].flatten()});var a="value"in this.options?this.options.value:this._text,
b=this._collection.any(function(f){return f[0]==a}.bind(this));this._controls.editor.update("");var d;this._collection.each(function(f,j){d=document.createElement("option");d.value=f[0];d.selected=b?f[0]==a:0==j;d.appendChild(document.createTextNode(f[1]));this._controls.editor.appendChild(d)}.bind(this));this._controls.editor.disabled=false;Field.scrollFreeActivate(this._controls.editor)}});
Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions=function(a){function b(d,f){d in a||f===undefined||(a[d]=f)}if(a){b("cancelControl",a.cancelLink?"link":a.cancelButton?"button":a.cancelLink==a.cancelButton==false?false:undefined);b("okControl",a.okLink?"link":a.okButton?"button":a.okLink==a.okButton==false?false:undefined);b("highlightColor",a.highlightcolor);b("highlightEndColor",a.highlightendcolor)}};
Object.extend(Ajax.InPlaceEditor,{DefaultOptions:{ajaxOptions:{},autoRows:3,cancelControl:"link",cancelText:"cancel",clickToEditText:"Click to edit",externalControl:null,externalControlOnly:false,fieldPostCreation:"activate",formClassName:"inplaceeditor-form",formId:null,highlightColor:"#ffff99",highlightEndColor:"#ffffff",hoverClassName:"",htmlResponse:true,loadingClassName:"inplaceeditor-loading",loadingText:"Loading...",okControl:"button",okText:"ok",paramName:"value",rows:1,savingClassName:"inplaceeditor-saving",
savingText:"Saving...",size:0,stripLoadedTextTags:false,submitOnBlur:false,textAfterControls:"",textBeforeControls:"",textBetweenControls:""},DefaultCallbacks:{callback:function(a){return Form.serialize(a)},onComplete:function(a,b){new Effect.Highlight(b,{startcolor:this.options.highlightColor,keepBackgroundImage:true})},onEnterEditMode:null,onEnterHover:function(a){a.element.style.backgroundColor=a.options.highlightColor;a._effect&&a._effect.cancel()},onFailure:function(a){alert("Error communication with the server: "+
a.responseText.stripTags())},onFormCustomization:null,onLeaveEditMode:null,onLeaveHover:function(a){a._effect=new Effect.Highlight(a.element,{startcolor:a.options.highlightColor,endcolor:a.options.highlightEndColor,restorecolor:a._originalBackground,keepBackgroundImage:true})}},Listeners:{click:"enterEditMode",keydown:"checkForEscapeOrReturn",mouseover:"enterHover",mouseout:"leaveHover"}});Ajax.InPlaceCollectionEditor.DefaultOptions={loadingCollectionText:"Loading options..."};
Form.Element.DelayedObserver=Class.create({initialize:function(a,b,d){this.delay=b||0.5;this.element=$(a);this.callback=d;this.timer=null;this.lastValue=$F(this.element);Event.observe(this.element,"keyup",this.delayedListener.bindAsEventListener(this))},delayedListener:function(){if(this.lastValue!=$F(this.element)){this.timer&&clearTimeout(this.timer);this.timer=setTimeout(this.onTimerEvent.bind(this),this.delay*1E3);this.lastValue=$F(this.element)}},onTimerEvent:function(){this.timer=null;this.callback(this.element,
$F(this.element))}});var RFC822SingleEmailRegex=/^(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x22(?:[^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(?:\x2e(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x22(?:[^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x5b(?:[^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(?:\x2e(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x5b(?:[^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))+$/;
if(!document.onunload)document.onunload=function(){};function makeDynamicFrameTarget(a){var b="dynamic_frame_"+ +new Date,d=(new Element("iframe",{name:b})).setStyle({display:"none"});$(document.body).insert(d);a.target=b}function makeDynamicFrameTargetForUrl(a){a=(new Element("form",{action:a,method:"post"})).setStyle({display:"none"});$(document.body).insert(a);makeDynamicFrameTarget(a);return a}var lastFacebookStatus="unknown";
function requestAdditionalPermissions(){disableFacebookButtons();FB.login(function(a){FacebookApiLoader.updateLoginStatus();setTimeout(function(){window.location.reload()},2E3)},{scope:"email, user_birthday, publish_actions"})}function disableFacebookButtons(){$$("a.sprite_facebook").each(function(a){var b;a.hide();if(!a.next(".spinner")){b=a.hasClassName("no_inverse");a.insert({after:'<span class="spinner facebook_spinner'+(b?"":" spinner_inverse")+'">loading&hellip;</span>'})}})}
function reenableFacebookButtons(){$$("a.sprite_facebook").each(function(a){a.show();(a=a.next(".spinner"))&&a.remove()})}
function showFacebookErrorLightbox(){var a,b;if(active_user.isAuthenticated())a='<h1 class="phl">There\'s been an error!</h1><p class="regtext mhl mvm">The connection with Facebook\'s servers has timed out. Please refresh your page and try the linking process again.</p>';else{a='<h1 class="phl">There\'s been an error!</h1><p class="regtext mhl mvm">We were unable to create a Kongregate account with Facebook.</p><p class="regtext mhl mvm">Click on "Create My Account" below to create a Kongregate account using your email address instead.</p><a id="error_signup_link" href="#" class="submission_button mhl mvm">Create My Account</a>';b=
function(){$("error_signup_link").observe("click",function(f){f.preventDefault();try{lightbox.prototype.shutdown()}catch(j){}lightbox.prototype.initializeKongregateLightboxFromAjax("/accounts/new/behind_login?no_facebook_connect=true&game_id="+active_user.gameId(),{afterStaticContentLoad:function(){lightbox.prototype.toggleRegistration();$("lightbox_email_register").show();$("lightbox_facebook_register").hide();$("lightbox").removeClassName("lightbox_login")}})})}}try{lightbox.prototype.shutdown()}catch(d){}lightbox.prototype.initializeKongregateLightboxFromContent(a,
{done_class_name:"lightbox_login",afterStaticContentLoad:b});reenableFacebookButtons()}function showMatchingUserForm(a,b,d){a="/facebook_connection/login_lightbox?username="+a+"&matched_on="+b;if(active_user.gameId())a+="&game_id="+active_user.gameId();try{lightbox.prototype.shutdown()}catch(f){}lightbox.prototype.initializeKongregateLightboxFromAjax(a,{done_class_name:"lightbox_login"})}function write_to_document(a){document.write(a)}
function toggleTabs(a,b){Element.show(a);Element.show(a+"_title");Element.show(b+"_link");Element.hide(b);Element.hide(b+"_title");Element.hide(a+"_link");$(a+"_tab").className="tab current";$(b+"_tab").className="tab"}
var TopicForm={editNewTitle:function(a){$("new_topic").innerHTML=a.value.length>5?a.value:"New Topic"}},EditForm={init:function(a){$("edit-post-"+a+"_spinner").show();this.clearReplyId()},setReplyId:function(a){$("edit").setAttribute("post_id",a.toString());$("posts-"+a+"-row").addClassName("editing");$("reply")&&$("reply").hide()},clearReplyId:function(){var a=this.currentReplyId();if(!(!a||a==="")){(a=$("posts-"+a+"-row"))&&a.removeClassName("editing");$("edit").setAttribute("post_id","")}},currentReplyId:function(){return $("edit").getAttribute("post_id")},
isEditing:function(a){if(this.currentReplyId()==a.toString()){$("edit").show();$("edit_post_body").focus();return true}return false},cancel:function(){this.clearReplyId();$("edit").hide()}},ReplyForm={init:function(){EditForm.cancel();$("reply").toggle();$("post_body").focus()}};function showChatSelector(a,b){new lightbox("/rooms/change?game_rooms="+a+"&game_id="+b)}function limitText(a,b){if(a.value.length>b)a.value=a.value.substring(0,b)}
function limitCheckedBoxes(a,b,d){for(var f=0,j=0;j<a.length;j++)f+=a[j].checked?1:0;if(f>b)a[d].checked=false}function observePopup(a,b,d,f){var j=window.open(a,"",d||""),n=setInterval(function(){try{if(j.closed){clearInterval(n);f()}}catch(r){clearInterval(n)}},100);return j}Prototype.Platform={Windows:!!navigator.platform.match(/Win/),Macintosh:!!navigator.platform.match(/Mac/),Linux:!!navigator.platform.match(/Linux/)};
Hash.prototype.getWithDefault=function(a,b){var d=this.get(a);return undefined==d?this.set(a,b()):d};Hash.prototype.getOrSet=function(a,b){var d=this.get(a);return undefined==d?this.set(a,b):d};Element.addMethods("textarea",{positionCaretAtEnd:function(a){a=$(a);if(a.createTextRange){var b=a.createTextRange();b.move("character",a.value.length);b.select()}else if(a.selectionStart!==null){b=a.value.length;a.focus();a.setSelectionRange(b,b)}else{a.focus();a.value+=""}return a}});
Element.addMethods({ieHappyHide:function(a){a=$(a);a.style.display="none";a.style.visibility="hidden";return a},ieHappyShow:function(a){a=$(a);a.style.display="";a.style.visibility="visible";return a},setText:function(a,b){a=$(a);a[Prototype.Browser.Gecko?"textContent":"innerText"]=b;return a}});
function autoTruncate(a,b){b||(b=1);$$("."+a).each(function(d){var f=d.down("a"),j=f.getStyle("font-size");d=d.getWidth();var n=11;if(j)n=parseInt(j.sub("px",""),10);j=f.innerHTML;d=Math.round(d/(n-4.5)*b);f.update(j.truncate(d))})}function insertTrackingPixelWithTimestamp(a){stamp=+new Date;document.write('<img src="'+a+stamp+'?"/>')}
Prototype.Browser.Gecko&&function(){Event.observe(document,"keypress",function(a){if(a.keyCode==Event.KEY_TAB)if("select,input,button,textarea".indexOf(a.target.nodeName.toLowerCase())>-1){var b=$(a.target),d=b.up("form").getElements().findAll(function(j){return"hidden"!=j.type&&!j.disabled});b=d.indexOf(b);var f=null;if(f=a.shiftKey?b-1>=0?d[b-1]:null:b+1<d.length?d[b+1]:null){a.stop();f.focus()}}})}();function CommentsController(a){this.initialize(a)}
CommentsController.prototype={initialize:function(a){this._comments_path=a.comments_path;this._hidden_threshold=a.hidden_threshold;this._active_user=a.active_user;this._comment_ids=a.comment_ids;this._top_comments=a.top_comments;this._show_blog_comment=a.show_blog_comment;this._call_to_action=a.call_to_action},showNewCommentForm:function(a){if(a==undefined)a="";if(this._call_to_action||this._active_user.isAuthenticated()){try{holodeck.recordAnalyticsEvent("Comments","Add")}catch(b){}$("commentutility")&&
Element.hide("commentutility"+a);Element.show("comment_new"+a)}},showReplyToCommentForm:function(a){$("reply_to_comment").show();$("comment_"+a).insert($("reply_to_comment"));$("response_content").value="";a=a;$("reply_to_comment_submit").stopObserving("click");$("reply_to_comment_submit").on("click",function(){comments_controller.replyToComment(a)})},showEditReplyToCommentForm:function(a){$("reply_to_comment").show();$("comment_response_"+a).insert($("reply_to_comment"));$("response_content").value=
$("comment_response_content_"+a).innerHTML;a=a;$("reply_to_comment_submit").stopObserving("click");$("reply_to_comment_submit").on("click",function(){comments_controller.replyToComment(a)})},resetNewCommentForm:function(a){if(a==undefined)a="";$("comment_content"+a).value="";$("comment_errors"+a).hide();Element.hide("comment_new"+a);this.reenableNewCommentForm(a);$("commentutility")&&$("commentutility"+a).show()},reenableNewCommentForm:function(a){if(a==undefined)a="";Element.hide("comment_indicator"+
a);$("post_comment_submit"+a).disabled=false},submitNewCommentForm:function(a,b){if(b==undefined)b="";var d=this;Element.show("comment_indicator"+b);$("post_comment_submit"+b).disabled=true;d._call_to_action&&$("post_comment_submit"+b).hide();$(a).request({method:"post",onSuccess:function(f){var j;if(d._call_to_action){(j=$("added_comments_list"))&&j.insert({top:f.responseText});window.location.hash="_";window.location.hash="recent_comments";f=j.down();new Effect.Highlight(f,{});active_user.isFacebookConnected()||
f.insert({after:$("facebook_comment_upsell").show()})}else(j=$$(".comment_list").first())&&j.insert(f.responseText);$("no_comments").hide();d.resetNewCommentForm(b);if(d._call_to_action){$("comment_indicator"+b).hide();$("post_comment_submit"+b).show();d.showNewCommentForm(b)}urchinTracker("/new_comment")},on400:function(f){d.showNewCommentErrors(f.responseText,b)},on500:function(){d.showNewCommentErrors("A server error occured.",b)}})},showNewCommentErrors:function(a,b){if(b==undefined)b="";var d=
$("comment_errors"+b);d.show();d.update(a);if(this._call_to_action){$("comment_indicator"+b).hide();$("post_comment_submit"+b).show()}this.reenableNewCommentForm(b)},userSilenced:function(){var a=$("comment_user_silenced");$("comment_add_a_comment").hide();a.update(this._active_user.silencedMessage());a.show()},checkUserSilenced:function(){this._active_user.isSilenced()&&this.userSilenced()},lightUpSingleComment:function(a,b){a=$("comment_"+a);a.removeClassName("rated_negative");a.removeClassName("rated_positive");
a.addClassName(b?"rated_positive":"rated_negative")},currentRating:function(a){var b=$("comment_current_rating_"+a).innerHTML;return isNaN(b)?NaN:parseInt($("comment_current_rating_"+a).innerHTML,10)},opinionForComment:function(a){a=$("comment_"+a);return a.hasClassName("rated_negative")?false:a.hasClassName("rated_positive")?true:null},rateComment:function(a,b){var d=this.opinionForComment(a);if(d!==b){var f=this.currentRating(a);if(d===true)f-=1;else if(d===false)f+=1;if(b===true)f+=1;else if(b===
false)f-=1;d=$("comment_"+a);$("comment_rating_area_"+a);var j=this;this.hideRatingLinks(a);isNaN(f)||$("comment_current_rating_"+a).update(f);d.removeClassName("below_threshold");d.removeClassName("above_threshold");d.addClassName(f>this._hidden_threshold||isNaN(f)?"above_threshold":"below_threshold");this.lightUpSingleComment(a,b);new Ajax.Request(this._comments_path+"/"+a+"/ratings.js",{parameters:{opinion:b},onComplete:function(){j.showRatingLinks(a)}})}},flagComment:function(a){var b=this;this.hideRatingLinks(a);
new Ajax.Request(this._comments_path+"/"+a+"/flaggings.js",{onComplete:function(){b.showRatingLinks(a);$("comment_flagged_"+a).show();$("comment_flagged_"+a).update("<span>This comment has been flagged for review.</span>")}})},hideRatingLinks:function(a){var b=$("comment_rating_links_"+a),d=$("flag_indicator_"+a);a=$("comment_status_"+a);d.show();a.hide();b.hide()},showRatingLinks:function(a){var b=$("comment_rating_links_"+a),d=$("flag_indicator_"+a);a=$("comment_status_"+a);d.hide();b.show();a.show()},
showCommentContent:function(a){Element.hide("show_comment_content_"+a);Element.show("hide_comment_content_"+a);Element.show("comment_content_"+a)},hideCommentContent:function(a){Element.show("show_comment_content_"+a);Element.hide("hide_comment_content_"+a);Element.hide("comment_content_"+a)},removeComment:function(a){var b=this._comments_path+"/"+a+".js",d=$("flag_indicator_"+a),f=$("remove_comment_"+a),j=$("comment_"+a);d.show();f.hide();new Ajax.Request(b,{method:"delete",onSuccess:function(){j.remove()}})},
spamComment:function(a){var b=this._comments_path+"/"+a+"/spam.js",d=$("flag_indicator_"+a),f=$("spam_comment_"+a),j=$("comment_"+a);d.show();f.hide();new Ajax.Request(b,{method:"post",onSuccess:function(){j.remove()}})},replyToComment:function(a){var b=this._comments_path+"/"+a+"/reply",d=$("flag_indicator_"+a),f=$("reply_to_comment_"+a),j=$("comment_"+a);d.show();f&&f.hide();new Ajax.Request(b,{method:"post",parameters:{response_content:$("response_content").value,show_blog_comment:this._show_blog_comment},
onSuccess:function(n){var r=$("reply_to_comment");r.hide();$$(".user_message").last().insert({after:r});j.replace(n.responseText);comments_controller.showAdminControls();d.hide()}})},cancelReply:function(){$("reply_to_comment").hide();$("response_content").value=""},checkUserRatingStatus:function(){var a=this;(function(){new Ajax.Request(this._active_user.accountUrl()+"/comment_ratings.json",{method:"get",parameters:{comment_ids:Object.toJSON(this._comment_ids),game_id:this._active_user.gameId(),
top_comments:this._top_comments?true:""},onSuccess:function(b){a.lightUpComments(b.responseJSON)}})}).bind(this).runWhenDomLoaded(true)},clearReply:function(a){var b=this._comments_path+"/"+a+"/clear_reply",d=$("flag_indicator_"+a),f=$("clear_reply_to_comment_"+a),j=$("reply_to_comment_"+a),n=$("comment_"+a);d.show();f.hide();new Ajax.Request(b,{method:"post",onSuccess:function(){d.hide();j.show();n.down(".comment_reply").remove()}})},lightUpComments:function(a){var b=this;$H(a).each(function(d){b.lightUpSingleComment(d.key,
d.value)})},showAdminControls:function(){if(active_user.isAdmin()){$$(".admin_controls").each(Element.show);$$(".developer_controls").each(Element.show)}else active_user.isDeveloperOfGame()&&$$(".developer_controls").each(Element.show)}};Function.prototype.runWhenDomLoaded=function(a){if(a&&window.gameLoadObserver)this.runWhenGameLoaded();else if(document.loaded)this.defer();else{var b=this;document.observe("dom:loaded",function(){b()})}};Function.prototype.runWhenReady=function(){var a=function(d){document.loaded&&document.javascript_loaded&&d.defer()};if(document.loaded&&document.javascript_loaded)this.defer();else{var b=this;document.observe("dom:loaded",function(){a(b)});document.observe("dom:javascript_loaded",function(){a(b)})}};Cookie={set:function(a,b,d,f){a=encodeURIComponent(a)+"="+encodeURIComponent(b||"");if(d!==undefined){b=new Date;b.setTime(b.getTime()+864E5*parseFloat(d));a+="; expires="+b.toGMTString()}a+=f?"; path="+f:"; path=/";return document.cookie=a},setWithDate:function(a,b,d){a=encodeURIComponent(a)+"="+encodeURIComponent(b||"");if(d!==undefined)a+="; expires="+d.toGMTString();a+="; path=/";return document.cookie=a},get:function(a){return(a=document.cookie.match(new RegExp("(^|;)\\s*"+encodeURIComponent(a)+
"=([^;\\s]*)")))?decodeURIComponent(a[2].gsub(/\+/," ")):null},erase:function(a,b){var d=Cookie.get(a)||true;Cookie.set(a,"",-1,b);return d},accept:function(){if(typeof navigator.cookieEnabled=="boolean")return navigator.cookieEnabled;Cookie.set("_test","1");return Cookie.erase("_test")==="1"}};var swfobject=function(){function a(){if(!$a){try{var G=U.getElementsByTagName("body")[0].appendChild(P("span"));G.parentNode.removeChild(G)}catch(L){return}$a=true;G=X.length;for(var Z=0;Z<G;Z++)X[Z]()}}function b(G){if($a)G();else X[X.length]=G}function d(G){if(typeof K.addEventListener!=B)K.addEventListener("load",G,false);else if(typeof U.addEventListener!=B)U.addEventListener("load",G,false);else if(typeof K.attachEvent!=B)k(K,"onload",G);else if(typeof K.onload=="function"){var L=K.onload;K.onload=
function(){L();G()}}else K.onload=G}function f(){ra?j():n()}function j(){var G=U.getElementsByTagName("body")[0],L=P(J);L.setAttribute("type",Q);var Z=G.appendChild(L);if(Z){var ea=0;(function(){if(typeof Z.GetVariable!=B){var R=Z.GetVariable("$version");if(R){R=R.split(" ")[1].split(",");ia.pv=[parseInt(R[0],10),parseInt(R[1],10),parseInt(R[2],10)]}}else if(ea<10){ea++;setTimeout(arguments.callee,10);return}G.removeChild(L);Z=null;n()})()}else n()}function n(){var G=ga.length;if(G>0)for(var L=0;L<
G;L++){var Z=ga[L].id,ea=ga[L].callbackFn,R={success:false,id:Z};if(ia.pv[0]>0){var pa=D(Z);if(pa)if(p(ga[L].swfVersion)&&!(ia.wk&&ia.wk<312)){z(Z,true);if(ea){R.success=true;R.ref=r(Z);ea(R)}}else if(ga[L].expressInstall&&x()){R={};R.data=ga[L].expressInstall;R.width=pa.getAttribute("width")||"0";R.height=pa.getAttribute("height")||"0";if(pa.getAttribute("class"))R.styleclass=pa.getAttribute("class");if(pa.getAttribute("align"))R.align=pa.getAttribute("align");var sa={};pa=pa.getElementsByTagName("param");
for(var Ca=pa.length,Da=0;Da<Ca;Da++)if(pa[Da].getAttribute("name").toLowerCase()!="movie")sa[pa[Da].getAttribute("name")]=pa[Da].getAttribute("value");y(R,sa,Z,ea)}else{O(pa);ea&&ea(R)}}else{z(Z,true);if(ea){if((Z=r(Z))&&typeof Z.SetVariable!=B){R.success=true;R.ref=Z}ea(R)}}}}function r(G){var L=null;if((G=D(G))&&G.nodeName=="OBJECT")if(typeof G.SetVariable!=B)L=G;else if(G=G.getElementsByTagName(J)[0])L=G;return L}function x(){return!kb&&p("6.0.65")&&(ia.win||ia.mac)&&!(ia.wk&&ia.wk<312)}function y(G,
L,Z,ea){kb=true;za=ea||null;cb={success:false,id:Z};var R=D(Z);if(R){if(R.nodeName=="OBJECT"){oa=Y(R);qa=null}else{oa=R;qa=Z}G.id=w;if(typeof G.width==B||!/%$/.test(G.width)&&parseInt(G.width,10)<310)G.width="310";if(typeof G.height==B||!/%$/.test(G.height)&&parseInt(G.height,10)<137)G.height="137";U.title=U.title.slice(0,47)+" - Flash Player Installation";ea=ia.ie&&ia.win?"ActiveX":"PlugIn";ea="MMredirectURL="+encodeURI(K.location).toString().replace(/&/g,"%26")+"&MMplayerType="+ea+"&MMdoctitle="+
U.title;if(typeof L.flashvars!=B)L.flashvars+="&"+ea;else L.flashvars=ea;if(ia.ie&&ia.win&&R.readyState!=4){ea=P("div");Z+="SWFObjectNew";ea.setAttribute("id",Z);R.parentNode.insertBefore(ea,R);R.style.display="none";(function(){R.readyState==4?R.parentNode.removeChild(R):setTimeout(arguments.callee,10)})()}H(G,L,Z)}}function O(G){if(ia.ie&&ia.win&&G.readyState!=4){var L=P("div");G.parentNode.insertBefore(L,G);L.parentNode.replaceChild(Y(G),L);G.style.display="none";(function(){G.readyState==4?G.parentNode.removeChild(G):
setTimeout(arguments.callee,10)})()}else G.parentNode.replaceChild(Y(G),G)}function Y(G){var L=P("div");if(ia.win&&ia.ie)L.innerHTML=G.innerHTML;else if(G=G.getElementsByTagName(J)[0])if(G=G.childNodes)for(var Z=G.length,ea=0;ea<Z;ea++)!(G[ea].nodeType==1&&G[ea].nodeName=="PARAM")&&G[ea].nodeType!=8&&L.appendChild(G[ea].cloneNode(true));return L}function H(G,L,Z){var ea,R=D(Z);if(ia.wk&&ia.wk<312)return ea;if(R){if(typeof G.id==B)G.id=Z;if(ia.ie&&ia.win){var pa="";for(var sa in G)if(G[sa]!=Object.prototype[sa])if(sa.toLowerCase()==
"data")L.movie=G[sa];else if(sa.toLowerCase()=="styleclass")pa+=' class="'+G[sa]+'"';else if(sa.toLowerCase()!="classid")pa+=" "+sa+'="'+G[sa]+'"';sa="";for(var Ca in L)if(L[Ca]!=Object.prototype[Ca])sa+='<param name="'+Ca+'" value="'+L[Ca]+'" />';R.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+pa+">"+sa+"</object>";W[W.length]=G.id;ea=D(G.id)}else{Ca=P(J);Ca.setAttribute("type",Q);for(pa in G)if(G[pa]!=Object.prototype[pa])if(pa.toLowerCase()=="styleclass")Ca.setAttribute("class",
G[pa]);else pa.toLowerCase()!="classid"&&Ca.setAttribute(pa,G[pa]);for(var Da in L)L[Da]!=Object.prototype[Da]&&Da.toLowerCase()!="movie"&&M(Ca,Da,L[Da]);R.parentNode.replaceChild(Ca,R);ea=Ca}}return ea}function M(G,L,Z){var ea=P("param");ea.setAttribute("name",L);ea.setAttribute("value",Z);G.appendChild(ea)}function da(G){var L=D(G);if(L&&L.nodeName=="OBJECT")if(ia.ie&&ia.win){L.style.display="none";(function(){L.readyState==4?ka(G):setTimeout(arguments.callee,10)})()}else L.parentNode.removeChild(L)}
function ka(G){if(G=D(G)){for(var L in G)if(typeof G[L]=="function")G[L]=null;G.parentNode.removeChild(G)}}function D(G){var L=null;try{L=U.getElementById(G)}catch(Z){}return L}function P(G){return U.createElement(G)}function k(G,L,Z){G.attachEvent(L,Z);ba[ba.length]=[G,L,Z]}function p(G){var L=ia.pv;G=G.split(".");G[0]=parseInt(G[0],10);G[1]=parseInt(G[1],10)||0;G[2]=parseInt(G[2],10)||0;return L[0]>G[0]||L[0]==G[0]&&L[1]>G[1]||L[0]==G[0]&&L[1]==G[1]&&L[2]>=G[2]?true:false}function t(G,L,Z,ea){if(!(ia.ie&&
ia.mac)){var R=U.getElementsByTagName("head")[0];if(R){Z=Z&&typeof Z=="string"?Z:"screen";if(ea)Fb=Wa=null;if(!Wa||Fb!=Z){ea=P("style");ea.setAttribute("type","text/css");ea.setAttribute("media",Z);Wa=R.appendChild(ea);if(ia.ie&&ia.win&&typeof U.styleSheets!=B&&U.styleSheets.length>0)Wa=U.styleSheets[U.styleSheets.length-1];Fb=Z}if(ia.ie&&ia.win)Wa&&typeof Wa.addRule==J&&Wa.addRule(G,L);else Wa&&typeof U.createTextNode!=B&&Wa.appendChild(U.createTextNode(G+" {"+L+"}"))}}}function z(G,L){if(Ja){L=
L?"visible":"hidden";if($a&&D(G))D(G).style.visibility=L;else t("#"+G,"visibility:"+L)}}function I(G){return/[\\\"<>\.;]/.exec(G)!=null&&typeof encodeURIComponent!=B?encodeURIComponent(G):G}var B="undefined",J="object",Q="application/x-shockwave-flash",w="SWFObjectExprInst",K=window,U=document,la=navigator,ra=false,X=[f],ga=[],W=[],ba=[],oa,qa,za,cb,$a=false,kb=false,Wa,Fb,Ja=true,ia=function(){var G=typeof U.getElementById!=B&&typeof U.getElementsByTagName!=B&&typeof U.createElement!=B,L=la.userAgent.toLowerCase(),
Z=la.platform.toLowerCase(),ea=Z?/win/.test(Z):/win/.test(L);Z=Z?/mac/.test(Z):/mac/.test(L);L=/webkit/.test(L)?parseFloat(L.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false;var R=!+"\u000b1",pa=[0,0,0],sa=null;if(typeof la.plugins!=B&&typeof la.plugins["Shockwave Flash"]==J){if((sa=la.plugins["Shockwave Flash"].description)&&!(typeof la.mimeTypes!=B&&la.mimeTypes[Q]&&!la.mimeTypes[Q].enabledPlugin)){ra=true;R=false;sa=sa.replace(/^.*\s+(\S+\s+\S+$)/,"$1");pa[0]=parseInt(sa.replace(/^(.*)\..*$/,
"$1"),10);pa[1]=parseInt(sa.replace(/^.*\.(.*)\s.*$/,"$1"),10);pa[2]=/[a-zA-Z]/.test(sa)?parseInt(sa.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof K.ActiveXObject!=B)try{var Ca=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(Ca)if(sa=Ca.GetVariable("$version")){R=true;sa=sa.split(" ")[1].split(",");pa=[parseInt(sa[0],10),parseInt(sa[1],10),parseInt(sa[2],10)]}}catch(Da){}return{w3:G,pv:pa,wk:L,ie:R,win:ea,mac:Z}}();(function(){if(ia.w3){if(typeof U.readyState!=B&&U.readyState=="complete"||
typeof U.readyState==B&&(U.getElementsByTagName("body")[0]||U.body))a();if(!$a){typeof U.addEventListener!=B&&U.addEventListener("DOMContentLoaded",a,false);if(ia.ie&&ia.win){U.attachEvent("onreadystatechange",function(){if(U.readyState=="complete"){U.detachEvent("onreadystatechange",arguments.callee);a()}});K==top&&function(){if(!$a){try{U.documentElement.doScroll("left")}catch(G){setTimeout(arguments.callee,0);return}a()}}()}ia.wk&&function(){$a||(/loaded|complete/.test(U.readyState)?a():setTimeout(arguments.callee,
0))}();d(a)}}})();(function(){ia.ie&&ia.win&&window.attachEvent("onunload",function(){for(var G=ba.length,L=0;L<G;L++)ba[L][0].detachEvent(ba[L][1],ba[L][2]);G=W.length;for(L=0;L<G;L++)da(W[L]);for(var Z in ia)ia[Z]=null;ia=null;for(var ea in swfobject)swfobject[ea]=null;swfobject=null})})();return{registerObject:function(G,L,Z,ea){if(ia.w3&&G&&L){var R={};R.id=G;R.swfVersion=L;R.expressInstall=Z;R.callbackFn=ea;ga[ga.length]=R;z(G,false)}else ea&&ea({success:false,id:G})},getObjectById:function(G){if(ia.w3)return r(G)},
embedSWF:function(G,L,Z,ea,R,pa,sa,Ca,Da,Ra){var lb={success:false,id:L};if(ia.w3&&!(ia.wk&&ia.wk<312)&&G&&L&&Z&&ea&&R){z(L,false);b(function(){Z+="";ea+="";var Sa={};if(Da&&typeof Da===J)for(var Ka in Da)Sa[Ka]=Da[Ka];Sa.data=G;Sa.width=Z;Sa.height=ea;Ka={};if(Ca&&typeof Ca===J)for(var mb in Ca)Ka[mb]=Ca[mb];if(sa&&typeof sa===J)for(var vb in sa)if(typeof Ka.flashvars!=B)Ka.flashvars+="&"+vb+"="+sa[vb];else Ka.flashvars=vb+"="+sa[vb];if(p(R)){mb=H(Sa,Ka,L);Sa.id==L&&z(L,true);lb.success=true;lb.ref=
mb}else if(pa&&x()){Sa.data=pa;y(Sa,Ka,L,Ra);return}else z(L,true);Ra&&Ra(lb)})}else Ra&&Ra(lb)},switchOffAutoHideShow:function(){Ja=false},ua:ia,getFlashPlayerVersion:function(){return{major:ia.pv[0],minor:ia.pv[1],release:ia.pv[2]}},hasFlashPlayerVersion:p,createSWF:function(G,L,Z){if(ia.w3)return H(G,L,Z)},showExpressInstall:function(G,L,Z,ea){ia.w3&&x()&&y(G,L,Z,ea)},removeSWF:function(G){ia.w3&&da(G)},createCSS:function(G,L,Z,ea){ia.w3&&t(G,L,Z,ea)},addDomLoadEvent:b,addLoadEvent:d,getQueryParamValue:function(G){var L=
U.location.search||U.location.hash;if(L){if(/\?/.test(L))L=L.split("?")[1];if(G==null)return I(L);L=L.split("&");for(var Z=0;Z<L.length;Z++)if(L[Z].substring(0,L[Z].indexOf("="))==G)return I(L[Z].substring(L[Z].indexOf("=")+1))}return""},expressInstallCallback:function(){if(kb){var G=D(w);if(G&&oa){G.parentNode.replaceChild(oa,G);if(qa){z(qa,true);if(ia.ie&&ia.win)oa.style.display="block"}za&&za(cb)}kb=false}}}}();HandlerQueue=function(){function a(f){d.push(f)}function b(){for(var f=d.length-1;f>=0;f--)d[f].apply(this,arguments)}var d=[];return{add:a,handle:b}};ActiveUser=function(a){this.initialize(a)};ActiveUser.UPDATE_FREQUENCY=1200;ActiveUser.SILENCED_TEMPLATE=new Template('You have been silenced for #{until}. Click <a href="/pages/silenced">here</a> to read about silences.');ActiveUser.ADMIN_LOAD_TOOLS_PATH="/admin/load_toolbar";ActiveUser.USER_DATA_LS_KEY="kong_user_data";ActiveUser.SEEN_SHARED_CONTENT_WELCOME_LS_KEY="kong_seen_shared_content";
ActiveUser.prototype={initialize:function(a){var b=this;this._dynamic_style_ele=this._holodeck=null;this._attributes=$H();this._game_attributes=$H();this._attribute_observer_handler=new HandlerQueue;this._on_authenticated_handler=new HandlerQueue;this._captured_inline_selectors=[];this._domain=a.domain;this._cdn_domain=a.cdn_domain;this._load_toolbar=a.load_toolbar;this._game_page=a.game_page;this._redirect_capture=a.redirect_capture;this._new_session_url=a.new_session_url;this.updateAttributes(a.kong_user_data);
this.split_treatments=this.getAttributes().split_treatments;this._more_game_tab_page=2;this._user_progress_bar=null;this._showing_blue_bar_message=false;this.isAuthenticated()&&this.createUpdater();this.addRunWhenAuthenticatedObserver(function(d){d.populateUserSpecificLinks();d.loadAdminToolbar();d.lightPowerupRewardsUpsell();d.initializeUserProgressBar.bind(b).runWhenReady()});this.lightUpBadgeOfTheDayOverlay();this.lightPowerupRewardsUpsell();this._splitTreatmentPermalinks=(this._splitTreatmentPermalinks=
Cookie.get("splitTreatmentPermalinks"))?this._splitTreatmentPermalinks.evalJSON():{}},setHolodeck:function(a){this._holodeck=a},createUpdater:function(){var a=this;new PeriodicalExecuter(function(){a.pullUserData(true)},ActiveUser.UPDATE_FREQUENCY)},isShowingBlueBar:function(){return this._showing_blue_bar_message},showingBlueBar:function(){this._showing_blue_bar_message=true;this._user_progress_bar&&this._user_progress_bar.hideForBlueBar()},initializeUserProgressBar:function(){if(this.getsUserProgressBar()&&
!this.isShowingBlueBar())this._user_progress_bar=new UserProgressBar(this)},getsUserProgressBar:function(){return(this.onOwnProfilePage()||!this._attributes.get("progress_bar_opt_out"))&&this._attributes.get("gets_progress_bar")},showProgressBarCompletionMessage:function(){return this._attributes.get("show_progress_completion_message")},inItemProgressBarTest:function(){return this.split_treatments.user_progress_bar.match("item")},onOwnProfilePage:function(){return this.isAuthenticated()&&"/accounts/"+
this.username().toLowerCase()==window.location.pathname.toLowerCase()},availableProgressBarSteps:function(){return this._attributes.get("available_progress_bar_steps")},progressBarPercentComplete:function(){return this._attributes.get("progress_bar_percent_complete")},pullUserData:function(a){var b=this;a="/accounts/"+this.username()+(a?"/info_update.json":"/info.json");new Ajax.Request(a,{method:"get",onSuccess:function(d){b.updateAttributes(d.responseJSON)}})},addAttributesObserver:function(a){this._attribute_observer_handler.add(a)},
addOnAuthenticatedObserver:function(a){this._on_authenticated_handler.add(a)},addRunWhenAuthenticatedObserver:function(a){this.isAuthenticated()?function(){a(this)}.bind(this).runWhenDomLoaded(true):this.addOnAuthenticatedObserver(a)},updateAttributes:function(a){var b=$.jStorage.get(ActiveUser.USER_DATA_LS_KEY),d=this._attributes.get("username");if(b&&(b.version>a.version||b.generated_at>a.generated_at))a=b;this._attributes.update(a);this._attribute_observer_handler.handle(this);a.username&&a.username!=
d&&this.usernameUpdated();$.jStorage.set(ActiveUser.USER_DATA_LS_KEY,this._attributes.toObject());this.updateNativeAppAttributes()},isNativeAppUser:function(){return!!window.kongNativeApp},sendNativeAppMessage:function(a,b){this.isNativeAppUser()&&kongNativeApp.sendMessage(Object.toJSON({opcode:a,params:b}))},closeNativeAppWindow:function(){this.sendNativeAppMessage("close",{})},updateNativeAppAttributes:function(){this.sendNativeAppMessage("user_info",this._attributes)},updateGameAttributes:function(a){this._game_attributes.update(a)},
gameCookieName:function(){if(this._game_id)return"kong_game_"+this._game_id},getAttributes:function(){return this._attributes.toObject()},getGameAttributes:function(){return this._game_attributes.toObject()},username:function(){return this._attributes.get("username")},siteVisitorUID:function(){return Cookie.get("kong_svid")},advertiserGender:function(a,b){var d=this._attributes.get("gender");if(/^m/i.match(d))return a;else if(/^f/i.match(d))return b},videoEggGender:function(){return this.advertiserGender("m",
"f")},googleGender:function(){return this.advertiserGender(1,2)},googleAgeBracket:function(){var a=this._attributes.get("age");return a<=17?undefined:a<=24?1001:a<=34?1002:a<=44?1003:a<=54?1004:a<=64?1005:1006},avatarPath:function(){var a=this._attributes.get("avatar_url");if(!a)return"";if((a=a.match(/http:\/\/[a-z\.:0-9]*(.*)$/))&&a.length==2)return a[1]},id:function(){return this._attributes.get("id")},facebook_uid:function(){return this._attributes.get("facebook_uid")},solvedCaptcha:function(){return this._attributes.get("solved_captcha")},
chatUsername:function(){return this._attributes.get("chat_username")||this._attributes.get("username")},chatPassword:function(){return this._attributes.get("chat_password")},gameAuthToken:function(){return this._game_attributes.get("game_auth_token")},userVars:function(){return this._game_attributes.get("user_vars")},userVarsSig:function(){return this._game_attributes.get("user_vars_sig")},specialChatVars:function(){return this._attributes.get("special_chat_vars")},gameplaysCount:function(){return this._attributes.get("gameplays_count")},
ratingsCount:function(){return this._attributes.get("ratings_count")},gameplaysCountFromCookie:function(){try{return parseInt(Cookie.get(Holodeck.KONG_GAMEPLAYS_COOKIE_NAME)||1,10)}catch(a){return 0}},duelingGroup:function(){var a=this.specialChatVars();if(a)if(a=a.dueling_quest_data)return a.dueling_quest_slug||"";return""},age:function(){return this._attributes.get("age")},points:function(){return this._attributes.get("points")},pointsAway:function(){return this._attributes.get("points_away")},
friendsOnlineCount:function(){return this._attributes.get("friends_online_count")},friendsOnlineNames:function(){return this._attributes.get("friends_online_names")},unreadShoutsCount:function(){return this._attributes.get("unread_shouts_count")},unreadWhispersCount:function(){return this._attributes.get("unread_whispers_count")},pointsForLastLevel:function(){return this._attributes.get("points_for_last_level")},pointsAfterLastLevel:function(){return active_user.points()-active_user.pointsForLastLevel()},
level:function(){return this._attributes.get("level")},lastLevelupAt:function(){var a=this._attributes.get("last_levelup_at");return a?new Date(a):undefined},recentLevelup:function(){return this.lastLevelupAt()>new Date((new Date).getTime()-864E5)},senderNameOrEmail:function(){return this._attributes.get("sender_name_or_email")},boshEnabled:function(){return this._game_attributes.get("bosh_enabled")},compressionEnabled:function(){return this._game_attributes.get("compression_enabled")},usernameUpdated:function(){var a=
this;(function(){if(a.isAuthenticated()){a.createUpdater(a);a._on_authenticated_handler.handle(a)}}).runWhenDomLoaded(true)},isAuthenticated:function(){return!!(this.username()&&!/^Guest/.match(this.username()))},isAdmin:function(){return this.isAuthenticated()&&this._attributes.get("admin")},isPremium:function(){return!Cookie.get("admin_premium_off")&&this.isAuthenticated()&&this._attributes.get("premium")},hasPreroll:function(){return this.gameplaysCount()>0&&(this.split_treatments.split_killing_prerolls2==
undefined||this.split_treatments.split_killing_prerolls2=="control")},premiumizeUpsellNode:function(a,b,d){this.isPremium()||a.addClassName("clickable").observe("click",function(f){lightbox.prototype.initializePremiumMembershipPurchase(b,d);Event.stop(f);return false});return a},isDeveloperOfGame:function(){return document.location.pathname.split("/")[2].toLowerCase()==this.username().toLowerCase()},isDeveloper:function(){return this.isAuthenticated()&&this._attributes.get("developer")},isChatModerator:function(){return this.isAuthenticated()&&
this._attributes.get("moderator")},isSuperChatModerator:function(){return this.isAuthenticated()&&this._attributes.get("super_chat_moderator")},isCurator:function(){return this.isAuthenticated()&&this._attributes.get("curator")},isForumModerator:function(){return this.isAuthenticated()&&this._attributes.get("forum_moderator")},isGamestopEmployee:function(){return this.isAuthenticated()&&this._attributes.get("gamestop_employee")},getsAdminBar:function(){if(!this._load_toolbar)return false;return this.isChatModerator()||
this.isCurator()||this.isForumModerator()||this.isGamestopEmployee()},silencedUntil:function(){var a=this._attributes.get("silenced_until");return a?new Date(a):undefined},isSilenced:function(){var a=this.silencedUntil();return Boolean(a&&a>new Date)},silencedMessage:function(){return ActiveUser.SILENCED_TEMPLATE.evaluate({until:TimeInWordsHelper.distanceInWords(new Date,this.silencedUntil())})},populateUserSpecificLinks:function(a){var b=this.username();(a?a.select("a"):$$("a.user_specific")).each(function(d){d.href=
d.href.replace("Guest",b).replace("KongregateHolodeckTemplateUsername",b)})},addCapturedSelector:function(a,b){this._captured_inline_selectors.push(a);var d=this,f=function(j){var n=j.onclick;if(n)j.onclick=d.capturedSelectorWrapper.bindAsEventListener(d,n.bind(j),b)};$$(a).each(function(j){j.match("a, input[type=button]")?f(j):j.getElementsBySelector("a, input[type=button]").each(f);j.addClassName("lbOn")})},capturedSelectorWrapper:function(a,b,d){var f="function"==typeof b;if(this.isAuthenticated()){if(f)return b(a)}else{this._redirect_capture?
this.redirectToLogin():this.activateInlineLogin({},d);"function"==typeof b&&this.saveCapturedFunction(b.curry(a));a.preventDefault!=undefined&&Event.stop(a);return false}},activateInlineLogin:function(a,b){a||(a={});a=$H(a);var d="/accounts/new/behind_login";this._holodeck&&this._holodeck.recordAnalyticsEvent("Lightbox","Signin");this._game_id&&a.set("game_id",this._game_id);if(a.size()>0)d=d+"?"+a.toQueryString();b?lightbox.prototype.initializeKongregateLightboxFromAjax(d,{afterStaticContentLoad:function(){lightbox.prototype.toggleRegistration();
active_user.focusFormField("username")}}):lightbox.prototype.initializeKongregateLightboxFromAjax(d,{done_class_name:"lightbox_login",afterStaticContentLoad:function(){active_user.focusFormField("username")}})},focusFormField:function(a){var b=$(a);b&&setTimeout(function(){b.focus()},0)},activateKredPurchase:function(a){this.isAuthenticated()&&lightbox.prototype.initializeKredPurchase(a)},activatePasswordRecovery:function(){if(this.isGamePage())this.activateInlineLogin({recover:true});else document.location=
"/session/new?recover=true"},redirectToLogin:function(){top.location=this._new_session_url},debugLevel:function(){if(!this._debug_level)this._debug_level=this.documentLocationSearchQuery().debug_level;return this._debug_level},documentLocationSearchQuery:function(){if(!this._document_location_search_query)this._document_location_search_query=document.location.search.parseQuery();return this._document_location_search_query},seenSharedContentWelcomeKey:function(){return ActiveUser.SEEN_SHARED_CONTENT_WELCOME_LS_KEY+
"_"+this.gameId()},seenSharedContentWelcome:function(){return!!$.jStorage.get(this.seenSharedContentWelcomeKey())},setSeenSharedContentWelcome:function(a){a?$.jStorage.set(this.seenSharedContentWelcomeKey(),a):$.jStorage.deleteKey(this.seenSharedContentWelcomeKey())},saveCapturedFunction:function(a){this._capturedFunction=a},runCapturedFunction:function(){"function"==typeof this._capturedFunction&&this._capturedFunction.defer();this._capturedFunction=null},gameId:function(){return this._game_id},
setGame:function(a,b,d){this._game_id=a;this._game_resource_path=b;if(d){this.updateGameAttributes(d);Cookie.erase(this.gameCookieName(),this.gameCookiePath())}},gamePath:function(){if(!this._game_path){var a=document.location.pathname.match(/(.*)\/$/);this._game_path=a?a[1]:document.location.pathname}return this._game_path},gameResourcePath:function(){return this._game_resource_path},gameCookiePath:function(){if(!this._game_cookie_path)this._game_cookie_path=this.gamePath().match(/(.*)\/.*/)[1];
return this._game_cookie_path},referrerUrl:function(a){if(!this.isAuthenticated())return a;var b=a.match(/\?/)?"&":"?";return a+b+"referrer="+encodeURIComponent(this.username())},gameType:function(){return this._game_attributes.get("game_type")},hasRequiredPlugins:function(){return this.hasRequiredPluginsFor(this.gameType())},hasRequiredPluginsFor:function(a){if(a=="unity"){var b=false;unityObject.detectUnity(function(d){b=d=="installed"||d=="running"});return b}else return true},accountUrl:function(){return"/accounts/"+
this.username()},isGamePage:function(){return!!this._game_page},domain:function(){return this._domain},cdnDomain:function(){return this._cdn_domain},isMobileUserAgent:function(){return this._attributes.get("mobile_user_agent")},countryCode:function(){return this.valueOfSearchParameter("force_country_code")||this._attributes.get("country_code")},loadAdminToolbar:function(){this.getsAdminBar()&&new Ajax.Updater({success:"admin_links_placeholder"},ActiveUser.ADMIN_LOAD_TOOLS_PATH,{method:"get",evalScripts:true})},
recordTreatments:function(a){a&&this._attributes.get("treatments")&&this._attributes.get("treatments").each(function(b){b.analytics_slot&&a._setCustomVar(b.analytics_slot,b.group_permalink,b.treatment_permalink,2)})},valueOfSearchParameter:function(a){return location.search.parseQuery()[a]},powerupRewardsUser:function(){return this._attributes.get("powerup_rewards_user")},powerupRewardsProUser:function(){return!!this.powerupRewardsBonus()},powerupRewardsBonus:function(){return this._attributes.get("powerup_rewards_bonus")},
powerupRewardsBonusFor:function(a){a=parseInt(a,10);var b=this.powerupRewardsBonus();return a>0&&b?(a*b).ceil():a},showPowerupRewardsUpsell:function(){return"US"==this.countryCode()},occasionallyShowRegistrationLightbox:function(){!this.isAuthenticated()&&this.gameplaysCount()-1>=0&&(this.gameplaysCount()-1)%7==0&&this.activateInlineLogin({},true)},lightPowerupRewardsUpsell:function(){if(this.showPowerupRewardsUpsell()){this.createCSS(".powerup_rewards_upsell","display:block");this.createCSS(".powerup_rewards_botd_upsell",
"display:inline")}},lightUpBadgeOfTheDayOverlay:function(){var a=this._attributes.get("botd_badge_id");a&&this.createCSS(".badge_of_the_day_overlay span.botd_badge_id_"+a,"display:block")},createCSS:function(a,b){var d;if(!this._dynamic_style_ele){var f=$$("head")[0];d=new Element("style",{type:"text/css",media:"screen"});f.appendChild(d)}if(!this._dynamic_style_ele)if(Prototype.Browser.IE&&!Prototype.Browser.IE9){if((d=document.styleSheets)&&d.length>0)this._dynamic_style_ele=d[d.length-1]}else this._dynamic_style_ele=
d;if(Prototype.Browser.IE&&!Prototype.Browser.IE9)this._dynamic_style_ele&&typeof this._dynamic_style_ele.addRule=="object"&&this._dynamic_style_ele.addRule(a,b);else this._dynamic_style_ele&&typeof document.createTextNode!="undefined"&&this._dynamic_style_ele.appendChild(document.createTextNode(a+" {"+b+"}"))},invokeConversionIframe:function(){Cookie.erase("_kong_acct_created","/");try{$("conversion_dynamic_iframe_target").update((new Template($("conversion_dynamic_iframe").innerHTML)).evaluate())}catch(a){}},
ignoreBounceMessage:function(a,b){$(a).up(".sitemessage").hide();new Ajax.Request(b)},shoutForGame:function(a,b){a="/accounts/"+this.username()+"/permissions_for_game.json?game_id="+a;new Ajax.Request(a,{method:"get",onSuccess:function(d){json=d.responseJSON;allow=json!=null&&json.always_allow_shouts;b(allow)}})},kredBuyerType:function(){return this._attributes.get("kred_buyer_type")},isFacebookConnected:function(){return!!this._attributes.get("facebook_uid")},facebookAccessTokenNeedsUpdate:function(){return!!this._attributes.get("access_token_needs_update")},
facebookStatus:function(){return this._attributes.get("facebook_status")},facebookLoginUrl:function(){return this._attributes.get("facebook_url")},gameTagTreatment:function(){return this.split_treatments.tags_replace_description},hasGoogleADayForToday:function(){if(!this.isAuthenticated())return false;return!!this._attributes.get("gad_earned")},updateMoreGames:function(){if(!this.isAuthenticated())if(holodeck._permissions.microtransaction_api)holodeck.showSignupTab();else{holodeck.showMoreGamesTab();
holodeck.showSignupTab();new Ajax.Updater({success:"replace_more_games"},"/recommended_games/show_more_tab",{parameters:{game_id:this.gameId(),show_more_tab:true},method:"get",onSuccess:function(){$("main_tab_set").select("a").each(function(a){$("more_games_tab")==undefined&&a.observe("click",function(){$("more_games_tab_pane").hide();clearTimeout(active_user.changeTabTimeout)})});holodeck.showSignupTab();active_user.changeTabTimeout=setTimeout(function(){holodeck.showMoreGamesTab()},3E5)},onFailure:function(){holodeck.showSignupTab()}})}},
moreGamesNextPage:function(){new Ajax.Request("/recommended_games/show_more_tab",{parameters:{game_id:this.gameId(),show_more_tab:true,page:this._more_game_tab_page},method:"get",onSuccess:function(a){active_user._more_game_tab_page+=1;$$(".more_games_load_btn")[0].insert({before:a.responseText});if(active_user._more_game_tab_page*4<48)$("load_more_games_button").restore();else{$("load_more_games_button").hide();$$(".more_games_load_btn").each(Element.hide)}}})},getSplitTreatmentPermalink:function(a,
b,d){if(this._splitTreatmentPermalinks[a])b(this._splitTreatmentPermalinks[a]);else new Ajax.Request("/site_visitor_split_treatments/"+a,{method:"get",onSuccess:function(f){b(f.responseText);active_user._splitTreatmentPermalinks[a]=f.responseText;Cookie.set("splitTreatmentPermalinks",Object.toJSON(active_user._splitTreatmentPermalinks))},onFailure:d})},favoritesCount:function(){return this._attributes.get("favorites_count")},playLatersCount:function(){return this._attributes.get("play_laters_count")},
getsImprovedBrowsing:function(){return this._attributes.get("gets_improved_browsing")},src:function(){return this._attributes.get("src")},crazyEggSplitTreatment:function(){return this._attributes.get("crazy_egg_split_treatment")},showFacebookRegistrationTab:function(){return this._attributes.get("show_facebook_registration")||false},getsInstartOptimizations:function(){return this.split_treatments.instart=="instart"},gameSplitTreatments:function(a){var b=[];$H(this.split_treatments).each(function(d){d.key.substring(0,
a.length)===a&&b.push(d.key+","+d.value)});return b.size()==0?"none":b.join("|")}};Ajax.CachedAutocompleter=Class.create();
Object.extend(Object.extend(Ajax.CachedAutocompleter.prototype,Autocompleter.Base.prototype),{initialize:function(a,b,d,f){this.baseInitialize(a,b,f);this.options.asynchronous=true;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=d;this.cache={};if(this.options.forceActivation){Event.stopObserving(this.element,"keydown");Event.observe(this.element,"keydown",this.onKeyPressWithForcedActivation.bindAsEventListener(this));Event.observe(this.element,
"focus",this.onFocus.bindAsEventListener(this))}},getUpdatedChoices:function(){var a=this.getToken().toLowerCase();if(this.cache[a])this.updateChoices(this.cache[a]);else{this.startIndicator();entry=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(a);this.options.parameters=this.options.callback?this.options.callback(this.element,entry):entry;if(this.options.defaultParams)this.options.parameters+="&"+this.options.defaultParams;new Ajax.Request(this.url,this.options)}},onComplete:function(a){this.updateChoices(this.cache[a.request.parameters.search]=
a.responseText)},markPrevious:function(){if(this.index>0)this.index--;else{this.index=this.entryCount-1;this.update.scrollTop=this.update.scrollHeight}selection=this.getEntry(this.index);selection_top=selection.offsetTop;if(selection_top<this.update.scrollTop)this.update.scrollTop-=selection.offsetHeight},markNext:function(){if(this.index<this.entryCount-1)this.index++;else{this.index=0;this.update.scrollTop=0}selection=this.getEntry(this.index);selection_bottom=selection.offsetTop+selection.offsetHeight;
if(selection_bottom>this.update.scrollTop+this.update.offsetHeight)this.update.scrollTop+=selection.offsetHeight},selectEntry:function(){if(this.index>=0){this.active=false;this.updateElement(this.getCurrentEntry())}else{try{this.element.form.onsubmit()}catch(a){}this.element.form.submit()}},onFocus:function(){this.hasFocus=true;if(this.oldElementValue==this.element.value&&this.element.value.length>=this.options.minChars)this.entryCount>0?this.render():this.show()},onKeyPressWithForcedActivation:function(a){var b=
a.keyCode==Event.KEY_TAB||a.keyCode==Event.KEY_RETURN||Prototype.Browser.WebKit>0&&a.keyCode==0,d=this.element.value.length>=this.options.minChars;if(!this.active&&b&&d){Event.stop(a);this.observer&&clearTimeout(this.observer);this.changed=false;this.hasFocus=true;this.getUpdatedChoices()}else this.onKeyPress(a)},updateChoices:function(a){if(!this.changed&&this.hasFocus){this.update.innerHTML=a;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.down());if(this.update.firstChild&&
this.update.down().childNodes){this.entryCount=this.update.down().childNodes.length;for(a=0;a<this.entryCount;a++){var b=this.getEntry(a);b.autocompleteIndex=a;this.addObservers(b)}}else this.entryCount=0;this.stopIndicator();this.update.scrollTop=0;this.index=this.options.noAutoDefault?-1:0;if(this.entryCount==1&&this.options.autoSelect){this.selectEntry();this.hide()}else this.render()}}});Number.prototype.withDelimiters=function(a,b){a||(a=",");b||(b=1E3);for(var d=[],f=Math.floor(this);f;){d.unshift(f%b);f=Math.floor(f/b)}return[d.shift()].concat(d.map(function(j){return j.toPaddedString((b-1+"").length)})).join(a)};Ajax.Poller=function(a,b,d,f){this.initialize(a,b,d,f)};
Ajax.Poller.prototype={initialize:function(a,b,d,f){this._stopped=true;d=d||5E3;f=f||3E4;var j=this,n=Object.extend(Object.extend({method:"get"},b),{on202:function(){if(!j._stopped){setTimeout(j._poll,d);b.on202&&b.on202.apply(b,arguments)}},onFailure:function(){if(!j._stopped){setTimeout(j._poll,f);b.onFailure&&b.onFailure.apply(b,arguments)}}});this._poll=function(){new Ajax.Request(a,n)}},start:function(a){this._stopped=false;setTimeout(this._poll.bind(this),a||0)},stop:function(){this._stopped=
true}};(function(a,b){var d=0;b.prototype.toGlobalReference=function(){var f=this,j;j="_tgrFn"+d++;a[j]=function(){try{delete a[j]}catch(n){a[j]=undefined}f()};return j}})(this,Function);Prototype.Browser.IE6=navigator.userAgent.indexOf("MSIE 6.")>-1;Prototype.Browser.IE7=navigator.userAgent.indexOf("MSIE 7.")>-1;Prototype.Browser.IE8=navigator.userAgent.indexOf("MSIE 8.")>-1;Prototype.Browser.IE9=navigator.userAgent.indexOf("MSIE 9.")>-1;if(Prototype.Browser.IE8)Element._attributeTranslations.write.names["class"]=undefined;
if(Prototype.Browser.WebKit){var indexOfVersion=navigator.userAgent.indexOf("Version");if(indexOfVersion>-1){var versionString=navigator.userAgent.substr(indexOfVersion,13),version=versionString.split("/")[1];if(version){version=parseInt(version.gsub(".",""));if(version>=503)Prototype.Browser.Safari503=true}}};Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(d){return d.nodeType==3?d.nodeValue:d.hasChildNodes()&&!Element.hasClassName(d,b)?Element.collectTextNodesIgnoreClass(d,b):""}).flatten().join("").strip()};Element.Methods.collectTextNodesIgnoreClass=Element.collectTextNodesIgnoreClass;Element.addMethods(Element.Methods);Element.Methods.selectedOptionValue=function(a){a=$(a);if("SELECT"===a.tagName)return(a=a.select("option")[a.selectedIndex])&&a.readAttribute("value")};Element.Methods.selectOptionValue=function(a,b){a=$(a);if("SELECT"==a.tagName)a.selectedIndex=a.select("option").pluck("value").indexOf(b)};Element.addMethods(Element.Methods);(function(){function a(H){var M=document.createElement("div");H="on"+H;var da=H in M;if(!da){M.setAttribute(H,"return;");da=typeof M[H]=="function"}return da}function b(H){return Object.isElement(H)&&H.nodeName.toUpperCase()=="FORM"}function d(H){if(Object.isElement(H)){H=H.nodeName.toUpperCase();return H=="INPUT"||H=="SELECT"||H=="TEXTAREA"}else return false}function f(H){var M,da,ka;if(H.fire("ajax:before").stopped)return false;if(H.tagName.toLowerCase()==="form"){M=H.readAttribute("method")||"post";
da=H.readAttribute("action");ka=H.serialize({submit:H.retrieve("rails:submit-button")});H.store("rails:submit-button",null)}else{M=H.readAttribute("data-method")||"get";da=H.readAttribute("href");ka={}}new Ajax.Request(da,{method:M,parameters:ka,evalScripts:true,onCreate:function(D){H.fire("ajax:create",D)},onComplete:function(D){H.fire("ajax:complete",D)},onSuccess:function(D){H.fire("ajax:success",D)},onFailure:function(D){H.fire("ajax:failure",D)}});H.fire("ajax:after")}function j(H,M,da){H.insert(new Element("input",
{type:"hidden",name:M,value:da}))}function n(H){var M=H.readAttribute("data-method"),da=H.readAttribute("href"),ka=$$("meta[name=csrf-param]")[0],D=$$("meta[name=csrf-token]")[0];da=new Element("form",{method:"POST",action:da,style:"display: none;"});$(H.parentNode).insert(da);M!=="post"&&j(da,"_method",M);ka&&j(da,ka.readAttribute("content"),D.readAttribute("content"));da.submit()}function r(H){H.select("input[type=submit][data-disable-with]").each(function(M){M.store("rails:original-value",M.getValue());
M.setValue(M.readAttribute("data-disable-with")).disable()})}function x(H){H.select("input[type=submit][data-disable-with]").each(function(M){M.setValue(M.retrieve("rails:original-value")).enable()})}function y(H){H=H.readAttribute("data-confirm");return!H||confirm(H)}Ajax.Responders.register({onCreate:function(H){var M=$$("meta[name=csrf-token]")[0];if(M){if(!H.options.requestHeaders)H.options.requestHeaders={};H.options.requestHeaders["X-CSRF-Token"]=M.readAttribute("content")}}});var O=a("submit"),
Y=a("change");if(!O||!Y)Event.Handler.prototype.initialize=Event.Handler.prototype.initialize.wrap(function(H,M,da,ka,D){H(M,da,ka,D);if(!O&&this.eventName=="submit"&&!b(this.element)||!Y&&this.eventName=="change"&&!d(this.element))this.eventName="emulated:"+this.eventName});O||document.on("focusin","form",function(H,M){if(!M.retrieve("emulated:submit")){M.on("submit",function(da){M.fire("emulated:submit",da,true).returnValue===false&&da.preventDefault()});M.store("emulated:submit",true)}});Y||document.on("focusin",
"input, select, textarea",function(H,M){if(!M.retrieve("emulated:change")){M.on("change",function(da){M.fire("emulated:change",da,true)});M.store("emulated:change",true)}});document.on("click","a[data-confirm], a[data-remote], a[data-method], input[data-confirm], button[data-confirm]",function(H,M){if(!y(M)){H.stop();return false}if(M.readAttribute("data-remote")){f(M);H.stop()}else if(M.readAttribute("data-method")){n(M);H.stop()}});document.on("click","form input[type=submit], form button[type=submit], form button:not([type])",
function(H,M){H.findElement("form").store("rails:submit-button",M.name||false)});document.on("submit",function(H){var M=H.findElement();if(!y(M)){H.stop();return false}if(M.readAttribute("data-remote")){f(M);H.stop()}else r(M)});document.on("ajax:create","form",function(H,M){M==H.findElement()&&r(M)});document.on("ajax:complete","form",function(H,M){M==H.findElement()&&x(M)})})();if(typeof Control=="undefined")Control={};var $proc=function(a){return typeof a=="function"?a:function(){return a}},$value=function(a){return typeof a=="function"?a():a};
Object.Event={extend:function(a){a._objectEventSetup=function(b){this._observers=this._observers||{};this._observers[b]=this._observers[b]||[]};a.observe=function(b,d){if(typeof b=="string"&&typeof d!="undefined"){this._objectEventSetup(b);this._observers[b].include(d)||this._observers[b].push(d)}else for(var f in b)this.observe(f,b[f])};a.stopObserving=function(b,d){this._objectEventSetup(b);if(b&&d)this._observers[b]=this._observers[b].without(d);else if(b)this._observers[b]=[];else this._observers=
{}};a.observeOnce=function(b,d){var f=function(){d.apply(this,arguments);this.stopObserving(b,f)}.bind(this);this._objectEventSetup(b);this._observers[b].push(f)};a.notify=function(b){this._objectEventSetup(b);var d=[],f=$A(arguments).slice(1);try{for(var j=0;j<this._observers[b].length;++j)d.push(this._observers[b][j].apply(this._observers[b][j],f)||null)}catch(n){if(n==$break)return false;else throw n;}return d};if(a.prototype){a.prototype._objectEventSetup=a._objectEventSetup;a.prototype.observe=
a.observe;a.prototype.stopObserving=a.stopObserving;a.prototype.observeOnce=a.observeOnce;a.prototype.notify=function(b){if(a.notify){var d=$A(arguments).slice(1);d.unshift(this);d.unshift(b);a.notify.apply(a,d)}this._objectEventSetup(b);d=$A(arguments).slice(1);var f=[];try{if(this.options&&this.options[b]&&typeof this.options[b]=="function")f.push(this.options[b].apply(this,d)||null);for(var j=0;j<this._observers[b].length;++j)f.push(this._observers[b][j].apply(this._observers[b][j],d)||null)}catch(n){if(n==
$break)return false;else throw n;}return f}}}};Element.addMethods({observeOnce:function(a,b,d){var f=function(){d.apply(this,arguments);Element.stopObserving(a,b,f)};Element.observe(a,b,f)}});(function(){function a(b){var d;if(b.wheelDelta)d=b.wheelDelta/120;else if(b.detail)d=-b.detail/3;if(d)if(b.element().fire("mouse:wheel",{delta:d}).stopped){b.stop();return false}}document.observe("mousewheel",a)})();
var IframeShim=Class.create({initialize:function(){this.element=new Element("iframe",{style:"position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);display:none",src:"javascript:void(0);",frameborder:0});$(document.body).insert(this.element)},hide:function(){this.element.hide();return this},show:function(){this.element.show();return this},positionUnder:function(a){a=$(a);var b=a.cumulativeOffset(),d=a.getDimensions();this.element.setStyle({left:b[0]+"px",top:b[1]+"px",width:d.width+
"px",height:d.height+"px",zIndex:a.getStyle("zIndex")-1}).show();return this},setBounds:function(a){for(prop in a)a[prop]+="px";this.element.setStyle(a);return this},destroy:function(){this.element&&this.element.remove();return this}});if(typeof Draggable!="undefined")Draggable.prototype.draw=function(a){var b=Position.cumulativeOffset(this.element);if(this.options.ghosting){var d=Position.realOffset(this.element);b[0]+=d[0]-Position.deltaX;b[1]+=d[1]-Position.deltaY}d=this.currentDelta();b[0]-=d[0];b[1]-=d[1];if(this.options.scroll&&this.options.scroll!=window&&this._isScrollChild){b[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft;b[1]-=this.options.scroll.scrollTop-this.originalScrollTop}d=[0,1].map(function(y){return a[y]-
b[y]-this.offset[y]}.bind(this));if(this.options.snap)d=typeof this.options.snap=="function"?this.options.snap(d[0],d[1],this):this.options.snap instanceof Array?d.map(function(y,O){return Math.round(y/this.options.snap[O])*this.options.snap[O]}.bind(this)):d.map(function(y){return Math.round(y/this.options.snap)*this.options.snap}.bind(this));if(this.options.onDraw)this.options.onDraw.bind(this)(d);else{var f=this.element.style;if(this.options.constrainToViewport){var j=document.viewport.getDimensions(),
n=this.element.getDimensions(),r=parseInt(this.element.getStyle("margin-top")),x=parseInt(this.element.getStyle("margin-left"));j=[[0-x,0-r],[j.width-n.width-x,j.height-n.height-r]];if(!this.options.constraint||this.options.constraint=="horizontal")this.element.style.left=d[0]>=j[0][0]&&d[0]<=j[1][0]?d[0]+"px":(d[0]<j[0][0]?j[0][0]:j[1][0])+"px";if(!this.options.constraint||this.options.constraint=="vertical")this.element.style.top=d[1]>=j[0][1]&&d[1]<=j[1][1]?d[1]+"px":(d[1]<=j[0][1]?j[0][1]:j[1][1])+
"px"}else{if(!this.options.constraint||this.options.constraint=="horizontal")f.left=d[0]+"px";if(!this.options.constraint||this.options.constraint=="vertical")f.top=d[1]+"px"}if(f.visibility=="hidden")f.visibility=""}};if(typeof Prototype=="undefined")throw"Control.Window requires Prototype to be loaded.";if(typeof IframeShim=="undefined")throw"Control.Window requires IframeShim to be loaded.";if(typeof Object.Event=="undefined")throw"Control.Window requires Object.Event to be loaded.";
Control.Window=Class.create({initialize:function(a,b){Control.Window.windows.push(this);this.remoteContentLoaded=this.ajaxRequest=this.sourceContainer=this.href=this.isOpen=this.container=false;this.numberInSequence=Control.Window.windows.length+1;this.indicator=false;this.effects={fade:false,appear:false};this.indicatorEffects={fade:false,appear:false};this.options=Object.extend({beforeOpen:Prototype.emptyFunction,afterOpen:Prototype.emptyFunction,beforeClose:Prototype.emptyFunction,afterClose:Prototype.emptyFunction,
height:null,width:null,className:false,position:"center",offsetLeft:0,offsetTop:0,iframe:false,hover:false,indicator:false,closeOnClick:false,iframeshim:true,fade:false,fadeDuration:0.75,draggable:false,onDrag:Prototype.emptyFunction,resizable:false,minHeight:false,minWidth:false,maxHeight:false,maxWidth:false,onResize:Prototype.emptyFunction,constrainToViewport:false,method:"post",parameters:{},onComplete:Prototype.emptyFunction,onSuccess:Prototype.emptyFunction,onFailure:Prototype.emptyFunction,
onException:Prototype.emptyFunction,onRemoteContentLoaded:Prototype.emptyFunction,insertRemoteContentAt:false},b||{});this.indicator=this.options.indicator?$(this.options.indicator):false;if(a)if(typeof a=="string"&&a.match(Control.Window.uriRegex))this.href=a;else{this.container=$(a);this.createDefaultContainer(a);if(this.container&&(this.container.readAttribute("href")&&this.container.readAttribute("href")!=""||this.options.hover&&this.options.hover!==true)){if(this.options.hover&&this.options.hover!==
true)this.sourceContainer=$(this.options.hover);else{this.sourceContainer=this.container;this.href=this.container.readAttribute("href");if((b=this.href.match(/^#(.+)$/))&&b[1]){this.container=$(b[1]);this.href=false}else this.container=false}this.sourceContainerOpenHandler=function(d){this.open(d);d.stop();return false}.bindAsEventListener(this);this.sourceContainerCloseHandler=function(d){this.close(d)}.bindAsEventListener(this);this.sourceContainerMouseMoveHandler=function(d){this.position(d)}.bindAsEventListener(this);
if(this.options.hover){this.sourceContainer.observe("mouseenter",this.sourceContainerOpenHandler);this.sourceContainer.observe("mouseleave",this.sourceContainerCloseHandler);this.options.position=="mouse"&&this.sourceContainer.observe("mousemove",this.sourceContainerMouseMoveHandler)}else this.sourceContainer.observe("click",this.sourceContainerOpenHandler)}}this.createDefaultContainer(a);if(this.options.insertRemoteContentAt===false)this.options.insertRemoteContentAt=this.container;a={margin:0,position:"absolute",
zIndex:Control.Window.initialZIndexForWindow()};if(this.options.width)a.width=$value(this.options.width)+"px";if(this.options.height)a.height=$value(this.options.height)+"px";this.container.setStyle(a);this.options.className&&this.container.addClassName(this.options.className);this.positionHandler=this.position.bindAsEventListener(this);this.outOfBoundsPositionHandler=this.ensureInBounds.bindAsEventListener(this);this.bringToFrontHandler=this.bringToFront.bindAsEventListener(this);this.container.observe("mousedown",
this.bringToFrontHandler);this.container.hide();this.closeHandler=this.close.bindAsEventListener(this);if(this.options.iframeshim){this.iFrameShim=new IframeShim;this.iFrameShim.hide()}this.applyResizable();this.applyDraggable();Event.observe(window,"resize",this.outOfBoundsPositionHandler);this.notify("afterInitialize")},open:function(a){if(this.isOpen){this.bringToFront();return false}if(this.notify("beforeOpen")===false)return false;if(this.options.closeOnClick){if(this.options.closeOnClick===
true)this.closeOnClickContainer=$(document.body);else if(this.options.closeOnClick=="container")this.closeOnClickContainer=this.container;else if(this.options.closeOnClick=="overlay"){Control.Overlay.load();this.closeOnClickContainer=Control.Overlay.container}else this.closeOnClickContainer=$(this.options.closeOnClick);this.closeOnClickContainer.observe("click",this.closeHandler)}if(this.href&&!this.options.iframe&&!this.remoteContentLoaded){this.remoteContentLoaded=true;if(this.href.match(/\.(jpe?g|gif|png|tiff?)$/i)){a=
new Element("img");a.observe("load",function(d){this.getRemoteContentInsertionTarget().insert(d);this.position();if(this.notify("onRemoteContentLoaded")!==false){this.options.indicator&&this.hideIndicator();this.finishOpen()}}.bind(this,a));a.writeAttribute("src",this.href)}else if(!this.ajaxRequest){this.options.indicator&&this.showIndicator();this.ajaxRequest=new Ajax.Request(this.href,{method:this.options.method,parameters:this.options.parameters,onComplete:function(d){this.notify("onComplete",
d);this.ajaxRequest=false}.bind(this),onSuccess:function(d){this.getRemoteContentInsertionTarget().insert(d.responseText);this.notify("onSuccess",d);if(this.notify("onRemoteContentLoaded")!==false){this.options.indicator&&this.hideIndicator();this.finishOpen()}}.bind(this),onFailure:function(d){this.notify("onFailure",d);this.options.indicator&&this.hideIndicator()}.bind(this),onException:function(d,f){this.notify("onException",d,f);this.options.indicator&&this.hideIndicator()}.bind(this)})}return true}else if(this.options.iframe&&
!this.remoteContentLoaded){this.remoteContentLoaded=true;this.options.indicator&&this.showIndicator();this.getRemoteContentInsertionTarget().insert(Control.Window.iframeTemplate.evaluate({href:this.href}));var b=this.container.down("iframe");b.onload=function(){this.notify("onRemoteContentLoaded");this.options.indicator&&this.hideIndicator();b.onload=null}.bind(this)}this.finishOpen(a);return true},close:function(a){if(!this.isOpen||this.notify("beforeClose",a)===false)return false;this.options.closeOnClick&&
this.closeOnClickContainer.stopObserving("click",this.closeHandler);if(this.options.fade)this.effects.fade=new Effect.Fade(this.container,{queue:{position:"front",scope:"Control.Window"+this.numberInSequence},from:1,to:0,duration:this.options.fadeDuration/2,afterFinish:function(){this.iFrameShim&&this.iFrameShim.hide();this.isOpen=false;this.notify("afterClose")}.bind(this)});else{this.container.hide();this.iFrameShim&&this.iFrameShim.hide()}this.ajaxRequest&&this.ajaxRequest.transport.abort();if(!(this.options.draggable||
this.options.resizable)&&this.options.position=="center")Event.stopObserving(window,"resize",this.positionHandler);!this.options.draggable&&this.options.position=="center"&&Event.stopObserving(window,"scroll",this.positionHandler);this.options.indicator&&this.hideIndicator();if(!this.options.fade){this.isOpen=false;this.notify("afterClose")}return true},position:function(a){if(this.options.position=="mouse"){var b=[Event.pointerX(a),Event.pointerY(a)];this.container.setStyle({top:b[1]+$value(this.options.offsetTop)+
"px",left:b[0]+$value(this.options.offsetLeft)+"px"})}else{a=this.container.getDimensions();var d=document.viewport.getDimensions();Position.prepare();var f=Position.deltaX+Math.floor((d.width-a.width)/2);b=Position.deltaY+(d.height>a.height?Math.floor((d.height-a.height)/2):0);if(this.options.position=="center")this.container.setStyle({top:a.height<=d.height?(b!=null&&b>0?b:0)+"px":0,left:a.width<=d.width?(f!=null&&f>0?f:0)+"px":0});else if(this.options.position=="relative"){b=this.sourceContainer.cumulativeOffset();
f=b[1]+$value(this.options.offsetTop);b=b[0]+$value(this.options.offsetLeft);this.container.setStyle({top:a.height<=d.height?(this.options.constrainToViewport?Math.max(0,Math.min(d.height-a.height,f)):f)+"px":0,left:a.width<=d.width?(this.options.constrainToViewport?Math.max(0,Math.min(d.width-a.width,b)):b)+"px":0})}else if(this.options.position.length){f=$value(this.options.position[1])+$value(this.options.offsetTop);b=$value(this.options.position[0])+$value(this.options.offsetLeft);this.container.setStyle({top:a.height<=
d.height?(this.options.constrainToViewport?Math.max(0,Math.min(d.height-a.height,f)):f)+"px":0,left:a.width<=d.width?(this.options.constrainToViewport?Math.max(0,Math.min(d.width-a.width,b)):b)+"px":0})}this.iFrameShim&&this.updateIFrameShimZIndex()}},ensureInBounds:function(){if(this.isOpen){var a=document.viewport.getDimensions(),b=this.container.cumulativeOffset(),d=this.container.getDimensions();b.left+d.width>a.width&&this.container.setStyle({left:Math.max(0,a.width-d.width)+"px"});b.top+d.height>
a.height&&this.container.setStyle({top:Math.max(0,a.height-d.height)+"px"})}},bringToFront:function(){Control.Window.bringToFront(this);this.notify("bringToFront")},destroy:function(){this.container.stopObserving("mousedown",this.bringToFrontHandler);if(this.draggable){Resizables.removeObserver(this.container);this.draggable.handle.stopObserving("mousedown",this.bringToFrontHandler);this.draggable.destroy()}if(this.resizable){Resizables.removeObserver(this.container);this.resizable.handle.stopObserving("mousedown",
this.bringToFrontHandler);this.resizable.destroy()}this.container&&!this.sourceContainer&&this.container.remove();if(this.sourceContainer)if(this.options.hover){this.sourceContainer.stopObserving("mouseenter",this.sourceContainerOpenHandler);this.sourceContainer.stopObserving("mouseleave",this.sourceContainerCloseHandler);this.options.position=="mouse"&&this.sourceContainer.stopObserving("mousemove",this.sourceContainerMouseMoveHandler)}else this.sourceContainer.stopObserving("click",this.sourceContainerOpenHandler);
this.iFrameShim&&this.iFrameShim.destroy();Event.stopObserving(window,"resize",this.outOfBoundsPositionHandler);Control.Window.windows=Control.Window.windows.without(this);this.notify("afterDestroy")},applyResizable:function(){if(this.options.resizable){if(typeof Resizable=="undefined")throw"Control.Window requires resizable.js to be loaded.";var a=null;if(this.options.resizable===true){a=new Element("div",{className:"resizable_handle"});this.container.insert(a)}else a=$(this.options.resziable);this.resizable=
new Resizable(this.container,{handle:a,minHeight:this.options.minHeight,minWidth:this.options.minWidth,maxHeight:this.options.constrainToViewport?function(b){return document.viewport.getDimensions().height-parseInt(b.style.top||0)-(b.getHeight()-parseInt(b.style.height||0))}:this.options.maxHeight,maxWidth:this.options.constrainToViewport?function(b){return document.viewport.getDimensions().width-parseInt(b.style.left||0)-(b.getWidth()-parseInt(b.style.width||0))}:this.options.maxWidth});this.resizable.handle.observe("mousedown",
this.bringToFrontHandler);Resizables.addObserver(new Control.Window.LayoutUpdateObserver(this,function(){this.iFrameShim&&this.updateIFrameShimZIndex();this.notify("onResize")}.bind(this)))}},applyDraggable:function(){if(this.options.draggable){if(typeof Draggables=="undefined")throw"Control.Window requires dragdrop.js to be loaded.";var a=null;if(this.options.draggable===true){a=new Element("div",{className:"draggable_handle"});this.container.insert(a)}else a=$(this.options.draggable);this.draggable=
new Draggable(this.container,{handle:a,constrainToViewport:this.options.constrainToViewport,zindex:this.container.getStyle("z-index"),starteffect:function(){if(Prototype.Browser.IE){this.old_onselectstart=document.onselectstart;document.onselectstart=function(){return false}}}.bind(this),endeffect:function(){document.onselectstart=this.old_onselectstart}.bind(this)});this.draggable.handle.observe("mousedown",this.bringToFrontHandler);Draggables.addObserver(new Control.Window.LayoutUpdateObserver(this,
function(){this.iFrameShim&&this.updateIFrameShimZIndex();this.notify("onDrag")}.bind(this)))}},createDefaultContainer:function(a){if(!this.container){this.container=new Element("div",{id:"control_window_"+this.numberInSequence});$(document.body).insert(this.container);typeof a=="string"&&$(a)==null&&!a.match(/^#(.+)$/)&&!a.match(Control.Window.uriRegex)&&this.container.update(a)}},finishOpen:function(a){this.bringToFront();if(this.options.fade){if(typeof Effect=="undefined")throw"Control.Window requires effects.js to be loaded.";
this.effects.fade&&this.effects.fade.cancel();this.effects.appear=new Effect.Appear(this.container,{queue:{position:"end",scope:"Control.Window."+this.numberInSequence},from:0,to:1,duration:this.options.fadeDuration/2,afterFinish:function(){this.iFrameShim&&this.updateIFrameShimZIndex();this.isOpen=true;this.notify("afterOpen")}.bind(this)})}else this.container.show();this.position(a);if(!(this.options.draggable||this.options.resizable)&&this.options.position=="center")Event.observe(window,"resize",
this.positionHandler,false);!this.options.draggable&&this.options.position=="center"&&Event.observe(window,"scroll",this.positionHandler,false);if(!this.options.fade){this.isOpen=true;this.notify("afterOpen")}return true},showIndicator:function(){this.showIndicatorTimeout=window.setTimeout(function(){if(this.options.fade)this.indicatorEffects.appear=new Effect.Appear(this.indicator,{queue:{position:"front",scope:"Control.Window.indicator."+this.numberInSequence},from:0,to:1,duration:this.options.fadeDuration/
2});else this.indicator.show()}.bind(this),Control.Window.indicatorTimeout)},hideIndicator:function(){this.showIndicatorTimeout&&window.clearTimeout(this.showIndicatorTimeout);this.indicator.hide()},getRemoteContentInsertionTarget:function(){return typeof this.options.insertRemoteContentAt=="string"?this.container.down(this.options.insertRemoteContentAt):$(this.options.insertRemoteContentAt)},updateIFrameShimZIndex:function(){this.iFrameShim&&this.iFrameShim.positionUnder(this.container)}});
Object.extend(Control.Window,{windows:[],baseZIndex:9999,indicatorTimeout:250,iframeTemplate:new Template('<iframe src="#{href}" width="100%" height="100%" frameborder="0"></iframe>'),uriRegex:/^(\/|\#|https?\:\/\/|[\w]+\/)/,bringToFront:function(a){Control.Window.windows=Control.Window.windows.without(a);Control.Window.windows.push(a);Control.Window.windows.each(function(b,d){d=Control.Window.baseZIndex+d;b.container.setStyle({zIndex:d});b.isOpen&&b.iFrameShim&&b.updateIFrameShimZIndex();if(b.options.draggable)b.draggable.options.zindex=
d})},open:function(a,b){a=new Control.Window(a,b);a.open();return a},initialZIndexForWindow:function(){return Control.Window.baseZIndex+(Control.Window.windows.length-1)}});Object.Event.extend(Control.Window);
Control.Window.LayoutUpdateObserver=Class.create({initialize:function(a,b){this.w=a;this.element=$(a.container);this.observer=b},onStart:Prototype.emptyFunction,onEnd:function(a,b){b.element==this.element&&this.iFrameShim&&this.w.updateIFrameShimZIndex()},onResize:function(a,b){b.element==this.element&&this.observer(this.element)},onDrag:function(a,b){b.element==this.element&&this.observer(this.element)}});
Control.Overlay={id:"control_overlay",loaded:false,container:false,lastOpacity:0,styles:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9998},ieStyles:{position:"absolute",top:0,left:0,zIndex:9998},effects:{fade:false,appear:false},load:function(){if(Control.Overlay.loaded)return false;Control.Overlay.loaded=true;Control.Overlay.container=new Element("div",{id:Control.Overlay.id});$(document.body).insert(Control.Overlay.container);if(Prototype.Browser.IE){Control.Overlay.container.setStyle(Control.Overlay.ieStyles);
Event.observe(window,"scroll",Control.Overlay.positionOverlay);Event.observe(window,"resize",Control.Overlay.positionOverlay);Control.Overlay.observe("beforeShow",Control.Overlay.positionOverlay)}else Control.Overlay.container.setStyle(Control.Overlay.styles);Control.Overlay.iFrameShim=new IframeShim;Control.Overlay.iFrameShim.hide();Event.observe(window,"resize",Control.Overlay.positionIFrameShim);Control.Overlay.container.hide();return true},unload:function(){if(!Control.Overlay.loaded)return false;
Event.stopObserving(window,"resize",Control.Overlay.positionOverlay);Control.Overlay.stopObserving("beforeShow",Control.Overlay.positionOverlay);Event.stopObserving(window,"resize",Control.Overlay.positionIFrameShim);Control.Overlay.iFrameShim.destroy();Control.Overlay.container.remove();Control.Overlay.loaded=false;return true},show:function(a,b){if(Control.Overlay.notify("beforeShow")===false)return false;Control.Overlay.lastOpacity=a;Control.Overlay.positionIFrameShim();Control.Overlay.iFrameShim.show();
if(b){if(typeof Effect=="undefined")throw"Control.Window requires effects.js to be loaded.";Control.Overlay.effects.fade&&Control.Overlay.effects.fade.cancel();Control.Overlay.effects.appear=new Effect.Appear(Control.Overlay.container,{queue:{position:"end",scope:"Control.Overlay"},afterFinish:function(){Control.Overlay.notify("afterShow")},from:0,to:Control.Overlay.lastOpacity,duration:(b===true?0.75:b)/2})}else{Control.Overlay.container.setStyle({opacity:a||1});Control.Overlay.container.show();
Control.Overlay.notify("afterShow")}return true},hide:function(a){if(Control.Overlay.notify("beforeHide")===false)return false;Control.Overlay.effects.appear&&Control.Overlay.effects.appear.cancel();Control.Overlay.iFrameShim.hide();if(a)Control.Overlay.effects.fade=new Effect.Fade(Control.Overlay.container,{queue:{position:"front",scope:"Control.Overlay"},afterFinish:function(){Control.Overlay.notify("afterHide")},from:Control.Overlay.lastOpacity,to:0,duration:(a===true?0.75:a)/2});else{Control.Overlay.container.hide();
Control.Overlay.notify("afterHide")}return true},positionIFrameShim:function(){Control.Overlay.container.visible()&&Control.Overlay.iFrameShim.positionUnder(Control.Overlay.container)},positionOverlay:function(){Control.Overlay.container.setStyle({width:document.body.clientWidth+"px",height:document.body.clientHeight+"px"})}};Object.Event.extend(Control.Overlay);
Control.ToolTip=Class.create(Control.Window,{initialize:function($super,b,d,f){$super(d,Object.extend(Object.extend(Object.clone(Control.ToolTip.defaultOptions),f||{}),{position:"mouse",hover:b}))}});Object.extend(Control.ToolTip,{defaultOptions:{offsetLeft:10}});Control.Modal=Class.create(Control.Window,{initialize:function($super,b,d){Control.Modal.InstanceMethods.beforeInitialize.bind(this)();$super(b,Object.extend(Object.clone(Control.Modal.defaultOptions),d||{}))}});
Object.extend(Control.Modal,{defaultOptions:{overlayOpacity:0.5,closeOnClick:"overlay"},current:false,open:function(a,b){a=new Control.Modal(a,b);a.open();return a},close:function(){Control.Modal.current&&Control.Modal.current.close()},InstanceMethods:{beforeInitialize:function(){Control.Overlay.load();this.overlayFinishedOpening=false;this.observe("beforeOpen",Control.Modal.Observers.beforeOpen.bind(this));this.observe("afterOpen",Control.Modal.Observers.afterOpen.bind(this));this.observe("afterClose",
Control.Modal.Observers.afterClose.bind(this))}},Observers:{beforeOpen:function(){if(this.overlayFinishedOpening)Control.Window.windows.without(this).invoke("close");else{Control.Overlay.observeOnce("afterShow",function(){this.overlayFinishedOpening=true;this.open()}.bind(this));Control.Overlay.show(this.options.overlayOpacity,this.options.fade?this.options.fadeDuration:false);throw $break;}},afterOpen:function(){Control.Modal.current=this},afterClose:function(){Control.Overlay.hide(this.options.fade?
this.options.fadeDuration:false);this.overlayFinishedOpening=Control.Modal.current=false}}});
Control.LightBox=Class.create(Control.Window,{initialize:function($super,b,d){this.allImagesLoaded=false;if(d.modal){d=Object.extend(Object.clone(Control.LightBox.defaultOptions),d||{});d=Object.extend(Object.clone(Control.Modal.defaultOptions),d);d=Control.Modal.InstanceMethods.beforeInitialize.bind(this)(d);$super(b,d)}else $super(b,Object.extend(Object.clone(Control.LightBox.defaultOptions),d||{}));(this.hasRemoteContent=this.href&&!this.options.iframe)?this.observe("onRemoteContentLoaded",Control.LightBox.Observers.onRemoteContentLoaded.bind(this)):
this.applyImageObservers();this.observe("beforeOpen",Control.LightBox.Observers.beforeOpen.bind(this))},applyImageObservers:function(){var a=this.getImages();this.numberImagesToLoad=a.length;this.numberofImagesLoaded=0;a.each(function(b){b.observe("load",function(){++this.numberofImagesLoaded;if(this.numberImagesToLoad==this.numberofImagesLoaded){this.allImagesLoaded=true;this.onAllImagesLoaded()}}.bind(this,b));b.hide()}.bind(this))},onAllImagesLoaded:function(){this.getImages().each(function(a){this.showImage(a)}.bind(this));
if(this.hasRemoteContent){this.options.indicator&&this.hideIndicator();this.finishOpen()}else this.open()},getImages:function(){return this.container.select(Control.LightBox.imageSelector)},showImage:function(a){a.show()}});Object.extend(Control.LightBox,{imageSelector:"img",defaultOptions:{},Observers:{beforeOpen:function(){if(!this.hasRemoteContent&&!this.allImagesLoaded)throw $break;},onRemoteContentLoaded:function(){this.applyImageObservers();if(!this.allImagesLoaded)throw $break;}}});var COMPILED=true,goog=goog||{};goog.global=this;goog.DEBUG=true;goog.LOCALE="en";goog.TRUSTED_SITE=true;goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;b=b.substring(0,b.lastIndexOf("."));){if(goog.getObjectByName(b))break;goog.implicitNamespaces_[b]=true}}goog.exportPath_(a)};
goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG){a=a||"";throw Error("Importing test-only code into non-debug environment"+a?": "+a:".");}};if(!COMPILED){goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)};goog.implicitNamespaces_={}}goog.exportPath_=function(a,b,d){a=a.split(".");d=d||goog.global;!(a[0]in d)&&d.execScript&&d.execScript("var "+a[0]);for(var f;a.length&&(f=a.shift());)if(!a.length&&goog.isDef(b))d[f]=b;else d=d[f]?d[f]:(d[f]={})};
goog.getObjectByName=function(a,b){a=a.split(".");b=b||goog.global;for(var d;d=a.shift();)if(goog.isDefAndNotNull(b[d]))b=b[d];else return null;return b};goog.globalize=function(a,b){b=b||goog.global;for(var d in a)b[d]=a[d]};
goog.addDependency=function(a,b,d){if(!COMPILED){var f;a=a.replace(/\\/g,"/");for(var j=goog.dependencies_,n=0;f=b[n];n++){j.nameToPath[f]=a;a in j.pathToNames||(j.pathToNames[a]={});j.pathToNames[a][f]=true}for(f=0;b=d[f];f++){a in j.requires||(j.requires[a]={});j.requires[a][b]=true}}};goog.ENABLE_DEBUG_LOADER=true;
goog.require=function(a){if(!COMPILED)if(!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=true;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.global.CLOSURE_NO_DEPS=true;goog.nullFunction=function(){};goog.identityFunction=function(a){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;if(goog.DEBUG)goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a;return a.instance_=new a}};goog.instantiatedSingletons_=[];
if(!COMPILED&&goog.ENABLE_DEBUG_LOADER){goog.included_={};goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}};goog.inHtmlDocument_=function(){var a=goog.global.document;return typeof a!="undefined"&&"write"in a};goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;b>=0;--b){var d=a[b].src,f=d.lastIndexOf("?");
f=f==-1?d.length:f;if(d.substr(f-7,7)=="base.js"){goog.basePath=d.substr(0,f-7);return}}};goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(!goog.dependencies_.written[a]&&b(a))goog.dependencies_.written[a]=true};goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if(b.readyState=="complete")if(/\bdeps.js$/.test(a))return false;else throw Error('Cannot write "'+a+'" after document load');b.write('<script type="text/javascript" src="'+
a+'"><\/script>');return true}else return false};goog.writeScripts_=function(){function a(n){if(!(n in f.written)){if(!(n in f.visited)){f.visited[n]=true;if(n in f.requires)for(var r in f.requires[n])if(!goog.isProvided_(r))if(r in f.nameToPath)a(f.nameToPath[r]);else throw Error("Undefined nameToPath for "+r);}if(!(n in d)){d[n]=true;b.push(n)}}}var b=[],d={},f=goog.dependencies_;for(var j in goog.included_)f.written[j]||a(j);for(j=0;j<b.length;j++)if(b[j])goog.importScript_(goog.basePath+b[j]);
else throw Error("Undefined script input");};goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null};goog.findBasePath_();goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")}
goog.typeOf=function(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var d=Object.prototype.toString.call(a);if(d=="[object Window]")return"object";if(d=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(d=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b};goog.isDef=function(a){return a!==undefined};goog.isNull=function(a){return a===null};goog.isDefAndNotNull=function(a){return a!=null};goog.isArray=function(a){return goog.typeOf(a)=="array"};goog.isArrayLike=function(a){var b=goog.typeOf(a);return b=="array"||b=="object"&&typeof a.length=="number"};goog.isDateLike=function(a){return goog.isObject(a)&&typeof a.getFullYear=="function"};
goog.isString=function(a){return typeof a=="string"};goog.isBoolean=function(a){return typeof a=="boolean"};goog.isNumber=function(a){return typeof a=="number"};goog.isFunction=function(a){return goog.typeOf(a)=="function"};goog.isObject=function(a){var b=typeof a;return b=="object"&&a!=null||b=="function"};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(Math.random()*1E9>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if(b=="object"||b=="array"){if(a.clone)return a.clone();b=b=="array"?[]:{};for(var d in a)b[d]=goog.cloneObject(a[d]);return b}return a};goog.bindNative_=function(a){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b){if(!a)throw new Error;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var f=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(f,d);return a.apply(b,f)}}else return function(){return a.apply(b,arguments)}};goog.bind=function(){goog.bind=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){var d=Array.prototype.slice.call(arguments);d.unshift.apply(d,b);return a.apply(this,d)}};goog.mixin=function(a,b){for(var d in b)a[d]=b[d]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _et_ = 1;");if(typeof goog.global._et_!="undefined"){delete goog.global._et_;goog.evalWorksForGlobals_=true}else goog.evalWorksForGlobals_=false}if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,d=b.createElement("script");d.type="text/javascript";d.defer=false;d.appendChild(b.createTextNode(a));
b.body.appendChild(d);b.body.removeChild(d)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var d=function(j){return goog.cssNameMapping_[j]||j},f=function(j){j=j.split("-");for(var n=[],r=0;r<j.length;r++)n.push(d(j[r]));return n.join("-")};f=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?d:f:function(j){return j};return b?a+"-"+f(b):f(a)};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING)goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING;goog.getMsg=function(a,b){b=b||{};for(var d in b){var f=(""+b[d]).replace(/\$/g,"$$$$");a=a.replace(new RegExp("\\{\\$"+d+"\\}","gi"),f)}return a};goog.getMsgWithFallback=function(a){return a};goog.exportSymbol=function(a,b,d){goog.exportPath_(a,b,d)};goog.exportProperty=function(a,b,d){a[b]=d};
goog.inherits=function(a,b){function d(){}d.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new d;a.prototype.constructor=a};
goog.base=function(a,b){var d=arguments.callee.caller;if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var f=Array.prototype.slice.call(arguments,2),j=false,n=a.constructor;n;n=n.superClass_&&n.superClass_.constructor)if(n.prototype[b]===d)j=true;else if(j)return n.prototype[b].apply(a,f);if(a[b]===d)return a.constructor.prototype[b].apply(a,f);else throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(a){a.call(goog.global)};var webfont={};webfont.DomHelper=function(a,b){this.mainWindow_=a;this.loadWindow_=b||a;this.document_=this.loadWindow_.document;this.supportForStyle_=undefined};
goog.scope(function(){var a=webfont.DomHelper;a.prototype.createElement=function(b,d,f){b=this.document_.createElement(b);if(d)for(var j in d)if(d.hasOwnProperty(j))j=="style"?this.setStyle(b,d[j]):b.setAttribute(j,d[j]);f&&b.appendChild(this.document_.createTextNode(f));return b};a.prototype.insertInto=function(b,d){b=this.document_.getElementsByTagName(b)[0];if(!b)b=document.documentElement;if(b&&b.lastChild){b.insertBefore(d,b.lastChild);return true}return false};a.prototype.whenBodyExists=function(b){var d=
function(){document.body?b():setTimeout(d,0)};d()};a.prototype.removeElement=function(b){if(b.parentNode){b.parentNode.removeChild(b);return true}return false};a.prototype.createCssLink=function(b){return this.createElement("link",{rel:"stylesheet",href:b})};a.prototype.createScriptSrc=function(b){return this.createElement("script",{src:b})};a.prototype.appendClassName=function(b,d){for(var f=b.className.split(/\s+/),j=0,n=f.length;j<n;j++)if(f[j]==d)return;f.push(d);b.className=f.join(" ").replace(/\s+/g,
" ").replace(/^\s+|\s+$/,"")};a.prototype.removeClassName=function(b,d){for(var f=b.className.split(/\s+/),j=[],n=0,r=f.length;n<r;n++)f[n]!=d&&j.push(f[n]);b.className=j.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")};a.prototype.hasClassName=function(b,d){b=b.className.split(/\s+/);for(var f=0,j=b.length;f<j;f++)if(b[f]==d)return true;return false};a.prototype.setStyle=function(b,d){if(this.hasSupportForStyle_())b.setAttribute("style",d);else b.style.cssText=d};a.prototype.hasSupportForStyle_=
function(){if(this.supportForStyle_===undefined){var b=this.document_.createElement("p");b.innerHTML='<a style="top:1px;">w</a>';this.supportForStyle_=/top/.test(b.getElementsByTagName("a")[0].getAttribute("style"))}return this.supportForStyle_};a.prototype.getMainWindow=function(){return this.mainWindow_};a.prototype.getLoadWindow=function(){return this.loadWindow_};a.prototype.getProtocol=function(){var b=this.loadWindow_.location.protocol;if(b=="about:")b=this.mainWindow_.location.protocol;return b==
"https:"?"https:":"http:"}});webfont.BrowserInfo=function(a,b,d){this.webfontSupport_=a;this.webKitFallbackBug_=b;this.webKitMetricsBug_=d};goog.scope(function(){var a=webfont.BrowserInfo;a.prototype.hasWebFontSupport=function(){return this.webfontSupport_};a.prototype.hasWebKitFallbackBug=function(){return this.webKitFallbackBug_};a.prototype.hasWebKitMetricsBug=function(){return this.webKitMetricsBug_}});
webfont.UserAgent=function(a,b,d,f,j,n,r,x){this.name_=a;this.version_=b;this.engine_=d;this.engineVersion_=f;this.platform_=j;this.platformVersion_=n;this.documentMode_=r;this.browserInfo_=x};
goog.scope(function(){var a=webfont.UserAgent;a.prototype.getName=function(){return this.name_};a.prototype.getVersion=function(){return this.version_};a.prototype.getEngine=function(){return this.engine_};a.prototype.getEngineVersion=function(){return this.engineVersion_};a.prototype.getPlatform=function(){return this.platform_};a.prototype.getPlatformVersion=function(){return this.platformVersion_};a.prototype.getDocumentMode=function(){return this.documentMode_};a.prototype.getBrowserInfo=function(){return this.browserInfo_}});
webfont.UserAgentParser=function(a,b){this.userAgent_=a;this.doc_=b};webfont.UserAgentParser.UNKNOWN="Unknown";webfont.UserAgentParser.BUILTIN_BROWSER="BuiltinBrowser";webfont.UserAgentParser.UNKNOWN_USER_AGENT=new webfont.UserAgent(webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,undefined,new webfont.BrowserInfo(false,false,false));
goog.scope(function(){var a=webfont.UserAgentParser,b=webfont.BrowserInfo,d=webfont.UserAgent;a.prototype.parse=function(){return this.isIe_()?this.parseIeUserAgentString_():this.isOpera_()?this.parseOperaUserAgentString_():this.isWebKit_()?this.parseWebKitUserAgentString_():this.isGecko_()?this.parseGeckoUserAgentString_():webfont.UserAgentParser.UNKNOWN_USER_AGENT};a.prototype.getPlatform_=function(){var f=this.getMatchingGroup_(this.userAgent_,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,
1);if(f!=""){if(/BB\d{2}/.test(f))f="BlackBerry";return f}f=this.getMatchingGroup_(this.userAgent_,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS)/,1);if(f!=""){if(f=="Mac_PowerPC")f="Macintosh";return f}return webfont.UserAgentParser.UNKNOWN};a.prototype.getPlatformVersion_=function(){var f=this.getMatchingGroup_(this.userAgent_,/(OS X|Windows NT|Android|CrOS) ([^;)]+)/,2);if(f)return f;if(f=this.getMatchingGroup_(this.userAgent_,/Windows Phone( OS)? ([^;)]+)/,2))return f;if(f=this.getMatchingGroup_(this.userAgent_,
/(iPhone )?OS ([\d_]+)/,2))return f;if(f=this.getMatchingGroup_(this.userAgent_,/Linux ([i\d]+)/,1))return f;if(f=this.getMatchingGroup_(this.userAgent_,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))return f;return a.UNKNOWN};a.prototype.isIe_=function(){return this.userAgent_.indexOf("MSIE")!=-1};a.prototype.parseIeUserAgentString_=function(){var f=this.getPlatform_(),j=this.getPlatformVersion_(),n=this.getMatchingGroup_(this.userAgent_,/(MSIE [\d\w\.]+)/,1);if(n!=""){var r=n.split(" ");n=r[0];r=
r[1];var x=this.parseVersion_(r),y=this.parseVersion_(j);x=f=="Windows"&&x.major>=6||f=="Windows Phone"&&y.major>=8;return new d(n,r,n,r,f,j,this.getDocumentMode_(this.doc_),new b(x,false,false))}return new d("MSIE",webfont.UserAgentParser.UNKNOWN,"MSIE",webfont.UserAgentParser.UNKNOWN,f,j,this.getDocumentMode_(this.doc_),new b(false,false,false))};a.prototype.isOpera_=function(){return this.userAgent_.indexOf("Opera")!=-1};a.prototype.parseOperaUserAgentString_=function(){var f=a.UNKNOWN,j=a.UNKNOWN,
n=this.getMatchingGroup_(this.userAgent_,/(Presto\/[\d\w\.]+)/,1);if(n!=""){j=n.split("/");f=j[0];j=j[1]}else{if(this.userAgent_.indexOf("Gecko")!=-1)f="Gecko";n=this.getMatchingGroup_(this.userAgent_,/rv:([^\)]+)/,1);if(n!="")j=n}if(this.userAgent_.indexOf("Opera Mini/")!=-1){n=this.getMatchingGroup_(this.userAgent_,/Opera Mini\/([\d\.]+)/,1);if(n=="")n=a.UNKNOWN;return new d("OperaMini",n,f,j,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new b(false,false,false))}if(this.userAgent_.indexOf("Version/")!=
-1){var r=this.getMatchingGroup_(this.userAgent_,/Version\/([\d\.]+)/,1);if(r!=""){n=this.parseVersion_(r);return new d("Opera",r,f,j,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new b(n.major>=10,false,false))}}r=this.getMatchingGroup_(this.userAgent_,/Opera[\/ ]([\d\.]+)/,1);if(r!=""){n=this.parseVersion_(r);return new d("Opera",r,f,j,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new b(n.major>=10,false,false))}return new d("Opera",
a.UNKNOWN,f,j,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new b(false,false,false))};a.prototype.isWebKit_=function(){return/AppleWeb(K|k)it/.test(this.userAgent_)};a.prototype.parseWebKitUserAgentString_=function(){var f=this.getPlatform_(),j=this.getPlatformVersion_(),n=this.getMatchingGroup_(this.userAgent_,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1),r=false;if(n=="")n=a.UNKNOWN;var x=this.parseVersion_(n);r=this.parseVersion_(j);var y=a.UNKNOWN;if(this.userAgent_.indexOf("Chrome")!=
-1||this.userAgent_.indexOf("CrMo")!=-1||this.userAgent_.indexOf("CriOS")!=-1)y="Chrome";else if(/Silk\/\d/.test(this.userAgent_))y="Silk";else if(f=="BlackBerry"||f=="Android")y=a.BUILTIN_BROWSER;else if(this.userAgent_.indexOf("Safari")!=-1)y="Safari";else if(this.userAgent_.indexOf("AdobeAIR")!=-1)y="AdobeAIR";var O=a.UNKNOWN;if(y==a.BUILTIN_BROWSER)O=a.UNKNOWN;else if(/Silk\/\d/.test(this.userAgent_))O=this.getMatchingGroup_(this.userAgent_,/Silk\/([\d\._]+)/,1);else if(this.userAgent_.indexOf("Version/")!=
-1)O=this.getMatchingGroup_(this.userAgent_,/Version\/([\d\.\w]+)/,1);else if(y=="Chrome")O=this.getMatchingGroup_(this.userAgent_,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2);else if(y=="AdobeAIR")O=this.getMatchingGroup_(this.userAgent_,/AdobeAIR\/([\d\.]+)/,1);if(y=="AdobeAIR"){r=this.parseVersion_(O);r=r.major>2||r.major==2&&r.minor>=5}else r=f=="BlackBerry"?r.major>=10:f=="Android"?r.major>2||r.major==2&&r.minor>1:x.major>=526||x.major>=525&&x.minor>=13;x=x.major<536||x.major==536&&x.minor<11;var Y=f==
"iPhone"||f=="iPad"||f=="iPod"||f=="Macintosh";return new d(y,O,"AppleWebKit",n,f,j,this.getDocumentMode_(this.doc_),new b(r,x,Y))};a.prototype.isGecko_=function(){return this.userAgent_.indexOf("Gecko")!=-1};a.prototype.parseGeckoUserAgentString_=function(){var f=a.UNKNOWN,j=a.UNKNOWN,n=false;if(this.userAgent_.indexOf("Firefox")!=-1){f="Firefox";var r=this.getMatchingGroup_(this.userAgent_,/Firefox\/([\d\w\.]+)/,1);if(r!=""){n=this.parseVersion_(r);j=r;n=n.major>=3&&n.minor>=5}}else if(this.userAgent_.indexOf("Mozilla")!=
-1)f="Mozilla";r=this.getMatchingGroup_(this.userAgent_,/rv:([^\)]+)/,1);if(r=="")r=a.UNKNOWN;else if(!n){n=this.parseVersion_(r);n=n.major>1||n.major==1&&n.minor>9||n.major==1&&n.minor==9&&n.patch>=2||r.match(/1\.9\.1b[123]/)!=null||r.match(/1\.9\.1\.[\d\.]+/)!=null}return new d(f,j,"Gecko",r,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new b(n,false,false))};a.prototype.parseVersion_=function(f){f=/([0-9]+)(?:\.([0-9]+)(?:\.([0-9]+)?)?)?/.exec(f);var j={};if(f){j.major=
parseInt(f[1]||-1,10);j.minor=parseInt(f[2]||-1,10);j.patch=parseInt(f[3]||-1,10)}return j};a.prototype.getMatchingGroup_=function(f,j,n){if((f=f.match(j))&&f[n])return f[n];return""};a.prototype.getDocumentMode_=function(f){if(f.documentMode)return f.documentMode}});webfont.CssClassName=function(a){this.joinChar_=a||webfont.CssClassName.DEFAULT_JOIN_CHAR};webfont.CssClassName.DEFAULT_JOIN_CHAR="-";
goog.scope(function(){var a=webfont.CssClassName;a.prototype.sanitize=function(b){return b.replace(/[\W_]+/g,"").toLowerCase()};a.prototype.build=function(){for(var b=[],d=0;d<arguments.length;d++)b.push(this.sanitize(arguments[d]));return b.join(this.joinChar_)}});webfont.Font=function(a,b){this.name_=a;this.weight_=4;this.style_="n";if(a=(b||"n4").match(/^([nio])([1-9])$/i)){this.style_=a[1];this.weight_=parseInt(a[2],10)}};
goog.scope(function(){var a=webfont.Font;a.prototype.getName=function(){return this.name_};a.prototype.getCssName=function(){return this.quote_(this.name_)};a.prototype.quote_=function(b){var d=[];b=b.split(/,\s*/);for(var f=0;f<b.length;f++){var j=b[f].replace(/['"]/g,"");j.indexOf(" ")==-1?d.push(j):d.push("'"+j+"'")}return d.join(",")};a.prototype.getVariation=function(){return this.style_+this.weight_};a.prototype.getCssVariation=function(){var b="normal",d=this.weight_+"00";if(this.style_===
"o")b="oblique";else if(this.style_==="i")b="italic";return"font-style:"+b+";font-weight:"+d+";"};a.parseCssVariation=function(b){var d=4,f="n",j=null;if(b){if((j=b.match(/(normal|oblique|italic)/i))&&j[1])f=j[1].substr(0,1).toLowerCase();if((j=b.match(/([1-9]00|normal|bold)/i))&&j[1])if(/bold/i.test(j[1]))d=7;else if(/[1-9]00/.test(j[1]))d=parseInt(j[1].substr(0,1),10)}return f+d}});
webfont.EventDispatcher=function(a,b,d,f){this.domHelper_=a;this.htmlElement_=b;this.callbacks_=d;this.namespace_=f||webfont.EventDispatcher.DEFAULT_NAMESPACE;this.cssClassName_=new webfont.CssClassName("-")};webfont.EventDispatcher.DEFAULT_NAMESPACE="wf";webfont.EventDispatcher.LOADING="loading";webfont.EventDispatcher.ACTIVE="active";webfont.EventDispatcher.INACTIVE="inactive";webfont.EventDispatcher.FONT="font";
goog.scope(function(){var a=webfont.EventDispatcher;a.prototype.dispatchLoading=function(){this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING));this.dispatch_(webfont.EventDispatcher.LOADING)};a.prototype.dispatchFontLoading=function(b){this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,b.getName(),b.getVariation().toString(),webfont.EventDispatcher.LOADING));this.dispatch_(webfont.EventDispatcher.FONT+
webfont.EventDispatcher.LOADING,b)};a.prototype.dispatchFontActive=function(b){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,b.getName(),b.getVariation().toString(),webfont.EventDispatcher.LOADING));this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,b.getName(),b.getVariation().toString(),webfont.EventDispatcher.INACTIVE));this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,
b.getName(),b.getVariation().toString(),webfont.EventDispatcher.ACTIVE));this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.ACTIVE,b)};a.prototype.dispatchFontInactive=function(b){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,b.getName(),b.getVariation().toString(),webfont.EventDispatcher.LOADING));this.domHelper_.hasClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,b.getName(),b.getVariation().toString(),webfont.EventDispatcher.ACTIVE))||
this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,b.getName(),b.getVariation().toString(),webfont.EventDispatcher.INACTIVE));this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.INACTIVE,b)};a.prototype.dispatchInactive=function(){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING));this.domHelper_.hasClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.ACTIVE))||
this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.INACTIVE));this.dispatch_(webfont.EventDispatcher.INACTIVE)};a.prototype.dispatchActive=function(){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING));this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.INACTIVE));this.domHelper_.appendClassName(this.htmlElement_,
this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.ACTIVE));this.dispatch_(webfont.EventDispatcher.ACTIVE)};a.prototype.dispatch_=function(b,d){if(this.callbacks_[b])d?this.callbacks_[b](d.getName(),d.getVariation()):this.callbacks_[b]()}});webfont.FontModuleFactory={};webfont.FontModule=function(){};goog.scope(function(){var a=webfont.FontModule;a.prototype.supportUserAgent=function(){};a.prototype.load=function(){}});webfont.FontModuleLoader=function(){this.modules_={}};
goog.scope(function(){var a=webfont.FontModuleLoader;a.prototype.addModuleFactory=function(b,d){this.modules_[b]=d};a.prototype.getModules=function(b,d){var f=[];for(var j in b)if(b.hasOwnProperty(j)){var n=this.modules_[j];n&&f.push(n(b[j],d))}return f}});webfont.FontRuler=function(a,b){this.domHelper_=a;this.fontTestString_=b;this.el_=this.domHelper_.createElement("span",{"aria-hidden":"true"},this.fontTestString_)};
goog.scope(function(){var a=webfont.FontRuler;a.prototype.setFont=function(b){this.domHelper_.setStyle(this.el_,this.computeStyleString_(b))};a.prototype.insert=function(){this.domHelper_.insertInto("body",this.el_)};a.prototype.computeStyleString_=function(b){return"position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b.getCssName()+";"+b.getCssVariation()};a.prototype.getWidth=function(){return this.el_.offsetWidth};
a.prototype.remove=function(){this.domHelper_.removeElement(this.el_)}});webfont.FontWatchRunner=function(a,b,d,f,j,n,r,x){this.activeCallback_=a;this.inactiveCallback_=b;this.domHelper_=d;this.font_=f;this.fontTestString_=x||webfont.FontWatchRunner.DEFAULT_TEST_STRING;this.browserInfo_=j;this.lastResortWidths_={};this.timeout_=n||5E3;this.metricCompatibleFonts_=r||null;this.fontRulerB_=this.fontRulerA_=null;this.setupLastResortWidths_()};
webfont.FontWatchRunner.LastResortFonts={SERIF:"serif",SANS_SERIF:"sans-serif",MONOSPACE:"monospace"};webfont.FontWatchRunner.DEFAULT_TEST_STRING="BESbswy";
goog.scope(function(){var a=webfont.FontWatchRunner,b=webfont.Font,d=webfont.FontRuler;a.prototype.setupLastResortWidths_=function(){var f=new d(this.domHelper_,this.fontTestString_);f.insert();for(var j in a.LastResortFonts)if(a.LastResortFonts.hasOwnProperty(j)){f.setFont(new b(a.LastResortFonts[j],this.font_.getVariation()));this.lastResortWidths_[a.LastResortFonts[j]]=f.getWidth()}f.remove()};a.prototype.start=function(){this.fontRulerA_=new d(this.domHelper_,this.fontTestString_);this.fontRulerA_.insert();
this.fontRulerB_=new d(this.domHelper_,this.fontTestString_);this.fontRulerB_.insert();this.started_=goog.now();this.fontRulerA_.setFont(new b(this.font_.getName()+","+a.LastResortFonts.SERIF,this.font_.getVariation()));this.fontRulerB_.setFont(new b(this.font_.getName()+","+a.LastResortFonts.SANS_SERIF,this.font_.getVariation()));this.check_()};a.prototype.widthMatches_=function(f,j){return f===this.lastResortWidths_[j]};a.prototype.widthsMatchLastResortWidths_=function(f,j){for(var n in a.LastResortFonts)if(a.LastResortFonts.hasOwnProperty(n))if(this.widthMatches_(f,
a.LastResortFonts[n])&&this.widthMatches_(j,a.LastResortFonts[n]))return true;return false};a.prototype.hasTimedOut_=function(){return goog.now()-this.started_>=this.timeout_};a.prototype.isFallbackFont_=function(f,j){return this.widthMatches_(f,a.LastResortFonts.SERIF)&&this.widthMatches_(j,a.LastResortFonts.SANS_SERIF)};a.prototype.isLastResortFont_=function(f,j){return this.browserInfo_.hasWebKitFallbackBug()&&this.widthsMatchLastResortWidths_(f,j)};a.prototype.isMetricCompatibleFont_=function(){return this.metricCompatibleFonts_===
null||this.metricCompatibleFonts_.hasOwnProperty(this.font_.getName())};a.prototype.check_=function(){var f=this.fontRulerA_.getWidth(),j=this.fontRulerB_.getWidth();if(this.isFallbackFont_(f,j)||this.isLastResortFont_(f,j))if(this.hasTimedOut_())this.isLastResortFont_(f,j)&&this.isMetricCompatibleFont_()?this.finish_(this.activeCallback_):this.finish_(this.inactiveCallback_);else this.asyncCheck_();else this.finish_(this.activeCallback_)};a.prototype.asyncCheck_=function(){setTimeout(goog.bind(function(){this.check_()},
this),25)};a.prototype.finish_=function(f){this.fontRulerA_.remove();this.fontRulerB_.remove();f(this.font_)}});webfont.FontWatcher=function(a,b,d,f){this.domHelper_=b;this.eventDispatcher_=d;this.currentlyWatched_=0;this.success_=this.last_=false;this.timeout_=f;this.browserInfo_=a.getBrowserInfo()};
goog.scope(function(){var a=webfont.FontWatcher;a.prototype.watch=function(b,d,f,j){var n=b.length;if(n===0&&j)this.eventDispatcher_.dispatchInactive();else{this.currentlyWatched_+=n;if(j)this.last_=j;for(j=0;j<n;j++){var r=b[j],x=d[r.getName()];this.eventDispatcher_.dispatchFontLoading(r);var y=goog.bind(this.fontActive_,this),O=goog.bind(this.fontInactive_,this);(new f(y,O,this.domHelper_,r,this.browserInfo_,this.timeout_,null,x)).start()}}};a.prototype.fontActive_=function(b){this.eventDispatcher_.dispatchFontActive(b);
this.success_=true;this.decreaseCurrentlyWatched_()};a.prototype.fontInactive_=function(b){this.eventDispatcher_.dispatchFontInactive(b);this.decreaseCurrentlyWatched_()};a.prototype.decreaseCurrentlyWatched_=function(){if(--this.currentlyWatched_==0&&this.last_)this.success_?this.eventDispatcher_.dispatchActive():this.eventDispatcher_.dispatchInactive()}});webfont.WebFont=function(a,b,d){this.mainWindow_=a;this.fontModuleLoader_=b;this.userAgent_=d;this.moduleFailedLoading_=this.moduleLoading_=0};
goog.scope(function(){var a=webfont.WebFont,b=webfont.DomHelper,d=webfont.EventDispatcher;a.prototype.addModule=function(f,j){this.fontModuleLoader_.addModuleFactory(f,j)};a.prototype.load=function(f){var j=f.context||this.mainWindow_;this.domHelper_=new b(this.mainWindow_,j);j=new d(this.domHelper_,j.document.documentElement,f);this.userAgent_.getBrowserInfo().hasWebFontSupport()?this.load_(j,f):j.dispatchInactive()};a.prototype.isModuleSupportingUserAgent_=function(f,j,n,r){var x=f.getFontWatchRunnerCtor?
f.getFontWatchRunnerCtor():webfont.FontWatchRunner,y=this;if(r)f.load(function(O,Y){y.onModuleReady_(j,n,x,O,Y)});else{f=--this.moduleLoading_==0;this.moduleFailedLoading_--;if(f)this.moduleFailedLoading_==0?j.dispatchInactive():j.dispatchLoading();n.watch([],{},x,f)}};a.prototype.onModuleReady_=function(f,j,n,r,x){var y=--this.moduleLoading_==0;y&&f.dispatchLoading();setTimeout(function(){j.watch(r,x||{},n,y)},0)};a.prototype.load_=function(f,j){var n=this.fontModuleLoader_.getModules(j,this.domHelper_);
j=j.timeout;this.moduleFailedLoading_=this.moduleLoading_=n.length;j=new webfont.FontWatcher(this.userAgent_,this.domHelper_,f,j);for(var r=0,x=n.length;r<x;r++){var y=n[r];y.supportUserAgent(this.userAgent_,goog.bind(this.isModuleSupportingUserAgent_,this,y,f,j))}}});var GLOBAL_NAME="WebFont",globalNamespaceObject=window[GLOBAL_NAME]=function(){var a=(new webfont.UserAgentParser(navigator.userAgent,document)).parse(),b=new webfont.FontModuleLoader;return new webfont.WebFont(window,b,a)}();
globalNamespaceObject.load=globalNamespaceObject.load;webfont.LastResortWebKitFontWatchRunner=function(a,b,d,f,j,n,r,x){webfont.FontWatchRunner.call(this,a,b,d,f,j,n,r,x);this.webKitLastResortFontWidths_=this.setUpWebKitLastResortFontWidths_();this.webKitLastResortWidthChange_=false;this.lastObservedWidthA_=this.lastResortWidths_[webfont.FontWatchRunner.LastResortFonts.SERIF];this.lastObservedWidthB_=this.lastResortWidths_[webfont.FontWatchRunner.LastResortFonts.SANS_SERIF]};
goog.inherits(webfont.LastResortWebKitFontWatchRunner,webfont.FontWatchRunner);webfont.LastResortWebKitFontWatchRunner.METRICS_COMPATIBLE_FONTS={Arimo:true,Cousine:true,Tinos:true};
goog.scope(function(){var a=webfont.LastResortWebKitFontWatchRunner,b=webfont.Font,d=webfont.FontRuler;a.prototype.setUpWebKitLastResortFontWidths_=function(){var f=["Times New Roman","Arial","Times","Sans","Serif"],j=this.font_.getVariation(),n=f.length,r={},x=new d(this.domHelper_,this.fontTestString_);x.insert();x.setFont(new b(f[0],j));r[x.getWidth()]=true;for(var y=1;y<n;y++){var O=f[y];x.setFont(new b(O,j));r[x.getWidth()]=true;if(j.toString().charAt(1)!="4"){x.setFont(new b(O,j.charAt(0)+"4"));
r[x.getWidth()]=true}}x.remove();return r};a.prototype.check_=function(){var f=this.fontRulerA_.getWidth(),j=this.fontRulerB_.getWidth();if(!this.webKitLastResortWidthChange_&&f==j&&this.webKitLastResortFontWidths_[f]){this.webKitLastResortFontWidths_={};this.webKitLastResortWidthChange_=this.webKitLastResortFontWidths_[f]=true}if((this.lastObservedWidthA_!=f||this.lastObservedWidthB_!=j)&&!this.webKitLastResortFontWidths_[f]&&!this.webKitLastResortFontWidths_[j])this.finish_(this.activeCallback_);
else if(this.hasTimedOut_())this.webKitLastResortFontWidths_[f]&&this.webKitLastResortFontWidths_[j]&&a.METRICS_COMPATIBLE_FONTS[this.font_.getName()]?this.finish_(this.activeCallback_):this.finish_(this.inactiveCallback_);else this.asyncCheck_()}});webfont.FontApiUrlBuilder=function(a,b,d){this.apiUrl_=a?a:b+webfont.FontApiUrlBuilder.DEFAULT_API_URL;this.fontFamilies_=[];this.subsets_=[];this.text_=d||""};webfont.FontApiUrlBuilder.DEFAULT_API_URL="//fonts.googleapis.com/css";
goog.scope(function(){var a=webfont.FontApiUrlBuilder;a.prototype.setFontFamilies=function(b){this.parseFontFamilies_(b)};a.prototype.parseFontFamilies_=function(b){for(var d=b.length,f=0;f<d;f++){var j=b[f].split(":");j.length==3&&this.subsets_.push(j.pop());var n="";if(j.length==2&&j[1]!="")n=":";this.fontFamilies_.push(j.join(n))}};a.prototype.webSafe=function(b){return b.replace(/ /g,"+")};a.prototype.build=function(){if(this.fontFamilies_.length==0)throw new Error("No fonts to load !");if(this.apiUrl_.indexOf("kit=")!=
-1)return this.apiUrl_;for(var b=this.fontFamilies_.length,d=[],f=0;f<b;f++)d.push(this.webSafe(this.fontFamilies_[f]));b=this.apiUrl_+"?family="+d.join("%7C");if(this.subsets_.length>0)b+="&subset="+this.subsets_.join(",");if(this.text_.length>0)b+="&text="+encodeURIComponent(this.text_);return b}});webfont.FontApiParser=function(a){this.fontFamilies_=a;this.parsedFonts_=[];this.fontTestStrings_={}};
webfont.FontApiParser.INT_FONTS={latin:webfont.FontWatchRunner.DEFAULT_TEST_STRING,cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"};
webfont.FontApiParser.WEIGHTS={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"};webfont.FontApiParser.STYLES={i:"i",italic:"i",n:"n",normal:"n"};webfont.FontApiParser.VARIATION_MATCH=new RegExp("^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$");
goog.scope(function(){var a=webfont.FontApiParser,b=webfont.Font;a.prototype.parse=function(){for(var d=this.fontFamilies_.length,f=0;f<d;f++){var j=this.fontFamilies_[f].split(":"),n=j[0].replace(/\+/g," "),r=["n4"];if(j.length>=2){var x=this.parseVariations_(j[1]);if(x.length>0)r=x;if(j.length==3){j=this.parseSubsets_(j[2]);if(j.length>0)if(j=a.INT_FONTS[j[0]])this.fontTestStrings_[n]=j}}if(!this.fontTestStrings_[n])if(j=a.INT_FONTS[n])this.fontTestStrings_[n]=j;for(j=0;j<r.length;j+=1)this.parsedFonts_.push(new b(n,
r[j]))}};a.prototype.generateFontVariationDescription_=function(d){if(!d.match(/^[\w]+$/))return"";d=d.toLowerCase();var f=a.VARIATION_MATCH.exec(d);if(f==null)return"";d=this.normalizeStyle_(f[2]);f=this.normalizeWeight_(f[1]);return[d,f].join("")};a.prototype.normalizeStyle_=function(d){if(d==null||d=="")return"n";return a.STYLES[d]};a.prototype.normalizeWeight_=function(d){if(d==null||d=="")return"4";var f=a.WEIGHTS[d];if(f)return f;if(isNaN(d))return"4";return d.substr(0,1)};a.prototype.parseVariations_=
function(d){var f=[];if(!d)return f;d=d.split(",");for(var j=d.length,n=0;n<j;n++){var r=this.generateFontVariationDescription_(d[n]);r&&f.push(r)}return f};a.prototype.parseSubsets_=function(d){var f=[];if(!d)return f;return d.split(",")};a.prototype.getFonts=function(){return this.parsedFonts_};a.prototype.getFontTestStrings=function(){return this.fontTestStrings_}});webfont.GoogleFontApi=function(a,b,d){this.userAgent_=a;this.domHelper_=b;this.configuration_=d};webfont.GoogleFontApi.NAME="google";
goog.scope(function(){var a=webfont.GoogleFontApi,b=webfont.FontWatchRunner,d=webfont.LastResortWebKitFontWatchRunner,f=webfont.FontApiUrlBuilder,j=webfont.FontApiParser;a.prototype.supportUserAgent=function(n,r){r(n.getBrowserInfo().hasWebFontSupport())};a.prototype.getFontWatchRunnerCtor=function(){if(this.userAgent_.getEngine()=="AppleWebKit")return d;return b};a.prototype.load=function(n){var r=this.domHelper_;this.userAgent_.getName()=="MSIE"&&this.configuration_.blocking!=true?r.whenBodyExists(goog.bind(this.insertLink_,
this,n)):this.insertLink_(n)};a.prototype.insertLink_=function(n){var r=this.domHelper_,x=new f(this.configuration_.api,r.getProtocol(),this.configuration_.text),y=this.configuration_.families;x.setFontFamilies(y);y=new j(y);y.parse();r.insertInto("head",r.createCssLink(x.build()));n(y.getFonts(),y.getFontTestStrings())}});
globalNamespaceObject.addModule(webfont.GoogleFontApi.NAME,function(a,b){var d=(new webfont.UserAgentParser(navigator.userAgent,document)).parse();return new webfont.GoogleFontApi(d,b,a)});webfont.AscenderScript=function(a,b){this.domHelper_=a;this.configuration_=b};webfont.AscenderScript.NAME="ascender";webfont.AscenderScript.VARIATIONS={regular:"n4",bold:"n7",italic:"i4",bolditalic:"i7",r:"n4",b:"n7",i:"i4",bi:"i7"};
goog.scope(function(){var a=webfont.AscenderScript,b=webfont.Font;a.prototype.supportUserAgent=function(d,f){return f(d.getBrowserInfo().hasWebFontSupport())};a.prototype.load=function(d){var f=this.configuration_.key;this.domHelper_.insertInto("head",this.domHelper_.createCssLink(this.domHelper_.getProtocol()+"//webfonts.fontslive.com/css/"+f+".css"));f=this.parseFamiliesAndVariations(this.configuration_.families);d(f)};a.prototype.parseFamiliesAndVariations=function(d){for(var f=[],j=0,n=d.length;j<
n;j++)f.push.apply(f,this.parseFamilyAndVariations(d[j]));return f};a.prototype.parseFamilyAndVariations=function(d){var f=d.split(":");d=f[0];if(f[1]){f=this.parseVariations(f[1]);for(var j=[],n=0;n<f.length;n+=1)j.push(new b(d,f[n]));return j}return[new b(d)]};a.prototype.parseVariations=function(d){d=d.split(",");for(var f=[],j=0,n=d.length;j<n;j++){var r=d[j];if(r){var x=a.VARIATIONS[r];f.push(x?x:r)}}return f}});
globalNamespaceObject.addModule(webfont.AscenderScript.NAME,function(a,b){return new webfont.AscenderScript(b,a)});webfont.MonotypeScript=function(a,b,d){this.userAgent_=a;this.domHelper_=b;this.configuration_=d;this.fonts_=[]};webfont.MonotypeScript.NAME="monotype";webfont.MonotypeScript.HOOK="__mti_fntLst";webfont.MonotypeScript.SCRIPTID="__MonotypeAPIScript__";
goog.scope(function(){var a=webfont.MonotypeScript,b=webfont.Font;a.prototype.supportUserAgent=function(d,f){var j=this,n=j.configuration_.projectId,r=j.configuration_.version;if(n){var x=j.domHelper_.createElement("script");x.id=a.SCRIPTID+n;var y=this.domHelper_.getLoadWindow(),O=function(){if(y[a.HOOK+n]){var H=y[webfont.MonotypeScript.HOOK+n]();if(H)for(var M=0;M<H.length;M++)j.fonts_.push(new b(H[M].fontfamily))}f(d.getBrowserInfo().hasWebFontSupport())},Y=false;x.onload=x.onreadystatechange=
function(){if(!Y&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){Y=true;O();x.onload=x.onreadystatechange=null}};x.src=j.getScriptSrc(n,r);this.domHelper_.insertInto("head",x)}else f(true)};a.prototype.getScriptSrc=function(d,f){var j=this.domHelper_.getProtocol(),n=(this.configuration_.api||"fast.fonts.com/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return j+"//"+n+"/"+d+".js"+(f?"?v="+f:"")};a.prototype.load=function(d){d(this.fonts_)}});
globalNamespaceObject.addModule(webfont.MonotypeScript.NAME,function(a,b){var d=(new webfont.UserAgentParser(navigator.userAgent,document)).parse();return new webfont.MonotypeScript(d,b,a)});webfont.TypekitScript=function(a,b){this.domHelper_=a;this.configuration_=b;this.fonts_=[]};webfont.TypekitScript.NAME="typekit";webfont.TypekitScript.HOOK="__webfonttypekitmodule__";
goog.scope(function(){var a=webfont.TypekitScript,b=webfont.Font;a.prototype.getScriptSrc=function(d){var f=this.domHelper_.getProtocol();return(this.configuration_.api||f+"//use.typekit.net")+"/"+d+".js"};a.prototype.supportUserAgent=function(d,f){var j=this.configuration_.id,n=this.configuration_,r=this.domHelper_.getLoadWindow(),x=this;if(j){r[webfont.TypekitScript.HOOK]||(r[webfont.TypekitScript.HOOK]={});r[webfont.TypekitScript.HOOK][j]=function(y){y(d,n,function(O,Y,H){for(var M=0;M<Y.length;M+=
1){var da=H[Y[M]];if(da)for(var ka=0;ka<da.length;ka+=1)x.fonts_.push(new b(Y[M],da[ka]));else x.fonts_.push(new b(Y[M]))}f(O)})};this.domHelper_.insertInto("head",this.domHelper_.createScriptSrc(this.getScriptSrc(j)))}else f(true)};a.prototype.load=function(d){d(this.fonts_)}});globalNamespaceObject.addModule(webfont.TypekitScript.NAME,function(a,b){return new webfont.TypekitScript(b,a)});webfont.CustomCss=function(a,b){this.domHelper_=a;this.configuration_=b};webfont.CustomCss.NAME="custom";
goog.scope(function(){var a=webfont.CustomCss,b=webfont.Font;a.prototype.load=function(d){var f,j,n=this.configuration_.urls||[],r=this.configuration_.families||[];f=0;for(j=n.length;f<j;f++)this.domHelper_.insertInto("head",this.domHelper_.createCssLink(n[f]));n=[];f=0;for(j=r.length;f<j;f++){var x=r[f].split(":");if(x[1])for(var y=x[1].split(","),O=0;O<y.length;O+=1)n.push(new b(x[0],y[O]));else n.push(new b(x[0]))}d(n)};a.prototype.supportUserAgent=function(d,f){return f(d.getBrowserInfo().hasWebFontSupport())}});
globalNamespaceObject.addModule(webfont.CustomCss.NAME,function(a,b){return new webfont.CustomCss(b,a)});webfont.FontdeckScript=function(a,b){this.domHelper_=a;this.configuration_=b;this.fonts_=[]};webfont.FontdeckScript.NAME="fontdeck";webfont.FontdeckScript.HOOK="__webfontfontdeckmodule__";webfont.FontdeckScript.API="//f.fontdeck.com/s/css/js/";
goog.scope(function(){var a=webfont.FontdeckScript,b=webfont.Font;a.prototype.getScriptSrc=function(d){var f=this.domHelper_.getProtocol(),j=this.domHelper_.getLoadWindow().location.hostname||this.domHelper_.getMainWindow().location.hostname;return f+(this.configuration_.api||webfont.FontdeckScript.API)+j+"/"+d+".js"};a.prototype.supportUserAgent=function(d,f){d=this.configuration_.id;var j=this.domHelper_.getLoadWindow(),n=this;if(d){j[webfont.FontdeckScript.HOOK]||(j[webfont.FontdeckScript.HOOK]=
{});j[webfont.FontdeckScript.HOOK][d]=function(r,x){for(var y=0,O=x.fonts.length;y<O;++y){var Y=x.fonts[y];n.fonts_.push(new b(Y.name,b.parseCssVariation("font-weight:"+Y.weight+";font-style:"+Y.style)))}f(r)};this.domHelper_.insertInto("head",this.domHelper_.createScriptSrc(this.getScriptSrc(d)))}else f(true)};a.prototype.load=function(d){d(this.fonts_)}});globalNamespaceObject.addModule(webfont.FontdeckScript.NAME,function(a,b){return new webfont.FontdeckScript(b,a)});window.WebFontConfig&&globalNamespaceObject.load(window.WebFontConfig);WebFont.load({timeout:2E3,google:{families:["Open+Sans:400italic,600italic,400,600&subset=latin,latin-ext"]},inactive:function(){WebFont.load({custom:{families:["Open Sans"],urls:["/stylesheets/open_sans.css"]}});WebFont.load({custom:{families:["Source Sans Pro"],urls:["/stylesheets/source_sans_pro.css"]}})}});
WebFont.load({timeout:2E3,google:{families:["Source+Sans+Pro:400,700,400italic,700italic&subset=latin,latin-ext"]},inactive:function(){WebFont.load({custom:{families:["Open Sans"],urls:["/stylesheets/open_sans.css"]}});WebFont.load({custom:{families:["Source Sans Pro"],urls:["/stylesheets/source_sans_pro.css"]}})}});function AgeGate(a,b){a&&b?this.initialize(a,b):this.initialize(null,a)}AgeGate.MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"];
AgeGate.prototype={initialize:function(a,b){var d=this;this._cookie_name=b.cookie_name||"age_gate";this._active_user=b.active_user||active_user;this._required_age=b.required_age;this._age_met=false;if(this._use_form=b.use_form===undefined?true:b.use_form){this._element=$(a);this._button_text=b.button_text||"Go"}this._onSuccess=(b.onSuccess||function(){}).wrap(function(f){d._age_met=true;Cookie.set(d._cookie_name,"YES");return f()});this._onFailure=(b.onFailure||function(){}).wrap(function(f){Cookie.set(d._cookie_name,
"NO");return f()});this._onError=b.onError||function(){};this.preflight()||this._age_met||(this._use_form?this.writeForm():this._onFailure())},preflight:function(){var a=this._active_user.age();if(a){a>=this._required_age?this._onSuccess():this._onFailure();return true}a=Cookie.get(this._cookie_name);if(a=="YES"){this._onSuccess();return true}else if(a=="NO"){this._onFailure();return true}return false},writeForm:function(){var a=this,b="",d=0;b='<form action="#">';b+="<dl>";b+="<dt><label>Date of Birth</label></dt>";
b+='<dd id="date">';b+='<select id="user_month" name="user_month">';b+='<option value=""></option>';for(d=0;d<AgeGate.MONTHS.length;d++)b+='<option value="'+d+'">'+AgeGate.MONTHS[d]+"</option>";b+="</select>";b+='<select id="user_day" name="user_day">';b+='<option value=""></option>';for(d=1;d<=31;d++)b+='<option value="'+d+'">'+d+"</option>";b+="</select>";b+='<select id="user_year" name="user_year">';b+='<option value=""></option>';for(d=2005;d>=1908;d--)b+='<option value="'+d+'">'+d+"</option>";
b+="</select>";b+="</dd>";b+="</dl>";b+='<input type="submit" value="'+this._button_text+'" />';b+="</form>";this._element.innerHTML+=b;(function(){a._element.immediateDescendants()[0].onsubmit=function(){a.checkAge(this);return false}}).defer()},checkAge:function(a){var b=Number(a.user_month.getValue()),d=Number(a.user_day.getValue());a=Number(a.user_year.getValue());if(isNaN(b)||d===0||a===0)this._onError();else{b=new Date(a+this._required_age,b,d);(new Date).getTime()-b.getTime()<0?this._onFailure():
this._onSuccess()}}};var AsyncLoader={load:function(a,b,d){var f,j=document;switch(a){case "js":f=j.createElement("script");f.type="text/javascript";f.async=true;f.src=b;break;case "css":f=j.createElement("link");f.href=b;f.rel="stylesheet";break;default:return}if(d){var n=false;f.onload=f.onreadystatechange=function(r){if(!n&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){n=true;d(r);f.onload=f.onreadystatechange=null}}}a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(f,
a)}};if(Object.isUndefined(Effect))throw"dragdrop.js requires including script.aculo.us' effects.js library";
var Droppables={drops:[],remove:function(a){this.drops=this.drops.reject(function(b){return b.element==$(a)})},add:function(a,b){a=$(a);var d=Object.extend({greedy:true,hoverclass:null,tree:false},b||{});if(d.containment){d._containers=[];b=d.containment;Object.isArray(b)?b.each(function(f){d._containers.push($(f))}):d._containers.push($(b))}if(d.accept)d.accept=[d.accept].flatten();Element.makePositioned(a);d.element=a;this.drops.push(d)},findDeepestChild:function(a){deepest=a[0];for(i=1;i<a.length;++i)if(Element.isParent(a[i].element,
deepest.element))deepest=a[i];return deepest},isContained:function(a,b){var d;d=b.tree?a.treeNode:a.parentNode;return b._containers.detect(function(f){return d==f})},isAffected:function(a,b,d){return d.element!=b&&(!d._containers||this.isContained(b,d))&&(!d.accept||Element.classNames(b).detect(function(f){return d.accept.include(f)}))&&Position.within(d.element,a[0],a[1])},deactivate:function(a){a.hoverclass&&Element.removeClassName(a.element,a.hoverclass);this.last_active=null},activate:function(a){a.hoverclass&&
Element.addClassName(a.element,a.hoverclass);this.last_active=a},show:function(a,b){if(this.drops.length){var d,f=[];this.drops.each(function(j){Droppables.isAffected(a,b,j)&&f.push(j)});if(f.length>0)d=Droppables.findDeepestChild(f);this.last_active&&this.last_active!=d&&this.deactivate(this.last_active);if(d){Position.within(d.element,a[0],a[1]);d.onHover&&d.onHover(b,d.element,Position.overlap(d.overlap,d.element));d!=this.last_active&&Droppables.activate(d)}}},fire:function(a,b){if(this.last_active){Position.prepare();
if(this.isAffected([Event.pointerX(a),Event.pointerY(a)],b,this.last_active))if(this.last_active.onDrop){this.last_active.onDrop(b,this.last_active.element,a);return true}}},reset:function(){this.last_active&&this.deactivate(this.last_active)}},Draggables={drags:[],observers:[],register:function(a){if(this.drags.length==0){this.eventMouseUp=this.endDrag.bindAsEventListener(this);this.eventMouseMove=this.updateDrag.bindAsEventListener(this);this.eventKeypress=this.keyPress.bindAsEventListener(this);
Event.observe(document,"mouseup",this.eventMouseUp);Event.observe(document,"mousemove",this.eventMouseMove);Event.observe(document,"keypress",this.eventKeypress)}this.drags.push(a)},unregister:function(a){this.drags=this.drags.reject(function(b){return b==a});if(this.drags.length==0){Event.stopObserving(document,"mouseup",this.eventMouseUp);Event.stopObserving(document,"mousemove",this.eventMouseMove);Event.stopObserving(document,"keypress",this.eventKeypress)}},activate:function(a){if(a.options.delay)this._timeout=
setTimeout(function(){Draggables._timeout=null;window.focus();Draggables.activeDraggable=a}.bind(this),a.options.delay);else{window.focus();this.activeDraggable=a}},deactivate:function(){this.activeDraggable=null},updateDrag:function(a){if(this.activeDraggable){var b=[Event.pointerX(a),Event.pointerY(a)];if(!(this._lastPointer&&this._lastPointer.inspect()==b.inspect())){this._lastPointer=b;this.activeDraggable.updateDrag(a,b)}}},endDrag:function(a){if(this._timeout){clearTimeout(this._timeout);this._timeout=
null}if(this.activeDraggable){this._lastPointer=null;this.activeDraggable.endDrag(a);this.activeDraggable=null}},keyPress:function(a){this.activeDraggable&&this.activeDraggable.keyPress(a)},addObserver:function(a){this.observers.push(a);this._cacheObserverCallbacks()},removeObserver:function(a){this.observers=this.observers.reject(function(b){return b.element==a});this._cacheObserverCallbacks()},notify:function(a,b,d){this[a+"Count"]>0&&this.observers.each(function(f){f[a]&&f[a](a,b,d)});b.options[a]&&
b.options[a](b,d)},_cacheObserverCallbacks:function(){["onStart","onEnd","onDrag"].each(function(a){Draggables[a+"Count"]=Draggables.observers.select(function(b){return b[a]}).length})}},Draggable=Class.create({initialize:function(a,b){var d={handle:false,reverteffect:function(f,j,n){var r=Math.sqrt(Math.abs(j^2)+Math.abs(n^2))*0.02;new Effect.Move(f,{x:-n,y:-j,duration:r,queue:{scope:"_draggable",position:"end"}})},endeffect:function(f){var j=Object.isNumber(f._opacity)?f._opacity:1;new Effect.Opacity(f,
{duration:0.2,from:0.7,to:j,queue:{scope:"_draggable",position:"end"},afterFinish:function(){Draggable._dragging[f]=false}})},zindex:1E3,revert:false,quiet:false,scroll:false,scrollSensitivity:20,scrollSpeed:15,snap:false,delay:0};if(!b||Object.isUndefined(b.endeffect))Object.extend(d,{starteffect:function(f){f._opacity=Element.getOpacity(f);Draggable._dragging[f]=true;new Effect.Opacity(f,{duration:0.2,from:f._opacity,to:0.7})}});b=Object.extend(d,b||{});this.element=$(a);if(b.handle&&Object.isString(b.handle))this.handle=
this.element.down("."+b.handle,0);if(!this.handle)this.handle=$(b.handle);if(!this.handle)this.handle=this.element;if(b.scroll&&!b.scroll.scrollTo&&!b.scroll.outerHTML){b.scroll=$(b.scroll);this._isScrollChild=Element.childOf(this.element,b.scroll)}Element.makePositioned(this.element);this.options=b;this.dragging=false;this.eventMouseDown=this.initDrag.bindAsEventListener(this);Event.observe(this.handle,"mousedown",this.eventMouseDown);Draggables.register(this)},destroy:function(){Event.stopObserving(this.handle,
"mousedown",this.eventMouseDown);Draggables.unregister(this)},currentDelta:function(){return[parseInt(Element.getStyle(this.element,"left")||"0"),parseInt(Element.getStyle(this.element,"top")||"0")]},initDrag:function(a){if(!(!Object.isUndefined(Draggable._dragging[this.element])&&Draggable._dragging[this.element]))if(Event.isLeftClick(a))if(!((tag_name=Event.element(a).tagName.toUpperCase())&&(tag_name=="INPUT"||tag_name=="SELECT"||tag_name=="OPTION"||tag_name=="BUTTON"||tag_name=="TEXTAREA"))){var b=
[Event.pointerX(a),Event.pointerY(a)],d=Position.cumulativeOffset(this.element);this.offset=[0,1].map(function(f){return b[f]-d[f]});Draggables.activate(this);Event.stop(a)}},startDrag:function(a){this.dragging=true;if(!this.delta)this.delta=this.currentDelta();if(this.options.zindex){this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0);this.element.style.zIndex=this.options.zindex}if(this.options.ghosting){this._clone=this.element.cloneNode(true);(this._originallyAbsolute=this.element.getStyle("position")==
"absolute")||Position.absolutize(this.element);this.element.parentNode.insertBefore(this._clone,this.element)}if(this.options.scroll)if(this.options.scroll==window){var b=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=b.left;this.originalScrollTop=b.top}else{this.originalScrollLeft=this.options.scroll.scrollLeft;this.originalScrollTop=this.options.scroll.scrollTop}Draggables.notify("onStart",this,a);this.options.starteffect&&this.options.starteffect(this.element)},updateDrag:function(a,
b){this.dragging||this.startDrag(a);if(!this.options.quiet){Position.prepare();Droppables.show(b,this.element)}Draggables.notify("onDrag",this,a);this.draw(b);this.options.change&&this.options.change(this);if(this.options.scroll){this.stopScrolling();var d;if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))d=[left,top,left+width,top+height];else{d=Position.page(this.options.scroll);d[0]+=this.options.scroll.scrollLeft+Position.deltaX;d[1]+=this.options.scroll.scrollTop+
Position.deltaY;d.push(d[0]+this.options.scroll.offsetWidth);d.push(d[1]+this.options.scroll.offsetHeight)}var f=[0,0];if(b[0]<d[0]+this.options.scrollSensitivity)f[0]=b[0]-(d[0]+this.options.scrollSensitivity);if(b[1]<d[1]+this.options.scrollSensitivity)f[1]=b[1]-(d[1]+this.options.scrollSensitivity);if(b[0]>d[2]-this.options.scrollSensitivity)f[0]=b[0]-(d[2]-this.options.scrollSensitivity);if(b[1]>d[3]-this.options.scrollSensitivity)f[1]=b[1]-(d[3]-this.options.scrollSensitivity);this.startScrolling(f)}Prototype.Browser.WebKit&&
window.scrollBy(0,0);Event.stop(a)},finishDrag:function(a,b){this.dragging=false;if(this.options.quiet){Position.prepare();var d=[Event.pointerX(a),Event.pointerY(a)];Droppables.show(d,this.element)}if(this.options.ghosting){this._originallyAbsolute||Position.relativize(this.element);delete this._originallyAbsolute;Element.remove(this._clone);this._clone=null}d=false;if(b)(d=Droppables.fire(a,this.element))||(d=false);d&&this.options.onDropped&&this.options.onDropped(this.element);Draggables.notify("onEnd",
this,a);if((a=this.options.revert)&&Object.isFunction(a))a=a(this.element);b=this.currentDelta();if(a&&this.options.reverteffect){if(d==0||a!="failure")this.options.reverteffect(this.element,b[1]-this.delta[1],b[0]-this.delta[0])}else this.delta=b;if(this.options.zindex)this.element.style.zIndex=this.originalZ;this.options.endeffect&&this.options.endeffect(this.element);Draggables.deactivate(this);Droppables.reset()},keyPress:function(a){if(a.keyCode==Event.KEY_ESC){this.finishDrag(a,false);Event.stop(a)}},
endDrag:function(a){if(this.dragging){this.stopScrolling();this.finishDrag(a,true);Event.stop(a)}},draw:function(a){var b=Position.cumulativeOffset(this.element);if(this.options.ghosting){var d=Position.realOffset(this.element);b[0]+=d[0]-Position.deltaX;b[1]+=d[1]-Position.deltaY}d=this.currentDelta();b[0]-=d[0];b[1]-=d[1];if(this.options.scroll&&this.options.scroll!=window&&this._isScrollChild){b[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft;b[1]-=this.options.scroll.scrollTop-this.originalScrollTop}d=
[0,1].map(function(j){return a[j]-b[j]-this.offset[j]}.bind(this));if(this.options.snap)d=Object.isFunction(this.options.snap)?this.options.snap(d[0],d[1],this):Object.isArray(this.options.snap)?d.map(function(j,n){return(j/this.options.snap[n]).round()*this.options.snap[n]}.bind(this)):d.map(function(j){return(j/this.options.snap).round()*this.options.snap}.bind(this));var f=this.element.style;if(!this.options.constraint||this.options.constraint=="horizontal")f.left=d[0]+"px";if(!this.options.constraint||
this.options.constraint=="vertical")f.top=d[1]+"px";if(f.visibility=="hidden")f.visibility=""},stopScrolling:function(){if(this.scrollInterval){clearInterval(this.scrollInterval);this.scrollInterval=null;Draggables._lastScrollPointer=null}},startScrolling:function(a){if(a[0]||a[1]){this.scrollSpeed=[a[0]*this.options.scrollSpeed,a[1]*this.options.scrollSpeed];this.lastScrolled=new Date;this.scrollInterval=setInterval(this.scroll.bind(this),10)}},scroll:function(){var a=new Date,b=a-this.lastScrolled;
this.lastScrolled=a;if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll)){if(this.scrollSpeed[0]||this.scrollSpeed[1]){a=b/1E3;this.options.scroll.scrollTo(left+a*this.scrollSpeed[0],top+a*this.scrollSpeed[1])}}else{this.options.scroll.scrollLeft+=this.scrollSpeed[0]*b/1E3;this.options.scroll.scrollTop+=this.scrollSpeed[1]*b/1E3}Position.prepare();Droppables.show(Draggables._lastPointer,this.element);Draggables.notify("onDrag",this);if(this._isScrollChild){Draggables._lastScrollPointer=
Draggables._lastScrollPointer||$A(Draggables._lastPointer);Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*b/1E3;Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*b/1E3;if(Draggables._lastScrollPointer[0]<0)Draggables._lastScrollPointer[0]=0;if(Draggables._lastScrollPointer[1]<0)Draggables._lastScrollPointer[1]=0;this.draw(Draggables._lastScrollPointer)}this.options.change&&this.options.change(this)},_getWindowScroll:function(a){var b,d,f;with(a.document){if(a.document.documentElement&&
documentElement.scrollTop){b=documentElement.scrollTop;d=documentElement.scrollLeft}else if(a.document.body){b=body.scrollTop;d=body.scrollLeft}if(a.innerWidth){f=a.innerWidth;a=a.innerHeight}else if(a.document.documentElement&&documentElement.clientWidth){f=documentElement.clientWidth;a=documentElement.clientHeight}else{f=body.offsetWidth;a=body.offsetHeight}}return{top:b,left:d,width:f,height:a}}});Draggable._dragging={};
var SortableObserver=Class.create({initialize:function(a,b){this.element=$(a);this.observer=b;this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark();this.lastValue!=Sortable.serialize(this.element)&&this.observer(this.element)}}),Sortable={SERIALIZE_RULE:/^[^_\-](?:[A-Za-z0-9\-\_]*)[_](.*)$/,sortables:{},_findRootElement:function(a){for(;a.tagName.toUpperCase()!="BODY";){if(a.id&&Sortable.sortables[a.id])return a;
a=a.parentNode}},options:function(a){if(a=Sortable._findRootElement($(a)))return Sortable.sortables[a.id]},destroy:function(a){a=$(a);if(a=Sortable.sortables[a.id]){Draggables.removeObserver(a.element);a.droppables.each(function(b){Droppables.remove(b)});a.draggables.invoke("destroy");delete Sortable.sortables[a.element.id]}},create:function(a,b){a=$(a);var d=Object.extend({element:a,tag:"li",dropOnEmpty:false,tree:false,treeTag:"ul",overlap:"vertical",constraint:"vertical",containment:a,handle:false,
only:false,delay:0,hoverclass:null,ghosting:false,quiet:false,scroll:false,scrollSensitivity:20,scrollSpeed:15,format:this.SERIALIZE_RULE,elements:false,handles:false,onChange:Prototype.emptyFunction,onUpdate:Prototype.emptyFunction},b||{});this.destroy(a);var f={revert:true,quiet:d.quiet,scroll:d.scroll,scrollSpeed:d.scrollSpeed,scrollSensitivity:d.scrollSensitivity,delay:d.delay,ghosting:d.ghosting,constraint:d.constraint,handle:d.handle};if(d.starteffect)f.starteffect=d.starteffect;if(d.reverteffect)f.reverteffect=
d.reverteffect;else if(d.ghosting)f.reverteffect=function(r){r.style.top=0;r.style.left=0};if(d.endeffect)f.endeffect=d.endeffect;if(d.zindex)f.zindex=d.zindex;var j={overlap:d.overlap,containment:d.containment,tree:d.tree,hoverclass:d.hoverclass,onHover:Sortable.onHover},n={onHover:Sortable.onEmptyHover,overlap:d.overlap,containment:d.containment,hoverclass:d.hoverclass};Element.cleanWhitespace(a);d.draggables=[];d.droppables=[];if(d.dropOnEmpty||d.tree){Droppables.add(a,n);d.droppables.push(a)}(d.elements||
this.findElements(a,d)||[]).each(function(r,x){x=d.handles?$(d.handles[x]):d.handle?$(r).select("."+d.handle)[0]:r;d.draggables.push(new Draggable(r,Object.extend(f,{handle:x})));Droppables.add(r,j);if(d.tree)r.treeNode=a;d.droppables.push(r)});if(d.tree)(Sortable.findTreeElements(a,d)||[]).each(function(r){Droppables.add(r,n);r.treeNode=a;d.droppables.push(r)});this.sortables[a.id]=d;Draggables.addObserver(new SortableObserver(a,d.onUpdate))},findElements:function(a,b){return Element.findChildren(a,
b.only,b.tree?true:false,b.tag)},findTreeElements:function(a,b){return Element.findChildren(a,b.only,b.tree?true:false,b.treeTag)},onHover:function(a,b,d){if(!Element.isParent(b,a))if(!(d>0.33&&d<0.66&&Sortable.options(b).tree))if(d>0.5){Sortable.mark(b,"before");if(b.previousSibling!=a){d=a.parentNode;a.style.visibility="hidden";b.parentNode.insertBefore(a,b);b.parentNode!=d&&Sortable.options(d).onChange(a);Sortable.options(b.parentNode).onChange(a)}}else{Sortable.mark(b,"after");var f=b.nextSibling||
null;if(f!=a){d=a.parentNode;a.style.visibility="hidden";b.parentNode.insertBefore(a,f);b.parentNode!=d&&Sortable.options(d).onChange(a);Sortable.options(b.parentNode).onChange(a)}}},onEmptyHover:function(a,b,d){var f=a.parentNode,j=Sortable.options(b);if(!Element.isParent(b,a)){var n=Sortable.findElements(b,{tag:j.tag,only:j.only}),r=null;if(n){var x=Element.offsetSize(b,j.overlap)*(1-d);for(d=0;d<n.length;d+=1)if(x-Element.offsetSize(n[d],j.overlap)>=0)x-=Element.offsetSize(n[d],j.overlap);else{r=
x-Element.offsetSize(n[d],j.overlap)/2>=0?d+1<n.length?n[d+1]:null:n[d];break}}b.insertBefore(a,r);Sortable.options(f).onChange(a);j.onChange(a)}},unmark:function(){Sortable._marker&&Sortable._marker.hide()},mark:function(a,b){var d=Sortable.options(a.parentNode);if(!(d&&!d.ghosting)){if(!Sortable._marker){Sortable._marker=($("dropmarker")||Element.extend(document.createElement("DIV"))).hide().addClassName("dropmarker").setStyle({position:"absolute"});document.getElementsByTagName("body").item(0).appendChild(Sortable._marker)}var f=
Position.cumulativeOffset(a);Sortable._marker.setStyle({left:f[0]+"px",top:f[1]+"px"});if(b=="after")d.overlap=="horizontal"?Sortable._marker.setStyle({left:f[0]+a.clientWidth+"px"}):Sortable._marker.setStyle({top:f[1]+a.clientHeight+"px"});Sortable._marker.show()}},_tree:function(a,b,d){for(var f=Sortable.findElements(a,b)||[],j=0;j<f.length;++j){var n=f[j].id.match(b.format);if(n){n={id:encodeURIComponent(n?n[1]:null),element:a,parent:d,children:[],position:d.children.length,container:$(f[j]).down(b.treeTag)};
n.container&&this._tree(n.container,b,n);d.children.push(n)}}return d},tree:function(a,b){a=$(a);var d=this.options(a);b=Object.extend({tag:d.tag,treeTag:d.treeTag,only:d.only,name:a.id,format:d.format},b||{});return Sortable._tree(a,b,{id:null,parent:null,children:[],container:a,position:0})},_constructIndex:function(a){var b="";do if(a.id)b="["+a.position+"]"+b;while((a=a.parent)!=null);return b},sequence:function(a,b){a=$(a);var d=Object.extend(this.options(a),b||{});return $(this.findElements(a,
d)||[]).map(function(f){return f.id.match(d.format)?f.id.match(d.format)[1]:""})},setSequence:function(a,b,d){a=$(a);var f=Object.extend(this.options(a),d||{}),j={};this.findElements(a,f).each(function(n){if(n.id.match(f.format))j[n.id.match(f.format)[1]]=[n,n.parentNode];n.parentNode.removeChild(n)});b.each(function(n){var r=j[n];if(r){r[1].appendChild(r[0]);delete j[n]}})},serialize:function(a,b){a=$(a);var d=Object.extend(Sortable.options(a),b||{}),f=encodeURIComponent(b&&b.name?b.name:a.id);return d.tree?
Sortable.tree(a,b).children.map(function(j){return[f+Sortable._constructIndex(j)+"[id]="+encodeURIComponent(j.id)].concat(j.children.map(arguments.callee))}).flatten().join("&"):Sortable.sequence(a,b).map(function(j){return f+"[]="+encodeURIComponent(j)}).join("&")}};Element.isParent=function(a,b){if(!a.parentNode||a==b)return false;if(a.parentNode==b)return true;return Element.isParent(a.parentNode,b)};
Element.findChildren=function(a,b,d,f){if(!a.hasChildNodes())return null;f=f.toUpperCase();if(b)b=[b].flatten();var j=[];$A(a.childNodes).each(function(n){if(n.tagName&&n.tagName.toUpperCase()==f&&(!b||Element.classNames(n).detect(function(r){return b.include(r)})))j.push(n);if(d)(n=Element.findChildren(n,b,d,f))&&j.push(n)});return j.length>0?j.flatten():[]};Element.offsetSize=function(a,b){return a["offset"+(b=="vertical"||b=="height"?"Height":"Width")]};FeedHandler=Class.create({_feedType:"self",_feedContainerName:"feed_items_container",_feedContainer:null,_feedItemIds:[],_offset:0,_pageSize:20,_morePath:null,_destroyPath:null,_blinking:false,initialize:function(a,b,d,f,j){this._feedType=a;this._feedContainerName=b;this._pageSize=d;this._morePath=f;this._destroyPath=j;this._self_disabling={};$(document).observe("click",this.clickHandler.bindAsEventListener(this))},setOffset:function(a){this._offset=a},addFeedItemIds:function(a){this._feedItemIds=
this._feedItemIds.concat(a||[])},updateFeedInfo:function(a,b){this.setOffset(a);this.addFeedItemIds(b);this.setFirstFeedItemClass()},container:function(){if(!this._feedContainer)this._feedContainer=$(this._feedContainerName);return this._feedContainer},indicator:function(){return this.container().select("#more_feed_items_indicator").first()},showMoreElement:function(){return this.container().select("#show_more_feed_items_label").first()},automaticallyFetchMore:function(){if(this._morePath.match(/mini_feed_items/)!=
null)$$(".mini_item").length<15&&this.requestNextPage();else $$(".feed_item").length<15&&this.requestNextPage()},setFirstFeedItemClass:function(){this.container().select(".first_feed_item").each(function(b){b.removeClassName("first_feed_item")});var a=this.container().select(".feed_item").first();a&&a.addClassName("first_feed_item")},insertMoreShoutComments:function(a){var b=a.message_id;if(a.new_url){$("show_more_comments_link_"+b).href=a.new_url;$("show_more_comments_link_"+b).show()}else $("show_more_comments_link_"+
b).hide();$("shout_indicator_"+b).hide();$("shout_short_comments_"+b).hide();$("shout_more_comments_"+b).insert({top:a.content})},requestNextPage:function(){var a=this.indicator(),b=this;if(!(!a||a.visible())){a.show();this.showMoreElement().hide();new Ajax.Request(this._morePath,{parameters:{feed_type:this._feedType,offset:this._offset,num:this._pageSize,excluded_ids:this._feedItemIds.join(","),excluded_followed_users:$$(".js_followed_username").map(function(d){return d.innerHTML}).uniq().join(","),
excluded_forum_users:$$(".js_forum_post_user").map(function(d){return d.innerHTML}).uniq().join(",")},method:"get",onSuccess:function(d){b.container().select("#additional_feed_items").first().remove();b.container().insert(d.responseText);b.setFirstFeedItemClass()},onFailure:function(){b.indicator().hide();b.showMoreElement().show()}})}},requestNextPageIfMoreItemsNeeded:function(){this.container().getHeight()<1500&&this.requestNextPage()},removeFeedItems:function(a){if(!(!(a instanceof Array)||a.length<=
0)){new Effect.DropOut("feed_item_"+a[0]);new Ajax.Request(this._destroyPath,{method:"post",parameters:{ids:a.join(","),context:this._feedType},onSuccess:function(){},onFailure:function(){}})}},unfollowUser:function(a,b){new Effect.DropOut("feed_item_"+b[0]);new Ajax.Request("/accounts/"+active_user.username()+"/friends/"+a+".json",{method:"put",parameters:{unfriend_from:"feed"},onSuccess:function(){},onFailure:function(){}})},blockGame:function(a,b,d){new Effect.DropOut("feed_item_"+d);new Ajax.Request("/games/"+
b+"/"+a+"/blocks",{method:"post",parameters:{user_game_permissions:{allow_something:false}},onSuccess:function(){},onFailure:function(){}})},isMiniFeed:function(){return this._morePath.match(/mini_feed_items/)!=null},feedItemElement:function(a){return this.isMiniFeed()?$("mini_item_"+a):$("feed_item_"+a)},observeUnlike:function(a){a=this.feedItemElement(a).down(".like_link");if(a!=null){a.observe("mouseenter",function(){this.down(".like_text").update("Unlike")});a.observe("mouseleave",function(){this.down(".like_text").update("Liked")})}},
likeFeedItem:function(a){var b=this;if(this._self_disabling[a]==null){this._self_disabling[a]=true;new Ajax.Request("/user_likes",{method:"post",parameters:{feed_item_id:a},onSuccess:function(d){if(b.isMiniFeed()){var f=$("mini_item_"+a);f.down(".like_link").removeClassName("feed_like");f.down(".like_link").addClassName("feed_unlike")}else{f=$("feed_item_"+a);f.down(".like_text").update("Liked")}f.down(".like_link").onclick=function(){feedHandler.unlikeFeedItem(a);return false};b._self_disabling[a]=
null;b.observeUnlike(a);f.down(".like_count").update("("+d.responseJSON.count+")")},onFailure:function(){b._self_disabling[a]=null}})}},unlikeFeedItem:function(a){var b=this;if(this._self_disabling[a]==null){this._self_disabling[a]=true;new Ajax.Request("/user_likes",{method:"delete",parameters:{feed_item_id:a},onSuccess:function(d){var f=b.isMiniFeed()?$("mini_item_"+a):$("feed_item_"+a);f.down(".like_link").onclick=function(){feedHandler.likeFeedItem(a);return false};b._self_disabling[a]=null;f.down(".like_text").update("Like");
f.down(".like_link").stopObserving("mouseenter");f.down(".like_link").stopObserving("mouseleave");if(b.isMiniFeed()){f.down(".like_link").removeClassName("feed_unlike");f.down(".like_link").addClassName("feed_like")}else f.down(".like_count").update("("+d.responseJSON.count+")")},onFailure:function(){b._self_disabling[a]=null}})}},clickHandler:function(a){var b=a.element();if(this.isMiniFeed()){if(a=b.hasClassName("mini_item")?b:b.up(".mini_item"))if(a=a.id.sub("mini_item_","")){b=(b=Cookie.get("feed_item_clicks"))?
b.evalJSON():{};b.mini=b.mini||[];b.mini=b.mini.concat([a]);Cookie.set("feed_item_clicks",Object.toJSON(b))}}else if(a=b.hasClassName("feed_item")?b:b.up(".feed_item")){var d=b.up("a");if("A"==b.nodeName||d){b="A"==b.nodeName?b.href:d.href;a=a.id.sub("feed_item_","");if(b&&!b.match(/#$/)){b=(b=Cookie.get("feed_item_clicks"))?b.evalJSON():{};b[this._feedType]=b[this._feedType]||[];b[this._feedType]=b[this._feedType].concat([a]);Cookie.set("feed_item_clicks",Object.toJSON(b))}}}}});function FlashMessages(a){this.initialize(a)}FlashMessages.DISPLAY_TEMPLATE=new Template('<div class="sitemessage">#{message}</div>');FlashMessages.COOKIE_NAME="kong_flash_messages";
FlashMessages.prototype={initialize:function(){this._data={};if(Cookie.accept()){this._messages_node=$("global");this._insertMessages()}},data:function(){this._getDataFromCookie();return this._data},_getDataFromCookie:function(){var a=Cookie.get(FlashMessages.COOKIE_NAME);if(a){a=a.evalJSON();if(this._data)Object.extend(this._data,a);else this._data=a}this._clearCookie()},_insertMessages:function(){var a=this.data().messages;if(this._messages_node&&a){this._messages_node.innerHTML=a.map(function(d){return FlashMessages.DISPLAY_TEMPLATE.evaluate({message:d})}).join();
try{active_user.showingBlueBar()}catch(b){}}},_clearCookie:function(){Cookie.erase(FlashMessages.COOKIE_NAME,"/")}};function FollowToggleButton(a){this.initialize(a)}FollowToggleButton.prototype={initialize:function(a){this._indicatorTag=a},mouseOver:function(a){a=Event.findElement(a);a.removeClassName("btn_alt");a.update("Unfriend")},mouseOut:function(a){a=Event.findElement(a);a.addClassName("btn_alt");a.update("Friend")},toggle:function(a){a=Event.findElement(a);a.update(this._indicatorTag);a.onmouseover="";a.onmouseout=""}};(function(a){function b(){var D=false;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval");D=true;window.localStorage.removeItem("_tmptest")}catch(P){}if(D)try{if(window.localStorage){x=window.localStorage;M="localStorage"}}catch(k){}else if("globalStorage"in window)try{if(window.globalStorage){x=window.globalStorage[window.location.hostname];M="globalStorage"}}catch(p){}else{y=document.createElement("link");if(y.addBehavior){y.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(y);
y.load("jStorage");D="{}";try{D=y.getAttribute("jStorage")}catch(t){}x.jStorage=D;M="userDataBehavior"}else{y=null;return}}d();n()}function d(){if(x.jStorage)try{r=H(String(x.jStorage))}catch(D){x.jStorage="{}"}else x.jStorage="{}";O=x.jStorage?String(x.jStorage).length:0}function f(){try{x.jStorage=Y(r);if(y){y.setAttribute("jStorage",x.jStorage);y.save("jStorage")}O=x.jStorage?String(x.jStorage).length:0}catch(D){}}function j(D){if(!D||typeof D!="string"&&typeof D!="number")throw new TypeError("Key name must be string or numeric");
if(D=="__jstorage_meta")throw new TypeError("Reserved key name");return true}function n(){var D,P,k,p=Infinity,t=false;clearTimeout(da);if(!(!r.__jstorage_meta||typeof r.__jstorage_meta.TTL!="object")){D=+new Date;k=r.__jstorage_meta.TTL;for(P in k)if(k.hasOwnProperty(P))if(k[P]<=D){delete k[P];delete r[P];t=true}else if(k[P]<p)p=k[P];if(p!=Infinity)da=setTimeout(n,p-D);t&&f()}}if(!a||!(a.toJSON||Object.toJSON||window.JSON))throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");
var r={},x={jStorage:"{}"},y=null,O=0,Y=a.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),H=a.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(D){return String(D).evalJSON()},M=false,da,ka={isXML:function(D){return(D=(D?D.ownerDocument||D:0).documentElement)?D.nodeName!=="HTML":false},encode:function(D){if(!this.isXML(D))return false;try{return(new XMLSerializer).serializeToString(D)}catch(P){try{return D.xml}catch(k){}}return false},decode:function(D){var P="DOMParser"in
window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(k){var p=new ActiveXObject("Microsoft.XMLDOM");p.async="false";p.loadXML(k);return p};if(!P)return false;D=P.call("DOMParser"in window&&new DOMParser||window,D,"text/xml");return this.isXML(D)?D:false}};a.jStorage={version:"0.1.7.0",set:function(D,P,k){j(D);k=k||{};if(ka.isXML(P))P={_is_xml:true,xml:ka.encode(P)};else if(typeof P=="function")P=null;else if(P&&typeof P=="object")P=H(Y(P));r[D]=P;isNaN(k.TTL)?f():this.setTTL(D,
k.TTL);return P},get:function(D,P){j(D);if(D in r)return r[D]&&typeof r[D]=="object"&&r[D]._is_xml&&r[D]._is_xml?ka.decode(r[D].xml):r[D];return typeof P=="undefined"?null:P},deleteKey:function(D){j(D);if(D in r){delete r[D];r.__jstorage_meta&&typeof r.__jstorage_meta.TTL=="object"&&D in r.__jstorage_meta.TTL&&delete r.__jstorage_meta.TTL[D];f();return true}return false},setTTL:function(D,P){var k=+new Date;j(D);P=Number(P)||0;if(D in r){if(!r.__jstorage_meta)r.__jstorage_meta={};if(!r.__jstorage_meta.TTL)r.__jstorage_meta.TTL=
{};if(P>0)r.__jstorage_meta.TTL[D]=k+P;else delete r.__jstorage_meta.TTL[D];f();n();return true}return false},flush:function(){r={};f();return true},storageObj:function(){function D(){}D.prototype=r;return new D},index:function(){var D=[],P;for(P in r)r.hasOwnProperty(P)&&P!="__jstorage_meta"&&D.push(P);return D},storageSize:function(){return O},currentBackend:function(){return M},storageAvailable:function(){return!!M},reInit:function(){var D;if(y&&y.addBehavior){D=document.createElement("link");
y.parentNode.replaceChild(D,y);y=D;y.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(y);y.load("jStorage");D="{}";try{D=y.getAttribute("jStorage")}catch(P){}x.jStorage=D;M="userDataBehavior"}d()}};b()})($||window.jQuery);var KongAds=function(){function a(j){return j.replace(/[^a-z0-9-+_]+/gi,"_").substr(0,10)}function b(j,n){var r=[],x=[],y=a(j);if(n instanceof Array){for(j=n.length;j--;)x[j]=a(n[j]);r.push([y,x])}else r.push([y,a(n)]);return r}function d(j){var n=[];if(1==j.length)for(var r in j[0])n=n.concat(b(r,j[0][r]));else if(2==j.length)n=n.concat(b(j[0],j[1]));return n}function f(j){this.initialize(j)}f.prototype={initialize:function(j){this._network_id=j.networkId;this._publisher_id=j.publisherId;this._rendering_mode=
j.renderingMode;this._slots={}},defineAd:function(j,n,r){var x=this,y="/"+this._network_id+"/"+this._publisher_id+"/"+j;googletag.cmd.push(function(){x._slots[j]=googletag.defineSlot(y,[n,r],j+"-ad-slot").addService(googletag.pubads())});return this},setTargeting:function(){var j=arguments;googletag.cmd.push(function(){for(var n=googletag.pubads(),r=d(j),x=r.length;x--;)n.setTargeting(r[x][0],r[x][1])});return this},setGenderTargeting:function(j){googletag.cmd.push(function(){googletag.pubads().set("demographic_gender",
j)});return this},setAgeTargeting:function(j){googletag.cmd.push(function(){googletag.pubads().set("demographic_age",j)});return this},displayAd:function(j){googletag.cmd.push(function(){googletag.display(j+"-ad-slot")});return this},requestAds:function(){if(document.location.search.match(/username=/)||document.referrer.match(/username=/))return this;googletag.cmd.push(function(){var j=googletag.pubads();j[renderingMode]();j.enableSingleRequest();googletag.enableServices()});return this},getSlot:function(j){return this._slots[j]},
onDealspotOfferUnavailable:function(){$("dealspot_banner_holder").remove();$("game_leaderboad_banner_holder").show()},onDealspotOfferAvailable:function(){$("game_leaderboad_banner_holder").remove();$("dealspot_target").update($("dealspot_banner_holder").addClassName("horizontal_ad").setStyle({top:"",left:""}))},onDealspotOpen:function(){$("game").setStyle({top:"-10000px",left:"-10000px"})},onDealspotClose:function(){$("game").setStyle({top:"",left:""})}};return{KongDFPAds:f}}(),KongDFPAds=KongAds.KongDFPAds;var NativeApp=function(){var a={};a.isInstalled=function(b){return a.isNativeApp()?kongNativeApp.isInstalled(b):false};a.isNativeApp=function(){return typeof kongNativeApp!="undefined"};a.downloadGame=function(b){if(a.isNativeApp())window.open(b);else window.location=b};a.launchGame=function(b){a.isNativeApp()&&kongNativeApp.sendMessage(JSON.stringify({opcode:"launch_game",params:{game_id:b}}))};a.browseGames=function(){window.location=a.isNativeApp()?"/games/index_native?installed="+kongNativeApp.getInstalledGameIds():
"/games/index_native"};return a}();var PaymentHelpText={showHelpText:function(a,b){var d=$("help_wrapper");b=$(b);if(!(a==""||a==null))if(b.className!="error_msg"){b.appendChild(d);$("help_text").innerHTML=a;d.show()}},hideHelpText:function(){$("help_wrapper").hide()}};function PostMessageHandler(a){function b(){return r}function d(x){var y;r.find(function(Y){return y=Y(x)});if(y)y();else try{bumper.embedAd(x)}catch(O){}}function f(x){d.defer(x.evalJSON())}function j(x){r.push(x)}function n(x){if(x.origin==window.location.protocol+"//"+window.location.host)try{f(x.data)}catch(y){}}var r=[];window.attachEvent?window.attachEvent("onmessage",n):window.addEventListener("message",n,false);return{addCallback:j,getHandlers:b,runCallbackForUnparsedPayload:f}};TimeInWordsHelper={distanceInWords:function(a,b,d){a=a.getTime();b=b.getTime();b=Math.round(Math.abs(a-b)/1E3);a=Math.round(b/60);if(a<=1){if(!d)return 0==a?"less than a minute":"1 minute";if(b<5)return"less than 5 seconds";if(b<10)return"less than 10 seconds";if(b<20)return"less than 20 seconds";if(b<40)return"half a minute";if(b<60)return"less than a minute";return"1 minute"}if(a<45)return a+" minutes";if(a<90)return"1 hour";if(a<1440)return Math.round(a/60)+" hours";if(a<2880)return"1 day";if(a<
43200)return Math.round(a/1440)+" days";if(a<86400)return"about 1 month";if(a<525600)return Math.round(a/43200)+" months";if(a<1051200)return"about 1 year";return"over "+Math.round(a/525600)+" years"},distanceInWordsFromNow:function(a,b){return TimeInWordsHelper.distanceInWords(new Date,a,b)}};
