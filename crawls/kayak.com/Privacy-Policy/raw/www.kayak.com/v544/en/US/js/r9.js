/* generated Fri Feb 22 17:52:27 EST 2013 */

(function(c){c.unserialize=function(m){var p=new b();if(!m||typeof m!="string"){return p.toMap()}if(m.indexOf("?")>-1){m=m.split("?")[1]}var k=m.split("&");for(var j=0;j<k.length;j++){var h=k[j].split("=");if(h.length!=2){continue}var o=c.trim(h[0]);var l=o.indexOf("[");if(l==0){continue}var n=c.trim(h[1]);if(l>-1){var g=c.trim(o.substr(0,l));var q=o.substring(l).match(/\[.*?\]/g);if(p.get(g)&&typeof p.get(g)["toMap"]=="function"){p.add(g,f(p.get(g),q,d(n)))}else{p.add(g,f(new b(),q,d(n)))}continue}p.add(o,d(n))}return p.toMap()};var b=function(){this.indexedArray=[];this.associativeArray={};this.lengthIndexed=0;this.lengthAssociative=0};c.extend(b.prototype,{indexedArray:[],associativeArray:{},lengthIndexed:0,lengthAssociative:0,add:function(h,j){if(h==null&&j==null){return this.length()}if(typeof j=="undefined"){this.indexedArray[this.lengthIndexed]=h;this.lengthIndexed++;return this.length()}if(/^\d+$/.test(h)){var g=parseInt(h,10);this.indexedArray[h]=j;this.lengthIndexed=(g>this.lengthIndexed)?g:this.lengthIndexed+1;return this.length()}this.associativeArray[h]=j;this.lengthAssociative++;return this.length()},get:function(g){if(/^\d+$/.test(g)){return this.indexedArray[g]}return this.associativeArray[g]},forEach:function(g){c.each(c.extend({},this.indexedArray,this.associativeArray),g)},length:function(){return this.lengthIndexed+this.lengthAssociative},toMap:function(){if(this.lengthIndexed&&this.lengthAssociative){return c.extend(a(this),e(this))}if(this.lengthIndexed){return a(this)}if(this.lengthAssociative){return e(this)}return{}}});function d(g){return decodeURIComponent(g).replace(/\+/g," ")}function f(k,h,j){if(h!=null&&h.length){var g=c.trim(h.shift().replace(/[\[\]]/g,""));if(h.length){if(g){k.add(g,f(k.get(g)||new b(),h,j))}else{k.add(f(new b(),h,j))}}else{if(g){k.add(g,d(j))}else{k.add(d(j))}}}else{k.add(j)}return k}function a(g){var h=[];for(var j=0;j<g.lengthIndexed;j++){if(typeof g.indexedArray[j]["toMap"]=="function"){h[j]=g.indexedArray[j].toMap();continue}h[j]=g.indexedArray[j]}return h}function e(g){var h={};c.each(g.associativeArray,function(j,k){if(typeof k.toMap=="function"){h[j]=k.toMap();return}h[j]=k});return h}})(jq||jQuery);(function(a){a.widget("ui.rangeSlider",a.extend({},a.ui.slider.prototype,{_create:function(){this.options.range=true;a.ui.slider.prototype._create.apply(this,arguments);this.element.addClass("ui-range-slider-holder")},destroy:function(){this.element.removeClass("ui-range-slider-holder");a.ui.slider.prototype.destroy.apply(this,arguments)}}))})(jq);(function(l){var k="ui-dialog-content",e="ui-dialog-no-title",m="ui-popover-arrow",h="ui-popover",q="ui-popover-left",p="ui-popover-right",f="ui-popover-top",b="ui-popover-bottom-center",a="ui-popover-top-center",d="ui-tooltip",j="ui-tooltip-popover",o=null,c="r9tt-";function n(){if(o!==null){clearInterval(o)}}function g(){o=setTimeout(jq.ui.r9popover.close,200)}l.widget("ui.r9dialog",l.ui.dialog,{options:{autoFocus:true,position:["center",100],positionOffsetY:0,modal:true,minHeight:50,resizable:false,width:"auto",showCloseX:true,title:null,hideTitle:false,isFixed:false},_autoFocus:function(){if(this.options.autoFocus){l.ui.dialog.prototype._autoFocus.call(this)}else{this.uiDialog.focus()}},_create:function(){l.ui.dialog.prototype._create.apply(this);this.uiDialog.wrapInner('<div class="ui-dialog-liner" />');if(this.options.isFixed){this.uiDialog.css("position","fixed");this._position(this.options.position)}if(this.options.hideTitle){this.uiDialog.addClass(e)}},open:function(){if(this._isOpen){return}l.ui.dialog.prototype.open.apply(this);if(!this.options.showCloseX){this.uiDialog.find(".ui-dialog-titlebar-close").hide()}else{jq(".ui-widget-overlay").click(function(){jq("."+k).r9dialog("close")})}return this}});l.widget("ui.r9popover",l.ui.r9dialog,{options:{at:"auto",draggable:false,position:"body",clazz:"",multiPopovers:false},_create:function(){var r={right:p,top:f,"bottom center":b,"top center":a};if(!this.options.multiPopovers){this._destroyAll()}var s=l.ui.dialog.overlay.oldInstances.length;if(s){l.ui.dialog.overlay.oldInstances[s-1].height(l(document).height())}l.ui.r9dialog.prototype._create.apply(this);this.uiDialog.addClass(h).addClass(r[this.options.at]||q);if(this.options.clazz!=""){this.uiDialog.addClass(this.options.clazz)}this.uiPopoverArrow=jq("<div/>",{"class":m}).insertAfter(this.element);if(this.options.title.length===0){this.uiDialogTitlebar.find(".ui-dialog-title").remove()}},_destroyAll:function(){l.ui.r9popover.destroy()},_onOverlayClick:function(){jq("."+k).r9popover("close")},_position:function(r){isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show()}var s=jq.isArray(r);this.uiDialog.css({left:0,top:0}).position({my:((this.options.at=="right")?"right":"left")+" top",at:this._positionAt(),offset:this._positionOffset(),of:s?jq.Event("click",{pageX:r[0],pageY:r[1]}):jq(r||l.ui.r9popover.prototype.options.position),collision:this.options.at=="auto"?"flip":"none"});if(this.options.at=="auto"&&!s&&(jq(r||l.ui.r9popover.prototype.options.position).offset().left>this.uiDialog.offset().left)){this.uiDialog.removeClass(q).addClass(p)}if(!isVisible){this.uiDialog.hide()}},_positionAt:function(){var r=this.options.at;if(r=="bottom center"){return"top center"}else{if(r=="top center"){return"bottom center"}else{if(r=="top"){return"left bottom"}else{return((r=="right")?"left":"right")+" center"}}}},_positionOffset:function(){if(this.options.at=="bottom center"){return"-"+(this.uiDialog.width()/2)+" -"+(this.uiPopoverArrow.height()+this.uiDialog.height()+this.options.positionOffsetY)}if(this.options.at=="top center"){return"-"+(this.uiDialog.width()/2)+" "+(this.uiPopoverArrow.height()+this.options.positionOffsetY)}else{if(this.options.at=="top"){return"-"+(this.uiPopoverArrow.width()/2)+" "+this.uiPopoverArrow.height()}else{return(this.options.at=="right"?"-":"")+this.uiPopoverArrow.width()+" -"+(this.uiPopoverArrow.height()/2+this.uiPopoverArrow.position().top)}}},open:function(){if(this._isOpen){return}l.ui.dialog.prototype.open.apply(this);this.element.show();if(this.options.modal){jq(".ui-widget-overlay").addClass("ui-popover-overlay").click(this._onOverlayClick)}return this}});l.widget("ui.r9tooltip",{timer:null,_create:function(){var r=this;this.element.hover(function(){n();var s={modal:false,position:r.element,clazz:j,width:r.options.width,hideTitle:r.options.hideTitle,at:r.options.at};var t=jq("#"+c+r.options.ttid);var u=r.options.content;if(u.length==0&&r.options.textAttribute.length>0){u=r.element.attr(r.options.textAttribute).split("|")[1]}if(r.options.ttid.length>0&&t.size()>0){if(t.hasClass(h)){t.r9popover("open")}else{t.r9popover(s);t.show();t.parent().parent().hover(n,g)}}else{var v=r.options.title;if(v.length==0&&r.options.textAttribute.length>0){v=r.element.attr(r.options.textAttribute).split("|")[0]}var w={title:v,width:r.options.width};if(r.options.ttid.length>0){w.id=c+r.options.ttid}jq("<div/>",w).append(u).addClass(r.options.ttclass).appendTo("body").r9popover(s).parent().parent().hover(n,g)}r.options.callback()},g)},options:{title:"",textAttribute:"",content:"",ttclass:"",ttid:"",width:"auto",hideTitle:false,at:"auto",callback:function(){}}});l.ui.r9popover.destroy=function(){l.ui.r9popover.get().r9popover("destroy")};l.ui.r9popover.get=function(){return l("."+h).find("."+k)};l.ui.r9tooltip.destroy=function(){l("."+j).find("."+k).r9popover("destroy")};l.ui.r9popover.close=function(){l.ui.r9popover.get().r9popover("close")};l.widget("ui.r9LinkedInput",{options:{linkclass:"",linktooltip:"",selectOnOpen:false,click:l.noop,change:l.noop,autoSize:true},_create:function(){if(this.element.prop("tagName")=="SELECT"||this.element.prop("tagName")=="INPUT"){var r=this;var s=this.link=jq("<a id='"+this.element.attr("id")+"-link' title='"+this.options.linktooltip+"' class='actionlink linkFromInput "+((this.element.prop("tagName")=="SELECT")?"selectLinkFromInput ":"")+this.options.linkclass+"' href='javascript:void(0)'>"+jq("<div/>").text(this.getText()).html()+"</a>").insertAfter(this.element.hide());s.bind("click",function(t){if(r.options.autoSize){r.element.width(jq(this).outerWidth())}s.hide();r.element.show();if(r.options.selectOnOpen){r.element.select()}r.options.click()});this.element.bind("change blur",function(u){var t=true;if(r.options.change.call(this,u)){t=false}if(t){s.text(r.getText()).show();if(r.options.autoSize){r.element.width(s.width())}r.element.hide()}else{if(r.options.selectOnOpen){r.element.select()}}})}},getText:function(){if(this.element.prop("tagName")=="SELECT"){return this.element.children(":selected").text()}else{return this.element.val()}},_destroy:function(){this.link.remove();this.element.show()}})})(jq);(function(){jq.fn.hintInputBox=function(a){var b={message:"",blurClass:"blur"};var a=jq.extend(b,a);return this.each(function(){var d=jq(this);var e=jq(this.form);var f=jq(window);function c(){if(d.val()===a.message&&d.hasClass(a.blurClass)){d.val("").removeClass(a.blurClass)}}d.blur(function(){if(this.value===""){d.addClass(a.blurClass).val(a.message)}}).focus(c).blur();e.submit(c);f.unload(c)})}})();(function(a){a.ellipsisTooltip=function(b){this.init(b||{});return this};a.extend(a.ellipsisTooltip,{checkIfPossible:function(){if(a.fn.textOverflow==undefined||a.fn.tipTip==undefined){return false}return true},prototype:{settings:{activation:"hover",position:"top",edgeOffset:3,delay:0,fadeIn:200,fadeOut:200,content:"",ellipseString:"&#x2026;"},init:function(b){this.settings=a.extend({},this.settings,b)},processNode:function(b){b=a(b);var d=a.support.textOverflow?b.width():null;var c=b.text();if(a.support.textOverflow){if(this.getTextWidth(b)<d+1){return}}else{b.textOverflow(this.settings.ellipseString);if(!b.text().match(/âŠ$/)){return}}b.tipTip(a.extend(this.settings,{content:c}))},getTextWidth:function(c){var d=c.clone();d.css({width:"auto",display:"none"});d.appendTo(c.parent());var b=d.width();d.remove();return b}}});a.fn.ellipsisTooltip=function(b){if(a.ellipsisTooltip.checkIfPossible()){return this.each(function(){var c=new a.ellipsisTooltip(b);c.processNode(this)})}return this}})(jq||jQuery);(function(a){a.emailValidator=function(b){this.init(b||{});return this};a.extend(a.emailValidator,{prototype:{settings:{activation:"blur",validateInvalid:true,warnTypos:true,boldSuggestions:true},init:function(b){this.settings=a.extend({},this.settings,b)},registerEvents:function(c){var b=this;var c=a(c);if(!c.data("emailValidatorInit")){c.bind(b.settings.activation,function(){b.checkEmail(this)});c.change(function(){c.data("emailValidatorWarned",false)});c.data("emailValidatorInit",true)}},checkEmail:function(c){var b=this;var e=jq(c);if(e.data("emailValidatorWarned")){return}var d="email="+encodeURIComponent(e.val());jq.getJSON("/k/run/spellcheckemail",d,function(f,g){if((!f.validAddress&&b.settings.validateInvalid)||(f.warnTypo&&b.settings.warnTypos)){b.showErrorMessage(c,f.errorMessage,f.errorTitle)}else{jq("#emailValidatorWarnBox").r9popover("destroy").remove()}});e.data("emailValidatorWarned",true)},showErrorMessage:function(c,b,d){jq("<div title='"+d+"' id='emailValidatorWarnBox' class='emailValidatorWarn'>"+b+"</div>").r9popover({autoFocus:false,position:jq(c),width:250,modal:false,minHeight:130});if(this.settings.boldSuggestions){jq(".emailValidatorWarn span").css("font-weight","bold")}}}});a.fn.emailValidator=function(b){return this.each(function(){var c=new a.emailValidator(b);c.registerEvents(this)});return this}})(jq);var R9={extend:function(){var d=Array.prototype.slice.call(arguments);if(d.length){var b=R9;if(typeof d[0]=="string"){var f=d.shift();if(!d.length){return R9}var c=f.split(".");for(var e=0;e<c.length;e++){b[c[e]]=b[c[e]]||{};b=b[c[e]]}}var a=false;if(typeof d[0]=="boolean"){a=d.shift()}d.unshift(b);if(a){d.unshift(true)}jq.extend.apply(jq,d)}return R9}};(function(e){var f={};var a={};var c={};var d=null;var b=0;function h(k){if(!k){var j=(++b);return f[j]==null?j:h()}if(f[k]!=null){R9.utils.log("Duplicate instance creation was attempted. ID -> ",k);var j=(++b);return f[j]==null?j:h()}return k}R9.extend({ViewState:function(k,j){this.instanceId=h(k);this.setOptions(j);this.lastURLViewState=this.options.currentUrlState;f[this.instanceId]=this}});R9.extend("ViewState",{getInstance:function(m,j){if((!m&&!j)||(typeof m=="object"&&!j)){d=d||h()}var l=j;var k=d||m;if(d!=null){l=m}if(f[k]==null){f[k]=new R9.ViewState(k,l||{})}else{if(l!=null){f[k].setOptions(l)}}return f[k]},getStateString:function(j){return R9.ViewState.getInstance(j).getStateString()},saveState:function(k,j){return R9.ViewState.getInstance(j).saveState(false,k)},getUrlStateString:function(j){return this.getInstance(j).getUrlStateString()},isPageReloadState:function(){return !window.samepageresults}});R9.extend("ViewState.prototype",{instanceId:null,lastURLViewState:"",options:{currentUrlState:"",stateDelimiter:";",vertical:null,searchBaseUrl:null,urlStateRequestKey:"urlViewState",saving:{url:"/s/sparkle",searchIdKey:"searchid",searchType:"type",requestType:"POST",dataType:"json",actionKey:"action",actionValue:"viewState",ignoreWindowScrollPositionOnce:false,requestKey:"viewState",resetValue:"RESET"},viewStatesKeys:{windowScroll:"ws",clickedResultIdListKey:"t",lastClickedResultIdKey:"lt",hotelDetailsOpenedIndex:"hdoix",hotelDetailsOpenedId:"hdoid",hotelDetailsOpenedTab:"hdot",hotelMiniDetailsOpenedId:"hmdoid",hotelMiniDetailsOpenedTab:"hmdot",hotelMiniDetailsOpenedIdPage:"hmdoip",showLayoverFilter:"lay",resultPageNumber:"pn",showMatrix:"mtx",showPlusMinusThree:"fflx",mapViewPortCenter:"mvpc",mapZoomLevel:"mzl",landingTimeSliders:"lts",flightDetailsOpenedIndexes:"fodi",carDetailsOpenedIndexes:"codi",hotelMapMiniDetailsId:"hmmd",multiCityFlightFilterLeg:"mcleg"},urlViewStateKeys:{resultViewMode:"vw",mapTypeId:"mtid"}},setOptions:function(j){this.options=e.extend(true,{},this.options,j||{})},add:function(j,k){if(a[this.instanceId]==null){a[this.instanceId]={}}if(j){a[this.instanceId][j]=k}else{R9.utils.log("State name cannot be empty: ",j)}return this},addUrlState:function(j,k){if(c[this.instanceId]==null){c[this.instanceId]={}}if(j){c[this.instanceId][j]=k}else{R9.utils.log("State name cannot be empty: ",j)}return this},get:function(j){if(j){if(a[this.instanceId]!=null&&a[this.instanceId][j]!=null){return a[this.instanceId][j]}if(c[this.instanceId]!=null&&c[this.instanceId][j]!=null){return c[this.instanceId][j]}}return null},remove:function(j){if(j&&a[this.instanceId]!=null&&a[this.instanceId][j]!=null){delete a[this.instanceId][j]}if(j&&c[this.instanceId]!=null&&c[this.instanceId][j]!=null){delete c[this.instanceId][j]}return this},restore:function(j){try{if(typeof j=="string"){j=e.parseJSON(j)}if(typeof a[this.instanceId]=="object"){e.extend(a[this.instanceId],j)}else{a[this.instanceId]=j}}catch(k){R9.utils.log("Failed to parse JSON string: ",k)}return this},restoreUrlStates:function(j){try{if(typeof j=="string"){j=e.parseJSON(j)}c[this.instanceId]=j}catch(k){R9.utils.log("Failed to parse JSON string: ",k)}return this},reset:function(){a[this.instanceId]=null;return this},getStateString:function(){this.refreshRequiredViewStates();var j=e.extend({},c[this.instanceId]||{},a[this.instanceId]||{});return g.stringify(j)},getUrlStateString:function(){return this.options.currentUrlState},saveState:function(k,m){var l={};l[this.options.saving.actionKey]=this.options.saving.actionValue;l[this.options.saving.searchIdKey]=window.SearchID;l[this.options.saving.searchType]=R9.globals.vertical;l[this.options.saving.requestKey]=this.getStateString();var j=this;e.ajax(this.options.saving.url,{type:this.options.saving.requestType,dataType:this.options.saving.dataType,data:l,success:function(n){if(n&&parseInt(n.status,10)>0){j.restoreUrlStates(n.stateValues);j.updateUrlState(n.state)}if(k||parseInt(n.reset,10)==1){j.reset()}if(typeof m=="function"){m()}},error:function(){}});return this},updateUrlState:function(m){if(!this.options.vertical||!this.options.searchBaseUrl||this.lastURLViewState==m||window.loadingResults){return}this.options.currentUrlState=this.lastURLViewState=m;var l=this.options.searchBaseUrl;var n=this.getUrlStateString();if(n){l+=this.options.stateDelimiter+n}var k=window.location.pathname.indexOf("/"+this.options.vertical);var j=window.location.hash.indexOf("/"+this.options.vertical);if(k<0&&j<0){return}if(R9.ViewState.isPageReloadState()){window.location.pathname="/"+this.options.vertical+"/"+l;return}if(j>=0&&k<0){l=this.options.vertical+"/"+l}e.address.value(l);return this},refreshRequiredViewStates:function(){if(this.options.saving.ignoreWindowScrollPositionOnce){this.options.saving.ignoreWindowScrollPositionOnce=false;return this}this.add(this.options.viewStatesKeys.windowScroll,[this.getScrollPositionHorizontalWindow(),this.getScrollPositionVerticalWindow()]);return this},getScrollPositionHorizontal:function(k){var j=e(k);if(!j.length){return 0}return e(k).get(0).scrollLeft},getScrollPositionVertical:function(k){var j=e(k);if(!j.length){return 0}return e(k).get(0).scrollTop},getScrollPositionHorizontalWindow:function(){if(!e.support.tbody){return document.documentElement.scrollLeft}return window.scrollX||window.pageXOffset||0},getScrollPositionVerticalWindow:function(){if(!e.support.tbody){return document.documentElement.scrollTop}return window.scrollY||window.pageYOffset||0},addResultClicked:function(l){value=this.getNormalizedIntegerValue(l);if(value>=0){this.add(this.options.viewStatesKeys.lastClickedResultIdKey,value);var k=e.isArray(this.get(this.options.viewStatesKeys.clickedResultIdListKey))?this.get(this.options.viewStatesKeys.clickedResultIdListKey):[];if(e.inArray(value,k)<0){k.push(value)}this.add(this.options.viewStatesKeys.clickedResultIdListKey,k);var j=e("#tbd"+l);j.parent().children(".lastclicked").removeClass("lastclicked");j.addClass("clicked lastclicked")}return this},addHotelDetailsOpenedValues:function(l,k,j){l=this.getNormalizedIntegerValue(l);this.addResultClicked(l);this.add(this.options.viewStatesKeys.hotelDetailsOpenedIndex,l);k=this.getNormalizedIntegerValue(k);if(k>=0){this.add(this.options.viewStatesKeys.hotelDetailsOpenedId,k);this.addHotelDetailsOpenTabValue(j)}return this},addHotelDetailsOpenTabValue:function(j){this.add(this.options.viewStatesKeys.hotelDetailsOpenedTab,j);return this},addHotelMiniDetailsOpenedValues:function(l,k,j){l=this.getNormalizedIntegerValue(l);this.addResultClicked(l);this.add(this.options.viewStatesKeys.hotelDetailsOpenedIndex,l);k=this.getNormalizedIntegerValue(k);if(k>=0){var m=this.get(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage)||new Object();m[k]=j;this.add(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage,m)}return this},getHotelMiniDetailsOpened:function(){var j=this.get(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage);return j},removeHotelMiniDetailsOpenedValues:function(){this.remove(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage);return this},removeSingleHotelMiniDetailsOpenedValues:function(j){j=this.getNormalizedIntegerValue(j);if(j>=0&&1==2){var k=this.get(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage)||new Object();if(k[j]!=null){delete k[j]}this.add(this.options.viewStatesKeys.hotelMiniDetailsOpenedIdPage,k)}return this},removeHotelDetailsOpenedValues:function(){this.remove(this.options.viewStatesKeys.hotelDetailsOpenedId);this.remove(this.options.viewStatesKeys.hotelDetailsOpenedTab);return this},addResultViewModeValue:function(j){this.addUrlState(this.options.urlViewStateKeys.resultViewMode,j);return this},addResultPageNumber:function(j){j=parseInt(j,10);j=isNaN(j)||j<=0?0:j-1;this.add(this.options.viewStatesKeys.resultPageNumber,j);this.resetViewStatesOnPageChange();return this},resetViewStatesOnPageChange:function(){this.resetOpenedFlightDetails();this.resetOpenedCarDetails();return this},resetViewStatesOnFilters:function(){this.addResultPageNumber(0);this.resetOpenedFlightDetails();this.resetOpenedCarDetails();return this},resetViewStatesOnSort:function(){this.addResultPageNumber(0);this.resetOpenedFlightDetails();this.resetOpenedCarDetails();return this},addMapTypeId:function(j){this.addUrlState(this.options.urlViewStateKeys.mapTypeId,j);return this},addMapCenterPoint:function(k,j){if(k!=null&&j!=null){this.add(this.options.viewStatesKeys.mapViewPortCenter,{lat:k,lng:j})}return this},addMapZoomLevel:function(j){if(j){this.add(this.options.viewStatesKeys.mapZoomLevel,j)}return this},addToOpenedDetailsList:function(m,j){j=this.getNormalizedIntegerValue(j);if(j<0){return}var n=e.isArray(this.get(m))?this.get(m):[];if(e.inArray(j,n)<0){n.push(j);this.addResultClicked(j)}var k;var l=j*-1;for(k=0;k<n.length;k++){if(n[k]==l){n.splice(k,1);break}}this.add(m,n);return this},removeFromOpenedDetailsList:function(m,j){j=this.getNormalizedIntegerValue(j);if(j<0){return}var k;var n=e.isArray(this.get(m))?this.get(m):[];for(k=0;k<n.length;k++){if(n[k]==j){n.splice(k,1);break}}var l=j*-1;if(e.inArray(l,n)<0){n.push(l)}this.add(m,n);return this},resetOpenedDetailsList:function(j){this.add(j,this.options.saving.resetValue);return this},addOpenedFlightDetails:function(j){return this.addToOpenedDetailsList(this.options.viewStatesKeys.flightDetailsOpenedIndexes,j)},removeOpenedFlightDetails:function(j){return this.removeFromOpenedDetailsList(this.options.viewStatesKeys.flightDetailsOpenedIndexes,j)},resetOpenedFlightDetails:function(){return this.resetOpenedDetailsList(this.options.viewStatesKeys.flightDetailsOpenedIndexes)},addOpenedCarDetails:function(j){return this.addToOpenedDetailsList(this.options.viewStatesKeys.carDetailsOpenedIndexes,j)},removeOpenedCarDetails:function(j){return this.removeFromOpenedDetailsList(this.options.viewStatesKeys.carDetailsOpenedIndexes,j)},resetOpenedCarDetails:function(){return this.resetOpenedDetailsList(this.options.viewStatesKeys.carDetailsOpenedIndexes)},addHotelMapMiniDetailsId:function(j){j=this.getNormalizedIntegerValue(j);if(j>=0){this.add(this.options.viewStatesKeys.hotelMapMiniDetailsId,j)}return this},removeHotelMapMiniDetailsId:function(){this.add(this.options.viewStatesKeys.hotelMapMiniDetailsId,-1);return this},addFlightLayoverAirportsState:function(j){if(typeof j=="undefined"){j=true}this.add(this.options.viewStatesKeys.showLayoverFilter,j);return this},addFlightMultiCityFilterLegState:function(j){if(typeof j!="undefined"){this.add(this.options.viewStatesKeys.multiCityFlightFilterLeg,j)}return this},addFlightLandingTimeSlidersFilterState:function(j){if(typeof j=="undefined"){j=true}this.add(this.options.viewStatesKeys.landingTimeSliders,j);return this},addShowMatrixViewState:function(j){if(typeof j=="undefined"){j=false}this.add(this.options.viewStatesKeys.showMatrix,j);return this},addShowPlusMinusThreeViewState:function(j){if(typeof j=="undefined"){j=false}this.add(this.options.viewStatesKeys.showPlusMinusThree,j);return this},setIgnoreWindowScrollPositionOnce:function(){this.options.saving.ignoreWindowScrollPositionOnce=true;return this},getNormalizedIntegerValue:function(j){j=parseInt(j,10);if(typeof j!="number"){j=-1}return j}});var g=window.JSON;if(typeof g=="undefined"){g={}}if(typeof g.stringify=="undefined"){e.extend(g,{stringify:function(l){switch(typeof l){case"string":return'"'+l.replace(/(["\\\/\b\f\n\r\t]{1})/g,"{1}")+'"';case"number":case"boolean":return l.toString();case"undefined":return"undefined";case"object":if(e.isArray(l)){var j=[];for(var k=0;k<l.length;k++){j.push(g.stringify(l[k]))}return"["+j.join(",")+"]"}if(l==null){return"null"}var j=[];for(var m in l){if(!l.hasOwnProperty(m)){continue}j.push('"'+m.toString()+'":'+g.stringify(l[m]))}return"{"+j.join(",")+"}"}return""}})}})(jq||jQuery);(function(a){R9.extend("utils",{log:function(){if(typeof window.R9Admin=="undefined"||!window.R9Admin){return}alert(Array.prototype.slice.call(arguments).join("\n"));if(typeof console=="undefined"||console==null){return}if(console.exception!=null){console.exception.apply(window,arguments)}else{if(console.error!=null){console.error(Array.prototype.slice.call(arguments))}if(console.trace!=null){console.trace()}}},formToObject:function(c){var d={},b=a(c).serializeArray();a.each(b,function(){d[this.name]=this.value});return d},slugify:function(b){return b.replace(/[^A-Za-z0-9\-_]/g,"")},roundTo:function(c,b){if(!c||isNaN(parseInt(c,10))){return 0}var d=Math.pow(10,parseInt(b,10)||0);return Math.round(c*d)/d}})})(jq||jQuery);(function(a){var b=1000*60*60*24;R9.extend("Utils.Date",{getDaysInMonth:function(c){if(!c){return 0}return 32-new Date(c.getFullYear(),c.getMonth(),32).getDate()},formatToDatetime:function(f,e){if(!f){return null}var c=(f.getMonth()+1).toString();if(c.length==1){c="0"+c}var g=f.getDate().toString();if(g.length==1){g="0"+g}if(typeof e==="undefined"){e="-"}return[f.getFullYear().toString(),c,g].join(e)},getDayDifference:function(e,c){if(!e||!c){return 0}var f=new Date(e.getFullYear(),e.getMonth(),e.getDate());var d=new Date(c.getFullYear(),c.getMonth(),c.getDate());return Math.floor((f.getTime()-d.getTime())/b)},getMonthDifference:function(d,c){if(!d||!c){return 0}return(12*d.getFullYear()+d.getMonth())-(12*c.getFullYear()+c.getMonth())}})})(jq||jQuery);(function(b){var a=false;R9.extend("Widgets",{Tooltip:function(d,c){this.element=b(d);this.element.data(this.widgetName,this);this.setOptions(c,true)}});R9.extend("Widgets.Tooltip",{validateElement:function(c){return b(c).data(this.prototype.widgetName)===undefined},getInstance:function(e,d){if(!this.validateElement(e)){var c=b(e).data(this.prototype.widgetName);if(d){return c.setOptions(d)}return c}return new R9.Widgets.Tooltip(e,d)},removeWidget:function(c){if(!this.validateElement(c)){this.getInstance(c).removeWidget()}}});R9.extend("Widgets.Tooltip.prototype",{element:null,widgetNamespace:"r9-tooltip",widgetBaseClass:"r9-tooltip",widgetName:"tooltip",options:{delay:200,fadeIn:200,fadeOut:200,edgeOffset:3,baseClass:null,content:null,position:"top",activation:"hover",showImmediately:false,subNameSpace:"",onOpen:null,onClose:null},_timer:null,_originalTitle:null,init:function(){this._removeAllWidgetBindings();var d=this;switch(this.options.activation){case"click":var c=false;this.element.on("click."+this.widgetName,function(e){if(a===false){c=false}if(c===false){d.open(e)}else{d.close(e)}c=!c;a=c});if(this.options.showImmediately){this.element.trigger("click."+this.widgetName)}break;case"focus":this.element.on("focus."+this.widgetName,function(e){d.open(e)});this.element.on("blur."+this.widgetName,function(e){d.close(e)});if(this.options.showImmediately){this.element.trigger("focus."+this.widgetName)}break;case"hover":default:this.element.on("mouseover."+this.widgetName,function(e){d.open(e)});this.element.on("mouseout."+this.widgetName,function(e){d.close(e)});if(this.options.showImmediately){this.element.trigger("mouseover."+this.widgetName)}break}return this},setOptions:function(c,d){if(c){this.options=b.extend({},this.options,c)}if(c||d){this.init()}return this},open:function(f){var e=this.getContent(f);if(!e){return this}var j=this._getWrapperElement();var c=this._getContainerElement();var h=this._getArrowElement();c.html(e);var g=this._getPositionMap(j,h);this._updateArrowElement(g,h);this._updateWrapperElement(g,j);this._updateContainerElement(g,c);if(this._timer){clearTimeout(this._timer)}var d=this;this._timer=setTimeout(function(){j.stop(true,true);j.fadeIn(d.options.fadeIn,function(){if(d.options.onOpen){d.options.onOpen.call(d,f)}})},this.options.delay);return this},close:function(d){if(this._timer){clearTimeout(this._timer)}var e=this._getWrapperElement();e.stop(true,true);var c=this;e.fadeOut(this.options.fadeOut,function(){if(c._originalTitle){c.element.attr("title",c._originalTitle);c._originalTitle=null}if(c.options.onClose){c.options.onClose.call(c,d)}});return this},getContent:function(c){if(this.options.content){if(typeof this.options.content=="function"){return this.options.content.call(this,c)}return this.options.content}if(this.element.attr("title")){this._originalTitle=this.element.attr("title");this.element.removeAttr("title")}if(this._originalTitle){return this._originalTitle}return this.element.text()},removeWidget:function(){this._removeAllWidgetBindings();this.element.removeData(this.widgetName);this.close();return this},_getWrapperElement:function(){var c=b("#"+this._getIdValue("-wrapper"));if(!c.length){c=this._createDOMElement("-wrapper");b("body").append(c)}return c},_getContainerElement:function(){var c=b("#"+this._getIdValue("-container"));if(!c.length){c=this._createDOMElement("-container");this._getWrapperElement().append(c)}return c},_getArrowElement:function(){var c=b("#"+this._getIdValue("-arrow"));if(!c.length){c=this._createDOMElement("-arrow");this._getWrapperElement().append(c)}return c},_createDOMElement:function(d){var c=b("<div></div>").attr("id",this._getIdValue(d));this._setStyleClasses(c,d);return c},_removeAllWidgetBindings:function(){this.element.off("click."+this.widgetName).off("focus."+this.widgetName).off("blur."+this.widgetName).off("mouseover."+this.widgetName).off("mouseout."+this.widgetName);return this},_getOffsetInformation:function(e,j,g){var f=this.element.outerWidth();var d=this.element.outerHeight();var h=this.element.offset();var c=e==="width"?g.outerWidth():g.outerHeight();return{arrowSize:Math.round(c/2),trueArrowSize:c,elementWidth:f,elementHeight:d,wrapperWidth:j.outerWidth(),wrapperHeight:j.outerHeight(),offset:{top:Math.floor(h.top),left:Math.floor(h.left)}}},_getPositionMap:function(d,c){d.attr("style","").css({top:"-1000px",left:"-5000px",display:"block"});switch(this.options.position){case"bottom":return this._getBottomPositioning(d,c);case"left":return this._getLeftPositioning(d,c);case"right":return this._getRightPositioning(d,c);case"top":default:return this._getTopPositioning(d,c)}},_getCommonPositioningMap:function(){return{newArrowTop:0,newArrowLeft:0,newWrapperTop:0,newWrapperLeft:0,wrapperClass:""}},_getTopPositioning:function(j,f){var h=this._getOffsetInformation("height",j,f);var g=Math.floor(h.elementWidth/2);var d="-top";var e=h.wrapperHeight;var c=h.offset.top-this.options.edgeOffset-h.arrowSize-h.wrapperHeight;if(c<=0){d="-bottom";c=h.offset.top+h.elementHeight+this.options.edgeOffset+h.arrowSize;e=h.trueArrowSize*-1}if(!b.support.leadingWhitespace){e-=1}return b.extend(this._getCommonPositioningMap(),{newArrowTop:e,newArrowLeft:Math.floor(h.wrapperWidth/2)-h.arrowSize,newWrapperTop:c,newWrapperLeft:h.offset.left+g-Math.floor(h.wrapperWidth/2),wrapperClass:d})},_getBottomPositioning:function(j,f){var h=this._getOffsetInformation("height",j,f);var g=Math.floor(h.elementWidth/2);var d="-bottom";var e=h.trueArrowSize*-1;var c=h.offset.top+h.elementHeight+this.options.edgeOffset+h.arrowSize;if(c+h.wrapperHeight>=b(window).height()){d="-top";c=h.offset.top-this.options.edgeOffset-h.arrowSize-h.wrapperHeight;e=h.wrapperHeight}return b.extend(this._getCommonPositioningMap(),{newArrowTop:e,newArrowLeft:Math.floor(h.wrapperWidth/2)-h.arrowSize,newWrapperTop:c,newWrapperLeft:h.offset.left+g-Math.floor(h.wrapperWidth/2),wrapperClass:d})},_getLeftPositioning:function(k,g){var j=this._getOffsetInformation("width",k,g);var h=Math.floor(j.elementHeight/2);var d=Math.floor(j.wrapperHeight/2);var f="-left";var e=j.wrapperWidth;var c=j.offset.left-this.options.edgeOffset-j.arrowSize-j.wrapperWidth;if(c<=0){f="-right";c=j.offset.left+j.elementWidth+this.options.edgeOffset+j.arrowSize;e=j.trueArrowSize*-1}return b.extend(this._getCommonPositioningMap(),{newArrowTop:d-j.arrowSize,newArrowLeft:e,newWrapperTop:j.offset.top+h-d,newWrapperLeft:c,wrapperClass:f})},_getRightPositioning:function(c,k){var d=this._getOffsetInformation("border-right-width",c,k);var h=Math.floor(d.elementHeight/2);var g=Math.floor(d.wrapperHeight/2);var e="-right";var f=d.trueArrowSize*-1;var l=d.offset.left+d.elementWidth+this.options.edgeOffset+d.arrowSize;if(l+d.wrapperWidth>=b(window).width()){var j=d.offset.left-this.options.edgeOffset-d.arrowSize-d.wrapperWidth;if(j>=0){e="-left";l=j;f=d.wrapperWidth}}return b.extend(this._getCommonPositioningMap(),{newArrowTop:g-d.arrowSize,newArrowLeft:f,newWrapperTop:d.offset.top+h-g,newWrapperLeft:l,wrapperClass:e})},_setStyleClasses:function(c,d,e){c.attr("class","");if(d){c.addClass(this.widgetBaseClass+d);if(e){c.addClass(this.widgetBaseClass+d+e)}if(this.options.baseClass){c.addClass(this.options.baseClass+d);if(e){c.addClass(this.options.baseClass+d+e)}}}return this},_updateWrapperElement:function(c,d){this._setStyleClasses(d,"-wrapper",c.wrapperClass);d.attr("style","").css({top:c.newWrapperTop+"px",left:c.newWrapperLeft+"px"});if(b.browser.msie&&this.options.position==="left"){d.css("min-width",d.width()+"px")}return this},_updateArrowElement:function(d,c){this._setStyleClasses(c,"-arrow",d.wrapperClass);c.css({top:d.newArrowTop+"px",left:d.newArrowLeft+"px"});return this},_updateContainerElement:function(d,c){this._setStyleClasses(c,"-container",d.wrapperClass);return this},_getIdValue:function(c){return this.widgetNamespace+this.options.subNameSpace+c}})})(jq||jQuery);(function(a){a.fn.tipTip=function(b){return this.each(function(){return R9.Widgets.Tooltip.getInstance(this,b)})}})(jq||jQuery);jq.fn.disableButton=function(){return this.addClass("ui-state-disabled").prop("disabled",true)};jq.fn.enableButton=function(){return this.removeClass("ui-state-disabled").removeProp("disabled")};(function(){var a=new Date();a.setFullYear(a.getFullYear()+1);jq.datepicker.setDefaults({altFormat:"D, M d yy",closeText:"Close",currentText:"Current",dateFormat:"mm/dd/yy",dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesMin:"S,M,T,W,T,F,S".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),firstDay:parseInt("1")-1,maxDate:a,minDate:new Date(),monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),prevText:"Prev",nextText:"Next",showAnim:"",showMonthAfterYear:false})})();jq.r9datepicker={parseDate:function(a){return jq.datepicker.parseDate("mm/dd/yy",a)}};jq.fn.r9datepicker=function(k){var g=k.defaultDate,b=k.dateFormat||"mm/dd/yy",c="mm/dd/yyyy";if(g){this.val(jq.datepicker.formatDate(b,g,k));jq(k.altField).text(jq.datepicker.formatDate(k.altFormat||"D, M d yy",g,k))}else{jq(k.altField).text(c)}var j=k.beforeShow;var a=k.onClose;var e=k.onSelect;var f=this;var h=function(d,n,l,m){jq(f).trigger(d,[m]);if(n){n(m,l)}};k.beforeShow=function(d,l){h("sbopen",j,d,l)};k.onClose=function(l,d){h("sbclose",a,l,d)};k.onSelect=function(l,d){h("sbset",e,l,d)};return this.attr({autocomplete:"off",autocapitalize:"off",autocorrect:"off"}).datepicker(k)};var R9=R9||{};R9.dp=(function(){function a(e,d){return(c(d)-c(e))/86400000}function b(e,f){var d=e[f];delete e[f];return d}function c(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}return{doublePicker:function(s,q){var f=s.defaultDate,d=q.defaultDate,j=jq(s.altField),g=jq(q.altField),o=b(s,"onSelect")||jq.noop,m=b(q,"onSelect")||jq.noop,n=jq(b(s,"selector")),l=jq(b(q,"selector")),r=s.resetAfterDays||30,e=s.minRangeDays||0,k=s.numberOfMonths||2,h=q.numberOfMonths||2,p=s.pop2==undefined?true:s.pop2;n.r9datepicker(jq.extend({beforeShowDay:function(t){return[true,(t&&d&&t.getTime()==d.getTime())?"ui-datepicker-marked-day":""]},numberOfMonths:k,onSelect:function(w,v){f=n.datepicker("getDate");var u=d&&a(f,d);if(!d||u>r||u<e){l.datepicker("setDate",null).datepicker("option","defaultDate",f);g.text("mm/dd/yyyy")}o.call(this,w,v);if(p){if(l.is(":visible")&&l.css("visibility")!="hidden"){function t(){l.focus()}window.setTimeout(t,50)}}}},s));l.r9datepicker(jq.extend({beforeShowDay:function(t){return[true,(f&&t&&f.getTime()==t.getTime())?"ui-datepicker-marked-day":""]},numberOfMonths:h,onSelect:function(v,u){d=l.datepicker("getDate");var t=f&&a(f,d);if(!f||t<e){n.datepicker("setDate",null).datepicker("option","defaultDate",d);j.text("mm/dd/yyyy")}m.call(this,v,u);l.r9datepicker("hide")}},q))}}})();var R9=R9||{};R9.social=function(){var c=0,b=0,a=null;function e(g,f){c++;if(c>30){c=0;f()}else{jq.post("/s/toolbox",{action:"listat"},function(h){if(h.status=="OK"){c=0;g()}else{if(h.error=="user.rejected"){c=0;f()}else{setTimeout(function(){e(g,f)},1000)}}},"json")}}function d(g,h,f){a=window.open(g,"LinkedInAuth","width=470,height=420");setTimeout(function(){e(h,f)},1000)}return{_fbLogin:function(f){jq.get("/vs/fd/topstrip/facebooklogin?action=vs");f=jq.extend({error:jq.noop,perms:"email,user_hometown,user_location",success:jq.noop},f);FB.login(function(g){if(g.authResponse){jq.get("/vs/fd/topstrip/facebooklogin/accept?action=vs");f.success(g.authResponse.accessToken,g.authResponse.userID)}else{jq.get("/vs/fd/topstrip/facebooklogin/reject?action=vs");f.error()}},{scope:f.perms});return false},fbCurrentPerms:function(f){FB.api("/me/permissions",function(g){f(g.data?g.data[0]:null)})},fbHasPerms:function(f,g){if(typeof f=="string"){f=f.split(/\s?,\s?/)}this.fbCurrentPerms(function(h){var k=[];for(var l in h){k.push(l)}k=k.join(",");for(var j=0;j<f.length;j++){if(!h[f[j]]){g(false,h,k);return}}g(true,h,k)})},fbLink:function(g,f){FB.getLoginStatus(function(h){if(h.authResponse){FB.logout(function(){AjaxReg.ui.linkWarning(g,f)});return false}else{return R9.social._fbLogin({success:function(j,k){AjaxReg.facebook.link(g,j,k)},perms:f||""})}})},fbLogin:function(f){var h;if(f){h=typeof f==="function"?f:f.success}function g(k,j){AjaxReg.facebook.login(0,h,f.confcode,k,j)}f=jq.extend({error:jq.noop},f,{success:g});return R9.social._fbLogin(f)},shareToFacebook:function(){},shareToLinkedin:function(j,h){var j=j||"";var g={msg:j,action:"sendtoli"};h=jq.extend(g,h);b++;if(b>3){b=0;return false}var f=this;jq.post("/s/toolbox",h,function(k){if(k.status!="OK"&&k.error=="linkedin.noauth"){d(k.redirect,function(){f.shareToLinkedin(j,h)},function(){jq(document).trigger("r9.social.linkedinshare.failure",["linkedin.noauth"]);jq(document).trigger("r9.social.linkedinshare.complete")})}else{if(k.status=="OK"){jq(document).trigger("r9.social.linkedinshare.success")}else{jq(document).trigger("r9.social.linkedinshare.failure",[k.error])}jq(document).trigger("r9.social.linkedinshare.complete");b=0}},"json");return false}}}();function fbAsyncInit(){FB.init({oauth:true,appId:"163003079204",cookie:true,xfbml:true,status:true,channelUrl:location.protocol+"//"+location.hostname+"/k/run/fbauth/channel"});jq(document).trigger("r9.facebook.api.loaded");FB.Event.subscribe("edge.create",function(a,b){if(window.recordlike){recordlike(a)}});FB.getLoginStatus(function(a){if(a.status=="connected"){}})}function load_facebook_api(){if(!document.getElementById("fb-root")){jq("<div/>",{id:"fb-root"}).appendTo("body")}jq.getScript(location.protocol+"//connect.facebook.net/en_US/all.js");jq("#fblink").click(function(){return R9.social.fbLink()});jq("#fbsignin").click(function(){return R9.social.fbLogin()})}(function(a){R9.extend("Widgets",{Slider:function(c,b){this.elementNode=c;this.element=a(this.elementNode);if(!this.validateElement()){return this}this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.Slider.prototype",{widgetName:"r9RangeSlider",widgetBaseClass:"r9-rangeSlider",elementNode:null,element:null,elementWidth:0,elementPositionLeft:0,handles:[],activeHandle:null,activeHandleIndex:null,startValues:null,mouseMoveDelegate:a.noop,mouseUpDelegate:a.noop,options:{start:a.noop,stop:a.noop,slide:a.noop,min:0,max:100,step:1,values:[],range:true,logarithmic:false,snapToValue:false},init:function(){this.element.data(this.widgetName,this);var c=this;this.handles=this.element.children("."+this.widgetBaseClass+"-handle");this.handles.bind("mousedown."+this.widgetName+" touchstart."+this.widgetName,function(d){c.mouseDown(d);d.preventDefault();d.stopPropagation(true)});var b=this.options.values;if(!b||b.length<1){b=this.options.range?[this.options.min,this.options.max]:[this.options.min]}this.setValues(b)},validateElement:function(){return this.element.length>0&&this.element.hasClass(this.widgetBaseClass)&&this.element.data(this.widgetName)===undefined},mouseDown:function(d){this.activeHandle=d.target;this.activeHandleIndex=null;this.elementWidth=this.element.outerWidth();this.elementPositionLeft=this.element.offset().left;for(var b=0;b<this.handles.length;b++){if(this.activeHandle==this.handles[b]){this.activeHandleIndex=b}}a(this.activeHandle).addClass(this.widgetBaseClass+"-handle-active");var c=this;this.mouseMoveDelegate=function(e){c.mouseMove(e)};this.mouseUpDelegate=function(e){e.stopPropagation(true);c.mouseUp(e)};a(document).bind("mousemove."+this.widgetName+" touchmove."+this.widgetName,this.mouseMoveDelegate).bind("mouseup."+this.widgetName+" touchend."+this.widgetName,this.mouseUpDelegate);this.startValues=[];for(var b=0;b<this.options.values.length;b++){this.startValues[b]=this.options.values[b]}this.options.start(d,this.options.values)},mouseUp:function(c){a(this.activeHandle).removeClass(this.widgetBaseClass+"-handle-active");this.activeHandle=null;this.activeHandleIndex=null;a(document).unbind("mousemove."+this.widgetName+" touchmove."+this.widgetName,this.mouseMoveDelegate).unbind("mouseup."+this.widgetName+" touchend."+this.widgetName,this.mouseUpDelegate);var d=false;if(this.startValues){for(var b=0;b<this.options.values.length;b++){if(this.options.values[b]!=this.startValues[b]){d=true;break}}}else{d=true}this.options.stop(c,this.options.values,d)},mouseMove:function(e){e.preventDefault();e.stopPropagation();var d=e.originalEvent;if(d.touches&&d.touches.length>0){e.pageX=d.touches[0].pageX}else{if(d.changedTouches&&d.changedTouches.length>0){e.pageX=d.changedTouches[0].pageX}}var b=Math.min(this.elementWidth,Math.max(0,e.pageX-this.elementPositionLeft));var f=this.valueForPosition(b/this.elementWidth,this.activeHandleIndex);a(this.activeHandle).css("left",(this.positionForValue(f)*100)+"%");for(var c=0;c<this.handles.length;c++){if(this.handles[c]==this.activeHandle){this.options.values[c]=f}}this.options.slide(e,this.options.values)},getValues:function(){return this.options.values.slice(0)},getValue:function(){return(this.options.values.length>0)?this.options.values[0]:0},setValues:function(b){this.options.values=[];for(var c=0;c<b.length;c++){var d=this.trimAlignValue(b[c]);this.options.values.push(d);a(this.handles[c]).css("left",(this.positionForValue(d)*100)+"%")}this.options.slide(null,this.options.values)},triggerStop:function(){this.options.stop({},this.options.values,true)},setValue:function(c){var b=this.options.values.slice(0);b[0]=c;this.setValues(b)},getOption:function(b){return this.options[b]},setOption:function(c,d){if(typeof c=="object"){var b=c;for(var c in b){if(b.hasOwnProperty(c)){this.options[c]=b[c]}}}else{this.options[c]=d}this.setValues(this.options.values)},positionForValue:function(e){var c;if(this.options.logarithmic){var d=Math.log(this.options.min);var b=Math.log(this.options.max);var f=(b-d)/1;c=(Math.log(e)-d)/f}else{c=(e-this.options.min)/(this.options.max-this.options.min)}return c.toFixed(5)},valueForPosition:function(c,g){if(c<=0){return this.options.min}else{if(c>=1){return this.options.max}}var e;if(this.options.logarithmic){var d=Math.log(this.options.min);var b=Math.log(this.options.max);var f=b-d;e=Math.exp(d+f*c)}else{e=this.options.min+((this.options.max-this.options.min)*c)}e=this.trimAlignValue(e);if(g>0){e=Math.max(e,this.options.values[g-1])}if((g+1)<this.handles.length){e=Math.min(e,this.options.values[g+1])}return e},trimAlignValue:function(e){if(e<=this.options.min){return this.options.min}if(e>=this.options.max){return this.options.max}var b;if(this.options.snapToValue){b=Math.ceil(Math.pow(10,Math.floor((Math.log(e)/Math.log(10)))-1))}else{b=(this.options.step>0)?this.options.step:1}var d=e%b;var c=e-d;if(Math.abs(d)*2>=b){c+=(d>0)?b:(-b)}e=parseFloat(c.toFixed(5));e=Math.min(e,this.options.max);e=Math.max(e,this.options.min);return e}})})(jq||jQuery);(function(a){a.fn.r9RangeSlider=function(c){if(typeof c=="string"&&c=="values"){for(var d=0;d<this.length;d++){var b=a(this[d]).data(R9.Widgets.Slider.prototype.widgetName);if(b){return b.getValues()}}return[]}if(typeof c=="undefined"){for(var d=0;d<this.length;d++){var b=a(this[d]).data(R9.Widgets.Slider.prototype.widgetName);if(b){return b}}return null}return this.each(function(){new R9.Widgets.Slider(this,c)})}})(jq||jQuery);(function(a){R9.extend("Widgets",{Checkbox:function(c,b){this.elementNode=c;this.element=a(this.elementNode);this.icon=a(R9.Widgets.Checkbox.findIconNode(this.elementNode));if(!this.validateElement()){return}this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.Checkbox",{isCheckbox:function(b){return b&&b.nodeName&&b.nodeName.toLowerCase()=="input"&&b.type.toLowerCase()=="checkbox"},isWidgetControlled:function(b){return a(b).hasClass(R9.Widgets.Checkbox.prototype.widgetBaseClass+"-input")},refresh:function(b,c){var d=a(c);d[b.checked?"addClass":"removeClass"](R9.Widgets.Checkbox.prototype.widgetBaseClass+"-icon-checked");d[b.disabled?"addClass":"removeClass"](R9.Widgets.Checkbox.prototype.widgetBaseClass+"-icon-disabled")},findIconNode:function(b){return document.getElementById(b.id+"-icon")},findElementNode:function(b){return document.getElementById(b.id.substring(0,b.id.lastIndexOf("-icon")))}});R9.extend("Widgets.Checkbox.prototype",{widgetName:"checkbox",widgetBaseClass:"r9-checkbox",elementNode:null,element:null,icon:null,options:{click:null,change:null},init:function(){this.bindInputClickEvent();this.bindInputEvent("change",this.handleElementChangeEvent);this.bindInputEvent("focus",this.handleElementFocusEvent);this.bindInputEvent("blur",this.handleElementBlurEvent);this.element.data(this.widgetName,this)},validateElement:function(){return R9.Widgets.Checkbox.isCheckbox(this.elementNode)&&R9.Widgets.Checkbox.isWidgetControlled(this.elementNode)&&this.element.data(this.widgetName)===undefined},bindInputEvent:function(b,d){var c=this;b+="."+this.widgetName;this.element.unbind(b).bind(b,function(e){d.call(c,this,R9.Widgets.Checkbox.findIconNode(this),e)})},bindInputClickEvent:function(){if(!a.support.changeBubbles){if(typeof a._data(this.elementNode,"_change_data")=="undefined"){a._data(this.elementNode,"_change_data",this.elementNode.checked)}}this.bindInputEvent("click",this.handleElementClickEvent)},handleElementClickEvent:function(b,c,d){if(this.options.click){this.options.click.apply(this,arguments)}if(!a.support.changeBubbles){if(a._data(b,"_change_data")==b.checked){a(b).trigger("change")}}},handleElementChangeEvent:function(b,c,d){if(this.handleJQueryOnChangeHookForIE(b,c,d)){return}R9.Widgets.Checkbox.refresh(b,c);if(this.options.change){this.options.change.apply(this,arguments)}},handleElementFocusEvent:function(b,c,d){if(b.disabled){return}a(c).addClass(this.widgetBaseClass+"-state-focus");if(this.options.focus){this.options.focus.apply(this,arguments)}},handleElementBlurEvent:function(b,c,d){if(b.disabled){return}a(c).removeClass(this.widgetBaseClass+"-state-focus");if(this.options.blur){this.options.blur.apply(this,arguments)}},handleJQueryOnChangeHookForIE:function(b,c,d){if(!a.support.changeBubbles){if(typeof d=="object"){var f=d.originalEvent||null;if(f&&f.type!=null&&(f.type.match(/(^|\.)click(\.|$)/)&&f.srcElement==c||f.type=="beforeactivate"||f.type=="beforedeactivate")){d.type=f.type;a(b).trigger(d);return true}}}return false}})})(jq||jQuery);(function(a){R9.extend("Widgets",{CheckboxGroup:function(c,b){this.elementNode=c;this.element=a(this.elementNode);this.icon=null;if(!this.validateElement()){return}this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.CheckboxGroup.prototype",true,R9.Widgets.Checkbox.prototype,{widgetName:"checkboxGroup",options:{inputSelector:'input[type="checkbox"]',labelSelector:"label.r9-checkbox-label",iconSelector:"a."+R9.Widgets.Checkbox.prototype.widgetBaseClass+"-icon"},init:function(){this.bindInputEvent("click",this.handleElementClickEvent);this.bindInputEvent("change",this.handleElementChangeEvent);this.bindInputEvent("focus",this.handleElementFocusEvent);this.bindInputEvent("blur",this.handleElementBlurEvent);this.bindInputEvent("mousedown",this.handleElementMouseDownEvent);this.bindLabelEvent("mousedown",this.handleElementMouseDownEvent);this.element.data(this.widgetName,this)},validateElement:function(){return this.element.data(this.widgetName)===undefined},bindInputEvent:function(b,d){var c=this;b+="."+this.widgetName+"Input";this.element.undelegate(this.options.inputSelector,b).delegate(this.options.inputSelector,b,function(e){d.call(c,this,R9.Widgets.Checkbox.findIconNode(this),e)})},bindLabelEvent:function(b,d){var c=this;b+="."+this.widgetName+"Label";this.element.undelegate(this.options.labelSelector,b).delegate(this.options.labelSelector,b,function(f){var e=a("#"+a(this).attr("for")).get(0);d.call(c,e,f)})},handleElementClickEvent:function(b,c,d){if(this.options.click){this.options.click.apply(this,arguments)}},handleElementMouseDownEvent:function(b,c,d){if(this.options.mousedown){this.options.mousedown.apply(this,arguments)}},handleJQueryOnChangeHookForIE:function(b,c,d){if(!a.support.changeBubbles){if(typeof d=="object"){var f=d.originalEvent||null;if(f&&f.type!=null&&(f.type.match(/(^|\.)click(\.|$)/)||f.type=="beforeactivate"||f.type=="beforedeactivate")){d.type=f.type;this.trigger(b,d)}}}return false},trigger:function(b,c){if(typeof c=="object"){c.liveFired=undefined}a(b).trigger(c)}})})(jq||jQuery);(function(a){(function(c){var b=c.fn.prop;c.fn.prop=function(d,e){var f=b.apply(this,arguments);if(typeof e!="undefined"&&(d=="checked"||d=="disabled")){this.each(function(){if(R9.Widgets.Checkbox.isCheckbox(this)&&R9.Widgets.Checkbox.isWidgetControlled(this)){R9.Widgets.Checkbox.refresh(this,R9.Widgets.Checkbox.findIconNode(this))}})}return f}})(a);a.fn.newCheckbox=function(b){return this.each(function(){new R9.Widgets.Checkbox(this,b)})};a.fn.checkboxGroup=function(b){return this.each(function(){new R9.Widgets.CheckboxGroup(this,b)})}})(jq||jQuery);(function(a){R9.extend("Widgets",{Switch:function(c,b){this.elementNode=c;this.element=a(this.elementNode);if((b&&!b.dontValidate)&&!this.validateElement()){return}this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.Switch",{isSwitch:function(b){return b&&b.nodeName&&b.nodeName.toLowerCase()=="input"&&b.type.toLowerCase()=="checkbox"},isWidgetControlled:function(b){return a(b).hasClass(R9.Widgets.Switch.prototype.widgetBaseClass+"-input")},findLabelNode:function(b){return jq(b).siblings(".r9-switch-label")},refresh:function(f){var e=R9.Widgets.Switch.prototype,d="."+e.widgetCover,c=e.widgetOnState,b="."+e.widgetWrapper;var j=a(f).parent(b),g=j.find(d),h=f.checked?j.outerWidth()-g.outerWidth():0;j[f.checked?"addClass":"removeClass"](c);g.css("margin-right",h)}});R9.extend("Widgets.Switch.prototype",true,R9.Widgets.Checkbox.prototype,{widgetName:"switch",widgetBaseClass:"r9-switch",widgetCover:"r9-switch-cover",widgetLabelNodeClass:"r9-switch-label",widgetWrapper:"r9-switch-wrapper",widgetOffText:"r9-switch-offText",widgetOnText:"r9-switch-onText",widgetOnState:"r9-switch-state-on",stepSize:4,options:{change:null,click:null},init:function(){if(R9.Common.Utils.Browsers.isMobileSafari()){this.options.nodraw=true}this.bindInputEvent("change",this.handleElementChangeEvent);this.bindInputEvent("click",this.handleElementClickEvent);this.element.data(this.widgetName,this);R9.Widgets.Switch.refresh(this.elementNode)},bindInputEvent:function(c,e){var b="input."+this.widgetBaseClass+"-input";c+="."+this.widgetName;var d=this;this.element.off(c).on(c,function(f){e.call(d,this,R9.Widgets.Switch.findLabelNode(this),f)})},handleElementClickEvent:function(b,c,d){if(this.options.click){this.options.click.apply(this,arguments)}if(!a.support.changeBubbles){if(a._data(b,"_change_data")==b.checked){a(b).trigger("change")}}},handleElementChangeEvent:function(b,c,d){if(this.handleJQueryOnChangeHookForIE(b,c,d)){return}this._slide();if(this.options.change){this.options.change.apply(this,arguments)}},validateElement:function(){return R9.Widgets.Switch.isSwitch(this.elementNode)&&R9.Widgets.Switch.isWidgetControlled(this.element)&&this.element.data(this.widgetName)===undefined},_toggleOnOff:function(b,d,c){this.element.siblings("."+this.widgetLabelNodeClass).text(b.val()).parent("."+this.widgetWrapper).removeClass(c||"").addClass(d||"").end();this.element.val(b.val())},_slide:function(){var k=this,g,h,j,o=a(this.element.siblings("."+this.widgetCover)),n=Math.round(this.options.stepSize||this.stepSize);j=o.css("margin-right"),h=+(j?j.replace("px",""):0);var m=(h===0),f=o.parent("."+this.widgetWrapper).outerWidth()-o.outerWidth(),b=f;g=m?0:h;var e=b%n,d=e?(m?e:-e):0;function c(){var q=".",r,p;if(m){q+=k.widgetOnText;r="r9-switch-state-on";p=""}else{q+=k.widgetOffText;r="";p="r9-switch-state-on"}k._toggleOnOff(k.element.siblings(q),r,p)}function l(){var q=0,p=false;if(b<0){c();return}if(k.options.nodraw){o.css("margin-right",m?f:0);c();return}o.css("margin-right",g);if(m){q=f-g;if(g+n>=f){p=true;g+=q}else{g+=n}}else{q=g-0;if(g-n<=0){p=true;g-=q}else{g-=n}}b-=(p&&Math.abs(q)>0)?Math.abs(q):n;setTimeout(function(){l()},10)}l()}})})(jq||jQuery);(function(a){(function(c){var b=c.fn.prop;c.fn.prop=function(d,e){var f=b.apply(this,arguments);if(typeof e!="undefined"&&(d=="checked"||d=="disabled")){this.each(function(){if(R9.Widgets.Switch.isSwitch(this)&&R9.Widgets.Switch.isWidgetControlled(this)){R9.Widgets.Switch.refresh(this,R9.Widgets.Switch.findIconNode(this))}})}return f}})(a);a.fn.r9Switch=function(b){return this.each(function(){new R9.Widgets.Switch(this,b)})}})(jq||jQuery);(function(a){R9.extend("Widgets",{Dropdown:function(c,b){this.elementNode=c;this.element=a(this.elementNode);this.status=a(R9.Widgets.Dropdown.findStatusNode(this.elementNode));this.wrapper=a(R9.Widgets.Dropdown.findWrapperNode(this.elementNode));if(!this.validateElement()){return}this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.Dropdown",{isDropdown:function(b){return b&&b.nodeName&&b.nodeName.toLowerCase()=="select"},isDropdownOption:function(b){return b&&b.nodeName&&b.nodeName.toLowerCase()=="option"},isWidgetControlled:function(b){return a(b).hasClass(R9.Widgets.Dropdown.prototype.widgetBaseClass+"-select")},isWidgetControlledOption:function(b){return R9.Widgets.Dropdown.isWidgetControlled(b.parentNode)},refresh:function(d,h,b){var h=a(h);if(d.disabled){h.addClass(R9.Widgets.Dropdown.prototype.widgetBaseClass+"-wrapper-disabled")}else{h.removeClass(R9.Widgets.Dropdown.prototype.widgetBaseClass+"-wrapper-disabled")}var c=d.selectedIndex;if(c<0){c=0}var f=d.options[c];var b=a(b);var g=a(d).data(R9.Widgets.Dropdown.prototype.widgetName);var e=g?g.options.status:null;if(e){e(d,h,b,f)}else{b.text(f.title||f.text||f.value);d.title=f.title||f.text||f.value}},findStatusNode:function(b){return document.getElementById(b.id+"-status")},findOptionStatusNode:function(b){return document.getElementById(b.parentNode.id+"-status")},findWrapperNode:function(b){return document.getElementById(b.id+"-wrapper")},findOptionWrapperNode:function(b){return document.getElementById(b.parentNode.id+"-wrapper")},findOptionSelectNode:function(b){return b.parentNode}});R9.extend("Widgets.Dropdown.prototype",{widgetName:"dropdown",widgetBaseClass:"r9-dropdown",elementNode:null,element:null,status:null,wrapper:null,refreshTimer:null,lastSelectedIndex:-1,options:{click:null,change:null,status:null},init:function(){this.bindSelectEvent("click",this.handleElementClickEvent);this.bindSelectEvent("change",this.handleElementChangeEvent);this.bindSelectEvent("keydown",this.handleElementKeydownEvent);this.bindSelectEvent("keyup",this.handleElementKeyupEvent);this.bindSelectEvent("focus",this.handleElementFocusEvent);this.bindSelectEvent("blur",this.handleElementBlurEvent);this.element.data(this.widgetName,this)},validateElement:function(){return R9.Widgets.Dropdown.isDropdown(this.elementNode)&&R9.Widgets.Dropdown.isWidgetControlled(this.element)&&this.element.data(this.widgetName)===undefined},bindSelectEvent:function(b,d){var c=this;b+="."+this.widgetName;this.element.unbind(b).bind(b,function(e){d.call(c,this,R9.Widgets.Dropdown.findWrapperNode(this),R9.Widgets.Dropdown.findStatusNode(this),e)})},handleElementClickEvent:function(c,e,b,d){if(this.options.click){this.options.click.apply(this,arguments)}R9.Widgets.Dropdown.refresh(c,e,b);this.stopRefreshLoop(c,e,b)},handleElementChangeEvent:function(c,e,b,d){if(this.options.change){this.options.change.apply(this,arguments)}R9.Widgets.Dropdown.refresh(c,e,b);this.stopRefreshLoop(c,e,b)},handleElementKeydownEvent:function(c,e,b,d){this.startRefreshLoop(c,e,b)},handleElementKeyupEvent:function(c,e,b,d){R9.Widgets.Dropdown.refresh(c,e,b);this.stopRefreshLoop(c,e,b)},handleElementFocusEvent:function(c,e,b,d){if(c.disabled){return}a(e).addClass(this.widgetBaseClass+"-state-focus")},handleElementBlurEvent:function(c,e,b,d){if(c.disabled){return}a(e).removeClass(this.widgetBaseClass+"-state-focus");R9.Widgets.Dropdown.refresh(c,e,b);this.stopRefreshLoop(c,e,b)},startRefreshLoop:function(c,e,b){var d=this;this.lastSelectedIndex=c.selectedIndex;this.refreshTimer=setInterval(function(){d.doRefresh(c,e,b)},100)},stopRefreshLoop:function(c,d,b){if(this.refreshTimer!=null){clearTimeout(this.refreshTimer);this.refreshTimer=null;this.lastSelectedIndex=-1}},doRefresh:function(c,d,b){if(c.selectedIndex!=this.lastSelectedIndex){this.lastSelectedIndex=c.selectedIndex;R9.Widgets.Dropdown.refresh(c,d,b)}}})})(jq||jQuery);(function(a){R9.extend("Widgets",{DropdownGroup:function(c,b){this.elementNode=c;this.element=a(this.elementNode);this.icon=null;if(!this.validateElement()){return}this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.DropdownGroup.prototype",true,R9.Widgets.Dropdown.prototype,{widgetName:"dropdownGroup",options:{inputSelector:"select"},init:function(){this.bindSelectEvent("click",this.handleElementClickEvent);this.bindSelectEvent("change",this.handleElementChangeEvent);this.bindSelectEvent("keydown",this.handleElementKeydownEvent);this.bindSelectEvent("keyup",this.handleElementKeyupEvent);this.bindSelectEvent("focus",this.handleElementFocusEvent);this.bindSelectEvent("blur",this.handleElementBlurEvent);this.element.data(this.widgetName,this)},validateElement:function(){return this.element.data(this.widgetName)===undefined},bindSelectEvent:function(b,d){var c=this;this.element.undelegate(this.options.inputSelector,b).delegate(this.options.inputSelector,b,function(e){d.call(c,this,R9.Widgets.Dropdown.findWrapperNode(this),R9.Widgets.Dropdown.findStatusNode(this),e)})}})})(jq||jQuery);(function(a){(function(c){var b=c.fn.val;c.fn.val=function(e){var f=b.apply(this,arguments);if(typeof e!="undefined"){c(this).each(function(){if(R9.Widgets.Dropdown.isDropdown(this)&&R9.Widgets.Dropdown.isWidgetControlled(this)){R9.Widgets.Dropdown.refresh(this,R9.Widgets.Dropdown.findWrapperNode(this),R9.Widgets.Dropdown.findStatusNode(this))}})}return f};var d=c.fn.prop;c.fn.prop=function(e,f){var g=d.apply(this,arguments);if(typeof f!="undefined"){if(e=="disabled"){c(this).each(function(){if(R9.Widgets.Dropdown.isDropdown(this)&&R9.Widgets.Dropdown.isWidgetControlled(this)){R9.Widgets.Dropdown.refresh(this,R9.Widgets.Dropdown.findWrapperNode(this),R9.Widgets.Dropdown.findStatusNode(this))}})}else{if(e=="selected"){c(this).each(function(){if(R9.Widgets.Dropdown.isDropdownOption(this)&&R9.Widgets.Dropdown.isWidgetControlledOption(this)){R9.Widgets.Dropdown.refresh(R9.Widgets.Dropdown.findOptionSelectNode(this),R9.Widgets.Dropdown.findOptionWrapperNode(this),R9.Widgets.Dropdown.findOptionStatusNode(this))}})}}}return g}})(a);a.fn.dropdown=function(b){return this.each(function(){new R9.Widgets.Dropdown(this,b)})};a.fn.dropdownGroup=function(b){return this.each(function(){new R9.Widgets.DropdownGroup(this,b)})}})(jq||jQuery);(function(a){R9.extend("Widgets",{RadiobuttonSet:function(c,b){this.elementNode=c;this.element=a(this.elementNode);if((b&&!b.dontValidate)&&!this.validateElement()){return}this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.RadiobuttonSet",{isRadiobuttonSet:function(b){return b&&b.nodeName&&b.nodeName.toLowerCase()==="span"},isWidgetControlled:function(b){return a(b).hasClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass)},findLabelNode:function(b){return document.getElementById(b.id+"-label")},findRadiobuttonSetNode:function(b){return(b!=null)?b.parentNode:null},refresh:function(b){b.find("input."+R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass).each(function(){var c=a(R9.Widgets.RadiobuttonSet.findLabelNode(this));var d=a(this);if(d.prop("checked")){c.addClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-checked")}else{c.removeClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-checked")}if(d.prop("disabled")){c.addClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-disabled")}else{c.removeClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-disabled")}})},applyCallback:function(g,e,d,b){if(!g){return}if(a.isFunction(g)){g.apply(e,d);return}var c=g[b.target.value];if(a.isFunction(c)){c.apply(e,d)}}});R9.extend("Widgets.RadiobuttonSet.prototype",{widgetName:"radiobuttonset",widgetBaseClass:"r9-radiobuttonset",elementNode:null,element:null,options:{change:null,click:null},init:function(){this.bindInputEvent("focus",this.handleElementFocusEvent);this.bindInputEvent("blur",this.handleElementBlurEvent);this.bindInputEvent("change",this.handleElementChangeEvent);this.bindInputEvent("click",this.handleElementClickEvent);this.element.data(this.widgetName,this);R9.Widgets.RadiobuttonSet.refresh(this.element)},bindInputEvent:function(c,e){var b="input."+this.widgetBaseClass;c+="."+this.widgetName;var d=this;this.element.undelegate(b,c).delegate(b,c,function(f){e.call(d,this,R9.Widgets.RadiobuttonSet.findLabelNode(this),f)})},validateElement:function(){return R9.Widgets.RadiobuttonSet.isRadiobuttonSet(this.elementNode)&&R9.Widgets.RadiobuttonSet.isWidgetControlled(this.element)&&this.element.data(this.widgetName)===undefined},handleElementFocusEvent:function(d,b,c){if(d.disabled){return}a(b).addClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-focused")},handleElementBlurEvent:function(d,b,c){if(d.disabled){return}a(b).removeClass(R9.Widgets.RadiobuttonSet.prototype.widgetBaseClass+"-label-focused")},handleElementChangeEvent:function(d,b,c){if(d.disabled){return}if(!a.support.changeBubbles){R9.Widgets.RadiobuttonSet.applyCallback(this.options.click,this,arguments,c)}R9.Widgets.RadiobuttonSet.applyCallback(this.options.change,this,arguments,c);R9.Widgets.RadiobuttonSet.refresh(this.element)},handleElementClickEvent:function(d,b,c){if(d.disabled){return}R9.Widgets.RadiobuttonSet.applyCallback(this.options.click,this,arguments,c);R9.Widgets.RadiobuttonSet.refresh(this.element)}})})(jq||jQuery);(function(a){(function(b){var c=b.fn.prop;b.fn.prop=function(d,e){var f=c.apply(this,arguments);if(typeof e!="undefined"&&(d=="disabled"||d=="checked")){b(this).each(function(){if(R9.Widgets.RadiobuttonSet.isRadiobuttonSet(R9.Widgets.RadiobuttonSet.findRadiobuttonSetNode(this))){var g=R9.Widgets.RadiobuttonSet.findRadiobuttonSetNode(this);if(R9.Widgets.RadiobuttonSet.isWidgetControlled(g)){R9.Widgets.RadiobuttonSet.refresh(b(g))}}})}return f}})(a);a.fn.radiobuttonset=function(b){return this.each(function(){new R9.Widgets.RadiobuttonSet(this,b)})}})(jq||jQuery);(function(a){R9.extend("Widgets",{Dialog:function(c,b){this.elementNode=c;this.element=a(this.elementNode);this.options=a.extend({},this.options,b);this.init();return this.dialogWrapper}});R9.extend("Widgets.Dialog.prototype",{element:null,elementNode:null,dialogWrapper:null,closeButton:null,viewPort:null,contentContainer:null,modalLayer:null,widgetName:"dialog",widgetBaseClass:"r9-dialog",spinnerClass:"r9-spinner",options:{title:null,modal:true,modalOpacity:0.75,wrapperClass:"",modalBackgroundClass:"",closeButtonClass:"",viewPortClass:"",contentClass:"",minWidth:100,maxWidth:null,minHeight:100,spinner:true,open:null,close:null,useMaxHeight:false},init:function(){this.open();this.element.data(this.widgetName,this);this.dialogWrapper.data(this.widgetName,this)},open:function(){this.createDialogWrapper();this.createCloseButton();this.createViewPort();this.reposition();this.createContentContainer();this.viewPort.append(this.closeButton,this.contentContainer);if(this.options.modal){this.hideDocumentScrollBar();this.createModalLayer();this.dialogWrapper.append(this.modalLayer)}if(this.options.open){this.options.open.call(this)}this.dialogWrapper.append(this.viewPort);a("body").append(this.dialogWrapper);var c=this;a(document).bind("keyup",b);function b(d){if(d.keyCode===27){a(document).unbind("keyup",b);c.close()}}},createDialogWrapper:function(){this.dialogWrapper=jq("<div></div>",{"class":this.widgetBaseClass+"-wrapper "+this.options.wrapperClass});this.dialogWrapper=a.extend(this.dialogWrapper,this)},createCloseButton:function(){var b=this;this.closeButton=jq("<div></div>",{"class":this.widgetBaseClass+"-closeButton "+this.options.closeButtonClass}).click(function(c){b.close()})},createViewPort:function(){this.viewPort=jq("<div></div>",{"class":this.widgetBaseClass+"-viewPort "+(this.options.spinner?this.spinnerClass:"")+" "+this.options.viewPortClass})},createContentContainer:function(){this.contentContainer=jq("<div></div>",{"class":this.widgetBaseClass+"-content "+this.options.contentClass});if(this.options.title){var b=jq("<div></div>",{"class":this.widgetBaseClass+"-title contentTitleBar "+this.options.contentClass,text:this.options.title});this.contentContainer.append(b)}this.contentContainer.append(this.element)},createModalLayer:function(){var b=this;this.modalLayer=jq("<div></div>",{"class":this.widgetBaseClass+"-modalBackground "+this.options.modalBackgroundClass}).click(function(){b.close()})},hideDocumentScrollBar:function(){a("body,html").addClass(getScrollbarSize()>0?"defaultScrollbar":"zeroScrollbar")},showDocumentScrollbar:function(){a("body,html").removeClass(getScrollbarSize()>0?"defaultScrollbar":"zeroScrollbar")},reposition:function(){this.viewPort.width(this.options.width?this.options.width:this.computeViewPortWidth());if(this.options.useMaxHeight){this.viewPort.height("100%")}else{this.viewPort.css({top:"25%",marginTop:Math.round((this.options.height===0?this.options.minHeight:this.options.height)/2)*(-1),"min-height":this.options.minHeight,"min-width":this.options.minWidth});if(this.options.height){this.viewPort.height(this.options.height)}else{this.dialogWrapper.css({padding:"20px 0"})}}},computeViewPortWidth:function(){var b=this.element.width();if(b!=0){b+=parseInt(this.element.css("padding-left"),10)+parseInt(this.element.css("padding-right"),10)+parseInt(this.element.css("margin-left"),10)+parseInt(this.element.css("margin-right"),10)+parseInt(this.element.css("borderLeftWidth"),10)+parseInt(this.element.css("borderRightWidth"),10)}if(this.options.maxWidth&&b>this.options.maxWidth){b=this.options.maxWidth}return b},close:function(){if(this.dialogWrapper){this.dialogWrapper.remove();this.dialogWrapper=null}if(this.options.modal){this.showDocumentScrollbar()}if(this.options.close){this.options.close.call(this)}}})})(jq||jQuery);(function(a){R9.extend("Widgets",{Favorites:function(c,b){this.elementNode=c;this.element=a(this.elementNode);if(!this.validateElement()){return}this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.Favorites.prototype",{widgetName:"r9Favorites",widgetBaseClass:"r9-favorites",elementNode:null,element:null,options:{},init:function(){this.element.data(this.widgetName,this);this.element.delegate(".pinnedItem","mouseover",this.mouseOver);this.element.delegate(".pinnedItem","mouseout",this.mouseOut)},validateElement:function(){return this.element.length>0&&this.element.hasClass(this.widgetBaseClass)&&this.element.data(this.widgetName)===undefined},mouseOver:function(b){var c=b.currentTarget.getAttribute("id").split("-")[1]},mouseOut:function(b){var c=b.currentTarget.getAttribute("id").split("-")[1]},getOption:function(b){return this.options[b]},setOption:function(c,f){var e=this;if(typeof c=="object"){d(c)}else{b(c,f)}this.setValues(this.options.values);function d(h){for(var g in h){if(h.hasOwnProperty(g)){e.options[g]=h[g]}}}function b(g,h){e.options[g]=h}}})})(jq||jQuery);(function(a){R9.extend("Widgets",{FavoritesCount:function(c,b){this.elementNode=c;this.element=a(this.elementNode);if(!this.validateElement()){return this}this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.FavoritesCount.prototype",{widgetName:"r9FavoritesCount",widgetBaseClass:"r9-favoritesCount",elementNode:null,element:null,options:{favorites:null},init:function(){this.element.data(this.widgetName,this);var b=this;this.updateCount();this.options.favorites.registerListener(R9.Common.Model.Favorites.Events.FAVORITE_ADDED,"ts",function(c,e,d){b.updateCount()});this.options.favorites.registerListener(R9.Common.Model.Favorites.Events.FAVORITE_REMOVED,"ts",function(c,e,d){b.updateCount()})},validateElement:function(){return this.element.length>0&&this.element.hasClass(this.widgetBaseClass)&&this.element.data(this.widgetName)===undefined},updateCount:function(){var b=0;if(this.options.favorites!=null){b=this.options.favorites.count}this.element.text(" ("+b+")")}})})(jq||jQuery);(function(a){R9.extend("Widgets",{Share:function(c,b){this.elementNode=c;this.element=a(this.elementNode);this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.Share.prototype",true,R9.Widgets.RadiobuttonSet.prototype,{widgetName:"r9Share",widgetBaseClass:"r9-radiobuttonset",elementNode:null,element:null,options:{shareUrl:"",facebookCallback:a.noop,twitterCallback:a.noop,linkedinCallback:a.noop,mailCallback:a.noop,linkCallback:a.noop,defaultCallback:function(d,b,c){alert("callback not implemented")}},handleElementClickEvent:function(d,b,c){switch(d.value){case"facebook":this.options.facebookCallback(d,b,c);break;case"twitter":this.options.twitterCallback(d,b,c);break;case"linkedin":this.options.linkedinCallback(d,b,c);break;case"mail":this.options.mailCallback(d,b,c);break;case"link":this.options.linkCallback(d,b,c);break;default:this.options.defaultCallback(d,b,c);break}},handleElementChangeEvent:function(){}})})(jq||jQuery);(function(a){a.fn.newDialog=function(b){return new R9.Widgets.Dialog(this,b)}})(jq||jQuery);(function(a){R9.extend("Widgets.Smarty",{Smarty:function(c,b){this.elementNode=c;this.element=a(this.elementNode);if(!this.validateElement()){return}this.options=a.extend({},this.options,b);this.init()}});R9.extend("Widgets.Smarty.Smarty",{isInput:function(b){return b&&b.nodeName&&b.nodeName.toLowerCase()=="input"},isWidgetControlled:function(b){return a(b).hasClass(R9.Widgets.Smarty.Smarty.prototype.widgetBaseClass+"-input")},getDropdownId:function(b){return"smartbox"}});R9.extend("Widgets.Smarty.Smarty.prototype",{widgetName:"smarty",widgetBaseClass:"r9-smarty",elementNode:null,element:null,dropdown:null,lastValue:null,keyTimeout:null,isItemSet:false,options:{minLength:0,appendTo:"body",initialData:null,searchOnFocus:false,showDropdownWhenEmpty:false,dataSource:null,dataType:"text",minWidth:10,maxWidth:1024,position:"left",dropdownClass:null,setItem:null,beforeStart:null,afterDone:null,dropdownListSelector:"ul li[class!='separator']",keyDelay:200,forceSelection:false},init:function(){this.bindInputEvent("focus",this.handleInputFocusEvent);this.bindInputEvent("blur",this.handleInputBlurEvent);this.bindInputEvent("keydown",this.handleInputKeydownEvent);this.initDropdown();this.element.attr({autocomplete:"off",autocapitalize:"off",autocorrect:"off"});this.element.data(this.widgetName,this);if(this.element.is(":focus")){this.element.focus()}},unInit:function(){this.unbindInputEvent("focus");this.unbindInputEvent("blur");this.unbindInputEvent("keydown")},initDropdown:function(){var e=R9.Widgets.Smarty.Smarty.getDropdownId(this.element);var f=document.getElementById(e);if(f==null){var b=R9.Widgets.Smarty.Smarty.prototype.widgetBaseClass;if(this.options.dropdownClass){b=b+" "+this.options.dropdownClass}var c={id:e,css:{display:"none",position:"absolute",width:"auto",zIndex:5001}};f=jq("<div></div>",c).appendTo(this.options.appendTo)[0];jq(f).addClass(b)}this.dropdown=jq(f)},validateElement:function(){return R9.Widgets.Smarty.Smarty.isInput(this.elementNode)&&R9.Widgets.Smarty.Smarty.isWidgetControlled(this.element)&&this.element.data(this.widgetName)===undefined},bindInputEvent:function(b,d){var c=this;b+="."+this.widgetName;this.element.off(b).on(b,function(e){return d.call(c,this,e)})},unbindInputEvent:function(b){b+="."+this.widgetName;this.element.off(b)},bindDropdownEvent:function(b,d){var c=this;this.dropdown.off(b,this.options.dropdownListSelector).on(b,this.options.dropdownListSelector,function(e){d.call(c,this,e)})},handleInputKeydownEvent:function(j,c){var e=27,k=9,b=18,n=38,h=40,d=37,g=39,f=13,l=16;var m=c.keyCode?c.keyCode:c.which;switch(m){case n:this.highlitePrevItem();return false;case h:this.highliteNextItem();return false;case e:return !this.hideDropdown();case f:this.selectHighlitedItem(m);return !this.hideDropdown();case k:this.selectHighlitedItem(m);break;case l:break;default:this.handleInputChangeEvent()}},handleInputChangeEvent:function(){this.abortKeyTimeout();this.abortRequest();this.onInputChange();var b=this;this.keyTimeout=setTimeout(function(){b.keyTimeout=null;b.handleInputValue()},this.options.keyDelay)},onInputChange:function(){this.isItemSet=false;var b=this.getHighlitedItem();if(b&&!this.itemMatches(b,this.element.val())){this.removeItemHighlite()}if(typeof this.options.clearItem==="function"){this.options.clearItem(this)}},handleInputValue:function(){if(this.options.showDropdownWhenEmpty||(this.element.size()&&this.element.val().length>0)){this.abortRequest();this.runSearch(true)}else{this.hideDropdown()}},handleInputFocusEvent:function(c,e){var d=this;var b=function(){if(d.checkAlive()){setTimeout(b,250)}};setTimeout(b,250);this.onBeforeStart();if(this.runSearchOnFocus()){if(this.element.val().length==0){this.showInitialDropdown()}else{this.runSearch(false)}}},runSearchOnFocus:function(){return this.options.searchOnFocus},onBeforeStart:function(){if(typeof this.options.beforeStart==="function"){this.options.beforeStart(this)}},handleInputBlurEvent:function(b,c){this.stopInputProcessing();if(this.hideDropdown()&&this.options.forceSelection){this.onForceSelection()}this.onAfterDone()},stopInputProcessing:function(){if(this.isUpdateInProgress()){this.abortKeyTimeout();this.abortRequest();this.removeItemHighlite()}},isUpdateInProgress:function(){return(this.keyTimeout||this.request)},onForceSelection:function(){if(!this.itemSet){var b=this.getHighlitedItem();if(b){this.selectItem(b,null)}}},onAfterDone:function(){if(typeof this.options.afterDone==="function"){this.options.afterDone(this)}},handleItemMouseoverEvent:function(c,b){this.getItemList().removeClass("selected");jq(c).addClass("selected")},handleItemMouseoutEvent:function(c,b){jq(c).removeClass("selected")},handleItemMousedownEvent:function(c,b){this.selectItem(c,null);this.hideDropdown()},selectHighlitedItem:function(e){var d=this.getItemList();if(!d){return}var b=this.getHighlitedItemIndex();if(b<0){return}var c=d[b];if(!c){return}this.selectItem(c,e)},selectItem:function(b,c){b=this.translateItem(b);this.setItem(b,c)},translateItem:function(b){return b},setItem:function(b,c){if(typeof this.options.setItem==="function"){this.isItemSet=true;this.options.setItem(this,b,c)}else{if(b){this.isItemSet=true;this.element.val(jq(b).text())}else{this.isItemSet=false;this.element.val("")}}},showInitialDropdown:function(){var b=this.onInitialData();if(b){this.searchCompleted(b,false)}},onInitialData:function(){var b=null;if(typeof this.options.initialData==="function"){b=this.options.initialData(this)}else{b=this.options.initialData}return b},runSearch:function(b){if(this.element.val().length<this.options.minLength){return}var e=this.element.val();if(this.lastValue==e){return}this.lastValue=e;var c=this.getRequestData();c=this.preprocessRequest(c);var d=this;var f=function(g){d.request=null;g=d.postprocessResponse(g,b);d.searchCompleted(g,b)};if(typeof this.options.dataSource==="function"){this.options.dataSource(c,f)}else{this.request=jq.post(this.options.dataSource,c,f,this.options.dataType)}},preprocessRequest:function(b){return b},getRequestData:function(){return{value:this.element.val(),formtoken:R9.globals.formtoken}},searchCompleted:function(c,b){if(c){this.showDropdown(c,b)}else{this.hideDropdown()}},postprocessResponse:function(c,b){return c},makeHTML:function(b){return b},showDropdown:function(g,e){this.dropdown[0].innerHTML=this.makeHTML(g);var d=R9.Widgets.Smarty.Smarty.prototype.widgetBaseClass;if(this.options.dropdownClass){d=d+" "+this.options.dropdownClass}this.dropdown.attr("class",d);var h=this.dropdown[0].style;var f=Math.min(this.options.maxWidth,Math.max(this.options.minWidth,this.dropdown.width()));h.width=f+"px";var c=this.element.offset();var b=c.left;if(this.options.position==="right"){b+=this.element.width()-f-2}h.left=b+"px";h.top=(c.top+this.element.outerHeight())+"px";h.display="inline";this.bindDropdownEvent("mousedown",this.handleItemMousedownEvent);this.bindDropdownEvent("mouseover",this.handleItemMouseoverEvent);this.bindDropdownEvent("mouseout",this.handleItemMouseoutEvent);if(this.getHighlitedItemIndex()!=0){this.removeItemHighlite();if(e){this.highliteNextItem()}}},hideDropdown:function(){this.abortKeyTimeout();this.abortRequest();this.lastValue=null;if(this.dropdown.css("display")=="none"){return false}this.dropdown.hide();return true},abortRequest:function(){if(this.request){try{this.request.abort()}catch(b){}this.request=null}},abortKeyTimeout:function(){if(this.keyTimeout){clearTimeout(this.keyTimeout);this.keyTimeout=null}},highliteNextItem:function(){var c=this.getItemList();var b=nsel=this.getHighlitedItemIndex();if(b==-1){nsel=0}else{if(b<c.length-1){nsel=b+1}}if(b!=nsel){jq(c[b]).removeClass("selected");jq(c[nsel]).addClass("selected")}},highlitePrevItem:function(){var c=this.getItemList();var b=nsel=this.getHighlitedItemIndex();if(b==-1){nsel=0}else{if(b>0){nsel=b-1}}if(b!=nsel){jq(c[b]).removeClass("selected");jq(c[nsel]).addClass("selected")}},removeItemHighlite:function(){jq(this.getItemList()).removeClass("selected")},getHighlitedItemIndex:function(){var b=this.getItemList();for(i=0;i<b.length;i++){if(jq(b[i]).hasClass("selected")){return i}}return -1},getHighlitedItem:function(){var b=this.getItemList();for(i=0;i<b.length;i++){if(jq(b[i]).hasClass("selected")){return b[i]}}return null},getItemList:function(){return this.dropdown.find(this.options.dropdownListSelector)},itemMatches:function(c,b){if(c){return jq(c).text().toLowerCase().indexOf(b.toLowerCase())>=0}return false},checkAlive:function(){if(!this.element.closest("html").length){this.hideDropdown();this.unInit();return false}else{if(!this.element.is(":visible")){this.hideDropdown();return false}}return true}})})(jq||jQuery);R9.extend("Widgets.Smarty",{FlareSmarty:function(b,a){R9.Widgets.Smarty.Smarty.call(this,b,jq.extend({dataSource:"/f/smarty"},a))}});R9.extend("Widgets.Smarty.FlareSmarty",true,{setRunSearchNextFocus:function(a){R9.Widgets.Smarty.FlareSmarty.runSearchNextFocus=a},runSearchNextFocus:true});R9.extend("Widgets.Smarty.FlareSmarty.prototype",true,R9.Widgets.Smarty.Smarty.prototype,{translateItem:function(d){if(!d){return null}var b=d.id.split("-");var e="";if(b.length>1){e=b[1]}var a={type:b[0],id:e,str:jq(d).text()};if(a.type=="isl"&&b.length>1){var c=b[1].split("/");a.str=c[0]}if(b.length>2){a.hc=b[2]}if(b.length>3){if(a.type==="hotel"){a.hid=b[3]}else{if(a.type==="rest"){a.rtid=b[3]}else{a.lmid=b[3]}}}return a},preprocessRequest:function(a){var b={};if(this.options.extendRequest){if(typeof this.options.extendRequest==="function"){b=this.options.extendRequest(this,a)}else{b=this.options.extendRequest}}return jq.extend({where:a.value,s:this.getFlareSmartyType(),f:"h",lc_cc:R9.globals.locale.lc_cc,lc:R9.globals.locale.lc},b)},runSearchOnFocus:function(){var a=R9.Widgets.Smarty.FlareSmarty.runSearchNextFocus;R9.Widgets.Smarty.FlareSmarty.runSearchNextFocus=true;return R9.Widgets.Smarty.Smarty.prototype.runSearchOnFocus.call(this)&&a},onInitialData:function(){var a=R9.Widgets.Smarty.Smarty.prototype.onInitialData.call(this)||this.makeRecentList(null,true);return a},postprocessResponse:function(c,b){var a=c&&/<li/i.test(c);var d=this.makeRecentList(b?this.element.val().toUpperCase():null,!a);if(!d&&!a){return null}if(a){if(d){c=c.replace("</ul>",d+"</ul>")}}else{c=d}return c},makeRecentList:function(d,b){var e=this.options.recentList;var a=null;if(e&&e.length>0){a="";for(var c=0;c<e.length;c++){if(d&&e[c].display.toUpperCase().indexOf(d)==-1){continue}var g=e[c].display;if(d){d=d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");var f=new RegExp("("+d+")","ig");g=g.replace(f,"<b>$1</b>")}a+="<li id='"+e[c].code+"' class='"+e[c].className+"'>"+g+"</li>"}if(a!=""){a=(b?"<ul>":"")+"<li class='separator'><b>Recently searched:</b></li>"+a+(b?"</ul>":"")}else{a=null}return a}return a},getFlareSmartyType:function(){if(this.options.flareSmartyType){return this.options.flareSmartyType}return -1}});R9.extend("Widgets.Smarty",{EmailSmarty:function(b,a){R9.Widgets.Smarty.Smarty.call(this,b,a)}});R9.extend("Widgets.Smarty.EmailSmarty.prototype",true,R9.Widgets.Smarty.Smarty.prototype,{});R9.extend("Widgets.Smarty",{HotelsSmarty:function(b,a){R9.Widgets.Smarty.FlareSmarty.call(this,b,jq.extend({minWidth:250,dropdownClass:" smartbox smartbox-hotel",forceSelection:true,flareSmartyType:3},a))}});R9.extend("Widgets.Smarty.HotelsSmarty.prototype",true,R9.Widgets.Smarty.FlareSmarty.prototype,{});R9.extend("Widgets.Smarty",{FlightsSmarty:function(b,a){R9.Widgets.Smarty.FlareSmarty.call(this,b,jq.extend({minWidth:250,dropdownClass:" smartbox smartbox-air",forceSelection:true,flareSmartyType:1,searchOnFocus:true},a))}});R9.extend("Widgets.Smarty.FlightsSmarty.prototype",true,R9.Widgets.Smarty.FlareSmarty.prototype,{});R9.extend("Widgets.Smarty",{CarsSmarty:function(b,a){R9.Widgets.Smarty.FlareSmarty.call(this,b,jq.extend({minWidth:250,dropdownClass:" smartbox smartbox-car",forceSelection:true,flareSmartyType:2},a))}});R9.extend("Widgets.Smarty.CarsSmarty.prototype",true,R9.Widgets.Smarty.FlareSmarty.prototype,{});R9.extend("Widgets.Smarty",{DealsSmarty:function(b,a){R9.Widgets.Smarty.FlareSmarty.call(this,b,jq.extend({minWidth:250,dropdownClass:" smartbox smartbox-deal",forceSelection:true,flareSmartyType:7},a))}});R9.extend("Widgets.Smarty.DealsSmarty.prototype",true,R9.Widgets.Smarty.FlareSmarty.prototype,{});(function(a){a.fn.r9FlightSmarty=function(b){return this.each(function(){new R9.Widgets.Smarty.FlightsSmarty(this,b)})};a.fn.r9AirportsSmarty=function(b){return this.each(function(){new R9.Widgets.Smarty.FlightsSmarty(this,a.extend({flareSmartyType:13},b))})};a.fn.r9HotelSmarty=function(b){return this.each(function(){new R9.Widgets.Smarty.HotelsSmarty(this,b)})};a.fn.r9HotelsOnlySmarty=function(b){return this.each(function(){new R9.Widgets.Smarty.HotelsSmarty(this,a.extend({flareSmartyType:11},b))})};a.fn.r9CitiesOnlySmarty=function(b){return this.each(function(){new R9.Widgets.Smarty.HotelsSmarty(this,a.extend({flareSmartyType:4},b))})};a.fn.r9HotelsAndCitiesSmarty=function(b){return this.each(function(){new R9.Widgets.Smarty.HotelsSmarty(this,a.extend({flareSmartyType:12},b))})};a.fn.r9CarSmarty=function(b){return this.each(function(){new R9.Widgets.Smarty.CarsSmarty(this,b)})};a.fn.r9DealSmarty=function(b){return this.each(function(){new R9.Widgets.Smarty.DealsSmarty(this,b)})};a.fn.r9EmailSmarty=function(b){return this.each(function(){new R9.Widgets.Smarty.EmailSmarty(this,a.extend({searchOnFocus:true,showDropdownWhenEmpty:true,dataSource:"/s/run/users/emailsmarty",minWidth:250,setItem:function(e,c,d){if(c){ji=jq(c);if(ji.hasClass("clearaddresses")&&d!=9){jq.post("/s/run/users/clearsmartyemail",{formtoken:R9.globals.formtoken})}else{e.element.val(ji.text())}}else{e.element.val("")}},afterDone:function(c){var d=c.element.val();if(d.length>0){jq.post("/s/run/users/addsmartyemail",{value:d,formtoken:R9.globals.formtoken})}}},b))})}})(jq||jQuery);R9.extend("Common.Init",{initEllipsisFields:function(){jq(".fdEllipsis").ellipsisTooltip()}});R9.extend("Common.Form",{Loader:function(a,c,b){this.element=jq(a);this.targetElement=c;this.options=jq.extend(true,{},this.defaultOptions,{success:this.successCallback},b||{})}});R9.extend("Common.Form.Loader",{getInstance:function(a,c,b){return new R9.Common.Form.Loader(c,a,b)},getFullForm:function(b,d,c){var a=R9.Common.Form.Loader.getInstance(d,b,c);return a.execute()}});R9.extend("Common.Form.Loader.prototype",{element:null,targetElement:null,defaultOptions:{dataType:"text",error:null,success:null,additionalParams:{uselast:false,getFormOnly:1},fieldFilters:[{attr:"name",val:"action"}],responseWrapperSelector:"#inlineSearchForm",dialogClass:"inlineSearchFormDlg",draggable:false,triggerAnchor:null,dialogPlacement:"right"},execute:function(b){if(!this.element.length){return false}this._disableTriggerElement();var a=this;jq.ajax({type:this.element.attr("type"),dataType:this.options.dataType,url:this.element.attr("action"),data:jq.extend(this.options.additionalParams,this.collectFormParams(),b||{}),error:function(){if(typeof a.options.error!="function"){return}a.options.error.apply(a,arguments);a._enableTriggerElement()},success:function(){if(typeof a.options.success!="function"){return}a.options.success.apply(a,arguments);a._enableTriggerElement()}});addAdt("inlinesearch/moreoptions");return false},successCallback:function(a){this.element.after(a);var d=null;var c=this;var b={draggable:this.options.draggable,dialogClass:this.options.dialogClass,open:function(f,g){var e=this;d=loadResults;loadResults=function(h,j){if(e){if(c.options.triggerAnchor){jq(e).r9popover("destroy")}else{jq(e).r9dialog("destroy")}loadResults=d}d.apply(this,arguments)}},close:function(e,f){if(d){loadResults=d}jq(this).r9dialog("destroy");jq(this).remove()}};if(this.options.triggerAnchor){jq(this.options.responseWrapperSelector).r9popover(jq.extend(b,{position:jq(this.options.triggerAnchor),at:this.options.dialogPlacement}))}else{jq(this.options.responseWrapperSelector).r9dialog(b)}},collectFormParams:function(){var c={};var b=this;jq("input, select",this.element).each(function(){var d=jq(this);if(!b.isSubmitableParameter(d)){return}c[d.attr("name")]=d.val()});var a={destinationcode:"destcode"};jq.each(a,function(d,e){c[d]=c[e]});return c},isSubmitableParameter:function(c){var b=jq(c);if(!c.length){return false}for(var a=0;a<this.options.fieldFilters.length;a++){if(c.attr(this.options.fieldFilters[a].attr)==this.options.fieldFilters[a].val){return false}}return true},_disableTriggerElement:function(b){if(!this.targetElement){return}var a=b||b==null?"wait":"";jq(this.targetElement).prop("disabled",b==null?true:b).trigger("mouseout").css("cursor",a);jq("body").css("cursor",a)},_enableTriggerElement:function(){this._disableTriggerElement(false)}});R9.extend("Common.cmp2",{defaultOptions:{cmp2Row:{selector:"#compareToRow",visibilityFlagClass:"compareToRowInvisible",hiddenFlagClass:"compareToRowHidden",animationSpeed:75},cmp2Checkboxes:{selector:"#compareToCheckboxes",visibilityFlagClass:"compareToCheckboxesInvisible",animationSpeed:75},queuedPopDefaultThrottle:4},hideCmp2Boxes:function(a,b){if(!a){var a=this.defaultOptions.cmp2Checkboxes.selector}if(!b){var b=this.defaultOptions.cmp2Checkboxes.visibilityFlagClass}jq(a).addClass(b)},showCmp2Boxes:function(a,b){if(!a){var a=this.defaultOptions.cmp2Checkboxes.selector}if(!jq(a).html()){return}if(!b){var b=this.defaultOptions.cmp2Checkboxes.visibilityFlagClass}var c=jq(a);if(!c.hasClass(b)){return}c.css({opacity:0}).removeClass(b).animate({opacity:1},this.defaultOptions.animationSpeed)},hideCmp2Row:function(a,b){if(!a){var a=this.defaultOptions.cmp2Row.selector}if(!b){var b=this.defaultOptions.cmp2Row.visibilityFlagClass}var c=jq(a);if(c.hasClass(b)){return}c.animate({opacity:0},this.defaultOptions.cmp2Row.animationSpeed,function(){jq(this).addClass(b).css({opacity:1})})},showCmp2Row:function(a,b){if(!a){var a=this.defaultOptions.cmp2Row.selector}if(!b){var b=this.defaultOptions.cmp2Row.visibilityFlagClass}var c=jq(a);if(!c.hasClass(b)){return}c.css({opacity:0}).removeClass(b).animate({opacity:1},this.defaultOptions.cmp2Row.animationSpeed)},displayCmp2Row:function(a,b){if(!a){var a=this.defaultOptions.cmp2Row.selector}if(!b){var b=this.defaultOptions.cmp2Row.hiddenFlagClass}var d=jq(a);if(!d.hasClass(b)){this.showCmp2Row(a);return}var c=this;d.slideDown(100,function(){jq(this).removeClass(b);c.showCmp2Row(a)})},doQueuedPop:function(d){var c=d||this;var a=false;var b=R9.Common.Utils.throttle(R9.Common.cmp2.defaultOptions.queuedPopDefaultThrottle,openQueuedCompareWindow);return function(){if(a){R9.utils.windowopener.pushCmp2Back()}else{b(c,c.e,false);a=true}return true}}});R9.extend("Common.RemoveAccents",{translate_re:/[öäüÖÄÜáàâéèêúùûóòôÁÀÂÉÈÊÚÙÛÓÒÔßæçØøðÇÐÌÍÎÏìíîïÑñŠšŸÿýŽžŒабвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ]/g,translate:{"ä":"a","ö":"o","ü":"u","Ä":"A","Ö":"O","Ü":"U","á":"a","à":"a","â":"a","é":"e","è":"e","ê":"e","ú":"u","ù":"u","û":"u","ó":"o","ò":"o","ô":"o","Á":"A","À":"A","Â":"A","É":"E","È":"E","Ê":"E","Ú":"U","Ù":"U","Û":"U","Ó":"O","Ò":"O","Ô":"O","ß":"s","æ":"o","ç":"c","Ø":"O","ø":"o","ð":"e","Ç":"C","Ð":"D","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Š":"S","š":"s","Ÿ":"Y","ÿ":"y","ý":"y","Ž":"Z","ž":"z","Œ":"O","ć":"c","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"jo","ж":"zh","з":"z","и":"i","й":"jj","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"c","ч":"ch","ш":"sh","щ":"shh","ъ":'"',"ы":"y","ь":"'","э":"eh","ю":"ju","я":"ja","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"JO","Ж":"ZH","З":"Z","И":"I","Й":"JJ","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"KH","Ц":"C","Ч":"CH","Ш":"SH","Щ":"SHH","Ъ":'""',"Ы":"Y","Ь":"''","Э":"EH","Ю":"JU","Я":"JA"},removeAccentedChars:function(a){var b=this;return(a.replace(b.translate_re,function(c){return b.translate[c]}))}});R9.extend("Common",{AsyncQueue:function(){var a=[];var b;var c={run:function(d){a.push(d);b===undefined&&c.next();return d},next:function(){b=a.shift();b&&b.apply(null,arguments)}};return c}});(function(b){R9.extend("Common",{Cache:function(e){var f=b.extend({},this.options,e,{cache:{},orderedKeys:[],garbageCollectorInterval:null});b.extend(this,{get:function(g){return c(g,f)},set:function(g,j,h){a(g,j,h,f)}})}});R9.extend("Common.Cache.prototype",{options:{maxLifeSpam:15*60*1000,defaultLifeSpam:1*60*1000,garbageCollectionTime:0.5*60*1000,maxCacheEntrySize:15},get:function(){},set:function(){}});function c(e,f){if(f.cache[e]){return f.cache[e].value}}function a(e,h,g,f){if(!f.garbageCollectorInterval){f.garbageCollectorInterval=setInterval(function(){d(f)},f.garbageCollectionTime)}g=g||f.defaultLifeSpam;g>f.maxLifeSpam&&(g=f.maxLifeSpam);if(f.orderedKeys.length>=f.maxCacheEntrySize){delete (f.cache[f.orderedKeys.splice(0,1)[0]])}if(!f.cache[e]){f.cache[e]={value:h,timeCreated:new Date().getTime(),lifeSpam:g};f.orderedKeys.push(e)}}function d(f){var g=new Date().getTime();for(var e in f.cache){if(!f.cache.hasOwnProperty(e)){continue}if(g-f.cache[e].timeCreated>=f.cache[e].lifeSpam){delete (f.cache[f.orderedKeys.splice(f.orderedKeys.indexOf(e),1)[0]])}}f.orderedKeys.length==0&&clearInterval(f.garbageCollectorInterval)}})(jq||jQuery);R9.extend("Common.cmp2",{defaultOptions:{cmp2Row:{selector:"#compareToRow",visibilityFlagClass:"compareToRowInvisible",hiddenFlagClass:"compareToRowHidden",animationSpeed:75},cmp2Checkboxes:{selector:"#compareToCheckboxes",visibilityFlagClass:"compareToCheckboxesInvisible",animationSpeed:75},queuedPopDefaultThrottle:4},hideCmp2Boxes:function(a,b){if(!a){var a=this.defaultOptions.cmp2Checkboxes.selector}if(!b){var b=this.defaultOptions.cmp2Checkboxes.visibilityFlagClass}jq(a).addClass(b)},showCmp2Boxes:function(a,b){if(!a){var a=this.defaultOptions.cmp2Checkboxes.selector}if(!jq(a).html()){return}if(!b){var b=this.defaultOptions.cmp2Checkboxes.visibilityFlagClass}var c=jq(a);if(!c.hasClass(b)){return}c.css({opacity:0}).removeClass(b).animate({opacity:1},this.defaultOptions.animationSpeed)},hideCmp2Row:function(a,b){if(!a){var a=this.defaultOptions.cmp2Row.selector}if(!b){var b=this.defaultOptions.cmp2Row.visibilityFlagClass}var c=jq(a);if(c.hasClass(b)){return}c.animate({opacity:0},this.defaultOptions.cmp2Row.animationSpeed,function(){jq(this).addClass(b).css({opacity:1})})},showCmp2Row:function(a,b){if(!a){var a=this.defaultOptions.cmp2Row.selector}if(!b){var b=this.defaultOptions.cmp2Row.visibilityFlagClass}var c=jq(a);if(!c.hasClass(b)){return}c.css({opacity:0}).removeClass(b).animate({opacity:1},this.defaultOptions.cmp2Row.animationSpeed)},displayCmp2Row:function(a,b){if(!a){var a=this.defaultOptions.cmp2Row.selector}if(!b){var b=this.defaultOptions.cmp2Row.hiddenFlagClass}var d=jq(a);if(!d.hasClass(b)){this.showCmp2Row(a);return}var c=this;d.slideDown(100,function(){jq(this).removeClass(b);c.showCmp2Row(a)})},doQueuedPop:function(d){var c=d||this;var a=false;var b=R9.Common.Utils.throttle(R9.Common.cmp2.defaultOptions.queuedPopDefaultThrottle,openQueuedCompareWindow);return function(){if(a){R9.utils.windowopener.pushCmp2Back()}else{b(c,c.e,false);a=true}return true}}});R9.extend("Common",{GoogleMapsAugmentation:function(){var a={addSetMapAnimation:function(g,f){var b=[];var e;var d=g.setMap;var c=jq.extend(g,{setMap:function(j,k){k===undefined&&(k=true);if(j===null){var l={};c.stopAnimations();jq.each(f,function(m,n){l[n.propertyName]=false;if(k){c.animateProperty(n,n.initialValue,function(){l[n.propertyName]=true;h()})}else{l[n.propertyName]=true;h()}})}else{e=j;c.stopAnimations();jq.each(f,function(m,n){var o={};o[n.propertyName]=n.initialValue;c.setOptions(o)});d.apply(c,[e]);jq.each(f,function(m,n){c.animateProperty(n,n.finalValue)})}function h(){var n=Object.keys(l);var m=true;jq.each(function(o,p){m=m&&l[key]});if(m){d.apply(c,[null]);e=j}}},stopAnimations:function(){jq.each(b,function(h,j){clearTimeout(j)});b=[]},animateProperty:function(r,q,s){var m=r.propertyName;var o=r.duration/30;var l=r.setter||function(v){var u={};u[m]=v;g.setOptions(u)};var p=r.getter||function(){return c[m]};var t=p();var n=0;var k=1;var h;function j(){h&&b.splice(b.indexOf(h),1);var v=Math.max(Math.min(n/o,1),0);var u=R9.Common.GoogleMapsAugmentation.LINEAR(t,q,v);l(u);n+=k;if(u!=q){h=setTimeout(j,30);b.push(h)}else{s&&s()}}setTimeout(j)}})}};return a}()});R9.Common.GoogleMapsAugmentation.LINEAR=function(b,a,c){return(b*(1-c))+(a*c)};R9.Common.GoogleMapsAugmentation.EASE_IN_OUT=function(b,a,c){return b+((a-b)*(1-Math.sin((Math.PI/2)+(c*Math.PI)))/2)};R9.extend("Common.Init",{initEllipsisFields:function(){jq(".fdEllipsis").ellipsisTooltip()}});Logger=(function(){var a;var d;return{getInstance:function(){if(!a){a=c()}return a}};function c(){return{log:function(k,j,l,h){l=l||function(){};if(!!window.LogUserEvents){d=new Array();f(k,j,l,h)}else{l()}}}}function f(m,k,o,j){if(m.indexOf("filtertime")<0&&m.indexOf("sorttime")<0){k=jq.extend({},k,{action:"vs"});var l=e();l&&(k.searchid=l);var n="";if(typeof j==="undefined"||!j){n=window.SearchType+"/"}jq.get("/vs/"+n+m,k).complete(o)}try{d.push('f="'+m+":"+new Date().getTime()+'"');if(d.length>=20){b();g()}}catch(h){}}function g(l,j){try{d.push(l);d.push(SearchID);d.push("load="+new Date().getTime());d.push("rc="+_r.length);d.push("fc="+_filtered.length);if(j){for(var k in j){d.push(j[k])}}d.push("resultmessage="+RANDOM_UPSELL_CODE)}catch(h){}}function b(){var h=e();jq.post("/s/sparkle?action=filterstats&ts="+new Date().getTime()+(typeof h!="undefined"?"&searchid="+h:""),"log="+escape(d.join(" ")))}function e(){var h;R9.currentSearch&&(h=R9.currentSearch.getSearchId());!h&&(h=window.SearchID);return h}})();R9.extend("Common",{Places:{food:["restaurant","food","cafe"],shopping:["shopping_mall","book_store","clothing_store","department_store","electronics_store"],nightlife:["night_club","bar"],beautyAndLifestyle:["spa","beauty_salon","hair_care"],publicTransportation:["subway_station","train_station","bus_station","transit_station"]}});R9.extend("Common",{Session:(function(){return function(a){var c={sessionId:""};var b=jq.extend({},c,a);return{getSessionId:function(){return b.sessionId}}}})()});R9.extend("Common.Utils",{getId:(function(){var a=new Date().getTime();return function(){return ++a}})(),formatThousandsSeparator:function(f,a,g){a=a||_PRICE_THOUSANDS_SEPARATOR;g=g||".";var d=f.toString().split(".");var c=d[0];var b=d.length>1?g+d[1]:"";var e=/(\d+)(\d{3})/;if(a.length>0){while(e.test(c)){c=c.replace(e,"$1"+a+"$2")}}return c+b},arrayDifference:function(b,a){var c=[];var d=[];var e=[];jq.each(b,function(f,g){if(a.indexOf(g)<0){d.push(g)}else{e.push(g)}});jq.each(a,function(f,g){if(b.indexOf(g)<0){c.push(g)}});return{added:c,removed:d,unchanged:e}},getDimensions:function(a){jq("body").append(a.addClass("outOfView"));var b={width:a.outerWidth(),height:a.outerHeight()};a.detach();a.removeClass("outOfView");return b},throttle:function(a,c,b){if(isNaN(a)){throw new TypeError("limit must be an number")}var d=0;return function(){if(d<a){d++;var e=Array.prototype.slice.call(arguments);e.push(d===a);e.push(d);return c.apply(b||this,e)}}},after:function(a,c,b){if(isNaN(a)){throw new TypeError("waitCount must be an number")}var d=0;return function(){if(d>=a){return c.apply(b||this,arguments)}d++}},debounce:function(d,a,c){var e,b=0;a=a||200;return function(){var f=Array.prototype.slice.call(arguments);b+=1;clearTimeout(e);e=setTimeout(function(){f.push(b);d.apply(c||this,f)},a)}},defer:function(a){setTimeout(function(){a()},0)},throwop:function(a){return function(){throw new Error((a||"unknown")+" function is abstract and must be overridden")}}});R9.extend("Common.Utils",{Browsers:{isChrome:function(){return !!navigator.userAgent.match(/chrome\/(\d+)/i)},isIE:function(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!==null){c=parseFloat(RegExp.$1)}}return c!==-1},isMobileSafari:function(){return navigator.userAgent.indexOf("AppleWebKit")!==-1&&navigator.userAgent.indexOf("Mobile")!==-1}}});if(!Array.prototype.filter){Array.prototype.filter=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var e=new Array();var d=arguments[1];for(var c=0;c<a;c++){if(c in this){var f=this[c];if(b.call(d,f,c,this)){e.push(f)}}}return e}}if(!Array.prototype.map){Array.prototype.map=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var e=new Array(a);var d=arguments[1];for(var c=0;c<a;c++){if(c in this){e[c]=b.call(d,this[c],c,this)}}return e}}if(!Array.indexOf){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1}}if(!Array.prototype.some){Array.prototype.some=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this&&b.call(d,this[c],c,this)){return true}}return false}}if(!Array.prototype.reduce){Array.prototype.reduce=function reduce(b){if(this===null||this===undefined){throw new TypeError("Object is null or undefined")}var c=0,a=this.length>>0,d;if(typeof b!=="function"){throw new TypeError("First argument is not callable")}if(arguments.length<2){if(a===0){throw new TypeError("Array length is 0 and no second argument")}d=this[0];c=1}else{d=arguments[1]}while(c<a){if(c in this){d=b.call(undefined,d,this[c],c,this)}++c}return d}}String.prototype.camelizeUpper=function(){return this.substr(0,1).toUpperCase()+this.substr(1)};Object.keys=Object.keys||function(a){var c=[];for(var b in a){a.hasOwnProperty(b)&&c.push(b)}return c};Object.values=Object.values||function(a){var c=[];for(var b in a){a.hasOwnProperty(b)&&c.push(a[b])}return c};Array.isArray=Array.isArray||function(a){return a instanceof Array};R9.extend("Common.Utils",{getImageToContainerSize:function(b,e,m,p){var f;var a;if(b>=m&&e>=p){var j,c,h;var d,g,o;j=m;c=m*e/b;h=p-c>=0?p-c:0;d=p*b/e;g=p;o=m-d>=0?m-d:0;if(h<=o){f=j;a=c}else{f=d;a=g}}else{if(b>=m||e>=p){var k=(b>=m)?m/b:p/e;f=b*k;a=e*k}else{f=b;a=e}}f=parseInt(f);a=parseInt(a);Math.abs(m-f)<10&&(f=m);var n=0;var l=0;if(f>m){n=parseInt(f/2-(m/2))}if(a>p){l=parseInt(a/2-(p/2))}if(a<p){l=parseInt((p-a)/2)*(-1)}return{finalWidth:f,finalHeight:a,shiftX:n,shiftY:l}}});(function(){if(!R9.Common.VisibilityMonitor){var d={};var a;R9.extend("Common",{VisibilityMonitor:(function(){return{getInstance:function(){if(!a){a=c()}return a}}})()});setTimeout(function(){window.onscroll=window.onresize=b;b()})}function c(){return{spyMovement:function(l,g,f,h,k){var j={element:g,showfn:f,hidefn:h,offset:k||0,isshown:false,lastVisible:false};d[l]=j;b()},remove:function(f){delete (d[f])}}}function b(){jq.each(Object.values(d),function(f,g){if(e(g.element,g.offset)){g.isshown=true;if(g.lastVisible!=g.isshown){g.showfn();g.lastVisible=g.isshown}}else{g.isshown=false;if(g.lastVisible!=g.isshown){g.hidefn();g.lastVisible=g.isshown}}})}function e(h,k){var j=jq(window).scrollTop();var f=jq(h).offset().top;var g=f+jq(h).height();return((j>f-jq(window).height()-k)&&(j<g+k))}})();R9.extend("Common.Patterns",{Observable:function(){var a=[];jq.extend(this,{registerListener:function(c,e,d,b){c=c||"default";!a[c]&&(a[c]=[]);jq.each(a[c],function(f,g){g.callback===d&&a[c].splice(g,1)});a[c].push({id:e,callback:d,scope:b})},registerListeners:function(b){var c=this;jq.each(b,function(d,e){c.registerListener.apply(c,e)})},notifyListeners:function(b,d,e){b=b||"default";var c=a[b]||[];jq.each(c,function(f,g){if(g&&g.scope){g.callback.call(g.scope,b,d,e);return}g&&g.callback(b,d,e)})},unregisterListener:function(b,c){b=b||"default";if(a[b]){jq.each(a[b],function(d,e){e.callback===c&&a[b].splice(e,1)})}},unregisterListeners:function(b){var c=this;jq.each(b,function(d,e){c.unregisterListener.apply(c,e)})},unregisterAllListeners:function(){this.unregisterListeners(a)}})}});R9.extend("Common.Patterns.Observable.prototype",{registerListener:function(){},notifyListeners:function(){},unregisterListener:function(){}});R9.extend("Common.Patterns",{Factory:function(){var a={};return{registerProduct:function(b,c){a[b]=c},newInstance:function(c,b){return a[c].createProduct.apply(a[c],b)}}}});R9.extend("Common.Patterns.MVC",{Model:function(){return new R9.Common.Patterns.Observable()}});R9.extend("Common.Patterns.MVC",{View:function(){R9.Common.Patterns.Observable.apply(this,arguments)}});R9.extend("Common.Patterns.MVC.View.prototype",jq.extend(true,{},R9.Common.Patterns.Observable.prototype,{initialize:function(){},destroy:function(){}}));R9.extend("Common.Patterns.MVC",{Controller:function(){return new R9.Common.Patterns.Observable()}});R9.extend("Common.Communication",{ScriptLoader:(function(){var a=[];var b={load:function(g,k,d,c){d=d||false;if(typeof c=="undefined"){c=true}if(c&&jq.inArray(g,a)>-1){k();return}a.push(g);if(d){var j="C"+R9.Common.Utils.getId();var e=document.createElement("script");b.loaderCallbacks[j]=function(){clearTimeout(h);delete (b.loaderCallbacks[j]);k()};e.src=g;k&&(e.src+="&callback=R9.Common.Communication.ScriptLoader.loaderCallbacks."+j);e.type="text/javascript";var h=setTimeout(function(){delete (b.loaderCallbacks[j])},30000);var f=jq("#scripts");f=f.length?f.get(0):document.getElementsByTagName("head")[0];f.appendChild(e)}else{jq.getScript(g,function(){k()})}},loaderCallbacks:{}};return b})()});R9.extend("Common.Communication",{ServerRequestService:(function(){var b;var f=new R9.Common.Cache({maxLifeSpam:15*60*1000,defaultLifeSpam:5*60*1000,garbageCollectionTime:0.5*60*1000,maxCacheEntrySize:20});var e={cluster:function(n,l,h,j,g,k){var m={searchid:n,action:"cluster",ne:l.toUrlValue(),sw:h.toUrlValue(),zoom:j,r:g,callback:k};var o=function(){};if(!window.ssUserAction){window.ssUserAction=window.parent.ssUserAction}ssUserAction("cluster",o,m)},getHotelPhotos:function(h,k,g,m){var j="/hotel/photos?hid="+h;k&&(j+="&width="+k);g&&(j+="&height="+g);var l=f.get(j);if(l){setTimeout(function(){m(jq.parseJSON(l))},0)}else{jq.ajax({url:j}).done(function(n){f.set(j,n);m(jq.parseJSON(n))})}},addFavorite:function(h,g){d(h,g,"/favorites/add")},removeFavorite:function(h,g){d(h,g,"/favorites/remove")},setRecentlyViewedHotel:function(g,j){var h={action:"setRecentlyViewedHotel",hid:g};setTimeout(function(){ssUserAction("setRecentlyViewed",j,h)},0)},getPlaceDetails:function(h,k,l){var g=h.reference;var j=f.get(g);if(j){setTimeout(function(){l(j)},0)}else{!b&&(b=new google.maps.places.PlacesService(k));b.getDetails({reference:g},function(m){f.set(g,m);l(m)})}}};if(R9.Common.Places){var c=600;var a={};jq.each(R9.Common.Places,function(g,h){a["poll"+g.camelizeUpper()]=function(l,k,n){!b&&(b=new google.maps.places.PlacesService(k));b.search({location:l.getLocation().googleLatLon,radius:c,types:h},m);var j={success:true};function m(o,p){if(p===google.maps.places.PlacesServiceStatus.OK){j[g]=o;n(j)}else{jq.extend(j,{success:false,error:p});n(j)}}}});jq.extend(e,a)}return e;function d(k,j,g){var h={id:k,searchtype:window.SearchType};jq.ajax({url:g,data:h,dataType:"json"}).done(j)}})()});(function(a){R9.extend("Common.Model",{Favorites:function(){R9.Common.Patterns.Observable.apply(this,arguments)}});R9.extend("Common.Model.Favorites.prototype",a.extend(true,{},R9.Common.Patterns.Observable.prototype,{count:0,favorites:{},addFavorite:function(d,c,b){if(b===undefined){b=true}this.favorites[d]=c;this.count++;if(b){this.notifyListeners(R9.Common.Model.Favorites.Events.FAVORITE_ADDED,this,{id:d,value:c})}},getFavorite:function(b){return this.favorites[b]},removeFavorite:function(c,b){if(b===undefined){b=true}delete this.favorites[c];this.count--;if(b){this.notifyListeners(R9.Common.Model.Favorites.Events.FAVORITE_REMOVED,this,{id:c})}}}));R9.Common.Model.Favorites.Events={FAVORITE_ADDED:"favoriteAdded",FAVORITE_REMOVED:"favoriteRemoved"}})(jq||jQuery);function SetCookie(e,d,c,b){var a={path:"/",secure:false};if(c){a.expires=c}if(b){a.domain=b}jq.cookie(e,d,a)}function kmail(a){document.write('<a class="mlink" href="mailto:'+a+'&#64;kayak&#46;com">'+a+"&#64;kayak&#46;com</a>")}function kmail2(b,a){document.write('<a class="mlink" href="mailto:'+b+"&#64;"+a+'">'+b+"&#64;"+a+"</a>")}function validateEmail(a){if(a.length>0){var b=a.match("^(.+)@(.+?)$");if(b!=null){if(b[1]!=null){if(b[1].match(/^\"?[@\'\w-_\.\+]*\"?$/)==null){return false}}if(b[2]!=null){return b[2].match(/^[\w-\.]*\.[A-Za-z]{2,6}$/)!=null||b[2].match(/^\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\]$/)!=null}}}return false}function roundTo(b,c,a){if(a==null){a=true}var d=Math.floor(b/c);if((b%c)>0){if(a){return((d+1)*c)}else{return(d*c)}}else{return b}}function getRadioValue(a){return jq(a).filter(":checked").val()||null}function showmessage(c,b){var a=jq("#messagebox");if(!a.length){a=jq("<div id='messagebox'></div>").appendTo("body").r9dialog({autoOpen:false,closeOnEscape:false,dialogClass:"messagebox",modal:false,position:["center",185],showCloseX:false})}a.html(c);if(b){a.r9dialog("option","title",b).r9dialog("widget").removeClass("ui-dialog-no-title")}else{a.r9dialog("widget").addClass("ui-dialog-no-title")}a.r9dialog("open")}function hidemessage(){if(jq("#messagebox").length>0){jq("#messagebox").r9dialog("close")}}function msie(a){return jq.browser.msie&&(!a||a>=jq.browser.version-0)&&jq.browser.version-0||0}function getFader(){var a=jq("#faderPane");if(!a.length){a=jq("<div id='faderPane' class='faderPane'></div>").appendTo("body")}return a}function toggleFaderPane(a,b){fader=getFader();if(a){fader.css("height",jq(window).height()).show();jq(window).resize(function(){fader.css("height",jq(window).height())})}else{fader.hide()}hideMeOnPopup(a);fader[0].onclick=(typeof b=="function")&&a?b:null}function htmlSafe(a){return a.replace(/\&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}function stripSpaces(a){return a.replace(/\s/g,"")}function safeSpaces(a){return a.replace(/\s/g,"%20")}function displaysmartad(iframe,rank){var innerIFrame=jq(iframe).contents().find("iframe");if(innerIFrame!=null&&innerIFrame.length>0){iframe=innerIFrame}var smtaddiv=jq(iframe).contents().find("body #smtdiv");var bodytxt=jq(iframe).contents().find("body");try{var smtad=eval("smtad="+jq(smtaddiv).text());if(R9.DART&&R9.DART.recoverMissingSearchId){smtad.searchid=smtad.searchid||window.searchid}if(smtad.provider_code&&smtad.searchid){getsmartadcreative(rank,smtad.provider_code,smtad.searchid,smtad.click_tracking,smtad.sz,true,Streaming.done);if(!Streaming.done){pollsmartadcreative(rank,smtad.provider_code,smtad.searchid,smtad.click_tracking,smtad.sz)}}}catch(ignored){}}function getsmartadcreative(d,a,k,c,g,b,j){var h=document.getElementById("displayAd"+d);if(h){var l="/h/ads/smartad?provider_code="+safeSpaces(a)+"&searchid="+k+"&clicktracking="+encodeURIComponent(c)+"&sz="+g+"&rank="+d+"&logimpr="+b+"&strm="+j;if(navigator.appVersion.indexOf("MSIE")!=-1&&!window.showNewGPTAds){var f=document.getElementById("displayAdSpanFrame"+d);f.innerHTML=f.innerHTML.replace(/src="[^"]*"/,'src="'+l+'"')}else{setIframeUrl(h,l)}}}function adjustBannerContainerSize(a,b){b=b||"220";a=a||"150";jq("#displayAdSpanFrame1 iframe").css({height:a,width:b}).parent().addClass("largeBanner1").parents("#bannerad1").css("width",b)}function pollsmartadcreative(e,a,b,d,c){if(!Streaming.done){setTimeout("pollsmartadcreative("+e+",'"+a+"','"+b+"','"+d+"','"+c+"')",1000)}else{getsmartadcreative(e,a,b,d,c,false,true)}}function loadDisplayAds(){if(window.showNewGPTAds){showNewGPTAds();return}jq("iframe[id^=displayAd]").each(function(){var g=this.id.replace("displayAd","");var d=jq(this).attr("longdesc");var c=jq("<a></a>")[0];c.href=d;if(this.contentWindow.location.href==c.href){return}var f=!jq(this).hasClass("nonds");var e=this;var b=jq(this).hasClass("hideAllAds");if(b&&!jq(this).hasClass("hide_all_displayed_ads_before_load")){jq(this).addClass("hide_all_displayed_ads_before_load")}setIframeUrl(this,d);jq(e).load(function(){if(f){displayAdOnloadJS(e,g)}if(b){var h=0;var a=setInterval(function(){try{j()}catch(k){clearInterval(a)}},1000);function j(){var k=jq(e).contents().find("#output").height();if(k>50){jq(e).removeClass("hide_all_displayed_ads_before_load");clearInterval(a)}if(h++>30){clearInterval(a)}}}});if(typeof(document.bannerUrls)=="undefined"){document.bannerUrls={}}document.bannerUrls["displayAd"+g]=d})}function displayGPTCallback(){jq("div.GPT").each(function(){var b=jq(this);var c=b.attr("id").replace("displayAd","");var a=jq(b).find("iframe").contents().find("body #smtdiv");if(a&&a.length==1){displaysmartad(jq(b).find("iframe"),c)}})}function displayAdOnloadJS(c,d){if(window.showNewGPTAds){return}var b=jq(c).contents().find("body #smtdiv");if(!b||b.length==0){b=jq(c).contents().find("body iframe").contents().find("body #smtdiv")}var a=jq(c).contents().find("body #cmp2div");if(b&&b.length==1){displaysmartad(c,d)}else{resizeIframeToContents(c)}}jq(loadDisplayAds);function resizeIframeToContents(b){if(window.showNewGPTAds){return}if(b==null){return}var g=jq(b).contents().find("iframe");if(g!=null&&g.length>0){b=g}var a=jq(b).contents().find("body"),f=jq(b).attr("id").replace("displayAd","displayAdHide");var c=false;var e=jq(b).contents().find("body img");if(!e||e.length==0){e=jq(b).contents().find("iframe").contents().find("body img")}if(e&&e.length==1&&e.attr("src")!=null&&e.attr("src").indexOf("/kayakadpixel.gif")>0){c=true}if(!e||e.length==0){e=jq(b).contents().find("iframe").contents().find("body div.kayakadpixel");if(e&&e.length==1){c=true}else{e=jq(b).contents().find("iframe").contents().find("body > *");if(!e||e.length==0){c=true}}}if(c){var d=f.replace("displayAdHide","");jq("#bannerad"+d).hide();jq("#"+f).hide()}else{jq("#"+f).css("visibility","visible");var d=f.replace("displayAdHide","");jq("#bannerad"+f.replace("displayAdHide","")).show();if(d=="2"){jq("#"+f).show()}}}function logAdInformation(a,c){var b="cat="+escape(a)+"&msg="+escape(c);jq.get("/s/run/toolbox/info?"+b)}var clearFlagTimer=null;var canReloadAds=true;function reloadBannerAds(){if(canReloadAds){canReloadAds=false;if(window.refreshGPTAds){refreshGPTAds()}else{b()}addAdt&&addAdt("bannerreload");d()}else{clearTimeout(clearFlagTimer);d()}function c(e,f){var k=document.getElementById(e);if(k!=null){if(!k.src){if(window.Streaming){Streaming.dbg(e+" NAF")}return}var g=navigator.appVersion.indexOf("MSIE")!=-1?k.contentWindow.location.href:k.src;if(typeof(document.bannerUrls)!="undefined"){if(document.bannerUrls[e]!=null){g=document.bannerUrls[e]}}var h=(new Date()).getTime();var m=(g.indexOf("&ad_ts=")<0?g+"&ad_ts="+(new Date()).getTime():g.substring(0,g.indexOf("&ad_ts")))+"&ad_ts="+(new Date()).getTime();var n=new RegExp("ord%3D([0-9]*)%3F");if(m.match(n)){m=m.replace(n,"ord%3D"+h+"%3F")}var j=k;var l=jq(j).hasClass("hideAllAds");setIframeUrl(k,m);jq(j).load(function(){if(l){var p=0;var o=setInterval(function(){try{q()}catch(r){clearInterval(o)}},1000);function q(){if(p==2){if(!jq(j).hasClass("hide_all_displayed_ads_before_load")){jq(j).addClass("hide_all_displayed_ads_before_load")}}var r=jq(j).contents().find("#output").height();if(r>50){jq(j).removeClass("hide_all_displayed_ads_before_load");clearInterval(o)}if(p++>30){clearInterval(o)}}}})}if(jq("#displayAdSpanFrame2").length>0){jq("#displayAdHide2").show()}else{jq("#displayAdHide2").hide()}}function a(f){f=document.getElementById(f);return f&&f.style.display!="none"}function b(){c("displayAd1","1");if(a("bannerad2")){c("displayAd2","2")}if(a("bannerad3")){c("displayAd3","3")}if(a("bannerad4")){c("displayAd4","4")}}function d(){clearFlagTimer=setTimeout(function(){canReloadAds=true},R9.globals.adsRefreshTimer||2500)}}function loadTT(f,b){var a=f.match(/^\#ttip(.*)/);var c=a&&a[1];if(!c||jq(f).length){b();return}var e=function(){if(!jq(f).length){jq("<div id='ttip"+c+"'></div>").appendTo("body")}b()};var d={action:"ttip",t:c};if(R9.ttip&&R9.ttip[c]){if(R9.ttip[c].empty){return e()}jq.extend(d,R9.ttip[c].params)}return ssAJAX("/s/toolbox",d,e)}function showTT(d,f,c,a,b,e){loadTT("#ttip"+c,function(){if(f!=""){jq("#ttipText"+c).html(f)}if(c=="BL"){var g=jq("#ttip"+c);g.css({left:"-9999",visibility:"visible"}).show(function(){_showTT(d,f,c,a,b,e)})}else{_showTT(d,f,c,a,b,e)}})}function _showTT(h,l,f,m,d,b){if(d==null||!d){hideAllTT(false)}else{if(b!=null){parts=b.split(",");for(var e=0;e<parts.length;e++){hideTTType(parts[e])}}}var g=jq("#ttip"+f);obj=document.getElementById("ttip"+f);obj.style.display="block";var c=jq(h).offset();var n=c.top;var a=c.left;if(m!=null){n+=m.y;a+=m.x}if(f=="BL"){g.show(function(){jq(this).position({my:"left bottom",at:"left top",offset:"-30 5",of:jq(h)})});return}else{if(f=="TL"){n=n+h.offsetHeight-5;a=a+h.offsetWidth-50}else{if(f=="CL"){n=n+h.offsetHeight-30;a=a+h.offsetWidth+25}else{if(f=="CR"||f=="FSP"){n=n-(g.outerHeight()/2)+(h.offsetHeight/2);if(f=="CL"||f=="FL"||f=="FSP"){a=a+h.offsetWidth}else{a=a-g.outerWidth()}}else{if(f=="FL"){a=a+jq(h).outerWidth()+20;n=n+(jq(h).outerHeight()/2)-65}else{if(f=="DL"){a=a+jq(h).outerWidth();n=n+(jq(h).outerHeight()/2)-50;obj.style.zIndex="45"}else{if(f=="DR"){var k=a;var j=n;n=n+(jq(h).outerHeight()/2)-50;a=a-(jq(obj).outerWidth()+3);obj.style.zIndex="45"}else{if(f=="CT"||f=="CB"){n=n-0+h.offsetHeight;if((jq.browser.mozilla||jq.browser.safari)&&(f=="CL"||f=="FL")){n+=8}else{if(jq.browser.msie&&parseInt(jq.browser.version)==6){}}a=a-(obj.offsetWidth/2)}}}}}}}}jq(obj).css({top:n,left:a,visibility:"visible"})}function hideAllTT(a){if(navigator.appVersion.indexOf("MSIE 6.")!=-1){jq("select.hideOnTT").css("visibility","visible")}if(a==null){a=true}jq.each(["BL","TL","CL","CR","CB","CT","DL","DR","FL","FSP","DX","DXC","DT","DG","SHR","HP","SLT","SLB"],function(){hideTTType(this)});try{jq("#createShareDiv").r9popover("close")}catch(b){}if(typeof localTTHidden=="function"&&a){localTTHidden()}jq("div.hideableTT").hide()}function hideTTType(a){jq("#ttip"+a).hide()}function simpleurl(b){if(b==null){return b}var d=b.indexOf("http://")==0,a=b.indexOf("/",d?7:0),c=a>0?b.substring(d?7:0,a):b.substring(d?7:0);return c.indexOf("www.")==0?c.substring(4):c}function cleanUrl(a,c){var b=(c===true||c==="true")?"s":"";var d="http"+b;if(a!=""){if(a.indexOf("http")<0){a=d+"://"+a.slice(0,1017)}else{if(a.indexOf(d)==0){}else{if(a.indexOf("http")==0){a=d+a.slice(4,1017)}else{}}}}return a}function isBadUrl(a){a=cleanUrl(a);return !(a.match(/^https?\:\/\/([A-Za-z0-9\-]*\.){1,}[A-Za-z0-9]{1,3}(\:[0-9]*)?[\/\?][^\s]*$/)||a.match(/^https?\:\/\/([A-Za-z0-9\-]*\.){1,}[A-Za-z0-9]{1,3}(\:[0-9]*)?$/)||a.match(/^https?\:\/\/([A-Za-z0-9\-]*\.){1,}(name|travel|museum|aero|mobi|info|jobs)(\:[0-9]*)?[\/\?][^\s]*$/)||a.match(/^https?\:\/\/([A-Za-z0-9\-]*\.){1,}(name|travel|museum|aero|mobi|info|jobs)(\:[0-9]*)?$/))}function replaceArgs(){str=arguments[0];for(var a=1;a<=arguments.length;a++){str=str.replace("{"+(a-1)+"}",arguments[a])}return str}function recordEvent(a,e,c,b,d){jq.ajax({url:"/vs/"+a+"/"+e+"/"+c+"/"+b+"/"+d+"?action=vs"+(typeof SearchID!="undefined"?"&searchid="+SearchID:""),global:false})}if(typeof String.prototype.localeCompare=="undefined"){String.prototype.localeCompare=function(a){if(this<a){return -1}if(this>a){return 1}return 0}}var R9_DisplayEds_JustHidden=false;function hideDisplayAds(a){R9_DisplayEds_JustHidden=true;if(a==null||a){AjaxReg.regtype="displayad";AjaxReg.ui.register(function(){AjaxAlert.disableDisplayAds()})}else{AjaxAlert.disableDisplayAds()}}function StringBuilder(a){this.strings=[""];this.append(a)}jq.extend(StringBuilder.prototype,{append:function(a){if(a){this.strings.push(a)}return this},clear:function(){this.strings.length=1}});StringBuilder.prototype.toString=function(){return this.strings.join("")};function kykButtonClicked(b,a){b=jq(b);b.find(".sideimg").each(function(){this.style.backgroundPosition=this.style.backgroundPosition.replace(/^0px/,"-90px").replace(/-60px/,"-90px").replace(/-30px/,"-90px")});b.find(".text").css({backgroundPosition:"0px -185px"});b.find(".up").hide();if(a!=null){b.find(".down").html(a)}b.find(".down").show();b.prop("disabled",true);b.find("div").prop("disabled",false);jq.each(["hover","mouseenter","mouseleave","click","mousedown","mouseup"],function(){b.unbind(this)});b.blur()}function bindKykButton(b){var a=b||"button.kykbtn";jq(a).hover(function(){jq(this).find(".sideimg").each(function(){this.style.backgroundPosition=this.style.backgroundPosition.replace(/^0px/,"-30px").replace(/^-60px/,"-30px")});jq(this).find(".text").css({backgroundPosition:"0px -111px"})},function(){jq(this).find(".sideimg").each(function(){this.style.backgroundPosition=this.style.backgroundPosition.replace(/-30px/,"0px").replace(/-60px/,"0px")});jq(this).find(".text").css({backgroundPosition:"0px -74px"})}).mousedown(function(){jq(this).find(".sideimg").each(function(){this.style.backgroundPosition=this.style.backgroundPosition.replace(/-30px/,"-60px")});jq(this).find(".text").css({backgroundPosition:"0px -148px"})})}function showCountryList(a){if(document.getElementById("currentCountry")==null){jq("#countryList").load("/s/toolbox",{action:"countrylist",showCurr:a},function(){loadCCCpicker()})}}jq(function(){bindKykButton()});function r9Float(a){return a-0}function hideMeOnPopup(a){jq("div.hideMeOnPopup").css({visibility:a==null||a?"hidden":"visible"})}function hideOnOutsideClick(a){jq("body").click(function(){jq("#"+a).hide().unbind("click");jq("body").unbind("click")});jq("#"+a).click(function(b){b.stopPropagation()})}function setToAnchor(l,e,b,j,m){var k=jq("#"+e).offset(),c=jq("#"+l).outerHeight(),a=jq("#"+l).outerWidth(),g=jq("#"+e).outerHeight(),d=jq("#"+e).outerWidth(),f=k.left,h=k.top;if(b=="left"){f=f-a}else{if(b=="right"){f+=d}}if(j!=0){h+=j}if(m!=0){f+=m}jq("#"+l).css({position:"absolute",left:f,top:h,zIndex:50})}function recordlike(a){jq.post("/s/toolbox","action=like&href="+escape(a));if(addAdt){addAdt("facebook.like")}}function gradientDialogCleanup(){function a(){jq(".dialog_top").hide().show()}a();window.setTimeout(a,2000)}function evalScript(a){if(a.src){jq.ajax({url:a.src,async:false,dataType:"script"})}else{jq.globalEval(a.text||a.textContent||a.innerHTML||"")}if(a.parentNode){a.parentNode.removeChild(a)}}function initAjaxHistory(a){if(!window.hashInit){jq.address.externalChange(function(b){if(window.hashSkippedFirst&&!window.loadingResults){loadHashResults()}hashSkippedFirst=true});hashInit=true}jq.address.value(a)}function loadHashResults(){var a=document.location.pathname;if(document.location.hash){if(a.indexOf("/",a.length-1)==-1){a+="/"}a+=document.location.hash.substring(1);loadResults(a.replace("//","/"))}else{document.location.reload()}}function loadResults(a,b,d){if(window.loadingResults){return}jq.cookie("hashparams",null);jq.cookie("nus","t",{path:"/"});R9.ViewState.getInstance().reset();if(!window.samepageresults){document.location.href=a;return}var c=new Date().getTime();jq.ajax({url:a,type:"GET",dataType:"html",complete:function(g,e){if(e==="success"){try{if(typeof FilterList!="undefined"&&FilterList){FilterList.reset()}var j=new Date().getTime();window.loadingResults=true;if(b){b()}jq("body")[0].innerHTML=g.responseText;var l=new Date().getTime();jq.datepicker.initialized=false;window.samepagesuccess=false;jq("body script").each(function(){evalScript(this)});var f=a.match(/\/([^\/]*)\/([^\?]*)(\?.*)?/);if(f){var k;if(document.location.pathname.indexOf(f[1])==1){k=f[2]}else{k=f[1]+"/"+f[2]}if(window.samepagesuccess){jq.address.value(k)}}jq(document.body).css("cursor","default");R9.ui.initHeader();if(window.R9Admin&&window.samepagesuccess){setTimeout(function(){validateScripts(g.responseText)},5000)}}finally{window.loadingResults=false;if(!Streaming.done){jq(window).one("r9.streaming.done",function(){var m=new Date().getTime();logTiming(searchid,c,j,l,m)})}else{var h=new Date().getTime();logTiming(searchid,c,j,l,h)}}}if(d){d()}}})}function logTiming(f,h,g,b,a){var d=g-h;var e=b-h;var c=a-h;jq.post("/s/sparkle",{searchid:f,action:"ss",rt:d,ht:e,st:c});if(R9){R9.extend("globals",{logTiming:"<b>Performance metrics:</b><br />resp: "+d+"<br />html: "+e+"<br />script: "+c+"<br />"});if(typeof FilterList=="undefined"){displayLogTiming()}}}function displayLogTiming(){if(!R9||!R9.globals||!R9.globals.logTiming){return}jq("#kayak_pm_0001").html(R9.globals.logTiming)}function validateScripts(c){var b=jq("<div/>");if(c){b[0].innerHTML=c}try{validateJS(c&&b||null)}catch(a){R9.utils.log("Hey, Admin! This is not good:",a)}}function deepExtend(b,a){if(!b){return a}jq.each(a,function(d,c){b[d]=deepExtend(b[d],c)});return b}function enableAddAdt(a,b){jq.get("/vs/"+a+"/"+b+"?action=vs"+(typeof SearchID!="undefined"?"&searchid="+SearchID:""))}function setIframeUrl(b,a){if(!b.contentWindow){jq(b).html("<iframe frameborder='0' scrolling='no' style='text-align:center;margin:0;padding:0;' src='"+a+"'></iframe>")}else{b.contentWindow.location.replace(a)}}R9.metacookie=R9.metacookie||{};R9.metacookie.saveQueue=R9.metacookie.saveQueue||[];function saveQueuedMetaCookie(){if(R9.metacookie.saveQueue.length==0){return}var a=R9.metacookie.saveQueue[0];jq.ajax({type:"POST",url:"/k/cookie",data:{action:"setmeta",metacookie:a.name,metavalue:a.value,formtoken:R9.globals.formtoken},complete:function(){R9.metacookie.saveQueue.shift();saveQueuedMetaCookie()},success:function(){a.callback()}})}function setMetaCookie(a,b,c){R9.metacookie.saveQueue.push({name:a,value:b,callback:c||jq.noop});if(R9.metacookie.saveQueue.length==1){saveQueuedMetaCookie()}}function deleteMetaCookie(b,a){if(typeof a=="undefined"||!a){a=jq.noop}jq.ajax({type:"POST",url:"/k/cookie",data:{action:"deletemeta",metacookie:b,formtoken:R9.globals.formtoken},success:a})}function attachEmailDisclaimerTooltip(){jq("#emailSpecialDealsLabel > a").tipTip({delay:0,fadeOut:400})}function initScrollbarSize(){var d=jq("<p></p>")[0];d.style.width="100%";d.style.height="200px";var c=jq("<div></div>")[0];c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(d);document.body.appendChild(c);var b=d.offsetWidth;c.style.overflow="scroll";var a=d.offsetWidth;if(b==a){a=c.clientWidth}document.body.removeChild(c);window.scrollbarSize=b-a}function getScrollbarSize(){if(!window.scrollbarSize){initScrollbarSize()}return window.scrollbarSize}function disableSelection(a){if(typeof a.onselectstart!="undefined"){a.onselectstart=function(){return false}}else{if(typeof a.style.MozUserSelect!="undefined"){a.style.MozUserSelect="none"}else{a.onmousedown=function(){return false}}}}function refreshGPTAds(){try{googletag.pubads().refresh();window.setTimeout("displayGPTCallback()",500);window.setTimeout("displayGPTCallback()",800);window.setTimeout("displayGPTCallback()",1500);window.setTimeout("displayGPTCallback()",2500)}catch(a){}}jq.ajaxPrefilter("script",function(a,c,b){a.cache=true});var emailDealSaveSuccess_clientSuccess=null,emailDealSaveSuccess_clientError=null,AjaxReg=(function(){var r=null;function e(z,A,y){alert(A)}function d(){return jq("#ajaxinner button")}function s(){return jq("#ajaxinner input[type='checkbox']")}function a(){b();m();jq("#showAlertRegLink").attr("href","javascript:showAlertSection()");jq("#emailAlertsPopupAfterClick").hide();jq("#hiddenCarsPopupAfterClick").show();AjaxReg.alreadyRegistered=true}function f(){b();m();AjaxReg.alreadyRegistered=false}function h(){jq("#emailValidatorWarnBox").r9popover("destroy").remove()}function v(){location.reload(true)}function g(){jq("#ajaxinner").r9dialog("destroy").remove()}function o(){d().button("disable")}function k(){d().button("enable")}function b(){g();return false}function c(y){jq.ajax({url:y,dataType:"script",async:false,cache:false})}function p(){jq("tr.error").hide();jq("#ajaxmessage").addClass("hidden")}function x(y){return function(){if(t()){p();u("/k/run/fbauth/loginAndLinkExisting",jq("#ajaxinner form").serialize(),function(z){if(z.status==0){if(y){a();y()}else{v()}}else{l(z.message)}})}return false}}function m(){jq("#header:not(.gl_header #header)").load("/k/headerajax?"+new Date().getTime(),R9.ui.initHeader)}function w(y){y=y||{};if(typeof y==="function"){y={success:y}}return y}function u(z,B,D){try{if(!r){if(typeof easyXDM=="undefined"){c("/v005/js/alien/easyXDM.min.js")}if(!jq.isPlainObject(window.JSON)){c("/v544/js/mweb/json2.js")}var A="/k/run/auth/xdm/",y=A+"name";r=new easyXDM.Rpc({local:y,remote:AjaxReg.remoteHost+A+"remoteMethods",remoteHelper:AjaxReg.remoteHost+y,swf:AjaxReg.remoteHost+"/v544/images/swf/easyxdm.swf"},{remote:{postJSON:{}}})}r.postJSON(z,B,D,e)}catch(C){l('An unknown error has occurred. If it continues, please <a href="/feedback/form">send feedback</a>.');try{if(jq.isPlainObject(window.JSON)){jq.post("/k/run/auth/error",{e:JSON.stringify(C)})}}catch(E){}}}function j(y,z,A){g();jq.ajax({url:"/k/run/auth/display/"+y,data:z,dataType:"html",success:A||n,error:e,cache:false})}function l(y){var B=jq("#ajaxerror");if(B.length){jq("#ajaxerror").find("div").html(y).end().show()}else{var z=jq("#ajaxmessage").parents(".ui-dialog").width();var A=(z)?(z-50):500;jq("#ajaxmessage").html(y).css("width",A+"px").removeClass("hidden")}jq("#ajaxreason").hide();k()}function n(A,y){var B=jq(A),z={close:function(){h();if(typeof y=="function"){y()}},dialogClass:"ajaxregDlg",hideTitle:true};B.attr("title","").r9dialog(z).find("form").submit(o);d().button();s().newCheckbox();jq("#loginOrsignup").radiobuttonset()}function q(){var y=jq("#fbLoginPopover").r9popover({modal:false,position:this,dialogClass:"fbLoginPopoverDlg",width:363}).find("a").blur().end();jq("body").one("click",function(){y.r9popover("close")});return false}function t(){p();var y=document.ajaxlogreg;jq(y).find(".highlight").removeClass("highlight");jq(y.username).val(jq.trim(y.username.value));if(!validateEmail(y.username.value)){l("Please enter a valid email address.");jq(y.username).addClass("highlight").focus();return false}if(y.passwd.value.length==0){l("Please enter a password");jq(y.passwd).addClass("highlight").focus();return false}return true}return{regtype:"default",defaultAirportCode:"",alreadyRegistered:false,confcode:"",usernamedefault:"",searchid:"",utils:{backendCall:function(y,z,A){u(y,z,A)}},facebook:{link:function(A,y,z){p();u(AjaxReg.remoteHost+"/k/run/fbauth/link",{accessToken:y||"",userId:z||""},function(B){if(B.status==0){R9.extend("globals",{formtoken:B.formToken});if(A){b();m();AjaxReg.alreadyRegistered=true;A()}else{v()}}else{if(B.status==1){FB.logout();j("linkConflict")}else{if(B.status==-1){l(B.message)}}}})},login:function(z,C,B,y,A){p();u(AjaxReg.remoteHost+"/k/run/fbauth/login",{confcode:B||"",confirm:z||0,accessToken:y||"",userId:A||"",sticky:true},function(D){if(D.status==0){R9.extend("globals",{formtoken:D.formToken});if(C){a();C()}else{v()}}else{if(D.status==1){if(D.message=="l"){j("link",null,function(E){E=jq(E);E.find("#ajaxlinkwelcome a").click(function(){b();FB.logout()});n(E);jq("#ajaxlinkfields").submit(x(C))})}else{j("fbWelcome",null,function(E){n(E);jq("#ajaxfbwelcome a").first().click(function(){jq("#ajaxfbwelcomefields").slideDown();jq("#ajaxfbwelcome a:first").slideUp();return false}).end().last().click(function(){AjaxReg.facebook.login(1,C,B);return false});jq("#ajaxfbwelcomefields").submit(x(C))})}}else{if(D.status==-1){l(D.message)}}}})},unlink:function(y){p();jq.ajax({type:"POST",url:"/k/run/fbauth/unlink",dataType:"json",success:function(z){if(z.status==0){R9.extend("globals",{formtoken:z.formToken});if(y){a();AjaxReg.alreadyRegistered=true;y()}else{v()}}else{l(z.message)}},error:e})}},ui:{linkWarning:function(z,y){j("linkWarning",null,function(A){n(A);d().click(function(){o();return R9.social.fbLink(z,y)})})},login:function(A){A=w(A);var z=Logger&&Logger.getInstance()||{log:jq.noop};z.log("fd/topstrip/kayaklogin",{},jq.noop,true);var B=jq("input[name=username]").val()||AjaxReg.usernamedefault;var y=jq("input[name=passwd]").val()||"";j("login",jq.extend({cc:AjaxReg.confcode,regtype:AjaxReg.regtype,srch:AjaxReg.searchid,un:B},A.data),function(C){n(C,A.error);jq(".fbReason a").click(q);jq(".loginWithFacebook .fbConnectButton").click(function(){return R9.social.fbLogin({confcode:AjaxReg.confcode,success:A.success})});jq("#ajaxtoggle a, #signupTab").click(function(){AjaxReg.ui.register(A);return false});var D=jq("#ajaxloginfields");jq("input[name=passwd]",D).val(y);D.submit(function(){if(t()){p();u("/k/run/auth/login",jq(this).serialize(),function(E){if(E.status==0){R9.extend("globals",{formtoken:E.formToken});if(A.success){AjaxReg.alreadyRegistered=true;A.success();a()}else{v()}}else{l(E.message)}})}return false});jq("input",D).focus(k);if(jq("input[name=username]",D).val()){jq("input[name=passwd]",D).focus()}else{jq("input[name=username]",D).focus()}})},register:function(A){A=w(A);var B=jq("input[name=username]").val()||AjaxReg.usernamedefault;var z=jq("input[name=passwd]").val()||"";var y=Logger&&Logger.getInstance()||{log:jq.noop};j("reg",jq.extend({regtype:AjaxReg.regtype,dac:AjaxReg.defaultAirportCode,cc:AjaxReg.confcode,un:B,srch:AjaxReg.searchid},A.data),function(C){n(C,A.error);jq(".fbReason a").click(q);jq(".loginWithFacebook .fbConnectButton").click(function(){return R9.social.fbLogin({confcode:AjaxReg.confcode,success:A.success})});jq("#ajaxoptin").click(function(){y.log("fd/topstrip/lastminutedeals/"+jq(this).is(":checked"),{},jq.noop,true)});jq("#ajaxregisterfields input[name=username]").emailValidator();var D=jq("#ajaxregisterfields");jq("input[name=passwd]",D).val(z);D.submit(function(){D.find(".highlight").removeClass("highlight");D.find('input[name="username"').val(jq.trim(this.username.value));if(!validateEmail(this.username.value)){alert("Please enter a valid email address.");this.username.focus();k();return false}if(this.airport.value.length==0){alert("Please enter a home airport.");this.airport.focus();k();return false}if(this.passwd.value.length==0){alert("Please enter a password");this.passwd.focus();k();return false}if(this.consent&&!this.consent.checked){alert("Please confirm that you have read and accept KAYAK Terms & Conditions");jq(this.consent).parent().addClass("highlight");this.consent.focus();k();return false}p();u("/k/run/auth/register",jq(this).serialize(),function(E){if(E.status==0){R9.extend("globals",{formtoken:E.formToken});if(A.success){AjaxReg.alreadyRegistered=true;A.success();a()}else{v()}}else{l(E.message)}});jq("input[name=username]",D).focus();return false});jq("#ajaxregisterfields input[name=airport]").r9AirportsSmarty({clearItem:function(E){jq("#ajaxregisterfields input[name=airportcode]").val("")},setItem:function(G,E,F){jq("#ajaxregisterfields input[name=airportcode]").val(E.id);G.elementNode.value=E.str},minWidth:175});jq("#ajaxtoggle a, , #loginTab").click(function(){AjaxReg.ui.login(A);return false})})},logout:function(y){p();jq.ajax({type:"POST",url:"/k/run/fbauth/logout",dataType:"json",success:function(z){if(z.status==0){R9.extend("globals",{formtoken:z.formToken});f();if(y){y()}else{v()}}else{l(z.message)}},error:e})}}}})(),AjaxAlert={_ajaxError:function(b,c,a){alert(c)},_doPost:function(a,b){jq("tr.error").hide();jq.ajax({type:"POST",url:a,data:b,dataType:"script",error:this._ajaxError})},_getDriveByData:function(){return jq("#ajaxalert").serialize()},showEmailAlertError:function(a){jq("#alerterrorrow").show();jq("#alertsuccessrow").hide();jq("#ajaxalerterror").html(a)},showDuplicateEmailAlertError:function(a,b){if(typeof showPriceAlertSaved=="function"){showPriceAlertSaved(a,b)}},emailAlertSaveSuccess:function(a){if(typeof showPriceAlertSaved=="function"){showPriceAlertSaved(a)}},saveEmailAlert:function(){this._doPost("/k/alertajax","action=save&"+jq("#ajaxalert").serialize())},saveHotelAlert:function(){this._doPost("/alerts/hrp/save",jq("#hotelalert").serialize())},hotelAlertSaveSuccess:function(a){if(typeof showAlertSaved=="function"){showAlertSaved(a)}},showHotelAlertError:function(a){if(typeof showAlertError=="function"){showAlertError(a)}},showDriveByAlertDialog:function(a,b){if(!b){b="driveby"}jq.ajax({type:"POST",url:"/s/toolbox",data:{action:"driveby",searchid:a,alertsrc:b},dataType:"html",success:function(c){jq(c).r9dialog({close:function(){toggleFaderPane(false)},width:371,isFixed:true})},error:this._ajaxError,cache:false})},saveAlertAjaxReg:function(d,a,b){var f=this._getDriveByData();if(AjaxReg.alreadyRegistered){AjaxAlert.saveDriveByEmailAlert(f)}else{var c=jq("#ajaxalert"),e=c.find("input:hidden[name=alertsrc]").val();AjaxReg.regtype=e;AjaxReg.searchid=d;if(a){AjaxReg.usernamedefault=a}AjaxReg.ui[b?"login":"register"]({success:function(){AjaxAlert.saveDriveByEmailAlert(f)},data:{alertsrc:e,hid:c.find("input:hidden[name=hid]").val()}})}},saveDriveByEmailAlert:function(a){this._doPost("/k/alertajax","action=save&"+(a||jq("#ajaxalert").serialize()))},saveChangeHomeAirportError:function(a){jq("tr.successrow").hide();jq("#ajaxairporterror").html(a);jq("#dealerrorrow").show();jq("tr.buttonrow").show();jq("tr.inputrow").show()},saveChangeHomeAirportSuccess:function(){saveChangeHomeAirport_clientSuccess()},saveChangeHomeAirport:function(){this._doPost("/k/savehomeairportajax","action=save&"+jq("#ajaxchangehome").serialize())},disableDisplayAds:function(){jq.ajax({type:"GET",url:"/s/sparkle",data:"action=hidedisplayads&formtoken="+R9.globals.formtoken+"&"+jq("#ajaxalert").serialize(),dataType:"text",success:function(){jq("#displayAd1, #displayAd2, #displayAd3, #displayAd4, .hidedisplayad").hide("slow",function(){if(window.R9&&R9.RP&&R9.RP.FloatingAd){R9.RP.FloatingAd.refresh()}})},error:this._ajaxError,cache:false})}};function formatDate(f){if(f.length<6){return false}if(f.length>10){return false}if(f.indexOf("/")>=0){var e=f.split("/");if(e.length!=3){return false}if(e[0].length==0||e[1].length==0||e[2].length==0){return false}var a=parseInt(e[1],10);var d=parseInt(e[0],10);var c=parseInt(e[2],10)}else{if(f.indexOf("-")>=0){var e=f.split("-");if(e.length!=3){return false}if(e[0].length==0||e[1].length==0||e[2].length==0){return false}var a=parseInt(e[2],10);var d=parseInt(e[1],10);var c=parseInt(e[0],10)}else{if(f.indexOf(".")>=0){var e=f.split(".");if(e.length!=3){return false}if(e[0].length==0||e[1].length==0||e[2].length==0){return false}var a=parseInt(e[0],10);var d=parseInt(e[1],10);var c=parseInt(e[2],10)}else{return false}}}if(c<100){if(c<30){c+=2000}else{c+=1900}}if(!isValidDate(c,d,a)){return false}var b="";if(d<10){b+="0"}b+=d+"/";if(a<10){b+="0"}b+=a+"/";b+=c;return b}function isValidDate(c,d,a){if(c>=1970){var b=new Date(c,d-1,a);if(a!=b.getDate()){return false}if(d!=(b.getMonth()+1)){return false}if(c!=b.getFullYear()){return false}}else{if((a<1)||(a>31)){return false}if((d<1)||(d>12)){return false}if((c<1000)||(c>3000)){return false}}if(a>28){if(getNumberOfDays(c,d)<a){return false}}return true}function getNumberOfDays(a,b){switch(b){case 2:if(isLeapYear(a)){return 29}return 28;break;case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;break;default:return 30}}function isLeapYear(a){return(((a%4==0)&&(a%100!=0))||(a%400==0))}function validDate(b){if(b.value.length==0){return true}if(!formatDate(b.value)){alert("Please enter a valid date. (MM/DD/YYYY format)");b.focus();b.select();return false}var a=formatDate(b.value);if(isNaN(Date.parse(a))){alert("Please enter a valid date. (MM/DD/YYYY format)");b.focus();b.select();return false}b.value=a;return true}function parseDate(d){var f=d.split("/");var e=parseInt(zeroUnpad(f[0]));var a=parseInt(zeroUnpad(f[1]));var c=parseInt(zeroUnpad(f[2]));var b=new Date(c,e-1,a);return b}function zeroPad(a){if(a.length==1){return"0"+a}return a}function zeroUnpad(a){a=""+a;if(a.match(/^0/)){return a.substring(1)}return a}function addDays(c,e){c.setDate(c.getDate()+e);var d=c.getMonth()+1;var a=c.getDate();var b=c.getYear();if(b<1900){b+=1900}return zeroPad(d)+"/"+zeroPad(a)+"/"+b}function countDays(c,a){c.setUTCMilliseconds(0);c.setUTCSeconds(0);c.setUTCMinutes(0);c.setUTCHours(12);a.setUTCMilliseconds(0);a.setUTCSeconds(0);a.setUTCMinutes(0);a.setUTCHours(13);var b=a.getTime()-c.getTime();return Math.floor(b/(1000*60*60*24))}function existsInArray(c,a){for(var b=0;b<c.length;b++){if(c[b]==a){return true}}return false}Date.prototype.formatDate=function(input,time){var switches=["a","A","B","d","D","F","g","G","h","H","i","j","l","L","m","M","n","O","r","s","t","T","U","w","y","Y","z"];var daysLong=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var daysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"];function a(){return self.getHours()>11?"pm":"am"}function A(){return self.getHours()>11?"PM":"AM"}function B(){var off=(self.getTimezoneOffset()+60)*60;var theSeconds=(self.getHours()*3600)+(self.getMinutes()*60)+self.getSeconds()+off;var beat=Math.floor(theSeconds/86.4);if(beat>1000){beat-=1000}if(beat<0){beat+=1000}if((""+beat).length==1){beat="00"+beat}if((""+beat).length==2){beat="0"+beat}return beat}function d(){return new String(self.getDate()).length==1?"0"+self.getDate():self.getDate()}function D(){return daysShort[self.getDay()]}function F(){return monthsLong[self.getMonth()]}function g(){return self.getHours()>12?self.getHours()-12:self.getHours()}function G(){return self.getHours()}function h(){if(self.getHours()>12){var s=new String(self.getHours()-12);return s.length==1?"0"+(self.getHours()-12):self.getHours()-12}else{var s=new String(self.getHours());return s.length==1?"0"+self.getHours():self.getHours()}}function H(){return new String(self.getHours()).length==1?"0"+self.getHours():self.getHours()}function i(){return new String(self.getMinutes()).length==1?"0"+self.getMinutes():self.getMinutes()}function j(){return self.getDate()}function l(){return daysLong[self.getDay()]}function L(){var y_=Y();if((y_%4==0&&y_%100!=0)||(y_%4==0&&y_%100==0&&y_%400==0)){return 1}else{return 0}}function m(){return self.getMonth()<9?"0"+(self.getMonth()+1):self.getMonth()+1}function M(){return monthsShort[self.getMonth()]}function n(){return self.getMonth()+1}function O(){var os=Math.abs(self.getTimezoneOffset());var h=""+Math.floor(os/60);var m=""+(os%60);h.length==1?h="0"+h:1;m.length==1?m="0"+m:1;return self.getTimezoneOffset()<0?"+"+h+m:"-"+h+m}function r(){var r;r=D()+", "+j()+" "+M()+" "+Y()+" "+H()+":"+i()+":"+s()+" "+O();return r}function s(){return new String(self.getSeconds()).length==1?"0"+self.getSeconds():self.getSeconds()}function t(){var daysinmonths=[null,31,28,31,30,31,30,31,31,30,31,30,31];if(L()==1&&n()==2){return 29}return daysinmonths[n()]}function T(){return G()+":"+i()}function U(){return Math.round(self.getTime()/1000)}function W(){var beforeNY=364+L()-z();var afterNY=z();var weekday=w()!=0?w()-1:6;if(beforeNY<=2&&weekday<=2-beforeNY){return 1}var ny=new Date("January 1 "+Y()+" 00:00:00");var nyDay=ny.getDay()!=0?ny.getDay()-1:6;if((afterNY<=2)&&(nyDay>=4)&&(afterNY>=(6-nyDay))){var prevNY=new Date("December 31 "+(Y()-1)+" 00:00:00");return prevNY.formatDate("W")}if(nyDay<=3){return 1+Math.floor((z()+nyDay)/7)}else{return 1+Math.floor((z()-(7-nyDay))/7)}}function w(){return self.getDay()}function Y(){if(self.getFullYear){var newDate=new Date("January 1 2001 00:00:00 +0000");var x=newDate.getFullYear();if(x==2001){return self.getFullYear()}}var x=self.getYear();var y=x%100;y+=(y<38)?2000:1900;return y}function y(){var y=Y()+"";return y.substring(y.length-2,y.length)}function z(){var t=new Date("January 1 "+Y()+" 00:00:00");var diff=self.getTime()-t.getTime();return Math.floor(diff/1000/60/60/24)}var self=this;if(time){var prevTime=self.getTime();self.setTime(time)}var ia=input.split("");var ij=0;while(ia[ij]){if(ia[ij]=="\\"){ia.splice(ij,1)}else{if(existsInArray(switches,ia[ij])){ia[ij]=eval(ia[ij]+"()")}}ij++}if(prevTime){self.setTime(prevTime)}return ia.join("")};Date.prototype.formatUTCDate=function(input,time){var switches=["a","A","B","d","D","F","g","G","h","H","i","j","l","L","m","M","n","O","r","s","t","T","U","w","y","Y","z"];var daysLong=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var daysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"];function a(){return self.getUTCHours()>11?"pm":"am"}function A(){return self.getUTCHours()>11?"PM":"AM"}function B(){var off=(self.getTimezoneOffset()+60)*60;var theSeconds=(self.getHours()*3600)+(self.getMinutes()*60)+self.getSeconds()+off;var beat=Math.floor(theSeconds/86.4);if(beat>1000){beat-=1000}if(beat<0){beat+=1000}if((""+beat).length==1){beat="00"+beat}if((""+beat).length==2){beat="0"+beat}return beat}function d(){return new String(self.getDate()).length==1?"0"+self.getDate():self.getUTCDate()}function D(){return daysShort[self.getUTCDay()]}function F(){return monthsLong[self.getUTCMonth()]}function g(){return self.getUTCHours()>12?self.getUTCHours()-12:self.getUTCHours()}function G(){return self.getUTCHours()}function h(){if(self.getUTCHours()>12){var s=new String(self.getUTCHours()-12);return s.length==1?"0"+(self.getUTCHours()-12):self.getUTCHours()-12}else{var s=new String(self.getUTCHours());return s.length==1?"0"+self.getUTCHours():self.getUTCHours()}}function H(){return new String(self.getUTCHours()).length==1?"0"+self.getUTCHours():self.getUTCHours()}function i(){return new String(self.getUTCMinutes()).length==1?"0"+self.getUTCMinutes():self.getUTCMinutes()}function j(){return self.getUTCDate()}function l(){return daysLong[self.getUTCDay()]}function L(){var y_=Y();if((y_%4==0&&y_%100!=0)||(y_%4==0&&y_%100==0&&y_%400==0)){return 1}else{return 0}}function m(){return self.getUTCMonth()<9?"0"+(self.getUTCMonth()+1):self.getUTCMonth()+1}function M(){return monthsShort[self.getUTCMonth()]}function n(){return self.getUTCMonth()+1}function O(){var os=Math.abs(self.getTimezoneOffset());var h=""+Math.floor(os/60);var m=""+(os%60);h.length==1?h="0"+h:1;m.length==1?m="0"+m:1;return self.getTimezoneOffset()<0?"+"+h+m:"-"+h+m}function r(){var r;r=D()+", "+j()+" "+M()+" "+Y()+" "+H()+":"+i()+":"+s()+" "+O();return r}function s(){return new String(self.getUTCSeconds()).length==1?"0"+self.getUTCSeconds():self.getUTCSeconds()}function t(){var daysinmonths=[null,31,28,31,30,31,30,31,31,30,31,30,31];if(L()==1&&n()==2){return 29}return daysinmonths[n()]}function T(){return G()+":"+i()}function U(){return Math.round(self.getTime()/1000)}function w(){return self.getUTCDay()}function Y(){if(self.getUTCFullYear){var newDate=new Date("January 1 2001 00:00:00 +0000");var x=newDate.getUTCFullYear();if(x==2001){return self.getUTCFullYear()}}var x=self.getUTCYear();var y=x%100;y+=(y<38)?2000:1900;return y}function y(){var y=Y()+"";return y.substring(y.length-2,y.length)}function z(){var t=new Date("January 1 "+Y()+" 00:00:00");var diff=self.getTime()-t.getTime();return Math.floor(diff/1000/60/60/24)}var self=this;if(time){var prevTime=self.getTime();self.setTime(time)}var ia=input.split("");var ij=0;while(ia[ij]){if(ia[ij]=="\\"){ia.splice(ij,1)}else{if(existsInArray(switches,ia[ij])){ia[ij]=eval(ia[ij]+"()")}}ij++}if(prevTime){self.setTime(prevTime)}return ia.join("")};function getShortTime(d,c){if(c==null||isFlexDate){c=false}var a=d.getUTCHours();var b=d.getUTCMinutes();if(b<10){b="0"+b}if(c){return d.formatUTCDate("D T")}else{return d.formatUTCDate("T")}}function getShortDate(a){return a.formatUTCDate("j M")}function getShortTime(e,d){if(d==null||isFlexDate){d=false}var a=e.getUTCHours();if(a>=13){a=a-12}else{if(a==0){a=12}}var c=e.getUTCMinutes();if(c<10){c="0"+c}var b=(e.getUTCHours()>=12)?"p":"a";if(d){return dow[e.getUTCDay()]+" "+a+":"+c+b}else{return a+":"+c+b}}function getShortDate(a){return a.formatUTCDate("M j")}(function(){var d=27,k=9,a=18,m=38,j=40,c=37,g=39,e=13,l=16,f="smartboxOptions",b,h={air:1,car:2,hotel:3,any:4,crc:5,crcg:6,deal:7,crcga:8,hotelname:11,brandname:15};function n(){if(b){try{b.abort()}catch(o){}}}jq.fn.smartbox=function(s,q,p){if(s&&!jq.isPlainObject(s)){if(s==="option"){this.data(f)[q]=p}return this}s=jq.extend({},jq.fn.smartbox.defaults,s);var u,t;function o(){return jq(u).find("ul li")}function w(v){var x=o();retIndex=x.index(v);return retIndex==-1?0:retIndex}function r(){u.style.display=t.style.display="none"}this.each(function(){var H=jq(this),E=0,J,B,N,O,y=0,G=false,x=false;function A(){if(u){u.style.display="none"}if(t){t.style.display="none"}G=true;H.trigger("sbclose")}function F(){return H.data(f)}function C(){B=w(this);z(B);A()}function D(){B=-1;L(-1)}function M(){B=w(this);L(B)}function L(Q){var R=F().itemHighlightClass;var S=o();S.removeClass(R);if(Q>=0){jq(S[Q]).addClass(R);B=Q}}function z(S){var V=F();if(S<0){J="";H.data(V.dataKey,"");if(V.callbackWithNull){V.callback.call(H[0],null)}}else{var U=o();if(U.length>0){var T=U[S],R=T.id.split("-"),W="";if(R.length>1){W=R[1]}H.data(V.dataKey,W).val(jq(T).text());var Q=jq.extend({id:W,str:T.innerHTML,type:R[0]},jq(T).data());if(Q.type=="isl"&&R.length>1){codes=R[1].split("/");Q.str=codes[0]}if(R.length>2){Q.hc=R[2]}if(R.length>3){if(Q.type==="hotel"){Q.hid=R[3]}else{if(Q.type==="rest"){Q.rtid=R[3]}else{Q.lmid=R[3]}}}V.callback.call(H[0],Q)}}H.trigger("sbset",[S])}function K(){var V=F(),S=u.style,U=t.style;S.display="inline";if(!window.opera){U.display="inline"}var T=Math.min(V.maxWidth,Math.max(V.minWidth,u.offsetWidth));S.width=U.width=T+"px";var R=H.offset(),Q=R.left;if(V.position==="right"){Q+=H.width()-T-2}S.left=Q+"px";S.top=(R.top+H.outerHeight())+"px";U.height=u.offsetHeight+"px";U.top=S.top;U.left=S.left}function P(){var T=F(),S=H.val().toUpperCase(),Q="";if(T.recentList!=null&&T.recentList.length>0){for(var R=0;R<T.recentList.length;R++){if(T.keyPressed&&S.length>0&&T.recentList[R].display.toUpperCase().indexOf(S)<0){continue}if(Q.length==0){Q="<li class='separator'><b>Recently searched:</b></li>"}Q+="<li id='"+T.recentList[R].code+"' class='"+T.recentList[R].className+"'>"+T.recentList[R].display+"</li>"}}if(jq.trim(Q).length==0){return null}return Q}function v(){H.trigger("sbopen");var S=F(),R=H.val();if(J.length>0&&J==R){return}if(R.length<S.minChars){I(null);return}J=R;var Q=jq.extend({f:"h",lc:S.localeLanguage,lc_cc:S.localeCountry,s:h[S.searchType]||S.searchType,where:J},S.getSmartData!=null?S.getSmartData():S.smartData);if(S.countryCode){Q.cc=S.countryCode}b=jq.post(S.smartUrl,Q,I,"text")}function I(T){var U=F();var R=P();if(R==null&&T==null){return}var Q=(T==null)?1:0;T=(T||"<ul>");if(R!=null&&T.length>0&&T.indexOf("</ul>")>0){T=T.substr(0,T.indexOf("</ul>"))}T+=(R||"")+"</ul>";if(typeof U.addCustomDataStyle=="function"){T=U.addCustomDataStyle(T)}T+=U.customHTML;u.innerHTML=T;if(U.maxResults){jq(u).find("ul li").slice(U.maxResults).remove()}var S=o();O=S.length;if(O>0){S.mousedown(C).mouseout(D).mouseover(M);u.style.width="auto";K()}else{r()}B=(U.forceSelection||(U.forceSingle&&O==1)?Q:-1);N=B;L(B)}jq(this).attr({autocomplete:"off",autocapitalize:"off",autocorrect:"off"}).blur(function(){var Q=F();if(!H.data(Q.dataKey)){if(((B>=0&&Q.forceSelection&&!Q.noForceOnBlur)||(Q.forceSingle&&O==1)||(B<=0&&Q.forceFirstSelection&&!Q.noForceOnBlur))){z(0)}else{if(Q.promptText){H.css("color",Q.promptColor).val(Q.promptText);x=true}}}n();A();G=false}).data(f,s).click(function(){var Q=F();if(Q.recentList!=null&&Q.recentList.length>0){n();v()}}).focus(function(){var T=F();T.keyPressed=false;if(x){H.css("color","").val("");x=false}var R=T.targetId;u=document.getElementById(R)||jq("<div/>",{id:R,css:{display:"none",position:"absolute",width:"auto",zIndex:5001}}).appendTo("body")[0];u.className=T.targetClass||"smartbox";u.className+=" "+u.className+"-"+T.searchType;var S=T.targetBGId;t=document.getElementById(S)||jq("<iframe/>",{id:S,css:{display:"none",position:"absolute",zIndex:5000},frameborder:0,scrolling:"no"}).appendTo("body")[0];J="";B=N=-1;G=false;if(H.size()&&H.val().length>0&&T.searchOnFocus){v()}else{if(T.getInitData){var Q=T.getInitData.call();if(Q){I(Q)}}}}).keydown(function(R){var S=F();var Q=document.all?R.keyCode:R.which;E=Q;y=new Date().getTime();S.keyPressed=true;switch(Q){case c:case m:B=Math.max(B-1,0);L(B);break;case g:case j:B=Math.min(B+1,O-1);L(B);break;case e:if(O>0){z(B);A()}break;case d:A();break;case k:if(B>=0&&B<O){z(B)}break;case a:case l:break;default:B=-1;z(-1);setTimeout(function(){if(E==e){return}if(H.size()&&H.val().length>0){n();v()}else{z(-1);A()}},1);break}}).keypress(function(){var Q=!G;G=false;return Q?true:E!=e})});return this};jq.fn.smartbox.defaults={callback:jq.noop,callbackWithNull:false,countryCode:null,dataKey:"smartbox",forceSelection:true,forceFirstSelection:false,forceSingle:false,itemHighlightClass:"smartbox-hover",localeCountry:"US",localeLanguage:"en",maxResults:null,maxWidth:1000,minChars:1,minWidth:50,position:"left",promptColor:"#666",promptText:null,recentList:null,searchType:"air",smartData:{},smartUrl:"/m/smarty",targetClass:null,targetId:"smartbox",targetBGId:"smartboxBG",customHTML:""}})();var R9=R9||{};R9.ui=(function(){var a=false;var b=null;var c=false;return{initHeader:function(){if(jq.support.touch||typeof(window.ontouchstart)!="undefined"){jq("html").addClass("touch");c=true;jq.ui.r9dialog.prototype.options.draggable=false;jq.datepicker._defaults.showButtonPanel=true}else{jq("html").addClass("no-touch")}if(window.devicePixelRatio>1){var d=jq("#logoimg");if(d.length==1){if(d.attr("src").match(/kayak-logo.png$/)){d.attr("src","http://cdn3.kayak.com/v54490/images/kayak-logo@2x.png")}}}jq("#headermenudropdown a#logoutlink").click(function(){var e=jq(this).attr("href");if(typeof FB==="undefined"){var f=setTimeout(function(){window.location.href=e},3000);jq(document).bind("r9.facebook.api.loaded",function(){clearTimeout(f);g()})}else{g()}function g(){if(FB&&FB.getAuthResponse()){var h=setTimeout(function(){window.location.href=e},3000);FB.logout(function(){clearTimeout(h);window.location.href=e})}else{window.location.href=e}}return false});jq("#proflinksmenu").click(function(){var e=jq(this).offset();isHidden=!jq("#headermenudropdown").is(":visible");jq("#headermenudropdown").css({left:e.left,top:e.top+jq(this).height()+3}).show();jq("#proflinksmenu").addClass("mopen");hideMeOnPopup(isHidden);if(isHidden){window.setTimeout(function(){jq("body").one("click",function(){jq("#headermenudropdown").hide();jq("#proflinksmenu").removeClass("mopen");hideMeOnPopup(false)})},1)}})},isTouchDevice:function(){return c},initMapsAPI:function(e){b=e;var d=document.createElement("script");d.src="  http://maps.google.com/maps/api/js?sensor=false&callback=R9.ui.initMapsAPIComplete&v=3.6&client=gme-kayaksoftwarecorporation&signature=6tWafjYjdu83OLfcKvQXrdQKQGU";d.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(d);addAdt("google/maps/r9ui.js")},initMapsAPIComplete:function(d){a=true;b(d)},isMapsAPIInitialized:function(){return a},doAfterMapsAPIInitialized:function(d){if(!a){this.initMapsAPI(d)}else{d()}}}})();jq(R9.ui.initHeader);var bound=false;function hoverDisclaimer(b,c,a,e){if(jq("#ttipDXC").is(":visible")){return}if(!bound){jq("a.disclaim, span.disclaim, span.closeareadis").click(function(f){f.stopPropagation()});bound=true}var d=new Object();if(a==null){a=20}if(e==null){e=-20}d.x=a;d.y=e;if(c){hideTTType("DX");hideTTType("DT");hideTTType("DG");showTT(b,"","DXC",d,true)}else{showTT(b,"","DX",d,true)}}function hideDisclaimerClicked(a){if(a==null){a=true}if(a){hideAllTT(false)}else{hideTTType("DXC")}}function hideDisclaimer(a){if(jq("#ttipDXC").is(":visible")){return}if(a==null){a=true}if(a){hideAllTT(false)}else{hideTTType("DX");hideTTType("DT");hideTTType("DG")}}function XXX_emailDealSaveSuccess_clientSuccess(){alert("You are now subscribed to our deals email newsletter.");document.getElementById("dealemail").value="";document.getElementById("homeairport").value="";document.getElementById("homeairporthint").value=""}function XXX_emailDealSaveSuccess_clientError(a){alert(""+a)}function sampleNewsletter(){document.location.href="/h/newsletter/livedemo/deals?username="+encodeURIComponent(document.getElementById("dealemail").value)+"&homeairport="+encodeURIComponent(document.getElementById("homeairporthint").value)}function setDealsEmail(a){if(!validateEmail(document.getElementById("dealemail").value)){alert("Please enter a valid email address.")}else{saveEmailDeal(a)}}function showEmailDealError(a){XXX_emailDealSaveSuccess_clientError(a)}function emailDealSaveSuccess(){XXX_emailDealSaveSuccess_clientSuccess()}function saveEmailDeal(a){var b="action=save&src="+(a||"")+"&email="+encodeURIComponent(document.getElementById("dealemail").value)+"&homeairport="+encodeURIComponent(document.getElementById("homeairporthint").value);jq.ajax({type:"POST",url:"/k/dealajax",data:b,dataType:"script",success:function(c){},error:function(d,e,c){if(typeof this.callbackfail=="function"){this.callbackfail(d,e,c)}else{alert(e)}},cache:false})}jq(function(){jq("#homeairport").r9AirportsSmarty({clearItem:function(a){jq("#homeairporthint").val("")},setItem:function(c,a,b){c.elementNode.value=a.str;jq("#homeairporthint").val(a.id)},minWidth:175})});function generateFlightsUrl(c,o,d,a,n,m){var b="";if(o!=null&&m!="weekend"){b=generateLegParams(c,-1,o,m);if("openflex"==m){d=new Date(o.getTime());d.setDate(d.getDate()+30)}if(d!=null){var p=dateToString(d);b=b+"/"+p;b+=getTimeOption(c.return_time.value);if(m!="openflex"){b+=getFlexOption(c.return_date_flex.value)}else{var k=c.lengthofstay.value.replace("-","to").replace(/ /g,"");b+="-flexible-calendar-"+k}}if(c.prefer_nonstop!=undefined&&(c.prefer_nonstop.checked||c.prefer_nonstop.value=="Y")){b+="/nonstop"}}else{if(a){for(var g=0;g<n;g++){if(c["origin"+g]==null||c["origin"+g].value==""){break}if(g>0){b+="/"}b+=generateLegParams(c,g,a[g],"exact")}if(c.prefer_nonstop!=undefined&&(c.prefer_nonstop.checked||c.prefer_nonstop.value=="Y")){b+="/nonstop"}}else{b=generateOaD(c,"");b+="/weekend";var q=generateWeekendDays(c);var e=c.weekend_depart_date.value;if(e!="WEEKEND"){b+="/"+e.substr(0,4)+"-"+e.substr(4);if(q!=""){b+="-"+q}}else{if(q!=""){b+="/"+q}}}}b+=getCabinClass(c.cabin.value);if((c&&c.adults)&&((jq(c.adults).val()!="0")||(c.children&&jq(c.children).val()!="0")||(c.seniors&&jq(c.seniors).val()!="0"))){var h=parseInt(c.adults.value,10);var f=parseInt(c.seniors.value,10);var j=parseInt(c.children.value,10);if(h>1||f>0||j>0){b+="/"+h+"adults"}if(f>0){b+="/"+f+"seniors"}if(j>0){b+="/children";for(var g=1;g<=j;g++){b+="-"+jq(c["childAge"+g]).val()}}}else{var l=c.travelers.value;if(l>1){b+="/"+l+"adults"}}return"/flights/"+b}function generateLegParams(b,k,g,f){var h="";if(k>-1){h=k+""}var c="depart_time"+h;var j="flex"+h;var a=generateOaD(b,h);var e=dateToString(g);a=a+"/"+e;a+=getTimeOption(b[c].value);var d;if(k==-1&&f!="openflex"){a+=getFlexOption(b.depart_date_flex.value)}else{if(f=="openflex"){a+="-flexible-calendar-0"}}return a}function generateOaD(c,m){var n="origin"+m;var j="destination"+m;var o="origincode"+m;var f="destcode"+m;var l="nearbyO"+m;var b="nearbyD"+m;var e=new RegExp("(([A-Z]{3}))","g");var d=c[o].value.substr(0,3);if(d==""||d.indexOf("C-")==0){d=c[n].value+"";d=d.replace(/ /g,"");if(d.indexOf("(")!=-1){var h=e.exec(d);if(h!=null){d=h[0]}}}var k=c[f].value.substr(0,3);if(k==""||k.indexOf("C-")==0){k=c[j].value+"";k=k.replace(/ /g,"");if(k.indexOf("(")!=-1){e.compile(e);var g=e.exec(k);if(g!=null){k=g[0]}}}var a=d;if(c[l]&&c[l].checked){a+=",nearby"}a+="-"+k;if(c[b]&&c[b].checked){a+=",nearby"}return a}function dateToString(c){var d=c.getMonth()+1;if(d<10){d="0"+d}var a=c.getDate();if(a<10){a="0"+a}var b=c.getFullYear()+"-"+d+"-"+a;return b}function getTimeOption(a){if(a=="a"){return""}else{if(a=="r"){return"-early-morning"}else{if(a=="m"){return"-morning"}else{if(a=="n"){return"-afternoon"}else{if(a=="e"){return"-evening"}else{if(a=="l"){return"-night"}else{return"-"+a+"h"}}}}}}}function getCabinClass(a){if(a=="p"){return"/premium"}else{if(a=="b"){return"/business"}else{if(a=="f"){return"/first"}}}return""}function generateWeekendDays(c){var b=c.weekend_depart.value;var a=c.weekend_return.value;var d="";if(b!="FRIDAY_ANYTIME"||a!="SUNDAY_ANYTIME"){d=generateWeekendDay(b)+"-"+generateWeekendDay(a)}return d}function generateWeekendDay(a){if(a=="THURSDAY_ANYTIME"){return"Thu"}else{if(a=="THURSDAY_AM"){return"Thu-AM"}else{if(a=="THURSDAY_PM"){return"Thu-PM"}else{if(a=="FRIDAY_ANYTIME"){return"Fri"}else{if(a=="FRIDAY_AM"){return"Fri-AM"}else{if(a=="FRIDAY_PM"){return"Fri-PM"}else{if(a=="SATURDAY_ANYTIME"){return"Sat"}else{if(a=="SATURDAY_AM"){return"Sat-AM"}else{if(a=="SUNDAY_ANYTIME"){return"Sun"}else{if(a=="SUNDAY_AM"){return"Sun-AM"}else{if(a=="SUNDAY_PM"){return"Sun-PM"}else{if(a=="MONDAY_ANYTIME"){return"Mon"}else{if(a=="MONDAY_AM"){return"Mon-AM"}else{if(a=="MONDAY_PM"){return"Mon-PM"}}}}}}}}}}}}}}return""}function getFlexOption(a){if(a=="plusminusthree"){return"-flexible"}else{if(a=="plusminustwo"){return"-flexible-2days"}else{if(a=="plusminusone"){return"-flexible-1day"}else{if(a=="plusone"){return"-flexible-1day-after"}else{if(a=="minusone"){return"-flexible-1day-before"}}}}}return""}function generateVacationsUrl(c,s,m){var a="";var n="origin";var u="destination";var o="origincode";var v="destcode";var f=new RegExp("(([A-Z]{3}))","g");var k=c[o].value.substr(0,3);if(k==""){k=c[n].value+"";k=k.replace(/ /g,"");if(k.indexOf("(")!=-1){var g=f.exec(k);if(g!=null){k=g[0]}}}var t=c[v].value.substr(0,3);if(t==""){t=c[u].value+"";t=t.replace(/ /g,"");if(t.indexOf("(")!=-1){f.compile(f);var w=f.exec(t);if(w!=null){t=w[0]}}}a=k+"-"+t;var q=dateToString(s);a=a+"/"+q;var e=dateToString(m);a=a+"/"+e;var p=c.kids.value;var b=c.adults.value;if(b!=2||p>0){a+="/"+b+"adult";if(b>1){a+="s"}}if(p>0){var d=0;var j=0;var h="";for(var r=1;r<=p;r++){var l=c["childAge"+r].value;if(l<2){j++}else{d++;if(d>1){h+=","}h+=l}}if(d>0){a+="/"+d+"child";if(d>1){a+="ren"}a+="-age"+h}if(j>0){a+="/"+j+"infant";if(j>1){a+="s"}}}return"/vacations/"+a}function dateToString(c){var d=c.getMonth()+1;if(d<10){d="0"+d}var a=c.getDate();if(a<10){a="0"+a}var b=c.getFullYear()+"-"+d+"-"+a;return b}function generateCruisesUrl(f){var h="";if(f.dep_date.value!=""){var d=f.dep_date.value.substr(0,4);var g=f.dep_date.value.substr(4,2);h=d+"-"+g}var a=f.destination;if(a.value!="ALL"){h+="/"+generateDestOrLineString(a.options[a.selectedIndex].text)}var c=f.cruiseline;if(typeof c.value!="undefined"&&c.value!=""){h+="/"+generateDestOrLineString(c.options[c.selectedIndex].text)}var e=f.length;if(e.value!="ALL"){h+="/"+generateLength(e)}if(f.senior!=undefined&&f.senior.checked){h+="/senior"}var b=f.region_code.value;if(b!=""){h+="/state-"+b}return"/cruises/"+h}function generateDestOrLineString(b){var a=b+"";return a.replace(/\//g,"-").replace(/\s-\s/g,"-").replace(/\s/g,"-")}function generateLength(a){return a.options[a.selectedIndex].text.replace(" ","").replace("+","-").toLowerCase()}function encodeLocation(b){var a=b+"";return R9.Common.RemoveAccents.removeAccentedChars(a.replace(/, /g,",").replace(/ - /g,",").replace(/ /g,"-")).replace(/[^A-Za-z0-9_\-,.]/g,"")}function generateHotelsUrl(b,o,c,d){var e=(b.hid!=undefined&&b.hid.value!=""&&b.hid.value!=null);if(d&&e){window.samepageresults=false}var j=b.othercity.value;var n="-c";var k=b.address!=undefined?b.address.value:"";if(k!=""){j=k;if(k.indexOf(b.location.value)==-1){j+=","+b.location.value}n="-a"}var a=encodeLocation(j);var g=b.citycode.value;if(g!=""){a+=n+g}if(e){a+="-h"+b.hid.value;if(d){a+="-details"}}else{if(b.lmid!=undefined&&b.lmid.value!=""&&b.lmid.value!=null){a+="-l"+b.lmid.value}}if(b.minstars&&b.minstars.value&&parseInt(b.minstars.value,10)>=2){a+="-"+b.minstars.value+"stars"}if(o!=null){a+="/"+dateToString(o)+"/"+dateToString(c)}var f=b.rooms.value;var h=b.guests1!=undefined?b.guests1.value:b.guests.value;if(f>1){var l=b["guests"+f];if(l!=undefined){h=l.value}}if(h>1){a+="/"+h+"guests"}var f=b.rooms.value;if(f>1){a+="/"+f+"rooms"}var m=b.address_nickname!=undefined?b.address_nickname.value:"";if(m!=""&&m!=k){a+="/at-"+encodeLocation(m)}return"/hotels/"+a}function generateCarsUrl(e,d,b){var a=e.citycode1.value;var f=null;var g=e.oneway.value==undefined?e.oneway[1].checked:e.oneway.value=="y";if(a.indexOf("/")==3){f=a.substring(0,3)+"-a"+a.substring(4)}if(f==null){f=encodeLocation(e.location.value)+"-c"+a}if(g){f+="/";var h=e.citycode2.value;var c=null;if(h.indexOf("/")==3){c=h.substring(0,3)+"-a"+h.substring(4)}if(c!=null){f+=c}else{f+=encodeLocation(e.location2.value)+"-c"+h}}if(e.inlinepickup_hour!=undefined){f+="/"+generateDateTime(e,"inlinepickup",d);f+="/"+generateDateTime(e,"inlinedropoff",b)}else{f+="/"+generateDateTime(e,"pickup",d);f+="/"+generateDateTime(e,"dropoff",b)}return"/cars/"+f}function generateDateTime(c,e,b){var d=dateToString(b);var a=c[e+"_hour"].value;if(a!=12){d+="-"+a+"h"}return d}function dateToString(c){var d=c.getMonth()+1;if(d<10){d="0"+d}var a=c.getDate();if(a<10){a="0"+a}var b=c.getFullYear()+"-"+d+"-"+a;return b}function generatePackageToursUrl(a){return"/packagetours/"+generatePackageToursAbsoluteUrl(a)}function generatePackageToursAbsoluteUrl(b){var c="",a=packageToursOptionalParams(b);c+=createSearchCriteriaUrl(b.searchCriteriaJson.value);c+="/"+b.departDate.value;c+="/"+b.returnDate.value;c+="/"+b.adults.value;c+="/"+b.child1.value+","+b.child2.value+","+b.child3.value;c+="/"+b.duration.value;c+="/"+b.category.value;c+="/"+(generateDepartureAirport(b)||"-");c+="/"+b.maxPrice.value;c+="/";if(a){c+=serializePackageToursParams(a,":",";");c+=";"}if(b.showHeaderImage.value==="false"){c+="nimg;"}return c}function serializePackageToursParams(d,c,b){var a=[];jq.each(d,function(e,f){a.push(e+c+f)});return a.join(b)}function generateDepartureAirport(c){var b=new RegExp("(([A-Z]{3}))","g");var a=c.origincode.value.substr(0,3);if(a===""||a.indexOf("C-")==0){a=c.origin.value+"";a=a.replace(/ /g,"");if(a.indexOf("(")!=-1){var d=b.exec(a);if(d!=null){a=d[0]}else{a=""}}else{if(b.exec(a)===null){a=""}}}return a==""?"-":a}function packageToursOptionalParams(b){var k=jq(".advancedOption",jq("#searchFormMoreOptionsDiv, #filtersblock")),m=jq("input[name='SHOWEMPTY']"),p=k.find("select"),d=k.find("input:checked"),g=jq("#hotelsOnly:checked"),n=jq("#select_sort"),o={},f=[],j=[],a;if(p.length>0){p.each(function(){if(jq.trim(this.value)!=="0"&&jq.trim(this.value)!=="ANY"){o[jq.trim(this.name)]=jq.trim(this.value)}})}var e=jq("#filtersblock input[name=roomTypeFilter]").filter(":checked");if(e.length){o.roomType=e.val()}var l=jq("#filtersblock input[name=boardTypeFilter]").filter(":checked");if(l.length){o.boardType=l.val()}var h=jq("#filtersblock input[name=providerFilter]").filter(":checked");if(h.length>0){h.each(function(){j.push(jq.trim(this.value))});if(j.length>0){o.providers=j.join(",")}}if(d.length>0){d.each(function(){f.push(jq.trim(this.name))});if(f.length>0){o.amenities=f.join(",")}}if(n.length>0){var c=jq.parseJSON(n.val());if(typeof c!=="undefined"){a=c["data-dir"]==="desc"?"true":"false";o.sort=c["data-sort"].toUpperCase();o.desc=a}}if(b.destinationsshown&&b.destinationsshown.value==="true"){o.destinationsshown=true}if(g.length>0){o.hotelsOnly=true}if(m.length>0){if(m.is(":checked")===true){o.showEmpty=true}}if(jq.isEmptyObject(o)){return null}return o}function createSearchCriteriaUrl(d){var b=[],c;d=jq.trim(d);if(d===""){return"-"}var a=JSON.parse(d);if(a.length===0){return"-"}for(c=0;c<a.length;c++){b.push(encodeSearchCriteria(a[c].name)+"-"+a[c].id)}return b.join(",")}function encodeSearchCriteria(b){var a=b+"";return R9.Common.RemoveAccents.removeAccentedChars(a.replace(/ - /g,"-").replace(/ /g,"-")).replace(/[^A-Za-z0-9_\-.]/g,"")}function buildHotelDetailsHash(e,f,c){var b,d="-h-",a;if(e.indexOf("/")===0){e=e.substring(1)}b=e.split("/");if(b&&b.length>1&&(b[0]==="urlaub"||b[0]==="packagetours"||b[0]==="sejours"||b[0]==="ferien"||b[0]==="vacaciones"||b[0]==="vacanze")){b=b.splice(1,b.length)}if(b.length<3){return b.join("/")}if(b[1].indexOf(d)===-1){b.splice(1,0,escapeNiceUrl(c+d+f))}else{a=b[1].split(d);if(a.length===2){a[0]=c;a[1]=f;b[1]=a.join(d);b[1]=escapeNiceUrl(b[1])}}return b.join("/")}function redirectToPackageTourUrlForHotel(b,e,a){if(b.indexOf("/")===0){b=b.substring(1)}var d=buildHotelDetailsHash(b,e,a);var c=b.split("/");if(c&&c.length>0){redirectToPackageTourUrl(c[0]+"/"+d)}}function redirectToPackageTourUrl(a){var c,b;if(a.indexOf("/")===0){a=a.substring(1)}c=a.split("/");if(c&&c.length>1){b=c.splice(1,c.length).join("/");window.location.assign(window.location.protocol+"//"+window.location.hostname+"/"+c[0]+"/"+b)}}function escapeNiceUrl(a){return R9.Common.RemoveAccents.removeAccentedChars(a.replace(/, /g,",").replace(/ - /g,",").replace(/ /g,"-")).replace(/[^A-Za-z0-9_\-,.]/g,"")}(function(a){R9.extend("URL",{Generator:function(c,b){this.form=a(c);this.options=a.extend(true,{},this.options,b||{})}});R9.extend("URL.Generator",{generate:function(c,b){var d=new R9.URL.Generator(c,b);return d.generate()}});R9.extend("URL.Generator.prototype",{form:null,options:{isInlineSearch:false,maxLegs:4,useCleanUrls:false},generate:function(){if(!this.isUseShortUrls()){return null}var b=this.generateFullUrl();this.setUpCookie(b);return b},generateFullUrl:function(){switch(this.getElement("tab").val()){case"flights":var c=this.getElement("dtFlexCat");var j=c.length?((this.options.isInlineSearch)?c.val():c.filter(":checked").val()):null;var f=this.getElement("oneway");if(f.length>1){f=f.filter(":checked")}var b=null;var k=null;var g=null;if((this.options.isInlineSearch&&j!="weekend")||(!this.options.isInlineSearch&&(f.val()=="n"||f.val()=="y"))){k=this.getElement("depart_date").datepicker("getDate");if(f.val()=="n"){g=this.getElement("return_date").datepicker("getDate")}}else{if(f.val()=="m"){b=[];for(var h=0;h<this.options.maxLegs;h++){b[h]=this.getElement("depart_date"+h).datepicker("getDate")}}}return generateFlightsUrl(this.form.get(0),k,g,b,this.options.maxLegs,j);case"flightsMultiCity":return window.location.href;case"hotels":var e=generateHotelsUrl(this.form.get(0),this.getElement("checkin_date").datepicker("getDate"),this.getElement("checkout_date").datepicker("getDate"),(this.getElement("hidToDetailsPage").val()==="true"));var d=R9.ViewState.getUrlStateString();if(d){e+=R9.ViewState.getInstance().options.stateDelimiter+d}return e;case"cars":return generateCarsUrl(this.form.get(0),this.getElement("pickup_date").datepicker("getDate"),this.getElement("dropoff_date").datepicker("getDate"));case"vacations":return generateVacationsUrl(this.form.get(0),this.getElement("depart_date").datepicker("getDate"),this.getElement("return_date").datepicker("getDate"));case"cruises":return generateCruisesUrl(this.form.get(0));case"packagetours":return generatePackageToursUrl(this.form.get(0));default:return""}},isUseShortUrls:function(){var b=this.getElement("usecleanurl");if(b.length){return b.val()=="true"}return this.options.useCleanUrls},getElement:function(b){return this.form.find('[name="'+b+'"]')},setUpCookie:function(b){if(b==null){return}var d="/"+this.getElement("tab").val()+"/";var c=encodeURIComponent(b.substring(b.indexOf(d)+d.length));if(b.indexOf(d)<0){c=encodeURIComponent(b.substring(b.indexOf("/",1)+1))}if(this.getElement("tab").val()=="flightsMultiCity"){c=encodeURIComponent(this.getElement("searchparam").val())}var f="hiddenParams"+c;var e=this.collectCookieParams();document.cookie=f+"="+encodeURIComponent(e)+"; path=/"},collectCookieParams:function(){var c={};var d;var l=["src","searchingagain","c2s","po","personality","originsid","provider","r9secret","r9debug","searchType","recent","instasearch_id","fid","prevsearch_id"];for(d=0;d<l.length;d++){var e=this.getElement(l[d]);if(e.length){c[l[d]]=e.val()}}var j=this.getElement("comparetosite");if(j.length){var g=[];j.each(function(){if((this.checked&&this.type=="checkbox")||this.type=="hidden"){g.push(this.value)}});c.comparetosite=g.join(",")}var k=this.getElement("comparetokayak");if(k.length){var g=[];k.each(function(){if(this.checked){g.push(this.value)}});c.comparetokayak=g.join(",")}var b=this.getElement("primetehkila");if(b.length&&b.get(0).checked){c.primetehkila=b.val()}var f=this.getElement("ccFeeCalcSelector");var h=this.getElement("ccFeeCalcEnable");if((h.length&&h.get(0).checked)||h.length==0){c.ccFeeCalcSelector=f.val()}else{if(h.length&&!h.get(0).checked){c.ccFeeCalcSelector="none"}}return decodeURIComponent(a.param(c))}})})(jq||jQuery);function generateSearchUrl(b,a){return R9.URL.Generator.generate(b,{isInlineSearch:a})}function setupSearchParams(a){document.cookie="formParams="+encodeURIComponent(a)+"; path=/";return true}function hideCCCpicker(){var a=jq("#countryList, #headermenudropdown, #morecurrencies");if(a.length){a.css("display","none");hideMeOnPopup(false)}}function loadCCCpicker(){var a=jq("#countrypickerlink"),c=a.offset(),b=jq("#countryList");jq("#countryList").css({left:c.left+a.width()-b.width(),top:c.top+a.height()+1});hideMeOnPopup(true);b.show();jq(document.body).one("click",function(f){var d=f.pageX,j=f.pageY,g=jq("#countryList"),h=g.offset();if(d<h.left||d>(h.left+g.width())||j<h.top||j>(h.top+g.height())){hideCCCpicker()}});jq("#countryList, #countrypickerlink, #headermenudropdown, #morecurrencies").click(function(d){d.stopPropagation()})}function saveCurrency(b,a){jq.ajax({type:"POST",url:"/k/ident/currency",data:{currency:b,posted:true,save:a},dataType:"text",success:function(){location.reload()},cache:false})}R9.extend("Analytics",{Config:{LINK_REQUEST_TIMEOUT:200,logTopStrip:true,logBottomStrip:true,logflightsForm:true,loghotelsForm:true,logcarsForm:true,logmoreForm:true,logdealsForm:true,logcruisesForm:true,logvacationsForm:true}});R9.extend("Analytics",{CommonLogging:function(){this.initialize()}});R9.extend("Analytics.CommonLogging.prototype",{logger:Logger.getInstance()||{log:jq.noop},initialize:function(){if(R9.Analytics.Config.logTopStrip){this._initTopStrip()}if(R9.Analytics.Config.logBottomStrip){this._initBottomStrip()}},_initTopStrip:function(){var a=this;function b(c){return a.before(a.logPureLink,"topstrip/"+c)}jq("#logo").on("click.topstrip",jq.proxy(this.before(this.logo),this));jq("#flights-link").on("click.topstrip",jq.proxy(b("flights"),this));jq("#hotels-link").on("click.topstrip",jq.proxy(b("hotels"),this));jq("#cars-link").on("click.topstrip",jq.proxy(b("cars"),this));jq("#deals-link").on("click.topstrip",jq.proxy(b("deals"),this));jq("#more-link").on("click.topstrip",jq.proxy(b("more"),this));jq("#mytripsheaderlink").on("click.topstrip",jq.proxy(b("trips"),this));jq("#mobilebug").on("click.topstrip",jq.proxy(b("mobileapp"),this));jq("#countrypickerlink").on("click.topstrip",jq.proxy(b("localecurrencychooser"),this))},_initBottomStrip:function(){var a=this;function b(c){return a.before(a.logPureLink,"bottomstrip/"+c)}jq("#aboutus-link").on("click.bottomstrip",jq.proxy(b("about"),this));jq("#privacy-link").on("click.bottomstrip",jq.proxy(b("privacy"),this));jq("#destinations-link").on("click.bottomstrip",jq.proxy(b("destinations"),this));jq("#help-link").on("click.bottomstrip",jq.proxy(b("help"),this))},before:function(b,c){var a=this;return function(d){d.preventDefault();b.call(a,d,c)}},log:function(b,a){this.logger.log("fd/"+b,{},this.complete(a),true)},complete:function(a){var b=this,d,c=false;d=setTimeout(function(){c=true;b._doNavigation(a)},R9.Analytics.Config.LINK_REQUEST_TIMEOUT);return function(){if(!c){clearTimeout(d);b._doNavigation(a)}}},_doNavigation:function(a){if(a){window.location.href=a}},logo:function(){var a=jq("#logo").attr("href");this.log("topstrip/kayaklogo",a)},logPureLink:function(b,c){if(!c){return}var a=null;if(typeof b.target.tagName!="A"){a=jq(b.target).closest("a").prop("href")}else{a=b.target.href}this.log(c,a)}});var LogUserEvents=true||true;new R9.Analytics.CommonLogging();

;var jsck_r9="v544";
/* et=20, mt=265, c=p4, i=sparkle056, v=R148, cc=4, r=none, af=kayak, afs=kayak, xp=none, pm=bb, lc=en, cc=US */
