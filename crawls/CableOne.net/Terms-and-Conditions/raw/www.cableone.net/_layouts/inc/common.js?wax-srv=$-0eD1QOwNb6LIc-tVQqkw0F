
var C1=function(){var startup=[];var shaderId='shader';var locationCookie='c1_location';var cityCookie='c1_City';var stateCookie='c1_State';var systemIdCookie='c1_systemID';var zipCookie='c1_zipcode';var oldSystemCookie='CableOneSystem';var statesServiced=[];var selectedCities=[];var _handlerPrefix='/_controltemplates/';function fade(elem,o,inc,eq,postFunc){function fadeloop(){if(eq(o)){o+=inc;$j(elem).fadeTo(o);setTimeout(function(){fadeloop();},10);}else{if(postFunc!=null){postFunc();}}}
fadeloop();}
function displayLocationPanel(showLocation){if(showLocation){$j('div.#c1_LocationSet').hide();$j('div.#c1_LocationNotSet').show();}else{$j('div.#c1_LocationSet').show();$j('div.#c1_LocationNotSet').hide();$j('#shadow').hide();}}
function getHeight(){return document.body.offsetHeight+50;}
function storeZip(zip){if(zip!=null&&zip!=''){C1.setCookie(zipCookie,zip,14);}}
function storeState(state){if(state!=null&&state!=''){C1.setCookie(stateCookie,state,14);}}
function storeCity(city){if(city!=null&&city!=''){C1.setCookie(cityCookie,city,14);}}
function storeOldSystem(code){if(code!=null&&code!=''){C1.setCookie(oldSystemCookie,code,365);}}
function getOrCreateShader(elemId){var elem=$j(elemId);if(elem==null){elem=createDiv(elemId,{backgroundColor:'#000',width:'100%',height:height()+'px',position:'absolute',top:'0px',left:'0px',zIndex:C1.topZ});$j(elem).hide();}
$j(elem).fadeTo(1.0);return elem;}
function createDiv(elemId,style,parent){var div=document.createElement('div');div.attr('id',elemId);if(parent==null){document.body.append(div);}else{parent.append(div);}
$j(div).css(style);return div;}
function getStates(){if(statesServiced.length==0){retrieveStates();}}
function bindList(list,objects,valField,textField){clearListItems(list);$j(list).prepend($j('<option></option>').val('').html('Select a city'));$j.each(objects,function(i,item){$j(list).append($j('<option></option>').val(item.Name).html(item.Name));});}
function clearListItems(list){$j(list).html("");}
function retrieveCities(callback){$j('#cityList').html('');$j.ajax({type:'GET',url:C1.ajaxUrl,data:'f=getCities&state='+C1.selectedState.Abbreviation,contentType:'application/json; charset=utf-8',dataType:'json',success:function(data){selectedCities=data;var cityText="";$j.each(data,function(i,item){cityText=cityText+'<div class="setLocationSystem" onclick="javascript:C1.func.setLocation();" onmouseover="javascript:C1.func.setCity(\''+item.Name+'\')"><a class="systemLink" href="javascript:C1.func.setLocation();" ><span style="color: #FFFFFF !important;">'+item.Name+'</span></a></div>';});$j('#cityList').html(cityText);bindList('#c1_cityList',data,'Name','Name');},failure:function(data){}});}
function getCityByZip(zipCode,callback){$j.ajax({type:'GET',url:C1.ajaxUrl,data:'f=getCityByZip&zip='+zipCode,contentType:'application/json; charset=utf-8',dataType:'json',success:function(data){if(data==null){alert('Zip code '+zipCode+' is not serviced.');}else{C1.selectedState={Abbreviation:data.State};C1.selectedCity=data;callback(data);}},failure:function(data){}});}
function retrieveAreas(callback){$j.ajax({type:'GET',url:C1.ajaxUrl,data:'f=getAreas&cityId='+C1.selectedCity.Id,contentType:'application/json; charset=utf-8',dataType:'json',success:function(data){callback(data);},failure:function(data){}});}
function retrieveStates(){$j.ajax({type:'GET',url:C1.ajaxUrl,data:'f=getStates',contentType:'application/json; charset=utf-8',dataType:'json',success:function(data){statesServiced=data;},failure:function(data){}});}
function lookupState(stateAbbr){return lookup(statesServiced,function(state){return state.Abbreviation==stateAbbr;});}
function lookupCity(cityName){return lookup(selectedCities,function(city){return city.Name==cityName;});}
function lookup(arr,comparer){for(var i=0;i<arr.length;i++){if(comparer(arr[i])){return arr[i];}}
return null;}
function displayAreas(){retrieveAreas(function(areas){var areaRows="<tr>\n";var count=0;$j.each(areas,function(i,item){count=count+1;if(count==2){areaRows=areaRows+'<td>'+item+'</td>\n</tr>\n<tr>\n';count=0;}else{areaRows=areaRows+'<td>'+item+'</td>\n';}});areaRows=areaRows+'<td></td>\n</tr>\n';$j('#serviceAreaTable').html('<table class="c1_list">\n<tbody>\n'+areaRows+'</tbody>\n</table>\n');});}
var pub={topZ:100,loginActive:false,locationActive:false,ajaxUrl:_handlerPrefix+'ajax.aspx',selectedState:null,selectedCity:null,handlerPathPrefix:_handlerPrefix,effects:{embolden:function(elem){$j(elem).css({fontWeight:'bold'});},unbold:function(elem){$j(elem).css({fontWeight:'normal'});},lightbox:function(boxElem){C1.effects.shade();var z=C1.topZ+1;C1.effects.center(boxElem);$j(boxElem).css({zIndex:z});$j(boxElem).show();},unLightbox:function(boxElem){C1.effects.fadeOut(shaderId,function(){$j(shaderId).hide();});$j(boxElem).hide();},center:function(boxElem){var boxW=$j(boxElem).width();var screenW=$j(boxElem).offsetParent().width();var x=screenW/2-boxW/2;$j(boxElem).css({position:'absolute',top:'50px',left:x+'px'});},shade:function(){var shader=getOrCreateShader(shaderId);shader.show();C1.effects.fadeIn(shaderId,0.8);},fadeIn:function(elem,maxOpacity){fade(elem,0.0,0.20,function(o){return o<maxOpacity;});},fadeOut:function(elem,postFunc){fade(elem,1.0,-0.20,function(o){return o>0.0;},postFunc);}},func:{searchZipCode:function(zipBox){var zip=$j('#c1_zipLookup').val();if(zip!=null&&zip!=''){storeZip(zip);getCityByZip(zip,function(city){C1.func.setState(city.State);C1.selectedState=lookupState(city.State);C1.selectedCity=city;C1.func.setLocation();});}
else{alert('zip can not be blank');}},getOldSystem:function(oldSystem,callback){},showSetLocation:function(){$j('#ctl00_SetLocation_LocationMap').attr("src","/SiteCollectionImages/Map/usmap_MASTER.gif");C1.func.initStates();getStates();$j('div.#c1_setLocationContainer').css({'width':'600px','position':'absolute','zIndex':'3000'});$j('div.#c1_setLocationContainer').css("left","186px");C1.func.togglePanels(0);$j('.setlocation').append('<div id="shadow" style="position:fixed; z-index:2999; background-color:#000; display:none; top: 0px; left: 0px;"></div>');var maskHeight=$j(document).height();var maskWidth=$j(window).width();$j('#shadow').css({'width':maskWidth,'height':maskHeight});$j('#shadow').fadeIn(500);$j('#shadow').fadeTo("slow",0.8);$j('div.#c1_setLocationContainer').fadeIn(1000);},hideLocation:function(){$j('div.#c1_setLocationContainer').hide();$j('#shadow').hide();},checkLocation:function(){var loc=C1.readCookie(cityCookie);var state=C1.readCookie(stateCookie);$j('#yourLocation').html(loc+', '+state);displayLocationPanel(loc==null||loc=='');},setState:function(state){$j('#cityList').html('');if(typeof(state)=='string'){state=lookupState(state);}
C1.selectedState=state;$j('#selectedState').addClass("nobr");$j('#selectedStateFooter2').html(C1.selectedState.StateName);$j('#selectedStateFooter').html(C1.selectedState.StateName);$j('#selectedState').html(C1.selectedState.StateName);$j('#cityImage').attr('src',C1.selectedState.ImageUrl);$j('#stateImage').attr('src',C1.selectedState.ImageUrl);$j('#serviceAreaTable').html('');retrieveCities(function(acc,city){acc+='<div class="setLocationSystem" onclick="javascript:C1.func.setLocation();" onmouseover="javascript:C1.func.setCity(\''+city.Name+'\')"><a class="systemLink" href="javascript:C1.func.setLocation();" ><span style="color: #FFFFFF !important;">'+city.Name+'</span></a></div>';return acc;});C1.func.togglePanels(1);},setStateFromList:function(list){var state=list.value;C1.func.setState(state);},setCityFromList:function(list){var city=list.value;C1.func.setCity(city);C1.func.setLocation();},setCity:function(cityName){$j('#selectedCity').html(cityName+', '+C1.selectedState.Abbreviation);var city=lookupCity(cityName);C1.selectedCity=city;$j('#serviceAreaTable').html('Loading...');displayAreas();},setLocation:function(){var days=14;var loc=C1.selectedCity.Name+', '+C1.selectedState.Abbreviation;$j('#yourLocation').html(loc);if($j('#saveLocationFlag:checked')==true){days=365;}
C1.setCookie(cityCookie,C1.selectedCity.Name,days);C1.setCookie(stateCookie,C1.selectedState.Abbreviation,days);C1.setCookie(systemIdCookie,C1.selectedCity.SystemID,days);document.location.reload(true);},clearLocation:function(){C1.clearCookie(oldSystemCookie);C1.clearCookie(locationCookie);C1.clearCookie(cityCookie);C1.clearCookie(stateCookie);C1.clearCookie(systemIdCookie);document.location.reload(true);},togglePanels:function(index){$j('.c1_locationPanel').hide();if(index==null){index=0;}
$j('#c1_stepNum').html(index+1+'');var id=index+1;$j('#c1_locationPanel'+id).show();},initStates:function(){getStates();}},moveElem:function(elemId){},setCookie:function(name,value,daysTilExpires,path){if(path==null){path='/';}
var today=new Date();var expire=new Date();expire.setTime(today.getTime()+3600000*24*daysTilExpires);document.cookie=name+"="+value+";expires="+expire.toGMTString()+'; path='+path;},readCookie:function(c_name){if(document.cookie.length>0)
{c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1)
{c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length;return unescape(document.cookie.substring(c_start,c_end));}}
return"";},clearCookie:function(name){var today=new Date();var expire=new Date();expire.setTime(today.getTime()-1);document.cookie=name+"=;expires="+expire.toGMTString()+'; path=/';document.cookie=name+"=;expires="+expire.toGMTString()+'; path=/;domain=cableone.net';document.cookie=name+"=;expires="+expire.toGMTString()+'; path=/;domain=www.cableone.net';},addInit:function(func){startup[startup.length]=func;},init:function(){for(var i=0;i<startup.length;i++){startup[i]();}}};return pub;}();