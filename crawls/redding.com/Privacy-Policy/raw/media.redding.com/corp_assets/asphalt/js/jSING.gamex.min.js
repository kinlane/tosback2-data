var jSingGameX={toolTips:{tinyTips:function(supCont,selector,position,animSpeed,delayLength){var tipFrame='<div class="tinyTip position-'+position+'"><div class="content"></div><div class="bottom">&nbsp;</div></div>';var animSpeed=animSpeed,delayLength=delayLength;var tinyTip;var tText;$(selector).hover(function(){var self=$(this),position=$(self).position();$("body").append(tipFrame);tinyTip=$("div.tinyTip");tinyTip.hide();var tipTitle=$(self).find("img").attr("alt"),badgeParent=$(self).parent(),badgeImg=badgeParent.find("img").attr("src"),badgeAndTitle="<img src ='"+badgeImg+"' class='badgeImage' /><p class='badgeDescription'>"+tipTitle+"</p>";
if(supCont==="title"){var tipCont=$(self).attr("title")}else{if(supCont==="badgeAndTitle"){var tipCont=badgeAndTitle}else{if(supCont==="divView"){var tipSelector=$(self).attr("href"),tipDiv=$(tipSelector).html(),tipCont=tipDiv}else{if(supCont!=="title"||"badgeAndTitle"||"divView"){var tipCont=supCont}}}}$(".tinyTip .content").html(tipCont);tText=$(self).attr("title");$(self).attr("title","");if(position==="right"){var yOffset=($(self).height())-(tinyTip.height()/3.3);var xOffset=($(self).width()*2)-(tinyTip.width()/1.3)}else{if(position==="left"){var yOffset=($(self).height())-(tinyTip.height()/3.3);
var xOffset=(tinyTip.width()+14)}else{if(position==="bottom"){var yOffset=($(self).height())-((tinyTip.height()));var xOffset=(((tinyTip.width()-10)/2))-($(this).width()/2)}else{if(position!=="right"||"left"||"bottom"){var yOffset=tinyTip.height()+17;var xOffset=(((tinyTip.width()-10)/2))-($(this).width()/2)}}}}var pos=$(self).offset();var nPos=pos;nPos.top=pos.top-yOffset;nPos.left=pos.left-xOffset;tinyTip.css("position","absolute").css("z-index","1000");tinyTip.css(nPos).delay(delayLength).fadeIn(animSpeed)},function(){$(this).attr("title",tText);$("div.tinyTip").fadeOut(animSpeed,function(){$(this).remove()
})})},init:function(supCont,selector,position,animSpeed,delayLength){var self=this;self.tinyTips(supCont,selector,position,animSpeed,delayLength)}},toolBar:{barToggle:function(){var suggestOpened=false,suggestHeight=$("#about_content").innerHeight();$(".suggestToggle").click(function(e){e.preventDefault();if(suggestOpened){$("#site_toolbar").animate({bottom:"-="+suggestHeight,easing:"linear"},400)}else{$("#site_toolbar").animate({bottom:"+="+suggestHeight,easing:"linear"},400)}$("#about_content").slideToggle(400);suggestOpened=suggestOpened?false:true})},pointAdd:function(pointsAdd){var points="<p>+"+pointsAdd+"</p>",currentPoints=$("#pointCount").text(),newPoints=parseInt(currentPoints)+parseInt(pointsAdd);
$(".pointPopup").empty().append(points).show("fast").delay(1000).hide("fast");$("#pointCount").replaceWith("<span id='pointCount'>"+newPoints+"</span>")},barNotifyInit:function(object){var noteContainer=$("#notification_notes p");var trophyImg=$("#fullTrophy");var noteObject=object.Nitro.notifications.Notification;if(noteObject){var shareButtons="<li><a class='facebook shareLink' title='Share this badge on Facebook' href='http://facebook.com'><img src='http://media.redding.com/corp_assets/asphalt/img/icons/social/facebook_16.png' /></a></li> <li><a href='http://twitter.com/intent/tweet/?url=http://redding.com&text=I just won the "+noteObject.challenge+" badge from Redding.com!' title='Share this badge on Twitter'><img src='http://media.redding.com/corp_assets/asphalt/img/icons/social/twitter_16.png' alt='Share this on Twitter' /></a></li>";
var noteHTML="<div id='notification_wrapper'><span class='trophy'><span class='trophy_bg'></span><img src='"+noteObject.challengeTrophyFullUrl+"' width='97' id='fullTrophy' /></span> <span id='notification_message'>Congratulations! You just won the "+noteObject.challenge+" badge!</span> <ul id='trophyShare'><h6>Share to</h6>"+shareButtons+"</ul></div>";jSINGconf.socialShare.socialData.trophyShare={title:"I just won the "+noteObject.challenge+" badge from Redding.com!",url:"http://redding.com",description:noteObject.challengeActionPhrase,image:noteObject.challengeTrophyFullUrl}}noteContainer.html(noteHTML);
$("#notes_background").animate({backgroundColor:"#366581"},300).delay(1300).animate({backgroundColor:"#415c11"},800);$("#fullTrophy").delay(4000).animate({width:"34px",top:"2px",left:"22px"},1500,function(){});$("#trophyShare").delay(4500).fadeIn(1000);$(".trophy_bg").delay(4500).fadeIn(1000);jSING.socialShare.init()},init:function(){var self=this;self.barToggle()}},apiCalls:{cb_weeklyBadges:function(data,token){var recentBadges=data.Nitro.challenges.Challenge;if(data.Nitro.challenges==true){var weekBadges=0;$("#thisWeeksBadges").text("0")}else{if(typeof recentBadges.length=="undefined"){recentBadges=[recentBadges]
}try{if(data.Nitro.challenges.Challenge=="undefined"){}}catch(e){return}var numBadgesEarnedThisWeek=0;var SECONDS_IN_WEEK=604800;var endTime=Math.round((new Date().getTime()/1000));var startTime=endTime-SECONDS_IN_WEEK;$.each(recentBadges,function(key,value){var completedTime=value.ts;var userId=value.userId;var challengeName=value.name;if(completedTime>startTime){numBadgesEarnedThisWeek+=1}else{}});if(numBadgesEarnedThisWeek<=0){$("#thisWeeksBadges").text("0")}else{if(numBadgesEarnedThisWeek==1){$("#thisWeeksBadges").text("1")}else{$("#thisWeeksBadges").text(numBadgesEarnedThisWeek)}}}},leaderboardToday:function(data,token){if(data.Nitro.leaders.Leader){var leaders=data.Nitro.leaders.Leader;
var leaderString="";if(typeof leaders.length=="undefined"){leaders=[leaders]}$.each(leaders,function(key,leader){var leaderRank=key+1;leaderString+="<li><span class='leaderRank'>"+leaderRank+".</span><span class='leaderId'><a href='/users/"+leader.userId+"/'>"+leader.userId+"</a></span><span class='leaderPoints'>"+leader.points+" points</span></li>"});$("#community_leaders_today").html(leaderString)}else{$("#community_leaders_today").html("<p>Today's leaderboard is still wide open!</p>")}},leaderboardWeek:function(data,token){if(data.Nitro.leaders.Leader){var leaders=data.Nitro.leaders.Leader;var leaderString="";
if(typeof leaders.length=="undefined"){leaders=[leaders]}$.each(leaders,function(key,leader){var leaderRank=key+1,leaderUrl=leader.userId.toLowerCase();leaderString+="<li><span class='leaderRank'>"+leaderRank+".</span><span class='leaderId'><a href='/users/"+leader.userId+"/'>"+leader.userId+"</a></span><span class='leaderPoints'>"+leader.points+" points</span></li>"});$("#community_leaders_week").html(leaderString)}},challengeProgress:function(data,token){var NUM_CHALLENGES_TO_OUTPUT=2;var numFound=0;var progressChallenge=data.Nitro.challenges.Challenge;$.each(progressChallenge,function(i,challenge){if(numFound>=NUM_CHALLENGES_TO_OUTPUT){return false
}var challengeTags=parseInt(challenge.tags);if(challenge.canAchieveChallenge=="true"&&challenge.completionCount!==1&&isNaN(challengeTags)){var actionName,actionName1,progressId="progress"+i;ruleSpan="";numFound=numFound+1;if(challenge.rules.Rule.actionTag){var actionName=challenge.rules.Rule.description,actionAchieved=challenge.rules.Rule.achieved,actionGoal=challenge.rules.Rule.goal;ruleSpan+="<span class='ruleSpan'>"+actionName+": "+actionAchieved+"/"+actionGoal+"</span>"}else{if(challenge.rules.Rule[0]){$.each(challenge.rules.Rule,function(key,rule){ruleSpan+="<span class='ruleSpan' id='ruleSpan"+key+"'>"+rule.description+": "+rule.achieved+"/"+rule.goal+"</span>"
})}}$("table.suggestions").append("<tr id='"+progressId+"'><td class='whatToDo'>"+challenge.description+"</td><td class='badge'>"+challenge.name+"</td><td class='progress'>"+ruleSpan+"</td></tr>")}});$("table.suggestions").append("<tr><td class='whatToDo'>For more suggestions <a href='/accounts/rewards/' title='View your trophy case to see all the badges your can earn and how to earn them.'>view your trophy case</a></td></tr>")},weeklyPoints:function(data,token){weeklyPoints=data.Nitro.Balance.points;$("#thisWeeksPoints").append(weeklyPoints)},processPoints:function(data,token){balance=data.Nitro.Balance.points;
$("#notification_score p").text(balance+" pts")},processNotes:function(data,token){var noteHTML="notification.html";if(data.Nitro.notifications.Notification){jSingGameX.toolBar.barNotifyInit(data)}}},init:function(pageType){var self=this;self.toolBar.init()}};jSingGameX.init();